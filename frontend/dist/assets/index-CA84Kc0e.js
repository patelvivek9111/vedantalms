function s5(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fh={exports:{}},vl={},Bh={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function a5(){if(_N)return Dt;_N=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function w(G,Z,F){this.props=G,this.context=Z,this.refs=v,this.updater=F||x}w.prototype.isReactComponent={},w.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},w.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function C(){}C.prototype=w.prototype;function j(G,Z,F){this.props=G,this.context=Z,this.refs=v,this.updater=F||x}var _=j.prototype=new C;_.constructor=j,b(_,w.prototype),_.isPureReactComponent=!0;var k=Array.isArray,D=Object.prototype.hasOwnProperty,A={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(G,Z,F){var Ne,ye={},B=null,re=null;if(Z!=null)for(Ne in Z.ref!==void 0&&(re=Z.ref),Z.key!==void 0&&(B=""+Z.key),Z)D.call(Z,Ne)&&!T.hasOwnProperty(Ne)&&(ye[Ne]=Z[Ne]);var X=arguments.length-2;if(X===1)ye.children=F;else if(1<X){for(var U=Array(X),ne=0;ne<X;ne++)U[ne]=arguments[ne+2];ye.children=U}if(G&&G.defaultProps)for(Ne in X=G.defaultProps,X)ye[Ne]===void 0&&(ye[Ne]=X[Ne]);return{$$typeof:e,type:G,key:B,ref:re,props:ye,_owner:A.current}}function L(G,Z){return{$$typeof:e,type:G.type,key:Z,ref:G.ref,props:G.props,_owner:G._owner}}function q(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function O(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(F){return Z[F]})}var $=/\/+/g;function z(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?O(""+G.key):Z.toString(36)}function K(G,Z,F,Ne,ye){var B=typeof G;(B==="undefined"||B==="boolean")&&(G=null);var re=!1;if(G===null)re=!0;else switch(B){case"string":case"number":re=!0;break;case"object":switch(G.$$typeof){case e:case t:re=!0}}if(re)return re=G,ye=ye(re),G=Ne===""?"."+z(re,0):Ne,k(ye)?(F="",G!=null&&(F=G.replace($,"$&/")+"/"),K(ye,Z,F,"",function(ne){return ne})):ye!=null&&(q(ye)&&(ye=L(ye,F+(!ye.key||re&&re.key===ye.key?"":(""+ye.key).replace($,"$&/")+"/")+G)),Z.push(ye)),1;if(re=0,Ne=Ne===""?".":Ne+":",k(G))for(var X=0;X<G.length;X++){B=G[X];var U=Ne+z(B,X);re+=K(B,Z,F,U,ye)}else if(U=g(G),typeof U=="function")for(G=U.call(G),X=0;!(B=G.next()).done;)B=B.value,U=Ne+z(B,X++),re+=K(B,Z,F,U,ye);else if(B==="object")throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return re}function te(G,Z,F){if(G==null)return G;var Ne=[],ye=0;return K(G,Ne,"","",function(B){return Z.call(F,B,ye++)}),Ne}function se(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(F){(G._status===0||G._status===-1)&&(G._status=1,G._result=F)},function(F){(G._status===0||G._status===-1)&&(G._status=2,G._result=F)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var W={current:null},M={transition:null},Y={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:M,ReactCurrentOwner:A};function P(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:te,forEach:function(G,Z,F){te(G,function(){Z.apply(this,arguments)},F)},count:function(G){var Z=0;return te(G,function(){Z++}),Z},toArray:function(G){return te(G,function(Z){return Z})||[]},only:function(G){if(!q(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Dt.Component=w,Dt.Fragment=r,Dt.Profiler=a,Dt.PureComponent=j,Dt.StrictMode=s,Dt.Suspense=d,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Dt.act=P,Dt.cloneElement=function(G,Z,F){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var Ne=b({},G.props),ye=G.key,B=G.ref,re=G._owner;if(Z!=null){if(Z.ref!==void 0&&(B=Z.ref,re=A.current),Z.key!==void 0&&(ye=""+Z.key),G.type&&G.type.defaultProps)var X=G.type.defaultProps;for(U in Z)D.call(Z,U)&&!T.hasOwnProperty(U)&&(Ne[U]=Z[U]===void 0&&X!==void 0?X[U]:Z[U])}var U=arguments.length-2;if(U===1)Ne.children=F;else if(1<U){X=Array(U);for(var ne=0;ne<U;ne++)X[ne]=arguments[ne+2];Ne.children=X}return{$$typeof:e,type:G.type,key:ye,ref:B,props:Ne,_owner:re}},Dt.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:i,_context:G},G.Consumer=G},Dt.createElement=I,Dt.createFactory=function(G){var Z=I.bind(null,G);return Z.type=G,Z},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(G){return{$$typeof:u,render:G}},Dt.isValidElement=q,Dt.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:se}},Dt.memo=function(G,Z){return{$$typeof:m,type:G,compare:Z===void 0?null:Z}},Dt.startTransition=function(G){var Z=M.transition;M.transition={};try{G()}finally{M.transition=Z}},Dt.unstable_act=P,Dt.useCallback=function(G,Z){return W.current.useCallback(G,Z)},Dt.useContext=function(G){return W.current.useContext(G)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(G){return W.current.useDeferredValue(G)},Dt.useEffect=function(G,Z){return W.current.useEffect(G,Z)},Dt.useId=function(){return W.current.useId()},Dt.useImperativeHandle=function(G,Z,F){return W.current.useImperativeHandle(G,Z,F)},Dt.useInsertionEffect=function(G,Z){return W.current.useInsertionEffect(G,Z)},Dt.useLayoutEffect=function(G,Z){return W.current.useLayoutEffect(G,Z)},Dt.useMemo=function(G,Z){return W.current.useMemo(G,Z)},Dt.useReducer=function(G,Z,F){return W.current.useReducer(G,Z,F)},Dt.useRef=function(G){return W.current.useRef(G)},Dt.useState=function(G){return W.current.useState(G)},Dt.useSyncExternalStore=function(G,Z,F){return W.current.useSyncExternalStore(G,Z,F)},Dt.useTransition=function(){return W.current.useTransition()},Dt.version="18.3.1",Dt}var EN;function lf(){return EN||(EN=1,Bh.exports=a5()),Bh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DN;function i5(){if(DN)return vl;DN=1;var e=lf(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,h={},g=null,x=null;m!==void 0&&(g=""+m),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)s.call(d,f)&&!i.hasOwnProperty(f)&&(h[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)h[f]===void 0&&(h[f]=d[f]);return{$$typeof:t,type:u,key:g,ref:x,props:h,_owner:a.current}}return vl.Fragment=r,vl.jsx=l,vl.jsxs=l,vl}var AN;function o5(){return AN||(AN=1,Fh.exports=i5()),Fh.exports}var n=o5(),N=lf();const V=qr(N),l5=s5({__proto__:null,default:V},[N]);var Yu={},zh={exports:{}},yn={},Gh={exports:{}},qh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function c5(){return TN||(TN=1,function(e){function t(M,Y){var P=M.length;M.push(Y);e:for(;0<P;){var G=P-1>>>1,Z=M[G];if(0<a(Z,Y))M[G]=Y,M[P]=Z,P=G;else break e}}function r(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var Y=M[0],P=M.pop();if(P!==Y){M[0]=P;e:for(var G=0,Z=M.length,F=Z>>>1;G<F;){var Ne=2*(G+1)-1,ye=M[Ne],B=Ne+1,re=M[B];if(0>a(ye,P))B<Z&&0>a(re,ye)?(M[G]=re,M[B]=P,G=B):(M[G]=ye,M[Ne]=P,G=Ne);else if(B<Z&&0>a(re,P))M[G]=re,M[B]=P,G=B;else break e}}return Y}function a(M,Y){var P=M.sortIndex-Y.sortIndex;return P!==0?P:M.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,h=null,g=3,x=!1,b=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var Y=r(m);Y!==null;){if(Y.callback===null)s(m);else if(Y.startTime<=M)s(m),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=r(m)}}function k(M){if(v=!1,_(M),!b)if(r(d)!==null)b=!0,se(D);else{var Y=r(m);Y!==null&&W(k,Y.startTime-M)}}function D(M,Y){b=!1,v&&(v=!1,C(I),I=-1),x=!0;var P=g;try{for(_(Y),h=r(d);h!==null&&(!(h.expirationTime>Y)||M&&!O());){var G=h.callback;if(typeof G=="function"){h.callback=null,g=h.priorityLevel;var Z=G(h.expirationTime<=Y);Y=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===r(d)&&s(d),_(Y)}else s(d);h=r(d)}if(h!==null)var F=!0;else{var Ne=r(m);Ne!==null&&W(k,Ne.startTime-Y),F=!1}return F}finally{h=null,g=P,x=!1}}var A=!1,T=null,I=-1,L=5,q=-1;function O(){return!(e.unstable_now()-q<L)}function $(){if(T!==null){var M=e.unstable_now();q=M;var Y=!0;try{Y=T(!0,M)}finally{Y?z():(A=!1,T=null)}}else A=!1}var z;if(typeof j=="function")z=function(){j($)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=$,z=function(){te.postMessage(null)}}else z=function(){w($,0)};function se(M){T=M,A||(A=!0,z())}function W(M,Y){I=w(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,se(D))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(M){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var P=g;g=Y;try{return M()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var P=g;g=M;try{return Y()}finally{g=P}},e.unstable_scheduleCallback=function(M,Y,P){var G=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?G+P:G):P=G,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=P+Z,M={id:f++,callback:Y,priorityLevel:M,startTime:P,expirationTime:Z,sortIndex:-1},P>G?(M.sortIndex=P,t(m,M),r(d)===null&&M===r(m)&&(v?(C(I),I=-1):v=!0,W(k,P-G))):(M.sortIndex=Z,t(d,M),b||x||(b=!0,se(D))),M},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(M){var Y=g;return function(){var P=g;g=Y;try{return M.apply(this,arguments)}finally{g=P}}}}(qh)),qh}var PN;function u5(){return PN||(PN=1,Gh.exports=c5()),Gh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function d5(){if(RN)return yn;RN=1;var e=lf(),t=u5();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(a[o]=c,o=0;o<c.length;o++)s.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function g(o){return d.call(h,o)?!0:d.call(f,o)?!1:m.test(o)?h[o]=!0:(f[o]=!0,!1)}function x(o,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,p,y){if(c===null||typeof c>"u"||x(o,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function v(o,c,p,y,S,E,R){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=E,this.removeEmptyString=R}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new v(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];w[c]=new v(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new v(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new v(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new v(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new v(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function j(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(C,j);w[c]=new v(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(C,j);w[c]=new v(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(C,j);w[c]=new v(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function _(o,c,p,y){var S=w.hasOwnProperty(c)?w[c]:null;(S!==null?S.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,p,S,y)&&(p=null),y||S===null?g(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):S.mustUseProperty?o[S.propertyName]=p===null?S.type===3?!1:"":p:(c=S.attributeName,y=S.attributeNamespace,p===null?o.removeAttribute(c):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,y?o.setAttributeNS(y,c,p):o.setAttribute(c,p))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),M=Symbol.iterator;function Y(o){return o===null||typeof o!="object"?null:(o=M&&o[M]||o["@@iterator"],typeof o=="function"?o:null)}var P=Object.assign,G;function Z(o){if(G===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);G=c&&c[1]||""}return`
`+G+o}var F=!1;function Ne(o,c){if(!o||F)return"";F=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(de){var y=de}Reflect.construct(o,[],c)}else{try{c.call()}catch(de){y=de}o.call(c.prototype)}else{try{throw Error()}catch(de){y=de}o()}}catch(de){if(de&&y&&typeof de.stack=="string"){for(var S=de.stack.split(`
`),E=y.stack.split(`
`),R=S.length-1,H=E.length-1;1<=R&&0<=H&&S[R]!==E[H];)H--;for(;1<=R&&0<=H;R--,H--)if(S[R]!==E[H]){if(R!==1||H!==1)do if(R--,H--,0>H||S[R]!==E[H]){var J=`
`+S[R].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=R&&0<=H);break}}}finally{F=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Z(o):""}function ye(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=Ne(o.type,!1),o;case 11:return o=Ne(o.type.render,!1),o;case 1:return o=Ne(o.type,!0),o;default:return""}}function B(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case A:return"Portal";case L:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case K:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case O:return(o.displayName||"Context")+".Consumer";case q:return(o._context.displayName||"Context")+".Provider";case $:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case te:return c=o.displayName||null,c!==null?c:B(o.type)||"Memo";case se:c=o._payload,o=o._init;try{return B(o(c))}catch{}}return null}function re(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(c);case 8:return c===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function X(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function U(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ne(o){var c=U(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,E=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return S.call(this)},set:function(R){y=""+R,E.call(this,R)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(R){y=""+R},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function pe(o){o._valueTracker||(o._valueTracker=ne(o))}function xe(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=U(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function ke(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ze(o,c){var p=c.checked;return P({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function He(o,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=X(c.value!=null?c.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function it(o,c){c=c.checked,c!=null&&_(o,"checked",c,!1)}function Ge(o,c){it(o,c);var p=X(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?mt(o,c.type,p):c.hasOwnProperty("defaultValue")&&mt(o,c.type,X(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function rt(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function mt(o,c,p){(c!=="number"||ke(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var et=Array.isArray;function ve(o,c,p,y){if(o=o.options,c){c={};for(var S=0;S<p.length;S++)c["$"+p[S]]=!0;for(p=0;p<o.length;p++)S=c.hasOwnProperty("$"+o[p].value),o[p].selected!==S&&(o[p].selected=S),S&&y&&(o[p].defaultSelected=!0)}else{for(p=""+X(p),c=null,S=0;S<o.length;S++){if(o[S].value===p){o[S].selected=!0,y&&(o[S].defaultSelected=!0);return}c!==null||o[S].disabled||(c=o[S])}c!==null&&(c.selected=!0)}}function he(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return P({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ce(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(r(92));if(et(p)){if(1<p.length)throw Error(r(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:X(p)}}function Ee(o,c){var p=X(c.value),y=X(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function Ue(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ie(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ie(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var me,Q=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,S){MSApp.execUnsafeLocalFunction(function(){return o(c,p,y,S)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(me=me||document.createElement("div"),me.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=me.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function ae(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ve=["Webkit","ms","Moz","O"];Object.keys(Te).forEach(function(o){Ve.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Te[c]=Te[o]})});function We(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Te.hasOwnProperty(o)&&Te[o]?(""+c).trim():c+"px"}function nt(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,S=We(p,c[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,S):o[p]=S}}var st=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(o,c){if(c){if(st[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function lt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gt=null;function Rt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Kt=null,Vt=null,Qt=null;function nr(o){if(o=sl(o)){if(typeof Kt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=lu(c),Kt(o.stateNode,o.type,c))}}function Xt(o){Vt?Qt?Qt.push(o):Qt=[o]:Vt=o}function ss(){if(Vt){var o=Vt,c=Qt;if(Qt=Vt=null,nr(o),c)for(o=0;o<c.length;o++)nr(c[o])}}function Di(o,c){return o(c)}function Oa(){}var ta=!1;function fe(o,c,p){if(ta)return o(c,p);ta=!0;try{return Di(o,c,p)}finally{ta=!1,(Vt!==null||Qt!==null)&&(Oa(),ss())}}function qe(o,c){var p=o.stateNode;if(p===null)return null;var y=lu(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var sr=!1;if(u)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){sr=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{sr=!1}function rn(o,c,p,y,S,E,R,H,J){var de=Array.prototype.slice.call(arguments,3);try{c.apply(p,de)}catch(_e){this.onError(_e)}}var xr=!1,nn=null,Ur=!1,Bt=null,$r={onError:function(o){xr=!0,nn=o}};function fn(o,c,p,y,S,E,R,H,J){xr=!1,nn=null,rn.apply($r,arguments)}function Ai(o,c,p,y,S,E,R,H,J){if(fn.apply(this,arguments),xr){if(xr){var de=nn;xr=!1,nn=null}else throw Error(r(198));Ur||(Ur=!0,Bt=de)}}function zn(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function La(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function $a(o){if(zn(o)!==o)throw Error(r(188))}function om(o){var c=o.alternate;if(!c){if(c=zn(o),c===null)throw Error(r(188));return c!==o?null:o}for(var p=o,y=c;;){var S=p.return;if(S===null)break;var E=S.alternate;if(E===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===p)return $a(S),o;if(E===y)return $a(S),c;E=E.sibling}throw Error(r(188))}if(p.return!==y.return)p=S,y=E;else{for(var R=!1,H=S.child;H;){if(H===p){R=!0,p=S,y=E;break}if(H===y){R=!0,y=S,p=E;break}H=H.sibling}if(!R){for(H=E.child;H;){if(H===p){R=!0,p=E,y=S;break}if(H===y){R=!0,y=E,p=S;break}H=H.sibling}if(!R)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?o:c}function qo(o){return o=om(o),o!==null?Uc(o):null}function Uc(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Uc(o);if(c!==null)return c;o=o.sibling}return null}var Wc=t.unstable_scheduleCallback,Hc=t.unstable_cancelCallback,lm=t.unstable_shouldYield,cm=t.unstable_requestPaint,fr=t.unstable_now,Vc=t.unstable_getCurrentPriorityLevel,Se=t.unstable_ImmediatePriority,De=t.unstable_UserBlockingPriority,Fe=t.unstable_NormalPriority,wt=t.unstable_LowPriority,yt=t.unstable_IdlePriority,dt=null,Le=null;function Nt(o){if(Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(dt,o,void 0,(o.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:Je,ft=Math.log,xt=Math.LN2;function Je(o){return o>>>=0,o===0?32:31-(ft(o)/xt|0)|0}var ct=64,jt=4194304;function At(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function oe(o,c){var p=o.pendingLanes;if(p===0)return 0;var y=0,S=o.suspendedLanes,E=o.pingedLanes,R=p&268435455;if(R!==0){var H=R&~S;H!==0?y=At(H):(E&=R,E!==0&&(y=At(E)))}else R=p&~S,R!==0?y=At(R):E!==0&&(y=At(E));if(y===0)return 0;if(c!==0&&c!==y&&(c&S)===0&&(S=y&-y,E=c&-c,S>=E||S===16&&(E&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)p=31-Ye(c),S=1<<p,y|=o[p],c&=~S;return y}function Qe(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,S=o.expirationTimes,E=o.pendingLanes;0<E;){var R=31-Ye(E),H=1<<R,J=S[R];J===-1?((H&p)===0||(H&y)!==0)&&(S[R]=Qe(H,c)):J<=c&&(o.expiredLanes|=H),E&=~H}}function ar(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ra(){var o=ct;return ct<<=1,(ct&4194240)===0&&(ct=64),o}function _n(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function sn(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Ye(c),o[c]=p}function Et(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var S=31-Ye(p),E=1<<S;c[S]=0,y[S]=-1,o[S]=-1,p&=~E}}function Gn(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-Ye(p),S=1<<y;S&c|o[y]&c&&(o[y]|=c),p&=~S}}var St=0;function ys(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Wr,as,Fa,vs,It,Nr=!1,Ba=[],is=null,os=null,qt=null,mr=new Map,qn=new Map,bs=[],um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uw(o,c){switch(o){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":mr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":qn.delete(c.pointerId)}}function Uo(o,c,p,y,S,E){return o===null||o.nativeEvent!==E?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[S]},c!==null&&(c=sl(c),c!==null&&as(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),o)}function _P(o,c,p,y,S){switch(c){case"focusin":return is=Uo(is,o,c,p,y,S),!0;case"dragenter":return os=Uo(os,o,c,p,y,S),!0;case"mouseover":return qt=Uo(qt,o,c,p,y,S),!0;case"pointerover":var E=S.pointerId;return mr.set(E,Uo(mr.get(E)||null,o,c,p,y,S)),!0;case"gotpointercapture":return E=S.pointerId,qn.set(E,Uo(qn.get(E)||null,o,c,p,y,S)),!0}return!1}function dw(o){var c=za(o.target);if(c!==null){var p=zn(c);if(p!==null){if(c=p.tag,c===13){if(c=La(p),c!==null){o.blockedOn=c,It(o.priority,function(){Fa(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Yc(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=fm(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);gt=y,p.target.dispatchEvent(y),gt=null}else return c=sl(p),c!==null&&as(c),o.blockedOn=p,!1;c.shift()}return!0}function fw(o,c,p){Yc(o)&&p.delete(c)}function EP(){Nr=!1,is!==null&&Yc(is)&&(is=null),os!==null&&Yc(os)&&(os=null),qt!==null&&Yc(qt)&&(qt=null),mr.forEach(fw),qn.forEach(fw)}function Wo(o,c){o.blockedOn===c&&(o.blockedOn=null,Nr||(Nr=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,EP)))}function Ho(o){function c(S){return Wo(S,o)}if(0<Ba.length){Wo(Ba[0],o);for(var p=1;p<Ba.length;p++){var y=Ba[p];y.blockedOn===o&&(y.blockedOn=null)}}for(is!==null&&Wo(is,o),os!==null&&Wo(os,o),qt!==null&&Wo(qt,o),mr.forEach(c),qn.forEach(c),p=0;p<bs.length;p++)y=bs[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<bs.length&&(p=bs[0],p.blockedOn===null);)dw(p),p.blockedOn===null&&bs.shift()}var Ti=k.ReactCurrentBatchConfig,Kc=!0;function DP(o,c,p,y){var S=St,E=Ti.transition;Ti.transition=null;try{St=1,dm(o,c,p,y)}finally{St=S,Ti.transition=E}}function AP(o,c,p,y){var S=St,E=Ti.transition;Ti.transition=null;try{St=4,dm(o,c,p,y)}finally{St=S,Ti.transition=E}}function dm(o,c,p,y){if(Kc){var S=fm(o,c,p,y);if(S===null)Dm(o,c,y,Qc,p),uw(o,y);else if(_P(S,o,c,p,y))y.stopPropagation();else if(uw(o,y),c&4&&-1<um.indexOf(o)){for(;S!==null;){var E=sl(S);if(E!==null&&Wr(E),E=fm(o,c,p,y),E===null&&Dm(o,c,y,Qc,p),E===S)break;S=E}S!==null&&y.stopPropagation()}else Dm(o,c,y,null,p)}}var Qc=null;function fm(o,c,p,y){if(Qc=null,o=Rt(y),o=za(o),o!==null)if(c=zn(o),c===null)o=null;else if(p=c.tag,p===13){if(o=La(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Qc=o,null}function mw(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vc()){case Se:return 1;case De:return 4;case Fe:case wt:return 16;case yt:return 536870912;default:return 16}default:return 16}}var na=null,mm=null,Xc=null;function hw(){if(Xc)return Xc;var o,c=mm,p=c.length,y,S="value"in na?na.value:na.textContent,E=S.length;for(o=0;o<p&&c[o]===S[o];o++);var R=p-o;for(y=1;y<=R&&c[p-y]===S[E-y];y++);return Xc=S.slice(o,1<y?1-y:void 0)}function Jc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Zc(){return!0}function pw(){return!1}function En(o){function c(p,y,S,E,R){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(p=o[H],this[H]=p?p(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Zc:pw,this.isPropagationStopped=pw,this}return P(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),c}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hm=En(Pi),Vo=P({},Pi,{view:0,detail:0}),TP=En(Vo),pm,gm,Yo,eu=P({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Yo&&(Yo&&o.type==="mousemove"?(pm=o.screenX-Yo.screenX,gm=o.screenY-Yo.screenY):gm=pm=0,Yo=o),pm)},movementY:function(o){return"movementY"in o?o.movementY:gm}}),gw=En(eu),PP=P({},eu,{dataTransfer:0}),RP=En(PP),IP=P({},Vo,{relatedTarget:0}),xm=En(IP),MP=P({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),OP=En(MP),LP=P({},Pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$P=En(LP),FP=P({},Pi,{data:0}),xw=En(FP),BP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qP(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=GP[o])?!!c[o]:!1}function ym(){return qP}var UP=P({},Vo,{key:function(o){if(o.key){var c=BP[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Jc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?zP[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(o){return o.type==="keypress"?Jc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Jc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),WP=En(UP),HP=P({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yw=En(HP),VP=P({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),YP=En(VP),KP=P({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),QP=En(KP),XP=P({},eu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),JP=En(XP),ZP=[9,13,27,32],vm=u&&"CompositionEvent"in window,Ko=null;u&&"documentMode"in document&&(Ko=document.documentMode);var e3=u&&"TextEvent"in window&&!Ko,vw=u&&(!vm||Ko&&8<Ko&&11>=Ko),bw=" ",ww=!1;function Nw(o,c){switch(o){case"keyup":return ZP.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ri=!1;function t3(o,c){switch(o){case"compositionend":return jw(c);case"keypress":return c.which!==32?null:(ww=!0,bw);case"textInput":return o=c.data,o===bw&&ww?null:o;default:return null}}function r3(o,c){if(Ri)return o==="compositionend"||!vm&&Nw(o,c)?(o=hw(),Xc=mm=na=null,Ri=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return vw&&c.locale!=="ko"?null:c.data;default:return null}}var n3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!n3[o.type]:c==="textarea"}function kw(o,c,p,y){Xt(y),c=au(c,"onChange"),0<c.length&&(p=new hm("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var Qo=null,Xo=null;function s3(o){qw(o,0)}function tu(o){var c=$i(o);if(xe(c))return o}function a3(o,c){if(o==="change")return c}var Cw=!1;if(u){var bm;if(u){var wm="oninput"in document;if(!wm){var _w=document.createElement("div");_w.setAttribute("oninput","return;"),wm=typeof _w.oninput=="function"}bm=wm}else bm=!1;Cw=bm&&(!document.documentMode||9<document.documentMode)}function Ew(){Qo&&(Qo.detachEvent("onpropertychange",Dw),Xo=Qo=null)}function Dw(o){if(o.propertyName==="value"&&tu(Xo)){var c=[];kw(c,Xo,o,Rt(o)),fe(s3,c)}}function i3(o,c,p){o==="focusin"?(Ew(),Qo=c,Xo=p,Qo.attachEvent("onpropertychange",Dw)):o==="focusout"&&Ew()}function o3(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return tu(Xo)}function l3(o,c){if(o==="click")return tu(c)}function c3(o,c){if(o==="input"||o==="change")return tu(c)}function u3(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ls=typeof Object.is=="function"?Object.is:u3;function Jo(o,c){if(ls(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!d.call(c,S)||!ls(o[S],c[S]))return!1}return!0}function Aw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Tw(o,c){var p=Aw(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Aw(p)}}function Pw(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Pw(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Rw(){for(var o=window,c=ke();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=ke(o.document)}return c}function Nm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function d3(o){var c=Rw(),p=o.focusedElem,y=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&Pw(p.ownerDocument.documentElement,p)){if(y!==null&&Nm(p)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var S=p.textContent.length,E=Math.min(y.start,S);y=y.end===void 0?E:Math.min(y.end,S),!o.extend&&E>y&&(S=y,y=E,E=S),S=Tw(p,E);var R=Tw(p,y);S&&R&&(o.rangeCount!==1||o.anchorNode!==S.node||o.anchorOffset!==S.offset||o.focusNode!==R.node||o.focusOffset!==R.offset)&&(c=c.createRange(),c.setStart(S.node,S.offset),o.removeAllRanges(),E>y?(o.addRange(c),o.extend(R.node,R.offset)):(c.setEnd(R.node,R.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var f3=u&&"documentMode"in document&&11>=document.documentMode,Ii=null,jm=null,Zo=null,Sm=!1;function Iw(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Sm||Ii==null||Ii!==ke(y)||(y=Ii,"selectionStart"in y&&Nm(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Zo&&Jo(Zo,y)||(Zo=y,y=au(jm,"onSelect"),0<y.length&&(c=new hm("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Ii)))}function ru(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Mi={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},km={},Mw={};u&&(Mw=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function nu(o){if(km[o])return km[o];if(!Mi[o])return o;var c=Mi[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in Mw)return km[o]=c[p];return o}var Ow=nu("animationend"),Lw=nu("animationiteration"),$w=nu("animationstart"),Fw=nu("transitionend"),Bw=new Map,zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(o,c){Bw.set(o,c),i(c,[o])}for(var Cm=0;Cm<zw.length;Cm++){var _m=zw[Cm],m3=_m.toLowerCase(),h3=_m[0].toUpperCase()+_m.slice(1);sa(m3,"on"+h3)}sa(Ow,"onAnimationEnd"),sa(Lw,"onAnimationIteration"),sa($w,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(Fw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p3=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function Gw(o,c,p){var y=o.type||"unknown-event";o.currentTarget=p,Ai(y,c,void 0,o),o.currentTarget=null}function qw(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],S=y.event;y=y.listeners;e:{var E=void 0;if(c)for(var R=y.length-1;0<=R;R--){var H=y[R],J=H.instance,de=H.currentTarget;if(H=H.listener,J!==E&&S.isPropagationStopped())break e;Gw(S,H,de),E=J}else for(R=0;R<y.length;R++){if(H=y[R],J=H.instance,de=H.currentTarget,H=H.listener,J!==E&&S.isPropagationStopped())break e;Gw(S,H,de),E=J}}}if(Ur)throw o=Bt,Ur=!1,Bt=null,o}function ir(o,c){var p=c[Mm];p===void 0&&(p=c[Mm]=new Set);var y=o+"__bubble";p.has(y)||(Uw(c,o,2,!1),p.add(y))}function Em(o,c,p){var y=0;c&&(y|=4),Uw(p,o,y,c)}var su="_reactListening"+Math.random().toString(36).slice(2);function tl(o){if(!o[su]){o[su]=!0,s.forEach(function(p){p!=="selectionchange"&&(p3.has(p)||Em(p,!1,o),Em(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[su]||(c[su]=!0,Em("selectionchange",!1,c))}}function Uw(o,c,p,y){switch(mw(c)){case 1:var S=DP;break;case 4:S=AP;break;default:S=dm}p=S.bind(null,c,p,o),S=void 0,!sr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),y?S!==void 0?o.addEventListener(c,p,{capture:!0,passive:S}):o.addEventListener(c,p,!0):S!==void 0?o.addEventListener(c,p,{passive:S}):o.addEventListener(c,p,!1)}function Dm(o,c,p,y,S){var E=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var R=y.tag;if(R===3||R===4){var H=y.stateNode.containerInfo;if(H===S||H.nodeType===8&&H.parentNode===S)break;if(R===4)for(R=y.return;R!==null;){var J=R.tag;if((J===3||J===4)&&(J=R.stateNode.containerInfo,J===S||J.nodeType===8&&J.parentNode===S))return;R=R.return}for(;H!==null;){if(R=za(H),R===null)return;if(J=R.tag,J===5||J===6){y=E=R;continue e}H=H.parentNode}}y=y.return}fe(function(){var de=E,_e=Rt(p),Pe=[];e:{var Ce=Bw.get(o);if(Ce!==void 0){var Ke=hm,tt=o;switch(o){case"keypress":if(Jc(p)===0)break e;case"keydown":case"keyup":Ke=WP;break;case"focusin":tt="focus",Ke=xm;break;case"focusout":tt="blur",Ke=xm;break;case"beforeblur":case"afterblur":Ke=xm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=gw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=RP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=YP;break;case Ow:case Lw:case $w:Ke=OP;break;case Fw:Ke=QP;break;case"scroll":Ke=TP;break;case"wheel":Ke=JP;break;case"copy":case"cut":case"paste":Ke=$P;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=yw}var at=(c&4)!==0,br=!at&&o==="scroll",le=at?Ce!==null?Ce+"Capture":null:Ce;at=[];for(var ee=de,ue;ee!==null;){ue=ee;var Me=ue.stateNode;if(ue.tag===5&&Me!==null&&(ue=Me,le!==null&&(Me=qe(ee,le),Me!=null&&at.push(rl(ee,Me,ue)))),br)break;ee=ee.return}0<at.length&&(Ce=new Ke(Ce,tt,null,p,_e),Pe.push({event:Ce,listeners:at}))}}if((c&7)===0){e:{if(Ce=o==="mouseover"||o==="pointerover",Ke=o==="mouseout"||o==="pointerout",Ce&&p!==gt&&(tt=p.relatedTarget||p.fromElement)&&(za(tt)||tt[Fs]))break e;if((Ke||Ce)&&(Ce=_e.window===_e?_e:(Ce=_e.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ke?(tt=p.relatedTarget||p.toElement,Ke=de,tt=tt?za(tt):null,tt!==null&&(br=zn(tt),tt!==br||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Ke=null,tt=de),Ke!==tt)){if(at=gw,Me="onMouseLeave",le="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(at=yw,Me="onPointerLeave",le="onPointerEnter",ee="pointer"),br=Ke==null?Ce:$i(Ke),ue=tt==null?Ce:$i(tt),Ce=new at(Me,ee+"leave",Ke,p,_e),Ce.target=br,Ce.relatedTarget=ue,Me=null,za(_e)===de&&(at=new at(le,ee+"enter",tt,p,_e),at.target=ue,at.relatedTarget=br,Me=at),br=Me,Ke&&tt)t:{for(at=Ke,le=tt,ee=0,ue=at;ue;ue=Oi(ue))ee++;for(ue=0,Me=le;Me;Me=Oi(Me))ue++;for(;0<ee-ue;)at=Oi(at),ee--;for(;0<ue-ee;)le=Oi(le),ue--;for(;ee--;){if(at===le||le!==null&&at===le.alternate)break t;at=Oi(at),le=Oi(le)}at=null}else at=null;Ke!==null&&Ww(Pe,Ce,Ke,at,!1),tt!==null&&br!==null&&Ww(Pe,br,tt,at,!0)}}e:{if(Ce=de?$i(de):window,Ke=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ce.type==="file")var ot=a3;else if(Sw(Ce))if(Cw)ot=c3;else{ot=o3;var ht=i3}else(Ke=Ce.nodeName)&&Ke.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(ot=l3);if(ot&&(ot=ot(o,de))){kw(Pe,ot,p,_e);break e}ht&&ht(o,Ce,de),o==="focusout"&&(ht=Ce._wrapperState)&&ht.controlled&&Ce.type==="number"&&mt(Ce,"number",Ce.value)}switch(ht=de?$i(de):window,o){case"focusin":(Sw(ht)||ht.contentEditable==="true")&&(Ii=ht,jm=de,Zo=null);break;case"focusout":Zo=jm=Ii=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Iw(Pe,p,_e);break;case"selectionchange":if(f3)break;case"keydown":case"keyup":Iw(Pe,p,_e)}var pt;if(vm)e:{switch(o){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Ri?Nw(o,p)&&(vt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(vt="onCompositionStart");vt&&(vw&&p.locale!=="ko"&&(Ri||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Ri&&(pt=hw()):(na=_e,mm="value"in na?na.value:na.textContent,Ri=!0)),ht=au(de,vt),0<ht.length&&(vt=new xw(vt,o,null,p,_e),Pe.push({event:vt,listeners:ht}),pt?vt.data=pt:(pt=jw(p),pt!==null&&(vt.data=pt)))),(pt=e3?t3(o,p):r3(o,p))&&(de=au(de,"onBeforeInput"),0<de.length&&(_e=new xw("onBeforeInput","beforeinput",null,p,_e),Pe.push({event:_e,listeners:de}),_e.data=pt))}qw(Pe,c)})}function rl(o,c,p){return{instance:o,listener:c,currentTarget:p}}function au(o,c){for(var p=c+"Capture",y=[];o!==null;){var S=o,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=qe(o,p),E!=null&&y.unshift(rl(o,E,S)),E=qe(o,c),E!=null&&y.push(rl(o,E,S))),o=o.return}return y}function Oi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Ww(o,c,p,y,S){for(var E=c._reactName,R=[];p!==null&&p!==y;){var H=p,J=H.alternate,de=H.stateNode;if(J!==null&&J===y)break;H.tag===5&&de!==null&&(H=de,S?(J=qe(p,E),J!=null&&R.unshift(rl(p,J,H))):S||(J=qe(p,E),J!=null&&R.push(rl(p,J,H)))),p=p.return}R.length!==0&&o.push({event:c,listeners:R})}var g3=/\r\n?/g,x3=/\u0000|\uFFFD/g;function Hw(o){return(typeof o=="string"?o:""+o).replace(g3,`
`).replace(x3,"")}function iu(o,c,p){if(c=Hw(c),Hw(o)!==c&&p)throw Error(r(425))}function ou(){}var Am=null,Tm=null;function Pm(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,y3=typeof clearTimeout=="function"?clearTimeout:void 0,Vw=typeof Promise=="function"?Promise:void 0,v3=typeof queueMicrotask=="function"?queueMicrotask:typeof Vw<"u"?function(o){return Vw.resolve(null).then(o).catch(b3)}:Rm;function b3(o){setTimeout(function(){throw o})}function Im(o,c){var p=c,y=0;do{var S=p.nextSibling;if(o.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(y===0){o.removeChild(S),Ho(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=S}while(p);Ho(c)}function aa(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Yw(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Li=Math.random().toString(36).slice(2),ws="__reactFiber$"+Li,nl="__reactProps$"+Li,Fs="__reactContainer$"+Li,Mm="__reactEvents$"+Li,w3="__reactListeners$"+Li,N3="__reactHandles$"+Li;function za(o){var c=o[ws];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Fs]||p[ws]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=Yw(o);o!==null;){if(p=o[ws])return p;o=Yw(o)}return c}o=p,p=o.parentNode}return null}function sl(o){return o=o[ws]||o[Fs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function $i(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function lu(o){return o[nl]||null}var Om=[],Fi=-1;function ia(o){return{current:o}}function or(o){0>Fi||(o.current=Om[Fi],Om[Fi]=null,Fi--)}function er(o,c){Fi++,Om[Fi]=o.current,o.current=c}var oa={},Hr=ia(oa),mn=ia(!1),Ga=oa;function Bi(o,c){var p=o.type.contextTypes;if(!p)return oa;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in p)S[E]=c[E];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=S),S}function hn(o){return o=o.childContextTypes,o!=null}function cu(){or(mn),or(Hr)}function Kw(o,c,p){if(Hr.current!==oa)throw Error(r(168));er(Hr,c),er(mn,p)}function Qw(o,c,p){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in c))throw Error(r(108,re(o)||"Unknown",S));return P({},p,y)}function uu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||oa,Ga=Hr.current,er(Hr,o),er(mn,mn.current),!0}function Xw(o,c,p){var y=o.stateNode;if(!y)throw Error(r(169));p?(o=Qw(o,c,Ga),y.__reactInternalMemoizedMergedChildContext=o,or(mn),or(Hr),er(Hr,o)):or(mn),er(mn,p)}var Bs=null,du=!1,Lm=!1;function Jw(o){Bs===null?Bs=[o]:Bs.push(o)}function j3(o){du=!0,Jw(o)}function la(){if(!Lm&&Bs!==null){Lm=!0;var o=0,c=St;try{var p=Bs;for(St=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}Bs=null,du=!1}catch(S){throw Bs!==null&&(Bs=Bs.slice(o+1)),Wc(Se,la),S}finally{St=c,Lm=!1}}return null}var zi=[],Gi=0,fu=null,mu=0,Un=[],Wn=0,qa=null,zs=1,Gs="";function Ua(o,c){zi[Gi++]=mu,zi[Gi++]=fu,fu=o,mu=c}function Zw(o,c,p){Un[Wn++]=zs,Un[Wn++]=Gs,Un[Wn++]=qa,qa=o;var y=zs;o=Gs;var S=32-Ye(y)-1;y&=~(1<<S),p+=1;var E=32-Ye(c)+S;if(30<E){var R=S-S%5;E=(y&(1<<R)-1).toString(32),y>>=R,S-=R,zs=1<<32-Ye(c)+S|p<<S|y,Gs=E+o}else zs=1<<E|p<<S|y,Gs=o}function $m(o){o.return!==null&&(Ua(o,1),Zw(o,1,0))}function Fm(o){for(;o===fu;)fu=zi[--Gi],zi[Gi]=null,mu=zi[--Gi],zi[Gi]=null;for(;o===qa;)qa=Un[--Wn],Un[Wn]=null,Gs=Un[--Wn],Un[Wn]=null,zs=Un[--Wn],Un[Wn]=null}var Dn=null,An=null,ur=!1,cs=null;function e1(o,c){var p=Kn(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function t1(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Dn=o,An=aa(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Dn=o,An=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=qa!==null?{id:zs,overflow:Gs}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Kn(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,Dn=o,An=null,!0):!1;default:return!1}}function Bm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function zm(o){if(ur){var c=An;if(c){var p=c;if(!t1(o,c)){if(Bm(o))throw Error(r(418));c=aa(p.nextSibling);var y=Dn;c&&t1(o,c)?e1(y,p):(o.flags=o.flags&-4097|2,ur=!1,Dn=o)}}else{if(Bm(o))throw Error(r(418));o.flags=o.flags&-4097|2,ur=!1,Dn=o}}}function r1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Dn=o}function hu(o){if(o!==Dn)return!1;if(!ur)return r1(o),ur=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Pm(o.type,o.memoizedProps)),c&&(c=An)){if(Bm(o))throw n1(),Error(r(418));for(;c;)e1(o,c),c=aa(c.nextSibling)}if(r1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){An=aa(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}An=null}}else An=Dn?aa(o.stateNode.nextSibling):null;return!0}function n1(){for(var o=An;o;)o=aa(o.nextSibling)}function qi(){An=Dn=null,ur=!1}function Gm(o){cs===null?cs=[o]:cs.push(o)}var S3=k.ReactCurrentBatchConfig;function al(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(r(309));var y=p.stateNode}if(!y)throw Error(r(147,o));var S=y,E=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(R){var H=S.refs;R===null?delete H[E]:H[E]=R},c._stringRef=E,c)}if(typeof o!="string")throw Error(r(284));if(!p._owner)throw Error(r(290,o))}return o}function pu(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function s1(o){var c=o._init;return c(o._payload)}function a1(o){function c(le,ee){if(o){var ue=le.deletions;ue===null?(le.deletions=[ee],le.flags|=16):ue.push(ee)}}function p(le,ee){if(!o)return null;for(;ee!==null;)c(le,ee),ee=ee.sibling;return null}function y(le,ee){for(le=new Map;ee!==null;)ee.key!==null?le.set(ee.key,ee):le.set(ee.index,ee),ee=ee.sibling;return le}function S(le,ee){return le=ga(le,ee),le.index=0,le.sibling=null,le}function E(le,ee,ue){return le.index=ue,o?(ue=le.alternate,ue!==null?(ue=ue.index,ue<ee?(le.flags|=2,ee):ue):(le.flags|=2,ee)):(le.flags|=1048576,ee)}function R(le){return o&&le.alternate===null&&(le.flags|=2),le}function H(le,ee,ue,Me){return ee===null||ee.tag!==6?(ee=Rh(ue,le.mode,Me),ee.return=le,ee):(ee=S(ee,ue),ee.return=le,ee)}function J(le,ee,ue,Me){var ot=ue.type;return ot===T?_e(le,ee,ue.props.children,Me,ue.key):ee!==null&&(ee.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===se&&s1(ot)===ee.type)?(Me=S(ee,ue.props),Me.ref=al(le,ee,ue),Me.return=le,Me):(Me=Fu(ue.type,ue.key,ue.props,null,le.mode,Me),Me.ref=al(le,ee,ue),Me.return=le,Me)}function de(le,ee,ue,Me){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ue.containerInfo||ee.stateNode.implementation!==ue.implementation?(ee=Ih(ue,le.mode,Me),ee.return=le,ee):(ee=S(ee,ue.children||[]),ee.return=le,ee)}function _e(le,ee,ue,Me,ot){return ee===null||ee.tag!==7?(ee=Ja(ue,le.mode,Me,ot),ee.return=le,ee):(ee=S(ee,ue),ee.return=le,ee)}function Pe(le,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Rh(""+ee,le.mode,ue),ee.return=le,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case D:return ue=Fu(ee.type,ee.key,ee.props,null,le.mode,ue),ue.ref=al(le,null,ee),ue.return=le,ue;case A:return ee=Ih(ee,le.mode,ue),ee.return=le,ee;case se:var Me=ee._init;return Pe(le,Me(ee._payload),ue)}if(et(ee)||Y(ee))return ee=Ja(ee,le.mode,ue,null),ee.return=le,ee;pu(le,ee)}return null}function Ce(le,ee,ue,Me){var ot=ee!==null?ee.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ot!==null?null:H(le,ee,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case D:return ue.key===ot?J(le,ee,ue,Me):null;case A:return ue.key===ot?de(le,ee,ue,Me):null;case se:return ot=ue._init,Ce(le,ee,ot(ue._payload),Me)}if(et(ue)||Y(ue))return ot!==null?null:_e(le,ee,ue,Me,null);pu(le,ue)}return null}function Ke(le,ee,ue,Me,ot){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return le=le.get(ue)||null,H(ee,le,""+Me,ot);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case D:return le=le.get(Me.key===null?ue:Me.key)||null,J(ee,le,Me,ot);case A:return le=le.get(Me.key===null?ue:Me.key)||null,de(ee,le,Me,ot);case se:var ht=Me._init;return Ke(le,ee,ue,ht(Me._payload),ot)}if(et(Me)||Y(Me))return le=le.get(ue)||null,_e(ee,le,Me,ot,null);pu(ee,Me)}return null}function tt(le,ee,ue,Me){for(var ot=null,ht=null,pt=ee,vt=ee=0,Ir=null;pt!==null&&vt<ue.length;vt++){pt.index>vt?(Ir=pt,pt=null):Ir=pt.sibling;var $t=Ce(le,pt,ue[vt],Me);if($t===null){pt===null&&(pt=Ir);break}o&&pt&&$t.alternate===null&&c(le,pt),ee=E($t,ee,vt),ht===null?ot=$t:ht.sibling=$t,ht=$t,pt=Ir}if(vt===ue.length)return p(le,pt),ur&&Ua(le,vt),ot;if(pt===null){for(;vt<ue.length;vt++)pt=Pe(le,ue[vt],Me),pt!==null&&(ee=E(pt,ee,vt),ht===null?ot=pt:ht.sibling=pt,ht=pt);return ur&&Ua(le,vt),ot}for(pt=y(le,pt);vt<ue.length;vt++)Ir=Ke(pt,le,vt,ue[vt],Me),Ir!==null&&(o&&Ir.alternate!==null&&pt.delete(Ir.key===null?vt:Ir.key),ee=E(Ir,ee,vt),ht===null?ot=Ir:ht.sibling=Ir,ht=Ir);return o&&pt.forEach(function(xa){return c(le,xa)}),ur&&Ua(le,vt),ot}function at(le,ee,ue,Me){var ot=Y(ue);if(typeof ot!="function")throw Error(r(150));if(ue=ot.call(ue),ue==null)throw Error(r(151));for(var ht=ot=null,pt=ee,vt=ee=0,Ir=null,$t=ue.next();pt!==null&&!$t.done;vt++,$t=ue.next()){pt.index>vt?(Ir=pt,pt=null):Ir=pt.sibling;var xa=Ce(le,pt,$t.value,Me);if(xa===null){pt===null&&(pt=Ir);break}o&&pt&&xa.alternate===null&&c(le,pt),ee=E(xa,ee,vt),ht===null?ot=xa:ht.sibling=xa,ht=xa,pt=Ir}if($t.done)return p(le,pt),ur&&Ua(le,vt),ot;if(pt===null){for(;!$t.done;vt++,$t=ue.next())$t=Pe(le,$t.value,Me),$t!==null&&(ee=E($t,ee,vt),ht===null?ot=$t:ht.sibling=$t,ht=$t);return ur&&Ua(le,vt),ot}for(pt=y(le,pt);!$t.done;vt++,$t=ue.next())$t=Ke(pt,le,vt,$t.value,Me),$t!==null&&(o&&$t.alternate!==null&&pt.delete($t.key===null?vt:$t.key),ee=E($t,ee,vt),ht===null?ot=$t:ht.sibling=$t,ht=$t);return o&&pt.forEach(function(n5){return c(le,n5)}),ur&&Ua(le,vt),ot}function br(le,ee,ue,Me){if(typeof ue=="object"&&ue!==null&&ue.type===T&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case D:e:{for(var ot=ue.key,ht=ee;ht!==null;){if(ht.key===ot){if(ot=ue.type,ot===T){if(ht.tag===7){p(le,ht.sibling),ee=S(ht,ue.props.children),ee.return=le,le=ee;break e}}else if(ht.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===se&&s1(ot)===ht.type){p(le,ht.sibling),ee=S(ht,ue.props),ee.ref=al(le,ht,ue),ee.return=le,le=ee;break e}p(le,ht);break}else c(le,ht);ht=ht.sibling}ue.type===T?(ee=Ja(ue.props.children,le.mode,Me,ue.key),ee.return=le,le=ee):(Me=Fu(ue.type,ue.key,ue.props,null,le.mode,Me),Me.ref=al(le,ee,ue),Me.return=le,le=Me)}return R(le);case A:e:{for(ht=ue.key;ee!==null;){if(ee.key===ht)if(ee.tag===4&&ee.stateNode.containerInfo===ue.containerInfo&&ee.stateNode.implementation===ue.implementation){p(le,ee.sibling),ee=S(ee,ue.children||[]),ee.return=le,le=ee;break e}else{p(le,ee);break}else c(le,ee);ee=ee.sibling}ee=Ih(ue,le.mode,Me),ee.return=le,le=ee}return R(le);case se:return ht=ue._init,br(le,ee,ht(ue._payload),Me)}if(et(ue))return tt(le,ee,ue,Me);if(Y(ue))return at(le,ee,ue,Me);pu(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ee!==null&&ee.tag===6?(p(le,ee.sibling),ee=S(ee,ue),ee.return=le,le=ee):(p(le,ee),ee=Rh(ue,le.mode,Me),ee.return=le,le=ee),R(le)):p(le,ee)}return br}var Ui=a1(!0),i1=a1(!1),gu=ia(null),xu=null,Wi=null,qm=null;function Um(){qm=Wi=xu=null}function Wm(o){var c=gu.current;or(gu),o._currentValue=c}function Hm(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Hi(o,c){xu=o,qm=Wi=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(pn=!0),o.firstContext=null)}function Hn(o){var c=o._currentValue;if(qm!==o)if(o={context:o,memoizedValue:c,next:null},Wi===null){if(xu===null)throw Error(r(308));Wi=o,xu.dependencies={lanes:0,firstContext:o}}else Wi=Wi.next=o;return c}var Wa=null;function Vm(o){Wa===null?Wa=[o]:Wa.push(o)}function o1(o,c,p,y){var S=c.interleaved;return S===null?(p.next=p,Vm(c)):(p.next=S.next,S.next=p),c.interleaved=p,qs(o,y)}function qs(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var ca=!1;function Ym(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Us(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ua(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Ot&2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,qs(o,p)}return S=y.interleaved,S===null?(c.next=c,Vm(y)):(c.next=S.next,S.next=c),y.interleaved=c,qs(o,p)}function yu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Gn(o,p)}}function c1(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var R={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?S=E=R:E=E.next=R,p=p.next}while(p!==null);E===null?S=E=c:E=E.next=c}else S=E=c;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function vu(o,c,p,y){var S=o.updateQueue;ca=!1;var E=S.firstBaseUpdate,R=S.lastBaseUpdate,H=S.shared.pending;if(H!==null){S.shared.pending=null;var J=H,de=J.next;J.next=null,R===null?E=de:R.next=de,R=J;var _e=o.alternate;_e!==null&&(_e=_e.updateQueue,H=_e.lastBaseUpdate,H!==R&&(H===null?_e.firstBaseUpdate=de:H.next=de,_e.lastBaseUpdate=J))}if(E!==null){var Pe=S.baseState;R=0,_e=de=J=null,H=E;do{var Ce=H.lane,Ke=H.eventTime;if((y&Ce)===Ce){_e!==null&&(_e=_e.next={eventTime:Ke,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var tt=o,at=H;switch(Ce=c,Ke=p,at.tag){case 1:if(tt=at.payload,typeof tt=="function"){Pe=tt.call(Ke,Pe,Ce);break e}Pe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=at.payload,Ce=typeof tt=="function"?tt.call(Ke,Pe,Ce):tt,Ce==null)break e;Pe=P({},Pe,Ce);break e;case 2:ca=!0}}H.callback!==null&&H.lane!==0&&(o.flags|=64,Ce=S.effects,Ce===null?S.effects=[H]:Ce.push(H))}else Ke={eventTime:Ke,lane:Ce,tag:H.tag,payload:H.payload,callback:H.callback,next:null},_e===null?(de=_e=Ke,J=Pe):_e=_e.next=Ke,R|=Ce;if(H=H.next,H===null){if(H=S.shared.pending,H===null)break;Ce=H,H=Ce.next,Ce.next=null,S.lastBaseUpdate=Ce,S.shared.pending=null}}while(!0);if(_e===null&&(J=Pe),S.baseState=J,S.firstBaseUpdate=de,S.lastBaseUpdate=_e,c=S.shared.interleaved,c!==null){S=c;do R|=S.lane,S=S.next;while(S!==c)}else E===null&&(S.shared.lanes=0);Ya|=R,o.lanes=R,o.memoizedState=Pe}}function u1(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(r(191,S));S.call(y)}}}var il={},Ns=ia(il),ol=ia(il),ll=ia(il);function Ha(o){if(o===il)throw Error(r(174));return o}function Km(o,c){switch(er(ll,c),er(ol,o),er(Ns,il),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:be(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=be(c,o)}or(Ns),er(Ns,c)}function Vi(){or(Ns),or(ol),or(ll)}function d1(o){Ha(ll.current);var c=Ha(Ns.current),p=be(c,o.type);c!==p&&(er(ol,o),er(Ns,p))}function Qm(o){ol.current===o&&(or(Ns),or(ol))}var hr=ia(0);function bu(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Xm=[];function Jm(){for(var o=0;o<Xm.length;o++)Xm[o]._workInProgressVersionPrimary=null;Xm.length=0}var wu=k.ReactCurrentDispatcher,Zm=k.ReactCurrentBatchConfig,Va=0,pr=null,Cr=null,Pr=null,Nu=!1,cl=!1,ul=0,k3=0;function Vr(){throw Error(r(321))}function eh(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!ls(o[p],c[p]))return!1;return!0}function th(o,c,p,y,S,E){if(Va=E,pr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,wu.current=o===null||o.memoizedState===null?D3:A3,o=p(y,S),cl){E=0;do{if(cl=!1,ul=0,25<=E)throw Error(r(301));E+=1,Pr=Cr=null,c.updateQueue=null,wu.current=T3,o=p(y,S)}while(cl)}if(wu.current=ku,c=Cr!==null&&Cr.next!==null,Va=0,Pr=Cr=pr=null,Nu=!1,c)throw Error(r(300));return o}function rh(){var o=ul!==0;return ul=0,o}function js(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?pr.memoizedState=Pr=o:Pr=Pr.next=o,Pr}function Vn(){if(Cr===null){var o=pr.alternate;o=o!==null?o.memoizedState:null}else o=Cr.next;var c=Pr===null?pr.memoizedState:Pr.next;if(c!==null)Pr=c,Cr=o;else{if(o===null)throw Error(r(310));Cr=o,o={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Pr===null?pr.memoizedState=Pr=o:Pr=Pr.next=o}return Pr}function dl(o,c){return typeof c=="function"?c(o):c}function nh(o){var c=Vn(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=o;var y=Cr,S=y.baseQueue,E=p.pending;if(E!==null){if(S!==null){var R=S.next;S.next=E.next,E.next=R}y.baseQueue=S=E,p.pending=null}if(S!==null){E=S.next,y=y.baseState;var H=R=null,J=null,de=E;do{var _e=de.lane;if((Va&_e)===_e)J!==null&&(J=J.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),y=de.hasEagerState?de.eagerState:o(y,de.action);else{var Pe={lane:_e,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};J===null?(H=J=Pe,R=y):J=J.next=Pe,pr.lanes|=_e,Ya|=_e}de=de.next}while(de!==null&&de!==E);J===null?R=y:J.next=H,ls(y,c.memoizedState)||(pn=!0),c.memoizedState=y,c.baseState=R,c.baseQueue=J,p.lastRenderedState=y}if(o=p.interleaved,o!==null){S=o;do E=S.lane,pr.lanes|=E,Ya|=E,S=S.next;while(S!==o)}else S===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function sh(o){var c=Vn(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=o;var y=p.dispatch,S=p.pending,E=c.memoizedState;if(S!==null){p.pending=null;var R=S=S.next;do E=o(E,R.action),R=R.next;while(R!==S);ls(E,c.memoizedState)||(pn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),p.lastRenderedState=E}return[E,y]}function f1(){}function m1(o,c){var p=pr,y=Vn(),S=c(),E=!ls(y.memoizedState,S);if(E&&(y.memoizedState=S,pn=!0),y=y.queue,ah(g1.bind(null,p,y,o),[o]),y.getSnapshot!==c||E||Pr!==null&&Pr.memoizedState.tag&1){if(p.flags|=2048,fl(9,p1.bind(null,p,y,S,c),void 0,null),Rr===null)throw Error(r(349));(Va&30)!==0||h1(p,c,S)}return S}function h1(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=pr.updateQueue,c===null?(c={lastEffect:null,stores:null},pr.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function p1(o,c,p,y){c.value=p,c.getSnapshot=y,x1(c)&&y1(o)}function g1(o,c,p){return p(function(){x1(c)&&y1(o)})}function x1(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!ls(o,p)}catch{return!0}}function y1(o){var c=qs(o,1);c!==null&&ms(c,o,1,-1)}function v1(o){var c=js();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:o},c.queue=o,o=o.dispatch=E3.bind(null,pr,o),[c.memoizedState,o]}function fl(o,c,p,y){return o={tag:o,create:c,destroy:p,deps:y,next:null},c=pr.updateQueue,c===null?(c={lastEffect:null,stores:null},pr.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o)),o}function b1(){return Vn().memoizedState}function ju(o,c,p,y){var S=js();pr.flags|=o,S.memoizedState=fl(1|c,p,void 0,y===void 0?null:y)}function Su(o,c,p,y){var S=Vn();y=y===void 0?null:y;var E=void 0;if(Cr!==null){var R=Cr.memoizedState;if(E=R.destroy,y!==null&&eh(y,R.deps)){S.memoizedState=fl(c,p,E,y);return}}pr.flags|=o,S.memoizedState=fl(1|c,p,E,y)}function w1(o,c){return ju(8390656,8,o,c)}function ah(o,c){return Su(2048,8,o,c)}function N1(o,c){return Su(4,2,o,c)}function j1(o,c){return Su(4,4,o,c)}function S1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function k1(o,c,p){return p=p!=null?p.concat([o]):null,Su(4,4,S1.bind(null,c,o),p)}function ih(){}function C1(o,c){var p=Vn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&eh(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function _1(o,c){var p=Vn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&eh(c,y[1])?y[0]:(o=o(),p.memoizedState=[o,c],o)}function E1(o,c,p){return(Va&21)===0?(o.baseState&&(o.baseState=!1,pn=!0),o.memoizedState=p):(ls(p,c)||(p=ra(),pr.lanes|=p,Ya|=p,o.baseState=!0),c)}function C3(o,c){var p=St;St=p!==0&&4>p?p:4,o(!0);var y=Zm.transition;Zm.transition={};try{o(!1),c()}finally{St=p,Zm.transition=y}}function D1(){return Vn().memoizedState}function _3(o,c,p){var y=ha(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},A1(o))T1(c,p);else if(p=o1(o,c,p,y),p!==null){var S=on();ms(p,o,y,S),P1(p,c,y)}}function E3(o,c,p){var y=ha(o),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(A1(o))T1(c,S);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var R=c.lastRenderedState,H=E(R,p);if(S.hasEagerState=!0,S.eagerState=H,ls(H,R)){var J=c.interleaved;J===null?(S.next=S,Vm(c)):(S.next=J.next,J.next=S),c.interleaved=S;return}}catch{}finally{}p=o1(o,c,S,y),p!==null&&(S=on(),ms(p,o,y,S),P1(p,c,y))}}function A1(o){var c=o.alternate;return o===pr||c!==null&&c===pr}function T1(o,c){cl=Nu=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function P1(o,c,p){if((p&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Gn(o,p)}}var ku={readContext:Hn,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},D3={readContext:Hn,useCallback:function(o,c){return js().memoizedState=[o,c===void 0?null:c],o},useContext:Hn,useEffect:w1,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,ju(4194308,4,S1.bind(null,c,o),p)},useLayoutEffect:function(o,c){return ju(4194308,4,o,c)},useInsertionEffect:function(o,c){return ju(4,2,o,c)},useMemo:function(o,c){var p=js();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var y=js();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=_3.bind(null,pr,o),[y.memoizedState,o]},useRef:function(o){var c=js();return o={current:o},c.memoizedState=o},useState:v1,useDebugValue:ih,useDeferredValue:function(o){return js().memoizedState=o},useTransition:function(){var o=v1(!1),c=o[0];return o=C3.bind(null,o[1]),js().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var y=pr,S=js();if(ur){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),Rr===null)throw Error(r(349));(Va&30)!==0||h1(y,c,p)}S.memoizedState=p;var E={value:p,getSnapshot:c};return S.queue=E,w1(g1.bind(null,y,E,o),[o]),y.flags|=2048,fl(9,p1.bind(null,y,E,p,c),void 0,null),p},useId:function(){var o=js(),c=Rr.identifierPrefix;if(ur){var p=Gs,y=zs;p=(y&~(1<<32-Ye(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=ul++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=k3++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},A3={readContext:Hn,useCallback:C1,useContext:Hn,useEffect:ah,useImperativeHandle:k1,useInsertionEffect:N1,useLayoutEffect:j1,useMemo:_1,useReducer:nh,useRef:b1,useState:function(){return nh(dl)},useDebugValue:ih,useDeferredValue:function(o){var c=Vn();return E1(c,Cr.memoizedState,o)},useTransition:function(){var o=nh(dl)[0],c=Vn().memoizedState;return[o,c]},useMutableSource:f1,useSyncExternalStore:m1,useId:D1,unstable_isNewReconciler:!1},T3={readContext:Hn,useCallback:C1,useContext:Hn,useEffect:ah,useImperativeHandle:k1,useInsertionEffect:N1,useLayoutEffect:j1,useMemo:_1,useReducer:sh,useRef:b1,useState:function(){return sh(dl)},useDebugValue:ih,useDeferredValue:function(o){var c=Vn();return Cr===null?c.memoizedState=o:E1(c,Cr.memoizedState,o)},useTransition:function(){var o=sh(dl)[0],c=Vn().memoizedState;return[o,c]},useMutableSource:f1,useSyncExternalStore:m1,useId:D1,unstable_isNewReconciler:!1};function us(o,c){if(o&&o.defaultProps){c=P({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function oh(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:P({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Cu={isMounted:function(o){return(o=o._reactInternals)?zn(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var y=on(),S=ha(o),E=Us(y,S);E.payload=c,p!=null&&(E.callback=p),c=ua(o,E,S),c!==null&&(ms(c,o,S,y),yu(c,o,S))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=on(),S=ha(o),E=Us(y,S);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=ua(o,E,S),c!==null&&(ms(c,o,S,y),yu(c,o,S))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=on(),y=ha(o),S=Us(p,y);S.tag=2,c!=null&&(S.callback=c),c=ua(o,S,y),c!==null&&(ms(c,o,y,p),yu(c,o,y))}};function R1(o,c,p,y,S,E,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,E,R):c.prototype&&c.prototype.isPureReactComponent?!Jo(p,y)||!Jo(S,E):!0}function I1(o,c,p){var y=!1,S=oa,E=c.contextType;return typeof E=="object"&&E!==null?E=Hn(E):(S=hn(c)?Ga:Hr.current,y=c.contextTypes,E=(y=y!=null)?Bi(o,S):oa),c=new c(p,E),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cu,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=S,o.__reactInternalMemoizedMaskedChildContext=E),c}function M1(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&Cu.enqueueReplaceState(c,c.state,null)}function lh(o,c,p,y){var S=o.stateNode;S.props=p,S.state=o.memoizedState,S.refs={},Ym(o);var E=c.contextType;typeof E=="object"&&E!==null?S.context=Hn(E):(E=hn(c)?Ga:Hr.current,S.context=Bi(o,E)),S.state=o.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(oh(o,c,E,p),S.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&Cu.enqueueReplaceState(S,S.state,null),vu(o,p,S,y),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308)}function Yi(o,c){try{var p="",y=c;do p+=ye(y),y=y.return;while(y);var S=p}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:c,stack:S,digest:null}}function ch(o,c,p){return{value:o,source:null,stack:p??null,digest:c??null}}function uh(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var P3=typeof WeakMap=="function"?WeakMap:Map;function O1(o,c,p){p=Us(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){Ru||(Ru=!0,kh=y),uh(o,c)},p}function L1(o,c,p){p=Us(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var S=c.value;p.payload=function(){return y(S)},p.callback=function(){uh(o,c)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){uh(o,c),typeof y!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})}),p}function $1(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new P3;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(p)||(S.add(p),o=H3.bind(null,o,c,p),c.then(o,o))}function F1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function B1(o,c,p,y,S){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Us(-1,1),c.tag=2,ua(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=S,o)}var R3=k.ReactCurrentOwner,pn=!1;function an(o,c,p,y){c.child=o===null?i1(c,null,p,y):Ui(c,o.child,p,y)}function z1(o,c,p,y,S){p=p.render;var E=c.ref;return Hi(c,S),y=th(o,c,p,y,E,S),p=rh(),o!==null&&!pn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~S,Ws(o,c,S)):(ur&&p&&$m(c),c.flags|=1,an(o,c,y,S),c.child)}function G1(o,c,p,y,S){if(o===null){var E=p.type;return typeof E=="function"&&!Ph(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=E,q1(o,c,E,y,S)):(o=Fu(p.type,null,y,c,c.mode,S),o.ref=c.ref,o.return=c,c.child=o)}if(E=o.child,(o.lanes&S)===0){var R=E.memoizedProps;if(p=p.compare,p=p!==null?p:Jo,p(R,y)&&o.ref===c.ref)return Ws(o,c,S)}return c.flags|=1,o=ga(E,y),o.ref=c.ref,o.return=c,c.child=o}function q1(o,c,p,y,S){if(o!==null){var E=o.memoizedProps;if(Jo(E,y)&&o.ref===c.ref)if(pn=!1,c.pendingProps=y=E,(o.lanes&S)!==0)(o.flags&131072)!==0&&(pn=!0);else return c.lanes=o.lanes,Ws(o,c,S)}return dh(o,c,p,y,S)}function U1(o,c,p){var y=c.pendingProps,S=y.children,E=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Qi,Tn),Tn|=p;else{if((p&1073741824)===0)return o=E!==null?E.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,er(Qi,Tn),Tn|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:p,er(Qi,Tn),Tn|=y}else E!==null?(y=E.baseLanes|p,c.memoizedState=null):y=p,er(Qi,Tn),Tn|=y;return an(o,c,S,p),c.child}function W1(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function dh(o,c,p,y,S){var E=hn(p)?Ga:Hr.current;return E=Bi(c,E),Hi(c,S),p=th(o,c,p,y,E,S),y=rh(),o!==null&&!pn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~S,Ws(o,c,S)):(ur&&y&&$m(c),c.flags|=1,an(o,c,p,S),c.child)}function H1(o,c,p,y,S){if(hn(p)){var E=!0;uu(c)}else E=!1;if(Hi(c,S),c.stateNode===null)Eu(o,c),I1(c,p,y),lh(c,p,y,S),y=!0;else if(o===null){var R=c.stateNode,H=c.memoizedProps;R.props=H;var J=R.context,de=p.contextType;typeof de=="object"&&de!==null?de=Hn(de):(de=hn(p)?Ga:Hr.current,de=Bi(c,de));var _e=p.getDerivedStateFromProps,Pe=typeof _e=="function"||typeof R.getSnapshotBeforeUpdate=="function";Pe||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==y||J!==de)&&M1(c,R,y,de),ca=!1;var Ce=c.memoizedState;R.state=Ce,vu(c,y,R,S),J=c.memoizedState,H!==y||Ce!==J||mn.current||ca?(typeof _e=="function"&&(oh(c,p,_e,y),J=c.memoizedState),(H=ca||R1(c,p,H,y,Ce,J,de))?(Pe||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=J),R.props=y,R.state=J,R.context=de,y=H):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{R=c.stateNode,l1(o,c),H=c.memoizedProps,de=c.type===c.elementType?H:us(c.type,H),R.props=de,Pe=c.pendingProps,Ce=R.context,J=p.contextType,typeof J=="object"&&J!==null?J=Hn(J):(J=hn(p)?Ga:Hr.current,J=Bi(c,J));var Ke=p.getDerivedStateFromProps;(_e=typeof Ke=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==Pe||Ce!==J)&&M1(c,R,y,J),ca=!1,Ce=c.memoizedState,R.state=Ce,vu(c,y,R,S);var tt=c.memoizedState;H!==Pe||Ce!==tt||mn.current||ca?(typeof Ke=="function"&&(oh(c,p,Ke,y),tt=c.memoizedState),(de=ca||R1(c,p,de,y,Ce,tt,J)||!1)?(_e||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,tt,J),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,tt,J)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=tt),R.props=y,R.state=tt,R.context=J,y=de):(typeof R.componentDidUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),y=!1)}return fh(o,c,p,y,E,S)}function fh(o,c,p,y,S,E){W1(o,c);var R=(c.flags&128)!==0;if(!y&&!R)return S&&Xw(c,p,!1),Ws(o,c,E);y=c.stateNode,R3.current=c;var H=R&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&R?(c.child=Ui(c,o.child,null,E),c.child=Ui(c,null,H,E)):an(o,c,H,E),c.memoizedState=y.state,S&&Xw(c,p,!0),c.child}function V1(o){var c=o.stateNode;c.pendingContext?Kw(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Kw(o,c.context,!1),Km(o,c.containerInfo)}function Y1(o,c,p,y,S){return qi(),Gm(S),c.flags|=256,an(o,c,p,y),c.child}var mh={dehydrated:null,treeContext:null,retryLane:0};function hh(o){return{baseLanes:o,cachePool:null,transitions:null}}function K1(o,c,p){var y=c.pendingProps,S=hr.current,E=!1,R=(c.flags&128)!==0,H;if((H=R)||(H=o!==null&&o.memoizedState===null?!1:(S&2)!==0),H?(E=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(S|=1),er(hr,S&1),o===null)return zm(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(R=y.children,o=y.fallback,E?(y=c.mode,E=c.child,R={mode:"hidden",children:R},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=R):E=Bu(R,y,0,null),o=Ja(o,y,p,null),E.return=c,o.return=c,E.sibling=o,c.child=E,c.child.memoizedState=hh(p),c.memoizedState=mh,o):ph(c,R));if(S=o.memoizedState,S!==null&&(H=S.dehydrated,H!==null))return I3(o,c,R,y,H,S,p);if(E){E=y.fallback,R=c.mode,S=o.child,H=S.sibling;var J={mode:"hidden",children:y.children};return(R&1)===0&&c.child!==S?(y=c.child,y.childLanes=0,y.pendingProps=J,c.deletions=null):(y=ga(S,J),y.subtreeFlags=S.subtreeFlags&14680064),H!==null?E=ga(H,E):(E=Ja(E,R,p,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,R=o.child.memoizedState,R=R===null?hh(p):{baseLanes:R.baseLanes|p,cachePool:null,transitions:R.transitions},E.memoizedState=R,E.childLanes=o.childLanes&~p,c.memoizedState=mh,y}return E=o.child,o=E.sibling,y=ga(E,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=y,c.memoizedState=null,y}function ph(o,c){return c=Bu({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function _u(o,c,p,y){return y!==null&&Gm(y),Ui(c,o.child,null,p),o=ph(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function I3(o,c,p,y,S,E,R){if(p)return c.flags&256?(c.flags&=-257,y=ch(Error(r(422))),_u(o,c,R,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(E=y.fallback,S=c.mode,y=Bu({mode:"visible",children:y.children},S,0,null),E=Ja(E,S,R,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,(c.mode&1)!==0&&Ui(c,o.child,null,R),c.child.memoizedState=hh(R),c.memoizedState=mh,E);if((c.mode&1)===0)return _u(o,c,R,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var H=y.dgst;return y=H,E=Error(r(419)),y=ch(E,y,void 0),_u(o,c,R,y)}if(H=(R&o.childLanes)!==0,pn||H){if(y=Rr,y!==null){switch(R&-R){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|R))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,qs(o,S),ms(y,o,S,-1))}return Th(),y=ch(Error(r(421))),_u(o,c,R,y)}return S.data==="$?"?(c.flags|=128,c.child=o.child,c=V3.bind(null,o),S._reactRetry=c,null):(o=E.treeContext,An=aa(S.nextSibling),Dn=c,ur=!0,cs=null,o!==null&&(Un[Wn++]=zs,Un[Wn++]=Gs,Un[Wn++]=qa,zs=o.id,Gs=o.overflow,qa=c),c=ph(c,y.children),c.flags|=4096,c)}function Q1(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),Hm(o.return,c,p)}function gh(o,c,p,y,S){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=S)}function X1(o,c,p){var y=c.pendingProps,S=y.revealOrder,E=y.tail;if(an(o,c,y.children,p),y=hr.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Q1(o,p,c);else if(o.tag===19)Q1(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(er(hr,y),(c.mode&1)===0)c.memoizedState=null;else switch(S){case"forwards":for(p=c.child,S=null;p!==null;)o=p.alternate,o!==null&&bu(o)===null&&(S=p),p=p.sibling;p=S,p===null?(S=c.child,c.child=null):(S=p.sibling,p.sibling=null),gh(c,!1,S,p,E);break;case"backwards":for(p=null,S=c.child,c.child=null;S!==null;){if(o=S.alternate,o!==null&&bu(o)===null){c.child=S;break}o=S.sibling,S.sibling=p,p=S,S=o}gh(c,!0,p,null,E);break;case"together":gh(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Eu(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ws(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Ya|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,p=ga(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=ga(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function M3(o,c,p){switch(c.tag){case 3:V1(c),qi();break;case 5:d1(c);break;case 1:hn(c.type)&&uu(c);break;case 4:Km(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,S=c.memoizedProps.value;er(gu,y._currentValue),y._currentValue=S;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(er(hr,hr.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?K1(o,c,p):(er(hr,hr.current&1),o=Ws(o,c,p),o!==null?o.sibling:null);er(hr,hr.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(o.flags&128)!==0){if(y)return X1(o,c,p);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),er(hr,hr.current),y)break;return null;case 22:case 23:return c.lanes=0,U1(o,c,p)}return Ws(o,c,p)}var J1,xh,Z1,eN;J1=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},xh=function(){},Z1=function(o,c,p,y){var S=o.memoizedProps;if(S!==y){o=c.stateNode,Ha(Ns.current);var E=null;switch(p){case"input":S=ze(o,S),y=ze(o,y),E=[];break;case"select":S=P({},S,{value:void 0}),y=P({},y,{value:void 0}),E=[];break;case"textarea":S=he(o,S),y=he(o,y),E=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=ou)}$e(p,y);var R;p=null;for(de in S)if(!y.hasOwnProperty(de)&&S.hasOwnProperty(de)&&S[de]!=null)if(de==="style"){var H=S[de];for(R in H)H.hasOwnProperty(R)&&(p||(p={}),p[R]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(a.hasOwnProperty(de)?E||(E=[]):(E=E||[]).push(de,null));for(de in y){var J=y[de];if(H=S!=null?S[de]:void 0,y.hasOwnProperty(de)&&J!==H&&(J!=null||H!=null))if(de==="style")if(H){for(R in H)!H.hasOwnProperty(R)||J&&J.hasOwnProperty(R)||(p||(p={}),p[R]="");for(R in J)J.hasOwnProperty(R)&&H[R]!==J[R]&&(p||(p={}),p[R]=J[R])}else p||(E||(E=[]),E.push(de,p)),p=J;else de==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,H=H?H.__html:void 0,J!=null&&H!==J&&(E=E||[]).push(de,J)):de==="children"?typeof J!="string"&&typeof J!="number"||(E=E||[]).push(de,""+J):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(a.hasOwnProperty(de)?(J!=null&&de==="onScroll"&&ir("scroll",o),E||H===J||(E=[])):(E=E||[]).push(de,J))}p&&(E=E||[]).push("style",p);var de=E;(c.updateQueue=de)&&(c.flags|=4)}},eN=function(o,c,p,y){p!==y&&(c.flags|=4)};function ml(o,c){if(!ur)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Yr(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var S=o.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function O3(o,c,p){var y=c.pendingProps;switch(Fm(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(c),null;case 1:return hn(c.type)&&cu(),Yr(c),null;case 3:return y=c.stateNode,Vi(),or(mn),or(Hr),Jm(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(hu(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,cs!==null&&(Eh(cs),cs=null))),xh(o,c),Yr(c),null;case 5:Qm(c);var S=Ha(ll.current);if(p=c.type,o!==null&&c.stateNode!=null)Z1(o,c,p,y,S),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Yr(c),null}if(o=Ha(Ns.current),hu(c)){y=c.stateNode,p=c.type;var E=c.memoizedProps;switch(y[ws]=c,y[nl]=E,o=(c.mode&1)!==0,p){case"dialog":ir("cancel",y),ir("close",y);break;case"iframe":case"object":case"embed":ir("load",y);break;case"video":case"audio":for(S=0;S<el.length;S++)ir(el[S],y);break;case"source":ir("error",y);break;case"img":case"image":case"link":ir("error",y),ir("load",y);break;case"details":ir("toggle",y);break;case"input":He(y,E),ir("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},ir("invalid",y);break;case"textarea":ce(y,E),ir("invalid",y)}$e(p,E),S=null;for(var R in E)if(E.hasOwnProperty(R)){var H=E[R];R==="children"?typeof H=="string"?y.textContent!==H&&(E.suppressHydrationWarning!==!0&&iu(y.textContent,H,o),S=["children",H]):typeof H=="number"&&y.textContent!==""+H&&(E.suppressHydrationWarning!==!0&&iu(y.textContent,H,o),S=["children",""+H]):a.hasOwnProperty(R)&&H!=null&&R==="onScroll"&&ir("scroll",y)}switch(p){case"input":pe(y),rt(y,E,!0);break;case"textarea":pe(y),Ue(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=ou)}y=S,c.updateQueue=y,y!==null&&(c.flags|=4)}else{R=S.nodeType===9?S:S.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ie(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=R.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=R.createElement(p,{is:y.is}):(o=R.createElement(p),p==="select"&&(R=o,y.multiple?R.multiple=!0:y.size&&(R.size=y.size))):o=R.createElementNS(o,p),o[ws]=c,o[nl]=y,J1(o,c,!1,!1),c.stateNode=o;e:{switch(R=lt(p,y),p){case"dialog":ir("cancel",o),ir("close",o),S=y;break;case"iframe":case"object":case"embed":ir("load",o),S=y;break;case"video":case"audio":for(S=0;S<el.length;S++)ir(el[S],o);S=y;break;case"source":ir("error",o),S=y;break;case"img":case"image":case"link":ir("error",o),ir("load",o),S=y;break;case"details":ir("toggle",o),S=y;break;case"input":He(o,y),S=ze(o,y),ir("invalid",o);break;case"option":S=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},S=P({},y,{value:void 0}),ir("invalid",o);break;case"textarea":ce(o,y),S=he(o,y),ir("invalid",o);break;default:S=y}$e(p,S),H=S;for(E in H)if(H.hasOwnProperty(E)){var J=H[E];E==="style"?nt(o,J):E==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Q(o,J)):E==="children"?typeof J=="string"?(p!=="textarea"||J!=="")&&ae(o,J):typeof J=="number"&&ae(o,""+J):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(a.hasOwnProperty(E)?J!=null&&E==="onScroll"&&ir("scroll",o):J!=null&&_(o,E,J,R))}switch(p){case"input":pe(o),rt(o,y,!1);break;case"textarea":pe(o),Ue(o);break;case"option":y.value!=null&&o.setAttribute("value",""+X(y.value));break;case"select":o.multiple=!!y.multiple,E=y.value,E!=null?ve(o,!!y.multiple,E,!1):y.defaultValue!=null&&ve(o,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(o.onclick=ou)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Yr(c),null;case 6:if(o&&c.stateNode!=null)eN(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(p=Ha(ll.current),Ha(Ns.current),hu(c)){if(y=c.stateNode,p=c.memoizedProps,y[ws]=c,(E=y.nodeValue!==p)&&(o=Dn,o!==null))switch(o.tag){case 3:iu(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&iu(y.nodeValue,p,(o.mode&1)!==0)}E&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[ws]=c,c.stateNode=y}return Yr(c),null;case 13:if(or(hr),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(ur&&An!==null&&(c.mode&1)!==0&&(c.flags&128)===0)n1(),qi(),c.flags|=98560,E=!1;else if(E=hu(c),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(r(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[ws]=c}else qi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Yr(c),E=!1}else cs!==null&&(Eh(cs),cs=null),E=!0;if(!E)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(hr.current&1)!==0?_r===0&&(_r=3):Th())),c.updateQueue!==null&&(c.flags|=4),Yr(c),null);case 4:return Vi(),xh(o,c),o===null&&tl(c.stateNode.containerInfo),Yr(c),null;case 10:return Wm(c.type._context),Yr(c),null;case 17:return hn(c.type)&&cu(),Yr(c),null;case 19:if(or(hr),E=c.memoizedState,E===null)return Yr(c),null;if(y=(c.flags&128)!==0,R=E.rendering,R===null)if(y)ml(E,!1);else{if(_r!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(R=bu(o),R!==null){for(c.flags|=128,ml(E,!1),y=R.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)E=p,o=y,E.flags&=14680066,R=E.alternate,R===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=R.childLanes,E.lanes=R.lanes,E.child=R.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=R.memoizedProps,E.memoizedState=R.memoizedState,E.updateQueue=R.updateQueue,E.type=R.type,o=R.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return er(hr,hr.current&1|2),c.child}o=o.sibling}E.tail!==null&&fr()>Xi&&(c.flags|=128,y=!0,ml(E,!1),c.lanes=4194304)}else{if(!y)if(o=bu(R),o!==null){if(c.flags|=128,y=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),ml(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!ur)return Yr(c),null}else 2*fr()-E.renderingStartTime>Xi&&p!==1073741824&&(c.flags|=128,y=!0,ml(E,!1),c.lanes=4194304);E.isBackwards?(R.sibling=c.child,c.child=R):(p=E.last,p!==null?p.sibling=R:c.child=R,E.last=R)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=fr(),c.sibling=null,p=hr.current,er(hr,y?p&1|2:p&1),c):(Yr(c),null);case 22:case 23:return Ah(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Tn&1073741824)!==0&&(Yr(c),c.subtreeFlags&6&&(c.flags|=8192)):Yr(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function L3(o,c){switch(Fm(c),c.tag){case 1:return hn(c.type)&&cu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Vi(),or(mn),or(Hr),Jm(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Qm(c),null;case 13:if(or(hr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));qi()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return or(hr),null;case 4:return Vi(),null;case 10:return Wm(c.type._context),null;case 22:case 23:return Ah(),null;case 24:return null;default:return null}}var Du=!1,Kr=!1,$3=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Ki(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){yr(o,c,y)}else p.current=null}function yh(o,c,p){try{p()}catch(y){yr(o,c,y)}}var tN=!1;function F3(o,c){if(Am=Kc,o=Rw(),Nm(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var R=0,H=-1,J=-1,de=0,_e=0,Pe=o,Ce=null;t:for(;;){for(var Ke;Pe!==p||S!==0&&Pe.nodeType!==3||(H=R+S),Pe!==E||y!==0&&Pe.nodeType!==3||(J=R+y),Pe.nodeType===3&&(R+=Pe.nodeValue.length),(Ke=Pe.firstChild)!==null;)Ce=Pe,Pe=Ke;for(;;){if(Pe===o)break t;if(Ce===p&&++de===S&&(H=R),Ce===E&&++_e===y&&(J=R),(Ke=Pe.nextSibling)!==null)break;Pe=Ce,Ce=Pe.parentNode}Pe=Ke}p=H===-1||J===-1?null:{start:H,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(Tm={focusedElem:o,selectionRange:p},Kc=!1,Ze=c;Ze!==null;)if(c=Ze,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ze=o;else for(;Ze!==null;){c=Ze;try{var tt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var at=tt.memoizedProps,br=tt.memoizedState,le=c.stateNode,ee=le.getSnapshotBeforeUpdate(c.elementType===c.type?at:us(c.type,at),br);le.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Me){yr(c,c.return,Me)}if(o=c.sibling,o!==null){o.return=c.return,Ze=o;break}Ze=c.return}return tt=tN,tN=!1,tt}function hl(o,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&o)===o){var E=S.destroy;S.destroy=void 0,E!==void 0&&yh(c,p,E)}S=S.next}while(S!==y)}}function Au(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function vh(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function rN(o){var c=o.alternate;c!==null&&(o.alternate=null,rN(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ws],delete c[nl],delete c[Mm],delete c[w3],delete c[N3])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function nN(o){return o.tag===5||o.tag===3||o.tag===4}function sN(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||nN(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function bh(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=ou));else if(y!==4&&(o=o.child,o!==null))for(bh(o,c,p),o=o.sibling;o!==null;)bh(o,c,p),o=o.sibling}function wh(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(wh(o,c,p),o=o.sibling;o!==null;)wh(o,c,p),o=o.sibling}var Fr=null,ds=!1;function da(o,c,p){for(p=p.child;p!==null;)aN(o,c,p),p=p.sibling}function aN(o,c,p){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(dt,p)}catch{}switch(p.tag){case 5:Kr||Ki(p,c);case 6:var y=Fr,S=ds;Fr=null,da(o,c,p),Fr=y,ds=S,Fr!==null&&(ds?(o=Fr,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):Fr.removeChild(p.stateNode));break;case 18:Fr!==null&&(ds?(o=Fr,p=p.stateNode,o.nodeType===8?Im(o.parentNode,p):o.nodeType===1&&Im(o,p),Ho(o)):Im(Fr,p.stateNode));break;case 4:y=Fr,S=ds,Fr=p.stateNode.containerInfo,ds=!0,da(o,c,p),Fr=y,ds=S;break;case 0:case 11:case 14:case 15:if(!Kr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var E=S,R=E.destroy;E=E.tag,R!==void 0&&((E&2)!==0||(E&4)!==0)&&yh(p,c,R),S=S.next}while(S!==y)}da(o,c,p);break;case 1:if(!Kr&&(Ki(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(H){yr(p,c,H)}da(o,c,p);break;case 21:da(o,c,p);break;case 22:p.mode&1?(Kr=(y=Kr)||p.memoizedState!==null,da(o,c,p),Kr=y):da(o,c,p);break;default:da(o,c,p)}}function iN(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new $3),c.forEach(function(y){var S=Y3.bind(null,o,y);p.has(y)||(p.add(y),y.then(S,S))})}}function fs(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var E=o,R=c,H=R;e:for(;H!==null;){switch(H.tag){case 5:Fr=H.stateNode,ds=!1;break e;case 3:Fr=H.stateNode.containerInfo,ds=!0;break e;case 4:Fr=H.stateNode.containerInfo,ds=!0;break e}H=H.return}if(Fr===null)throw Error(r(160));aN(E,R,S),Fr=null,ds=!1;var J=S.alternate;J!==null&&(J.return=null),S.return=null}catch(de){yr(S,c,de)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)oN(c,o),c=c.sibling}function oN(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(fs(c,o),Ss(o),y&4){try{hl(3,o,o.return),Au(3,o)}catch(at){yr(o,o.return,at)}try{hl(5,o,o.return)}catch(at){yr(o,o.return,at)}}break;case 1:fs(c,o),Ss(o),y&512&&p!==null&&Ki(p,p.return);break;case 5:if(fs(c,o),Ss(o),y&512&&p!==null&&Ki(p,p.return),o.flags&32){var S=o.stateNode;try{ae(S,"")}catch(at){yr(o,o.return,at)}}if(y&4&&(S=o.stateNode,S!=null)){var E=o.memoizedProps,R=p!==null?p.memoizedProps:E,H=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{H==="input"&&E.type==="radio"&&E.name!=null&&it(S,E),lt(H,R);var de=lt(H,E);for(R=0;R<J.length;R+=2){var _e=J[R],Pe=J[R+1];_e==="style"?nt(S,Pe):_e==="dangerouslySetInnerHTML"?Q(S,Pe):_e==="children"?ae(S,Pe):_(S,_e,Pe,de)}switch(H){case"input":Ge(S,E);break;case"textarea":Ee(S,E);break;case"select":var Ce=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Ke=E.value;Ke!=null?ve(S,!!E.multiple,Ke,!1):Ce!==!!E.multiple&&(E.defaultValue!=null?ve(S,!!E.multiple,E.defaultValue,!0):ve(S,!!E.multiple,E.multiple?[]:"",!1))}S[nl]=E}catch(at){yr(o,o.return,at)}}break;case 6:if(fs(c,o),Ss(o),y&4){if(o.stateNode===null)throw Error(r(162));S=o.stateNode,E=o.memoizedProps;try{S.nodeValue=E}catch(at){yr(o,o.return,at)}}break;case 3:if(fs(c,o),Ss(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Ho(c.containerInfo)}catch(at){yr(o,o.return,at)}break;case 4:fs(c,o),Ss(o);break;case 13:fs(c,o),Ss(o),S=o.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(Sh=fr())),y&4&&iN(o);break;case 22:if(_e=p!==null&&p.memoizedState!==null,o.mode&1?(Kr=(de=Kr)||_e,fs(c,o),Kr=de):fs(c,o),Ss(o),y&8192){if(de=o.memoizedState!==null,(o.stateNode.isHidden=de)&&!_e&&(o.mode&1)!==0)for(Ze=o,_e=o.child;_e!==null;){for(Pe=Ze=_e;Ze!==null;){switch(Ce=Ze,Ke=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:hl(4,Ce,Ce.return);break;case 1:Ki(Ce,Ce.return);var tt=Ce.stateNode;if(typeof tt.componentWillUnmount=="function"){y=Ce,p=Ce.return;try{c=y,tt.props=c.memoizedProps,tt.state=c.memoizedState,tt.componentWillUnmount()}catch(at){yr(y,p,at)}}break;case 5:Ki(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){uN(Pe);continue}}Ke!==null?(Ke.return=Ce,Ze=Ke):uN(Pe)}_e=_e.sibling}e:for(_e=null,Pe=o;;){if(Pe.tag===5){if(_e===null){_e=Pe;try{S=Pe.stateNode,de?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(H=Pe.stateNode,J=Pe.memoizedProps.style,R=J!=null&&J.hasOwnProperty("display")?J.display:null,H.style.display=We("display",R))}catch(at){yr(o,o.return,at)}}}else if(Pe.tag===6){if(_e===null)try{Pe.stateNode.nodeValue=de?"":Pe.memoizedProps}catch(at){yr(o,o.return,at)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===o)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===o)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===o)break e;_e===Pe&&(_e=null),Pe=Pe.return}_e===Pe&&(_e=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:fs(c,o),Ss(o),y&4&&iN(o);break;case 21:break;default:fs(c,o),Ss(o)}}function Ss(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(nN(p)){var y=p;break e}p=p.return}throw Error(r(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(ae(S,""),y.flags&=-33);var E=sN(o);wh(o,E,S);break;case 3:case 4:var R=y.stateNode.containerInfo,H=sN(o);bh(o,H,R);break;default:throw Error(r(161))}}catch(J){yr(o,o.return,J)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function B3(o,c,p){Ze=o,lN(o)}function lN(o,c,p){for(var y=(o.mode&1)!==0;Ze!==null;){var S=Ze,E=S.child;if(S.tag===22&&y){var R=S.memoizedState!==null||Du;if(!R){var H=S.alternate,J=H!==null&&H.memoizedState!==null||Kr;H=Du;var de=Kr;if(Du=R,(Kr=J)&&!de)for(Ze=S;Ze!==null;)R=Ze,J=R.child,R.tag===22&&R.memoizedState!==null?dN(S):J!==null?(J.return=R,Ze=J):dN(S);for(;E!==null;)Ze=E,lN(E),E=E.sibling;Ze=S,Du=H,Kr=de}cN(o)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Ze=E):cN(o)}}function cN(o){for(;Ze!==null;){var c=Ze;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Kr||Au(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Kr)if(p===null)y.componentDidMount();else{var S=c.elementType===c.type?p.memoizedProps:us(c.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=c.updateQueue;E!==null&&u1(c,E,y);break;case 3:var R=c.updateQueue;if(R!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}u1(c,R,p)}break;case 5:var H=c.stateNode;if(p===null&&c.flags&4){p=H;var J=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&p.focus();break;case"img":J.src&&(p.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var de=c.alternate;if(de!==null){var _e=de.memoizedState;if(_e!==null){var Pe=_e.dehydrated;Pe!==null&&Ho(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Kr||c.flags&512&&vh(c)}catch(Ce){yr(c,c.return,Ce)}}if(c===o){Ze=null;break}if(p=c.sibling,p!==null){p.return=c.return,Ze=p;break}Ze=c.return}}function uN(o){for(;Ze!==null;){var c=Ze;if(c===o){Ze=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Ze=p;break}Ze=c.return}}function dN(o){for(;Ze!==null;){var c=Ze;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Au(4,c)}catch(J){yr(c,p,J)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var S=c.return;try{y.componentDidMount()}catch(J){yr(c,S,J)}}var E=c.return;try{vh(c)}catch(J){yr(c,E,J)}break;case 5:var R=c.return;try{vh(c)}catch(J){yr(c,R,J)}}}catch(J){yr(c,c.return,J)}if(c===o){Ze=null;break}var H=c.sibling;if(H!==null){H.return=c.return,Ze=H;break}Ze=c.return}}var z3=Math.ceil,Tu=k.ReactCurrentDispatcher,Nh=k.ReactCurrentOwner,Yn=k.ReactCurrentBatchConfig,Ot=0,Rr=null,jr=null,Br=0,Tn=0,Qi=ia(0),_r=0,pl=null,Ya=0,Pu=0,jh=0,gl=null,gn=null,Sh=0,Xi=1/0,Hs=null,Ru=!1,kh=null,fa=null,Iu=!1,ma=null,Mu=0,xl=0,Ch=null,Ou=-1,Lu=0;function on(){return(Ot&6)!==0?fr():Ou!==-1?Ou:Ou=fr()}function ha(o){return(o.mode&1)===0?1:(Ot&2)!==0&&Br!==0?Br&-Br:S3.transition!==null?(Lu===0&&(Lu=ra()),Lu):(o=St,o!==0||(o=window.event,o=o===void 0?16:mw(o.type)),o)}function ms(o,c,p,y){if(50<xl)throw xl=0,Ch=null,Error(r(185));sn(o,p,y),((Ot&2)===0||o!==Rr)&&(o===Rr&&((Ot&2)===0&&(Pu|=p),_r===4&&pa(o,Br)),xn(o,y),p===1&&Ot===0&&(c.mode&1)===0&&(Xi=fr()+500,du&&la()))}function xn(o,c){var p=o.callbackNode;Pt(o,c);var y=oe(o,o===Rr?Br:0);if(y===0)p!==null&&Hc(p),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(p!=null&&Hc(p),c===1)o.tag===0?j3(mN.bind(null,o)):Jw(mN.bind(null,o)),v3(function(){(Ot&6)===0&&la()}),p=null;else{switch(ys(y)){case 1:p=Se;break;case 4:p=De;break;case 16:p=Fe;break;case 536870912:p=yt;break;default:p=Fe}p=wN(p,fN.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function fN(o,c){if(Ou=-1,Lu=0,(Ot&6)!==0)throw Error(r(327));var p=o.callbackNode;if(Ji()&&o.callbackNode!==p)return null;var y=oe(o,o===Rr?Br:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=$u(o,y);else{c=y;var S=Ot;Ot|=2;var E=pN();(Rr!==o||Br!==c)&&(Hs=null,Xi=fr()+500,Qa(o,c));do try{U3();break}catch(H){hN(o,H)}while(!0);Um(),Tu.current=E,Ot=S,jr!==null?c=0:(Rr=null,Br=0,c=_r)}if(c!==0){if(c===2&&(S=ar(o),S!==0&&(y=S,c=_h(o,S))),c===1)throw p=pl,Qa(o,0),pa(o,y),xn(o,fr()),p;if(c===6)pa(o,y);else{if(S=o.current.alternate,(y&30)===0&&!G3(S)&&(c=$u(o,y),c===2&&(E=ar(o),E!==0&&(y=E,c=_h(o,E))),c===1))throw p=pl,Qa(o,0),pa(o,y),xn(o,fr()),p;switch(o.finishedWork=S,o.finishedLanes=y,c){case 0:case 1:throw Error(r(345));case 2:Xa(o,gn,Hs);break;case 3:if(pa(o,y),(y&130023424)===y&&(c=Sh+500-fr(),10<c)){if(oe(o,0)!==0)break;if(S=o.suspendedLanes,(S&y)!==y){on(),o.pingedLanes|=o.suspendedLanes&S;break}o.timeoutHandle=Rm(Xa.bind(null,o,gn,Hs),c);break}Xa(o,gn,Hs);break;case 4:if(pa(o,y),(y&4194240)===y)break;for(c=o.eventTimes,S=-1;0<y;){var R=31-Ye(y);E=1<<R,R=c[R],R>S&&(S=R),y&=~E}if(y=S,y=fr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*z3(y/1960))-y,10<y){o.timeoutHandle=Rm(Xa.bind(null,o,gn,Hs),y);break}Xa(o,gn,Hs);break;case 5:Xa(o,gn,Hs);break;default:throw Error(r(329))}}}return xn(o,fr()),o.callbackNode===p?fN.bind(null,o):null}function _h(o,c){var p=gl;return o.current.memoizedState.isDehydrated&&(Qa(o,c).flags|=256),o=$u(o,c),o!==2&&(c=gn,gn=p,c!==null&&Eh(c)),o}function Eh(o){gn===null?gn=o:gn.push.apply(gn,o)}function G3(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],E=S.getSnapshot;S=S.value;try{if(!ls(E(),S))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function pa(o,c){for(c&=~jh,c&=~Pu,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-Ye(c),y=1<<p;o[p]=-1,c&=~y}}function mN(o){if((Ot&6)!==0)throw Error(r(327));Ji();var c=oe(o,0);if((c&1)===0)return xn(o,fr()),null;var p=$u(o,c);if(o.tag!==0&&p===2){var y=ar(o);y!==0&&(c=y,p=_h(o,y))}if(p===1)throw p=pl,Qa(o,0),pa(o,c),xn(o,fr()),p;if(p===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Xa(o,gn,Hs),xn(o,fr()),null}function Dh(o,c){var p=Ot;Ot|=1;try{return o(c)}finally{Ot=p,Ot===0&&(Xi=fr()+500,du&&la())}}function Ka(o){ma!==null&&ma.tag===0&&(Ot&6)===0&&Ji();var c=Ot;Ot|=1;var p=Yn.transition,y=St;try{if(Yn.transition=null,St=1,o)return o()}finally{St=y,Yn.transition=p,Ot=c,(Ot&6)===0&&la()}}function Ah(){Tn=Qi.current,or(Qi)}function Qa(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,y3(p)),jr!==null)for(p=jr.return;p!==null;){var y=p;switch(Fm(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&cu();break;case 3:Vi(),or(mn),or(Hr),Jm();break;case 5:Qm(y);break;case 4:Vi();break;case 13:or(hr);break;case 19:or(hr);break;case 10:Wm(y.type._context);break;case 22:case 23:Ah()}p=p.return}if(Rr=o,jr=o=ga(o.current,null),Br=Tn=c,_r=0,pl=null,jh=Pu=Ya=0,gn=gl=null,Wa!==null){for(c=0;c<Wa.length;c++)if(p=Wa[c],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,E=p.pending;if(E!==null){var R=E.next;E.next=S,y.next=R}p.pending=y}Wa=null}return o}function hN(o,c){do{var p=jr;try{if(Um(),wu.current=ku,Nu){for(var y=pr.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Nu=!1}if(Va=0,Pr=Cr=pr=null,cl=!1,ul=0,Nh.current=null,p===null||p.return===null){_r=1,pl=c,jr=null;break}e:{var E=o,R=p.return,H=p,J=c;if(c=Br,H.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var de=J,_e=H,Pe=_e.tag;if((_e.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var Ce=_e.alternate;Ce?(_e.updateQueue=Ce.updateQueue,_e.memoizedState=Ce.memoizedState,_e.lanes=Ce.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Ke=F1(R);if(Ke!==null){Ke.flags&=-257,B1(Ke,R,H,E,c),Ke.mode&1&&$1(E,de,c),c=Ke,J=de;var tt=c.updateQueue;if(tt===null){var at=new Set;at.add(J),c.updateQueue=at}else tt.add(J);break e}else{if((c&1)===0){$1(E,de,c),Th();break e}J=Error(r(426))}}else if(ur&&H.mode&1){var br=F1(R);if(br!==null){(br.flags&65536)===0&&(br.flags|=256),B1(br,R,H,E,c),Gm(Yi(J,H));break e}}E=J=Yi(J,H),_r!==4&&(_r=2),gl===null?gl=[E]:gl.push(E),E=R;do{switch(E.tag){case 3:E.flags|=65536,c&=-c,E.lanes|=c;var le=O1(E,J,c);c1(E,le);break e;case 1:H=J;var ee=E.type,ue=E.stateNode;if((E.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(fa===null||!fa.has(ue)))){E.flags|=65536,c&=-c,E.lanes|=c;var Me=L1(E,H,c);c1(E,Me);break e}}E=E.return}while(E!==null)}xN(p)}catch(ot){c=ot,jr===p&&p!==null&&(jr=p=p.return);continue}break}while(!0)}function pN(){var o=Tu.current;return Tu.current=ku,o===null?ku:o}function Th(){(_r===0||_r===3||_r===2)&&(_r=4),Rr===null||(Ya&268435455)===0&&(Pu&268435455)===0||pa(Rr,Br)}function $u(o,c){var p=Ot;Ot|=2;var y=pN();(Rr!==o||Br!==c)&&(Hs=null,Qa(o,c));do try{q3();break}catch(S){hN(o,S)}while(!0);if(Um(),Ot=p,Tu.current=y,jr!==null)throw Error(r(261));return Rr=null,Br=0,_r}function q3(){for(;jr!==null;)gN(jr)}function U3(){for(;jr!==null&&!lm();)gN(jr)}function gN(o){var c=bN(o.alternate,o,Tn);o.memoizedProps=o.pendingProps,c===null?xN(o):jr=c,Nh.current=null}function xN(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=O3(p,c,Tn),p!==null){jr=p;return}}else{if(p=L3(p,c),p!==null){p.flags&=32767,jr=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{_r=6,jr=null;return}}if(c=c.sibling,c!==null){jr=c;return}jr=c=o}while(c!==null);_r===0&&(_r=5)}function Xa(o,c,p){var y=St,S=Yn.transition;try{Yn.transition=null,St=1,W3(o,c,p,y)}finally{Yn.transition=S,St=y}return null}function W3(o,c,p,y){do Ji();while(ma!==null);if((Ot&6)!==0)throw Error(r(327));p=o.finishedWork;var S=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var E=p.lanes|p.childLanes;if(Et(o,E),o===Rr&&(jr=Rr=null,Br=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Iu||(Iu=!0,wN(Fe,function(){return Ji(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=Yn.transition,Yn.transition=null;var R=St;St=1;var H=Ot;Ot|=4,Nh.current=null,F3(o,p),oN(p,o),d3(Tm),Kc=!!Am,Tm=Am=null,o.current=p,B3(p),cm(),Ot=H,St=R,Yn.transition=E}else o.current=p;if(Iu&&(Iu=!1,ma=o,Mu=S),E=o.pendingLanes,E===0&&(fa=null),Nt(p.stateNode),xn(o,fr()),c!==null)for(y=o.onRecoverableError,p=0;p<c.length;p++)S=c[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(Ru)throw Ru=!1,o=kh,kh=null,o;return(Mu&1)!==0&&o.tag!==0&&Ji(),E=o.pendingLanes,(E&1)!==0?o===Ch?xl++:(xl=0,Ch=o):xl=0,la(),null}function Ji(){if(ma!==null){var o=ys(Mu),c=Yn.transition,p=St;try{if(Yn.transition=null,St=16>o?16:o,ma===null)var y=!1;else{if(o=ma,ma=null,Mu=0,(Ot&6)!==0)throw Error(r(331));var S=Ot;for(Ot|=4,Ze=o.current;Ze!==null;){var E=Ze,R=E.child;if((Ze.flags&16)!==0){var H=E.deletions;if(H!==null){for(var J=0;J<H.length;J++){var de=H[J];for(Ze=de;Ze!==null;){var _e=Ze;switch(_e.tag){case 0:case 11:case 15:hl(8,_e,E)}var Pe=_e.child;if(Pe!==null)Pe.return=_e,Ze=Pe;else for(;Ze!==null;){_e=Ze;var Ce=_e.sibling,Ke=_e.return;if(rN(_e),_e===de){Ze=null;break}if(Ce!==null){Ce.return=Ke,Ze=Ce;break}Ze=Ke}}}var tt=E.alternate;if(tt!==null){var at=tt.child;if(at!==null){tt.child=null;do{var br=at.sibling;at.sibling=null,at=br}while(at!==null)}}Ze=E}}if((E.subtreeFlags&2064)!==0&&R!==null)R.return=E,Ze=R;else e:for(;Ze!==null;){if(E=Ze,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:hl(9,E,E.return)}var le=E.sibling;if(le!==null){le.return=E.return,Ze=le;break e}Ze=E.return}}var ee=o.current;for(Ze=ee;Ze!==null;){R=Ze;var ue=R.child;if((R.subtreeFlags&2064)!==0&&ue!==null)ue.return=R,Ze=ue;else e:for(R=ee;Ze!==null;){if(H=Ze,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Au(9,H)}}catch(ot){yr(H,H.return,ot)}if(H===R){Ze=null;break e}var Me=H.sibling;if(Me!==null){Me.return=H.return,Ze=Me;break e}Ze=H.return}}if(Ot=S,la(),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(dt,o)}catch{}y=!0}return y}finally{St=p,Yn.transition=c}}return!1}function yN(o,c,p){c=Yi(p,c),c=O1(o,c,1),o=ua(o,c,1),c=on(),o!==null&&(sn(o,1,c),xn(o,c))}function yr(o,c,p){if(o.tag===3)yN(o,o,p);else for(;c!==null;){if(c.tag===3){yN(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(fa===null||!fa.has(y))){o=Yi(p,o),o=L1(c,o,1),c=ua(c,o,1),o=on(),c!==null&&(sn(c,1,o),xn(c,o));break}}c=c.return}}function H3(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),c=on(),o.pingedLanes|=o.suspendedLanes&p,Rr===o&&(Br&p)===p&&(_r===4||_r===3&&(Br&130023424)===Br&&500>fr()-Sh?Qa(o,0):jh|=p),xn(o,c)}function vN(o,c){c===0&&((o.mode&1)===0?c=1:(c=jt,jt<<=1,(jt&130023424)===0&&(jt=4194304)));var p=on();o=qs(o,c),o!==null&&(sn(o,c,p),xn(o,p))}function V3(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),vN(o,p)}function Y3(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,S=o.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(c),vN(o,p)}var bN;bN=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||mn.current)pn=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return pn=!1,M3(o,c,p);pn=(o.flags&131072)!==0}else pn=!1,ur&&(c.flags&1048576)!==0&&Zw(c,mu,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Eu(o,c),o=c.pendingProps;var S=Bi(c,Hr.current);Hi(c,p),S=th(null,c,y,o,S,p);var E=rh();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,hn(y)?(E=!0,uu(c)):E=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Ym(c),S.updater=Cu,c.stateNode=S,S._reactInternals=c,lh(c,y,o,p),c=fh(null,c,y,!0,E,p)):(c.tag=0,ur&&E&&$m(c),an(null,c,S,p),c=c.child),c;case 16:y=c.elementType;e:{switch(Eu(o,c),o=c.pendingProps,S=y._init,y=S(y._payload),c.type=y,S=c.tag=Q3(y),o=us(y,o),S){case 0:c=dh(null,c,y,o,p);break e;case 1:c=H1(null,c,y,o,p);break e;case 11:c=z1(null,c,y,o,p);break e;case 14:c=G1(null,c,y,us(y.type,o),p);break e}throw Error(r(306,y,""))}return c;case 0:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:us(y,S),dh(o,c,y,S,p);case 1:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:us(y,S),H1(o,c,y,S,p);case 3:e:{if(V1(c),o===null)throw Error(r(387));y=c.pendingProps,E=c.memoizedState,S=E.element,l1(o,c),vu(c,y,null,p);var R=c.memoizedState;if(y=R.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){S=Yi(Error(r(423)),c),c=Y1(o,c,y,p,S);break e}else if(y!==S){S=Yi(Error(r(424)),c),c=Y1(o,c,y,p,S);break e}else for(An=aa(c.stateNode.containerInfo.firstChild),Dn=c,ur=!0,cs=null,p=i1(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(qi(),y===S){c=Ws(o,c,p);break e}an(o,c,y,p)}c=c.child}return c;case 5:return d1(c),o===null&&zm(c),y=c.type,S=c.pendingProps,E=o!==null?o.memoizedProps:null,R=S.children,Pm(y,S)?R=null:E!==null&&Pm(y,E)&&(c.flags|=32),W1(o,c),an(o,c,R,p),c.child;case 6:return o===null&&zm(c),null;case 13:return K1(o,c,p);case 4:return Km(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=Ui(c,null,y,p):an(o,c,y,p),c.child;case 11:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:us(y,S),z1(o,c,y,S,p);case 7:return an(o,c,c.pendingProps,p),c.child;case 8:return an(o,c,c.pendingProps.children,p),c.child;case 12:return an(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,S=c.pendingProps,E=c.memoizedProps,R=S.value,er(gu,y._currentValue),y._currentValue=R,E!==null)if(ls(E.value,R)){if(E.children===S.children&&!mn.current){c=Ws(o,c,p);break e}}else for(E=c.child,E!==null&&(E.return=c);E!==null;){var H=E.dependencies;if(H!==null){R=E.child;for(var J=H.firstContext;J!==null;){if(J.context===y){if(E.tag===1){J=Us(-1,p&-p),J.tag=2;var de=E.updateQueue;if(de!==null){de=de.shared;var _e=de.pending;_e===null?J.next=J:(J.next=_e.next,_e.next=J),de.pending=J}}E.lanes|=p,J=E.alternate,J!==null&&(J.lanes|=p),Hm(E.return,p,c),H.lanes|=p;break}J=J.next}}else if(E.tag===10)R=E.type===c.type?null:E.child;else if(E.tag===18){if(R=E.return,R===null)throw Error(r(341));R.lanes|=p,H=R.alternate,H!==null&&(H.lanes|=p),Hm(R,p,c),R=E.sibling}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===c){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}an(o,c,S.children,p),c=c.child}return c;case 9:return S=c.type,y=c.pendingProps.children,Hi(c,p),S=Hn(S),y=y(S),c.flags|=1,an(o,c,y,p),c.child;case 14:return y=c.type,S=us(y,c.pendingProps),S=us(y.type,S),G1(o,c,y,S,p);case 15:return q1(o,c,c.type,c.pendingProps,p);case 17:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:us(y,S),Eu(o,c),c.tag=1,hn(y)?(o=!0,uu(c)):o=!1,Hi(c,p),I1(c,y,S),lh(c,y,S,p),fh(null,c,y,!0,o,p);case 19:return X1(o,c,p);case 22:return U1(o,c,p)}throw Error(r(156,c.tag))};function wN(o,c){return Wc(o,c)}function K3(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(o,c,p,y){return new K3(o,c,p,y)}function Ph(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Q3(o){if(typeof o=="function")return Ph(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===te)return 14}return 2}function ga(o,c){var p=o.alternate;return p===null?(p=Kn(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Fu(o,c,p,y,S,E){var R=2;if(y=o,typeof o=="function")Ph(o)&&(R=1);else if(typeof o=="string")R=5;else e:switch(o){case T:return Ja(p.children,S,E,c);case I:R=8,S|=8;break;case L:return o=Kn(12,p,c,S|2),o.elementType=L,o.lanes=E,o;case z:return o=Kn(13,p,c,S),o.elementType=z,o.lanes=E,o;case K:return o=Kn(19,p,c,S),o.elementType=K,o.lanes=E,o;case W:return Bu(p,S,E,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case q:R=10;break e;case O:R=9;break e;case $:R=11;break e;case te:R=14;break e;case se:R=16,y=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Kn(R,p,c,S),c.elementType=o,c.type=y,c.lanes=E,c}function Ja(o,c,p,y){return o=Kn(7,o,y,c),o.lanes=p,o}function Bu(o,c,p,y){return o=Kn(22,o,y,c),o.elementType=W,o.lanes=p,o.stateNode={isHidden:!1},o}function Rh(o,c,p){return o=Kn(6,o,null,c),o.lanes=p,o}function Ih(o,c,p){return c=Kn(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function X3(o,c,p,y,S){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_n(0),this.expirationTimes=_n(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Mh(o,c,p,y,S,E,R,H,J){return o=new X3(o,c,p,H,J),c===1?(c=1,E===!0&&(c|=8)):c=0,E=Kn(3,null,null,c),o.current=E,E.stateNode=o,E.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(E),o}function J3(o,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:o,containerInfo:c,implementation:p}}function NN(o){if(!o)return oa;o=o._reactInternals;e:{if(zn(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(hn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var p=o.type;if(hn(p))return Qw(o,p,c)}return c}function jN(o,c,p,y,S,E,R,H,J){return o=Mh(p,y,!0,o,S,E,R,H,J),o.context=NN(null),p=o.current,y=on(),S=ha(p),E=Us(y,S),E.callback=c??null,ua(p,E,S),o.current.lanes=S,sn(o,S,y),xn(o,y),o}function zu(o,c,p,y){var S=c.current,E=on(),R=ha(S);return p=NN(p),c.context===null?c.context=p:c.pendingContext=p,c=Us(E,R),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=ua(S,c,R),o!==null&&(ms(o,S,R,E),yu(o,S,R)),R}function Gu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function SN(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function Oh(o,c){SN(o,c),(o=o.alternate)&&SN(o,c)}function Z3(){return null}var kN=typeof reportError=="function"?reportError:function(o){console.error(o)};function Lh(o){this._internalRoot=o}qu.prototype.render=Lh.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));zu(o,c,null,null)},qu.prototype.unmount=Lh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Ka(function(){zu(null,o,null,null)}),c[Fs]=null}};function qu(o){this._internalRoot=o}qu.prototype.unstable_scheduleHydration=function(o){if(o){var c=vs();o={blockedOn:null,target:o,priority:c};for(var p=0;p<bs.length&&c!==0&&c<bs[p].priority;p++);bs.splice(p,0,o),p===0&&dw(o)}};function $h(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Uu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function CN(){}function e5(o,c,p,y,S){if(S){if(typeof y=="function"){var E=y;y=function(){var de=Gu(R);E.call(de)}}var R=jN(c,y,o,0,null,!1,!1,"",CN);return o._reactRootContainer=R,o[Fs]=R.current,tl(o.nodeType===8?o.parentNode:o),Ka(),R}for(;S=o.lastChild;)o.removeChild(S);if(typeof y=="function"){var H=y;y=function(){var de=Gu(J);H.call(de)}}var J=Mh(o,0,!1,null,null,!1,!1,"",CN);return o._reactRootContainer=J,o[Fs]=J.current,tl(o.nodeType===8?o.parentNode:o),Ka(function(){zu(c,J,p,y)}),J}function Wu(o,c,p,y,S){var E=p._reactRootContainer;if(E){var R=E;if(typeof S=="function"){var H=S;S=function(){var J=Gu(R);H.call(J)}}zu(c,R,o,S)}else R=e5(p,c,o,S,y);return Gu(R)}Wr=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=At(c.pendingLanes);p!==0&&(Gn(c,p|1),xn(c,fr()),(Ot&6)===0&&(Xi=fr()+500,la()))}break;case 13:Ka(function(){var y=qs(o,1);if(y!==null){var S=on();ms(y,o,1,S)}}),Oh(o,1)}},as=function(o){if(o.tag===13){var c=qs(o,134217728);if(c!==null){var p=on();ms(c,o,134217728,p)}Oh(o,134217728)}},Fa=function(o){if(o.tag===13){var c=ha(o),p=qs(o,c);if(p!==null){var y=on();ms(p,o,c,y)}Oh(o,c)}},vs=function(){return St},It=function(o,c){var p=St;try{return St=o,c()}finally{St=p}},Kt=function(o,c,p){switch(c){case"input":if(Ge(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var S=lu(y);if(!S)throw Error(r(90));xe(y),Ge(y,S)}}}break;case"textarea":Ee(o,p);break;case"select":c=p.value,c!=null&&ve(o,!!p.multiple,c,!1)}},Di=Dh,Oa=Ka;var t5={usingClientEntryPoint:!1,Events:[sl,$i,lu,Xt,ss,Dh]},yl={findFiberByHostInstance:za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r5={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=qo(o),o===null?null:o.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||Z3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{dt=Hu.inject(r5),Le=Hu}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t5,yn.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(c))throw Error(r(200));return J3(o,c,null,p)},yn.createRoot=function(o,c){if(!$h(o))throw Error(r(299));var p=!1,y="",S=kN;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),c=Mh(o,1,!1,null,null,p,!1,y,S),o[Fs]=c.current,tl(o.nodeType===8?o.parentNode:o),new Lh(c)},yn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=qo(c),o=o===null?null:o.stateNode,o},yn.flushSync=function(o){return Ka(o)},yn.hydrate=function(o,c,p){if(!Uu(c))throw Error(r(200));return Wu(null,o,c,!0,p)},yn.hydrateRoot=function(o,c,p){if(!$h(o))throw Error(r(405));var y=p!=null&&p.hydratedSources||null,S=!1,E="",R=kN;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),c=jN(c,null,o,1,p??null,S,!1,E,R),o[Fs]=c.current,tl(o),y)for(o=0;o<y.length;o++)p=y[o],S=p._getVersion,S=S(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,S]:c.mutableSourceEagerHydrationData.push(p,S);return new qu(c)},yn.render=function(o,c,p){if(!Uu(c))throw Error(r(200));return Wu(null,o,c,!1,p)},yn.unmountComponentAtNode=function(o){if(!Uu(o))throw Error(r(40));return o._reactRootContainer?(Ka(function(){Wu(null,null,o,!1,function(){o._reactRootContainer=null,o[Fs]=null})}),!0):!1},yn.unstable_batchedUpdates=Dh,yn.unstable_renderSubtreeIntoContainer=function(o,c,p,y){if(!Uu(p))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Wu(o,c,p,!1,y)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var IN;function OE(){if(IN)return zh.exports;IN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zh.exports=d5(),zh.exports}var MN;function f5(){if(MN)return Yu;MN=1;var e=OE();return Yu.createRoot=e.createRoot,Yu.hydrateRoot=e.hydrateRoot,Yu}var m5=f5();const h5=qr(m5);var xv=OE();const yv=qr(xv);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hl.apply(this,arguments)}var Na;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Na||(Na={}));const ON="popstate";function p5(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:l,hash:u}=s.location;return hy("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Ad(a)}return x5(t,r,null,e)}function gr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function LE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g5(){return Math.random().toString(36).substr(2,8)}function LN(e,t){return{usr:e.state,key:e.key,idx:t}}function hy(e,t,r,s){return r===void 0&&(r=null),Hl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ko(t):t,{state:r,key:t&&t.key||s||g5()})}function Ad(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ko(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function x5(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u=Na.Pop,d=null,m=f();m==null&&(m=0,l.replaceState(Hl({},l.state,{idx:m}),""));function f(){return(l.state||{idx:null}).idx}function h(){u=Na.Pop;let w=f(),C=w==null?null:w-m;m=w,d&&d({action:u,location:v.location,delta:C})}function g(w,C){u=Na.Push;let j=hy(v.location,w,C);m=f()+1;let _=LN(j,m),k=v.createHref(j);try{l.pushState(_,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(k)}i&&d&&d({action:u,location:v.location,delta:1})}function x(w,C){u=Na.Replace;let j=hy(v.location,w,C);m=f();let _=LN(j,m),k=v.createHref(j);l.replaceState(_,"",k),i&&d&&d({action:u,location:v.location,delta:0})}function b(w){let C=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof w=="string"?w:Ad(w);return j=j.replace(/ $/,"%20"),gr(C,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,C)}let v={get action(){return u},get location(){return e(a,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(ON,h),d=w,()=>{a.removeEventListener(ON,h),d=null}},createHref(w){return t(a,w)},createURL:b,encodeLocation(w){let C=b(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:x,go(w){return l.go(w)}};return v}var $N;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($N||($N={}));function y5(e,t,r){return r===void 0&&(r="/"),v5(e,t,r)}function v5(e,t,r,s){let a=typeof t=="string"?ko(t):t,i=fo(a.pathname||"/",r);if(i==null)return null;let l=$E(e);b5(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=T5(i);u=D5(l[d],m)}return u}function $E(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(gr(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let m=Sa([s,d.relativePath]),f=r.concat(d);i.children&&i.children.length>0&&(gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),$E(i.children,t,f,m)),!(i.path==null&&!i.index)&&t.push({path:m,score:_5(m,i.index),routesMeta:f})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,l);else for(let d of FE(i.path))a(i,l,d)}),t}function FE(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=FE(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function b5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:E5(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const w5=/^:[\w-]+$/,N5=3,j5=2,S5=1,k5=10,C5=-2,FN=e=>e==="*";function _5(e,t){let r=e.split("/"),s=r.length;return r.some(FN)&&(s+=C5),t&&(s+=j5),r.filter(a=>!FN(a)).reduce((a,i)=>a+(w5.test(i)?N5:i===""?S5:k5),s)}function E5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function D5(e,t,r){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],m=u===s.length-1,f=i==="/"?t:t.slice(i.length)||"/",h=py({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),g=d.route;if(!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:Sa([i,h.pathname]),pathnameBase:M5(Sa([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=Sa([i,h.pathnameBase]))}return l}function py(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=A5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((m,f,h)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let v=u[h]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=u[h];return x&&!b?m[g]=void 0:m[g]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function A5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),LE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function T5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return LE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function P5(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?ko(e):e;return{pathname:r?r.startsWith("/")?r:R5(r,t):t,search:O5(s),hash:L5(a)}}function R5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Uh(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vv(e,t){let r=I5(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function bv(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=ko(e):(a=Hl({},e),gr(!a.pathname||!a.pathname.includes("?"),Uh("?","pathname","search",a)),gr(!a.pathname||!a.pathname.includes("#"),Uh("#","pathname","hash",a)),gr(!a.search||!a.search.includes("#"),Uh("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=r;else{let h=t.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}u=h>=0?t[h]:"/"}let d=P5(a,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}const Sa=e=>e.join("/").replace(/\/\/+/g,"/"),M5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,L5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const BE=["post","put","patch","delete"];new Set(BE);const F5=["get",...BE];new Set(F5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vl.apply(this,arguments)}const cf=N.createContext(null),zE=N.createContext(null),Zs=N.createContext(null),uf=N.createContext(null),Ms=N.createContext({outlet:null,matches:[],isDataRoute:!1}),GE=N.createContext(null);function B5(e,t){let{relative:r}=t===void 0?{}:t;Co()||gr(!1);let{basename:s,navigator:a}=N.useContext(Zs),{hash:i,pathname:l,search:u}=df(e,{relative:r}),d=l;return s!=="/"&&(d=l==="/"?s:Sa([s,l])),a.createHref({pathname:d,search:u,hash:i})}function Co(){return N.useContext(uf)!=null}function Os(){return Co()||gr(!1),N.useContext(uf).location}function qE(e){N.useContext(Zs).static||N.useLayoutEffect(e)}function Lt(){let{isDataRoute:e}=N.useContext(Ms);return e?tR():z5()}function z5(){Co()||gr(!1);let e=N.useContext(cf),{basename:t,future:r,navigator:s}=N.useContext(Zs),{matches:a}=N.useContext(Ms),{pathname:i}=Os(),l=JSON.stringify(vv(a,r.v7_relativeSplatPath)),u=N.useRef(!1);return qE(()=>{u.current=!0}),N.useCallback(function(m,f){if(f===void 0&&(f={}),!u.current)return;if(typeof m=="number"){s.go(m);return}let h=bv(m,JSON.parse(l),i,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Sa([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,l,i,e])}const UE=N.createContext(null);function G5(){return N.useContext(UE)}function q5(e){let t=N.useContext(Ms).outlet;return t&&N.createElement(UE.Provider,{value:e},t)}function wr(){let{matches:e}=N.useContext(Ms),t=e[e.length-1];return t?t.params:{}}function df(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=N.useContext(Zs),{matches:a}=N.useContext(Ms),{pathname:i}=Os(),l=JSON.stringify(vv(a,s.v7_relativeSplatPath));return N.useMemo(()=>bv(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function U5(e,t){return W5(e,t)}function W5(e,t,r,s){Co()||gr(!1);let{navigator:a}=N.useContext(Zs),{matches:i}=N.useContext(Ms),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let m=Os(),f;if(t){var h;let w=typeof t=="string"?ko(t):t;d==="/"||(h=w.pathname)!=null&&h.startsWith(d)||gr(!1),f=w}else f=m;let g=f.pathname||"/",x=g;if(d!=="/"){let w=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=y5(e,{pathname:x}),v=Q5(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Sa([d,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Sa([d,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,s);return t&&v?N.createElement(uf.Provider,{value:{location:Vl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Na.Pop}},v):v}function H5(){let e=eR(),t=$5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:a},r):null,null)}const V5=N.createElement(H5,null);class Y5 extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(Ms.Provider,{value:this.props.routeContext},N.createElement(GE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function K5(e){let{routeContext:t,match:r,children:s}=e,a=N.useContext(cf);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Ms.Provider,{value:t},s)}function Q5(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let f=l.findIndex(h=>h.route.id&&(u==null?void 0:u[h.route.id])!==void 0);f>=0||gr(!1),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,m=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let h=l[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(m=f),h.route.id){let{loaderData:g,errors:x}=r,b=h.route.loader&&g[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||b){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((f,h,g)=>{let x,b=!1,v=null,w=null;r&&(x=u&&h.route.id?u[h.route.id]:void 0,v=h.route.errorElement||V5,d&&(m<0&&g===0?(rR("route-fallback"),b=!0,w=null):m===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,g+1)),j=()=>{let _;return x?_=v:b?_=w:h.route.Component?_=N.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=f,N.createElement(K5,{match:h,routeContext:{outlet:f,matches:C,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?N.createElement(Y5,{location:r.location,revalidation:r.revalidation,component:v,error:x,children:j(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):j()},null)}var WE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(WE||{}),HE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(HE||{});function X5(e){let t=N.useContext(cf);return t||gr(!1),t}function J5(e){let t=N.useContext(zE);return t||gr(!1),t}function Z5(e){let t=N.useContext(Ms);return t||gr(!1),t}function VE(e){let t=Z5(),r=t.matches[t.matches.length-1];return r.route.id||gr(!1),r.route.id}function eR(){var e;let t=N.useContext(GE),r=J5(),s=VE();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function tR(){let{router:e}=X5(WE.UseNavigateStable),t=VE(HE.UseNavigateStable),r=N.useRef(!1);return qE(()=>{r.current=!0}),N.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Vl({fromRouteId:t},i)))},[e,t])}const BN={};function rR(e,t,r){BN[e]||(BN[e]=!0)}function nR(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zN(e){let{to:t,replace:r,state:s,relative:a}=e;Co()||gr(!1);let{future:i,static:l}=N.useContext(Zs),{matches:u}=N.useContext(Ms),{pathname:d}=Os(),m=Lt(),f=bv(t,vv(u,i.v7_relativeSplatPath),d,a==="path"),h=JSON.stringify(f);return N.useEffect(()=>m(JSON.parse(h),{replace:r,state:s,relative:a}),[m,h,a,r,s]),null}function sR(e){return q5(e.context)}function Ct(e){gr(!1)}function aR(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Na.Pop,navigator:i,static:l=!1,future:u}=e;Co()&&gr(!1);let d=t.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:d,navigator:i,static:l,future:Vl({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);typeof s=="string"&&(s=ko(s));let{pathname:f="/",search:h="",hash:g="",state:x=null,key:b="default"}=s,v=N.useMemo(()=>{let w=fo(f,d);return w==null?null:{location:{pathname:w,search:h,hash:g,state:x,key:b},navigationType:a}},[d,f,h,g,x,b,a]);return v==null?null:N.createElement(Zs.Provider,{value:m},N.createElement(uf.Provider,{children:r,value:v}))}function iR(e){let{children:t,location:r}=e;return U5(gy(t),r)}new Promise(()=>{});function gy(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(s,a)=>{if(!N.isValidElement(s))return;let i=[...t,a];if(s.type===N.Fragment){r.push.apply(r,gy(s.props.children,i));return}s.type!==Ct&&gr(!1),!s.props.index||!s.props.children||gr(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=gy(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Td.apply(this,arguments)}function YE(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function oR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lR(e,t){return e.button===0&&(!t||t==="_self")&&!oR(e)}const cR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dR="6";try{window.__reactRouterVersion=dR}catch{}const fR=N.createContext({isTransitioning:!1}),mR="startTransition",GN=l5[mR];function hR(e){let{basename:t,children:r,future:s,window:a}=e,i=N.useRef();i.current==null&&(i.current=p5({window:a,v5Compat:!0}));let l=i.current,[u,d]=N.useState({action:l.action,location:l.location}),{v7_startTransition:m}=s||{},f=N.useCallback(h=>{m&&GN?GN(()=>d(h)):d(h)},[d,m]);return N.useLayoutEffect(()=>l.listen(f),[l,f]),N.useEffect(()=>nR(s),[s]),N.createElement(aR,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:l,future:s})}const pR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=N.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:h}=t,g=YE(t,cR),{basename:x}=N.useContext(Zs),b,v=!1;if(typeof m=="string"&&gR.test(m)&&(b=m,pR))try{let _=new URL(window.location.href),k=m.startsWith("//")?new URL(_.protocol+m):new URL(m),D=fo(k.pathname,x);k.origin===_.origin&&D!=null?m=D+k.search+k.hash:v=!0}catch{}let w=B5(m,{relative:a}),C=vR(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:a,viewTransition:h});function j(_){s&&s(_),_.defaultPrevented||C(_)}return N.createElement("a",Td({},g,{href:b||w,onClick:v||i?s:j,ref:r,target:d}))}),xR=N.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:m,children:f}=t,h=YE(t,uR),g=df(d,{relative:h.relative}),x=Os(),b=N.useContext(zE),{navigator:v,basename:w}=N.useContext(Zs),C=b!=null&&bR(g)&&m===!0,j=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,_=x.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(_=_.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&w&&(k=fo(k,w)||k);const D=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let A=_===j||!l&&_.startsWith(j)&&_.charAt(D)==="/",T=k!=null&&(k===j||!l&&k.startsWith(j)&&k.charAt(j.length)==="/"),I={isActive:A,isPending:T,isTransitioning:C},L=A?s:void 0,q;typeof i=="function"?q=i(I):q=[i,A?"active":null,T?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(I):u;return N.createElement(Er,Td({},h,{"aria-current":L,className:q,ref:r,style:O,to:d,viewTransition:m}),typeof f=="function"?f(I):f)});var xy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xy||(xy={}));var qN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(qN||(qN={}));function yR(e){let t=N.useContext(cf);return t||gr(!1),t}function vR(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:u}=t===void 0?{}:t,d=Lt(),m=Os(),f=df(e,{relative:l});return N.useCallback(h=>{if(lR(h,r)){h.preventDefault();let g=s!==void 0?s:Ad(m)===Ad(f);d(e,{replace:g,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[m,d,f,s,a,r,e,i,l,u])}function bR(e,t){t===void 0&&(t={});let r=N.useContext(fR);r==null&&gr(!1);let{basename:s}=yR(xy.useViewTransitionState),a=df(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=fo(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=fo(r.nextLocation.pathname,s)||r.nextLocation.pathname;return py(a.pathname,l)!=null||py(a.pathname,i)!=null}function KE(e,t){return function(){return e.apply(t,arguments)}}const{toString:wR}=Object.prototype,{getPrototypeOf:wv}=Object,{iterator:ff,toStringTag:QE}=Symbol,mf=(e=>t=>{const r=wR.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xs=e=>(e=e.toLowerCase(),t=>mf(t)===e),hf=e=>t=>typeof t===e,{isArray:_o}=Array,Yl=hf("undefined");function NR(e){return e!==null&&!Yl(e)&&e.constructor!==null&&!Yl(e.constructor)&&bn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const XE=xs("ArrayBuffer");function jR(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&XE(e.buffer),t}const SR=hf("string"),bn=hf("function"),JE=hf("number"),pf=e=>e!==null&&typeof e=="object",kR=e=>e===!0||e===!1,fd=e=>{if(mf(e)!=="object")return!1;const t=wv(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(QE in e)&&!(ff in e)},CR=xs("Date"),_R=xs("File"),ER=xs("Blob"),DR=xs("FileList"),AR=e=>pf(e)&&bn(e.pipe),TR=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||bn(e.append)&&((t=mf(e))==="formdata"||t==="object"&&bn(e.toString)&&e.toString()==="[object FormData]"))},PR=xs("URLSearchParams"),[RR,IR,MR,OR]=["ReadableStream","Request","Response","Headers"].map(xs),LR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),_o(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let u;for(s=0;s<l;s++)u=i[s],t.call(null,e[u],u,e)}}function ZE(e,t){t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const si=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,e4=e=>!Yl(e)&&e!==si;function yy(){const{caseless:e}=e4(this)&&this||{},t={},r=(s,a)=>{const i=e&&ZE(t,a)||a;fd(t[i])&&fd(s)?t[i]=yy(t[i],s):fd(s)?t[i]=yy({},s):_o(s)?t[i]=s.slice():t[i]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Sc(arguments[s],r);return t}const $R=(e,t,r,{allOwnKeys:s}={})=>(Sc(t,(a,i)=>{r&&bn(a)?e[i]=KE(a,r):e[i]=a},{allOwnKeys:s}),e),FR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),BR=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},zR=(e,t,r,s)=>{let a,i,l;const u={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!s||s(l,e,t))&&!u[l]&&(t[l]=e[l],u[l]=!0);e=r!==!1&&wv(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},GR=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},qR=e=>{if(!e)return null;if(_o(e))return e;let t=e.length;if(!JE(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},UR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wv(Uint8Array)),WR=(e,t)=>{const s=(e&&e[ff]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},HR=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},VR=xs("HTMLFormElement"),YR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),UN=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),KR=xs("RegExp"),t4=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Sc(r,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(s[i]=l||a)}),Object.defineProperties(e,s)},QR=e=>{t4(e,(t,r)=>{if(bn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(bn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},XR=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return _o(e)?s(e):s(String(e).split(t)),r},JR=()=>{},ZR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function eI(e){return!!(e&&bn(e.append)&&e[QE]==="FormData"&&e[ff])}const tI=e=>{const t=new Array(10),r=(s,a)=>{if(pf(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[a]=s;const i=_o(s)?[]:{};return Sc(s,(l,u)=>{const d=r(l,a+1);!Yl(d)&&(i[u]=d)}),t[a]=void 0,i}}return s};return r(e,0)},rI=xs("AsyncFunction"),nI=e=>e&&(pf(e)||bn(e))&&bn(e.then)&&bn(e.catch),r4=((e,t)=>e?setImmediate:t?((r,s)=>(si.addEventListener("message",({source:a,data:i})=>{a===si&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),si.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",bn(si.postMessage)),sI=typeof queueMicrotask<"u"?queueMicrotask.bind(si):typeof process<"u"&&process.nextTick||r4,aI=e=>e!=null&&bn(e[ff]),ge={isArray:_o,isArrayBuffer:XE,isBuffer:NR,isFormData:TR,isArrayBufferView:jR,isString:SR,isNumber:JE,isBoolean:kR,isObject:pf,isPlainObject:fd,isReadableStream:RR,isRequest:IR,isResponse:MR,isHeaders:OR,isUndefined:Yl,isDate:CR,isFile:_R,isBlob:ER,isRegExp:KR,isFunction:bn,isStream:AR,isURLSearchParams:PR,isTypedArray:UR,isFileList:DR,forEach:Sc,merge:yy,extend:$R,trim:LR,stripBOM:FR,inherits:BR,toFlatObject:zR,kindOf:mf,kindOfTest:xs,endsWith:GR,toArray:qR,forEachEntry:WR,matchAll:HR,isHTMLForm:VR,hasOwnProperty:UN,hasOwnProp:UN,reduceDescriptors:t4,freezeMethods:QR,toObjectSet:XR,toCamelCase:YR,noop:JR,toFiniteNumber:ZR,findKey:ZE,global:si,isContextDefined:e4,isSpecCompliantForm:eI,toJSONObject:tI,isAsyncFn:rI,isThenable:nI,setImmediate:r4,asap:sI,isIterable:aI};function kt(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}ge.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const n4=kt.prototype,s4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{s4[e]={value:e}});Object.defineProperties(kt,s4);Object.defineProperty(n4,"isAxiosError",{value:!0});kt.from=(e,t,r,s,a,i)=>{const l=Object.create(n4);return ge.toFlatObject(e,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),kt.call(l,e.message,t,r,s,a),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const iI=null;function vy(e){return ge.isPlainObject(e)||ge.isArray(e)}function a4(e){return ge.endsWith(e,"[]")?e.slice(0,-2):e}function WN(e,t,r){return e?e.concat(t).map(function(a,i){return a=a4(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function oI(e){return ge.isArray(e)&&!e.some(vy)}const lI=ge.toFlatObject(ge,{},null,function(t){return/^is[A-Z]/.test(t)});function gf(e,t,r){if(!ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ge.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!ge.isUndefined(w[v])});const s=r.metaTokens,a=r.visitor||f,i=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(t);if(!ge.isFunction(a))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(ge.isDate(b))return b.toISOString();if(!d&&ge.isBlob(b))throw new kt("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(b)||ge.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,v,w){let C=b;if(b&&!w&&typeof b=="object"){if(ge.endsWith(v,"{}"))v=s?v:v.slice(0,-2),b=JSON.stringify(b);else if(ge.isArray(b)&&oI(b)||(ge.isFileList(b)||ge.endsWith(v,"[]"))&&(C=ge.toArray(b)))return v=a4(v),C.forEach(function(_,k){!(ge.isUndefined(_)||_===null)&&t.append(l===!0?WN([v],k,i):l===null?v:v+"[]",m(_))}),!1}return vy(b)?!0:(t.append(WN(w,v,i),m(b)),!1)}const h=[],g=Object.assign(lI,{defaultVisitor:f,convertValue:m,isVisitable:vy});function x(b,v){if(!ge.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(b),ge.forEach(b,function(C,j){(!(ge.isUndefined(C)||C===null)&&a.call(t,C,ge.isString(j)?j.trim():j,v,g))===!0&&x(C,v?v.concat(j):[j])}),h.pop()}}if(!ge.isObject(e))throw new TypeError("data must be an object");return x(e),t}function HN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Nv(e,t){this._pairs=[],e&&gf(e,this,t)}const i4=Nv.prototype;i4.append=function(t,r){this._pairs.push([t,r])};i4.toString=function(t){const r=t?function(s){return t.call(this,s,HN)}:HN;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function cI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function o4(e,t,r){if(!t)return e;const s=r&&r.encode||cI;ge.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=ge.isURLSearchParams(t)?t.toString():new Nv(t,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class VN{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ge.forEach(this.handlers,function(s){s!==null&&t(s)})}}const l4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uI=typeof URLSearchParams<"u"?URLSearchParams:Nv,dI=typeof FormData<"u"?FormData:null,fI=typeof Blob<"u"?Blob:null,mI={isBrowser:!0,classes:{URLSearchParams:uI,FormData:dI,Blob:fI},protocols:["http","https","file","blob","url","data"]},jv=typeof window<"u"&&typeof document<"u",by=typeof navigator=="object"&&navigator||void 0,hI=jv&&(!by||["ReactNative","NativeScript","NS"].indexOf(by.product)<0),pI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gI=jv&&window.location.href||"http://localhost",xI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jv,hasStandardBrowserEnv:hI,hasStandardBrowserWebWorkerEnv:pI,navigator:by,origin:gI},Symbol.toStringTag,{value:"Module"})),Xr={...xI,...mI};function yI(e,t){return gf(e,new Xr.classes.URLSearchParams,Object.assign({visitor:function(r,s,a,i){return Xr.isNode&&ge.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function vI(e){return ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bI(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function c4(e){function t(r,s,a,i){let l=r[i++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=i>=r.length;return l=!l&&ge.isArray(a)?a.length:l,d?(ge.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!u):((!a[l]||!ge.isObject(a[l]))&&(a[l]=[]),t(r,s,a[l],i)&&ge.isArray(a[l])&&(a[l]=bI(a[l])),!u)}if(ge.isFormData(e)&&ge.isFunction(e.entries)){const r={};return ge.forEachEntry(e,(s,a)=>{t(vI(s),a,r,0)}),r}return null}function wI(e,t,r){if(ge.isString(e))try{return(t||JSON.parse)(e),ge.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const kc={transitional:l4,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=ge.isObject(t);if(i&&ge.isHTMLForm(t)&&(t=new FormData(t)),ge.isFormData(t))return a?JSON.stringify(c4(t)):t;if(ge.isArrayBuffer(t)||ge.isBuffer(t)||ge.isStream(t)||ge.isFile(t)||ge.isBlob(t)||ge.isReadableStream(t))return t;if(ge.isArrayBufferView(t))return t.buffer;if(ge.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return yI(t,this.formSerializer).toString();if((u=ge.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return gf(u?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),wI(t)):t}],transformResponse:[function(t){const r=this.transitional||kc.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(ge.isResponse(t)||ge.isReadableStream(t))return t;if(t&&ge.isString(t)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(u){if(l)throw u.name==="SyntaxError"?kt.from(u,kt.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xr.classes.FormData,Blob:Xr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],e=>{kc.headers[e]={}});const NI=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jI=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||t[r]&&NI[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},YN=Symbol("internals");function bl(e){return e&&String(e).trim().toLowerCase()}function md(e){return e===!1||e==null?e:ge.isArray(e)?e.map(md):String(e)}function SI(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const kI=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wh(e,t,r,s,a){if(ge.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!ge.isString(t)){if(ge.isString(s))return t.indexOf(s)!==-1;if(ge.isRegExp(s))return s.test(t)}}function CI(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function _I(e,t){const r=ge.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,l){return this[s].call(this,t,a,i,l)},configurable:!0})})}let wn=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(u,d,m){const f=bl(d);if(!f)throw new Error("header name must be a non-empty string");const h=ge.findKey(a,f);(!h||a[h]===void 0||m===!0||m===void 0&&a[h]!==!1)&&(a[h||d]=md(u))}const l=(u,d)=>ge.forEach(u,(m,f)=>i(m,f,d));if(ge.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(ge.isString(t)&&(t=t.trim())&&!kI(t))l(jI(t),r);else if(ge.isObject(t)&&ge.isIterable(t)){let u={},d,m;for(const f of t){if(!ge.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[m=f[0]]=(d=u[m])?ge.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(u,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=bl(t),t){const s=ge.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return SI(a);if(ge.isFunction(r))return r.call(this,a,s);if(ge.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=bl(t),t){const s=ge.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Wh(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(l){if(l=bl(l),l){const u=ge.findKey(s,l);u&&(!r||Wh(s,s[u],u,r))&&(delete s[u],a=!0)}}return ge.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||Wh(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return ge.forEach(this,(a,i)=>{const l=ge.findKey(s,i);if(l){r[l]=md(a),delete r[i];return}const u=t?CI(i):String(i).trim();u!==i&&delete r[i],r[u]=md(a),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ge.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&ge.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[YN]=this[YN]={accessors:{}}).accessors,a=this.prototype;function i(l){const u=bl(l);s[u]||(_I(a,l),s[u]=!0)}return ge.isArray(t)?t.forEach(i):i(t),this}};wn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(wn.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});ge.freezeMethods(wn);function Hh(e,t){const r=this||kc,s=t||r,a=wn.from(s.headers);let i=s.data;return ge.forEach(e,function(u){i=u.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function u4(e){return!!(e&&e.__CANCEL__)}function Eo(e,t,r){kt.call(this,e??"canceled",kt.ERR_CANCELED,t,r),this.name="CanceledError"}ge.inherits(Eo,kt,{__CANCEL__:!0});function d4(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new kt("Request failed with status code "+r.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function EI(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function DI(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(d){const m=Date.now(),f=s[i];l||(l=m),r[a]=d,s[a]=m;let h=i,g=0;for(;h!==a;)g+=r[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),m-l<t)return;const x=f&&m-f;return x?Math.round(g*1e3/x):void 0}}function AI(e,t){let r=0,s=1e3/t,a,i;const l=(m,f=Date.now())=>{r=f,a=null,i&&(clearTimeout(i),i=null),e.apply(null,m)};return[(...m)=>{const f=Date.now(),h=f-r;h>=s?l(m,f):(a=m,i||(i=setTimeout(()=>{i=null,l(a)},s-h)))},()=>a&&l(a)]}const Pd=(e,t,r=3)=>{let s=0;const a=DI(50,250);return AI(i=>{const l=i.loaded,u=i.lengthComputable?i.total:void 0,d=l-s,m=a(d),f=l<=u;s=l;const h={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:m||void 0,estimated:m&&u&&f?(u-l)/m:void 0,event:i,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(h)},r)},KN=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},QN=e=>(...t)=>ge.asap(()=>e(...t)),TI=Xr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Xr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Xr.origin),Xr.navigator&&/(msie|trident)/i.test(Xr.navigator.userAgent)):()=>!0,PI=Xr.hasStandardBrowserEnv?{write(e,t,r,s,a,i){const l=[e+"="+encodeURIComponent(t)];ge.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),ge.isString(s)&&l.push("path="+s),ge.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function RI(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function II(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function f4(e,t,r){let s=!RI(t);return e&&(s||r==!1)?II(e,t):t}const XN=e=>e instanceof wn?{...e}:e;function ui(e,t){t=t||{};const r={};function s(m,f,h,g){return ge.isPlainObject(m)&&ge.isPlainObject(f)?ge.merge.call({caseless:g},m,f):ge.isPlainObject(f)?ge.merge({},f):ge.isArray(f)?f.slice():f}function a(m,f,h,g){if(ge.isUndefined(f)){if(!ge.isUndefined(m))return s(void 0,m,h,g)}else return s(m,f,h,g)}function i(m,f){if(!ge.isUndefined(f))return s(void 0,f)}function l(m,f){if(ge.isUndefined(f)){if(!ge.isUndefined(m))return s(void 0,m)}else return s(void 0,f)}function u(m,f,h){if(h in t)return s(m,f);if(h in e)return s(void 0,m)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(m,f,h)=>a(XN(m),XN(f),h,!0)};return ge.forEach(Object.keys(Object.assign({},e,t)),function(f){const h=d[f]||a,g=h(e[f],t[f],f);ge.isUndefined(g)&&h!==u||(r[f]=g)}),r}const m4=e=>{const t=ui({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:u}=t;t.headers=l=wn.from(l),t.url=o4(f4(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(ge.isFormData(r)){if(Xr.hasStandardBrowserEnv||Xr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[m,...f]=d?d.split(";").map(h=>h.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...f].join("; "))}}if(Xr.hasStandardBrowserEnv&&(s&&ge.isFunction(s)&&(s=s(t)),s||s!==!1&&TI(t.url))){const m=a&&i&&PI.read(i);m&&l.set(a,m)}return t},MI=typeof XMLHttpRequest<"u",OI=MI&&function(e){return new Promise(function(r,s){const a=m4(e);let i=a.data;const l=wn.from(a.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:m}=a,f,h,g,x,b;function v(){x&&x(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function C(){if(!w)return;const _=wn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),D={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:_,config:e,request:w};d4(function(T){r(T),v()},function(T){s(T),v()},D),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(s(new kt("Request aborted",kt.ECONNABORTED,e,w)),w=null)},w.onerror=function(){s(new kt("Network Error",kt.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const D=a.transitional||l4;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),s(new kt(k,D.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,w)),w=null},i===void 0&&l.setContentType(null),"setRequestHeader"in w&&ge.forEach(l.toJSON(),function(k,D){w.setRequestHeader(D,k)}),ge.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),u&&u!=="json"&&(w.responseType=a.responseType),m&&([g,b]=Pd(m,!0),w.addEventListener("progress",g)),d&&w.upload&&([h,x]=Pd(d),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(f=_=>{w&&(s(!_||_.type?new Eo(null,e,w):_),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const j=EI(a.url);if(j&&Xr.protocols.indexOf(j)===-1){s(new kt("Unsupported protocol "+j+":",kt.ERR_BAD_REQUEST,e));return}w.send(i||null)})},LI=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(m){if(!a){a=!0,u();const f=m instanceof Error?m:this.reason;s.abort(f instanceof kt?f:new Eo(f instanceof Error?f.message:f))}};let l=t&&setTimeout(()=>{l=null,i(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const u=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:d}=s;return d.unsubscribe=()=>ge.asap(u),d}},$I=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},FI=async function*(e,t){for await(const r of BI(e))yield*$I(r,t)},BI=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},JN=(e,t,r,s)=>{const a=FI(e,t);let i=0,l,u=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:m,value:f}=await a.next();if(m){u(),d.close();return}let h=f.byteLength;if(r){let g=i+=h;r(g)}d.enqueue(new Uint8Array(f))}catch(m){throw u(m),m}},cancel(d){return u(d),a.return()}},{highWaterMark:2})},xf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",h4=xf&&typeof ReadableStream=="function",zI=xf&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),p4=(e,...t)=>{try{return!!e(...t)}catch{return!1}},GI=h4&&p4(()=>{let e=!1;const t=new Request(Xr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ZN=64*1024,wy=h4&&p4(()=>ge.isReadableStream(new Response("").body)),Rd={stream:wy&&(e=>e.body)};xf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Rd[t]&&(Rd[t]=ge.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new kt(`Response type '${t}' is not supported`,kt.ERR_NOT_SUPPORT,s)})})})(new Response);const qI=async e=>{if(e==null)return 0;if(ge.isBlob(e))return e.size;if(ge.isSpecCompliantForm(e))return(await new Request(Xr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(e)||ge.isArrayBuffer(e))return e.byteLength;if(ge.isURLSearchParams(e)&&(e=e+""),ge.isString(e))return(await zI(e)).byteLength},UI=async(e,t)=>{const r=ge.toFiniteNumber(e.getContentLength());return r??qI(t)},WI=xf&&(async e=>{let{url:t,method:r,data:s,signal:a,cancelToken:i,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:m,headers:f,withCredentials:h="same-origin",fetchOptions:g}=m4(e);m=m?(m+"").toLowerCase():"text";let x=LI([a,i&&i.toAbortSignal()],l),b;const v=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let w;try{if(d&&GI&&r!=="get"&&r!=="head"&&(w=await UI(f,s))!==0){let D=new Request(t,{method:"POST",body:s,duplex:"half"}),A;if(ge.isFormData(s)&&(A=D.headers.get("content-type"))&&f.setContentType(A),D.body){const[T,I]=KN(w,Pd(QN(d)));s=JN(D.body,ZN,T,I)}}ge.isString(h)||(h=h?"include":"omit");const C="credentials"in Request.prototype;b=new Request(t,{...g,signal:x,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",credentials:C?h:void 0});let j=await fetch(b);const _=wy&&(m==="stream"||m==="response");if(wy&&(u||_&&v)){const D={};["status","statusText","headers"].forEach(L=>{D[L]=j[L]});const A=ge.toFiniteNumber(j.headers.get("content-length")),[T,I]=u&&KN(A,Pd(QN(u),!0))||[];j=new Response(JN(j.body,ZN,T,()=>{I&&I(),v&&v()}),D)}m=m||"text";let k=await Rd[ge.findKey(Rd,m)||"text"](j,e);return!_&&v&&v(),await new Promise((D,A)=>{d4(D,A,{data:k,headers:wn.from(j.headers),status:j.status,statusText:j.statusText,config:e,request:b})})}catch(C){throw v&&v(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,e,b),{cause:C.cause||C}):kt.from(C,C&&C.code,e,b)}}),Ny={http:iI,xhr:OI,fetch:WI};ge.forEach(Ny,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ej=e=>`- ${e}`,HI=e=>ge.isFunction(e)||e===null||e===!1,g4={getAdapter:e=>{e=ge.isArray(e)?e:[e];const{length:t}=e;let r,s;const a={};for(let i=0;i<t;i++){r=e[i];let l;if(s=r,!HI(r)&&(s=Ny[(l=String(r)).toLowerCase()],s===void 0))throw new kt(`Unknown adapter '${l}'`);if(s)break;a[l||"#"+i]=s}if(!s){const i=Object.entries(a).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(ej).join(`
`):" "+ej(i[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Ny};function Vh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Eo(null,e)}function tj(e){return Vh(e),e.headers=wn.from(e.headers),e.data=Hh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),g4.getAdapter(e.adapter||kc.adapter)(e).then(function(s){return Vh(e),s.data=Hh.call(e,e.transformResponse,s),s.headers=wn.from(s.headers),s},function(s){return u4(s)||(Vh(e),s&&s.response&&(s.response.data=Hh.call(e,e.transformResponse,s.response),s.response.headers=wn.from(s.response.headers))),Promise.reject(s)})}const x4="1.9.0",yf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yf[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const rj={};yf.transitional=function(t,r,s){function a(i,l){return"[Axios v"+x4+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,u)=>{if(t===!1)throw new kt(a(l," has been removed"+(r?" in "+r:"")),kt.ERR_DEPRECATED);return r&&!rj[l]&&(rj[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,u):!0}};yf.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function VI(e,t,r){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],l=t[i];if(l){const u=e[i],d=u===void 0||l(u,i,e);if(d!==!0)throw new kt("option "+i+" must be "+d,kt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new kt("Unknown option "+i,kt.ERR_BAD_OPTION)}}const hd={assertOptions:VI,validators:yf},ks=hd.validators;let ai=class{constructor(t){this.defaults=t||{},this.interceptors={request:new VN,response:new VN}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ui(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&hd.assertOptions(s,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1),a!=null&&(ge.isFunction(a)?r.paramsSerializer={serialize:a}:hd.assertOptions(a,{encode:ks.function,serialize:ks.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),hd.assertOptions(r,{baseUrl:ks.spelling("baseURL"),withXsrfToken:ks.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&ge.merge(i.common,i[r.method]);i&&ge.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),r.headers=wn.concat(l,i);const u=[];let d=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(d=d&&v.synchronous,u.unshift(v.fulfilled,v.rejected))});const m=[];this.interceptors.response.forEach(function(v){m.push(v.fulfilled,v.rejected)});let f,h=0,g;if(!d){const b=[tj.bind(this),void 0];for(b.unshift.apply(b,u),b.push.apply(b,m),g=b.length,f=Promise.resolve(r);h<g;)f=f.then(b[h++],b[h++]);return f}g=u.length;let x=r;for(h=0;h<g;){const b=u[h++],v=u[h++];try{x=b(x)}catch(w){v.call(this,w);break}}try{f=tj.call(this,x)}catch(b){return Promise.reject(b)}for(h=0,g=m.length;h<g;)f=f.then(m[h++],m[h++]);return f}getUri(t){t=ui(this.defaults,t);const r=f4(t.baseURL,t.url,t.allowAbsoluteUrls);return o4(r,t.params,t.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(t){ai.prototype[t]=function(r,s){return this.request(ui(s||{},{method:t,url:r,data:(s||{}).data}))}});ge.forEach(["post","put","patch"],function(t){function r(s){return function(i,l,u){return this.request(ui(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}ai.prototype[t]=r(),ai.prototype[t+"Form"]=r(!0)});let YI=class y4{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(u=>{s.subscribe(u),i=u}).then(a);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,u){s.reason||(s.reason=new Eo(i,l,u),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new y4(function(a){t=a}),cancel:t}}};function KI(e){return function(r){return e.apply(null,r)}}function QI(e){return ge.isObject(e)&&e.isAxiosError===!0}const jy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jy).forEach(([e,t])=>{jy[t]=e});function v4(e){const t=new ai(e),r=KE(ai.prototype.request,t);return ge.extend(r,ai.prototype,t,{allOwnKeys:!0}),ge.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return v4(ui(e,a))},r}const we=v4(kc);we.Axios=ai;we.CanceledError=Eo;we.CancelToken=YI;we.isCancel=u4;we.VERSION=x4;we.toFormData=gf;we.AxiosError=kt;we.Cancel=we.CanceledError;we.all=function(t){return Promise.all(t)};we.spread=KI;we.isAxiosError=QI;we.mergeConfig=ui;we.AxiosHeaders=wn;we.formToJSON=e=>c4(ge.isHTMLForm(e)?new FormData(e):e);we.getAdapter=g4.getAdapter;we.HttpStatusCode=jy;we.default=we;const{Axios:KZ,AxiosError:QZ,CanceledError:XZ,isCancel:JZ,CancelToken:ZZ,VERSION:eee,all:tee,Cancel:ree,isAxiosError:nee,spread:see,toFormData:aee,AxiosHeaders:iee,HttpStatusCode:oee,formToJSON:lee,getAdapter:cee,mergeConfig:uee}=we,Re=we.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});Re.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Re.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const XI=async e=>Re.put("/users/me",e),JI=async e=>{const t=new FormData;return t.append("profilePicture",e),Re.post("/users/me/profile-picture",t,{headers:{"Content-Type":"multipart/form-data"}})},ZI=async()=>Re.get("/users/me/preferences"),e6=async e=>Re.put("/users/me/preferences",e),t6=async(e=1,t=20,r=150)=>Re.get(`/auth/login-activity?page=${e}&limit=${t}&days=${r}`),r6=async(e,t)=>{const r=localStorage.getItem("token");return(await Re.put(`/courses/${e}/overview-config`,t,{headers:{Authorization:`Bearer ${r}`}})).data},b4=N.createContext(void 0);function n6({children:e}){const[t,r]=N.useState(null),[s,a]=N.useState(localStorage.getItem("token")),[i,l]=N.useState(!0);N.useEffect(()=>{s?Re.get("/auth/me").then(f=>{if(f.data.success){const h=f.data.user;r({_id:h.id||h._id,firstName:h.firstName,lastName:h.lastName,email:h.email,role:h.role,bio:h.bio,profilePicture:h.profilePicture})}}).catch(()=>{localStorage.removeItem("token"),a(null)}).finally(()=>{l(!1)}):l(!1)},[s]);const u=async(f,h)=>{const g=await Re.post("/auth/login",{email:f,password:h}),{token:x,user:b}=g.data,v={_id:b.id||b._id,firstName:b.firstName,lastName:b.lastName,email:b.email,role:b.role,bio:b.bio,profilePicture:b.profilePicture};localStorage.setItem("token",x),localStorage.setItem("user",JSON.stringify(v)),a(x),r(v)},d=async(f,h,g,x,b)=>{var v;console.log("Signup request data:",{firstName:f,lastName:h,email:g,password:x,role:b});try{const w=await Re.post("/auth/register",{firstName:f,lastName:h,email:g,password:x,role:b});console.log("Signup response:",w.data);const{token:C,user:j}=w.data,_={_id:j.id||j._id,firstName:j.firstName,lastName:j.lastName,email:j.email,role:j.role,bio:j.bio,profilePicture:j.profilePicture};localStorage.setItem("token",C),localStorage.setItem("user",JSON.stringify(_)),a(C),r(_)}catch(w){throw console.error("Signup error:",((v=w.response)==null?void 0:v.data)||w),w}},m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),r(null)};return n.jsx(b4.Provider,{value:{user:t,setUser:r,token:s,loading:i,login:u,signup:d,logout:m},children:e})}function Tt(){const e=N.useContext(b4);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const w4=N.createContext(void 0),s6=({children:e})=>{const[t,r]=N.useState([]),[s,a]=N.useState(!1),[i,l]=N.useState(null),{token:u}=Tt(),d=async()=>{var v,w;try{a(!0),l(null);const C=await Re.get("/courses");C.data.success?r(C.data.data):l(C.data.message||"Failed to fetch courses")}catch(C){console.error("Error fetching courses:",C),l(((w=(v=C.response)==null?void 0:v.data)==null?void 0:w.message)||"Error fetching courses")}finally{a(!1)}},m=async v=>{var w,C;if(!v||v==="undefined"||v==="null")throw new Error("Invalid course ID");try{a(!0),l(null);const j=await Re.get(`/courses/${v}`);if(j.data.success)return j.data.data;throw new Error(j.data.message||"Failed to fetch course")}catch(j){throw console.error("Error fetching course:",j),l(((C=(w=j.response)==null?void 0:w.data)==null?void 0:C.message)||"Error fetching course"),j}finally{a(!1)}},f=async(v,w)=>{var C,j;try{a(!0),l(null);const _=await Re.post("/courses",{title:v,description:w});_.data.success?r([...t,_.data.data]):l(_.data.message||"Failed to create course")}catch(_){throw console.error("Error creating course:",_),l(((j=(C=_.response)==null?void 0:C.data)==null?void 0:j.message)||"Error creating course"),_}finally{a(!1)}},h=async(v,w,C)=>{var j,_;try{a(!0),l(null);const k=await Re.put(`/courses/${v}`,{title:w,description:C});k.data.success?r(t.map(D=>D._id===v?k.data.data:D)):l(k.data.message||"Failed to update course")}catch(k){throw console.error("Error updating course:",k),l(((_=(j=k.response)==null?void 0:j.data)==null?void 0:_.message)||"Error updating course"),k}finally{a(!1)}},g=async v=>{var w,C;try{a(!0),l(null);const j=await Re.delete(`/courses/${v}`);j.data.success?r(t.filter(_=>_._id!==v)):l(j.data.message||"Failed to delete course")}catch(j){throw console.error("Error deleting course:",j),l(((C=(w=j.response)==null?void 0:w.data)==null?void 0:C.message)||"Error deleting course"),j}finally{a(!1)}},x=async(v,w)=>{var C,j;try{a(!0),l(null);const _=await Re.post(`/courses/${v}/enroll`,{studentId:w});_.data.success?r(t.map(k=>k._id===v?_.data.data:k)):l(_.data.message||"Failed to enroll student")}catch(_){throw console.error("Error enrolling student:",_),l(((j=(C=_.response)==null?void 0:C.data)==null?void 0:j.message)||"Error enrolling student"),_}finally{a(!1)}},b=async(v,w)=>{try{(await Re.post(`/courses/${v}/unenroll`,{studentId:w})).data.success&&await m(v)}catch(C){throw console.error("Error unenrolling student:",C),C}};return N.useEffect(()=>{u&&d().catch(v=>{console.error("Error in CourseProvider useEffect:",v)})},[u]),n.jsx(w4.Provider,{value:{courses:t,loading:s,error:i,createCourse:f,updateCourse:h,deleteCourse:g,enrollStudent:x,unenrollStudent:b,getCourses:d,getCourse:m},children:e})},Do=()=>{const e=N.useContext(w4);if(e===void 0)throw new Error("useCourse must be used within a CourseProvider");return e},N4=N.createContext(void 0),wa=({children:e})=>{const[t,r]=N.useState([]),[s,a]=N.useState(!1),[i,l]=N.useState(null),{token:u}=Tt(),d=N.useCallback(async j=>{var _,k;if(j){a(!0),l(null);try{const D=await Re.get(`/modules/${j}`);D.data.success?r(D.data.data):l(D.data.message||"Failed to fetch modules")}catch(D){console.error("Error fetching modules:",D),l(((k=(_=D.response)==null?void 0:_.data)==null?void 0:k.message)||"Error fetching modules")}finally{a(!1)}}},[]),m=N.useRef(d);N.useEffect(()=>{m.current=d},[d]);const f=async(j,_)=>{var k,D;a(!0),l(null);try{const A=await Re.post("/modules",{title:_.title,course:j,description:_.description});A.data.success?await m.current(j):l(A.data.message||"Failed to create module")}catch(A){console.error("Error creating module:",A),l(((D=(k=A.response)==null?void 0:k.data)==null?void 0:D.message)||"Error creating module")}finally{a(!1)}},h=async(j,_,k)=>{var D,A;a(!0),l(null);try{await Re.put(`/modules/${j}`,_),await m.current(k)}catch(T){console.error("Error updating module:",T),l(((A=(D=T.response)==null?void 0:D.data)==null?void 0:A.message)||"Error updating module")}finally{a(!1)}},g=async j=>{var _,k;a(!0),l(null);try{const D={title:j.title,content:j.content};j.module&&(D.module=j.module),j.groupSet&&(D.groupSet=j.groupSet);const A=await Re.post("/pages",D);if(A.data.success&&j.module){const T=t.find(I=>I._id===j.module);T&&await m.current(T.course)}A.data.success||l(A.data.message||"Failed to create page")}catch(D){console.error("Error creating page:",D),l(((k=(_=D.response)==null?void 0:_.data)==null?void 0:k.message)||"Error creating page")}finally{a(!1)}},x=N.useCallback(async j=>{if(!j)return[];try{const _=await Re.get(`/pages/${j}`);return _.data.success?_.data.data:(console.error("Failed to fetch pages:",_.data.message),[])}catch(_){return console.error("Error fetching pages:",_),[]}},[]),b=N.useRef(x);N.useEffect(()=>{b.current=x},[x]);const v=async j=>{try{const _=await Re.get(`/pages/view/${j}`);if(_.data.success)return _.data.data;throw new Error(_.data.message||"Failed to fetch page")}catch(_){throw console.error("Error fetching page:",_),_}},w=async(j,_)=>{var k,D;a(!0),l(null);try{await Re.delete(`/modules/${j}`),await m.current(_)}catch(A){console.error("Error deleting module:",A),l(((D=(k=A.response)==null?void 0:k.data)==null?void 0:D.message)||"Error deleting module")}finally{a(!1)}},C=async j=>{var _,k;try{const D=await Re.patch(`/modules/${j}/publish`);D.data.success&&r(A=>A.map(T=>T._id===j?{...T,published:D.data.published}:T))}catch(D){console.error("Error toggling module publish status:",D),l(((k=(_=D.response)==null?void 0:_.data)==null?void 0:k.message)||"Error toggling module publish status")}};return n.jsx(N4.Provider,{value:{modules:t,loading:s,error:i,getModules:m.current,createModule:f,updateModule:h,createPage:g,getPages:b.current,getPage:v,deleteModule:w,toggleModulePublish:C},children:e})},ki=()=>{const e=N.useContext(N4);if(e===void 0)throw new Error("useModule must be used within a ModuleProvider");return e};function Ut({children:e,allowedRoles:t}){const{user:r,loading:s}=Tt(),a=Os();return s?n.jsx("div",{children:"Loading..."}):r?t&&!t.includes(r.role)?n.jsx(zN,{to:"/unauthorized",replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(zN,{to:"/login",state:{from:a},replace:!0})}function a6(){var h,g;const[e,t]=N.useState(""),[r,s]=N.useState(""),[a,i]=N.useState(""),{login:l}=Tt(),u=Lt(),m=((g=(h=Os().state)==null?void 0:h.from)==null?void 0:g.pathname)||"/",f=async x=>{x.preventDefault();try{await l(e,r),u(m,{replace:!0})}catch{i("Failed to login. Please check your credentials.")}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",n.jsx(Er,{to:"/signup",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"create a new account"})]})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[a&&n.jsx("div",{className:"rounded-md bg-red-50 p-4",children:n.jsx("div",{className:"text-sm text-red-700",children:a})}),n.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),n.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:x=>t(x.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),n.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:x=>s(x.target.value)})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})}function i6(){const[e,t]=N.useState(""),[r,s]=N.useState(""),[a,i]=N.useState(""),[l,u]=N.useState(""),[d,m]=N.useState("student"),[f,h]=N.useState([]),[g,x]=N.useState(""),{signup:b}=Tt(),v=Lt(),w=async j=>{var _,k,D,A;j.preventDefault(),h([]),x("");try{await b(e,r,a,l,d),v("/")}catch(T){(k=(_=T.response)==null?void 0:_.data)!=null&&k.errors?h(T.response.data.errors):x(((A=(D=T.response)==null?void 0:D.data)==null?void 0:A.message)||"Failed to create an account.")}},C=j=>{var _;return(_=f.find(k=>k.field===j))==null?void 0:_.message};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",n.jsx(Er,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"sign in to your account"})]})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[g&&n.jsx("div",{className:"rounded-md bg-red-50 p-4",children:n.jsx("div",{className:"text-sm text-red-700",children:g})}),n.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"first-name",className:"sr-only",children:"First Name"}),n.jsx("input",{id:"first-name",name:"firstName",type:"text",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("firstName")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"First Name",value:e,onChange:j=>t(j.target.value)}),C("firstName")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("firstName")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"last-name",className:"sr-only",children:"Last Name"}),n.jsx("input",{id:"last-name",name:"lastName",type:"text",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("lastName")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Last Name",value:r,onChange:j=>s(j.target.value)}),C("lastName")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("lastName")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),n.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("email")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Email address",value:a,onChange:j=>i(j.target.value)}),C("email")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("email")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),n.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("password")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Password",value:l,onChange:j=>u(j.target.value)}),C("password")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("password")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"sr-only",children:"Role"}),n.jsxs("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",value:d,onChange:j=>m(j.target.value),children:[n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign up"})})]})]})})}const j4=6048e5,o6=864e5,S4=6e4,k4=36e5,Ku=43200,nj=1440,sj=Symbol.for("constructDateFrom");function Jr(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&sj in e?e[sj](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ht(e,t){return Jr(t||e,e)}function l6(e,t,r){const s=Ht(e,r==null?void 0:r.in);return isNaN(t)?Jr(e,NaN):(s.setDate(s.getDate()+t),s)}function C4(e,t,r){const s=Ht(e,r==null?void 0:r.in);if(isNaN(t))return Jr(e,NaN);if(!t)return s;const a=s.getDate(),i=Jr(e,s.getTime());i.setMonth(s.getMonth()+t+1,0);const l=i.getDate();return a>=l?i:(s.setFullYear(i.getFullYear(),i.getMonth(),a),s)}let c6={};function Cc(){return c6}function di(e,t){var u,d,m,f;const r=Cc(),s=(t==null?void 0:t.weekStartsOn)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.weekStartsOn)??0,a=Ht(e,t==null?void 0:t.in),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Id(e,t){return di(e,{...t,weekStartsOn:1})}function _4(e,t){const r=Ht(e,t==null?void 0:t.in),s=r.getFullYear(),a=Jr(r,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const i=Id(a),l=Jr(r,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const u=Id(l);return r.getTime()>=i.getTime()?s+1:r.getTime()>=u.getTime()?s:s-1}function Md(e){const t=Ht(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ao(e,...t){const r=Jr.bind(null,e||t.find(s=>typeof s=="object"));return t.map(r)}function Od(e,t){const r=Ht(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function u6(e,t,r){const[s,a]=Ao(r==null?void 0:r.in,e,t),i=Od(s),l=Od(a),u=+i-Md(i),d=+l-Md(l);return Math.round((u-d)/o6)}function d6(e,t){const r=_4(e,t),s=Jr(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Id(s)}function pd(e,t){const r=+Ht(e)-+Ht(t);return r<0?-1:r>0?1:r}function Sv(e){return Jr(e,Date.now())}function kv(e,t,r){const[s,a]=Ao(r==null?void 0:r.in,e,t);return+Od(s)==+Od(a)}function f6(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function m6(e){return!(!f6(e)&&typeof e!="number"||isNaN(+Ht(e)))}function h6(e,t,r){const[s,a]=Ao(r==null?void 0:r.in,e,t),i=s.getFullYear()-a.getFullYear(),l=s.getMonth()-a.getMonth();return i*12+l}function p6(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function g6(e,t){return+Ht(e)-+Ht(t)}function x6(e,t){const r=Ht(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function Sy(e,t){const r=Ht(e,t==null?void 0:t.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function y6(e,t){const r=Ht(e,t==null?void 0:t.in);return+x6(r,t)==+Sy(r,t)}function v6(e,t,r){const[s,a,i]=Ao(r==null?void 0:r.in,e,e,t),l=pd(a,i),u=Math.abs(h6(a,i));if(u<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*u);let d=pd(a,i)===-l;y6(s)&&u===1&&pd(s,i)===1&&(d=!1);const m=l*(u-+d);return m===0?0:m}function b6(e,t,r){const s=g6(e,t)/1e3;return p6(r==null?void 0:r.roundingMethod)(s)}function aj(e,t){const r=Ht(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function w6(e,t){const r=Ht(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function N6(e,t){const r=t==null?void 0:t.weekStartsOn,s=Ht(e,t==null?void 0:t.in),a=s.getDay(),i=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const j6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S6=(e,t,r)=>{let s;const a=j6[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Yh(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const k6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},E6={date:Yh({formats:k6,defaultWidth:"full"}),time:Yh({formats:C6,defaultWidth:"full"}),dateTime:Yh({formats:_6,defaultWidth:"full"})},D6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},A6=(e,t,r,s)=>D6[e];function wl(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):l;a=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const T6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},P6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},R6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},M6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},O6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L6=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$6={ordinalNumber:L6,era:wl({values:T6,defaultWidth:"wide"}),quarter:wl({values:P6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:wl({values:R6,defaultWidth:"wide"}),day:wl({values:I6,defaultWidth:"wide"}),dayPeriod:wl({values:M6,defaultWidth:"wide",formattingValues:O6,defaultFormattingWidth:"wide"})};function Nl(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?B6(u,h=>h.test(l)):F6(u,h=>h.test(l));let m;m=e.valueCallback?e.valueCallback(d):d,m=r.valueCallback?r.valueCallback(m):m;const f=t.slice(l.length);return{value:m,rest:f}}}function F6(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function B6(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function z6(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const u=t.slice(a.length);return{value:l,rest:u}}}const G6=/^(\d+)(th|st|nd|rd)?/i,q6=/\d+/i,U6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},W6={any:[/^b/i,/^(a|c)/i]},H6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V6={any:[/1/i,/2/i,/3/i,/4/i]},Y6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Q6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},X6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},J6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Z6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eM={ordinalNumber:z6({matchPattern:G6,parsePattern:q6,valueCallback:e=>parseInt(e,10)}),era:Nl({matchPatterns:U6,defaultMatchWidth:"wide",parsePatterns:W6,defaultParseWidth:"any"}),quarter:Nl({matchPatterns:H6,defaultMatchWidth:"wide",parsePatterns:V6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nl({matchPatterns:Y6,defaultMatchWidth:"wide",parsePatterns:K6,defaultParseWidth:"any"}),day:Nl({matchPatterns:Q6,defaultMatchWidth:"wide",parsePatterns:X6,defaultParseWidth:"any"}),dayPeriod:Nl({matchPatterns:J6,defaultMatchWidth:"any",parsePatterns:Z6,defaultParseWidth:"any"})},Cv={code:"en-US",formatDistance:S6,formatLong:E6,formatRelative:A6,localize:$6,match:eM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tM(e,t){const r=Ht(e,t==null?void 0:t.in);return u6(r,w6(r))+1}function rM(e,t){const r=Ht(e,t==null?void 0:t.in),s=+Id(r)-+d6(r);return Math.round(s/j4)+1}function E4(e,t){var f,h,g,x;const r=Ht(e,t==null?void 0:t.in),s=r.getFullYear(),a=Cc(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=Jr((t==null?void 0:t.in)||e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const u=di(l,t),d=Jr((t==null?void 0:t.in)||e,0);d.setFullYear(s,0,i),d.setHours(0,0,0,0);const m=di(d,t);return+r>=+u?s+1:+r>=+m?s:s-1}function nM(e,t){var u,d,m,f;const r=Cc(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,a=E4(e,t),i=Jr((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),di(i,t)}function sM(e,t){const r=Ht(e,t==null?void 0:t.in),s=+di(r,t)-+nM(r,t);return Math.round(s/j4)+1}function Wt(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const ya={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Wt(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Wt(r+1,2)},d(e,t){return Wt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Wt(e.getHours()%12||12,t.length)},H(e,t){return Wt(e.getHours(),t.length)},m(e,t){return Wt(e.getMinutes(),t.length)},s(e,t){return Wt(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Wt(a,t.length)}},Zi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ij={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ya.y(e,t)},Y:function(e,t,r,s){const a=E4(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return Wt(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Wt(i,t.length)},R:function(e,t){const r=_4(e);return Wt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Wt(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Wt(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Wt(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return ya.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Wt(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=sM(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Wt(a,t.length)},I:function(e,t,r){const s=rM(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Wt(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ya.d(e,t)},D:function(e,t,r){const s=tM(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Wt(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Wt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Wt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Wt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Zi.noon:s===0?a=Zi.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Zi.evening:s>=12?a=Zi.afternoon:s>=4?a=Zi.morning:a=Zi.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ya.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ya.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Wt(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Wt(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ya.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ya.s(e,t)},S:function(e,t){return ya.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return lj(s);case"XXXX":case"XX":return ei(s);case"XXXXX":case"XXX":default:return ei(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return lj(s);case"xxxx":case"xx":return ei(s);case"xxxxx":case"xxx":default:return ei(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oj(s,":");case"OOOO":default:return"GMT"+ei(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oj(s,":");case"zzzz":default:return"GMT"+ei(s,":")}},t:function(e,t,r){const s=Math.trunc(+e/1e3);return Wt(s,t.length)},T:function(e,t,r){return Wt(+e,t.length)}};function oj(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Wt(i,2)}function lj(e,t){return e%60===0?(e>0?"-":"+")+Wt(Math.abs(e)/60,2):ei(e,t)}function ei(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Wt(Math.trunc(s/60),2),i=Wt(s%60,2);return r+a+t+i}const cj=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},D4=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},aM=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return cj(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",cj(s,t)).replace("{{time}}",D4(a,t))},iM={p:D4,P:aM},oM=/^D+$/,lM=/^Y+$/,cM=["D","DD","YY","YYYY"];function uM(e){return oM.test(e)}function dM(e){return lM.test(e)}function fM(e,t,r){const s=mM(e,t,r);if(console.warn(s),cM.includes(e))throw new RangeError(s)}function mM(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gM=/^'([^]*?)'?$/,xM=/''/g,yM=/[a-zA-Z]/;function zt(e,t,r){var f,h,g,x,b,v,w,C;const s=Cc(),a=(r==null?void 0:r.locale)??s.locale??Cv,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((v=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??s.weekStartsOn??((C=(w=s.locale)==null?void 0:w.options)==null?void 0:C.weekStartsOn)??0,u=Ht(e,r==null?void 0:r.in);if(!m6(u))throw new RangeError("Invalid time value");let d=t.match(pM).map(j=>{const _=j[0];if(_==="p"||_==="P"){const k=iM[_];return k(j,a.formatLong)}return j}).join("").match(hM).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const _=j[0];if(_==="'")return{isToken:!1,value:vM(j)};if(ij[_])return{isToken:!0,value:j};if(_.match(yM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(d=a.localize.preprocessor(u,d));const m={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return d.map(j=>{if(!j.isToken)return j.value;const _=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&dM(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&uM(_))&&fM(_,t,String(e));const k=ij[_[0]];return k(u,_,a.localize,m)}).join("")}function vM(e){const t=e.match(gM);return t?t[1].replace(xM,"'"):e}function bM(e,t,r){const s=Cc(),a=(r==null?void 0:r.locale)??s.locale??Cv,i=2520,l=pd(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[d,m]=Ao(r==null?void 0:r.in,...l>0?[t,e]:[e,t]),f=b6(m,d),h=(Md(m)-Md(d))/1e3,g=Math.round((f-h)/60);let x;if(g<2)return r!=null&&r.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,u):f<10?a.formatDistance("lessThanXSeconds",10,u):f<20?a.formatDistance("lessThanXSeconds",20,u):f<40?a.formatDistance("halfAMinute",0,u):f<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):g===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",g,u);if(g<45)return a.formatDistance("xMinutes",g,u);if(g<90)return a.formatDistance("aboutXHours",1,u);if(g<nj){const b=Math.round(g/60);return a.formatDistance("aboutXHours",b,u)}else{if(g<i)return a.formatDistance("xDays",1,u);if(g<Ku){const b=Math.round(g/nj);return a.formatDistance("xDays",b,u)}else if(g<Ku*2)return x=Math.round(g/Ku),a.formatDistance("aboutXMonths",x,u)}if(x=v6(m,d),x<12){const b=Math.round(g/Ku);return a.formatDistance("xMonths",b,u)}else{const b=x%12,v=Math.trunc(x/12);return b<3?a.formatDistance("aboutXYears",v,u):b<9?a.formatDistance("overXYears",v,u):a.formatDistance("almostXYears",v+1,u)}}function cn(e,t){return bM(e,Sv(e),t)}function wM(e,t){return Ht(e,t==null?void 0:t.in).getDay()}function uj(e,t){const r=Ht(e,t==null?void 0:t.in),s=r.getFullYear(),a=r.getMonth(),i=Jr(r,0);return i.setFullYear(s,a+1,0),i.setHours(0,0,0,0),i.getDate()}function NM(e,t,r){const[s,a]=Ao(r==null?void 0:r.in,e,t);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()}function jM(e,t){return kv(Jr(e,e),Sv(e))}function SM(e,t,r){const s=+Ht(e,r==null?void 0:r.in),[a,i]=[+Ht(t.start,r==null?void 0:r.in),+Ht(t.end,r==null?void 0:r.in)].sort((l,u)=>l-u);return s>=a&&s<=i}function kM(e,t,r){return l6(e,-1,r)}function CM(e,t){return kv(Jr(e,e),kM(Sv(e)))}function A4(e,t){const r=()=>Jr(t==null?void 0:t.in,NaN),a=AM(e);let i;if(a.date){const m=TM(a.date,2);i=PM(m.restDateString,m.year)}if(!i||isNaN(+i))return r();const l=+i;let u=0,d;if(a.time&&(u=RM(a.time),isNaN(u)))return r();if(a.timezone){if(d=IM(a.timezone),isNaN(d))return r()}else{const m=new Date(l+u),f=Ht(0,t==null?void 0:t.in);return f.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),f.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),f}return Ht(l+u+d,t==null?void 0:t.in)}const Qu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_M=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,EM=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,DM=/^([+-])(\d{2})(?::?(\d{2}))?$/;function AM(e){const t={},r=e.split(Qu.dateTimeDelimiter);let s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],Qu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Qu.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=Qu.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function TM(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function PM(e,t){if(t===null)return new Date(NaN);const r=e.match(_M);if(!r)return new Date(NaN);const s=!!r[4],a=jl(r[1]),i=jl(r[2])-1,l=jl(r[3]),u=jl(r[4]),d=jl(r[5])-1;if(s)return FM(t,u,d)?MM(t,u,d):new Date(NaN);{const m=new Date(0);return!LM(t,i,l)||!$M(t,a)?new Date(NaN):(m.setUTCFullYear(t,i,Math.max(a,l)),m)}}function jl(e){return e?parseInt(e):1}function RM(e){const t=e.match(EM);if(!t)return NaN;const r=Kh(t[1]),s=Kh(t[2]),a=Kh(t[3]);return BM(r,s,a)?r*k4+s*S4+a*1e3:NaN}function Kh(e){return e&&parseFloat(e.replace(",","."))||0}function IM(e){if(e==="Z")return 0;const t=e.match(DM);if(!t)return 0;const r=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return zM(s,a)?r*(s*k4+a*S4):NaN}function MM(e,t,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,i=(t-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+i),s}const OM=[31,null,31,30,31,30,31,31,30,31,30,31];function T4(e){return e%400===0||e%4===0&&e%100!==0}function LM(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(OM[t]||(T4(e)?29:28))}function $M(e,t){return t>=1&&t<=(T4(e)?366:365)}function FM(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function BM(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function zM(e,t){return t>=0&&t<=59}function GM(e,t,r){return C4(e,-1,r)}const P4=()=>{const{user:e}=Tt(),[t,r]=N.useState([]),[s,a]=N.useState(!1),[i,l]=N.useState(null),[u,d]=N.useState([]),[m,f]=N.useState(!1),[h,g]=N.useState(null),[x,b]=N.useState([]),[v,w]=N.useState(!1),[C,j]=N.useState(null),[_,k]=N.useState(0),D=(e==null?void 0:e.role)==="teacher"||(e==null?void 0:e.role)==="admin";N.useEffect(()=>{D?(async()=>{a(!0),l(null);try{const z=await Re.get("/assignments/todo/ungraded");r(z.data)}catch{l("Failed to load To-Do assignments")}finally{a(!1)}})():(async()=>{w(!0),j(null);try{const z=await Re.get("/assignments/todo/due");b(z.data)}catch{j("Failed to load assignments due this week")}finally{w(!1)}})()},[D,_]),N.useEffect(()=>{(async()=>{f(!0),g(null);try{const z=await Re.get("/todos");d(z.data)}catch{g("Failed to load personal to-dos")}finally{f(!1)}})()},[]),N.useEffect(()=>{const $=()=>{setTimeout(()=>{T()},500)};return window.addEventListener("assignmentSubmitted",$),()=>{window.removeEventListener("assignmentSubmitted",$)}},[]);const A=async $=>{await Re.delete(`/todos/${$}`),d(z=>z.filter(K=>K._id!==$))},T=()=>{k($=>$+1)},I=new Date,L=di(I,{weekStartsOn:1}),q=N6(I,{weekStartsOn:1}),O=u.filter($=>{const z=typeof $.dueDate=="string"?A4($.dueDate):new Date($.dueDate);return SM(z,{start:L,end:q})});return n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-gray-200",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"To Do"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"My To Do"}),m?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):h?n.jsx("div",{className:"text-red-500",children:h}):O.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No personal to-dos"}):n.jsx("ul",{className:"space-y-2",children:O.map($=>n.jsxs("li",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"font-medium text-gray-800",children:$.title}),$.dueDate&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:new Date($.dueDate).toLocaleDateString()})]}),n.jsx("button",{className:"text-xs bg-green-100 text-green-700 rounded px-2 py-1 hover:bg-green-200 transition-colors",onClick:()=>A($._id),children:"Done"})]},$._id))})]}),D?n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Ungraded Assignments"}),s?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):i?n.jsx("div",{className:"text-red-500",children:i}):t.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No ungraded assignments"}):n.jsx("ul",{className:"space-y-3",children:t.map($=>n.jsx("li",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsxs(Er,{to:`/assignments/${$.id}/grade`,className:"block",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"font-medium text-gray-800",title:$.title,children:$.title.length>30?$.title.slice(0,30)+"...":$.title}),n.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 rounded px-2 py-1",children:[$.ungradedCount," to grade"]})]}),n.jsx("div",{className:"text-sm text-gray-500",children:$.course.title})]})},$.id))})]}):n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Assignments Due This Week"}),v?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):C?n.jsx("div",{className:"text-red-500",children:C}):x.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No assignments due this week"}):n.jsx("ul",{className:"space-y-3",children:x.map($=>{var z,K;return n.jsx("li",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsxs(Er,{to:`/assignments/${$._id}/view`,className:"block",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"font-medium text-gray-800",title:$.title,children:$.title.length>30?$.title.slice(0,30)+"...":$.title}),n.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 rounded px-2 py-1",children:["Due ",new Date($.dueDate).toLocaleDateString()]})]}),n.jsx("div",{className:"text-sm text-gray-500",children:((K=(z=$.module)==null?void 0:z.course)==null?void 0:K.title)||""})]})},$._id)})})]})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),dj=e=>{const t=UM(e);return t.charAt(0).toUpperCase()+t.slice(1)},R4=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),WM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...u},d)=>N.createElement("svg",{ref:d,...HM,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:R4("lucide",a),...!i&&!WM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>N.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const r=N.forwardRef(({className:s,...a},i)=>N.createElement(VM,{ref:i,iconNode:t,className:R4(`lucide-${qM(dj(e))}`,`lucide-${e}`,s),...a}));return r.displayName=dj(e),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],io=Xe("activity",YM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],QM=Xe("archive",KM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],JM=Xe("arrow-down",XM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],eO=Xe("arrow-up",ZM);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Qh=Xe("award",tO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fj=Xe("bell",rO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],sO=Xe("book-open-check",nO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],kr=Xe("book-open",aO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],va=Xe("bookmark",iO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],I4=Xe("calendar",oO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ls=Xe("chart-column",lO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_v=Xe("chevron-down",cO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mj=Xe("chevron-left",uO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fO=Xe("chevron-right",dO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hO=Xe("chevron-up",mO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ev=Xe("circle-alert",pO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ja=Xe("circle-check-big",gO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oo=Xe("circle-x",xO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hj=Xe("circle",yO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Aa=Xe("clipboard-list",vO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],vf=Xe("clock",bO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Dv=Xe("database",wO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jO=Xe("download",NO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ky=Xe("ellipsis-vertical",SO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],CO=Xe("ellipsis",kO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],M4=Xe("external-link",_O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],O4=Xe("eye-off",EO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Av=Xe("eye",DO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ln=Xe("file-text",AO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],PO=Xe("file",TO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IO=Xe("funnel",RO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],OO=Xe("gauge",MO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],$O=Xe("house",LO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],BO=Xe("inbox",FO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GO=Xe("info",zO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],UO=Xe("key",qO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],L4=Xe("lightbulb",WO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Kl=Xe("lock-open",HO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mo=Xe("lock",VO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KO=Xe("log-out",YO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Ta=Xe("megaphone",QO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Dr=Xe("message-square",XO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Xu=Xe("palette",JO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],eL=Xe("paperclip",ZO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],$4=Xe("pen-line",tL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],To=Xe("pen-tool",rL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Xh=Xe("pencil",nL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],pj=Xe("pin",sL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ii=Xe("plus",aL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cy=Xe("refresh-cw",iL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Ql=Xe("reply",oL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],F4=Xe("save",lL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bf=Xe("search",cL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ld=Xe("send",uL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ds=Xe("settings",dL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lo=Xe("shield",fL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],gj=Xe("sparkles",mL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pL=Xe("square-check",hL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wf=Xe("square-pen",gL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Tv=Xe("thumbs-up",xL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],As=Xe("trash-2",yL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$d=Xe("triangle-alert",vL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_y=Xe("user-check",bL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ci=Xe("user-plus",wL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ju=Xe("user-x",NL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xl=Xe("user",jL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cr=Xe("users",SL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fd=Xe("x",kL),xj=[{name:"Olive Green",value:"#556B2F"},{name:"Sage Green",value:"#9CAF88"},{name:"Terra Cotta",value:"#E2725B"},{name:"Warm Brown",value:"#8B4513"},{name:"Moss Green",value:"#606C38"},{name:"Clay Brown",value:"#D2691E"},{name:"Forest Green",value:"#228B22"},{name:"Earth Red",value:"#CD5C5C"},{name:"Sand Beige",value:"#F4A460"},{name:"Deep Brown",value:"#654321"}],Jh=[{id:"announcements",name:"Announcements",icon:Ta,color:"text-gray-600"},{id:"modules",name:"Modules",icon:kr,color:"text-gray-600"},{id:"pages",name:"Pages",icon:PO,color:"text-gray-600"},{id:"discussions",name:"Discussions",icon:Dr,color:"text-gray-600"}];function CL(){const{courses:e,loading:t,error:r}=Do(),{user:s}=Tt(),a=Lt(),[i,l]=N.useState(()=>{const T=localStorage.getItem("courseColors");return T?JSON.parse(T):{}}),[u,d]=N.useState(null),[m,f]=N.useState(()=>{const T=localStorage.getItem("courseIcons");return T?JSON.parse(T):{}}),[h,g]=N.useState(null),x=N.useRef(null),b=(s==null?void 0:s.role)==="teacher"||(s==null?void 0:s.role)==="admin";if(N.useEffect(()=>{const T=I=>{x.current&&!x.current.contains(I.target)&&(d(null),g(null))};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),t)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(r)return n.jsx("div",{className:"text-red-500 text-center p-4",children:r});const v=e.filter(T=>T.published),w=e.filter(T=>!T.published),C=T=>{a(`/courses/${T}`)},j=(T,I)=>{const L={...i,[T]:I};l(L),localStorage.setItem("courseColors",JSON.stringify(L)),d(null)},_=T=>i[T]||"#556B2F",k=T=>m[T]||["announcements","pages","discussions"],D=(T,I)=>{const L=k(T),q=L.includes(I);let O;if(q)O=L.filter(z=>z!==I);else if(L.length<3)O=[...L,I];else return;const $={...m,[T]:O};f($),localStorage.setItem("courseIcons",JSON.stringify($))},A=(T,I)=>{const L=Jh.find(O=>O.id===T);if(!L)return null;const q=L.icon;return n.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",onClick:O=>{switch(O.stopPropagation(),T){case"announcements":a(`/courses/${I}/announcements`);break;case"modules":a(`/courses/${I}/modules`);break;case"pages":a(`/courses/${I}/pages`);break;case"discussions":a(`/courses/${I}/discussions`);break;default:a(`/courses/${I}`)}},children:n.jsx(q,{className:"h-5 w-5 text-gray-600"})},T)};return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"container mx-auto px-6 py-8 flex flex-col lg:flex-row gap-8",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Dashboard"}),n.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",s==null?void 0:s.firstName,"!"]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b?n.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Published Courses (",v.length,")"]}):n.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"My Courses"}),b&&n.jsx(Er,{to:"/courses/create",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Create Course"})]}),v.length===0?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No published courses"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ml-4 border border-gray-100",onClick:()=>C(T._id),children:[n.jsx("div",{className:"h-48 relative",style:{backgroundColor:_(T._id)},children:n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:I=>{I.stopPropagation(),d(u===T._id?null:T._id),g(null)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:n.jsx(ky,{className:"h-5 w-5 text-white"})}),u===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Xu,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Choose Color"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:xj.map(I=>n.jsx("button",{onClick:L=>{L.stopPropagation(),j(T._id,I.value)},className:"w-8 h-8 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-colors",style:{backgroundColor:I.value},title:I.name},I.value))}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:I=>{I.stopPropagation(),d(null),g(h===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Ds,{className:"h-4 w-4"}),n.jsx("span",{children:"Display Icons"})]})]}),h===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ds,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Display Icons (Max 3)"})]}),n.jsx("div",{className:"space-y-2",children:Jh.map(I=>{const L=I.icon,q=k(T._id).includes(I.id),O=!q&&k(T._id).length>=3;return n.jsxs("button",{onClick:$=>{$.stopPropagation(),O||D(T._id,I.id)},className:`flex items-center gap-2 w-full text-left p-2 rounded transition-colors ${q?"bg-blue-50 text-blue-700":O?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-50"}`,disabled:O,children:[n.jsx(L,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:I.name}),q&&n.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Selected"})]},I.id)})}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:I=>{I.stopPropagation(),g(null),d(u===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Xu,{className:"h-4 w-4"}),n.jsx("span",{children:"Choose Color"})]})]})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("h2",{className:"font-bold text-lg mb-1",style:{color:_(T._id)},children:T.title}),n.jsxs("p",{className:"text-gray-500 text-sm",children:["Instructor: ",T.instructor.firstName," ",T.instructor.lastName]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[k(T._id).map(I=>A(I,T._id)),Array.from({length:3-k(T._id).length}).map((I,L)=>n.jsx("div",{className:"w-9 h-9"},L))]})]})]},T._id))})]}),b&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-700 mb-6",children:["Unpublished Courses (",w.length,")"]}),w.length===0?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No unpublished courses"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(T=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100",onClick:()=>C(T._id),children:[n.jsx("div",{className:"h-48 relative bg-gradient-to-br",style:{background:`linear-gradient(135deg, ${_(T._id)} 0%, ${_(T._id)}dd 100%)`},children:n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:I=>{I.stopPropagation(),d(u===T._id?null:T._id),g(null)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:n.jsx(ky,{className:"h-5 w-5 text-white"})}),u===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Xu,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Choose Color"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:xj.map(I=>n.jsx("button",{onClick:L=>{L.stopPropagation(),j(T._id,I.value)},className:"w-8 h-8 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-colors",style:{backgroundColor:I.value},title:I.name},I.value))}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:I=>{I.stopPropagation(),d(null),g(h===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Ds,{className:"h-4 w-4"}),n.jsx("span",{children:"Display Icons"})]})]}),h===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ds,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Display Icons (Max 3)"})]}),n.jsx("div",{className:"space-y-2",children:Jh.map(I=>{const L=I.icon,q=k(T._id).includes(I.id),O=!q&&k(T._id).length>=3;return n.jsxs("button",{onClick:$=>{$.stopPropagation(),O||D(T._id,I.id)},className:`flex items-center gap-2 w-full text-left p-2 rounded transition-colors ${q?"bg-blue-50 text-blue-700":O?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-50"}`,disabled:O,children:[n.jsx(L,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:I.name}),q&&n.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Selected"})]},I.id)})}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:I=>{I.stopPropagation(),g(null),d(u===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Xu,{className:"h-4 w-4"}),n.jsx("span",{children:"Choose Color"})]})]})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h2",{className:"font-bold text-xl mb-2",style:{color:_(T._id)},children:T.title}),n.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),"Instructor: ",T.instructor.firstName," ",T.instructor.lastName]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[k(T._id).map(I=>A(I,T._id)),Array.from({length:3-k(T._id).length}).map((I,L)=>n.jsx("div",{className:"w-9 h-9"},L))]})]})]},T._id))})]})]}),n.jsx("aside",{className:"w-full lg:w-96 flex-shrink-0",children:n.jsx(P4,{})})]})})}function _L(){const{user:e}=Tt(),[t,r]=N.useState({totalUsers:0,totalCourses:0,activeUsers:0,totalAssignments:0,systemHealth:"good",storageUsed:0,storageTotal:1e3}),[s,a]=N.useState([]),[i,l]=N.useState(!0);N.useEffect(()=>{setTimeout(()=>{r({totalUsers:1247,totalCourses:89,activeUsers:892,totalAssignments:156,systemHealth:"excellent",storageUsed:234,storageTotal:1e3}),a([{id:"1",type:"user_registration",description:"New student registered: John Doe",timestamp:"2 minutes ago",severity:"low"},{id:"2",type:"course_creation",description:"New course created: Advanced Mathematics",timestamp:"15 minutes ago",severity:"medium"},{id:"3",type:"system_alert",description:"High storage usage detected",timestamp:"1 hour ago",severity:"high"}]),l(!1)},1e3)},[]);const u=f=>{switch(f){case"excellent":return"text-green-500";case"good":return"text-blue-500";case"warning":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},d=f=>{switch(f){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=f=>{switch(f){case"user_registration":return n.jsx(_y,{className:"w-4 h-4"});case"course_creation":return n.jsx(kr,{className:"w-4 h-4"});case"assignment_submission":return n.jsx(Ln,{className:"w-4 h-4"});case"system_alert":return n.jsx($d,{className:"w-4 h-4"});default:return n.jsx(io,{className:"w-4 h-4"})}};return i?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System overview and administrative controls"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${u(t.systemHealth)}`}),n.jsxs("span",{className:"text-sm text-gray-600",children:["System Status: ",t.systemHealth]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(cr,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers.toLocaleString()})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(kr,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Courses"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalCourses})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(io,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeUsers})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Ln,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Assignments"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalAssignments})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Storage Usage"}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Used: ",t.storageUsed,"GB / ",t.storageTotal,"GB"]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(t.storageUsed/t.storageTotal*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.storageUsed/t.storageTotal*100}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(Er,{to:"/admin/users",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(cr,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage users, roles, and permissions"})]})]})}),n.jsx(Er,{to:"/admin/courses",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(kr,{className:"w-8 h-8 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Oversight"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Monitor and manage all courses"})]})]})}),n.jsx(Er,{to:"/admin/analytics",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Ls,{className:"w-8 h-8 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics"}),n.jsx("p",{className:"text-sm text-gray-600",children:"System analytics and reports"})]})]})}),n.jsx(Er,{to:"/admin/system",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Ds,{className:"w-8 h-8 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Settings"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Configure system parameters"})]})]})}),n.jsx(Er,{to:"/admin/security",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:n.jsx(lo,{className:"w-8 h-8 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Security settings and monitoring"})]})]})}),n.jsx(Er,{to:"/admin/backup",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:n.jsx(Dv,{className:"w-8 h-8 text-indigo-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup & Recovery"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Data backup and system recovery"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:s.map(f=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:`p-2 rounded-lg ${d(f.severity)}`,children:m(f.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.description}),n.jsx("p",{className:"text-xs text-gray-500",children:f.timestamp})]})]},f.id))})]})]})}function EL(){const[e,t]=N.useState([]),[r,s]=N.useState([]),[a,i]=N.useState(!0),[l,u]=N.useState(""),[d,m]=N.useState("all"),[f,h]=N.useState("all"),[g,x]=N.useState(null),[b,v]=N.useState(!1);N.useEffect(()=>{setTimeout(()=>{const D=[{_id:"1",firstName:"John",lastName:"Doe",email:"john.doe@example.com",role:"student",status:"active",lastLogin:"2024-01-15T10:30:00Z",createdAt:"2024-01-01T00:00:00Z"},{_id:"2",firstName:"Jane",lastName:"Smith",email:"jane.smith@example.com",role:"teacher",status:"active",lastLogin:"2024-01-15T09:15:00Z",createdAt:"2023-12-15T00:00:00Z"},{_id:"3",firstName:"Bob",lastName:"Johnson",email:"bob.johnson@example.com",role:"admin",status:"active",lastLogin:"2024-01-15T08:45:00Z",createdAt:"2023-11-01T00:00:00Z"},{_id:"4",firstName:"Alice",lastName:"Brown",email:"alice.brown@example.com",role:"student",status:"inactive",lastLogin:"2024-01-10T14:20:00Z",createdAt:"2024-01-05T00:00:00Z"}];t(D),s(D),i(!1)},1e3)},[]),N.useEffect(()=>{let D=e;l&&(D=D.filter(A=>A.firstName.toLowerCase().includes(l.toLowerCase())||A.lastName.toLowerCase().includes(l.toLowerCase())||A.email.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(D=D.filter(A=>A.role===d)),f!=="all"&&(D=D.filter(A=>A.status===f)),s(D)},[e,l,d,f]);const w=D=>{switch(D){case"admin":return"bg-red-100 text-red-800";case"teacher":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},C=D=>{switch(D){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=D=>{switch(D){case"active":return n.jsx(_y,{className:"w-4 h-4"});case"inactive":return n.jsx(Ju,{className:"w-4 h-4"});case"suspended":return n.jsx(Ju,{className:"w-4 h-4"});default:return n.jsx(Ju,{className:"w-4 h-4"})}},_=D=>new Date(D).toLocaleDateString(),k=(D,A)=>{switch(D){case"edit":x(A),v(!0);break;case"delete":confirm(`Are you sure you want to delete ${A.firstName} ${A.lastName}?`)&&t(e.filter(T=>T._id!==A._id));break;case"suspend":t(e.map(T=>T._id===A._id?{...T,status:"suspended"}:T));break;case"activate":t(e.map(T=>T._id===A._id?{...T,status:"active"}:T));break}};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage users, roles, and permissions"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," users"]})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:D=>u(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),n.jsxs("select",{value:d,onChange:D=>m(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{value:f,onChange:D=>h(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add User"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(D=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsxs("div",{className:"relative",children:[D.profilePicture?n.jsx("img",{className:"h-10 w-10 rounded-full object-cover border-2 border-gray-200",src:D.profilePicture.startsWith("http")?D.profilePicture:`http://localhost:5000${D.profilePicture}`,alt:`${D.firstName} ${D.lastName}`,onError:A=>{A.currentTarget.style.display="none";const T=A.currentTarget.nextElementSibling;T&&(T.style.display="flex")}}):null,n.jsx("div",{className:`h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center ${D.profilePicture?"hidden":""}`,style:{display:D.profilePicture?"none":"flex"},children:n.jsxs("span",{className:"text-blue-600 font-semibold",children:[D.firstName.charAt(0),D.lastName.charAt(0)]})})]})}),n.jsxs("div",{className:"ml-4",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[D.firstName," ",D.lastName]}),n.jsx("div",{className:"text-sm text-gray-500",children:D.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(D.role)}`,children:D.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[j(D.status),n.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(D.status)}`,children:D.status})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.lastLogin?_(D.lastLogin):"Never"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(D.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>k("edit",D),className:"text-blue-600 hover:text-blue-900",children:n.jsx(wf,{className:"w-4 h-4"})}),D.status==="active"?n.jsx("button",{onClick:()=>k("suspend",D),className:"text-yellow-600 hover:text-yellow-900",children:n.jsx(Ju,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>k("activate",D),className:"text-green-600 hover:text-green-900",children:n.jsx(_y,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>k("delete",D),className:"text-red-600 hover:text-red-900",children:n.jsx(As,{className:"w-4 h-4"})})]})})]},D._id))})]})})}),b&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),n.jsx("input",{type:"text",defaultValue:g.firstName,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),n.jsx("input",{type:"text",defaultValue:g.lastName,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",defaultValue:g.email,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),n.jsxs("select",{defaultValue:g.role,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{defaultValue:g.status,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})]})}function DL(){const[e,t]=N.useState({userGrowth:[],courseEngagement:[],systemUsage:[],topCourses:[],recentActivity:[]}),[r,s]=N.useState(!0),[a,i]=N.useState("30d"),[l,u]=N.useState("users");return N.useEffect(()=>{setTimeout(()=>{t({userGrowth:[{month:"Jan",users:120},{month:"Feb",users:150},{month:"Mar",users:180},{month:"Apr",users:220},{month:"May",users:280},{month:"Jun",users:320}],courseEngagement:[{course:"Mathematics 101",students:45,assignments:12},{course:"English Literature",students:38,assignments:8},{course:"Computer Science",students:52,assignments:15},{course:"History",students:29,assignments:6},{course:"Physics",students:41,assignments:10}],systemUsage:[{date:"2024-01-01",activeUsers:892,storageUsed:234},{date:"2024-01-02",activeUsers:945,storageUsed:238},{date:"2024-01-03",activeUsers:878,storageUsed:241},{date:"2024-01-04",activeUsers:1023,storageUsed:245},{date:"2024-01-05",activeUsers:967,storageUsed:248}],topCourses:[{name:"Mathematics 101",enrollment:45,completion:38},{name:"English Literature",enrollment:38,completion:32},{name:"Computer Science",enrollment:52,completion:45},{name:"History",enrollment:29,completion:25},{name:"Physics",enrollment:41,completion:35}],recentActivity:[{type:"user_registration",description:"New student registered",timestamp:"2 minutes ago"},{type:"course_creation",description:"New course created: Advanced Physics",timestamp:"15 minutes ago"},{type:"assignment_submission",description:"High submission rate detected",timestamp:"1 hour ago"},{type:"system_alert",description:"Storage usage alert",timestamp:"2 hours ago"}]}),s(!1)},1e3)},[]),r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System performance and user engagement insights"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("select",{value:a,onChange:d=>i(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"7d",children:"Last 7 days"}),n.jsx("option",{value:"30d",children:"Last 30 days"}),n.jsx("option",{value:"90d",children:"Last 90 days"}),n.jsx("option",{value:"1y",children:"Last year"})]}),n.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(jO,{className:"w-4 h-4"}),n.jsx("span",{children:"Export Report"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"1,247"}),n.jsx("p",{className:"text-sm text-green-600",children:"+12% from last month"})]}),n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(cr,{className:"w-6 h-6 text-blue-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"89"}),n.jsx("p",{className:"text-sm text-green-600",children:"+5% from last month"})]}),n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(kr,{className:"w-6 h-6 text-green-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Daily Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"892"}),n.jsx("p",{className:"text-sm text-green-600",children:"+8% from last week"})]}),n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(io,{className:"w-6 h-6 text-purple-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Storage Used"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"234 GB"}),n.jsx("p",{className:"text-sm text-yellow-600",children:"23% of total"})]}),n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Ls,{className:"w-6 h-6 text-orange-600"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Growth"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>u("users"),className:`p-2 rounded-lg ${l==="users"?"bg-blue-100 text-blue-600":"text-gray-400"}`,children:n.jsx(cr,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>u("courses"),className:`p-2 rounded-lg ${l==="courses"?"bg-green-100 text-green-600":"text-gray-400"}`,children:n.jsx(kr,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>u("activity"),className:`p-2 rounded-lg ${l==="activity"?"bg-purple-100 text-purple-600":"text-gray-400"}`,children:n.jsx(io,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:e.userGrowth.map((d,m)=>n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-full bg-blue-200 rounded-t",style:{height:`${d.users/320*200}px`}}),n.jsx("span",{className:"text-xs text-gray-500 mt-2",children:d.month})]},m))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Engagement"}),n.jsx("div",{className:"space-y-4",children:e.courseEngagement.map((d,m)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.course}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.students," students"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.assignments}),n.jsx("p",{className:"text-xs text-gray-500",children:"assignments"})]}),n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.students/52*100}%`}})})]})]},m))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Usage"}),n.jsx("div",{className:"space-y-4",children:e.systemUsage.map((d,m)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[d.activeUsers," active users"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.storageUsed," GB used"]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm text-gray-500",children:d.date})})]},m))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Courses"}),n.jsx("div",{className:"space-y-4",children:e.topCourses.map((d,m)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.enrollment," enrolled"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.completion}),n.jsx("p",{className:"text-xs text-gray-500",children:"completed"})]}),n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 ml-4",children:n.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${d.completion/d.enrollment*100}%`}})})]},m))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:e.recentActivity.map((d,m)=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(io,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.description}),n.jsx("p",{className:"text-xs text-gray-500",children:d.timestamp})]})]},m))})]})]})}function AL(){const[e,t]=N.useState({general:{siteName:"UIS Learning Management System",siteDescription:"A comprehensive learning management system",maintenanceMode:!1,maxFileSize:10,allowedFileTypes:["pdf","doc","docx","jpg","png","mp4"]},security:{passwordMinLength:8,requireStrongPassword:!0,sessionTimeout:30,maxLoginAttempts:5,enableTwoFactor:!1},email:{smtpHost:"smtp.gmail.com",smtpPort:587,smtpUser:"admin@example.com",smtpPassword:"",fromEmail:"noreply@example.com",fromName:"UIS LMS"},storage:{maxStoragePerUser:100,compressionEnabled:!0,backupFrequency:"daily",retentionDays:30}}),[r,s]=N.useState(!1),[a,i]=N.useState(!1),[l,u]=N.useState("general"),[d,m]=N.useState(!1),f=(b,v,w)=>{t(C=>({...C,[b]:{...C[b],[v]:w}}))},h=async()=>{i(!0),await new Promise(b=>setTimeout(b,1e3)),i(!1)},g=async()=>{s(!0),await new Promise(b=>setTimeout(b,2e3)),s(!1)},x=[{id:"general",label:"General",icon:Ds},{id:"security",label:"Security",icon:lo},{id:"email",label:"Email",icon:fj},{id:"storage",label:"Storage",icon:Dv}];return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{onClick:h,disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a?n.jsx(Cy,{className:"w-4 h-4 animate-spin"}):n.jsx(F4,{className:"w-4 h-4"}),n.jsx("span",{children:a?"Saving...":"Save Changes"})]})})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:x.map(b=>{const v=b.icon;return n.jsxs("button",{onClick:()=>u(b.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${l===b.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(v,{className:"w-4 h-4"}),n.jsx("span",{children:b.label})]},b.id)})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l==="general"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),n.jsx("input",{type:"text",value:e.general.siteName,onChange:b=>f("general","siteName",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),n.jsx("input",{type:"text",value:e.general.siteDescription,onChange:b=>f("general","siteDescription",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum File Size (MB)"}),n.jsx("input",{type:"number",value:e.general.maxFileSize,onChange:b=>f("general","maxFileSize",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types"}),n.jsx("input",{type:"text",value:e.general.allowedFileTypes.join(", "),onChange:b=>f("general","allowedFileTypes",b.target.value.split(", ")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"pdf, doc, docx, jpg, png"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:e.general.maintenanceMode,onChange:b=>f("general","maintenanceMode",b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"maintenanceMode",className:"text-sm font-medium text-gray-700",children:"Enable Maintenance Mode"})]})]}),l==="security"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Password Length"}),n.jsx("input",{type:"number",value:e.security.passwordMinLength,onChange:b=>f("security","passwordMinLength",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),n.jsx("input",{type:"number",value:e.security.sessionTimeout,onChange:b=>f("security","sessionTimeout",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Login Attempts"}),n.jsx("input",{type:"number",value:e.security.maxLoginAttempts,onChange:b=>f("security","maxLoginAttempts",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"requireStrongPassword",checked:e.security.requireStrongPassword,onChange:b=>f("security","requireStrongPassword",b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"requireStrongPassword",className:"text-sm font-medium text-gray-700",children:"Require Strong Passwords"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"enableTwoFactor",checked:e.security.enableTwoFactor,onChange:b=>f("security","enableTwoFactor",b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"enableTwoFactor",className:"text-sm font-medium text-gray-700",children:"Enable Two-Factor Authentication"})]})]})]}),l==="email"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),n.jsx("input",{type:"text",value:e.email.smtpHost,onChange:b=>f("email","smtpHost",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),n.jsx("input",{type:"number",value:e.email.smtpPort,onChange:b=>f("email","smtpPort",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),n.jsx("input",{type:"text",value:e.email.smtpUser,onChange:b=>f("email","smtpUser",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:d?"text":"password",value:e.email.smtpPassword,onChange:b=>f("email","smtpPassword",b.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d?n.jsx(O4,{className:"w-4 h-4 text-gray-400"}):n.jsx(Av,{className:"w-4 h-4 text-gray-400"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email"}),n.jsx("input",{type:"email",value:e.email.fromEmail,onChange:b=>f("email","fromEmail",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Name"}),n.jsx("input",{type:"text",value:e.email.fromName,onChange:b=>f("email","fromName",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{onClick:g,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[r?n.jsx(Cy,{className:"w-4 h-4 animate-spin"}):n.jsx(fj,{className:"w-4 h-4"}),n.jsx("span",{children:r?"Testing...":"Test Email Configuration"})]})})]}),l==="storage"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Storage Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Storage per User (GB)"}),n.jsx("input",{type:"number",value:e.storage.maxStoragePerUser,onChange:b=>f("storage","maxStoragePerUser",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),n.jsxs("select",{value:e.storage.backupFrequency,onChange:b=>f("storage","backupFrequency",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retention Days"}),n.jsx("input",{type:"number",value:e.storage.retentionDays,onChange:b=>f("storage","retentionDays",parseInt(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"compressionEnabled",checked:e.storage.compressionEnabled,onChange:b=>f("storage","compressionEnabled",b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"compressionEnabled",className:"text-sm font-medium text-gray-700",children:"Enable File Compression"})]})]})]})]})}function TL(){const[e,t]=N.useState([]),[r,s]=N.useState([]),[a,i]=N.useState(!0),[l,u]=N.useState(""),[d,m]=N.useState("all"),[f,h]=N.useState("all"),[g,x]=N.useState(null),[b,v]=N.useState(!1);N.useEffect(()=>{setTimeout(()=>{const k=[{_id:"1",title:"Mathematics 101",description:"Introduction to basic mathematics concepts",instructor:"Dr. John Smith",published:!0,enrollmentCount:45,assignmentCount:12,createdAt:"2024-01-01T00:00:00Z",lastUpdated:"2024-01-15T10:30:00Z",status:"active"},{_id:"2",title:"English Literature",description:"Study of classic and modern literature",instructor:"Prof. Jane Doe",published:!0,enrollmentCount:38,assignmentCount:8,createdAt:"2024-01-05T00:00:00Z",lastUpdated:"2024-01-14T15:20:00Z",status:"active"},{_id:"3",title:"Computer Science Fundamentals",description:"Introduction to programming and algorithms",instructor:"Dr. Bob Johnson",published:!1,enrollmentCount:0,assignmentCount:15,createdAt:"2024-01-10T00:00:00Z",lastUpdated:"2024-01-16T09:15:00Z",status:"draft"},{_id:"4",title:"History of Art",description:"Survey of art history from ancient to modern times",instructor:"Prof. Alice Brown",published:!0,enrollmentCount:29,assignmentCount:6,createdAt:"2023-12-15T00:00:00Z",lastUpdated:"2024-01-13T14:45:00Z",status:"active"}];t(k),s(k),i(!1)},1e3)},[]),N.useEffect(()=>{let k=e;if(l&&(k=k.filter(D=>D.title.toLowerCase().includes(l.toLowerCase())||D.description.toLowerCase().includes(l.toLowerCase())||D.instructor.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(k=k.filter(D=>D.status===d)),f!=="all"){const D=f==="published";k=k.filter(A=>A.published===D)}s(k)},[e,l,d,f]);const w=k=>{switch(k){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=k=>k?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800",j=k=>new Date(k).toLocaleDateString(),_=(k,D)=>{switch(k){case"edit":x(D),v(!0);break;case"delete":confirm(`Are you sure you want to delete ${D.title}?`)&&t(e.filter(A=>A._id!==D._id));break;case"publish":t(e.map(A=>A._id===D._id?{...A,published:!0,status:"active"}:A));break;case"unpublish":t(e.map(A=>A._id===D._id?{...A,published:!1}:A));break;case"archive":t(e.map(A=>A._id===D._id?{...A,status:"archived"}:A));break}};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Course Oversight"}),n.jsx("p",{className:"text-gray-600",children:"Monitor and manage all courses in the system"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(kr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," courses"]})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search courses...",value:l,onChange:k=>u(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{value:d,onChange:k=>m(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"archived",children:"Archived"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Published"}),n.jsxs("select",{value:f,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"unpublished",children:"Unpublished"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Course"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignments"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title}),n.jsx("div",{className:"text-sm text-gray-500",children:k.description})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.instructor}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(k.status)}`,children:k.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(k.published)}`,children:k.published?"Published":"Unpublished"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(cr,{className:"w-4 h-4 text-gray-400 mr-1"}),n.jsx("span",{className:"text-sm text-gray-900",children:k.enrollmentCount})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ln,{className:"w-4 h-4 text-gray-400 mr-1"}),n.jsx("span",{className:"text-sm text-gray-900",children:k.assignmentCount})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j(k.lastUpdated)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>_("edit",k),className:"text-blue-600 hover:text-blue-900",children:n.jsx(wf,{className:"w-4 h-4"})}),k.published?n.jsx("button",{onClick:()=>_("unpublish",k),className:"text-yellow-600 hover:text-yellow-900",children:n.jsx(O4,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>_("publish",k),className:"text-green-600 hover:text-green-900",children:n.jsx(Av,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_("archive",k),className:"text-orange-600 hover:text-orange-900",children:n.jsx($d,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_("delete",k),className:"text-red-600 hover:text-red-900",children:n.jsx(As,{className:"w-4 h-4"})})]})})]},k._id))})]})})}),b&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Course"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:g.title,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{defaultValue:g.description,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructor"}),n.jsx("input",{type:"text",defaultValue:g.instructor,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{defaultValue:g.status,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"archived",children:"Archived"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})]})}function PL(){const[e,t]=N.useState([]),[r,s]=N.useState({totalLogins:0,failedLogins:0,suspiciousActivities:0,blockedIPs:0,securityScore:0}),[a,i]=N.useState(!0),[l,u]=N.useState(!1);N.useEffect(()=>{setTimeout(()=>{s({totalLogins:1247,failedLogins:23,suspiciousActivities:5,blockedIPs:3,securityScore:85}),t([{id:"1",type:"failed_login",description:"Failed login attempt from 192.168.1.100",timestamp:"2 minutes ago",severity:"medium",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"},{id:"2",type:"suspicious_activity",description:"Multiple rapid login attempts detected",timestamp:"15 minutes ago",severity:"high",ipAddress:"203.0.113.45",userAgent:"Mozilla/5.0 (Unknown)"},{id:"3",type:"system_alert",description:"Security scan completed - no threats found",timestamp:"1 hour ago",severity:"low"}]),i(!1)},1e3)},[]);const d=h=>{switch(h){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=h=>{switch(h){case"login_attempt":return n.jsx(cr,{className:"w-4 h-4"});case"failed_login":return n.jsx(oo,{className:"w-4 h-4"});case"suspicious_activity":return n.jsx($d,{className:"w-4 h-4"});case"system_alert":return n.jsx(lo,{className:"w-4 h-4"});default:return n.jsx(io,{className:"w-4 h-4"})}},f=h=>h>=80?"text-green-600":h>=60?"text-yellow-600":"text-red-600";return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Security Center"}),n.jsx("p",{className:"text-gray-600",children:"Monitor and manage system security"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(lo,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Security Score: ",n.jsxs("span",{className:f(r.securityScore),children:[r.securityScore,"%"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(cr,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Logins"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalLogins})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-red-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(oo,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed Logins"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.failedLogins})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx($d,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspicious Activities"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.suspiciousActivities})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(mo,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Blocked IPs"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.blockedIPs})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(lo,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Security Score"}),n.jsxs("p",{className:`text-2xl font-bold ${f(r.securityScore)}`,children:[r.securityScore,"%"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Require 2FA for all users"})]}),n.jsx("button",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700",children:"Enabled"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"IP Whitelist"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Restrict access to specific IPs"})]}),n.jsx("button",{className:"bg-gray-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-gray-700",children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Session Timeout"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:"30 minutes"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Password Policy"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Minimum requirements"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:"8+ chars, mixed case"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Security Events"}),n.jsx("div",{className:"space-y-3",children:e.map(h=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:`p-2 rounded-lg ${d(h.severity)}`,children:m(h.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.description}),n.jsx("p",{className:"text-xs text-gray-500",children:h.timestamp}),h.ipAddress&&n.jsxs("p",{className:"text-xs text-gray-400",children:["IP: ",h.ipAddress]})]})]},h.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(Cy,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Run Security Scan"})]}),n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(Dv,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Backup Security Logs"})]}),n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(UO,{className:"w-5 h-5 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Generate Security Report"})]})]})]})]})}const RL=()=>{const{courses:e,loading:t,error:r,deleteCourse:s}=Do(),{user:a}=Tt(),i=Lt();if(N.useEffect(()=>{if(!t&&e&&e.length>0){const m=(a==null?void 0:a.role)==="teacher"||(a==null?void 0:a.role)==="admin"?e:e.filter(f=>f.published);m.length>0&&i(`/courses/${m[0]._id}`)}},[e,t,a,i]),t)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(r)return n.jsx("div",{className:"text-red-500 text-center p-4",children:r});const l=(a==null?void 0:a.role)==="teacher"||(a==null?void 0:a.role)==="admin";return(l?e:e.filter(d=>d.published)).length===0?n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Courses"})}),n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-xl text-gray-600 mb-4",children:l?"No courses available":"No published courses available"}),l&&n.jsx(Er,{to:"/courses/create",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-md transition-colors",children:"Create Your First Course"})]})]}):n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Courses"})}),n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Redirecting to your course..."})]})]})};function IL(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const ML=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OL=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,LL={};function yj(e,t){return(LL.jsx?OL:ML).test(e)}const $L=/[ \t\n\f\r]/g;function FL(e){return typeof e=="object"?e.type==="text"?vj(e.value):!1:vj(e)}function vj(e){return e.replace($L,"")===""}class _c{constructor(t,r,s){this.normal=r,this.property=t,s&&(this.space=s)}}_c.prototype.normal={};_c.prototype.property={};_c.prototype.space=void 0;function B4(e,t){const r={},s={};for(const a of e)Object.assign(r,a.property),Object.assign(s,a.normal);return new _c(r,s,t)}function Ey(e){return e.toLowerCase()}class Cn{constructor(t,r){this.attribute=r,this.property=t}}Cn.prototype.attribute="";Cn.prototype.booleanish=!1;Cn.prototype.boolean=!1;Cn.prototype.commaOrSpaceSeparated=!1;Cn.prototype.commaSeparated=!1;Cn.prototype.defined=!1;Cn.prototype.mustUseProperty=!1;Cn.prototype.number=!1;Cn.prototype.overloadedBoolean=!1;Cn.prototype.property="";Cn.prototype.spaceSeparated=!1;Cn.prototype.space=void 0;let BL=0;const _t=_i(),Sr=_i(),Dy=_i(),Ie=_i(),tr=_i(),co=_i(),Pn=_i();function _i(){return 2**++BL}const Ay=Object.freeze(Object.defineProperty({__proto__:null,boolean:_t,booleanish:Sr,commaOrSpaceSeparated:Pn,commaSeparated:co,number:Ie,overloadedBoolean:Dy,spaceSeparated:tr},Symbol.toStringTag,{value:"Module"})),Zh=Object.keys(Ay);class Pv extends Cn{constructor(t,r,s,a){let i=-1;if(super(t,r),bj(this,"space",a),typeof s=="number")for(;++i<Zh.length;){const l=Zh[i];bj(this,Zh[i],(s&Ay[l])===Ay[l])}}}Pv.prototype.defined=!0;function bj(e,t,r){r&&(e[t]=r)}function Po(e){const t={},r={};for(const[s,a]of Object.entries(e.properties)){const i=new Pv(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),t[s]=i,r[Ey(s)]=s,r[Ey(i.attribute)]=s}return new _c(t,r,e.space)}const z4=Po({properties:{ariaActiveDescendant:null,ariaAtomic:Sr,ariaAutoComplete:null,ariaBusy:Sr,ariaChecked:Sr,ariaColCount:Ie,ariaColIndex:Ie,ariaColSpan:Ie,ariaControls:tr,ariaCurrent:null,ariaDescribedBy:tr,ariaDetails:null,ariaDisabled:Sr,ariaDropEffect:tr,ariaErrorMessage:null,ariaExpanded:Sr,ariaFlowTo:tr,ariaGrabbed:Sr,ariaHasPopup:null,ariaHidden:Sr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:tr,ariaLevel:Ie,ariaLive:null,ariaModal:Sr,ariaMultiLine:Sr,ariaMultiSelectable:Sr,ariaOrientation:null,ariaOwns:tr,ariaPlaceholder:null,ariaPosInSet:Ie,ariaPressed:Sr,ariaReadOnly:Sr,ariaRelevant:null,ariaRequired:Sr,ariaRoleDescription:tr,ariaRowCount:Ie,ariaRowIndex:Ie,ariaRowSpan:Ie,ariaSelected:Sr,ariaSetSize:Ie,ariaSort:null,ariaValueMax:Ie,ariaValueMin:Ie,ariaValueNow:Ie,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function G4(e,t){return t in e?e[t]:t}function q4(e,t){return G4(e,t.toLowerCase())}const zL=Po({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:co,acceptCharset:tr,accessKey:tr,action:null,allow:null,allowFullScreen:_t,allowPaymentRequest:_t,allowUserMedia:_t,alt:null,as:null,async:_t,autoCapitalize:null,autoComplete:tr,autoFocus:_t,autoPlay:_t,blocking:tr,capture:null,charSet:null,checked:_t,cite:null,className:tr,cols:Ie,colSpan:null,content:null,contentEditable:Sr,controls:_t,controlsList:tr,coords:Ie|co,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_t,defer:_t,dir:null,dirName:null,disabled:_t,download:Dy,draggable:Sr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_t,formTarget:null,headers:tr,height:Ie,hidden:Dy,high:Ie,href:null,hrefLang:null,htmlFor:tr,httpEquiv:tr,id:null,imageSizes:null,imageSrcSet:null,inert:_t,inputMode:null,integrity:null,is:null,isMap:_t,itemId:null,itemProp:tr,itemRef:tr,itemScope:_t,itemType:tr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_t,low:Ie,manifest:null,max:null,maxLength:Ie,media:null,method:null,min:null,minLength:Ie,multiple:_t,muted:_t,name:null,nonce:null,noModule:_t,noValidate:_t,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_t,optimum:Ie,pattern:null,ping:tr,placeholder:null,playsInline:_t,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:_t,referrerPolicy:null,rel:tr,required:_t,reversed:_t,rows:Ie,rowSpan:Ie,sandbox:tr,scope:null,scoped:_t,seamless:_t,selected:_t,shadowRootClonable:_t,shadowRootDelegatesFocus:_t,shadowRootMode:null,shape:null,size:Ie,sizes:null,slot:null,span:Ie,spellCheck:Sr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ie,step:null,style:null,tabIndex:Ie,target:null,title:null,translate:null,type:null,typeMustMatch:_t,useMap:null,value:Sr,width:Ie,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:tr,axis:null,background:null,bgColor:null,border:Ie,borderColor:null,bottomMargin:Ie,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_t,declare:_t,event:null,face:null,frame:null,frameBorder:null,hSpace:Ie,leftMargin:Ie,link:null,longDesc:null,lowSrc:null,marginHeight:Ie,marginWidth:Ie,noResize:_t,noHref:_t,noShade:_t,noWrap:_t,object:null,profile:null,prompt:null,rev:null,rightMargin:Ie,rules:null,scheme:null,scrolling:Sr,standby:null,summary:null,text:null,topMargin:Ie,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ie,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_t,disableRemotePlayback:_t,prefix:null,property:null,results:Ie,security:null,unselectable:null},space:"html",transform:q4}),GL=Po({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Pn,accentHeight:Ie,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ie,amplitude:Ie,arabicForm:null,ascent:Ie,attributeName:null,attributeType:null,azimuth:Ie,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ie,by:null,calcMode:null,capHeight:Ie,className:tr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ie,diffuseConstant:Ie,direction:null,display:null,dur:null,divisor:Ie,dominantBaseline:null,download:_t,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ie,enableBackground:null,end:null,event:null,exponent:Ie,externalResourcesRequired:null,fill:null,fillOpacity:Ie,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:co,g2:co,glyphName:co,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ie,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ie,horizOriginX:Ie,horizOriginY:Ie,id:null,ideographic:Ie,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ie,k:Ie,k1:Ie,k2:Ie,k3:Ie,k4:Ie,kernelMatrix:Pn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ie,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ie,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ie,overlineThickness:Ie,paintOrder:null,panose1:null,path:null,pathLength:Ie,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:tr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ie,pointsAtY:Ie,pointsAtZ:Ie,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pn,rev:Pn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pn,requiredFeatures:Pn,requiredFonts:Pn,requiredFormats:Pn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ie,specularExponent:Ie,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ie,strikethroughThickness:Ie,string:null,stroke:null,strokeDashArray:Pn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ie,strokeOpacity:Ie,strokeWidth:null,style:null,surfaceScale:Ie,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pn,tabIndex:Ie,tableValues:null,target:null,targetX:Ie,targetY:Ie,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ie,underlineThickness:Ie,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ie,values:null,vAlphabetic:Ie,vMathematical:Ie,vectorEffect:null,vHanging:Ie,vIdeographic:Ie,version:null,vertAdvY:Ie,vertOriginX:Ie,vertOriginY:Ie,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ie,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:G4}),U4=Po({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),W4=Po({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:q4}),H4=Po({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),qL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},UL=/[A-Z]/g,wj=/-[a-z]/g,WL=/^data[-\w.:]+$/i;function HL(e,t){const r=Ey(t);let s=t,a=Cn;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&WL.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(wj,YL);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!wj.test(i)){let l=i.replace(UL,VL);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=Pv}return new a(s,t)}function VL(e){return"-"+e.toLowerCase()}function YL(e){return e.charAt(1).toUpperCase()}const KL=B4([z4,zL,U4,W4,H4],"html"),Rv=B4([z4,GL,U4,W4,H4],"svg");function QL(e){return e.join(" ").trim()}var eo={},ep,Nj;function XL(){if(Nj)return ep;Nj=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,m="/",f="*",h="",g="comment",x="declaration";ep=function(v,w){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];w=w||{};var C=1,j=1;function _(z){var K=z.match(t);K&&(C+=K.length);var te=z.lastIndexOf(d);j=~te?z.length-te:j+z.length}function k(){var z={line:C,column:j};return function(K){return K.position=new D(z),I(),K}}function D(z){this.start=z,this.end={line:C,column:j},this.source=w.source}D.prototype.content=v;function A(z){var K=new Error(w.source+":"+C+":"+j+": "+z);if(K.reason=z,K.filename=w.source,K.line=C,K.column=j,K.source=v,!w.silent)throw K}function T(z){var K=z.exec(v);if(K){var te=K[0];return _(te),v=v.slice(te.length),K}}function I(){T(r)}function L(z){var K;for(z=z||[];K=q();)K!==!1&&z.push(K);return z}function q(){var z=k();if(!(m!=v.charAt(0)||f!=v.charAt(1))){for(var K=2;h!=v.charAt(K)&&(f!=v.charAt(K)||m!=v.charAt(K+1));)++K;if(K+=2,h===v.charAt(K-1))return A("End of comment missing");var te=v.slice(2,K-2);return j+=2,_(te),v=v.slice(K),j+=2,z({type:g,comment:te})}}function O(){var z=k(),K=T(s);if(K){if(q(),!T(a))return A("property missing ':'");var te=T(i),se=z({type:x,property:b(K[0].replace(e,h)),value:te?b(te[0].replace(e,h)):h});return T(l),se}}function $(){var z=[];L(z);for(var K;K=O();)K!==!1&&(z.push(K),L(z));return z}return I(),$()};function b(v){return v?v.replace(u,h):h}return ep}var jj;function JL(){if(jj)return eo;jj=1;var e=eo&&eo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(eo,"__esModule",{value:!0}),eo.default=r;var t=e(XL());function r(s,a){var i=null;if(!s||typeof s!="string")return i;var l=(0,t.default)(s),u=typeof a=="function";return l.forEach(function(d){if(d.type==="declaration"){var m=d.property,f=d.value;u?a(m,f,d):f&&(i=i||{},i[m]=f)}}),i}return eo}var Sl={},Sj;function ZL(){if(Sj)return Sl;Sj=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(m){return!m||r.test(m)||e.test(m)},l=function(m,f){return f.toUpperCase()},u=function(m,f){return"".concat(f,"-")},d=function(m,f){return f===void 0&&(f={}),i(m)?m:(m=m.toLowerCase(),f.reactCompat?m=m.replace(a,u):m=m.replace(s,u),m.replace(t,l))};return Sl.camelCase=d,Sl}var kl,kj;function e$(){if(kj)return kl;kj=1;var e=kl&&kl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(JL()),r=ZL();function s(a,i){var l={};return!a||typeof a!="string"||(0,t.default)(a,function(u,d){u&&d&&(l[(0,r.camelCase)(u,i)]=d)}),l}return s.default=s,kl=s,kl}var t$=e$();const r$=qr(t$),V4=Y4("end"),Iv=Y4("start");function Y4(e){return t;function t(r){const s=r&&r.position&&r.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function n$(e){const t=Iv(e),r=V4(e);if(t&&r)return{start:t,end:r}}function Fl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Cj(e.position):"start"in e||"end"in e?Cj(e):"line"in e||"column"in e?Ty(e):""}function Ty(e){return _j(e&&e.line)+":"+_j(e&&e.column)}function Cj(e){return Ty(e&&e.start)+"-"+Ty(e&&e.end)}function _j(e){return e&&typeof e=="number"?e:1}class Zr extends Error{constructor(t,r,s){super(),typeof r=="string"&&(s=r,r=void 0);let a="",i={},l=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?a=t:!i.cause&&t&&(l=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof s=="string"){const d=s.indexOf(":");d===-1?i.ruleId=s:(i.source=s.slice(0,d),i.ruleId=s.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const u=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=u?u.line:void 0,this.name=Fl(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Zr.prototype.file="";Zr.prototype.name="";Zr.prototype.reason="";Zr.prototype.message="";Zr.prototype.stack="";Zr.prototype.column=void 0;Zr.prototype.line=void 0;Zr.prototype.ancestors=void 0;Zr.prototype.cause=void 0;Zr.prototype.fatal=void 0;Zr.prototype.place=void 0;Zr.prototype.ruleId=void 0;Zr.prototype.source=void 0;const Mv={}.hasOwnProperty,s$=new Map,a$=/[A-Z]/g,i$=new Set(["table","tbody","thead","tfoot","tr"]),o$=new Set(["td","th"]),K4="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function l$(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=g$(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=p$(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Rv:KL,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Q4(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function Q4(e,t,r){if(t.type==="element")return c$(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return u$(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return f$(e,t,r);if(t.type==="mdxjsEsm")return d$(e,t);if(t.type==="root")return m$(e,t,r);if(t.type==="text")return h$(e,t)}function c$(e,t,r){const s=e.schema;let a=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=Rv,e.schema=a),e.ancestors.push(t);const i=J4(e,t.tagName,!1),l=x$(e,t);let u=Lv(e,t);return i$.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!FL(d):!0})),X4(e,l,i,t),Ov(l,u),e.ancestors.pop(),e.schema=s,e.create(t,i,l,r)}function u$(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}Jl(e,t.position)}function d$(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Jl(e,t.position)}function f$(e,t,r){const s=e.schema;let a=s;t.name==="svg"&&s.space==="html"&&(a=Rv,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:J4(e,t.name,!0),l=y$(e,t),u=Lv(e,t);return X4(e,l,i,t),Ov(l,u),e.ancestors.pop(),e.schema=s,e.create(t,i,l,r)}function m$(e,t,r){const s={};return Ov(s,Lv(e,t)),e.create(t,e.Fragment,s,r)}function h$(e,t){return t.value}function X4(e,t,r,s){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=s)}function Ov(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function p$(e,t,r){return s;function s(a,i,l,u){const m=Array.isArray(l.children)?r:t;return u?m(i,l,u):m(i,l)}}function g$(e,t){return r;function r(s,a,i,l){const u=Array.isArray(i.children),d=Iv(s);return t(a,i,l,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function x$(e,t){const r={};let s,a;for(a in t.properties)if(a!=="children"&&Mv.call(t.properties,a)){const i=v$(e,a,t.properties[a]);if(i){const[l,u]=i;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&o$.has(t.tagName)?s=u:r[l]=u}}if(s){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return r}function y$(e,t){const r={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const i=s.data.estree.body[0];i.type;const l=i.expression;l.type;const u=l.properties[0];u.type,Object.assign(r,e.evaluater.evaluateExpression(u.argument))}else Jl(e,t.position);else{const a=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const u=s.value.data.estree.body[0];u.type,i=e.evaluater.evaluateExpression(u.expression)}else Jl(e,t.position);else i=s.value===null?!0:s.value;r[a]=i}return r}function Lv(e,t){const r=[];let s=-1;const a=e.passKeys?new Map:s$;for(;++s<t.children.length;){const i=t.children[s];let l;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const m=a.get(d)||0;l=d+"-"+m,a.set(d,m+1)}}const u=Q4(e,i,l);u!==void 0&&r.push(u)}return r}function v$(e,t,r){const s=HL(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=s.commaSeparated?IL(r):QL(r)),s.property==="style"){let a=typeof r=="object"?r:b$(e,String(r));return e.stylePropertyNameCase==="css"&&(a=w$(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?qL[s.property]||s.property:s.attribute,r]}}function b$(e,t){try{return r$(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const s=r,a=new Zr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=K4+"#cannot-parse-style-attribute",a}}function J4(e,t,r){let s;if(!r)s={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,l;for(;++i<a.length;){const u=yj(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(i&&u.type==="Literal"),optional:!1}:u}s=l}else s=yj(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const a=s.value;return Mv.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);Jl(e)}function Jl(e,t){const r=new Zr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=K4+"#cannot-handle-mdx-estrees-without-createevaluater",r}function w$(e){const t={};let r;for(r in e)Mv.call(e,r)&&(t[N$(r)]=e[r]);return t}function N$(e){let t=e.replace(a$,j$);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function j$(e){return"-"+e.toLowerCase()}const tp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},S$={};function k$(e,t){const r=S$,s=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return Z4(e,s,a)}function Z4(e,t,r){if(C$(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ej(e.children,t,r)}return Array.isArray(e)?Ej(e,t,r):""}function Ej(e,t,r){const s=[];let a=-1;for(;++a<e.length;)s[a]=Z4(e[a],t,r);return s.join("")}function C$(e){return!!(e&&typeof e=="object")}const Dj=document.createElement("i");function $v(e){const t="&"+e+";";Dj.innerHTML=t;const r=Dj.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Rs(e,t,r,s){const a=e.length;let i=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,s.length<1e4)l=Array.from(s),l.unshift(t,r),e.splice(...l);else for(r&&e.splice(t,r);i<s.length;)l=s.slice(i,i+1e4),l.unshift(t,0),e.splice(...l),i+=1e4,t+=1e4}function Jn(e,t){return e.length>0?(Rs(e,e.length,0,t),e):t}const Aj={}.hasOwnProperty;function _$(e){const t={};let r=-1;for(;++r<e.length;)E$(t,e[r]);return t}function E$(e,t){let r;for(r in t){const a=(Aj.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let l;if(i)for(l in i){Aj.call(a,l)||(a[l]=[]);const u=i[l];D$(a[l],Array.isArray(u)?u:u?[u]:[])}}}function D$(e,t){let r=-1;const s=[];for(;++r<t.length;)(t[r].add==="after"?e:s).push(t[r]);Rs(e,0,0,s)}function eD(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function uo(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Es=Pa(/[A-Za-z]/),Rn=Pa(/[\dA-Za-z]/),A$=Pa(/[#-'*+\--9=?A-Z^-~]/);function Py(e){return e!==null&&(e<32||e===127)}const Ry=Pa(/\d/),T$=Pa(/[\dA-Fa-f]/),P$=Pa(/[!-/:-@[-`{-~]/);function bt(e){return e!==null&&e<-2}function Nn(e){return e!==null&&(e<0||e===32)}function Ft(e){return e===-2||e===-1||e===32}const R$=Pa(new RegExp("\\p{P}|\\p{S}","u")),I$=Pa(/\s/);function Pa(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Ro(e){const t=[];let r=-1,s=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let l="";if(i===37&&Rn(e.charCodeAt(r+1))&&Rn(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const u=e.charCodeAt(r+1);i<56320&&u>56319&&u<57344?(l=String.fromCharCode(i,u),a=1):l="�"}else l=String.fromCharCode(i);l&&(t.push(e.slice(s,r),encodeURIComponent(l)),s=r+a+1,l=""),a&&(r+=a,a=0)}return t.join("")+e.slice(s)}function rr(e,t,r,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(d){return Ft(d)?(e.enter(r),u(d)):t(d)}function u(d){return Ft(d)&&i++<a?(e.consume(d),u):(e.exit(r),t(d))}}const M$={tokenize:O$};function O$(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let r;return t;function s(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),rr(e,t,"linePrefix")}function a(u){return e.enter("paragraph"),i(u)}function i(u){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return bt(u)?(e.consume(u),e.exit("chunkText"),i):(e.consume(u),l)}}const L$={tokenize:$$},Tj={tokenize:F$};function $$(e){const t=this,r=[];let s=0,a,i,l;return u;function u(_){if(s<r.length){const k=r[s];return t.containerState=k[1],e.attempt(k[0].continuation,d,m)(_)}return m(_)}function d(_){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&j();const k=t.events.length;let D=k,A;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){A=t.events[D][1].end;break}C(s);let T=k;for(;T<t.events.length;)t.events[T][1].end={...A},T++;return Rs(t.events,D+1,0,t.events.slice(k)),t.events.length=T,m(_)}return u(_)}function m(_){if(s===r.length){if(!a)return g(_);if(a.currentConstruct&&a.currentConstruct.concrete)return b(_);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Tj,f,h)(_)}function f(_){return a&&j(),C(s),g(_)}function h(_){return t.parser.lazy[t.now().line]=s!==r.length,l=t.now().offset,b(_)}function g(_){return t.containerState={},e.attempt(Tj,x,b)(_)}function x(_){return s++,r.push([t.currentConstruct,t.containerState]),g(_)}function b(_){if(_===null){a&&j(),C(0),e.consume(_);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),v(_)}function v(_){if(_===null){w(e.exit("chunkFlow"),!0),C(0),e.consume(_);return}return bt(_)?(e.consume(_),w(e.exit("chunkFlow")),s=0,t.interrupt=void 0,u):(e.consume(_),v)}function w(_,k){const D=t.sliceStream(_);if(k&&D.push(null),_.previous=i,i&&(i.next=_),i=_,a.defineSkip(_.start),a.write(D),t.parser.lazy[_.start.line]){let A=a.events.length;for(;A--;)if(a.events[A][1].start.offset<l&&(!a.events[A][1].end||a.events[A][1].end.offset>l))return;const T=t.events.length;let I=T,L,q;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(L){q=t.events[I][1].end;break}L=!0}for(C(s),A=T;A<t.events.length;)t.events[A][1].end={...q},A++;Rs(t.events,I+1,0,t.events.slice(T)),t.events.length=A}}function C(_){let k=r.length;for(;k-- >_;){const D=r[k];t.containerState=D[1],D[0].exit.call(t,e)}r.length=_}function j(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function F$(e,t,r){return rr(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Pj(e){if(e===null||Nn(e)||I$(e))return 1;if(R$(e))return 2}function Fv(e,t,r){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(t=i(t,r),s.push(i))}return t}const Iy={name:"attention",resolveAll:B$,tokenize:z$};function B$(e,t){let r=-1,s,a,i,l,u,d,m,f;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(s=r;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[s][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[s][1].end.offset-e[s][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[s][1].end},g={...e[r][1].start};Rj(h,-d),Rj(g,d),l={type:d>1?"strongSequence":"emphasisSequence",start:h,end:{...e[s][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:g},i={type:d>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[r][1].start}},a={type:d>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[s][1].end={...l.start},e[r][1].start={...u.end},m=[],e[s][1].end.offset-e[s][1].start.offset&&(m=Jn(m,[["enter",e[s][1],t],["exit",e[s][1],t]])),m=Jn(m,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",i,t]]),m=Jn(m,Fv(t.parser.constructs.insideSpan.null,e.slice(s+1,r),t)),m=Jn(m,[["exit",i,t],["enter",u,t],["exit",u,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(f=2,m=Jn(m,[["enter",e[r][1],t],["exit",e[r][1],t]])):f=0,Rs(e,s-1,r-s+3,m),r=s+m.length-f-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function z$(e,t){const r=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Pj(s);let i;return l;function l(d){return i=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===i)return e.consume(d),u;const m=e.exit("attentionSequence"),f=Pj(d),h=!f||f===2&&a||r.includes(d),g=!a||a===2&&f||r.includes(s);return m._open=!!(i===42?h:h&&(a||!g)),m._close=!!(i===42?g:g&&(f||!h)),t(d)}}function Rj(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const G$={name:"autolink",tokenize:q$};function q$(e,t,r){let s=0;return a;function a(x){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(x){return Es(x)?(e.consume(x),l):x===64?r(x):m(x)}function l(x){return x===43||x===45||x===46||Rn(x)?(s=1,u(x)):m(x)}function u(x){return x===58?(e.consume(x),s=0,d):(x===43||x===45||x===46||Rn(x))&&s++<32?(e.consume(x),u):(s=0,m(x))}function d(x){return x===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):x===null||x===32||x===60||Py(x)?r(x):(e.consume(x),d)}function m(x){return x===64?(e.consume(x),f):A$(x)?(e.consume(x),m):r(x)}function f(x){return Rn(x)?h(x):r(x)}function h(x){return x===46?(e.consume(x),s=0,f):x===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):g(x)}function g(x){if((x===45||Rn(x))&&s++<63){const b=x===45?g:h;return e.consume(x),b}return r(x)}}const Nf={partial:!0,tokenize:U$};function U$(e,t,r){return s;function s(i){return Ft(i)?rr(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||bt(i)?t(i):r(i)}}const tD={continuation:{tokenize:H$},exit:V$,name:"blockQuote",tokenize:W$};function W$(e,t,r){const s=this;return a;function a(l){if(l===62){const u=s.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),i}return r(l)}function i(l){return Ft(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function H$(e,t,r){const s=this;return a;function a(l){return Ft(l)?rr(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return e.attempt(tD,t,r)(l)}}function V$(e){e.exit("blockQuote")}const rD={name:"characterEscape",tokenize:Y$};function Y$(e,t,r){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return P$(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const nD={name:"characterReference",tokenize:K$};function K$(e,t,r){const s=this;let a=0,i,l;return u;function u(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),d}function d(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),m):(e.enter("characterReferenceValue"),i=31,l=Rn,f(h))}function m(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,l=T$,f):(e.enter("characterReferenceValue"),i=7,l=Ry,f(h))}function f(h){if(h===59&&a){const g=e.exit("characterReferenceValue");return l===Rn&&!$v(s.sliceSerialize(g))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(h)&&a++<i?(e.consume(h),f):r(h)}}const Ij={partial:!0,tokenize:X$},Mj={concrete:!0,name:"codeFenced",tokenize:Q$};function Q$(e,t,r){const s=this,a={partial:!0,tokenize:D};let i=0,l=0,u;return d;function d(A){return m(A)}function m(A){const T=s.events[s.events.length-1];return i=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,u=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(A)}function f(A){return A===u?(l++,e.consume(A),f):l<3?r(A):(e.exit("codeFencedFenceSequence"),Ft(A)?rr(e,h,"whitespace")(A):h(A))}function h(A){return A===null||bt(A)?(e.exit("codeFencedFence"),s.interrupt?t(A):e.check(Ij,v,k)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||bt(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(A)):Ft(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),rr(e,x,"whitespace")(A)):A===96&&A===u?r(A):(e.consume(A),g)}function x(A){return A===null||bt(A)?h(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===null||bt(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(A)):A===96&&A===u?r(A):(e.consume(A),b)}function v(A){return e.attempt(a,k,w)(A)}function w(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),C}function C(A){return i>0&&Ft(A)?rr(e,j,"linePrefix",i+1)(A):j(A)}function j(A){return A===null||bt(A)?e.check(Ij,v,k)(A):(e.enter("codeFlowValue"),_(A))}function _(A){return A===null||bt(A)?(e.exit("codeFlowValue"),j(A)):(e.consume(A),_)}function k(A){return e.exit("codeFenced"),t(A)}function D(A,T,I){let L=0;return q;function q(te){return A.enter("lineEnding"),A.consume(te),A.exit("lineEnding"),O}function O(te){return A.enter("codeFencedFence"),Ft(te)?rr(A,$,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(te):$(te)}function $(te){return te===u?(A.enter("codeFencedFenceSequence"),z(te)):I(te)}function z(te){return te===u?(L++,A.consume(te),z):L>=l?(A.exit("codeFencedFenceSequence"),Ft(te)?rr(A,K,"whitespace")(te):K(te)):I(te)}function K(te){return te===null||bt(te)?(A.exit("codeFencedFence"),T(te)):I(te)}}}function X$(e,t,r){const s=this;return a;function a(l){return l===null?r(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i)}function i(l){return s.parser.lazy[s.now().line]?r(l):t(l)}}const rp={name:"codeIndented",tokenize:Z$},J$={partial:!0,tokenize:eF};function Z$(e,t,r){const s=this;return a;function a(m){return e.enter("codeIndented"),rr(e,i,"linePrefix",5)(m)}function i(m){const f=s.events[s.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?l(m):r(m)}function l(m){return m===null?d(m):bt(m)?e.attempt(J$,l,d)(m):(e.enter("codeFlowValue"),u(m))}function u(m){return m===null||bt(m)?(e.exit("codeFlowValue"),l(m)):(e.consume(m),u)}function d(m){return e.exit("codeIndented"),t(m)}}function eF(e,t,r){const s=this;return a;function a(l){return s.parser.lazy[s.now().line]?r(l):bt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):rr(e,i,"linePrefix",5)(l)}function i(l){const u=s.events[s.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):bt(l)?a(l):r(l)}}const tF={name:"codeText",previous:nF,resolve:rF,tokenize:sF};function rF(e){let t=e.length-4,r=3,s,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=r;++s<t;)if(e[s][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(s=r-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function nF(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function sF(e,t,r){let s=0,a,i;return l;function l(h){return e.enter("codeText"),e.enter("codeTextSequence"),u(h)}function u(h){return h===96?(e.consume(h),s++,u):(e.exit("codeTextSequence"),d(h))}function d(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),d):h===96?(i=e.enter("codeTextSequence"),a=0,f(h)):bt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),d):(e.enter("codeTextData"),m(h))}function m(h){return h===null||h===32||h===96||bt(h)?(e.exit("codeTextData"),d(h)):(e.consume(h),m)}function f(h){return h===96?(e.consume(h),a++,f):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",m(h))}}class aF{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const s=r??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,r,s){const a=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&Cl(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Cl(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Cl(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Cl(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Cl(this.left,r.reverse())}}}function Cl(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function sD(e){const t={};let r=-1,s,a,i,l,u,d,m;const f=new aF(e);for(;++r<f.length;){for(;r in t;)r=t[r];if(s=f.get(r),r&&s[1].type==="chunkFlow"&&f.get(r-1)[1].type==="listItemPrefix"&&(d=s[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,iF(f,r)),r=t[r],m=!0);else if(s[1]._container){for(i=r,a=void 0;i--;)if(l=f.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(s[1].end={...f.get(a)[1].start},u=f.slice(a,r),u.unshift(s),f.splice(a,r-a+1,u))}}return Rs(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!m}function iF(e,t){const r=e.get(t)[1],s=e.get(t)[2];let a=t-1;const i=[];let l=r._tokenizer;l||(l=s.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,d=[],m={};let f,h,g=-1,x=r,b=0,v=0;const w=[v];for(;x;){for(;e.get(++a)[1]!==x;);i.push(a),x._tokenizer||(f=s.sliceStream(x),x.next||f.push(null),h&&l.defineSkip(x.start),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(f),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),h=x,x=x.next}for(x=r;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(v=g+1,w.push(v),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(l.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),g=w.length;g--;){const C=u.slice(w[g],w[g+1]),j=i.pop();d.push([j,j+C.length-1]),e.splice(j,2,C)}for(d.reverse(),g=-1;++g<d.length;)m[b+d[g][0]]=b+d[g][1],b+=d[g][1]-d[g][0]-1;return m}const oF={resolve:cF,tokenize:uF},lF={partial:!0,tokenize:dF};function cF(e){return sD(e),e}function uF(e,t){let r;return s;function s(u){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(u)}function a(u){return u===null?i(u):bt(u)?e.check(lF,l,i)(u):(e.consume(u),a)}function i(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function dF(e,t,r){const s=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),rr(e,i,"linePrefix")}function i(l){if(l===null||bt(l))return r(l);const u=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(s.parser.constructs.flow,r,t)(l)}}function aD(e,t,r,s,a,i,l,u,d){const m=d||Number.POSITIVE_INFINITY;let f=0;return h;function h(C){return C===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(C),e.exit(i),g):C===null||C===32||C===41||Py(C)?r(C):(e.enter(s),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),v(C))}function g(C){return C===62?(e.enter(i),e.consume(C),e.exit(i),e.exit(a),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===62?(e.exit("chunkString"),e.exit(u),g(C)):C===null||C===60||bt(C)?r(C):(e.consume(C),C===92?b:x)}function b(C){return C===60||C===62||C===92?(e.consume(C),x):x(C)}function v(C){return!f&&(C===null||C===41||Nn(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(s),t(C)):f<m&&C===40?(e.consume(C),f++,v):C===41?(e.consume(C),f--,v):C===null||C===32||C===40||Py(C)?r(C):(e.consume(C),C===92?w:v)}function w(C){return C===40||C===41||C===92?(e.consume(C),v):v(C)}}function iD(e,t,r,s,a,i){const l=this;let u=0,d;return m;function m(x){return e.enter(s),e.enter(a),e.consume(x),e.exit(a),e.enter(i),f}function f(x){return u>999||x===null||x===91||x===93&&!d||x===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?r(x):x===93?(e.exit(i),e.enter(a),e.consume(x),e.exit(a),e.exit(s),t):bt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===null||x===91||x===93||bt(x)||u++>999?(e.exit("chunkString"),f(x)):(e.consume(x),d||(d=!Ft(x)),x===92?g:h)}function g(x){return x===91||x===92||x===93?(e.consume(x),u++,h):h(x)}}function oD(e,t,r,s,a,i){let l;return u;function u(g){return g===34||g===39||g===40?(e.enter(s),e.enter(a),e.consume(g),e.exit(a),l=g===40?41:g,d):r(g)}function d(g){return g===l?(e.enter(a),e.consume(g),e.exit(a),e.exit(s),t):(e.enter(i),m(g))}function m(g){return g===l?(e.exit(i),d(l)):g===null?r(g):bt(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),rr(e,m,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===l||g===null||bt(g)?(e.exit("chunkString"),m(g)):(e.consume(g),g===92?h:f)}function h(g){return g===l||g===92?(e.consume(g),f):f(g)}}function Bl(e,t){let r;return s;function s(a){return bt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,s):Ft(a)?rr(e,s,r?"linePrefix":"lineSuffix")(a):t(a)}}const fF={name:"definition",tokenize:hF},mF={partial:!0,tokenize:pF};function hF(e,t,r){const s=this;let a;return i;function i(x){return e.enter("definition"),l(x)}function l(x){return iD.call(s,e,u,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function u(x){return a=uo(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),d):r(x)}function d(x){return Nn(x)?Bl(e,m)(x):m(x)}function m(x){return aD(e,f,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return e.attempt(mF,h,h)(x)}function h(x){return Ft(x)?rr(e,g,"whitespace")(x):g(x)}function g(x){return x===null||bt(x)?(e.exit("definition"),s.parser.defined.push(a),t(x)):r(x)}}function pF(e,t,r){return s;function s(u){return Nn(u)?Bl(e,a)(u):r(u)}function a(u){return oD(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function i(u){return Ft(u)?rr(e,l,"whitespace")(u):l(u)}function l(u){return u===null||bt(u)?t(u):r(u)}}const gF={name:"hardBreakEscape",tokenize:xF};function xF(e,t,r){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return bt(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const yF={name:"headingAtx",resolve:vF,tokenize:bF};function vF(e,t){let r=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),r-2>s&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&e[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},i={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},Rs(e,s,r-s+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function bF(e,t,r){let s=0;return a;function a(f){return e.enter("atxHeading"),i(f)}function i(f){return e.enter("atxHeadingSequence"),l(f)}function l(f){return f===35&&s++<6?(e.consume(f),l):f===null||Nn(f)?(e.exit("atxHeadingSequence"),u(f)):r(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),d(f)):f===null||bt(f)?(e.exit("atxHeading"),t(f)):Ft(f)?rr(e,u,"whitespace")(f):(e.enter("atxHeadingText"),m(f))}function d(f){return f===35?(e.consume(f),d):(e.exit("atxHeadingSequence"),u(f))}function m(f){return f===null||f===35||Nn(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),m)}}const wF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Oj=["pre","script","style","textarea"],NF={concrete:!0,name:"htmlFlow",resolveTo:kF,tokenize:CF},jF={partial:!0,tokenize:EF},SF={partial:!0,tokenize:_F};function kF(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function CF(e,t,r){const s=this;let a,i,l,u,d;return m;function m(F){return f(F)}function f(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),h}function h(F){return F===33?(e.consume(F),g):F===47?(e.consume(F),i=!0,v):F===63?(e.consume(F),a=3,s.interrupt?t:P):Es(F)?(e.consume(F),l=String.fromCharCode(F),w):r(F)}function g(F){return F===45?(e.consume(F),a=2,x):F===91?(e.consume(F),a=5,u=0,b):Es(F)?(e.consume(F),a=4,s.interrupt?t:P):r(F)}function x(F){return F===45?(e.consume(F),s.interrupt?t:P):r(F)}function b(F){const Ne="CDATA[";return F===Ne.charCodeAt(u++)?(e.consume(F),u===Ne.length?s.interrupt?t:$:b):r(F)}function v(F){return Es(F)?(e.consume(F),l=String.fromCharCode(F),w):r(F)}function w(F){if(F===null||F===47||F===62||Nn(F)){const Ne=F===47,ye=l.toLowerCase();return!Ne&&!i&&Oj.includes(ye)?(a=1,s.interrupt?t(F):$(F)):wF.includes(l.toLowerCase())?(a=6,Ne?(e.consume(F),C):s.interrupt?t(F):$(F)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?r(F):i?j(F):_(F))}return F===45||Rn(F)?(e.consume(F),l+=String.fromCharCode(F),w):r(F)}function C(F){return F===62?(e.consume(F),s.interrupt?t:$):r(F)}function j(F){return Ft(F)?(e.consume(F),j):q(F)}function _(F){return F===47?(e.consume(F),q):F===58||F===95||Es(F)?(e.consume(F),k):Ft(F)?(e.consume(F),_):q(F)}function k(F){return F===45||F===46||F===58||F===95||Rn(F)?(e.consume(F),k):D(F)}function D(F){return F===61?(e.consume(F),A):Ft(F)?(e.consume(F),D):_(F)}function A(F){return F===null||F===60||F===61||F===62||F===96?r(F):F===34||F===39?(e.consume(F),d=F,T):Ft(F)?(e.consume(F),A):I(F)}function T(F){return F===d?(e.consume(F),d=null,L):F===null||bt(F)?r(F):(e.consume(F),T)}function I(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||Nn(F)?D(F):(e.consume(F),I)}function L(F){return F===47||F===62||Ft(F)?_(F):r(F)}function q(F){return F===62?(e.consume(F),O):r(F)}function O(F){return F===null||bt(F)?$(F):Ft(F)?(e.consume(F),O):r(F)}function $(F){return F===45&&a===2?(e.consume(F),se):F===60&&a===1?(e.consume(F),W):F===62&&a===4?(e.consume(F),G):F===63&&a===3?(e.consume(F),P):F===93&&a===5?(e.consume(F),Y):bt(F)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(jF,Z,z)(F)):F===null||bt(F)?(e.exit("htmlFlowData"),z(F)):(e.consume(F),$)}function z(F){return e.check(SF,K,Z)(F)}function K(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),te}function te(F){return F===null||bt(F)?z(F):(e.enter("htmlFlowData"),$(F))}function se(F){return F===45?(e.consume(F),P):$(F)}function W(F){return F===47?(e.consume(F),l="",M):$(F)}function M(F){if(F===62){const Ne=l.toLowerCase();return Oj.includes(Ne)?(e.consume(F),G):$(F)}return Es(F)&&l.length<8?(e.consume(F),l+=String.fromCharCode(F),M):$(F)}function Y(F){return F===93?(e.consume(F),P):$(F)}function P(F){return F===62?(e.consume(F),G):F===45&&a===2?(e.consume(F),P):$(F)}function G(F){return F===null||bt(F)?(e.exit("htmlFlowData"),Z(F)):(e.consume(F),G)}function Z(F){return e.exit("htmlFlow"),t(F)}}function _F(e,t,r){const s=this;return a;function a(l){return bt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):r(l)}function i(l){return s.parser.lazy[s.now().line]?r(l):t(l)}}function EF(e,t,r){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Nf,t,r)}}const DF={name:"htmlText",tokenize:AF};function AF(e,t,r){const s=this;let a,i,l;return u;function u(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),d}function d(P){return P===33?(e.consume(P),m):P===47?(e.consume(P),D):P===63?(e.consume(P),_):Es(P)?(e.consume(P),I):r(P)}function m(P){return P===45?(e.consume(P),f):P===91?(e.consume(P),i=0,b):Es(P)?(e.consume(P),j):r(P)}function f(P){return P===45?(e.consume(P),x):r(P)}function h(P){return P===null?r(P):P===45?(e.consume(P),g):bt(P)?(l=h,W(P)):(e.consume(P),h)}function g(P){return P===45?(e.consume(P),x):h(P)}function x(P){return P===62?se(P):P===45?g(P):h(P)}function b(P){const G="CDATA[";return P===G.charCodeAt(i++)?(e.consume(P),i===G.length?v:b):r(P)}function v(P){return P===null?r(P):P===93?(e.consume(P),w):bt(P)?(l=v,W(P)):(e.consume(P),v)}function w(P){return P===93?(e.consume(P),C):v(P)}function C(P){return P===62?se(P):P===93?(e.consume(P),C):v(P)}function j(P){return P===null||P===62?se(P):bt(P)?(l=j,W(P)):(e.consume(P),j)}function _(P){return P===null?r(P):P===63?(e.consume(P),k):bt(P)?(l=_,W(P)):(e.consume(P),_)}function k(P){return P===62?se(P):_(P)}function D(P){return Es(P)?(e.consume(P),A):r(P)}function A(P){return P===45||Rn(P)?(e.consume(P),A):T(P)}function T(P){return bt(P)?(l=T,W(P)):Ft(P)?(e.consume(P),T):se(P)}function I(P){return P===45||Rn(P)?(e.consume(P),I):P===47||P===62||Nn(P)?L(P):r(P)}function L(P){return P===47?(e.consume(P),se):P===58||P===95||Es(P)?(e.consume(P),q):bt(P)?(l=L,W(P)):Ft(P)?(e.consume(P),L):se(P)}function q(P){return P===45||P===46||P===58||P===95||Rn(P)?(e.consume(P),q):O(P)}function O(P){return P===61?(e.consume(P),$):bt(P)?(l=O,W(P)):Ft(P)?(e.consume(P),O):L(P)}function $(P){return P===null||P===60||P===61||P===62||P===96?r(P):P===34||P===39?(e.consume(P),a=P,z):bt(P)?(l=$,W(P)):Ft(P)?(e.consume(P),$):(e.consume(P),K)}function z(P){return P===a?(e.consume(P),a=void 0,te):P===null?r(P):bt(P)?(l=z,W(P)):(e.consume(P),z)}function K(P){return P===null||P===34||P===39||P===60||P===61||P===96?r(P):P===47||P===62||Nn(P)?L(P):(e.consume(P),K)}function te(P){return P===47||P===62||Nn(P)?L(P):r(P)}function se(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):r(P)}function W(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),M}function M(P){return Ft(P)?rr(e,Y,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):Y(P)}function Y(P){return e.enter("htmlTextData"),l(P)}}const Bv={name:"labelEnd",resolveAll:IF,resolveTo:MF,tokenize:OF},TF={tokenize:LF},PF={tokenize:$F},RF={tokenize:FF};function IF(e){let t=-1;const r=[];for(;++t<e.length;){const s=e[t][1];if(r.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",t+=a}}return e.length!==r.length&&Rs(e,0,e.length,r),e}function MF(e,t){let r=e.length,s=0,a,i,l,u;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(l=r);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},m={type:"label",start:{...e[i][1].start},end:{...e[l][1].end}},f={type:"labelText",start:{...e[i+s+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",d,t],["enter",m,t]],u=Jn(u,e.slice(i+1,i+s+3)),u=Jn(u,[["enter",f,t]]),u=Jn(u,Fv(t.parser.constructs.insideSpan.null,e.slice(i+s+4,l-3),t)),u=Jn(u,[["exit",f,t],e[l-2],e[l-1],["exit",m,t]]),u=Jn(u,e.slice(l+1)),u=Jn(u,[["exit",d,t]]),Rs(e,i,e.length,u),e}function OF(e,t,r){const s=this;let a=s.events.length,i,l;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return u;function u(g){return i?i._inactive?h(g):(l=s.parser.defined.includes(uo(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):r(g)}function d(g){return g===40?e.attempt(TF,f,l?f:h)(g):g===91?e.attempt(PF,f,l?m:h)(g):l?f(g):h(g)}function m(g){return e.attempt(RF,f,h)(g)}function f(g){return t(g)}function h(g){return i._balanced=!0,r(g)}}function LF(e,t,r){return s;function s(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),a}function a(h){return Nn(h)?Bl(e,i)(h):i(h)}function i(h){return h===41?f(h):aD(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function l(h){return Nn(h)?Bl(e,d)(h):f(h)}function u(h){return r(h)}function d(h){return h===34||h===39||h===40?oD(e,m,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):f(h)}function m(h){return Nn(h)?Bl(e,f)(h):f(h)}function f(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function $F(e,t,r){const s=this;return a;function a(u){return iD.call(s,e,i,l,"reference","referenceMarker","referenceString")(u)}function i(u){return s.parser.defined.includes(uo(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(u):r(u)}function l(u){return r(u)}}function FF(e,t,r){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const BF={name:"labelStartImage",resolveAll:Bv.resolveAll,tokenize:zF};function zF(e,t,r){const s=this;return a;function a(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),i}function i(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):r(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(u):t(u)}}const GF={name:"labelStartLink",resolveAll:Bv.resolveAll,tokenize:qF};function qF(e,t,r){const s=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(l):t(l)}}const np={name:"lineEnding",tokenize:UF};function UF(e,t){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),rr(e,t,"linePrefix")}}const gd={name:"thematicBreak",tokenize:WF};function WF(e,t,r){let s=0,a;return i;function i(m){return e.enter("thematicBreak"),l(m)}function l(m){return a=m,u(m)}function u(m){return m===a?(e.enter("thematicBreakSequence"),d(m)):s>=3&&(m===null||bt(m))?(e.exit("thematicBreak"),t(m)):r(m)}function d(m){return m===a?(e.consume(m),s++,d):(e.exit("thematicBreakSequence"),Ft(m)?rr(e,u,"whitespace")(m):u(m))}}const vn={continuation:{tokenize:KF},exit:XF,name:"list",tokenize:YF},HF={partial:!0,tokenize:JF},VF={partial:!0,tokenize:QF};function YF(e,t,r){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return u;function u(x){const b=s.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!s.containerState.marker||x===s.containerState.marker:Ry(x)){if(s.containerState.type||(s.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),x===42||x===45?e.check(gd,r,m)(x):m(x);if(!s.interrupt||x===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(x)}return r(x)}function d(x){return Ry(x)&&++l<10?(e.consume(x),d):(!s.interrupt||l<2)&&(s.containerState.marker?x===s.containerState.marker:x===41||x===46)?(e.exit("listItemValue"),m(x)):r(x)}function m(x){return e.enter("listItemMarker"),e.consume(x),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||x,e.check(Nf,s.interrupt?r:f,e.attempt(HF,g,h))}function f(x){return s.containerState.initialBlankLine=!0,i++,g(x)}function h(x){return Ft(x)?(e.enter("listItemPrefixWhitespace"),e.consume(x),e.exit("listItemPrefixWhitespace"),g):r(x)}function g(x){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(x)}}function KF(e,t,r){const s=this;return s.containerState._closeFlow=void 0,e.check(Nf,a,i);function a(u){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,rr(e,t,"listItemIndent",s.containerState.size+1)(u)}function i(u){return s.containerState.furtherBlankLines||!Ft(u)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,l(u)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(VF,t,l)(u))}function l(u){return s.containerState._closeFlow=!0,s.interrupt=void 0,rr(e,e.attempt(vn,t,r),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function QF(e,t,r){const s=this;return rr(e,a,"listItemIndent",s.containerState.size+1);function a(i){const l=s.events[s.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===s.containerState.size?t(i):r(i)}}function XF(e){e.exit(this.containerState.type)}function JF(e,t,r){const s=this;return rr(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const l=s.events[s.events.length-1];return!Ft(i)&&l&&l[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const Lj={name:"setextUnderline",resolveTo:ZF,tokenize:e8};function ZF(e,t){let r=e.length,s,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){s=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const l={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",l,t]),e.splice(i+1,0,["exit",e[s][1],t]),e[s][1].end={...e[i][1].end}):e[s][1]=l,e.push(["exit",l,t]),e}function e8(e,t,r){const s=this;let a;return i;function i(m){let f=s.events.length,h;for(;f--;)if(s.events[f][1].type!=="lineEnding"&&s.events[f][1].type!=="linePrefix"&&s.events[f][1].type!=="content"){h=s.events[f][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||h)?(e.enter("setextHeadingLine"),a=m,l(m)):r(m)}function l(m){return e.enter("setextHeadingLineSequence"),u(m)}function u(m){return m===a?(e.consume(m),u):(e.exit("setextHeadingLineSequence"),Ft(m)?rr(e,d,"lineSuffix")(m):d(m))}function d(m){return m===null||bt(m)?(e.exit("setextHeadingLine"),t(m)):r(m)}}const t8={tokenize:r8};function r8(e){const t=this,r=e.attempt(Nf,s,e.attempt(this.parser.constructs.flowInitial,a,rr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(oF,a)),"linePrefix")));return r;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const n8={resolveAll:cD()},s8=lD("string"),a8=lD("text");function lD(e){return{resolveAll:cD(e==="text"?i8:void 0),tokenize:t};function t(r){const s=this,a=this.parser.constructs[e],i=r.attempt(a,l,u);return l;function l(f){return m(f)?i(f):u(f)}function u(f){if(f===null){r.consume(f);return}return r.enter("data"),r.consume(f),d}function d(f){return m(f)?(r.exit("data"),i(f)):(r.consume(f),d)}function m(f){if(f===null)return!0;const h=a[f];let g=-1;if(h)for(;++g<h.length;){const x=h[g];if(!x.previous||x.previous.call(s,s.previous))return!0}return!1}}}function cD(e){return t;function t(r,s){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,s):r}}function i8(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const s=e[r-1][1],a=t.sliceStream(s);let i=a.length,l=-1,u=0,d;for(;i--;){const m=a[i];if(typeof m=="string"){for(l=m.length;m.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(m===-2)d=!0,u++;else if(m!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(u=0),u){const m={type:r===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:s.start._bufferIndex+l,_index:s.start._index+i,line:s.end.line,column:s.end.column-u,offset:s.end.offset-u},end:{...s.end}};s.end={...m.start},s.start.offset===s.end.offset?Object.assign(s,m):(e.splice(r,0,["enter",m,t],["exit",m,t]),r+=2)}r++}return e}const o8={42:vn,43:vn,45:vn,48:vn,49:vn,50:vn,51:vn,52:vn,53:vn,54:vn,55:vn,56:vn,57:vn,62:tD},l8={91:fF},c8={[-2]:rp,[-1]:rp,32:rp},u8={35:yF,42:gd,45:[Lj,gd],60:NF,61:Lj,95:gd,96:Mj,126:Mj},d8={38:nD,92:rD},f8={[-5]:np,[-4]:np,[-3]:np,33:BF,38:nD,42:Iy,60:[G$,DF],91:GF,92:[gF,rD],93:Bv,95:Iy,96:tF},m8={null:[Iy,n8]},h8={null:[42,95]},p8={null:[]},g8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:h8,contentInitial:l8,disable:p8,document:o8,flow:u8,flowInitial:c8,insideSpan:m8,string:d8,text:f8},Symbol.toStringTag,{value:"Module"}));function x8(e,t,r){let s={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let l=[],u=[];const d={attempt:T(D),check:T(A),consume:j,enter:_,exit:k,interrupt:T(A,{interrupt:!0})},m={code:null,containerState:{},defineSkip:v,events:[],now:b,parser:e,previous:null,sliceSerialize:g,sliceStream:x,write:h};let f=t.tokenize.call(m,d);return t.resolveAll&&i.push(t),m;function h(O){return l=Jn(l,O),w(),l[l.length-1]!==null?[]:(I(t,0),m.events=Fv(i,m.events,m),m.events)}function g(O,$){return v8(x(O),$)}function x(O){return y8(l,O)}function b(){const{_bufferIndex:O,_index:$,line:z,column:K,offset:te}=s;return{_bufferIndex:O,_index:$,line:z,column:K,offset:te}}function v(O){a[O.line]=O.column,q()}function w(){let O;for(;s._index<l.length;){const $=l[s._index];if(typeof $=="string")for(O=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===O&&s._bufferIndex<$.length;)C($.charCodeAt(s._bufferIndex));else C($)}}function C(O){f=f(O)}function j(O){bt(O)?(s.line++,s.column=1,s.offset+=O===-3?2:1,q()):O!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===l[s._index].length&&(s._bufferIndex=-1,s._index++)),m.previous=O}function _(O,$){const z=$||{};return z.type=O,z.start=b(),m.events.push(["enter",z,m]),u.push(z),z}function k(O){const $=u.pop();return $.end=b(),m.events.push(["exit",$,m]),$}function D(O,$){I(O,$.from)}function A(O,$){$.restore()}function T(O,$){return z;function z(K,te,se){let W,M,Y,P;return Array.isArray(K)?Z(K):"tokenize"in K?Z([K]):G(K);function G(B){return re;function re(X){const U=X!==null&&B[X],ne=X!==null&&B.null,pe=[...Array.isArray(U)?U:U?[U]:[],...Array.isArray(ne)?ne:ne?[ne]:[]];return Z(pe)(X)}}function Z(B){return W=B,M=0,B.length===0?se:F(B[M])}function F(B){return re;function re(X){return P=L(),Y=B,B.partial||(m.currentConstruct=B),B.name&&m.parser.constructs.disable.null.includes(B.name)?ye():B.tokenize.call($?Object.assign(Object.create(m),$):m,d,Ne,ye)(X)}}function Ne(B){return O(Y,P),te}function ye(B){return P.restore(),++M<W.length?F(W[M]):se}}}function I(O,$){O.resolveAll&&!i.includes(O)&&i.push(O),O.resolve&&Rs(m.events,$,m.events.length-$,O.resolve(m.events.slice($),m)),O.resolveTo&&(m.events=O.resolveTo(m.events,m))}function L(){const O=b(),$=m.previous,z=m.currentConstruct,K=m.events.length,te=Array.from(u);return{from:K,restore:se};function se(){s=O,m.previous=$,m.currentConstruct=z,m.events.length=K,u=te,q()}}function q(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function y8(e,t){const r=t.start._index,s=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let l;if(r===a)l=[e[r].slice(s,i)];else{if(l=e.slice(r,a),s>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(s):l.shift()}i>0&&l.push(e[a].slice(0,i))}return l}function v8(e,t){let r=-1;const s=[];let a;for(;++r<e.length;){const i=e[r];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(i)}a=i===-2,s.push(l)}return s.join("")}function b8(e){const s={constructs:_$([g8,...(e||{}).extensions||[]]),content:a(M$),defined:[],document:a(L$),flow:a(t8),lazy:{},string:a(s8),text:a(a8)};return s;function a(i){return l;function l(u){return x8(s,i,u)}}}function w8(e){for(;!sD(e););return e}const $j=/[\0\t\n\r]/g;function N8(){let e=1,t="",r=!0,s;return a;function a(i,l,u){const d=[];let m,f,h,g,x;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),h=0,t="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if($j.lastIndex=h,m=$j.exec(i),g=m&&m.index!==void 0?m.index:i.length,x=i.charCodeAt(g),!m){t=i.slice(h);break}if(x===10&&h===g&&s)d.push(-3),s=void 0;else switch(s&&(d.push(-5),s=void 0),h<g&&(d.push(i.slice(h,g)),e+=g-h),x){case 0:{d.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,d.push(-2);e++<f;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:s=!0,e=1}h=g+1}return u&&(s&&d.push(-5),t&&d.push(t),d.push(null)),d}}const j8=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function S8(e){return e.replace(j8,k8)}function k8(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return eD(r.slice(i?2:1),i?16:10)}return $v(r)||e}const uD={}.hasOwnProperty;function C8(e,t,r){return typeof t!="string"&&(r=t,t=void 0),_8(r)(w8(b8(r).document().write(N8()(e,t,!0))))}function _8(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(mt),autolinkProtocol:L,autolinkEmail:L,atxHeading:i(He),blockQuote:i(ne),characterEscape:L,characterReference:L,codeFenced:i(pe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(pe,l),codeText:i(xe,l),codeTextData:L,data:L,codeFlowValue:L,definition:i(ke),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(ze),hardBreakEscape:i(it),hardBreakTrailing:i(it),htmlFlow:i(Ge,l),htmlFlowData:L,htmlText:i(Ge,l),htmlTextData:L,image:i(rt),label:l,link:i(mt),listItem:i(ve),listItemValue:g,listOrdered:i(et,h),listUnordered:i(et),paragraph:i(he),reference:F,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(He),strong:i(ce),thematicBreak:i(Ue)},exit:{atxHeading:d(),atxHeadingSequence:D,autolink:d(),autolinkEmail:U,autolinkProtocol:X,blockQuote:d(),characterEscapeValue:q,characterReferenceMarkerHexadecimal:ye,characterReferenceMarkerNumeric:ye,characterReferenceValue:B,characterReference:re,codeFenced:d(w),codeFencedFence:v,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:q,codeIndented:d(C),codeText:d(te),codeTextData:q,data:q,definition:d(),definitionDestinationString:k,definitionLabelString:j,definitionTitleString:_,emphasis:d(),hardBreakEscape:d($),hardBreakTrailing:d($),htmlFlow:d(z),htmlFlowData:q,htmlText:d(K),htmlTextData:q,image:d(W),label:Y,labelText:M,lineEnding:O,link:d(se),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:Ne,resourceDestinationString:P,resourceTitleString:G,resource:Z,setextHeading:d(I),setextHeadingLineSequence:T,setextHeadingText:A,strong:d(),thematicBreak:d()}};dD(t,(e||{}).mdastExtensions||[]);const r={};return s;function s(ie){let be={type:"root",children:[]};const me={stack:[be],tokenStack:[],config:t,enter:u,exit:m,buffer:l,resume:f,data:r},Q=[];let ae=-1;for(;++ae<ie.length;)if(ie[ae][1].type==="listOrdered"||ie[ae][1].type==="listUnordered")if(ie[ae][0]==="enter")Q.push(ae);else{const Te=Q.pop();ae=a(ie,Te,ae)}for(ae=-1;++ae<ie.length;){const Te=t[ie[ae][0]];uD.call(Te,ie[ae][1].type)&&Te[ie[ae][1].type].call(Object.assign({sliceSerialize:ie[ae][2].sliceSerialize},me),ie[ae][1])}if(me.tokenStack.length>0){const Te=me.tokenStack[me.tokenStack.length-1];(Te[1]||Fj).call(me,void 0,Te[0])}for(be.position={start:ba(ie.length>0?ie[0][1].start:{line:1,column:1,offset:0}),end:ba(ie.length>0?ie[ie.length-2][1].end:{line:1,column:1,offset:0})},ae=-1;++ae<t.transforms.length;)be=t.transforms[ae](be)||be;return be}function a(ie,be,me){let Q=be-1,ae=-1,Te=!1,Ve,We,nt,st;for(;++Q<=me;){const $e=ie[Q];switch($e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{$e[0]==="enter"?ae++:ae--,st=void 0;break}case"lineEndingBlank":{$e[0]==="enter"&&(Ve&&!st&&!ae&&!nt&&(nt=Q),st=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:st=void 0}if(!ae&&$e[0]==="enter"&&$e[1].type==="listItemPrefix"||ae===-1&&$e[0]==="exit"&&($e[1].type==="listUnordered"||$e[1].type==="listOrdered")){if(Ve){let lt=Q;for(We=void 0;lt--;){const gt=ie[lt];if(gt[1].type==="lineEnding"||gt[1].type==="lineEndingBlank"){if(gt[0]==="exit")continue;We&&(ie[We][1].type="lineEndingBlank",Te=!0),gt[1].type="lineEnding",We=lt}else if(!(gt[1].type==="linePrefix"||gt[1].type==="blockQuotePrefix"||gt[1].type==="blockQuotePrefixWhitespace"||gt[1].type==="blockQuoteMarker"||gt[1].type==="listItemIndent"))break}nt&&(!We||nt<We)&&(Ve._spread=!0),Ve.end=Object.assign({},We?ie[We][1].start:$e[1].end),ie.splice(We||Q,0,["exit",Ve,$e[2]]),Q++,me++}if($e[1].type==="listItemPrefix"){const lt={type:"listItem",_spread:!1,start:Object.assign({},$e[1].start),end:void 0};Ve=lt,ie.splice(Q,0,["enter",lt,$e[2]]),Q++,me++,nt=void 0,st=!0}}}return ie[be][1]._spread=Te,me}function i(ie,be){return me;function me(Q){u.call(this,ie(Q),Q),be&&be.call(this,Q)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ie,be,me){this.stack[this.stack.length-1].children.push(ie),this.stack.push(ie),this.tokenStack.push([be,me||void 0]),ie.position={start:ba(be.start),end:void 0}}function d(ie){return be;function be(me){ie&&ie.call(this,me),m.call(this,me)}}function m(ie,be){const me=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==ie.type&&(be?be.call(this,ie,Q[0]):(Q[1]||Fj).call(this,ie,Q[0]));else throw new Error("Cannot close `"+ie.type+"` ("+Fl({start:ie.start,end:ie.end})+"): it’s not open");me.position.end=ba(ie.end)}function f(){return k$(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function g(ie){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(ie),10),this.data.expectingFirstListItemValue=void 0}}function x(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.lang=ie}function b(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.meta=ie}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.value=ie.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.value=ie.replace(/(\r?\n|\r)$/g,"")}function j(ie){const be=this.resume(),me=this.stack[this.stack.length-1];me.label=be,me.identifier=uo(this.sliceSerialize(ie)).toLowerCase()}function _(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.title=ie}function k(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.url=ie}function D(ie){const be=this.stack[this.stack.length-1];if(!be.depth){const me=this.sliceSerialize(ie).length;be.depth=me}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function T(ie){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(ie).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function L(ie){const me=this.stack[this.stack.length-1].children;let Q=me[me.length-1];(!Q||Q.type!=="text")&&(Q=Ee(),Q.position={start:ba(ie.start),end:void 0},me.push(Q)),this.stack.push(Q)}function q(ie){const be=this.stack.pop();be.value+=this.sliceSerialize(ie),be.position.end=ba(ie.end)}function O(ie){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=be.children[be.children.length-1];me.position.end=ba(ie.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(be.type)&&(L.call(this,ie),q.call(this,ie))}function $(){this.data.atHardBreak=!0}function z(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.value=ie}function K(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.value=ie}function te(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.value=ie}function se(){const ie=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";ie.type+="Reference",ie.referenceType=be,delete ie.url,delete ie.title}else delete ie.identifier,delete ie.label;this.data.referenceType=void 0}function W(){const ie=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";ie.type+="Reference",ie.referenceType=be,delete ie.url,delete ie.title}else delete ie.identifier,delete ie.label;this.data.referenceType=void 0}function M(ie){const be=this.sliceSerialize(ie),me=this.stack[this.stack.length-2];me.label=S8(be),me.identifier=uo(be).toLowerCase()}function Y(){const ie=this.stack[this.stack.length-1],be=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const Q=ie.children;me.children=Q}else me.alt=be}function P(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.url=ie}function G(){const ie=this.resume(),be=this.stack[this.stack.length-1];be.title=ie}function Z(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function Ne(ie){const be=this.resume(),me=this.stack[this.stack.length-1];me.label=be,me.identifier=uo(this.sliceSerialize(ie)).toLowerCase(),this.data.referenceType="full"}function ye(ie){this.data.characterReferenceType=ie.type}function B(ie){const be=this.sliceSerialize(ie),me=this.data.characterReferenceType;let Q;me?(Q=eD(be,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=$v(be);const ae=this.stack[this.stack.length-1];ae.value+=Q}function re(ie){const be=this.stack.pop();be.position.end=ba(ie.end)}function X(ie){q.call(this,ie);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(ie)}function U(ie){q.call(this,ie);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(ie)}function ne(){return{type:"blockquote",children:[]}}function pe(){return{type:"code",lang:null,meta:null,value:""}}function xe(){return{type:"inlineCode",value:""}}function ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ze(){return{type:"emphasis",children:[]}}function He(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Ge(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function mt(){return{type:"link",title:null,url:"",children:[]}}function et(ie){return{type:"list",ordered:ie.type==="listOrdered",start:null,spread:ie._spread,children:[]}}function ve(ie){return{type:"listItem",spread:ie._spread,checked:null,children:[]}}function he(){return{type:"paragraph",children:[]}}function ce(){return{type:"strong",children:[]}}function Ee(){return{type:"text",value:""}}function Ue(){return{type:"thematicBreak"}}}function ba(e){return{line:e.line,column:e.column,offset:e.offset}}function dD(e,t){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?dD(e,s):E8(e,s)}}function E8(e,t){let r;for(r in t)if(uD.call(t,r))switch(r){case"canContainEols":{const s=t[r];s&&e[r].push(...s);break}case"transforms":{const s=t[r];s&&e[r].push(...s);break}case"enter":case"exit":{const s=t[r];s&&Object.assign(e[r],s);break}}}function Fj(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Fl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Fl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Fl({start:t.start,end:t.end})+") is still open")}function D8(e){const t=this;t.parser=r;function r(s){return C8(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function A8(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function T8(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function P8(e,t){const r=t.value?t.value+`
`:"",s={};t.lang&&(s.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:r}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function R8(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function I8(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function M8(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=Ro(s.toLowerCase()),i=e.footnoteOrder.indexOf(s);let l,u=e.footnoteCounts.get(s);u===void 0?(u=0,e.footnoteOrder.push(s),l=e.footnoteOrder.length):l=i+1,u+=1,e.footnoteCounts.set(s,u);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const m={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,m),e.applyData(t,m)}function O8(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function L8(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function fD(e,t){const r=t.referenceType;let s="]";if(r==="collapsed"?s+="[]":r==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=s:a.push({type:"text",value:s}),a}function $8(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return fD(e,t);const a={src:Ro(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function F8(e,t){const r={src:Ro(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function B8(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const s={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,s),e.applyData(t,s)}function z8(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return fD(e,t);const a={href:Ro(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function G8(e,t){const r={href:Ro(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function q8(e,t,r){const s=e.all(t),a=r?U8(r):mD(t),i={},l=[];if(typeof t.checked=="boolean"){const f=s[0];let h;f&&f.type==="element"&&f.tagName==="p"?h=f:(h={type:"element",tagName:"p",properties:{},children:[]},s.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let u=-1;for(;++u<s.length;){const f=s[u];(a||u!==0||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?l.push(...f.children):l.push(f)}const d=s[s.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:i,children:l};return e.patch(t,m),e.applyData(t,m)}function U8(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let s=-1;for(;!t&&++s<r.length;)t=mD(r[s])}return t}function mD(e){const t=e.spread;return t??e.children.length>1}function W8(e,t){const r={},s=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<s.length;){const l=s[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function H8(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function V8(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function Y8(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function K8(e,t){const r=e.all(t),s=r.shift(),a=[];if(s){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],l),a.push(l)}if(r.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},u=Iv(t.children[1]),d=V4(t.children[t.children.length-1]);u&&d&&(l.position={start:u,end:d}),a.push(l)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function Q8(e,t,r){const s=r?r.children:void 0,i=(s?s.indexOf(t):1)===0?"th":"td",l=r&&r.type==="table"?r.align:void 0,u=l?l.length:t.children.length;let d=-1;const m=[];for(;++d<u;){const h=t.children[d],g={},x=l?l[d]:void 0;x&&(g.align=x);let b={type:"element",tagName:i,properties:g,children:[]};h&&(b.children=e.all(h),e.patch(h,b),b=e.applyData(h,b)),m.push(b)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(m,!0)};return e.patch(t,f),e.applyData(t,f)}function X8(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const Bj=9,zj=32;function J8(e){const t=String(e),r=/\r?\n|\r/g;let s=r.exec(t),a=0;const i=[];for(;s;)i.push(Gj(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=r.exec(t);return i.push(Gj(t.slice(a),a>0,!1)),i.join("")}function Gj(e,t,r){let s=0,a=e.length;if(t){let i=e.codePointAt(s);for(;i===Bj||i===zj;)s++,i=e.codePointAt(s)}if(r){let i=e.codePointAt(a-1);for(;i===Bj||i===zj;)a--,i=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function Z8(e,t){const r={type:"text",value:J8(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function e7(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const t7={blockquote:A8,break:T8,code:P8,delete:R8,emphasis:I8,footnoteReference:M8,heading:O8,html:L8,imageReference:$8,image:F8,inlineCode:B8,linkReference:z8,link:G8,listItem:q8,list:W8,paragraph:H8,root:V8,strong:Y8,table:K8,tableCell:X8,tableRow:Q8,text:Z8,thematicBreak:e7,toml:Zu,yaml:Zu,definition:Zu,footnoteDefinition:Zu};function Zu(){}const hD=-1,jf=0,zl=1,Bd=2,zv=3,Gv=4,qv=5,Uv=6,pD=7,gD=8,qj=typeof self=="object"?self:globalThis,r7=(e,t)=>{const r=(a,i)=>(e.set(i,a),a),s=a=>{if(e.has(a))return e.get(a);const[i,l]=t[a];switch(i){case jf:case hD:return r(l,a);case zl:{const u=r([],a);for(const d of l)u.push(s(d));return u}case Bd:{const u=r({},a);for(const[d,m]of l)u[s(d)]=s(m);return u}case zv:return r(new Date(l),a);case Gv:{const{source:u,flags:d}=l;return r(new RegExp(u,d),a)}case qv:{const u=r(new Map,a);for(const[d,m]of l)u.set(s(d),s(m));return u}case Uv:{const u=r(new Set,a);for(const d of l)u.add(s(d));return u}case pD:{const{name:u,message:d}=l;return r(new qj[u](d),a)}case gD:return r(BigInt(l),a);case"BigInt":return r(Object(BigInt(l)),a);case"ArrayBuffer":return r(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return r(new DataView(u),l)}}return r(new qj[i](l),a)};return s},Uj=e=>r7(new Map,e)(0),to="",{toString:n7}={},{keys:s7}=Object,_l=e=>{const t=typeof e;if(t!=="object"||!e)return[jf,t];const r=n7.call(e).slice(8,-1);switch(r){case"Array":return[zl,to];case"Object":return[Bd,to];case"Date":return[zv,to];case"RegExp":return[Gv,to];case"Map":return[qv,to];case"Set":return[Uv,to];case"DataView":return[zl,r]}return r.includes("Array")?[zl,r]:r.includes("Error")?[pD,r]:[Bd,r]},ed=([e,t])=>e===jf&&(t==="function"||t==="symbol"),a7=(e,t,r,s)=>{const a=(l,u)=>{const d=s.push(l)-1;return r.set(u,d),d},i=l=>{if(r.has(l))return r.get(l);let[u,d]=_l(l);switch(u){case jf:{let f=l;switch(d){case"bigint":u=gD,f=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);f=null;break;case"undefined":return a([hD],l)}return a([u,f],l)}case zl:{if(d){let g=l;return d==="DataView"?g=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(l)),a([d,[...g]],l)}const f=[],h=a([u,f],l);for(const g of l)f.push(i(g));return h}case Bd:{if(d)switch(d){case"BigInt":return a([d,l.toString()],l);case"Boolean":case"Number":case"String":return a([d,l.valueOf()],l)}if(t&&"toJSON"in l)return i(l.toJSON());const f=[],h=a([u,f],l);for(const g of s7(l))(e||!ed(_l(l[g])))&&f.push([i(g),i(l[g])]);return h}case zv:return a([u,l.toISOString()],l);case Gv:{const{source:f,flags:h}=l;return a([u,{source:f,flags:h}],l)}case qv:{const f=[],h=a([u,f],l);for(const[g,x]of l)(e||!(ed(_l(g))||ed(_l(x))))&&f.push([i(g),i(x)]);return h}case Uv:{const f=[],h=a([u,f],l);for(const g of l)(e||!ed(_l(g)))&&f.push(i(g));return h}}const{message:m}=l;return a([u,{name:d,message:m}],l)};return i},Wj=(e,{json:t,lossy:r}={})=>{const s=[];return a7(!(t||r),!!t,new Map,s)(e),s},zd=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Uj(Wj(e,t)):structuredClone(e):(e,t)=>Uj(Wj(e,t));function i7(e,t){const r=[{type:"text",value:"↩"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function o7(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function l7(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||i7,s=e.options.footnoteBackLabel||o7,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const m=e.footnoteById.get(e.footnoteOrder[d]);if(!m)continue;const f=e.all(m),h=String(m.identifier).toUpperCase(),g=Ro(h.toLowerCase());let x=0;const b=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++x<=v;){b.length>0&&b.push({type:"text",value:" "});let j=typeof r=="string"?r:r(d,x);typeof j=="string"&&(j={type:"text",value:j}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(d,x),className:["data-footnote-backref"]},children:Array.isArray(j)?j:[j]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const j=w.children[w.children.length-1];j&&j.type==="text"?j.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else f.push(...b);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(m,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...zd(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const xD=function(e){if(e==null)return f7;if(typeof e=="function")return Sf(e);if(typeof e=="object")return Array.isArray(e)?c7(e):u7(e);if(typeof e=="string")return d7(e);throw new Error("Expected function, string, or object as test")};function c7(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=xD(e[r]);return Sf(s);function s(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function u7(e){const t=e;return Sf(r);function r(s){const a=s;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function d7(e){return Sf(t);function t(r){return r&&r.type===e}}function Sf(e){return t;function t(r,s,a){return!!(m7(r)&&e.call(this,r,typeof s=="number"?s:void 0,a||void 0))}}function f7(){return!0}function m7(e){return e!==null&&typeof e=="object"&&"type"in e}const yD=[],h7=!0,Hj=!1,p7="skip";function g7(e,t,r,s){let a;typeof t=="function"&&typeof r!="function"?(s=r,r=t):a=t;const i=xD(a),l=s?-1:1;u(e,void 0,[])();function u(d,m,f){const h=d&&typeof d=="object"?d:{};if(typeof h.type=="string"){const x=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=yD,b,v,w;if((!t||i(d,m,f[f.length-1]||void 0))&&(x=x7(r(d,f)),x[0]===Hj))return x;if("children"in d&&d.children){const C=d;if(C.children&&x[0]!==p7)for(v=(s?C.children.length:-1)+l,w=f.concat(C);v>-1&&v<C.children.length;){const j=C.children[v];if(b=u(j,v,w)(),b[0]===Hj)return b;v=typeof b[1]=="number"?b[1]:v+l}}return x}}}function x7(e){return Array.isArray(e)?e:typeof e=="number"?[h7,e]:e==null?yD:[e]}function vD(e,t,r,s){let a,i,l;typeof t=="function"?(i=void 0,l=t,a=r):(i=t,l=r,a=s),g7(e,i,u,a);function u(d,m){const f=m[m.length-1],h=f?f.children.indexOf(d):void 0;return l(d,h,f)}}const My={}.hasOwnProperty,y7={};function v7(e,t){const r=t||y7,s=new Map,a=new Map,i=new Map,l={...t7,...r.handlers},u={all:m,applyData:w7,definitionById:s,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:l,one:d,options:r,patch:b7,wrap:j7};return vD(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const h=f.type==="definition"?s:a,g=String(f.identifier).toUpperCase();h.has(g)||h.set(g,f)}}),u;function d(f,h){const g=f.type,x=u.handlers[g];if(My.call(u.handlers,g)&&x)return x(u,f,h);if(u.options.passThrough&&u.options.passThrough.includes(g)){if("children"in f){const{children:v,...w}=f,C=zd(w);return C.children=u.all(f),C}return zd(f)}return(u.options.unknownHandler||N7)(u,f,h)}function m(f){const h=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=u.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=Vj(b.value)),!Array.isArray(b)&&b.type==="element")){const v=b.children[0];v&&v.type==="text"&&(v.value=Vj(v.value))}Array.isArray(b)?h.push(...b):h.push(b)}}}return h}}function b7(e,t){e.position&&(t.position=n$(e))}function w7(e,t){let r=t;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof s=="string")if(r.type==="element")r.tagName=s;else{const l="children"in r?r.children:[r];r={type:"element",tagName:s,properties:{},children:l}}r.type==="element"&&i&&Object.assign(r.properties,zd(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function N7(e,t){const r=t.data||{},s="value"in t&&!(My.call(r,"hProperties")||My.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function j7(e,t){const r=[];let s=-1;for(t&&r.push({type:"text",value:`
`});++s<e.length;)s&&r.push({type:"text",value:`
`}),r.push(e[s]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function Vj(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function Yj(e,t){const r=v7(e,t),s=r.one(e,void 0),a=l7(r),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function S7(e,t){return e&&"run"in e?async function(r,s){const a=Yj(r,{file:s,...t});await e.run(a,s)}:function(r,s){return Yj(r,{file:s,...e||t})}}function Kj(e){if(e)throw e}var sp,Qj;function k7(){if(Qj)return sp;Qj=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(m){return typeof Array.isArray=="function"?Array.isArray(m):t.call(m)==="[object Array]"},i=function(m){if(!m||t.call(m)!=="[object Object]")return!1;var f=e.call(m,"constructor"),h=m.constructor&&m.constructor.prototype&&e.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!f&&!h)return!1;var g;for(g in m);return typeof g>"u"||e.call(m,g)},l=function(m,f){r&&f.name==="__proto__"?r(m,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):m[f.name]=f.newValue},u=function(m,f){if(f==="__proto__")if(e.call(m,f)){if(s)return s(m,f).value}else return;return m[f]};return sp=function d(){var m,f,h,g,x,b,v=arguments[0],w=1,C=arguments.length,j=!1;for(typeof v=="boolean"&&(j=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<C;++w)if(m=arguments[w],m!=null)for(f in m)h=u(v,f),g=u(m,f),v!==g&&(j&&g&&(i(g)||(x=a(g)))?(x?(x=!1,b=h&&a(h)?h:[]):b=h&&i(h)?h:{},l(v,{name:f,newValue:d(j,b,g)})):typeof g<"u"&&l(v,{name:f,newValue:g}));return v},sp}var C7=k7();const ap=qr(C7);function Oy(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _7(){const e=[],t={run:r,use:s};return t;function r(...a){let i=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...a);function u(d,...m){const f=e[++i];let h=-1;if(d){l(d);return}for(;++h<a.length;)(m[h]===null||m[h]===void 0)&&(m[h]=a[h]);a=m,f?E7(f,u)(...m):l(null,...m)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function E7(e,t){let r;return s;function s(...l){const u=e.length>l.length;let d;u&&l.push(a);try{d=e.apply(this,l)}catch(m){const f=m;if(u&&r)throw f;return a(f)}u||(d&&d.then&&typeof d.then=="function"?d.then(i,a):d instanceof Error?a(d):i(d))}function a(l,...u){r||(r=!0,t(l,...u))}function i(l){a(null,l)}}const Cs={basename:D7,dirname:A7,extname:T7,join:P7,sep:"/"};function D7(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ec(e);let r=0,s=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let l=-1,u=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else l<0&&(i=!0,l=a+1),u>-1&&(e.codePointAt(a)===t.codePointAt(u--)?u<0&&(s=a):(u=-1,s=l));return r===s?s=l:s<0&&(s=e.length),e.slice(r,s)}function A7(e){if(Ec(e),e.length===0)return".";let t=-1,r=e.length,s;for(;--r;)if(e.codePointAt(r)===47){if(s){t=r;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function T7(e){Ec(e);let t=e.length,r=-1,s=0,a=-1,i=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){s=t+1;break}continue}r<0&&(l=!0,r=t+1),u===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===s+1?"":e.slice(a,r)}function P7(...e){let t=-1,r;for(;++t<e.length;)Ec(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":R7(r)}function R7(e){Ec(e);const t=e.codePointAt(0)===47;let r=I7(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function I7(e,t){let r="",s=0,a=-1,i=0,l=-1,u,d;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(a===l-1||i===1))if(a!==l-1&&i===2){if(r.length<2||s!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",s=0):(r=r.slice(0,d),s=r.length-1-r.lastIndexOf("/")),a=l,i=0;continue}}else if(r.length>0){r="",s=0,a=l,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),s=l-a-1;a=l,i=0}else u===46&&i>-1?i++:i=-1}return r}function Ec(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const M7={cwd:O7};function O7(){return"/"}function Ly(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function L7(e){if(typeof e=="string")e=new URL(e);else if(!Ly(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return $7(e)}function $7(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const s=t.codePointAt(r+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const ip=["history","path","basename","stem","extname","dirname"];class bD{constructor(t){let r;t?Ly(t)?r={path:t}:typeof t=="string"||F7(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":M7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<ip.length;){const i=ip[s];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)ip.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Cs.basename(this.path):void 0}set basename(t){lp(t,"basename"),op(t,"basename"),this.path=Cs.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Cs.dirname(this.path):void 0}set dirname(t){Xj(this.basename,"dirname"),this.path=Cs.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Cs.extname(this.path):void 0}set extname(t){if(op(t,"extname"),Xj(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Cs.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ly(t)&&(t=L7(t)),lp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Cs.basename(this.path,this.extname):void 0}set stem(t){lp(t,"stem"),op(t,"stem"),this.path=Cs.join(this.dirname||"",t+(this.extname||""))}fail(t,r,s){const a=this.message(t,r,s);throw a.fatal=!0,a}info(t,r,s){const a=this.message(t,r,s);return a.fatal=void 0,a}message(t,r,s){const a=new Zr(t,r,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function op(e,t){if(e&&e.includes(Cs.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Cs.sep+"`")}function lp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Xj(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function F7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const B7=function(e){const s=this.constructor.prototype,a=s[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,s),i},z7={}.hasOwnProperty;class Wv extends B7{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_7()}copy(){const t=new Wv;let r=-1;for(;++r<this.attachers.length;){const s=this.attachers[r];t.use(...s)}return t.data(ap(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(dp("data",this.frozen),this.namespace[t]=r,this):z7.call(this.namespace,t)&&this.namespace[t]||void 0:t?(dp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=r.call(t,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=td(t),s=this.parser||this.Parser;return cp("parse",s),s(String(r),r)}process(t,r){const s=this;return this.freeze(),cp("process",this.parser||this.Parser),up("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,l){const u=td(t),d=s.parse(u);s.run(d,u,function(f,h,g){if(f||!h||!g)return m(f);const x=h,b=s.stringify(x,g);U7(b)?g.value=b:g.result=b,m(f,g)});function m(f,h){f||!h?l(f):i?i(h):r(void 0,h)}}}processSync(t){let r=!1,s;return this.freeze(),cp("processSync",this.parser||this.Parser),up("processSync",this.compiler||this.Compiler),this.process(t,a),Zj("processSync","process",r),s;function a(i,l){r=!0,Kj(i),s=l}}run(t,r,s){Jj(t),this.freeze();const a=this.transformers;return!s&&typeof r=="function"&&(s=r,r=void 0),s?i(void 0,s):new Promise(i);function i(l,u){const d=td(r);a.run(t,d,m);function m(f,h,g){const x=h||t;f?u(f):l?l(x):s(void 0,x,g)}}}runSync(t,r){let s=!1,a;return this.run(t,r,i),Zj("runSync","run",s),a;function i(l,u){Kj(l),a=u,s=!0}}stringify(t,r){this.freeze();const s=td(r),a=this.compiler||this.Compiler;return up("stringify",a),Jj(t),a(t,s)}use(t,...r){const s=this.attachers,a=this.namespace;if(dp("use",this.frozen),t!=null)if(typeof t=="function")d(t,r);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(m){if(typeof m=="function")d(m,[]);else if(typeof m=="object")if(Array.isArray(m)){const[f,...h]=m;d(f,h)}else l(m);else throw new TypeError("Expected usable value, not `"+m+"`")}function l(m){if(!("plugins"in m)&&!("settings"in m))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(m.plugins),m.settings&&(a.settings=ap(!0,a.settings,m.settings))}function u(m){let f=-1;if(m!=null)if(Array.isArray(m))for(;++f<m.length;){const h=m[f];i(h)}else throw new TypeError("Expected a list of plugins, not `"+m+"`")}function d(m,f){let h=-1,g=-1;for(;++h<s.length;)if(s[h][0]===m){g=h;break}if(g===-1)s.push([m,...f]);else if(f.length>0){let[x,...b]=f;const v=s[g][1];Oy(v)&&Oy(x)&&(x=ap(!0,v,x)),s[g]=[m,x,...b]}}}}const G7=new Wv().freeze();function cp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function up(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function dp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Jj(e){if(!Oy(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Zj(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function td(e){return q7(e)?e:new bD(e)}function q7(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function U7(e){return typeof e=="string"||W7(e)}function W7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const H7="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",e2=[],t2={allowDangerousHtml:!0},V7=/^(https?|ircs?|mailto|xmpp)$/i,Y7=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ho(e){const t=K7(e),r=Q7(e);return X7(t.runSync(t.parse(r),r),e)}function K7(e){const t=e.rehypePlugins||e2,r=e.remarkPlugins||e2,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...t2}:t2;return G7().use(D8).use(r).use(S7,s).use(t)}function Q7(e){const t=e.children||"",r=new bD;return typeof t=="string"&&(r.value=t),r}function X7(e,t){const r=t.allowedElements,s=t.allowElement,a=t.components,i=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||J7;for(const f of Y7)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+H7+f.id,void 0);return vD(e,m),l$(e,{Fragment:n.Fragment,components:a,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function m(f,h,g){if(f.type==="raw"&&g&&typeof h=="number")return l?g.children.splice(h,1):g.children[h]={type:"text",value:f.value},h;if(f.type==="element"){let x;for(x in tp)if(Object.hasOwn(tp,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],v=tp[x];(v===null||v.includes(f.tagName))&&(f.properties[x]=d(String(b||""),x,f))}}if(f.type==="element"){let x=r?!r.includes(f.tagName):i?i.includes(f.tagName):!1;if(!x&&s&&typeof h=="number"&&(x=!s(f,h,g)),x&&g&&typeof h=="number")return u&&f.children?g.children.splice(h,1,...f.children):g.children.splice(h,1),h}}}function J7(e){const t=e.indexOf(":"),r=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||s!==-1&&t>s||V7.test(e.slice(0,t))?e:""}const Z7=({pageId:e})=>{const{getPage:t}=ki(),[r,s]=N.useState(null),[a,i]=N.useState(!1),[l,u]=N.useState(null);return N.useEffect(()=>{i(!0),t(e).then(s).catch(d=>u("Failed to load page")).finally(()=>i(!1))},[e]),a?n.jsx("div",{className:"text-gray-400",children:"Loading page..."}):l?n.jsx("div",{className:"text-red-500",children:l}):r?n.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[n.jsx("h4",{className:"text-md font-bold mb-2",children:r.title}),n.jsx("div",{className:"prose max-w-none mb-2",children:n.jsx(ho,{children:r.content})}),r.attachments&&r.attachments.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:"Attachments:"}),n.jsx("ul",{className:"list-disc ml-5",children:r.attachments.map((d,m)=>n.jsx("li",{children:n.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:d.split("/").pop()})},m))})]})]}):null},Hv=({modules:e,courseId:t,onSuccess:r,onCancel:s})=>{const[a,i]=N.useState(""),[l,u]=N.useState(""),[d,m]=N.useState(!1),[f,h]=N.useState(""),[g,x]=N.useState([]),[b,v]=N.useState(""),{createPage:w}=ki();N.useEffect(()=>{t&&(async()=>{try{const k=await Re.get(`/groups/sets/${t}`);x(k.data||[])}catch{x([])}})()},[t]);const C=async _=>{if(_.preventDefault(),!!a.trim()&&!(!f&&!b)){m(!0);try{const k={title:a,content:l};f&&(k.module=f),b&&(k.groupSet=b),await w(k),i(""),u(""),h(""),v(""),r()}catch(k){console.error("Error creating page:",k)}finally{m(!1)}}},j=()=>{i(""),u(""),h(""),v(""),s()};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-8 relative",children:[n.jsx("button",{type:"button",onClick:j,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold focus:outline-none","aria-label":"Close",children:"×"}),n.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Create New Page"}),n.jsxs("form",{onSubmit:C,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Title"}),n.jsx("input",{type:"text",id:"title",value:a,onChange:_=>i(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),n.jsx("textarea",{id:"content",value:l,onChange:_=>u(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:5})]}),n.jsxs("div",{className:"mb-6 flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),n.jsxs("select",{id:"page-module",name:"module",value:f,onChange:_=>{h(_.target.value),_.target.value&&v("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!!b,children:[n.jsx("option",{value:"",children:"Select a module"}),e.map(_=>n.jsx("option",{value:_._id,children:_.title},_._id))]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Set"}),n.jsxs("select",{id:"page-group-set",name:"groupSet",value:b,onChange:_=>{v(_.target.value),_.target.value&&h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!!f,children:[n.jsx("option",{value:"",children:"Select a group set"}),g.map(_=>n.jsx("option",{value:_._id,children:_.name},_._id))]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:d||!f&&!b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Creating...":"Create Page"})]})]})]})})},Ae="http://localhost:5000",eB=()=>n.jsx("svg",{className:"h-5 w-5 text-blue-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M7 8h10M7 12h6m-6 4h8M5 20l1.5-4.5M19 20l-1.5-4.5M12 4a8 8 0 100 16 8 8 0 000-16z",strokeLinecap:"round",strokeLinejoin:"round"})}),tB=({module:e,onAddPage:t})=>{const[r,s]=N.useState(!1),[a,i]=N.useState(null),[l,u]=N.useState([]),[d,m]=N.useState(!1),[f,h]=N.useState(null),{user:g}=Tt(),{getPages:x,deleteModule:b,toggleModulePublish:v}=ki(),w=Lt(),[C,j]=N.useState(!1),[_,k]=N.useState([]),[D,A]=N.useState(!1),[T,I]=N.useState(null),[L,q]=N.useState(!1),[O,$]=N.useState(null),[z,K]=N.useState({}),[te,se]=N.useState([]),[W,M]=N.useState(!1),[Y,P]=N.useState(null);N.useEffect(()=>{(async()=>{if(r){console.log("Fetching pages for module:",e._id),m(!0),h(null);try{const ne=await x(e._id);console.log("Fetched pages:",ne),u(ne)}catch(ne){console.error("Error fetching pages:",ne),h("Failed to load pages")}finally{m(!1)}}})()},[r,e._id,x]),N.useEffect(()=>{(async()=>{if(r){A(!0),I(null);try{const ne=localStorage.getItem("token"),pe=await we.get(`${Ae}/api/assignments/module/${e._id}`,{headers:{Authorization:`Bearer ${ne}`}});k(pe.data)}catch(ne){console.error("Assignments fetch error:",ne),I("Failed to load assignments")}finally{A(!1)}}})()},[r,e._id]),N.useEffect(()=>{(async()=>{if(r){M(!0),P(null);try{const ne=localStorage.getItem("token"),pe=await we.get(`${Ae}/api/threads/module/${e._id}`,{headers:{Authorization:`Bearer ${ne}`}});se(pe.data||[])}catch(ne){console.error("Discussions fetch error:",ne),P("Failed to load discussions")}finally{M(!1)}}})()},[r,e._id]);const G=()=>{s(!r)},Z=(U,ne)=>{U.stopPropagation(),w(`/pages/${ne}`)},F=U=>{U.stopPropagation(),j(!0),r||s(!0)},Ne=async()=>{j(!1),await x(e._id)},ye=async U=>{U.stopPropagation(),q(!0);try{await v(e._id)}catch(ne){console.error("Error toggling publish:",ne)}finally{q(!1)}},B=async U=>{$(U._id);try{const ne=localStorage.getItem("token"),pe=await we.patch(`${Ae}/api/assignments/${U._id}/publish`,{},{headers:{Authorization:`Bearer ${ne}`}});K(xe=>({...xe,[U._id]:pe.data.published}))}catch(ne){console.error("Error toggling assignment publish:",ne)}finally{$(null)}},re=async U=>{if(window.confirm("Are you sure you want to delete this page?"))try{const ne=localStorage.getItem("token");await we.delete(`${Ae}/api/pages/${U}`,{headers:{Authorization:`Bearer ${ne}`}}),u(l.filter(pe=>pe._id!==U))}catch{alert("Error deleting page")}},X=async U=>{if(window.confirm("Are you sure you want to delete this assignment?"))try{const ne=localStorage.getItem("token");await we.delete(`${Ae}/api/assignments/${U}`,{headers:{Authorization:`Bearer ${ne}`}}),k(_.filter(pe=>pe._id!==U))}catch{alert("Error deleting assignment")}};return n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[n.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between",onClick:G,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[r?n.jsx(_v,{className:"h-5 w-5"}):n.jsx(fO,{className:"h-5 w-5"}),n.jsx("h3",{className:"text-lg font-medium",children:e.title})]}),n.jsx("div",{className:"flex items-center gap-2",children:((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ye,className:`p-1 rounded ${e.published?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:e.published?"Unpublish Module (lock)":"Publish Module (unlock)",disabled:L,children:e.published?n.jsx(Kl,{className:"h-5 w-5"}):n.jsx(mo,{className:"h-5 w-5"})}),n.jsx("button",{onClick:F,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",children:n.jsx(ii,{className:"h-5 w-5"})}),n.jsx("button",{onClick:U=>{U.stopPropagation(),w(`/modules/${e._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Module",children:n.jsx(Xh,{className:"h-5 w-5"})}),n.jsx("button",{onClick:U=>{U.stopPropagation(),window.confirm("Are you sure you want to delete this module? This will remove all its pages and assignments.")&&b(e._id,e.course)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Module",children:n.jsx(As,{className:"h-5 w-5"})})]})})]}),r&&n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[C&&n.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:n.jsx(Hv,{modules:[e],courseId:e.course,onSuccess:Ne,onCancel:()=>j(!1)})}),d?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading pages..."}):f?n.jsx("div",{className:"p-4 text-center text-red-500",children:f}):l.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"No pages available"}):n.jsxs("div",{className:"divide-y",children:[l.map(U=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 flex justify-between items-center group",onClick:ne=>Z(ne,U._id),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ln,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500"}),n.jsx("span",{className:U._id===a?"text-blue-600 font-semibold":"text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:U.title})]}),((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ne=>{ne.stopPropagation(),w(`/pages/${U._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Page",children:n.jsx(Xh,{className:"h-4 w-4"})}),n.jsx("button",{onClick:ne=>{ne.stopPropagation(),re(U._id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Page",children:n.jsx(As,{className:"h-4 w-4"})})]})]},U._id)),D?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading assignments..."}):T?n.jsx("div",{className:"p-4 text-center text-red-500",children:T}):_.length===0?null:(console.log("Assignments for module",e.title,_),_.map(U=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 flex justify-between items-center group",onClick:ne=>{ne.stopPropagation(),w(`/assignments/${U._id}/view`)},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Aa,{className:"h-5 w-5 text-green-400 group-hover:text-green-600"}),n.jsx("span",{className:"group-hover:text-green-600",children:U.title}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(",U.questions?U.questions.reduce((ne,pe)=>ne+(pe.points||0),0):0," pts)"]})]}),((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ne=>{ne.stopPropagation(),B(U)},className:`p-1 rounded ${z[U._id]??U.published?"text-green-600 hover:bg-green-100":"text-gray-500 hover:bg-gray-100"}`,title:z[U._id]??U.published?"Unpublish Assignment (lock)":"Publish Assignment (unlock)",disabled:O===U._id,children:z[U._id]??U.published?n.jsx(Kl,{className:"h-5 w-5"}):n.jsx(mo,{className:"h-5 w-5"})}),n.jsx("button",{onClick:ne=>{ne.stopPropagation(),w(`/assignments/${U._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Assignment",children:n.jsx(Xh,{className:"h-4 w-4"})}),n.jsx("button",{onClick:ne=>{ne.stopPropagation(),X(U._id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Assignment",children:n.jsx(As,{className:"h-4 w-4"})})]})]},U._id))),W?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading discussions..."}):Y?n.jsx("div",{className:"p-4 text-center text-red-500",children:Y}):te.length===0?null:te.map(U=>n.jsx("div",{className:"p-4 hover:bg-gray-50 flex justify-between items-center group",onClick:ne=>{ne.stopPropagation(),w(`/courses/${U.course}/threads/${U._id}`)},children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(eB,{}),n.jsx("span",{className:"group-hover:text-blue-600",children:U.title}),U.totalPoints?n.jsxs("span",{className:"text-xs text-gray-500",children:["(",U.totalPoints," pts)"]}):null]})},U._id))]})]}),a&&n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:n.jsx(Z7,{pageId:a})})]})},rB=({courseId:e,onSuccess:t,onCancel:r})=>{const[s,a]=N.useState(""),[i,l]=N.useState(""),[u,d]=N.useState(!1),{createModule:m}=ki(),f=async g=>{if(g.preventDefault(),!!s.trim()){d(!0);try{await m(e,{title:s,description:i}),a(""),l(""),t()}catch(x){console.error("Error creating module:",x)}finally{d(!1)}}},h=()=>{a(""),l(""),r()};return n.jsxs("form",{onSubmit:f,className:"bg-white p-4 rounded-lg shadow mb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Module Title"}),n.jsx("input",{type:"text",id:"title",value:s,onChange:g=>a(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",value:i,onChange:g=>l(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Creating...":"Create Module"})]})]})},nB=({courseId:e})=>{const{modules:t,loading:r,error:s,getModules:a}=ki(),{user:i}=Tt(),[l,u]=N.useState(!1),d=N.useRef(a);N.useEffect(()=>{d.current=a},[a]),N.useEffect(()=>{e&&d.current(e).catch(f=>{console.error("Error in ModuleList useEffect:",f)})},[e]);const m=async()=>{u(!1),e&&await d.current(e)};return r?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):s?n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:s})]}):n.jsxs("div",{children:[((i==null?void 0:i.role)==="teacher"||(i==null?void 0:i.role)==="admin")&&n.jsx("div",{className:"mb-6",children:l?n.jsx(rB,{courseId:e,onSuccess:m,onCancel:()=>u(!1)}):n.jsx("button",{onClick:()=>u(!0),className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors",children:"+ Add Module"})}),t.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("p",{children:"No modules available for this course."}),n.jsx("p",{className:"text-sm mt-2",children:"Modules will appear here once they are created."})]}):n.jsx("div",{className:"space-y-4",children:t.map(f=>n.jsx(tB,{module:f,onAddPage:()=>{}},f._id))})]})};function Vv(e,t,r,s){const a=t.groups||[],i=new Date,l=new Set;a.forEach(w=>{r.filter(j=>j.group===w.name).forEach(j=>l.add(j._id))}),a.reduce((w,C)=>w+Number(C.weight),0);const u=[],d=[];a.forEach(w=>{const C=r.filter(D=>D.group===w.name);let j=!1,_=0,k=0;if(C.forEach(D=>{var L,q;const A=(L=s[e])==null?void 0:L[D._id],T=((q=D.questions)==null?void 0:q.reduce((O,$)=>O+($.points||0),0))||D.totalPoints||0,I=D.dueDate?new Date(D.dueDate):null;!D.isDiscussion&&!D.published||(I&&i>I&&(A==null||A==="-")?(_+=0,k+=T):typeof A=="number"?(_+=A,k+=T,j=!0):I&&i>I&&(_+=0,k+=T))}),j&&k>0){const D=_/k*100;u.push({...w,originalWeight:w.weight,earned:_,possible:k,percent:D})}else d.push(w)});const m=r.filter(w=>!l.has(w._id));let f=!1,h=0,g=0;m.length>0&&m.forEach(w=>{var k,D;const C=(k=s[e])==null?void 0:k[w._id],j=((D=w.questions)==null?void 0:D.reduce((A,T)=>A+(T.points||0),0))||w.totalPoints||0,_=w.dueDate?new Date(w.dueDate):null;!w.isDiscussion&&!w.published||(_&&i>_&&(C==null||C==="-")?(h+=0,g+=j):typeof C=="number"?(h+=C,g+=j,f=!0):_&&i>_&&(h+=0,g+=j))});const x=d.reduce((w,C)=>w+Number(C.weight),0);if(u.length===0&&!f)return 0;let b=0,v=0;if(u.length>0){const w=u.reduce((C,j)=>C+j.originalWeight,0);u.forEach(C=>{const j=C.originalWeight/w,_=x*j,k=C.originalWeight+_;v+=C.percent*k,b+=k})}if(f&&g>0){const w=h/g*100,C=100-b;C>0&&(v+=w*C,b+=C)}return b===0?0:v/b}function wD(e,t){const s=[...t&&t.length>0?t:[{letter:"A",min:90,max:100},{letter:"B",min:80,max:89},{letter:"C",min:70,max:79},{letter:"D",min:60,max:69},{letter:"F",min:0,max:59}]].sort((a,i)=>i.min-a.min);for(const a of s)if(e>=a.min)return a.letter;return"F"}const sB=({course:e,assignments:t,currentGrades:r,studentId:s,onSaveWhatIf:a,onClose:i})=>{const[l,u]=N.useState({});N.useEffect(()=>{const x={...r[s]||{}};u(x)},[r,s]);const d=x=>{const b={[s]:x};return Vv(s,e,t,b)},m=x=>{const v=(e.gradeScale||[{letter:"A",min:94,max:100},{letter:"A-",min:90,max:93},{letter:"B+",min:87,max:89},{letter:"B",min:84,max:86},{letter:"B-",min:80,max:83},{letter:"C+",min:77,max:79},{letter:"C",min:74,max:76},{letter:"D",min:64,max:73},{letter:"F",min:0,max:63}]).find(w=>x>=w.min&&x<=w.max);return v?v.letter:"F"},f=(x,b)=>{const v=b===""?0:parseFloat(b);isNaN(v)||u(w=>({...w,[x]:v}))},h=d(l),g=m(h);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"What-If Scores"}),n.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Simulate different scores to see how they affect your final grade"})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[n.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"text-lg font-semibold text-blue-800",children:["Projected Grade: ",h.toFixed(2),"% [",g,"]"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full border border-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-600",children:"Assignment"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-600",children:"Group"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"Current Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"What-If Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"Max Points"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(x=>{var w,C;const b=((w=x.questions)==null?void 0:w.reduce((j,_)=>j+(_.points||0),0))||x.totalPoints||0,v=(C=r[s])==null?void 0:C[x._id];return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:x.title}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:x.group||"Ungrouped"}),n.jsx("td",{className:"px-4 py-2 text-sm text-center text-gray-600",children:typeof v=="number"?v:"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-center",children:n.jsx("input",{type:"number",id:`what-if-score-${x._id}`,name:`whatIfScore-${x._id}`,min:"0",max:b,step:"0.01",value:l[x._id]===0?"":l[x._id]??"",onFocus:j=>{l[x._id]===0&&(j.target.value="")},onChange:j=>f(x._id,j.target.value),className:"w-20 px-2 py-1 border rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})}),n.jsx("td",{className:"px-4 py-2 text-sm text-center text-gray-600",children:b})]},x._id)})})]})})]}),n.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-3",children:n.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},aB=({course:e,studentId:t,grades:r,assignments:s,submissionMap:a,studentSubmissions:i,backendTotalGrade:l,backendLetterGrade:u})=>{const[d,m]=N.useState(!1),f=l!==null?l:Vv(t,e,s,r),h=u||wD(f||0,e==null?void 0:e.gradeScale);return n.jsxs("div",{className:"w-full md:w-64 flex-shrink-0",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-4 mb-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"text-lg font-bold mb-3 text-gray-900 dark:text-gray-100",children:["Total: ",(f||0).toFixed(2),"% [",h,"]"]}),n.jsx("div",{className:"space-y-2",children:n.jsx("button",{onClick:()=>m(!0),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-150 text-sm font-medium",children:"What-If Scores"})}),e.groups&&e.groups.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"font-semibold mb-2 text-xs text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Assignment Weighting"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-3",children:n.jsxs("table",{className:"min-w-full text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"px-1 py-1 text-left font-medium text-gray-700 dark:text-gray-300",children:"Group"}),n.jsx("th",{className:"px-1 py-1 text-right font-medium text-gray-700 dark:text-gray-300",children:"Weight"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(e.groups||[]).map((g,x)=>n.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150",children:[n.jsx("td",{className:"px-1 py-1 text-left text-gray-600 dark:text-gray-400",children:g.name}),n.jsxs("td",{className:"px-1 py-1 text-right font-semibold text-gray-900 dark:text-gray-100",children:[g.weight,"%"]})]},x)),n.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 font-bold",children:[n.jsx("td",{className:"px-1 py-1 text-left text-gray-900 dark:text-gray-100",children:"Total"}),n.jsxs("td",{className:"px-1 py-1 text-right text-gray-900 dark:text-gray-100",children:[(e.groups||[]).reduce((g,x)=>g+Number(x.weight),0),"%"]})]})]})]})})]})]}),d&&n.jsx(sB,{course:e,assignments:s,currentGrades:r,studentId:t,onSaveWhatIf:g=>{console.log("Saving what-if scores:",g)},onClose:()=>m(!1)})]})};var fp={exports:{}},mp,r2;function iB(){if(r2)return mp;r2=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mp=e,mp}var hp,n2;function oB(){if(n2)return hp;n2=1;var e=iB();function t(){}function r(){}return r.resetWarningCache=t,hp=function(){function s(l,u,d,m,f,h){if(h!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},hp}var s2;function lB(){return s2||(s2=1,fp.exports=oB()()),fp.exports}var je=lB();const Oe=qr(je);var $y=function(){return $y=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$y.apply(this,arguments)},ND={onActivate:je.func,onAddUndo:je.func,onBeforeAddUndo:je.func,onBeforeExecCommand:je.func,onBeforeGetContent:je.func,onBeforeRenderUI:je.func,onBeforeSetContent:je.func,onBeforePaste:je.func,onBlur:je.func,onChange:je.func,onClearUndos:je.func,onClick:je.func,onContextMenu:je.func,onCommentChange:je.func,onCompositionEnd:je.func,onCompositionStart:je.func,onCompositionUpdate:je.func,onCopy:je.func,onCut:je.func,onDblclick:je.func,onDeactivate:je.func,onDirty:je.func,onDrag:je.func,onDragDrop:je.func,onDragEnd:je.func,onDragGesture:je.func,onDragOver:je.func,onDrop:je.func,onExecCommand:je.func,onFocus:je.func,onFocusIn:je.func,onFocusOut:je.func,onGetContent:je.func,onHide:je.func,onInit:je.func,onInput:je.func,onKeyDown:je.func,onKeyPress:je.func,onKeyUp:je.func,onLoadContent:je.func,onMouseDown:je.func,onMouseEnter:je.func,onMouseLeave:je.func,onMouseMove:je.func,onMouseOut:je.func,onMouseOver:je.func,onMouseUp:je.func,onNodeChange:je.func,onObjectResizeStart:je.func,onObjectResized:je.func,onObjectSelected:je.func,onPaste:je.func,onPostProcess:je.func,onPostRender:je.func,onPreProcess:je.func,onProgressState:je.func,onRedo:je.func,onRemove:je.func,onReset:je.func,onSaveContent:je.func,onSelectionChange:je.func,onSetAttrib:je.func,onSetContent:je.func,onShow:je.func,onSubmit:je.func,onUndo:je.func,onVisualAid:je.func,onSkinLoadError:je.func,onThemeLoadError:je.func,onModelLoadError:je.func,onPluginLoadError:je.func,onIconsLoadError:je.func,onLanguageLoadError:je.func,onScriptsLoad:je.func,onScriptsLoadError:je.func},cB=$y({apiKey:je.string,licenseKey:je.string,id:je.string,inline:je.bool,init:je.object,initialValue:je.string,onEditorChange:je.func,value:je.string,tagName:je.string,tabIndex:je.number,cloudChannel:je.string,plugins:je.oneOfType([je.string,je.array]),toolbar:je.oneOfType([je.string,je.array]),disabled:je.bool,readonly:je.bool,textareaName:je.string,tinymceScriptSrc:je.oneOfType([je.string,je.arrayOf(je.string),je.arrayOf(je.shape({src:je.string,async:je.bool,defer:je.bool}))]),rollback:je.oneOfType([je.number,je.oneOf([!1])]),scriptLoading:je.shape({async:je.bool,defer:je.bool,delay:je.number})},ND),jD=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},pp=function(e){return typeof e=="function"},a2=function(e){return e in ND},i2=function(e){return e.substr(2)},uB=function(e,t,r,s,a,i,l){var u=Object.keys(a).filter(a2),d=Object.keys(i).filter(a2),m=u.filter(function(h){return i[h]===void 0}),f=d.filter(function(h){return a[h]===void 0});m.forEach(function(h){var g=i2(h),x=l[g];r(g,x),delete l[g]}),f.forEach(function(h){var g=s(e,h),x=i2(h);l[x]=g,t(x,g)})},dB=function(e,t,r,s,a){return uB(a,e.on.bind(e),e.off.bind(e),function(i,l){return function(u){var d;return(d=i(l))===null||d===void 0?void 0:d(u,e)}},t,r,s)},o2=0,SD=function(e){var t=Date.now(),r=Math.floor(Math.random()*1e9);return o2++,e+"_"+r+o2+String(t)},l2=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},c2=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},fB=function(e,t){return c2(e).concat(c2(t))},mB=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},hB=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,r=e.parentNode;r!=null;)t=r,r=t.parentNode;return t===e.ownerDocument}return e.isConnected},u2=function(e,t){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(t):e.setMode(t))},pB=function(e){var t=jD(e);if(!t)throw new Error("tinymce should have been loaded into global scope");return t},d2=function(e){return e.options&&e.options.isRegistered("disabled")},Fy=function(){return Fy=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fy.apply(this,arguments)},gB=function(e,t,r){var s,a,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t.id,i.src=t.src,i.async=(s=t.async)!==null&&s!==void 0?s:!1,i.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var l=function(){i.removeEventListener("load",l),i.removeEventListener("error",u),r(t.src)},u=function(d){i.removeEventListener("load",l),i.removeEventListener("error",u),r(t.src,d)};i.addEventListener("load",l),i.addEventListener("error",u),e.head&&e.head.appendChild(i)},xB=function(e){var t={},r=function(l,u){var d=t[l];d.done=!0,d.error=u;for(var m=0,f=d.handlers;m<f.length;m++){var h=f[m];h(l,u)}d.handlers=[]},s=function(l,u,d){var m=function(j){return d!==void 0?d(j):console.error(j)};if(l.length===0){m(new Error("At least one script must be provided"));return}for(var f=0,h=!1,g=function(j,_){h||(_?(h=!0,m(_)):++f===l.length&&u())},x=0,b=l;x<b.length;x++){var v=b[x],w=t[v.src];if(w)w.done?g(v.src,w.error):w.handlers.push(g);else{var C=SD("tiny-");t[v.src]={id:C,src:v.src,done:!1,error:null,handlers:[g]},gB(e,Fy({id:C},v),r)}}},a=function(){for(var l,u=0,d=Object.values(t);u<d.length;u++){var m=d[u],f=e.getElementById(m.id);f!=null&&f.tagName==="SCRIPT"&&((l=f.parentNode)===null||l===void 0||l.removeChild(f))}t={}},i=function(){return e};return{loadScripts:s,deleteScripts:a,getDocument:i}},yB=function(){var e=[],t=function(a){var i=e.find(function(l){return l.getDocument()===a});return i===void 0&&(i=xB(a),e.push(i)),i},r=function(a,i,l,u,d){var m=function(){return t(a).loadScripts(i,u,d)};l>0?setTimeout(m,l):m()},s=function(){for(var a=e.pop();a!=null;a=e.pop())a.deleteScripts()};return{loadList:r,reinitialize:s}},vB=yB(),bB=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),ao=function(){return ao=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ao.apply(this,arguments)},gp="change keyup compositionend setcontent CommentChange",wB=function(e){bB(t,e);function t(r){var s,a,i,l=e.call(this,r)||this;return l.rollbackTimer=void 0,l.valueCursor=void 0,l.rollbackChange=function(){var u=l.editor,d=l.props.value;u&&d&&d!==l.currentContent&&u.undoManager.ignore(function(){if(u.setContent(d),l.valueCursor&&(!l.inline||u.hasFocus()))try{u.selection.moveToBookmark(l.valueCursor)}catch{}}),l.rollbackTimer=void 0},l.handleBeforeInput=function(u){if(l.props.value!==void 0&&l.props.value===l.currentContent&&l.editor&&(!l.inline||l.editor.hasFocus()))try{l.valueCursor=l.editor.selection.getBookmark(3)}catch{}},l.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&l.handleBeforeInput(u)},l.handleEditorChange=function(u){var d=l.editor;if(d&&d.initialized){var m=d.getContent();l.props.value!==void 0&&l.props.value!==m&&l.props.rollback!==!1&&(l.rollbackTimer||(l.rollbackTimer=window.setTimeout(l.rollbackChange,typeof l.props.rollback=="number"?l.props.rollback:200))),m!==l.currentContent&&(l.currentContent=m,pp(l.props.onEditorChange)&&l.props.onEditorChange(m,d))}},l.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&l.handleEditorChange(u)},l.initialise=function(u){var d,m,f;u===void 0&&(u=0);var h=l.elementRef.current;if(h){if(!hB(h)){if(u===0)setTimeout(function(){return l.initialise(1)},1);else if(u<100)setTimeout(function(){return l.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var g=pB(l.view),x=ao(ao(ao(ao({},l.props.init),{selector:void 0,target:h,disabled:l.props.disabled,readonly:l.props.readonly,inline:l.inline,plugins:fB((d=l.props.init)===null||d===void 0?void 0:d.plugins,l.props.plugins),toolbar:(m=l.props.toolbar)!==null&&m!==void 0?m:(f=l.props.init)===null||f===void 0?void 0:f.toolbar}),l.props.licenseKey?{license_key:l.props.licenseKey}:{}),{setup:function(b){l.editor=b,l.bindHandlers({}),l.inline&&!l2(h)&&b.once("PostRender",function(v){b.setContent(l.getInitialValue(),{no_events:!0})}),l.props.init&&pp(l.props.init.setup)&&l.props.init.setup(b),l.props.disabled&&(d2(l.editor)?l.editor.options.set("disabled",l.props.disabled):l.editor.mode.set("readonly"))},init_instance_callback:function(b){var v,w=l.getInitialValue();l.currentContent=(v=l.currentContent)!==null&&v!==void 0?v:b.getContent(),l.currentContent!==w&&(l.currentContent=w,b.setContent(w),b.undoManager.clear(),b.undoManager.add(),b.setDirty(!1)),l.props.init&&pp(l.props.init.init_instance_callback)&&l.props.init.init_instance_callback(b)}});l.inline||(h.style.visibility=""),l2(h)&&(h.value=l.getInitialValue()),g.init(x)}},l.id=l.props.id||SD("tiny-react"),l.elementRef=N.createRef(),l.inline=(i=(s=l.props.inline)!==null&&s!==void 0?s:(a=l.props.init)===null||a===void 0?void 0:a.inline)!==null&&i!==void 0?i:!1,l.boundHandlers={},l}return Object.defineProperty(t.prototype,"view",{get:function(){var r,s;return(s=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&s!==void 0?s:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var s=this,a,i;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var l=this.editor;l.undoManager.transact(function(){var d;if(!s.inline||l.hasFocus())try{d=l.selection.getBookmark(3)}catch{}var m=s.valueCursor;if(l.setContent(s.props.value),!s.inline||l.hasFocus())for(var f=0,h=[d,m];f<h.length;f++){var g=h[f];if(g)try{l.selection.moveToBookmark(g),s.valueCursor=g;break}catch{}}})}if(this.props.readonly!==r.readonly){var u=(i=this.props.readonly)!==null&&i!==void 0?i:!1;u2(this.editor,u?"readonly":"design")}this.props.disabled!==r.disabled&&(d2(this.editor)?this.editor.options.set("disabled",this.props.disabled):u2(this.editor,this.props.disabled?"readonly":"design"))}},t.prototype.componentDidMount=function(){var r=this,s,a,i,l,u;if(jD(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(s=this.props).onScriptsLoadError)===null||a===void 0||a.call(s,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((i=this.elementRef.current)===null||i===void 0)&&i.ownerDocument){var d=function(){var f,h;(h=(f=r.props).onScriptsLoad)===null||h===void 0||h.call(f),r.initialise()},m=function(f){var h,g;(g=(h=r.props).onScriptsLoadError)===null||g===void 0||g.call(h,f)};vB.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(l=this.props.scriptLoading)===null||l===void 0?void 0:l.delay)!==null&&u!==void 0?u:0,d,m)}},t.prototype.componentWillUnmount=function(){var r=this,s=this.editor;s&&(s.off(gp,this.handleEditorChange),s.off(this.beforeInputEvent(),this.handleBeforeInput),s.off("keypress",this.handleEditorChangeSpecial),s.off("keydown",this.handleBeforeInputSpecial),s.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){s.off(a,r.boundHandlers[a])}),this.boundHandlers={},s.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return mB()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,s=r===void 0?"div":r;return N.createElement(s,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return N.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,s,a=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,i=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:i}]:this.props.tinymceScriptSrc.map(function(m){return typeof m=="string"?{src:m,async:a,defer:i}:m});var l=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(l,"/tinymce.min.js");return[{src:d,async:a,defer:i}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var s=this;if(this.editor!==void 0){dB(this.editor,r,this.props,this.boundHandlers,function(u){return s.props[u]});var a=function(u){return u.onEditorChange!==void 0||u.value!==void 0},i=a(r),l=a(this.props);!i&&l?(this.editor.on(gp,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):i&&!l&&(this.editor.off(gp,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=cB,t.defaultProps={cloudChannel:"7"},t}(N.Component);const fi=({content:e,onChange:t,placeholder:r,className:s})=>n.jsx(wB,{apiKey:"gm5axo7z7bcihdlgxc1cyco7y5fczucedjgtm419lvc1sk5s",value:e,onEditorChange:t,init:{height:200,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | formatselect | bold italic underline backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlist outdent indent | removeformat | help",placeholder:r||"Write something...",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},textareaName:"content",className:s}),kD=({isOpen:e,onClose:t,courseId:r,onThreadCreated:s,courseGroups:a=[],modules:i=[],defaultGroupSetId:l})=>{const{user:u}=Tt(),[d,m]=N.useState(""),[f,h]=N.useState(""),[g,x]=N.useState(!1),[b,v]=N.useState(null),[w,C]=N.useState(!1),[j,_]=N.useState(100),[k,D]=N.useState("Discussions"),[A,T]=N.useState(""),[I,L]=N.useState(""),[q,O]=N.useState([]),[$,z]=N.useState(!1),[K,te]=N.useState("");N.useEffect(()=>{l&&(z(!0),te(l))},[l]),N.useEffect(()=>{(async()=>{if(!(!r||!e))try{const M=localStorage.getItem("token"),Y=await we.get(`${Ae}/api/groups/sets/${r}`,{headers:{Authorization:`Bearer ${M}`}});O(Y.data)}catch(M){console.error("Error fetching group sets:",M)}})()},[r,e]);const se=async W=>{if(W.preventDefault(),!(!d.trim()||!f.trim())){x(!0),v(null);try{const M=localStorage.getItem("token"),Y={title:d.trim(),content:f,courseId:r,module:I||void 0,isGraded:w,totalPoints:w?j:null,group:k,dueDate:A?new Date(A).toISOString():null};$&&K&&(Y.groupSet=K);const P=await Re.post(`${Ae}/api/threads`,Y,{headers:{Authorization:`Bearer ${M}`}});P.data.success?(s(P.data.data),t(),m(""),h(""),C(!1),_(100),D("Discussions"),T(""),L(""),z(!1),te("")):v("Failed to create thread")}catch(M){console.error("Error creating thread:",M),v("Failed to create thread. Please try again.")}finally{x(!1)}}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create New Discussion Thread"}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:se,className:"p-6",children:[b&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:b}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:d,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter thread title",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),n.jsx("div",{className:"border border-gray-300 rounded-md",children:n.jsx(fi,{content:f,onChange:h,placeholder:"Write your thread content...",className:"h-64"})})]}),n.jsxs("div",{className:"mb-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGroupDiscussion",checked:$,onChange:W=>z(W.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGroupDiscussion",className:"ml-2 block text-sm text-gray-700",children:"This is a group discussion"})]}),$&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"groupSet",className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Set"}),n.jsxs("select",{id:"groupSet",value:K,onChange:W=>te(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:$,children:[n.jsx("option",{value:"",children:"Select a group set"}),q.map(W=>n.jsxs("option",{value:W._id,children:[W.name," ",W.allowSelfSignup?"(Self-signup enabled)":""]},W._id))]}),$&&!K&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a group set for the group discussion"})]})]}),n.jsxs("div",{className:"mb-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGraded",checked:w,onChange:W=>C(W.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGraded",className:"ml-2 block text-sm text-gray-700",children:"Make this a graded discussion"})]}),w&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"totalPoints",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Points"}),n.jsx("input",{type:"number",id:"totalPoints",value:j,onChange:W=>_(Math.max(0,parseInt(W.target.value)||0)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:w})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),n.jsx("input",{type:"datetime-local",id:"dueDate",value:A,onChange:W=>T(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"group",className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Group"}),n.jsxs("select",{id:"group",value:k,onChange:W=>D(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:w,children:[a.map(W=>n.jsxs("option",{value:W.name,children:[W.name," (",W.weight,"%)"]},W.name)),n.jsx("option",{value:"Discussions",children:"Discussions"})]})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"module",className:"block text-sm font-medium text-gray-700 mb-1",children:"Module (optional)"}),n.jsxs("select",{id:"module",value:I,onChange:W=>L(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"No module"}),i&&i.map(W=>n.jsx("option",{value:W._id,children:W.title},W._id))]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g||!d.trim()||!f.trim()||$&&!K,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating...":"Create Thread"})]})]})]})}):null},NB=({courseId:e,courseGroups:t=[]})=>{const r=Lt(),{user:s}=Tt(),[a,i]=N.useState([]),[l,u]=N.useState(!0),[d,m]=N.useState(null),[f,h]=N.useState(!1),[g,x]=N.useState([]),b=(s==null?void 0:s.role)==="teacher";N.useEffect(()=>{(async()=>{if(e)try{u(!0);const _=localStorage.getItem("token"),k=await Re.get(`${Ae}/api/threads/course/${e}`,{headers:{Authorization:`Bearer ${_}`}});k.data.success?i(k.data.data):m("Failed to fetch discussion threads")}catch(_){console.error("Error fetching threads:",_),m("Failed to load discussion threads")}finally{u(!1)}})()},[e]),N.useEffect(()=>{(async()=>{if(e)try{const _=localStorage.getItem("token"),k=await we.get(`${Ae}/api/modules/${e}`,{headers:{Authorization:`Bearer ${_}`}});let D=[];k.data&&Array.isArray(k.data.data)?D=k.data.data.map(A=>({...A,title:A.name})):Array.isArray(k.data)&&(D=k.data.map(A=>({...A,title:A.name}))),x(D)}catch{x([])}})()},[e]);const v=()=>{h(!0)},w=j=>{i(_=>[j,..._])},C=j=>{r(`/courses/${e}/threads/${j}`)};return l?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):d?n.jsx("div",{className:"text-red-500 text-center p-4",children:d}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Discussions"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Course discussion threads and conversations"})]}),b&&n.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Thread"]})]}),a.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No discussion threads"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:b?"Get started by creating a new discussion thread.":"There are no discussion threads yet. Teachers will create threads here."}),b&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Thread"]})})]}):n.jsxs("div",{className:"space-y-4",children:[a.filter(j=>j.isPinned).length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Pinned Threads"}),n.jsx("div",{className:"space-y-4",children:a.filter(j=>j.isPinned).map(j=>n.jsxs("div",{onClick:()=>C(j._id),className:"p-4 bg-white dark:bg-gray-900 border border-yellow-200 dark:border-yellow-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer relative",children:[n.jsx("div",{className:"absolute top-2 right-2 text-yellow-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.715-5.349L11 4.477V16h2a1 1 0 110 2H7a1 1 0 110-2h2V4.477L6.237 7.582l1.715 5.349a1 1 0 01-.285 1.05A3.989 3.989 0 015 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.616a1 1 0 01.894-1.79l1.599.8L9 4.323V3a1 1 0 011-1z"})})}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[j.title,j.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",j.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",j.author.firstName," ",j.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:j.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(j.createdAt).toLocaleString(),children:cn(new Date(j.createdAt),{addSuffix:!0})}),j.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",cn(new Date(j.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),j.replyCount," ",j.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(j.lastActivity).toLocaleString(),children:["Last activity ",cn(new Date(j.lastActivity),{addSuffix:!0})]})]})]})]},j._id))})]}),a.filter(j=>!j.isPinned).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"All Threads"}),n.jsx("div",{className:"space-y-4",children:a.filter(j=>!j.isPinned).map(j=>n.jsx("div",{onClick:()=>C(j._id),className:"p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[j.title,j.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",j.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",j.author.firstName," ",j.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:j.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(j.createdAt).toLocaleString(),children:cn(new Date(j.createdAt),{addSuffix:!0})}),j.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",cn(new Date(j.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),j.replyCount," ",j.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(j.lastActivity).toLocaleString(),children:["Last activity ",cn(new Date(j.lastActivity),{addSuffix:!0})]})]})]})},j._id))})]})]})]}),b&&n.jsx(kD,{isOpen:f,onClose:()=>h(!1),courseId:e,onThreadCreated:w,courseGroups:t,modules:g})]})};function Mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jB=typeof Symbol=="function"&&Symbol.observable||"@@observable",f2=jB,xp=()=>Math.random().toString(36).substring(7).split("").join("."),SB={INIT:`@@redux/INIT${xp()}`,REPLACE:`@@redux/REPLACE${xp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xp()}`},Gd=SB;function Yv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Kv(e,t,r){if(typeof e!="function")throw new Error(Mr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Mr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Mr(1));return r(Kv)(e,t)}let s=e,a=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((w,C)=>{l.set(C,w)}))}function f(){if(d)throw new Error(Mr(3));return a}function h(w){if(typeof w!="function")throw new Error(Mr(4));if(d)throw new Error(Mr(5));let C=!0;m();const j=u++;return l.set(j,w),function(){if(C){if(d)throw new Error(Mr(6));C=!1,m(),l.delete(j),i=null}}}function g(w){if(!Yv(w))throw new Error(Mr(7));if(typeof w.type>"u")throw new Error(Mr(8));if(typeof w.type!="string")throw new Error(Mr(17));if(d)throw new Error(Mr(9));try{d=!0,a=s(a,w)}finally{d=!1}return(i=l).forEach(j=>{j()}),w}function x(w){if(typeof w!="function")throw new Error(Mr(10));s=w,g({type:Gd.REPLACE})}function b(){const w=h;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Mr(11));function j(){const k=C;k.next&&k.next(f())}return j(),{unsubscribe:w(j)}},[f2](){return this}}}return g({type:Gd.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:x,[f2]:b}}function kB(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Gd.INIT})>"u")throw new Error(Mr(12));if(typeof r(void 0,{type:Gd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mr(13))})}function CB(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const s=Object.keys(r);let a;try{kB(r)}catch(i){a=i}return function(l={},u){if(a)throw a;let d=!1;const m={};for(let f=0;f<s.length;f++){const h=s[f],g=r[h],x=l[h],b=g(x,u);if(typeof b>"u")throw u&&u.type,new Error(Mr(14));m[h]=b,d=d||b!==x}return d=d||s.length!==Object.keys(l).length,d?m:l}}function m2(e,t){return function(...r){return t(e.apply(this,r))}}function h2(e,t){if(typeof e=="function")return m2(e,t);if(typeof e!="object"||e===null)throw new Error(Mr(16));const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=m2(a,t))}return r}function Zl(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function CD(...e){return t=>(r,s)=>{const a=t(r,s);let i=()=>{throw new Error(Mr(15))};const l={getState:a.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=Zl(...u)(a.dispatch),{...a,dispatch:i}}}function _B(e){return Yv(e)&&"type"in e&&typeof e.type=="string"}var yp={exports:{}},vp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function EB(){if(p2)return vp;p2=1;var e=lf();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return vp.useSyncExternalStoreWithSelector=function(d,m,f,h,g){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function w(D){if(!C){if(C=!0,j=D,D=h(D),g!==void 0&&b.hasValue){var A=b.value;if(g(A,D))return _=A}return _=D}if(A=_,r(j,D))return A;var T=h(D);return g!==void 0&&g(A,T)?(j=D,A):(j=D,_=T)}var C=!1,j,_,k=f===void 0?null:f;return[function(){return w(m())},k===null?void 0:function(){return w(k())}]},[m,f,h,g]);var v=s(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=v},[v]),u(v),v},vp}var g2;function DB(){return g2||(g2=1,yp.exports=EB()),yp.exports}DB();var AB=N.version.startsWith("19"),TB=Symbol.for(AB?"react.transitional.element":"react.element"),PB=Symbol.for("react.portal"),RB=Symbol.for("react.fragment"),IB=Symbol.for("react.strict_mode"),MB=Symbol.for("react.profiler"),OB=Symbol.for("react.consumer"),LB=Symbol.for("react.context"),_D=Symbol.for("react.forward_ref"),$B=Symbol.for("react.suspense"),FB=Symbol.for("react.suspense_list"),Qv=Symbol.for("react.memo"),BB=Symbol.for("react.lazy"),zB=_D,GB=Qv;function qB(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case TB:switch(e=e.type,e){case RB:case MB:case IB:case $B:case FB:return e;default:switch(e=e&&e.$$typeof,e){case LB:case _D:case BB:case Qv:return e;case OB:return e;default:return t}}case PB:return t}}}function UB(e){return qB(e)===Qv}function WB(e,t,r,s,{areStatesEqual:a,areOwnPropsEqual:i,areStatePropsEqual:l}){let u=!1,d,m,f,h,g;function x(j,_){return d=j,m=_,f=e(d,m),h=t(s,m),g=r(f,h,m),u=!0,g}function b(){return f=e(d,m),t.dependsOnOwnProps&&(h=t(s,m)),g=r(f,h,m),g}function v(){return e.dependsOnOwnProps&&(f=e(d,m)),t.dependsOnOwnProps&&(h=t(s,m)),g=r(f,h,m),g}function w(){const j=e(d,m),_=!l(j,f);return f=j,_&&(g=r(f,h,m)),g}function C(j,_){const k=!i(_,m),D=!a(j,d,_,m);return d=j,m=_,k&&D?b():k?v():D?w():g}return function(_,k){return u?C(_,k):x(_,k)}}function HB(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:s,...a}){const i=t(e,a),l=r(e,a),u=s(e,a);return WB(i,l,u,e,a)}function VB(e,t){const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=(...i)=>t(a(...i)))}return r}function By(e){return function(r){const s=e(r);function a(){return s}return a.dependsOnOwnProps=!1,a}}function x2(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function ED(e,t){return function(s,{displayName:a}){const i=function(u,d){return i.dependsOnOwnProps?i.mapToProps(u,d):i.mapToProps(u,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(u,d){i.mapToProps=e,i.dependsOnOwnProps=x2(e);let m=i(u,d);return typeof m=="function"&&(i.mapToProps=m,i.dependsOnOwnProps=x2(m),m=i(u,d)),m},i}}function Xv(e,t){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function YB(e){return e&&typeof e=="object"?By(t=>VB(e,t)):e?typeof e=="function"?ED(e):Xv(e,"mapDispatchToProps"):By(t=>({dispatch:t}))}function KB(e){return e?typeof e=="function"?ED(e):Xv(e,"mapStateToProps"):By(()=>({}))}function QB(e,t,r){return{...r,...e,...t}}function XB(e){return function(r,{displayName:s,areMergedPropsEqual:a}){let i=!1,l;return function(d,m,f){const h=e(d,m,f);return i?a(h,l)||(l=h):(i=!0,l=h),l}}}function JB(e){return e?typeof e=="function"?XB(e):Xv(e,"mergeProps"):()=>QB}function ZB(e){e()}function ez(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZB(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var y2={notify(){},get:()=>[]};function DD(e,t){let r,s=y2,a=0,i=!1;function l(v){f();const w=s.subscribe(v);let C=!1;return()=>{C||(C=!0,w(),h())}}function u(){s.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return i}function f(){a++,r||(r=t?t.addNestedSub(d):e.subscribe(d),s=ez())}function h(){a--,r&&a===0&&(r(),r=void 0,s.clear(),s=y2)}function g(){i||(i=!0,f())}function x(){i&&(i=!1,h())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>s};return b}var tz=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rz=tz(),nz=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sz=nz(),az=()=>rz||sz?N.useLayoutEffect:N.useEffect,qd=az();function v2(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function bp(e,t){if(v2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!v2(e[r[a]],t[r[a]]))return!1;return!0}var iz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},AD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cz={[zB]:lz,[GB]:AD};function b2(e){return UB(e)?AD:cz[e.$$typeof]||iz}var uz=Object.defineProperty,dz=Object.getOwnPropertyNames,w2=Object.getOwnPropertySymbols,fz=Object.getOwnPropertyDescriptor,mz=Object.getPrototypeOf,N2=Object.prototype;function zy(e,t){if(typeof t!="string"){if(N2){const i=mz(t);i&&i!==N2&&zy(e,i)}let r=dz(t);w2&&(r=r.concat(w2(t)));const s=b2(e),a=b2(t);for(let i=0;i<r.length;++i){const l=r[i];if(!oz[l]&&!(a&&a[l])&&!(s&&s[l])){const u=fz(t,l);try{uz(e,l,u)}catch{}}}}return e}var wp=Symbol.for("react-redux-context"),Np=typeof globalThis<"u"?globalThis:{};function hz(){if(!N.createContext)return{};const e=Np[wp]??(Np[wp]=new Map);let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var TD=hz(),pz=[null,null];function gz(e,t,r){qd(()=>e(...t),r)}function xz(e,t,r,s,a,i){e.current=s,r.current=!1,a.current&&(a.current=null,i())}function yz(e,t,r,s,a,i,l,u,d,m,f){if(!e)return()=>{};let h=!1,g=null;const x=()=>{if(h||!u.current)return;const v=t.getState();let w,C;try{w=s(v,a.current)}catch(j){C=j,g=j}C||(g=null),w===i.current?l.current||m():(i.current=w,d.current=w,l.current=!0,f())};return r.onStateChange=x,r.trySubscribe(),x(),()=>{if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,g)throw g}}function vz(e,t){return e===t}function bz(e,t,r,{pure:s,areStatesEqual:a=vz,areOwnPropsEqual:i=bp,areStatePropsEqual:l=bp,areMergedPropsEqual:u=bp,forwardRef:d=!1,context:m=TD}={}){const f=m,h=KB(e),g=YB(t),x=JB(r),b=!!e;return w=>{const C=w.displayName||w.name||"Component",j=`Connect(${C})`,_={shouldHandleStateChanges:b,displayName:j,wrappedComponentName:C,WrappedComponent:w,initMapStateToProps:h,initMapDispatchToProps:g,initMergeProps:x,areStatesEqual:a,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:u};function k(T){const[I,L,q]=N.useMemo(()=>{const{reactReduxForwardedRef:xe,...ke}=T;return[T.context,xe,ke]},[T]),O=N.useMemo(()=>{let xe=f;return I!=null&&I.Consumer,xe},[I,f]),$=N.useContext(O),z=!!T.store&&!!T.store.getState&&!!T.store.dispatch,K=!!$&&!!$.store,te=z?T.store:$.store,se=K?$.getServerState:te.getState,W=N.useMemo(()=>HB(te.dispatch,_),[te]),[M,Y]=N.useMemo(()=>{if(!b)return pz;const xe=DD(te,z?void 0:$.subscription),ke=xe.notifyNestedSubs.bind(xe);return[xe,ke]},[te,z,$]),P=N.useMemo(()=>z?$:{...$,subscription:M},[z,$,M]),G=N.useRef(void 0),Z=N.useRef(q),F=N.useRef(void 0),Ne=N.useRef(!1),ye=N.useRef(!1),B=N.useRef(void 0);qd(()=>(ye.current=!0,()=>{ye.current=!1}),[]);const re=N.useMemo(()=>()=>F.current&&q===Z.current?F.current:W(te.getState(),q),[te,q]),X=N.useMemo(()=>ke=>M?yz(b,te,M,W,Z,G,Ne,ye,F,Y,ke):()=>{},[M]);gz(xz,[Z,G,Ne,q,F,Y]);let U;try{U=N.useSyncExternalStore(X,re,se?()=>W(se(),q):re)}catch(xe){throw B.current&&(xe.message+=`
The error may be correlated with this previous error:
${B.current.stack}

`),xe}qd(()=>{B.current=void 0,F.current=void 0,G.current=U});const ne=N.useMemo(()=>N.createElement(w,{...U,ref:L}),[L,w,U]);return N.useMemo(()=>b?N.createElement(O.Provider,{value:P},ne):ne,[O,ne,P])}const A=N.memo(k);if(A.WrappedComponent=w,A.displayName=k.displayName=j,d){const I=N.forwardRef(function(q,O){return N.createElement(A,{...q,reactReduxForwardedRef:O})});return I.displayName=j,I.WrappedComponent=w,zy(I,w)}return zy(A,w)}}var PD=bz;function wz(e){const{children:t,context:r,serverState:s,store:a}=e,i=N.useMemo(()=>{const d=DD(a);return{store:a,subscription:d,getServerState:s?()=>s:void 0}},[a,s]),l=N.useMemo(()=>a.getState(),[a]);qd(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||TD;return N.createElement(u.Provider,{value:i},t)}var RD=wz,Nz="Invariant failed";function jz(e,t){throw new Error(Nz)}var ps=function(t){var r=t.top,s=t.right,a=t.bottom,i=t.left,l=s-i,u=a-r,d={top:r,right:s,bottom:a,left:i,width:l,height:u,x:i,y:r,center:{x:(s+i)/2,y:(a+r)/2}};return d},Jv=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},j2=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Sz=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},jp={top:0,right:0,bottom:0,left:0},Zv=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?jp:s,i=t.border,l=i===void 0?jp:i,u=t.padding,d=u===void 0?jp:u,m=ps(Jv(r,a)),f=ps(j2(r,l)),h=ps(j2(f,d));return{marginBox:m,borderBox:ps(r),paddingBox:f,contentBox:h,margin:a,border:l,padding:d}},Qn=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&jz(),a},kz=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ud=function(t,r){var s=t.borderBox,a=t.border,i=t.margin,l=t.padding,u=Sz(s,r);return Zv({borderBox:u,border:a,margin:i,padding:l})},Wd=function(t,r){return r===void 0&&(r=kz()),Ud(t,r)},ID=function(t,r){var s={top:Qn(r.marginTop),right:Qn(r.marginRight),bottom:Qn(r.marginBottom),left:Qn(r.marginLeft)},a={top:Qn(r.paddingTop),right:Qn(r.paddingRight),bottom:Qn(r.paddingBottom),left:Qn(r.paddingLeft)},i={top:Qn(r.borderTopWidth),right:Qn(r.borderRightWidth),bottom:Qn(r.borderBottomWidth),left:Qn(r.borderLeftWidth)};return Zv({borderBox:t,margin:s,padding:a,border:i})},MD=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return ID(r,s)},ec=function(t){var r=[],s=null,a=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];r=u,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dr.apply(null,arguments)}function OD(e,t){}OD.bind(null,"warn");OD.bind(null,"error");function ka(){}function Cz(e,t){return{...e,...t}}function Zn(e,t,r){const s=t.map(a=>{const i=Cz(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(i=>{i()})}}const _z="Invariant failed";class Hd extends Error{}Hd.prototype.toString=function(){return this.message};function Be(e,t){throw new Hd(_z)}class Ez extends V.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=ka,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof Hd&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Zn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Hd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Dz=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Vd=e=>e+1,Az=e=>`
  You have lifted an item in position ${Vd(e.source.index)}
`,LD=(e,t)=>{const r=e.droppableId===t.droppableId,s=Vd(e.index),a=Vd(t.index);return r?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},$D=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,Tz=e=>{const t=e.destination;if(t)return LD(e.source,t);const r=e.combine;return r?$D(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},S2=e=>`
  The item has returned to its starting position
  of ${Vd(e.index)}
`,Pz=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${S2(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${LD(e.source,t)}
    `:r?`
      You have dropped the item.
      ${$D(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${S2(e.source)}
  `},xd={dragHandleUsageInstructions:Dz,onDragStart:Az,onDragUpdate:Tz,onDragEnd:Pz};function Rz(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function FD(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Rz(e[r],t[r]))return!1;return!0}function Mt(e,t){const r=N.useState(()=>({inputs:t,result:e()}))[0],s=N.useRef(!0),a=N.useRef(r),l=s.current||!!(t&&a.current.inputs&&FD(t,a.current.inputs))?a.current:{inputs:t,result:e()};return N.useEffect(()=>{s.current=!1,a.current=l},[l]),l.result}function ut(e,t){return Mt(()=>e,t)}const Lr={x:0,y:0},zr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),In=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ca=(e,t)=>e.x===t.x&&e.y===t.y,Io=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),mi=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},tc=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),k2=(e,t)=>Math.min(...t.map(r=>tc(e,r))),BD=e=>t=>({x:e(t.x),y:e(t.y)});var Iz=(e,t)=>{const r=ps({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Dc=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),C2=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Mz={top:0,right:0,bottom:0,left:0},Oz=(e,t)=>t?Dc(e,t.scroll.diff.displacement):e,Lz=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,$z=(e,t)=>t&&t.shouldClipSubject?Iz(t.pageMarginBox,e):ps(e);var po=({page:e,withPlaceholder:t,axis:r,frame:s})=>{const a=Oz(e.marginBox,s),i=Lz(a,r,t),l=$z(i,s);return{page:e,withPlaceholder:t,active:l}},eb=(e,t)=>{e.frame||Be();const r=e.frame,s=In(t,r.scroll.initial),a=Io(s),i={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}},l=po({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:l}};function Or(e,t=FD){let r=null;function s(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return s.clear=function(){r=null},s}const zD=Or(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),GD=Or(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),kf=Or(e=>Object.values(e)),Fz=Or(e=>Object.values(e));var Mo=Or((e,t)=>Fz(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function tb(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Cf(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var _f=Or((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Bz=({isMovingForward:e,draggable:t,destination:r,insideDestination:s,previousImpact:a})=>{if(!r.isCombineEnabled||!tb(a))return null;function l(x){const b={type:"COMBINE",combine:{draggableId:x,droppableId:r.descriptor.id}};return{...a,at:b}}const u=a.displaced.all,d=u.length?u[0]:null;if(e)return d?l(d):null;const m=_f(t,s);if(!d){if(!m.length)return null;const x=m[m.length-1];return l(x.descriptor.id)}const f=m.findIndex(x=>x.descriptor.id===d);f===-1&&Be();const h=f-1;if(h<0)return null;const g=m[h];return l(g.descriptor.id)},Oo=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const qD={point:Lr,value:0},rc={invisible:{},visible:{},all:[]},zz={displaced:rc,displacedBy:qD,at:null};var es=(e,t)=>r=>e<=r&&r<=t,UD=e=>{const t=es(e.top,e.bottom),r=es(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right))return!0;const i=t(s.top)||t(s.bottom),l=r(s.left)||r(s.right);if(i&&l)return!0;const d=s.top<e.top&&s.bottom>e.bottom,m=s.left<e.left&&s.right>e.right;return d&&m?!0:d&&l||m&&i}},Gz=e=>{const t=es(e.top,e.bottom),r=es(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right)};const rb={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},WD={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var qz=e=>t=>{const r=es(t.top,t.bottom),s=es(t.left,t.right);return a=>e===rb?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)};const Uz=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:Lr;return Dc(e,r)},Wz=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,Hz=(e,t,r)=>r(t)(e),nb=({target:e,destination:t,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const i=s?Uz(e,t):e;return Wz(i,t,a)&&Hz(i,r,a)},Vz=e=>nb({...e,isVisibleThroughFrameFn:UD}),HD=e=>nb({...e,isVisibleThroughFrameFn:Gz}),Yz=e=>nb({...e,isVisibleThroughFrameFn:qz(e.destination.axis)}),Kz=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const i=a[e];return i?i.shouldAnimate:!0};function Qz(e,t){const r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return ps(Jv(r,s))}function nc({afterDragging:e,destination:t,displacedBy:r,viewport:s,forceShouldAnimate:a,last:i}){return e.reduce(function(u,d){const m=Qz(d,r),f=d.descriptor.id;if(u.all.push(f),!Vz({target:m,destination:t,viewport:s,withDroppableDisplacement:!0}))return u.invisible[d.descriptor.id]=!0,u;const g=Kz(f,i,a),x={draggableId:f,shouldAnimate:g};return u.visible[f]=x,u},{all:[],visible:{},invisible:{}})}function Xz(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function _2({insideDestination:e,inHomeList:t,displacedBy:r,destination:s}){const a=Xz(e,{inHomeList:t});return{displaced:rc,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Yd({draggable:e,insideDestination:t,destination:r,viewport:s,displacedBy:a,last:i,index:l,forceShouldAnimate:u}){const d=Oo(e,r);if(l==null)return _2({insideDestination:t,inHomeList:d,displacedBy:a,destination:r});const m=t.find(b=>b.descriptor.index===l);if(!m)return _2({insideDestination:t,inHomeList:d,displacedBy:a,destination:r});const f=_f(e,t),h=t.indexOf(m),g=f.slice(h);return{displaced:nc({afterDragging:g,destination:r,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:u}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function _a(e,t){return!!t.effected[e]}var Jz=({isMovingForward:e,destination:t,draggables:r,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,u=r[i].descriptor.index;return _a(i,a)?e?u:u-1:e?u+1:u},Zz=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:s})=>{if(!r.length)return null;const a=s.index,i=e?a+1:a-1,l=r[0].descriptor.index,u=r[r.length-1].descriptor.index,d=t?u:u+1;return i<l||i>d?null:i},e9=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:s,destination:a,insideDestination:i,previousImpact:l,viewport:u,afterCritical:d})=>{const m=l.at;if(m||Be(),m.type==="REORDER"){const h=Zz({isMovingForward:e,isInHomeList:t,location:m.destination,insideDestination:i});return h==null?null:Yd({draggable:r,insideDestination:i,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:h})}const f=Jz({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:m.combine,afterCritical:d});return f==null?null:Yd({draggable:r,insideDestination:i,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})},t9=({displaced:e,afterCritical:t,combineWith:r,displacedBy:s})=>{const a=!!(e.visible[r]||e.invisible[r]);return _a(r,t)?a?Lr:Io(s.point):a?s.point:Lr},r9=({afterCritical:e,impact:t,draggables:r})=>{const s=Cf(t);s||Be();const a=s.draggableId,i=r[a].page.borderBox.center,l=t9({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return zr(i,l)};const VD=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,n9=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,sb=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,E2=({axis:e,moveRelativeTo:t,isMoving:r})=>mi(e.line,t.marginBox[e.end]+VD(e,r),sb(e,t.marginBox,r)),D2=({axis:e,moveRelativeTo:t,isMoving:r})=>mi(e.line,t.marginBox[e.start]-n9(e,r),sb(e,t.marginBox,r)),s9=({axis:e,moveInto:t,isMoving:r})=>mi(e.line,t.contentBox[e.start]+VD(e,r),sb(e,t.contentBox,r));var a9=({impact:e,draggable:t,draggables:r,droppable:s,afterCritical:a})=>{const i=Mo(s.descriptor.id,r),l=t.page,u=s.axis;if(!i.length)return s9({axis:u,moveInto:s.page,isMoving:l});const{displaced:d,displacedBy:m}=e,f=d.all[0];if(f){const g=r[f];if(_a(f,a))return D2({axis:u,moveRelativeTo:g.page,isMoving:l});const x=Ud(g.page,m.point);return D2({axis:u,moveRelativeTo:x,isMoving:l})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return l.borderBox.center;if(_a(h.descriptor.id,a)){const g=Ud(h.page,Io(a.displacedBy.point));return E2({axis:u,moveRelativeTo:g,isMoving:l})}return E2({axis:u,moveRelativeTo:h.page,isMoving:l})},Gy=(e,t)=>{const r=e.frame;return r?zr(t,r.scroll.diff.displacement):t};const i9=({impact:e,draggable:t,droppable:r,draggables:s,afterCritical:a})=>{const i=t.page.borderBox.center,l=e.at;return!r||!l?i:l.type==="REORDER"?a9({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:a}):r9({impact:e,draggables:s,afterCritical:a})};var Ef=e=>{const t=i9(e),r=e.droppable;return r?Gy(r,t):t},YD=(e,t)=>{const r=In(t,e.scroll.initial),s=Io(r);return{frame:ps({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}}};function A2(e,t){return e.map(r=>t[r])}function o9(e,t){for(let r=0;r<t.length;r++){const s=t[r].visible[e];if(s)return s}return null}var l9=({impact:e,viewport:t,destination:r,draggables:s,maxScrollChange:a})=>{const i=YD(t,zr(t.scroll.current,a)),l=r.frame?eb(r,zr(r.frame.scroll.current,a)):r,u=e.displaced,d=nc({afterDragging:A2(u.all,s),destination:r,displacedBy:e.displacedBy,viewport:i.frame,last:u,forceShouldAnimate:!1}),m=nc({afterDragging:A2(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:t.frame,last:u,forceShouldAnimate:!1}),f={},h={},g=[u,d,m];return u.all.forEach(b=>{const v=o9(b,g);if(v){h[b]=v;return}f[b]=!0}),{...e,displaced:{all:u.all,invisible:f,visible:h}}},c9=(e,t)=>zr(e.scroll.diff.displacement,t),ab=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const s=c9(r,e),a=In(s,t.page.borderBox.center);return zr(t.client.borderBox.center,a)},KD=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:i=!1})=>{const l=In(r,e.page.borderBox.center),d={target:Dc(e.page.borderBox,l),destination:t,withDroppableDisplacement:a,viewport:s};return i?Yz(d):HD(d)},u9=({isMovingForward:e,draggable:t,destination:r,draggables:s,previousImpact:a,viewport:i,previousPageBorderBoxCenter:l,previousClientSelection:u,afterCritical:d})=>{if(!r.isEnabled)return null;const m=Mo(r.descriptor.id,s),f=Oo(t,r),h=Bz({isMovingForward:e,draggable:t,destination:r,insideDestination:m,previousImpact:a})||e9({isMovingForward:e,isInHomeList:f,draggable:t,draggables:s,destination:r,insideDestination:m,previousImpact:a,viewport:i,afterCritical:d});if(!h)return null;const g=Ef({impact:h,draggable:t,droppable:r,draggables:s,afterCritical:d});if(KD({draggable:t,destination:r,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ab({pageBorderBoxCenter:g,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const b=In(g,l),v=l9({impact:h,viewport:i,destination:r,draggables:s,maxScrollChange:b});return{clientSelection:u,impact:v,scrollJumpRequest:b}};const ln=e=>{const t=e.subject.active;return t||Be(),t};var d9=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:a})=>{const i=r.subject.active;if(!i)return null;const l=r.axis,u=es(i[l.start],i[l.end]),d=kf(s).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>UD(a.frame)(ln(f))).filter(f=>{const h=ln(f);return e?i[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<i[l.crossAxisStart]}).filter(f=>{const h=ln(f),g=es(h[l.start],h[l.end]);return u(h[l.start])||u(h[l.end])||g(i[l.start])||g(i[l.end])}).sort((f,h)=>{const g=ln(f)[l.crossAxisStart],x=ln(h)[l.crossAxisStart];return e?g-x:x-g}).filter((f,h,g)=>ln(f)[l.crossAxisStart]===ln(g[0])[l.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const m=d.filter(f=>es(ln(f)[l.start],ln(f)[l.end])(t[l.line]));return m.length===1?m[0]:m.length>1?m.sort((f,h)=>ln(f)[l.start]-ln(h)[l.start])[0]:d.sort((f,h)=>{const g=k2(t,C2(ln(f))),x=k2(t,C2(ln(h)));return g!==x?g-x:ln(f)[l.start]-ln(h)[l.start]})[0]};const T2=(e,t)=>{const r=e.page.borderBox.center;return _a(e.descriptor.id,t)?In(r,t.displacedBy.point):r},f9=(e,t)=>{const r=e.page.borderBox;return _a(e.descriptor.id,t)?Dc(r,Io(t.displacedBy.point)):r};var m9=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:s,afterCritical:a})=>s.filter(l=>HD({target:f9(l,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((l,u)=>{const d=tc(e,Gy(r,T2(l,a))),m=tc(e,Gy(r,T2(u,a)));return d<m?-1:m<d?1:l.descriptor.index-u.descriptor.index})[0]||null,Ac=Or(function(t,r){const s=r[t.line];return{value:s,point:mi(t.line,s)}});const h9=(e,t,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return mi(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],d=Mo(e.descriptor.id,r).reduce((m,f)=>m+f.client.marginBox[s.size],0)+t[s.line]-a;return d<=0?null:mi(s.line,d)},QD=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),XD=(e,t,r)=>{const s=e.frame;Oo(t,e)&&Be(),e.subject.withPlaceholder&&Be();const a=Ac(e.axis,t.displaceBy).point,i=h9(e,a,r),l={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const f=po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:f}}const u=i?zr(s.scroll.max,i):s.scroll.max,d=QD(s,u),m=po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:d});return{...e,subject:m,frame:d}},p9=e=>{const t=e.subject.withPlaceholder;t||Be();const r=e.frame;if(!r){const l=po({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const s=t.oldFrameMaxScroll;s||Be();const a=QD(r,s),i=po({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:i,frame:a}};var g9=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:s,draggables:a,destination:i,viewport:l,afterCritical:u})=>{if(!t){if(r.length)return null;const h={displaced:rc,displacedBy:qD,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},g=Ef({impact:h,draggable:s,droppable:i,draggables:a,afterCritical:u}),x=Oo(s,i)?i:XD(i,s,a);return KD({draggable:s,destination:x,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const d=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],m=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||d?h:h+1})(),f=Ac(i.axis,s.displaceBy);return Yd({draggable:s,insideDestination:r,destination:i,viewport:l,displacedBy:f,last:rc,index:m})},x9=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:s,draggables:a,droppables:i,viewport:l,afterCritical:u})=>{const d=d9({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:l});if(!d)return null;const m=Mo(d.descriptor.id,a),f=m9({pageBorderBoxCenter:t,viewport:l,destination:d,insideDestination:m,afterCritical:u}),h=g9({previousPageBorderBoxCenter:t,destination:d,draggable:r,draggables:a,moveRelativeTo:f,insideDestination:m,viewport:l,afterCritical:u});if(!h)return null;const g=Ef({impact:h,draggable:r,droppable:d,draggables:a,afterCritical:u});return{clientSelection:ab({pageBorderBoxCenter:g,draggable:r,viewport:l}),impact:h,scrollJumpRequest:null}},Mn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const y9=(e,t)=>{const r=Mn(e);return r?t[r]:null};var v9=({state:e,type:t})=>{const r=y9(e.impact,e.dimensions.droppables),s=!!r,a=e.dimensions.droppables[e.critical.droppable.id],i=r||a,l=i.axis.direction,u=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(u&&!s)return null;const d=t==="MOVE_DOWN"||t==="MOVE_RIGHT",m=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:h,droppables:g}=e.dimensions;return u?u9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:m,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):x9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:m,isOver:i,draggables:h,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function ti(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function JD(e){const t=es(e.top,e.bottom),r=es(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function b9(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function w9({pageBorderBox:e,draggable:t,candidates:r}){const s=t.page.borderBox.center,a=r.map(i=>{const l=i.axis,u=mi(i.axis.line,e.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:tc(s,u)}}).sort((i,l)=>l.distance-i.distance);return a[0]?a[0].id:null}function N9({pageBorderBox:e,draggable:t,droppables:r}){const s=kf(r).filter(a=>{if(!a.isEnabled)return!1;const i=a.subject.active;if(!i||!b9(e,i))return!1;if(JD(i)(e.center))return!0;const l=a.axis,u=i.center[l.crossAxisLine],d=e[l.crossAxisStart],m=e[l.crossAxisEnd],f=es(i[l.crossAxisStart],i[l.crossAxisEnd]),h=f(d),g=f(m);return!h&&!g?!0:h?d<u:m>u});return s.length?s.length===1?s[0].descriptor.id:w9({pageBorderBox:e,draggable:t,candidates:s}):null}const ZD=(e,t)=>ps(Dc(e,t));var j9=(e,t)=>{const r=e.frame;return r?ZD(t,r.scroll.diff.value):t};function eA({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function S9({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var k9=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:s,last:a,viewport:i,afterCritical:l})=>{const u=r.axis,d=Ac(r.axis,t.displaceBy),m=d.value,f=e[u.start],h=e[u.end],x=_f(t,s).find(v=>{const w=v.descriptor.id,C=v.page.borderBox.center[u.line],j=_a(w,l),_=eA({displaced:a,id:w});return j?_?h<=C:f<C-m:_?h<=C+m:f<C})||null,b=S9({draggable:t,closest:x,inHomeList:Oo(t,r)});return Yd({draggable:t,insideDestination:s,destination:r,viewport:i,last:a,displacedBy:d,index:b})};const C9=4;var _9=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:s,insideDestination:a,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const l=s.axis,u=Ac(s.axis,e.displaceBy),d=u.value,m=t[l.start],f=t[l.end],g=_f(e,a).find(b=>{const v=b.descriptor.id,w=b.page.borderBox,j=w[l.size]/C9,_=_a(v,i),k=eA({displaced:r.displaced,id:v});return _?k?f>w[l.start]+j&&f<w[l.end]-j:m>w[l.start]-d+j&&m<w[l.end]-d-j:k?f>w[l.start]+d+j&&f<w[l.end]+d-j:m>w[l.start]+j&&m<w[l.end]-j});return g?{displacedBy:u,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}}:null},tA=({pageOffset:e,draggable:t,draggables:r,droppables:s,previousImpact:a,viewport:i,afterCritical:l})=>{const u=ZD(t.page.borderBox,e),d=N9({pageBorderBox:u,draggable:t,droppables:s});if(!d)return zz;const m=s[d],f=Mo(m.descriptor.id,r),h=j9(m,u);return _9({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:a,destination:m,insideDestination:f,afterCritical:l})||k9({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:m,insideDestination:f,last:a.displaced,viewport:i,afterCritical:l})},ib=(e,t)=>({...e,[t.descriptor.id]:t});const E9=({previousImpact:e,impact:t,droppables:r})=>{const s=Mn(e),a=Mn(t);if(!s||s===a)return r;const i=r[s];if(!i.subject.withPlaceholder)return r;const l=p9(i);return ib(r,l)};var D9=({draggable:e,draggables:t,droppables:r,previousImpact:s,impact:a})=>{const i=E9({previousImpact:s,impact:a,droppables:r}),l=Mn(a);if(!l)return i;const u=r[l];if(Oo(e,u)||u.subject.withPlaceholder)return i;const d=XD(u,e,t);return ib(i,d)},Gl=({state:e,clientSelection:t,dimensions:r,viewport:s,impact:a,scrollJumpRequest:i})=>{const l=s||e.viewport,u=r||e.dimensions,d=t||e.current.client.selection,m=In(d,e.initial.client.selection),f={offset:m,selection:d,borderBoxCenter:zr(e.initial.client.borderBoxCenter,m)},h={selection:zr(f.selection,l.scroll.current),borderBoxCenter:zr(f.borderBoxCenter,l.scroll.current),offset:zr(f.offset,l.scroll.diff.value)},g={client:f,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:u,viewport:l,current:g};const x=u.draggables[e.critical.draggable.id],b=a||tA({pageOffset:h.offset,draggable:x,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),v=D9({draggable:x,impact:b,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables});return{...e,current:g,dimensions:{draggables:u.draggables,droppables:v},impact:b,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function A9(e,t){return e.map(r=>t[r])}var rA=({impact:e,viewport:t,draggables:r,destination:s,forceShouldAnimate:a})=>{const i=e.displaced,l=A9(i.all,r),u=nc({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return{...e,displaced:u}},nA=({impact:e,draggable:t,droppable:r,draggables:s,viewport:a,afterCritical:i})=>{const l=Ef({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:i});return ab({pageBorderBoxCenter:l,draggable:t,viewport:a})},sA=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&Be();const s=e.impact,a=r||e.viewport,i=t||e.dimensions,{draggables:l,droppables:u}=i,d=l[e.critical.draggable.id],m=Mn(s);m||Be();const f=u[m],h=rA({impact:s,viewport:a,destination:f,draggables:l}),g=nA({impact:h,draggable:d,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return Gl({impact:h,clientSelection:g,state:e,dimensions:i,viewport:a})},T9=e=>({index:e.index,droppableId:e.droppableId}),aA=({draggable:e,home:t,draggables:r,viewport:s})=>{const a=Ac(t.axis,e.displaceBy),i=Mo(t.descriptor.id,r),l=i.indexOf(e);l===-1&&Be();const u=i.slice(l+1),d=u.reduce((g,x)=>(g[x.descriptor.id]=!0,g),{}),m={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:d};return{impact:{displaced:nc({afterDragging:u,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:T9(e.descriptor)}},afterCritical:m}},P9=(e,t)=>({draggables:e.draggables,droppables:ib(e.droppables,t)}),R9=({draggable:e,offset:t,initialWindowScroll:r})=>{const s=Ud(e.client,t),a=Wd(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},I9=e=>{const t=e.frame;return t||Be(),t},M9=({additions:e,updatedDroppables:t,viewport:r})=>{const s=r.scroll.diff.value;return e.map(a=>{const i=a.descriptor.droppableId,l=t[i],d=I9(l).scroll.diff.value,m=zr(s,d);return R9({draggable:a,offset:m,initialWindowScroll:r.scroll.initial})})},O9=({state:e,published:t})=>{const r=t.modified.map(C=>{const j=e.dimensions.droppables[C.droppableId];return eb(j,C.scroll)}),s={...e.dimensions.droppables,...zD(r)},a=GD(M9({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...a};t.removals.forEach(C=>{delete i[C]});const l={droppables:s,draggables:i},u=Mn(e.impact),d=u?l.droppables[u]:null,m=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],{impact:h,afterCritical:g}=aA({draggable:m,home:f,draggables:i,viewport:e.viewport}),x=d&&d.isCombineEnabled?e.impact:h,b=tA({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:e.viewport,afterCritical:g}),v={...e,phase:"DRAGGING",impact:b,onLiftImpact:h,dimensions:l,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const qy=e=>e.movementMode==="SNAP",Sp=(e,t,r)=>{const s=P9(e.dimensions,t);return!qy(e)||r?Gl({state:e,dimensions:s}):sA({state:e,dimensions:s})};function kp(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const P2={phase:"IDLE",completed:null,shouldFlush:!1};var L9=(e=P2,t)=>{if(t.type==="FLUSH")return{...P2,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Be();const{critical:r,clientSelection:s,viewport:a,dimensions:i,movementMode:l}=t.payload,u=i.draggables[r.draggable.id],d=i.droppables[r.droppable.id],m={selection:s,borderBoxCenter:u.client.borderBox.center,offset:Lr},f={client:m,page:{selection:zr(m.selection,a.scroll.initial),borderBoxCenter:zr(m.selection,a.scroll.initial),offset:zr(m.selection,a.scroll.diff.value)}},h=kf(i.droppables).every(v=>!v.isFixedOnPage),{impact:g,afterCritical:x}=aA({draggable:u,home:d,draggables:i.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:i,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:x,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Be(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Be(),O9({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ti(e)||Be();const{client:r}=t.payload;return Ca(r,e.current.client.selection)?e:Gl({state:e,clientSelection:r,impact:qy(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return kp(e);ti(e)||Be();const{id:r,newScroll:s}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const i=eb(a,s);return Sp(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ti(e)||Be();const{id:r,isEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||Be(),a.isEnabled===s&&Be();const i={...a,isEnabled:s};return Sp(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ti(e)||Be();const{id:r,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||Be(),a.isCombineEnabled===s&&Be();const i={...a,isCombineEnabled:s};return Sp(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ti(e)||Be(),e.isWindowScrollAllowed||Be();const r=t.payload.newScroll;if(Ca(e.viewport.scroll.current,r))return kp(e);const s=YD(e.viewport,r);return qy(e)?sA({state:e,viewport:s}):Gl({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ti(e))return e;const r=t.payload.maxScroll;if(Ca(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Be();const r=v9({state:e,type:t.type});return r?Gl({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&Be(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Be(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function Gt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const $9=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),F9=e=>({type:"LIFT",payload:e}),B9=e=>({type:"INITIAL_PUBLISH",payload:e}),z9=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),G9=()=>({type:"COLLECTION_STARTING",payload:null}),q9=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),U9=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),W9=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),iA=e=>({type:"MOVE",payload:e}),H9=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),V9=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Y9=()=>({type:"MOVE_UP",payload:null}),K9=()=>({type:"MOVE_DOWN",payload:null}),Q9=()=>({type:"MOVE_RIGHT",payload:null}),X9=()=>({type:"MOVE_LEFT",payload:null}),ob=()=>({type:"FLUSH",payload:null}),J9=e=>({type:"DROP_ANIMATE",payload:e}),lb=e=>({type:"DROP_COMPLETE",payload:e}),oA=e=>({type:"DROP",payload:e}),Z9=e=>({type:"DROP_PENDING",payload:e}),lA=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var eG=e=>({getState:t,dispatch:r})=>s=>a=>{if(!Gt(a,"LIFT")){s(a);return}const{id:i,clientSelection:l,movementMode:u}=a.payload,d=t();d.phase==="DROP_ANIMATING"&&r(lb({completed:d.completed})),t().phase!=="IDLE"&&Be(),r(ob()),r($9({draggableId:i,movementMode:u}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:u==="SNAP"}},{critical:h,dimensions:g,viewport:x}=e.startPublishing(f);r(B9({critical:h,dimensions:g,clientSelection:l,movementMode:u,viewport:x}))},tG=e=>()=>t=>r=>{Gt(r,"INITIAL_PUBLISH")&&e.dragging(),Gt(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(Gt(r,"FLUSH")||Gt(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const cb={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},sc={opacity:{drop:0,combining:.7},scale:{drop:.75}},cA={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Za=`${cA.outOfTheWay}s ${cb.outOfTheWay}`,ql={fluid:`opacity ${Za}`,snap:`transform ${Za}, opacity ${Za}`,drop:e=>{const t=`${e}s ${cb.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Za}`,placeholder:`height ${Za}, width ${Za}, margin ${Za}`},R2=e=>Ca(e,Lr)?void 0:`translate(${e.x}px, ${e.y}px)`,Uy={moveTo:R2,drop:(e,t)=>{const r=R2(e);if(r)return t?`${r} scale(${sc.scale.drop})`:r}},{minDropTime:Wy,maxDropTime:uA}=cA,rG=uA-Wy,I2=1500,nG=.6;var sG=({current:e,destination:t,reason:r})=>{const s=tc(e,t);if(s<=0)return Wy;if(s>=I2)return uA;const a=s/I2,i=Wy+rG*a,l=r==="CANCEL"?i*nG:i;return Number(l.toFixed(2))},aG=({impact:e,draggable:t,dimensions:r,viewport:s,afterCritical:a})=>{const{draggables:i,droppables:l}=r,u=Mn(e),d=u?l[u]:null,m=l[t.descriptor.droppableId],f=nA({impact:e,draggable:t,draggables:i,afterCritical:a,droppable:d||m,viewport:s});return In(f,t.client.borderBox.center)},iG=({draggables:e,reason:t,lastImpact:r,home:s,viewport:a,onLiftImpact:i})=>!r.at||t!=="DROP"?{impact:rA({draggables:e,impact:i,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:rc},didDropInsideDroppable:!0};const oG=({getState:e,dispatch:t})=>r=>s=>{if(!Gt(s,"DROP")){r(s);return}const a=e(),i=s.payload.reason;if(a.phase==="COLLECTING"){t(Z9({reason:i}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&Be(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Be();const u=a.critical,d=a.dimensions,m=d.draggables[a.critical.draggable.id],{impact:f,didDropInsideDroppable:h}=iG({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),g=h?tb(f):null,x=h?Cf(f):null,b={index:u.draggable.index,droppableId:u.droppable.id},v={draggableId:m.descriptor.id,type:m.descriptor.type,source:b,reason:i,mode:a.movementMode,destination:g,combine:x},w=aG({impact:f,draggable:m,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),C={critical:a.critical,afterCritical:a.afterCritical,result:v,impact:f};if(!(!Ca(a.current.client.offset,w)||!!v.combine)){t(lb({completed:C}));return}const _=sG({current:a.current.client.offset,destination:w,reason:i});t(J9({newHomeClientOffset:w,dropDuration:_,completed:C}))};var dA=()=>({x:window.pageXOffset,y:window.pageYOffset});function lG(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function cG({onWindowScroll:e}){function t(){e(dA())}const r=ec(t),s=lG(r);let a=ka;function i(){return a!==ka}function l(){i()&&Be(),a=Zn(window,[s])}function u(){i()||Be(),r.cancel(),a(),a=ka}return{start:l,stop:u,isActive:i}}const uG=e=>Gt(e,"DROP_COMPLETE")||Gt(e,"DROP_ANIMATE")||Gt(e,"FLUSH"),dG=e=>{const t=cG({onWindowScroll:r=>{e.dispatch(H9({newScroll:r}))}});return r=>s=>{!t.isActive()&&Gt(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&uG(s)&&t.stop(),r(s)}};var fG=e=>{let t=!1,r=!1;const s=setTimeout(()=>{r=!0}),a=i=>{t||r||(t=!0,e(i),clearTimeout(s))};return a.wasCalled=()=>t,a},mG=()=>{const e=[],t=a=>{const i=e.findIndex(u=>u.timerId===a);i===-1&&Be();const[l]=e.splice(i,1);l.callback()};return{add:a=>{const i=setTimeout(()=>t(i)),l={timerId:i,callback:a};e.push(l)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const hG=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,pG=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,gG=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&s},El=(e,t)=>{t()},rd=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Cp(e,t,r,s){if(!e){r(s(t));return}const a=fG(r);e(t,{announce:a}),a.wasCalled()||r(s(t))}var xG=(e,t)=>{const r=mG();let s=null;const a=(h,g)=>{s&&Be(),El("onBeforeCapture",()=>{const x=e().onBeforeCapture;x&&x({draggableId:h,mode:g})})},i=(h,g)=>{s&&Be(),El("onBeforeDragStart",()=>{const x=e().onBeforeDragStart;x&&x(rd(h,g))})},l=(h,g)=>{s&&Be();const x=rd(h,g);s={mode:g,lastCritical:h,lastLocation:x.source,lastCombine:null},r.add(()=>{El("onDragStart",()=>Cp(e().onDragStart,x,t,xd.onDragStart))})},u=(h,g)=>{const x=tb(g),b=Cf(g);s||Be();const v=!gG(h,s.lastCritical);v&&(s.lastCritical=h);const w=!hG(s.lastLocation,x);w&&(s.lastLocation=x);const C=!pG(s.lastCombine,b);if(C&&(s.lastCombine=b),!v&&!w&&!C)return;const j={...rd(h,s.mode),combine:b,destination:x};r.add(()=>{El("onDragUpdate",()=>Cp(e().onDragUpdate,j,t,xd.onDragUpdate))})},d=()=>{s||Be(),r.flush()},m=h=>{s||Be(),s=null,El("onDragEnd",()=>Cp(e().onDragEnd,h,t,xd.onDragEnd))};return{beforeCapture:a,beforeStart:i,start:l,update:u,flush:d,drop:m,abort:()=>{if(!s)return;const h={...rd(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};m(h)}}},yG=(e,t)=>{const r=xG(e,t);return s=>a=>i=>{if(Gt(i,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Gt(i,"INITIAL_PUBLISH")){const u=i.payload.critical;r.beforeStart(u,i.payload.movementMode),a(i),r.start(u,i.payload.movementMode);return}if(Gt(i,"DROP_COMPLETE")){const u=i.payload.completed.result;r.flush(),a(i),r.drop(u);return}if(a(i),Gt(i,"FLUSH")){r.abort();return}const l=s.getState();l.phase==="DRAGGING"&&r.update(l.critical,l.impact)}};const vG=e=>t=>r=>{if(!Gt(r,"DROP_ANIMATION_FINISHED")){t(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&Be(),e.dispatch(lb({completed:s.completed}))},bG=e=>{let t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>i=>{if((Gt(i,"FLUSH")||Gt(i,"DROP_COMPLETE")||Gt(i,"DROP_ANIMATION_FINISHED"))&&s(),a(i),!Gt(i,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(lA())}};r=requestAnimationFrame(()=>{r=null,t=Zn(window,[l])})}};var wG=e=>()=>t=>r=>{(Gt(r,"DROP_COMPLETE")||Gt(r,"FLUSH")||Gt(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},NG=e=>{let t=!1;return()=>r=>s=>{if(Gt(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(Gt(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Gt(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const jG=e=>Gt(e,"DROP_COMPLETE")||Gt(e,"DROP_ANIMATE")||Gt(e,"FLUSH");var SG=e=>t=>r=>s=>{if(jG(s)){e.stop(),r(s);return}if(Gt(s,"INITIAL_PUBLISH")){r(s);const a=t.getState();a.phase!=="DRAGGING"&&Be(),e.start(a);return}r(s),e.scroll(t.getState())};const kG=e=>t=>r=>{if(t(r),!Gt(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(oA({reason:s.reason})))},CG=Zl;var _G=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:s,announce:a,autoScroller:i})=>Kv(L9,CG(CD(tG(r),wG(e),eG(e),oG,vG,bG,kG,SG(i),dG,NG(t),yG(s,a))));const _p=()=>({additions:{},removals:{},modified:{}});function EG({registry:e,callbacks:t}){let r=_p(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:d,removals:m,modified:f}=r,h=Object.keys(d).map(b=>e.draggable.getById(b).getDimension(Lr)).sort((b,v)=>b.descriptor.index-v.descriptor.index),g=Object.keys(f).map(b=>{const w=e.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:w}}),x={additions:h,removals:Object.keys(m),modified:g};r=_p(),t.publish(x)}))};return{add:d=>{const m=d.descriptor.id;r.additions[m]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[m]&&delete r.removals[m],a()},remove:d=>{const m=d.descriptor;r.removals[m.id]=!0,r.modified[m.droppableId]=!0,r.additions[m.id]&&delete r.additions[m.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=_p())}}}var fA=({scrollHeight:e,scrollWidth:t,height:r,width:s})=>{const a=In({x:t,y:e},{x:s,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},mA=()=>{const e=document.documentElement;return e||Be(),e},hA=()=>{const e=mA();return fA({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},DG=()=>{const e=dA(),t=hA(),r=e.y,s=e.x,a=mA(),i=a.clientWidth,l=a.clientHeight,u=s+i,d=r+l;return{frame:ps({top:r,left:s,right:u,bottom:d}),scroll:{initial:e,current:e,max:t,diff:{value:Lr,displacement:Lr}}}},AG=({critical:e,scrollOptions:t,registry:r})=>{const s=DG(),a=s.scroll.current,i=e.droppable,l=r.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(a,t)),u=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(a));return{dimensions:{draggables:GD(u),droppables:zD(l)},critical:e,viewport:s}};function M2(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var TG=(e,t)=>{let r=null;const s=EG({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(g,x)=>{e.droppable.exists(g)||Be(),r&&t.updateDroppableIsEnabled({id:g,isEnabled:x})},i=(g,x)=>{r&&(e.droppable.exists(g)||Be(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:x}))},l=(g,x)=>{r&&(e.droppable.exists(g)||Be(),t.updateDroppableScroll({id:g,newScroll:x}))},u=(g,x)=>{r&&e.droppable.getById(g).callbacks.scroll(x)},d=()=>{if(!r)return;s.stop();const g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(x=>x.callbacks.dragStopped()),r.unsubscribe(),r=null},m=g=>{r||Be();const x=r.critical.draggable;g.type==="ADDITION"&&M2(e,x,g.value)&&s.add(g.value),g.type==="REMOVAL"&&M2(e,x,g.value)&&s.remove(g.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:u,updateDroppableScroll:l,startPublishing:g=>{r&&Be();const x=e.draggable.getById(g.draggableId),b=e.droppable.getById(x.descriptor.droppableId),v={draggable:x.descriptor,droppable:b.descriptor},w=e.subscribe(m);return r={critical:v,unsubscribe:w},AG({critical:v,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:d}},pA=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",PG=e=>{window.scrollBy(e.x,e.y)};const RG=Or(e=>kf(e).filter(t=>!(!t.isEnabled||!t.frame))),IG=(e,t)=>RG(t).find(s=>(s.frame||Be(),JD(s.frame.pageMarginBox)(e)))||null;var MG=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return IG(e,r)};const ac={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var OG=(e,t,r=()=>ac)=>{const s=r(),a=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:i}},gA=({startOfRange:e,endOfRange:t,current:r})=>{const s=t-e;return s===0?0:(r-e)/s},ub=1,LG=(e,t,r=()=>ac)=>{const s=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return ub;const i=1-gA({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),l=s.maxPixelScroll*s.ease(i);return Math.ceil(l)},$G=(e,t,r)=>{const s=r(),a=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,l=t,u=i,m=Date.now()-l;if(m>=i)return e;if(m<a)return ub;const f=gA({startOfRange:a,endOfRange:u,current:m}),h=e*s.ease(f);return Math.ceil(h)},O2=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=LG(e,t,a);return i===0?0:s?Math.max($G(i,r,a),ub):i},L2=({container:e,distanceToEdges:t,dragStartTime:r,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=OG(e,s,i);return t[s.end]<t[s.start]?O2({distanceToEdge:t[s.end],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*O2({distanceToEdge:t[s.start],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})},FG=({container:e,subject:t,proposedScroll:r})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?r:a&&s?null:{x:a?0:r.x,y:s?0:r.y}};const BG=BD(e=>e===0?0:e);var xA=({dragStartTime:e,container:t,subject:r,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},u=L2({container:t,distanceToEdges:l,dragStartTime:e,axis:rb,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),d=L2({container:t,distanceToEdges:l,dragStartTime:e,axis:WD,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),m=BG({x:d,y:u});if(Ca(m,Lr))return null;const f=FG({container:t,subject:r,proposedScroll:m});return f?Ca(f,Lr)?null:f:null};const zG=BD(e=>e===0?0:e>0?1:-1),db=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:s})=>{const a=zr(t,s),i={x:e(a.x,r.x),y:e(a.y,r.y)};return Ca(i,Lr)?null:i}})(),yA=({max:e,current:t,change:r})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=zG(r),i=db({max:s,current:t,change:a});return!i||a.x!==0&&i.x===0||a.y!==0&&i.y===0},fb=(e,t)=>yA({current:e.scroll.current,max:e.scroll.max,change:t}),GG=(e,t)=>{if(!fb(e,t))return null;const r=e.scroll.max,s=e.scroll.current;return db({current:s,max:r,change:t})},mb=(e,t)=>{const r=e.frame;return r?yA({current:r.scroll.current,max:r.scroll.max,change:t}):!1},qG=(e,t)=>{const r=e.frame;return!r||!mb(e,t)?null:db({current:r.scroll.current,max:r.scroll.max,change:t})};var UG=({viewport:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=xA({dragStartTime:s,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&fb(e,l)?l:null},WG=({droppable:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=e.frame;if(!l)return null;const u=xA({dragStartTime:s,container:l.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return u&&mb(e,u)?u:null},$2=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:i})=>{const l=e.current.page.borderBoxCenter,d=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,g=UG({dragStartTime:t,viewport:h,subject:d,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});if(g){s(g);return}}const m=MG({center:l,destination:Mn(e.impact),droppables:e.dimensions.droppables});if(!m)return;const f=WG({dragStartTime:t,droppable:m,subject:d,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});f&&a(m.descriptor.id,f)},HG=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>ac})=>{const s=ec(e),a=ec(t);let i=null;const l=m=>{i||Be();const{shouldUseTimeDampening:f,dragStartTime:h}=i;$2({state:m,scrollWindow:s,scrollDroppable:a,dragStartTime:h,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:m=>{i&&Be();const f=Date.now();let h=!1;const g=()=>{h=!0};$2({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:r}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&l(m)},stop:()=>{i&&(s.cancel(),a.cancel(),i=null)},scroll:l}},VG=({move:e,scrollDroppable:t,scrollWindow:r})=>{const s=(u,d)=>{const m=zr(u.current.client.selection,d);e({client:m})},a=(u,d)=>{if(!mb(u,d))return d;const m=qG(u,d);if(!m)return t(u.descriptor.id,d),null;const f=In(d,m);return t(u.descriptor.id,f),In(d,f)},i=(u,d,m)=>{if(!u||!fb(d,m))return m;const f=GG(d,m);if(!f)return r(m),null;const h=In(m,f);return r(h),In(m,h)};return u=>{const d=u.scrollJumpRequest;if(!d)return;const m=Mn(u.impact);m||Be();const f=a(u.dimensions.droppables[m],d);if(!f)return;const h=u.viewport,g=i(u.isWindowScrollAllowed,h,f);g&&s(u,g)}},YG=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:s})=>{const a=HG({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=VG({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:d=>{if(!(s().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},start:a.start,stop:a.stop}};const go="data-rfd",xo=(()=>{const e=`${go}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Hy=(()=>{const e=`${go}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),KG=(()=>{const e=`${go}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),F2={contextId:`${go}-scroll-container-context-id`},QG=e=>t=>`[${t}="${e}"]`,Dl=(e,t)=>e.map(r=>{const s=r.styles[t];return s?`${r.selector} { ${s} }`:""}).join(" "),XG="pointer-events: none;";var JG=e=>{const t=QG(e),r=(()=>{const u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(xo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:XG,dropAnimating:u}}})(),s=(()=>{const u=`
      transition: ${ql.outOfTheWay};
    `;return{selector:t(Hy.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}})(),a={selector:t(KG.contextId),styles:{always:"overflow-anchor: none;"}},l=[s,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Dl(l,"always"),resting:Dl(l,"resting"),dragging:Dl(l,"dragging"),dropAnimating:Dl(l,"dropAnimating"),userCancel:Dl(l,"userCancel")}};const On=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect,Ep=()=>{const e=document.querySelector("head");return e||Be(),e},B2=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function ZG(e,t){const r=Mt(()=>JG(e),[e]),s=N.useRef(null),a=N.useRef(null),i=ut(Or(h=>{const g=a.current;g||Be(),g.textContent=h}),[]),l=ut(h=>{const g=s.current;g||Be(),g.textContent=h},[]);On(()=>{!s.current&&!a.current||Be();const h=B2(t),g=B2(t);return s.current=h,a.current=g,h.setAttribute(`${go}-always`,e),g.setAttribute(`${go}-dynamic`,e),Ep().appendChild(h),Ep().appendChild(g),l(r.always),i(r.resting),()=>{const x=b=>{const v=b.current;v||Be(),Ep().removeChild(v),b.current=null};x(s),x(a)}},[t,l,i,r.always,r.resting,e]);const u=ut(()=>i(r.dragging),[i,r.dragging]),d=ut(h=>{if(h==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),m=ut(()=>{a.current&&i(r.resting)},[i,r.resting]);return Mt(()=>({dragging:u,dropping:d,resting:m}),[u,d,m])}function vA(e,t){return Array.from(e.querySelectorAll(t))}var bA=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Df(e){return e instanceof bA(e).HTMLElement}function eq(e,t){const r=`[${xo.contextId}="${e}"]`,s=vA(document,r);if(!s.length)return null;const a=s.find(i=>i.getAttribute(xo.draggableId)===t);return!a||!Df(a)?null:a}function tq(e){const t=N.useRef({}),r=N.useRef(null),s=N.useRef(null),a=N.useRef(!1),i=ut(function(g,x){const b={id:g,focus:x};return t.current[g]=b,function(){const w=t.current;w[g]!==b&&delete w[g]}},[]),l=ut(function(g){const x=eq(e,g);x&&x!==document.activeElement&&x.focus()},[e]),u=ut(function(g,x){r.current===g&&(r.current=x)},[]),d=ut(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const g=r.current;g&&l(g)}))},[l]),m=ut(function(g){r.current=null;const x=document.activeElement;x&&x.getAttribute(xo.draggableId)===g&&(r.current=g)},[]);return On(()=>(a.current=!0,function(){a.current=!1;const g=s.current;g&&cancelAnimationFrame(g)}),[]),Mt(()=>({register:i,tryRecordFocus:m,tryRestoreFocusRecorded:d,tryShiftRecord:u}),[i,m,d,u])}function rq(){const e={draggables:{},droppables:{}},t=[];function r(h){return t.push(h),function(){const x=t.indexOf(h);x!==-1&&t.splice(x,1)}}function s(h){t.length&&t.forEach(g=>g(h))}function a(h){return e.draggables[h]||null}function i(h){const g=a(h);return g||Be(),g}const l={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,g)=>{const x=e.draggables[g.descriptor.id];x&&x.uniqueId===h.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const g=h.descriptor.id,x=a(g);x&&h.uniqueId===x.uniqueId&&(delete e.draggables[g],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:h=>!!a(h),getAllByType:h=>Object.values(e.draggables).filter(g=>g.descriptor.type===h)};function u(h){return e.droppables[h]||null}function d(h){const g=u(h);return g||Be(),g}const m={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const g=u(h.descriptor.id);g&&h.uniqueId===g.uniqueId&&delete e.droppables[h.descriptor.id]},getById:d,findById:u,exists:h=>!!u(h),getAllByType:h=>Object.values(e.droppables).filter(g=>g.descriptor.type===h)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:m,subscribe:r,clean:f}}function nq(){const e=Mt(rq,[]);return N.useEffect(()=>function(){e.clean()},[e]),e}var hb=V.createContext(null),Kd=()=>{const e=document.body;return e||Be(),e};const sq={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},aq=e=>`rfd-announcement-${e}`;function iq(e){const t=Mt(()=>aq(e),[e]),r=N.useRef(null);return N.useEffect(function(){const i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),dr(i.style,sq),Kd().appendChild(i),function(){setTimeout(function(){const d=Kd();d.contains(i)&&d.removeChild(i),i===r.current&&(r.current=null)})}},[t]),ut(a=>{const i=r.current;if(i){i.textContent=a;return}},[])}const oq={separator:"::"};function pb(e,t=oq){const r=V.useId();return Mt(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function lq({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function cq({contextId:e,text:t}){const r=pb("hidden-text",{separator:"-"}),s=Mt(()=>lq({contextId:e,uniqueId:r}),[r,e]);return N.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",Kd().appendChild(i),function(){const u=Kd();u.contains(i)&&u.removeChild(i)}},[s,t]),s}var Af=V.createContext(null);function wA(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),t}function uq(){let e=null;function t(){return!!e}function r(l){return l===e}function s(l){e&&Be();const u={abandon:l};return e=u,u}function a(){e||Be(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:i}}function ic(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const dq=9,fq=13,gb=27,NA=32,mq=33,hq=34,pq=35,gq=36,xq=37,yq=38,vq=39,bq=40,wq={[fq]:!0,[dq]:!0};var jA=e=>{wq[e.keyCode]&&e.preventDefault()};const Tf=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),SA=0,z2=5;function Nq(e,t){return Math.abs(t.x-e.x)>=z2||Math.abs(t.y-e.y)>=z2}const G2={type:"IDLE"};function jq({cancel:e,completed:t,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:i,clientX:l,clientY:u}=a;if(i!==SA)return;const d={x:l,y:u},m=r();if(m.type==="DRAGGING"){a.preventDefault(),m.actions.move(d);return}m.type!=="PENDING"&&Be();const f=m.point;if(!Nq(f,d))return;a.preventDefault();const h=m.actions.fluidLift(d);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:a=>{const i=r();if(i.type!=="DRAGGING"){e();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===gb){a.preventDefault(),e();return}jA(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const i=r();if(i.type==="IDLE"&&Be(),i.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:Tf,fn:e}]}function Sq(e){const t=N.useRef(G2),r=N.useRef(ka),s=Mt(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==SA||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const g=e.findClosestDraggableId(h);if(!g)return;const x=e.tryGetLock(g,l,{sourceEvent:h});if(!x)return;h.preventDefault();const b={x:h.clientX,y:h.clientY};r.current(),m(x,b)}}),[e]),a=Mt(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const h=e.findClosestDraggableId(f);if(!h)return;const g=e.findOptionsForDraggable(h);g&&(g.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}),[e]),i=ut(function(){const h={passive:!1,capture:!0};r.current=Zn(window,[a,s],h)},[a,s]),l=ut(()=>{t.current.type!=="IDLE"&&(t.current=G2,r.current(),i())},[i]),u=ut(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=ut(function(){const h={capture:!0,passive:!1},g=jq({cancel:u,completed:l,getPhase:()=>t.current,setPhase:x=>{t.current=x}});r.current=Zn(window,g,h)},[u,l]),m=ut(function(h,g){t.current.type!=="IDLE"&&Be(),t.current={type:"PENDING",point:g,actions:h},d()},[d]);On(function(){return i(),function(){r.current()}},[i])}function kq(){}const Cq={[hq]:!0,[mq]:!0,[gq]:!0,[pq]:!0};function _q(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===gb){a.preventDefault(),r();return}if(a.keyCode===NA){a.preventDefault(),s();return}if(a.keyCode===bq){a.preventDefault(),e.moveDown();return}if(a.keyCode===yq){a.preventDefault(),e.moveUp();return}if(a.keyCode===vq){a.preventDefault(),e.moveRight();return}if(a.keyCode===xq){a.preventDefault(),e.moveLeft();return}if(Cq[a.keyCode]){a.preventDefault();return}jA(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Tf,fn:r}]}function Eq(e){const t=N.useRef(kq),r=Mt(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==NA)return;const l=e.findClosestDraggableId(i);if(!l)return;const u=e.tryGetLock(l,f,{sourceEvent:i});if(!u)return;i.preventDefault();let d=!0;const m=u.snapLift();t.current();function f(){d||Be(),d=!1,t.current(),s()}t.current=Zn(window,_q(m,f),{capture:!0,passive:!1})}}),[e]),s=ut(function(){const i={passive:!1,capture:!0};t.current=Zn(window,[r],i)},[r]);On(function(){return s(),function(){t.current()}},[s])}const Dp={type:"IDLE"},Dq=120,Aq=.15;function Tq({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===gb&&r.preventDefault(),e()}},{eventName:Tf,fn:e}]}function Pq({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:i,clientY:l}=s.touches[0],u={x:i,y:l};s.preventDefault(),a.actions.move(u)}},{eventName:"touchend",fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=r();a.type==="IDLE"&&Be();const i=s.touches[0];if(!i||!(i.force>=Aq))return;const u=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){u&&e();return}if(u){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Tf,fn:e}]}function Rq(e){const t=N.useRef(Dp),r=N.useRef(ka),s=ut(function(){return t.current},[]),a=ut(function(x){t.current=x},[]),i=Mt(()=>({eventName:"touchstart",fn:function(x){if(x.defaultPrevented)return;const b=e.findClosestDraggableId(x);if(!b)return;const v=e.tryGetLock(b,u,{sourceEvent:x});if(!v)return;const w=x.touches[0],{clientX:C,clientY:j}=w,_={x:C,y:j};r.current(),h(v,_)}}),[e]),l=ut(function(){const x={capture:!0,passive:!1};r.current=Zn(window,[i],x)},[i]),u=ut(()=>{const g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),a(Dp),r.current(),l())},[l,a]),d=ut(()=>{const g=t.current;u(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[u]),m=ut(function(){const x={capture:!0,passive:!1},b={cancel:d,completed:u,getPhase:s},v=Zn(window,Pq(b),x),w=Zn(window,Tq(b),x);r.current=function(){v(),w()}},[d,s,u]),f=ut(function(){const x=s();x.type!=="PENDING"&&Be();const b=x.actions.fluidLift(x.point);a({type:"DRAGGING",actions:b,hasMoved:!1})},[s,a]),h=ut(function(x,b){s().type!=="IDLE"&&Be();const v=setTimeout(f,Dq);a({type:"PENDING",point:b,actions:x,longPressTimerId:v}),m()},[m,s,a,f]);On(function(){return l(),function(){r.current();const b=s();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),a(Dp))}},[s,l,a]),On(function(){return Zn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Iq=["input","button","textarea","select","option","optgroup","video","audio"];function kA(e,t){if(t==null)return!1;if(Iq.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:kA(e,t.parentElement)}function Mq(e,t){const r=t.target;return Df(r)?kA(e,r):!1}var Oq=e=>ps(e.getBoundingClientRect()).center;function Lq(e){return e instanceof bA(e).Element}const $q=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function CA(e,t){return e==null?null:e[$q](t)?e:CA(e.parentElement,t)}function Fq(e,t){return e.closest?e.closest(t):CA(e,t)}function Bq(e){return`[${xo.contextId}="${e}"]`}function zq(e,t){const r=t.target;if(!Lq(r))return null;const s=Bq(e),a=Fq(r,s);return!a||!Df(a)?null:a}function Gq(e,t){const r=zq(e,t);return r?r.getAttribute(xo.draggableId):null}function qq(e,t){const r=`[${Hy.contextId}="${e}"]`,a=vA(document,r).find(i=>i.getAttribute(Hy.id)===t);return!a||!Df(a)?null:a}function Uq(e){e.preventDefault()}function nd({expected:e,phase:t,isLockActive:r,shouldWarn:s}){return!(!r()||e!==t)}function _A({lockAPI:e,store:t,registry:r,draggableId:s}){if(e.isClaimed())return!1;const a=r.draggable.findById(s);return!(!a||!a.options.isEnabled||!pA(t.getState(),s))}function Wq({lockAPI:e,contextId:t,store:r,registry:s,draggableId:a,forceSensorStop:i,sourceEvent:l}){if(!_A({lockAPI:e,store:r,registry:s,draggableId:a}))return null;const d=s.draggable.getById(a),m=qq(t,d.descriptor.id);if(!m||l&&!d.options.canDragInteractiveElements&&Mq(m,l))return null;const f=e.claim(i||ka);let h="PRE_DRAG";function g(){return d.options.shouldRespectForcePress}function x(){return e.isActive(f)}function b(D,A){nd({expected:D,phase:h,isLockActive:x,shouldWarn:!0})&&r.dispatch(A())}const v=b.bind(null,"DRAGGING");function w(D){function A(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(A(),Be()),r.dispatch(F9(D.liftActionArgs)),h="DRAGGING";function T(I,L={shouldBlockNextClick:!1}){if(D.cleanup(),L.shouldBlockNextClick){const q=Zn(window,[{eventName:"click",fn:Uq,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(q)}A(),r.dispatch(oA({reason:I}))}return{isActive:()=>nd({expected:"DRAGGING",phase:h,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:g,drop:I=>T("DROP",I),cancel:I=>T("CANCEL",I),...D.actions}}function C(D){const A=ec(I=>{v(()=>iA({client:I}))});return{...w({liftActionArgs:{id:a,clientSelection:D,movementMode:"FLUID"},cleanup:()=>A.cancel(),actions:{move:A}}),move:A}}function j(){const D={moveUp:()=>v(Y9),moveRight:()=>v(Q9),moveDown:()=>v(K9),moveLeft:()=>v(X9)};return w({liftActionArgs:{id:a,clientSelection:Oq(m),movementMode:"SNAP"},cleanup:ka,actions:D})}function _(){nd({expected:"PRE_DRAG",phase:h,isLockActive:x,shouldWarn:!0})&&e.release()}return{isActive:()=>nd({expected:"PRE_DRAG",phase:h,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:C,snapLift:j,abort:_}}const Hq=[Sq,Eq,Rq];function Vq({contextId:e,store:t,registry:r,customSensors:s,enableDefaultSensors:a}){const i=[...a?Hq:[],...s||[]],l=N.useState(()=>uq())[0],u=ut(function(w,C){ic(w)&&!ic(C)&&l.tryAbandon()},[l]);On(function(){let w=t.getState();return t.subscribe(()=>{const j=t.getState();u(w,j),w=j})},[l,t,u]),On(()=>l.tryAbandon,[l.tryAbandon]);const d=ut(v=>_A({lockAPI:l,registry:r,store:t,draggableId:v}),[l,r,t]),m=ut((v,w,C)=>Wq({lockAPI:l,registry:r,contextId:e,store:t,draggableId:v,forceSensorStop:w||null,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null}),[e,l,r,t]),f=ut(v=>Gq(e,v),[e]),h=ut(v=>{const w=r.draggable.findById(v);return w?w.options:null},[r.draggable]),g=ut(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(ob()))},[l,t]),x=ut(()=>l.isClaimed(),[l]),b=Mt(()=>({canGetLock:d,tryGetLock:m,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:g,isLockClaimed:x}),[d,m,f,h,g,x]);for(let v=0;v<i.length;v++)i[v](b)}const Yq=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};xv.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Kq=e=>({...ac,...e.autoScrollerOptions,durationDampening:{...ac.durationDampening,...e.autoScrollerOptions}});function Al(e){return e.current||Be(),e.current}function Qq(e){const{contextId:t,setCallbacks:r,sensors:s,nonce:a,dragHandleUsageInstructions:i}=e,l=N.useRef(null),u=wA(e),d=ut(()=>Yq(u.current),[u]),m=ut(()=>Kq(u.current),[u]),f=iq(t),h=cq({contextId:t,text:i}),g=ZG(t,a),x=ut(q=>{Al(l).dispatch(q)},[]),b=Mt(()=>h2({publishWhileDragging:z9,updateDroppableScroll:q9,updateDroppableIsEnabled:U9,updateDroppableIsCombineEnabled:W9,collectionStarting:G9},x),[x]),v=nq(),w=Mt(()=>TG(v,b),[v,b]),C=Mt(()=>YG({scrollWindow:PG,scrollDroppable:w.scrollDroppable,getAutoScrollerOptions:m,...h2({move:iA},x)}),[w.scrollDroppable,x,m]),j=tq(t),_=Mt(()=>_G({announce:f,autoScroller:C,dimensionMarshal:w,focusMarshal:j,getResponders:d,styleMarshal:g}),[f,C,w,j,d,g]);l.current=_;const k=ut(()=>{const q=Al(l);q.getState().phase!=="IDLE"&&q.dispatch(ob())},[]),D=ut(()=>{const q=Al(l).getState();return q.phase==="DROP_ANIMATING"?!0:q.phase==="IDLE"?!1:q.isDragging},[]),A=Mt(()=>({isDragging:D,tryAbort:k}),[D,k]);r(A);const T=ut(q=>pA(Al(l).getState(),q),[]),I=ut(()=>ti(Al(l).getState()),[]),L=Mt(()=>({marshal:w,focus:j,contextId:t,canLift:T,isMovementAllowed:I,dragHandleUsageInstructionsId:h,registry:v}),[t,w,h,j,T,I,v]);return Vq({contextId:t,store:_,registry:v,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),N.useEffect(()=>k,[k]),V.createElement(Af.Provider,{value:L},V.createElement(RD,{context:hb,store:_},e.children))}function Xq(){return V.useId()}function Jq(e){const t=Xq(),r=e.dragHandleUsageInstructions||xd.dragHandleUsageInstructions;return V.createElement(Ez,null,s=>V.createElement(Qq,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const q2={dragging:5e3,dropAnimating:4500},Zq=(e,t)=>t?ql.drop(t.duration):e?ql.snap:ql.fluid,eU=(e,t)=>{if(e)return t?sc.opacity.drop:sc.opacity.combining},tU=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function rU(e){const r=e.dimension.client,{offset:s,combineWith:a,dropping:i}=e,l=!!a,u=tU(e),d=!!i,m=d?Uy.drop(s,l):Uy.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Zq(u,i),transform:m,opacity:eU(l,d),zIndex:d?q2.dropAnimating:q2.dragging,pointerEvents:"none"}}function nU(e){return{transform:Uy.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function sU(e){return e.type==="DRAGGING"?rU(e):nU(e)}function aU(e,t,r=Lr){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=ID(a,s),l=Wd(i,r),u={client:i,tagName:t.tagName.toLowerCase(),display:s.display},d={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:u,displaceBy:d,client:i,page:l}}function iU(e){const t=pb("draggable"),{descriptor:r,registry:s,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:u}=e,d=Mt(()=>({canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:u}),[i,u,l]),m=ut(x=>{const b=a();return b||Be(),aU(r,b,x)},[r,a]),f=Mt(()=>({uniqueId:t,descriptor:r,options:d,getDimension:m}),[r,m,d,t]),h=N.useRef(f),g=N.useRef(!0);On(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),On(()=>{if(g.current){g.current=!1;return}const x=h.current;h.current=f,s.draggable.update(f,x)},[f,s.draggable])}var xb=V.createContext(null);function Qd(e){const t=N.useContext(e);return t||Be(),t}function oU(e){e.preventDefault()}const lU=e=>{const t=N.useRef(null),r=ut((A=null)=>{t.current=A},[]),s=ut(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:i,registry:l}=Qd(Af),{type:u,droppableId:d}=Qd(xb),m=Mt(()=>({id:e.draggableId,index:e.index,type:u,droppableId:d}),[e.draggableId,e.index,u,d]),{children:f,draggableId:h,isEnabled:g,shouldRespectForcePress:x,canDragInteractiveElements:b,isClone:v,mapped:w,dropAnimationFinished:C}=e;if(!v){const A=Mt(()=>({descriptor:m,registry:l,getDraggableRef:s,canDragInteractiveElements:b,shouldRespectForcePress:x,isEnabled:g}),[m,l,s,b,x,g]);iU(A)}const j=Mt(()=>g?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:oU}:null,[a,i,h,g]),_=ut(A=>{w.type==="DRAGGING"&&w.dropping&&A.propertyName==="transform"&&xv.flushSync(C)},[C,w]),k=Mt(()=>{const A=sU(w),T=w.type==="DRAGGING"&&w.dropping?_:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":h,style:A,onTransitionEnd:T},dragHandleProps:j}},[a,j,h,w,_,r]),D=Mt(()=>({draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}),[m.droppableId,m.id,m.index,m.type]);return V.createElement(V.Fragment,null,f(k,w.snapshot,D))};var EA=(e,t)=>e===t,DA=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const cU=e=>e.combine?e.combine.draggableId:null,uU=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function dU(){const e=Or((a,i)=>({x:a,y:i})),t=Or((a,i,l=null,u=null,d=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!d,dropAnimation:d,mode:a,draggingOver:l,combineWith:u,combineTargetFor:null})),r=Or((a,i,l,u,d=null,m=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:m,mode:i,offset:a,dimension:l,forceShouldAnimate:f,snapshot:t(i,u,d,m,null)}}));return(a,i)=>{if(ic(a)){if(a.critical.draggable.id!==i.draggableId)return null;const l=a.current.client.offset,u=a.dimensions.draggables[i.draggableId],d=Mn(a.impact),m=uU(a.impact),f=a.forceShouldAnimate;return r(e(l.x,l.y),a.movementMode,u,i.isClone,d,m,f)}if(a.phase==="DROP_ANIMATING"){const l=a.completed;if(l.result.draggableId!==i.draggableId)return null;const u=i.isClone,d=a.dimensions.draggables[i.draggableId],m=l.result,f=m.mode,h=DA(m),g=cU(m),b={duration:a.dropDuration,curve:cb.drop,moveTo:a.newHomeClientOffset,opacity:g?sc.opacity.drop:null,scale:g?sc.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:d,dropping:b,draggingOver:h,combineWith:g,mode:f,forceShouldAnimate:null,snapshot:t(f,u,h,g,b)}}}return null}}function AA(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const fU={mapped:{type:"SECONDARY",offset:Lr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:AA(null)}};function mU(){const e=Or((l,u)=>({x:l,y:u})),t=Or(AA),r=Or((l,u=null,d)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:u,shouldAnimateDisplacement:d,snapshot:t(u)}})),s=l=>l?r(Lr,l,!0):null,a=(l,u,d,m)=>{const f=d.displaced.visible[l],h=!!(m.inVirtualList&&m.effected[l]),g=Cf(d),x=g&&g.draggableId===l?u:null;if(!f){if(!h)return s(x);if(d.displaced.invisible[l])return null;const w=Io(m.displacedBy.point),C=e(w.x,w.y);return r(C,x,!0)}if(h)return s(x);const b=d.displacedBy.point,v=e(b.x,b.y);return r(v,x,f.shouldAnimate)};return(l,u)=>{if(ic(l))return l.critical.draggable.id===u.draggableId?null:a(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const d=l.completed;return d.result.draggableId===u.draggableId?null:a(u.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const hU=()=>{const e=dU(),t=mU();return(s,a)=>e(s,a)||t(s,a)||fU},pU={dropAnimationFinished:lA},gU=PD(hU,pU,null,{context:hb,areStatePropsEqual:EA})(lU);function TA(e){return Qd(xb).isUsingCloneFor===e.draggableId&&!e.isClone?null:V.createElement(gU,e)}function U2(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return V.createElement(TA,dr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const PA=e=>t=>e===t,xU=PA("scroll"),yU=PA("auto"),W2=(e,t)=>t(e.overflowX)||t(e.overflowY),vU=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return W2(r,xU)||W2(r,yU)},bU=()=>!1,RA=e=>e==null?null:e===document.body?bU()?e:null:e===document.documentElement?null:vU(e)?e:RA(e.parentElement);var Vy=e=>({x:e.scrollLeft,y:e.scrollTop});const IA=e=>e?window.getComputedStyle(e).position==="fixed"?!0:IA(e.parentElement):!1;var wU=e=>{const t=RA(e),r=IA(e);return{closestScrollable:t,isFixedOnPage:r}},NU=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:s,direction:a,client:i,page:l,closest:u})=>{const d=(()=>{if(!u)return null;const{scrollSize:g,client:x}=u,b=fA({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:x.paddingBox.height,width:x.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:x,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:b,diff:{value:Lr,displacement:Lr}}}})(),m=a==="vertical"?rb:WD,f=po({page:l,withPlaceholder:null,axis:m,frame:d});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:m,isEnabled:t,client:i,page:l,frame:d,subject:f}};const jU=(e,t)=>{const r=MD(e);if(!t||e!==t)return r;const s=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,l=a+t.scrollWidth,d=Jv({top:s,right:l,bottom:i,left:a},r.border);return Zv({borderBox:d,margin:r.margin,border:r.border,padding:r.padding})};var SU=({ref:e,descriptor:t,env:r,windowScroll:s,direction:a,isDropDisabled:i,isCombineEnabled:l,shouldClipSubject:u})=>{const d=r.closestScrollable,m=jU(e,d),f=Wd(m,s),h=(()=>{if(!d)return null;const x=MD(d),b={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:x,page:Wd(x,s),scroll:Vy(d),scrollSize:b,shouldClipSubject:u}})();return NU({descriptor:t,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:a,client:m,page:f,closest:h})};const kU={passive:!1},CU={passive:!0};var H2=e=>e.shouldPublishImmediately?kU:CU;const sd=e=>e&&e.env.closestScrollable||null;function _U(e){const t=N.useRef(null),r=Qd(Af),s=pb("droppable"),{registry:a,marshal:i}=r,l=wA(e),u=Mt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),d=N.useRef(u),m=Mt(()=>Or((k,D)=>{t.current||Be();const A={x:k,y:D};i.updateDroppableScroll(u.id,A)}),[u.id,i]),f=ut(()=>{const k=t.current;return!k||!k.env.closestScrollable?Lr:Vy(k.env.closestScrollable)},[]),h=ut(()=>{const k=f();m(k.x,k.y)},[f,m]),g=Mt(()=>ec(h),[h]),x=ut(()=>{const k=t.current,D=sd(k);if(k&&D||Be(),k.scrollOptions.shouldPublishImmediately){h();return}g()},[g,h]),b=ut((k,D)=>{t.current&&Be();const A=l.current,T=A.getDroppableRef();T||Be();const I=wU(T),L={ref:T,descriptor:u,env:I,scrollOptions:D};t.current=L;const q=SU({ref:T,descriptor:u,env:I,windowScroll:k,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),O=I.closestScrollable;return O&&(O.setAttribute(F2.contextId,r.contextId),O.addEventListener("scroll",x,H2(L.scrollOptions))),q},[r.contextId,u,x,l]),v=ut(()=>{const k=t.current,D=sd(k);return k&&D||Be(),Vy(D)},[]),w=ut(()=>{const k=t.current;k||Be();const D=sd(k);t.current=null,D&&(g.cancel(),D.removeAttribute(F2.contextId),D.removeEventListener("scroll",x,H2(k.scrollOptions)))},[x,g]),C=ut(k=>{const D=t.current;D||Be();const A=sd(D);A||Be(),A.scrollTop+=k.y,A.scrollLeft+=k.x},[]),j=Mt(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:v,dragStopped:w,scroll:C}),[w,b,v,C]),_=Mt(()=>({uniqueId:s,descriptor:u,callbacks:j}),[j,u,s]);On(()=>(d.current=_.descriptor,a.droppable.register(_),()=>{t.current&&w(),a.droppable.unregister(_)}),[j,u,w,_,i,a.droppable]),On(()=>{t.current&&i.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),On(()=>{t.current&&i.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Ap(){}const V2={width:0,height:0,margin:Mz},EU=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?V2:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},DU=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const s=EU({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?ql.placeholder:null}},AU=e=>{const t=N.useRef(null),r=ut(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:i,contextId:l}=e,[u,d]=N.useState(e.animate==="open");N.useEffect(()=>u?s!=="open"?(r(),d(!1),Ap):t.current?Ap:(t.current=setTimeout(()=>{t.current=null,d(!1)}),r):Ap,[s,u,r]);const m=ut(h=>{h.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),f=DU({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return V.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":l,onTransitionEnd:m,ref:e.innerRef})};var TU=V.memo(AU);class PU extends V.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const RU=e=>{const t=N.useContext(Af);t||Be();const{contextId:r,isMovementAllowed:s}=t,a=N.useRef(null),i=N.useRef(null),{children:l,droppableId:u,type:d,mode:m,direction:f,ignoreContainerClipping:h,isDropDisabled:g,isCombineEnabled:x,snapshot:b,useClone:v,updateViewportMaxScroll:w,getContainerForClone:C}=e,j=ut(()=>a.current,[]),_=ut((O=null)=>{a.current=O},[]);ut(()=>i.current,[]);const k=ut((O=null)=>{i.current=O},[]),D=ut(()=>{s()&&w({maxScroll:hA()})},[s,w]);_U({droppableId:u,type:d,mode:m,direction:f,isDropDisabled:g,isCombineEnabled:x,ignoreContainerClipping:h,getDroppableRef:j});const A=Mt(()=>V.createElement(PU,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:O,data:$,animate:z})=>V.createElement(TU,{placeholder:$,onClose:O,innerRef:k,animate:z,contextId:r,onTransitionEnd:D})),[r,D,e.placeholder,e.shouldAnimatePlaceholder,k]),T=Mt(()=>({innerRef:_,placeholder:A,droppableProps:{"data-rfd-droppable-id":u,"data-rfd-droppable-context-id":r}}),[r,u,A,_]),I=v?v.dragging.draggableId:null,L=Mt(()=>({droppableId:u,type:d,isUsingCloneFor:I}),[u,I,d]);function q(){if(!v)return null;const{dragging:O,render:$}=v,z=V.createElement(TA,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(K,te)=>$(K,te,O));return yv.createPortal(z,C())}return V.createElement(xb.Provider,{value:L},l(T,b),q())};function IU(){return document.body||Be(),document.body}const Y2={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:IU},MA=e=>{let t={...e},r;for(r in Y2)e[r]===void 0&&(t={...t,[r]:Y2[r]});return t},Tp=(e,t)=>e===t.droppable.type,K2=(e,t)=>t.draggables[e.draggable.id],MU=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Or(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=Or((i,l,u,d,m,f)=>{const h=m.descriptor.id;if(m.descriptor.droppableId===i){const b=f?{render:f,dragging:r(m.descriptor)}:null,v={isDraggingOver:u,draggingOverWith:u?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:b}}if(!l)return t;if(!d)return e;const x={isDraggingOver:u,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}});return(i,l)=>{const u=MA(l),d=u.droppableId,m=u.type,f=!u.isDropDisabled,h=u.renderClone;if(ic(i)){const g=i.critical;if(!Tp(m,g))return t;const x=K2(g,i.dimensions),b=Mn(i.impact)===d;return s(d,f,b,b,x,h)}if(i.phase==="DROP_ANIMATING"){const g=i.completed;if(!Tp(m,g.critical))return t;const x=K2(g.critical,i.dimensions);return s(d,f,DA(g.result)===d,Mn(g.impact)===d,x,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const g=i.completed;if(!Tp(m,g.critical))return t;const x=Mn(g.impact)===d,b=!!(g.impact.at&&g.impact.at.type==="COMBINE"),v=g.critical.droppable.id===d;return x?b?e:t:v?e:t}return t}},OU={updateViewportMaxScroll:V9},Q2=PD(MU,OU,(e,t,r)=>({...MA(r),...e,...t}),{context:hb,areStatePropsEqual:EA})(RU),LU=({courseId:e})=>{const[t,r]=N.useState([]),[s,a]=N.useState(null),[i,l]=N.useState([]),[u,d]=N.useState([]),[m,f]=N.useState(!0),[h,g]=N.useState(null),[x,b]=N.useState(!1),[v,w]=N.useState(!1),[C,j]=N.useState(!1),[_,k]=N.useState(""),[D,A]=N.useState(""),[T,I]=N.useState(4),[L,q]=N.useState([]),[O,$]=N.useState(!1),[z,K]=N.useState(!1),[te,se]=N.useState(!1),[W,M]=N.useState(!1),[Y,P]=N.useState(null),[G,Z]=N.useState(null),[F,Ne]=N.useState(""),[ye,B]=N.useState(""),[re,X]=N.useState(new Set),[U,ne]=N.useState("manual"),[pe,xe]=N.useState(2),[ke,ze]=N.useState(2),He=Lt();N.useEffect(()=>{(async()=>{var Ee,Ue;try{const ie=localStorage.getItem("token"),[be,me]=await Promise.all([Re.get(`${Ae}/api/groups/sets/${e}`),Re.get(`${Ae}/api/courses/${e}/students`)]);r(be.data),d(me.data)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error loading data")}finally{f(!1)}})()},[e]),N.useEffect(()=>{(async()=>{var Ee,Ue;if(s)try{const ie=localStorage.getItem("token"),be=await Re.get(`${Ae}/api/groups/sets/${s._id}/groups`);l(be.data)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error loading groups")}})()},[s]),N.useEffect(()=>{s&&console.log("[DEBUG] selectedSet:",s)},[s]);const it=async ce=>{var Ee,Ue;ce.preventDefault();try{const ie=localStorage.getItem("token"),be={name:_,courseId:e,allowSelfSignup:O};U==="byGroupCount"||U==="byStudentsPerGroup"?be.groupStructure=U:be.groupStructure="manual",U==="byGroupCount"&&(be.groupCount=pe),U==="byStudentsPerGroup"&&(be.studentsPerGroup=ke);const me=await Re.post(`${Ae}/api/groups/sets`,be,{headers:{Authorization:`Bearer ${ie}`}});me.data.groupSet?(r([...t,me.data.groupSet]),a(me.data.groupSet),l(me.data.groups||[])):(r([...t,me.data]),a(me.data),l([])),b(!1),k(""),$(!1),ne("manual"),xe(2),ze(2)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error creating group set")}},Ge=async ce=>{var ie,be,me,Q,ae;if(ce.preventDefault(),!s)return;const Ee=`${D.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}-${Math.floor(Math.random()*1e4)}`;let Ue={name:D,groupId:Ee};if(s.groupStructure!=="manual"){if(L.length===0){g("Please select at least one member.");return}Ue.members=L,Ue.leader=L[0]}console.log("[DEBUG] Creating group with payload:",Ue);try{const Te=localStorage.getItem("token"),Ve=await Re.post(`${Ae}/api/groups/sets/${s._id}/groups`,Ue,{headers:{Authorization:`Bearer ${Te}`}});l([...i,Ve.data]),w(!1),A(""),q([]),He(`/groups/${Ve.data._id}`)}catch(Te){console.error("[DEBUG] Error creating group:",((ie=Te.response)==null?void 0:ie.data)||Te.message),g(((me=(be=Te.response)==null?void 0:be.data)==null?void 0:me.message)||((ae=(Q=Te.response)==null?void 0:Q.data)==null?void 0:ae.error)||"Error creating group")}},rt=async ce=>{var Ee,Ue;if(ce.preventDefault(),!!s)try{const ie=localStorage.getItem("token"),be=await Re.post(`${Ae}/api/groups/sets/${s._id}/auto-split`,{groupSize:T,students:u.map(me=>me._id)},{headers:{Authorization:`Bearer ${ie}`}});l(be.data),j(!1)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error auto-splitting students")}},mt=async ce=>{var Ee,Ue;if(ce.preventDefault(),!!Y)try{const ie=localStorage.getItem("token"),be=await Re.put(`${Ae}/api/groups/${Y._id}`,{name:D,leader:L[0],members:L},{headers:{Authorization:`Bearer ${ie}`}});l(i.map(me=>me._id===Y._id?be.data:me)),K(!1),P(null)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error updating group")}},et=async ce=>{var Ee,Ue;if(ce.preventDefault(),!!Y)try{const ie=localStorage.getItem("token");await Re.post(`${Ae}/api/groups/${Y._id}/message`,{subject:F,content:ye},{headers:{Authorization:`Bearer ${ie}`}}),se(!1),Ne(""),B(""),P(null)}catch(ie){g(((Ue=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Error sending message")}},ve=ce=>{const Ee=new Set(re);Ee.has(ce)?Ee.delete(ce):Ee.add(ce),X(Ee)},he=async ce=>{var be,me,Q,ae;if(!ce.destination)return;const{source:Ee,destination:Ue,draggableId:ie}=ce;if(s&&s.groupStructure==="manual"&&Ue.droppableId.startsWith("group-")){const Te=Ue.droppableId.replace("group-",""),Ve=u.find($e=>$e._id===ie);if(!Ve)return;const We=i.find($e=>$e.members.some(lt=>lt._id===Ve._id));if(!i.find($e=>$e._id===Te))return;let st=i.map($e=>We&&$e._id===We._id?{...$e,members:$e.members.filter(lt=>lt._id!==Ve._id)}:$e);st=st.map($e=>$e._id===Te&&!$e.members.some(lt=>lt._id===Ve._id)?{...$e,members:[...$e.members,Ve]}:$e),l(st);try{const $e=localStorage.getItem("token");if(We&&We._id!==Te){const Rt=((be=st.find(Kt=>Kt._id===We._id))==null?void 0:be.members.map(Kt=>Kt._id))||[];await Re.put(`${Ae}/api/groups/${We._id}`,{members:Rt,leader:Rt[0]||null},{headers:{Authorization:`Bearer ${$e}`}})}const lt=((me=st.find(Rt=>Rt._id===Te))==null?void 0:me.members.map(Rt=>Rt._id))||[];await Re.put(`${Ae}/api/groups/${Te}`,{members:lt,leader:lt[0]||null},{headers:{Authorization:`Bearer ${$e}`}});const gt=await Re.get(`${Ae}/api/groups/sets/${s._id}/groups`);l(gt.data)}catch($e){g(((ae=(Q=$e.response)==null?void 0:Q.data)==null?void 0:ae.message)||"Error updating group")}}};return m?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Group Management"}),n.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(ii,{className:"h-5 w-5 mr-2"}),"Create Group Set"]})]}),h&&n.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:h}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Group Sets"}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(ce=>n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${(s==null?void 0:s._id)===ce._id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>a(ce),children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:ce.name}),n.jsx("p",{className:"text-sm text-gray-500",children:ce.allowSelfSignup?"Self-signup enabled":"Self-signup disabled"})]})})},ce._id))})]}),s&&n.jsx(Jq,{onDragEnd:he,children:n.jsxs("div",{className:"flex gap-6",children:[s.groupStructure==="manual"&&n.jsxs("div",{className:"w-64 bg-gray-50 border rounded-lg p-4 h-fit",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Students"}),n.jsx(Q2,{droppableId:"students-list",children:ce=>n.jsxs("ul",{ref:ce.innerRef,...ce.droppableProps,className:"space-y-2 min-h-[40px]",children:[u.filter(Ee=>!i.some(Ue=>Ue.members.some(ie=>ie._id===Ee._id))).map((Ee,Ue)=>n.jsx(U2,{draggableId:Ee._id,index:Ue,children:ie=>n.jsxs("li",{ref:ie.innerRef,...ie.draggableProps,...ie.dragHandleProps,className:"p-2 bg-white border rounded flex items-center gap-2 shadow-sm cursor-move",children:[n.jsx(cr,{className:"h-4 w-4 text-gray-400"}),Ee.firstName," ",Ee.lastName]})},Ee._id)),ce.placeholder]})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Groups in ",s.name]}),s.groupStructure==="manual"&&n.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(ii,{className:"h-4 w-4 mr-1"}),"Group"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:i.map(ce=>n.jsx(Q2,{droppableId:`group-${ce._id}`,children:Ee=>n.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg min-h-[80px] cursor-pointer",onClick:Ue=>{Ue.target.closest("button")||He(`/groups/${ce._id}`)},ref:Ee.innerRef,...Ee.droppableProps,children:[n.jsx("div",{className:"flex justify-between items-start mb-2",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>ve(ce._id),className:"text-gray-400 hover:text-gray-500",children:re.has(ce._id)?n.jsx(hO,{className:"h-5 w-5"}):n.jsx(_v,{className:"h-5 w-5"})}),n.jsx("h4",{className:"font-medium text-gray-900",children:ce.name})]})}),re.has(ce._id)&&n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Members:"}),n.jsxs("ul",{className:"text-sm text-gray-600",children:[ce.members.map((Ue,ie)=>n.jsx(U2,{draggableId:Ue._id,index:ie,children:be=>n.jsxs("li",{ref:be.innerRef,...be.draggableProps,className:"flex items-center p-2 bg-white border rounded mb-1 gap-2 shadow-sm",children:[n.jsx("span",{...be.dragHandleProps,className:"cursor-grab px-1 text-gray-400 flex items-center","aria-label":"Drag handle",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"4",cy:"8",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"4",cy:"12",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"4",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"8",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"12",r:"1",fill:"currentColor"})]})}),n.jsx(cr,{className:"h-4 w-4 text-gray-400"}),Ue.firstName," ",Ue.lastName]})},Ue._id)),Ee.placeholder]})]})]},ce._id)},ce._id))})]})]})}),x&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Group Set"}),n.jsxs("form",{onSubmit:it,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),n.jsx("input",{type:"text",id:"new-set-name",name:"newSetName",value:_,onChange:ce=>k(ce.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"allow-self-signup",name:"allowSelfSignup",checked:O,onChange:ce=>$(ce.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow self-signup"})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupStructure",className:"block text-sm font-medium text-gray-700",children:"Group Structure"}),n.jsxs("select",{id:"groupStructure",name:"groupStructure",value:U,onChange:ce=>ne(ce.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[n.jsx("option",{value:"manual",children:"Create groups later"}),n.jsx("option",{value:"byGroupCount",children:"Split students by number of groups"}),n.jsx("option",{value:"byStudentsPerGroup",children:"Split number of students per group"})]})]}),U==="byGroupCount"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupCount",className:"block text-sm font-medium text-gray-700",children:"Number of Groups"}),n.jsx("input",{id:"groupCount",name:"groupCount",type:"number",min:2,value:pe,onChange:ce=>xe(Number(ce.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),U==="byStudentsPerGroup"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"studentsPerGroup",className:"block text-sm font-medium text-gray-700",children:"Number of Students per Group"}),n.jsx("input",{id:"studentsPerGroup",name:"studentsPerGroup",type:"number",min:2,value:ke,onChange:ce=>ze(Number(ce.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the number of students you want in each group. Minimum is 2."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Create"})]})]})]})}),v&&s&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Group"}),n.jsxs("form",{onSubmit:Ge,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupName",className:"block text-sm font-medium text-gray-700",children:"Group Name"}),n.jsx("input",{id:"groupName",name:"groupName",type:"text",value:D,onChange:ce=>A(ce.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.groupStructure!=="manual"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupMembers",className:"block text-sm font-medium text-gray-700",children:"Select Members"}),n.jsx("select",{id:"groupMembers",name:"groupMembers",multiple:!0,value:L,onChange:ce=>q(Array.from(ce.target.selectedOptions,Ee=>Ee.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:u.map(ce=>n.jsxs("option",{value:ce._id,children:[ce.firstName," ",ce.lastName]},ce._id))}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Hold Ctrl/Cmd to select multiple students"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Create"})]})]})]})}),C&&s&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Auto-split Students"}),n.jsxs("form",{onSubmit:rt,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Group Size"}),n.jsx("input",{type:"number",id:"auto-split-group-size",name:"groupSize",min:"2",max:u.length,value:T,onChange:ce=>I(parseInt(ce.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Students will be randomly assigned to groups of this size"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Auto-split"})]})]})]})}),z&&Y&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Group"}),n.jsxs("form",{onSubmit:mt,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"editGroupName",className:"block text-sm font-medium text-gray-700",children:"Group Name"}),n.jsx("input",{id:"editGroupName",name:"editGroupName",type:"text",value:D,onChange:ce=>A(ce.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"editGroupMembers",className:"block text-sm font-medium text-gray-700",children:"Select Members"}),n.jsx("select",{id:"editGroupMembers",name:"editGroupMembers",multiple:!0,value:L,onChange:ce=>q(Array.from(ce.target.selectedOptions,Ee=>Ee.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:u.map(ce=>n.jsxs("option",{value:ce._id,children:[ce.firstName," ",ce.lastName]},ce._id))}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"First selected student will be the group leader"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{K(!1),P(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Save Changes"})]})]})]})}),te&&Y&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Message Group: ",Y.name]}),n.jsxs("form",{onSubmit:et,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),n.jsx("input",{type:"text",value:F,onChange:ce=>Ne(ce.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message"}),n.jsx("textarea",{value:ye,onChange:ce=>B(ce.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{se(!1),P(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Send Message"})]})]})]})}),W&&G&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Group Activity"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Submissions"}),G.submissions.length>0?n.jsx("div",{className:"space-y-2",children:G.submissions.map(ce=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"font-medium",children:ce.assignment.title}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted: ",new Date(ce.submittedAt).toLocaleString()]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",n.jsx("span",{className:`font-medium ${ce.status==="graded"?"text-green-600":ce.status==="submitted"?"text-blue-600":"text-yellow-600"}`,children:ce.status})]})]},ce._id))}):n.jsx("p",{className:"text-gray-500",children:"No submissions yet"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Discussions"}),G.discussions.length>0?n.jsx("div",{className:"space-y-2",children:G.discussions.map(ce=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"font-medium",children:ce.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:ce.content}),n.jsxs("p",{className:"text-xs text-gray-500",children:["By ",ce.author.firstName," ",ce.author.lastName," on"," ",new Date(ce.createdAt).toLocaleString()]})]},ce._id))}):n.jsx("p",{className:"text-gray-500",children:"No discussions yet"})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>{M(!1),Z(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})]})},$U=({courseId:e,userId:t})=>{const[r,s]=N.useState([]),[a,i]=N.useState(!0),[l,u]=N.useState(null),d=Lt();N.useEffect(()=>{(async()=>{var h,g;try{const x=localStorage.getItem("token"),v=(await we.get(`${Ae}/api/groups/sets/${e}`,{headers:{Authorization:`Bearer ${x}`}})).data,w=[];for(const C of v)try{(await we.get(`${Ae}/api/groups/sets/${C._id}/groups`,{headers:{Authorization:`Bearer ${x}`}})).data.filter(D=>D.members.some(A=>A._id===t)).forEach(D=>{w.push({groupSet:C,group:D})})}catch(j){console.error(`Error fetching groups for set ${C._id}:`,j)}s(w)}catch(x){u(((g=(h=x.response)==null?void 0:h.data)==null?void 0:g.message)||"Error loading enrolled groups")}finally{i(!1)}})()},[e,t]);const m=f=>{d(`/groups/${f}`)};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Groups"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Groups you are enrolled in for this course"})]}),l&&n.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:l}),r.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[n.jsx(cr,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No groups enrolled"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You are not enrolled in any groups for this course."})]}):n.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(({groupSet:f,group:h})=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name}),n.jsx("p",{className:"text-sm text-gray-500",children:f.name})]}),n.jsxs("button",{onClick:()=>m(h._id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100",children:[n.jsx(M4,{className:"h-4 w-4 mr-1"}),"View"]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Members (",h.members.length,"):"]}),n.jsx("ul",{className:"space-y-1",children:h.members.map(g=>n.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(cr,{className:"h-4 w-4 mr-2 text-gray-400"}),n.jsxs("span",{className:"flex-1",children:[g.firstName," ",g.lastName]}),h.leader._id===g._id&&n.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Leader"}),g._id===t&&n.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"You"})]},g._id))})]})})]},h._id))})]})},FU=({courseId:e,modules:t,isInstructor:r,isAdmin:s})=>{const[a,i]=N.useState([]),[l,u]=N.useState(!0),[d,m]=N.useState(null),[f,h]=N.useState(!1),[g,x]=N.useState("");N.useEffect(()=>{e&&(async()=>{u(!0),m(null);try{const C=localStorage.getItem("token"),j=await we.get(`${Ae}/api/pages/course/${e}`,{headers:{Authorization:`Bearer ${C}`}});i(j.data.data||[])}catch{m("Failed to load pages")}finally{u(!1)}})()},[e,f]);const b=()=>{h(!0)},v=()=>{h(!1)};return n.jsx("div",{className:"flex justify-center items-start py-8",children:n.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg p-0",children:[n.jsxs("div",{className:"flex justify-between items-center px-8 pt-8 pb-4 border-b border-gray-100 dark:border-gray-800",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Pages"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-300 mt-1",children:"All pages for this course"})]}),(r||s)&&t.length>0&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:b,className:"px-5 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow transition-colors text-base",children:"+ Page"}),f&&n.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow-lg z-10 p-4",children:n.jsx(wa,{children:n.jsx(Hv,{modules:t,courseId:e,onSuccess:v,onCancel:()=>h(!1)})})})]})]}),l?n.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading pages..."}):d?n.jsx("div",{className:"text-center py-8 text-red-500",children:d}):a.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No pages available for this course."}):n.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:a.map(w=>n.jsxs("li",{className:"flex items-center px-8 py-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition group cursor-pointer",children:[n.jsx("span",{className:"mr-4 text-gray-400 group-hover:text-blue-500",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 8h8M8 12h8M8 16h4"})]})}),n.jsx(Er,{to:`/courses/${e}/pages/${w._id}`,className:"font-medium text-blue-700 dark:text-blue-400 group-hover:underline text-lg truncate",children:w.title})]},w._id))})]})})},OA=({announcements:e,onSelect:t})=>{const{user:r}=Tt();return e.length?n.jsx("ul",{className:"space-y-4",children:e.map(s=>n.jsxs("li",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4 hover:shadow-md transition cursor-pointer border border-gray-100 dark:border-gray-700",onClick:()=>t==null?void 0:t(s),children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight",children:s.title}),n.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300 mt-1",children:(()=>{const a=new Date(s.createdAt),i=a.toLocaleDateString();let l=a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return`${i} at ${l}`})()})]}),n.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1 prose max-w-none",children:(()=>{const i=s.body.replace(/<[^>]+>/g,"").split(/\r?\n|\r|<br\s*\/?>/i)[0];return i.length>120?i.slice(0,120)+"…":i})()})]},s._id))}):n.jsx("div",{className:"text-gray-500",children:"No announcements yet."})},LA=({onSubmit:e,loading:t,onCancel:r,initialValues:s})=>{const[a,i]=N.useState(""),[l,u]=N.useState(""),[d,m]=N.useState("all"),[f,h]=N.useState(null),[g,x]=N.useState({delayPosting:!1,allowComments:!1,requirePostBeforeSeeingReplies:!1,enablePodcastFeed:!1,allowLiking:!1}),[b,v]=N.useState(""),[w,C]=N.useState([]),[j,_]=N.useState(""),{token:k}=Tt();N.useEffect(()=>{const A=window.location.pathname.match(/courses\/(\w+)/),T=A?A[1]:"";_(T),T&&fetch(`/api/groups/sets/${T}`,{headers:k?{Authorization:`Bearer ${k}`}:{}}).then(I=>I.json()).then(I=>{Array.isArray(I)&&C(I)})},[k]),N.useEffect(()=>{var A,T,I,L,q;s&&(i(s.title||""),u(s.body||""),m(s.postTo||"all"),x({delayPosting:!!((A=s.options)!=null&&A.delayPosting),allowComments:!!((T=s.options)!=null&&T.allowComments),requirePostBeforeSeeingReplies:!!((I=s.options)!=null&&I.requirePostBeforeSeeingReplies),enablePodcastFeed:!!((L=s.options)!=null&&L.enablePodcastFeed),allowLiking:!!((q=s.options)!=null&&q.allowLiking)}),v(s.delayedUntil||""))},[s]);const D=A=>{A.preventDefault();const T=new FormData;T.append("title",a),T.append("body",l),T.append("postTo",d),f&&Array.from(f).forEach(I=>T.append("attachments",I)),T.append("options",JSON.stringify(g)),g.delayPosting&&b&&T.append("delayedUntil",b),e(T)};return n.jsxs("form",{onSubmit:D,className:"space-y-4 bg-white rounded shadow p-6",children:[n.jsx("input",{type:"text",id:"announcement-title",name:"title",className:"w-full border rounded px-3 py-2",placeholder:"Topic Title",value:a,onChange:A=>i(A.target.value),required:!0}),n.jsx(fi,{content:l,onChange:u}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Post to"}),n.jsxs("select",{id:"announcement-post-to",name:"postTo",className:"border rounded px-2 py-1",value:d,onChange:A=>m(A.target.value),children:[n.jsx("option",{value:"all",children:"All Sections"}),w.map(A=>n.jsx("option",{value:A._id,children:A.name},A._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Attachments"}),n.jsx("input",{type:"file",id:"announcement-attachments",name:"attachments",multiple:!0,onChange:A=>h(A.target.files)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block font-medium",children:"Options"}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"delayPosting",checked:g.delayPosting,onChange:A=>x(T=>({...T,delayPosting:A.target.checked}))}),n.jsx("label",{htmlFor:"delayPosting",className:"ml-2",children:"Delay posting"})]}),g.delayPosting&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs mb-1",children:"Release date and time"}),n.jsx("input",{type:"datetime-local",id:"announcement-delayed-until",name:"delayedUntil",className:"border rounded px-2 py-1 text-sm",value:b,onChange:A=>v(A.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"allowComments",checked:g.allowComments,onChange:A=>x(T=>({...T,allowComments:A.target.checked}))}),n.jsx("label",{htmlFor:"allowComments",className:"ml-2",children:"Allow users to comment"})]}),n.jsxs("div",{className:"ml-6",children:[n.jsx("input",{type:"checkbox",id:"requirePostBeforeSeeingReplies",checked:g.requirePostBeforeSeeingReplies,onChange:A=>x(T=>({...T,requirePostBeforeSeeingReplies:A.target.checked})),disabled:!g.allowComments}),n.jsx("label",{htmlFor:"requirePostBeforeSeeingReplies",className:"ml-2",children:"Users must post before seeing replies"})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"enablePodcastFeed",checked:g.enablePodcastFeed,onChange:A=>x(T=>({...T,enablePodcastFeed:A.target.checked}))}),n.jsx("label",{htmlFor:"enablePodcastFeed",className:"ml-2",children:"Enable podcast feed"})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"allowLiking",checked:g.allowLiking,onChange:A=>x(T=>({...T,allowLiking:A.target.checked}))}),n.jsx("label",{htmlFor:"allowLiking",className:"ml-2",children:"Allow liking"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",onClick:r,children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:t,children:t?"Saving...":"Save"})]})]})},Yy=async e=>{const t=localStorage.getItem("token");return(await we.get(`${Ae}/api/courses/${e}/announcements`,{headers:{Authorization:`Bearer ${t}`}})).data.data},BU=async(e,t)=>{const r=localStorage.getItem("token");return(await we.post(`${Ae}/api/courses/${e}/announcements`,t,{headers:{Authorization:`Bearer ${r}`}})).data.data},yb=async e=>{const t=localStorage.getItem("token");return(await we.get(`${Ae}/api/announcements/${e}/comments`,{headers:{Authorization:`Bearer ${t}`}})).data.data},vb=async(e,t)=>{const r=localStorage.getItem("token");return(await we.post(`${Ae}/api/announcements/${e}/comments`,{text:t},{headers:{Authorization:`Bearer ${r}`}})).data},bb=async(e,t,r)=>{const s=localStorage.getItem("token");return(await we.post(`${Ae}/api/announcements/${e}/comments/${t}/reply`,{text:r},{headers:{Authorization:`Bearer ${s}`}})).data},wb=async(e,t)=>{const r=localStorage.getItem("token");return(await we.post(`${Ae}/api/announcements/${e}/comments/${t}/like`,{},{headers:{Authorization:`Bearer ${r}`}})).data},Nb=async(e,t)=>{const r=localStorage.getItem("token");return(await we.post(`${Ae}/api/announcements/${e}/comments/${t}/unlike`,{},{headers:{Authorization:`Bearer ${r}`}})).data},$A=async(e,t)=>{const r=localStorage.getItem("token");return(await we.get(`${Ae}/api/courses/${e}/announcements?groupset=${t}`,{headers:{Authorization:`Bearer ${r}`}})).data.data},zU=async(e,t)=>{const r=localStorage.getItem("token");return(await we.put(`${Ae}/api/announcements/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data.data},GU=async e=>{const t=localStorage.getItem("token");return(await we.delete(`${Ae}/api/announcements/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data},qU=({courseId:e})=>{var ye;const{user:t}=Tt(),[r,s]=N.useState([]),[a,i]=N.useState(!1),[l,u]=N.useState(!1),[d,m]=N.useState(null),[f,h]=N.useState(null),[g,x]=N.useState([]),[b,v]=N.useState(!1),[w,C]=N.useState(""),[j,_]=N.useState(null),[k,D]=N.useState({}),[A,T]=N.useState(!1),[I,L]=N.useState({}),[q,O]=N.useState(!1),[$,z]=N.useState(!1),[K,te]=N.useState(!1),se=async()=>{if(e){i(!0),m(null);try{const B=await Yy(e);s(B)}catch{m("Failed to load announcements")}finally{i(!1)}}},W=async B=>{var re;v(!0);try{const X=await yb(B);if(x(X),t&&((re=f==null?void 0:f.options)!=null&&re.requirePostBeforeSeeingReplies)){const U=X.some(ne=>ne.author._id===t._id);O(U)}else O(!0)}catch{x([]),O(!1)}finally{v(!1)}};N.useEffect(()=>{se()},[e]),N.useEffect(()=>{f&&W(f._id)},[f]);const M=async()=>{!f||!w.trim()||(T(!0),await vb(f._id,w),C(""),O(!0),await W(f._id),T(!1))},Y=async B=>{var re;if(!(!f||!B||!((re=k[B])!=null&&re.trim()))){T(!0);try{await bb(f._id,B,k[B]),D(X=>({...X,[B]:""})),_(null),await W(f._id)}catch(X){console.error("Failed to post reply:",X)}T(!1)}},P=async B=>{if(!(!f||!B)){L(re=>({...re,[B]:!0}));try{await wb(f._id,B),await W(f._id)}catch{}L(re=>({...re,[B]:!1}))}},G=async B=>{if(!(!f||!B)){L(re=>({...re,[B]:!0}));try{await Nb(f._id,B),await W(f._id)}catch{}L(re=>({...re,[B]:!1}))}},Z=async B=>{if(f){u(!0),m(null);try{await zU(f._id,B),z(!1),await se();const re=await Yy(e);h(re.find(X=>X._id===f._id)||null)}catch{m("Failed to update announcement")}finally{u(!1)}}},F=async()=>{if(f&&window.confirm("Are you sure you want to delete this announcement?")){u(!0),m(null);try{await GU(f._id),h(null),await se()}catch{m("Failed to delete announcement")}finally{u(!1)}}},Ne=(B,re=0,X="")=>{var pe;let U=B;return re===0&&t&&t.role==="student"&&((pe=f==null?void 0:f.options)==null?void 0:pe.requirePostBeforeSeeingReplies)&&!q&&(U=B.filter(xe=>xe.author._id===t._id)),n.jsx("ul",{className:re===0?"space-y-6":"ml-8 space-y-4 mt-4",children:U.filter(xe=>xe._id).map(xe=>{var it,Ge,rt;const ke=t&&xe.likes&&xe.likes.includes(t._id),ze=q||!((it=f==null?void 0:f.options)!=null&&it.requirePostBeforeSeeingReplies)||(t==null?void 0:t.role)!=="student",He=ze?xe.replies:[];return n.jsxs("li",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-blue-600 font-semibold text-sm",children:[xe.author.firstName[0],xe.author.lastName[0]]})}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-semibold text-gray-900",children:[xe.author.firstName," ",xe.author.lastName]}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(xe.createdAt).toLocaleString()})]})]}),n.jsx("div",{className:"mb-4 text-gray-700 leading-relaxed",children:xe.text}),n.jsxs("div",{className:"flex gap-3 items-center",children:[t&&((Ge=f==null?void 0:f.options)==null?void 0:Ge.allowLiking)&&n.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors font-medium text-sm ${ke?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:mt=>{mt.preventDefault(),ke?G(xe._id):P(xe._id)},disabled:I[xe._id],children:[n.jsx(Tv,{className:`w-4 h-4 ${ke?"fill-current":""}`}),((rt=xe.likes)==null?void 0:rt.length)||0]}),t&&n.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",onClick:()=>_(xe._id),children:"Reply"})]}),j===xe._id&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Write a reply...",value:k[xe._id]||"",onChange:mt=>D(et=>({...et,[xe._id]:mt.target.value})),disabled:A}),n.jsxs("div",{className:"flex gap-3 mt-3 justify-end",children:[n.jsx("button",{className:"px-4 py-2 text-sm bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-medium",onClick:()=>_(null),disabled:A,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",onClick:()=>Y(xe._id),disabled:A,children:A?"Replying...":"Reply"})]})]}),!ze&&xe.replies&&xe.replies.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-700",children:[n.jsx(GO,{className:"w-4 h-4 inline mr-2"})," ",xe.replies.length," repl",xe.replies.length===1?"y":"ies"," hidden. Post a comment first to see replies."]}),He&&He.length>0&&Ne(He,re+1,X+xe._id+"-")]},X+xe._id)})})};return n.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Announcements"}),n.jsx("p",{className:"text-gray-600",children:"Stay updated with the latest course information"})]}),!f&&t&&(t.role==="teacher"||t.role==="admin")&&n.jsxs("button",{onClick:()=>te(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 shadow-lg",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"New Announcement"]})]}),d&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-red-700 font-medium",children:d})]})}),f?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 max-w-4xl mx-auto overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:n.jsxs("button",{className:"mb-4 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium border border-gray-200 flex items-center gap-2 shadow-sm",onClick:()=>h(null),children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Announcements"]})}),n.jsxs("div",{className:"p-6",children:[t&&(t.role==="teacher"||t.role==="admin")&&!$&&n.jsxs("div",{className:"flex gap-2 mb-6 justify-end",children:[n.jsx("button",{className:"px-4 py-2 text-sm bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition-colors font-medium",onClick:()=>z(!0),children:"Edit"}),n.jsx("button",{className:"px-4 py-2 text-sm bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors font-medium",onClick:F,children:"Delete"})]}),$?n.jsx(LA,{onSubmit:Z,loading:l,onCancel:()=>z(!1),initialValues:{title:f.title,body:f.body,postTo:f.postTo,options:f.options,delayedUntil:f.delayedUntil}},(f==null?void 0:f._id)||"new"):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:f.title}),n.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:new Date(f.createdAt).toLocaleString()})]}),n.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:f.body}}),n.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["By ",n.jsxs("span",{className:"font-medium",children:[f.author.firstName," ",f.author.lastName]})]})]}),f.options&&Object.values(f.options).some(Boolean)&&t&&t.role!=="student"&&n.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[f.options.delayPosting&&n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium",children:"Delay posting"}),f.options.allowComments&&n.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:"Comments enabled"}),f.options.requirePostBeforeSeeingReplies&&n.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium",children:"Post before seeing replies"}),f.options.enablePodcastFeed&&n.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium",children:"Podcast feed"}),f.options.allowLiking&&n.jsx("span",{className:"bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-xs font-medium",children:"Liking enabled"})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsx("h4",{className:"text-xl font-bold mb-6 text-gray-900",children:"Comments"}),t&&t.role==="student"&&((ye=f==null?void 0:f.options)==null?void 0:ye.requirePostBeforeSeeingReplies)&&!q&&n.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[n.jsx(L4,{className:"w-4 h-4 inline mr-2"})," Post a comment first to see replies from other students."]}),b?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading comments..."}):n.jsxs(n.Fragment,{children:[Ne(g),t&&n.jsxs("div",{className:"mt-8",children:[n.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Write a comment...",value:w,onChange:B=>C(B.target.value),disabled:A}),n.jsx("div",{className:"flex gap-3 mt-3 justify-end",children:n.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",onClick:M,disabled:A,children:A?"Posting...":"Post Comment"})})]})]})]})]})]})]}):a?n.jsx("div",{children:"Loading announcements..."}):n.jsx(OA,{announcements:r,onSelect:h})]})},UU=[{label:"All",value:"all"},{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"},{label:"Assignments",value:"assignment"},{label:"Discussions",value:"discussion"}],FA=({moduleId:e,assignments:t,userRole:r,studentSubmissions:s,studentId:a,submissionMap:i,courseId:l})=>{const u=Lt(),[d,m]=N.useState([]),[f,h]=N.useState([]),[g,x]=N.useState(!0),[b,v]=N.useState(""),[w,C]=N.useState("all"),[j,_]=N.useState([]),[k,D]=N.useState([]),A=r==="teacher"||r==="admin",T=(M,Y)=>{const P=Y.target;P.tagName==="INPUT"||P.closest("a")||P.closest("button")||(M.type==="discussion"?u(l?`/courses/${l}/threads/${M._id}`:`/discussions/${M._id}/view`):u(`/assignments/${M._id}`))};if(N.useEffect(()=>{if(t){x(!1);return}if(!e)return;(async()=>{try{const Y=localStorage.getItem("token"),P=await we.get(`/api/assignments/module/${e}`,Y?{headers:{Authorization:`Bearer ${Y}`}}:void 0);m(P.data);let G;try{G=await we.get(`/api/threads/module/${e}`,Y?{headers:{Authorization:`Bearer ${Y}`}}:void 0)}catch{G=await we.get(`/api/threads?module=${e}`,Y?{headers:{Authorization:`Bearer ${Y}`}}:void 0)}const Z=(G.data||[]).filter(F=>F.isGraded);h(Z),x(!1)}catch{v("Error fetching assignments"),x(!1)}})()},[e,t]),N.useEffect(()=>{const Y=[...(t||d).map(B=>({_id:B._id,title:B.title,dueDate:B.dueDate||B.due_date||B.discussionDueDate||null,attachments:B.attachments||[],createdBy:B.createdBy,type:B.type==="discussion"||B.group==="Discussions"?"discussion":"assignment",group:B.group||"Assignments",totalPoints:B.totalPoints||B.points||0,published:B.published!==void 0?B.published:!0,replies:B.replies||[],studentGrades:B.studentGrades||[]})),...f.map(B=>({_id:B._id,title:B.title,dueDate:B.dueDate||B.due_date||B.discussionDueDate||null,attachments:[],createdBy:B.author||{firstName:"",lastName:""},type:"discussion",group:B.group||"Discussions",totalPoints:B.totalPoints||0,published:B.published!==void 0?B.published:!0,replies:B.replies||[],studentGrades:B.studentGrades||[]}))].filter(B=>w==="all"?!0:w==="published"?B.published:w==="unpublished"?!B.published:w==="assignment"?B.type==="assignment":w==="discussion"?B.type==="discussion":!0);Y.sort((B,re)=>B.dueDate&&re.dueDate?new Date(B.dueDate).getTime()-new Date(re.dueDate).getTime():B.dueDate?-1:re.dueDate?1:B.title.localeCompare(re.title));const P=new Date,G=B=>{if(B.type==="discussion"){const re=Array.isArray(B.studentGrades)&&B.studentGrades.some(U=>U.student&&(U.student._id===a||U.student===a)),X=Array.isArray(B.replies)&&B.replies.some(U=>U.author&&(U.author._id===a||U.author===a));return re||X}return i?!!i[`${a}_${B._id}`]:s?new Set(s.map(re=>String(re.assignment&&(re.assignment._id||re.assignment)))).has(String(B._id)):!1},Z=[],F=[],Ne=[];Y.forEach(B=>{const re=G(B),X=B.dueDate?new Date(B.dueDate):null;re?Z.push(B):X&&X<P?Ne.push(B):F.push(B)});const ye=[];F.length>0&&ye.push({label:"Upcoming",items:F}),Ne.length>0&&ye.push({label:"Missing",items:Ne}),Z.length>0&&ye.push({label:"Submitted",items:Z}),D(ye)},[t,d,f,s,i,a,r,w]),g)return n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(b)return n.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded",children:b});const I=j.length===k.length&&k.length>0,L=()=>{_(I?[]:k.map(M=>M.label))},q=M=>{_(Y=>Y.includes(M)?Y.filter(P=>P!==M):[...Y,M])},O=async()=>{const M=localStorage.getItem("token");try{await Promise.all(j.map(async Y=>{const P=te.find(G=>G._id===Y);(P==null?void 0:P.type)==="discussion"?await we.patch(`${Ae}/api/threads/${Y}/publish`,{published:!0},M?{headers:{Authorization:`Bearer ${M}`}}:void 0):await we.patch(`${Ae}/api/assignments/${Y}/publish`,{published:!0},M?{headers:{Authorization:`Bearer ${M}`}}:void 0)})),alert("Selected items published!"),window.location.reload()}catch{alert("Error publishing selected items.")}},$=async()=>{const M=localStorage.getItem("token");try{await Promise.all(j.map(async Y=>{const P=te.find(G=>G._id===Y);(P==null?void 0:P.type)==="discussion"?await we.patch(`${Ae}/api/threads/${Y}/publish`,{published:!1},M?{headers:{Authorization:`Bearer ${M}`}}:void 0):await we.patch(`${Ae}/api/assignments/${Y}/publish`,{published:!1},M?{headers:{Authorization:`Bearer ${M}`}}:void 0)})),alert("Selected items unpublished!"),window.location.reload()}catch{alert("Error unpublishing selected items.")}},z=async()=>{const M=localStorage.getItem("token");if(window.confirm("Are you sure you want to delete the selected items? This cannot be undone."))try{await Promise.all(j.map(async Y=>{try{await we.delete(`/api/assignments/${Y}`,M?{headers:{Authorization:`Bearer ${M}`}}:void 0)}catch{try{await we.delete(`/api/threads/${Y}`,M?{headers:{Authorization:`Bearer ${M}`}}:void 0)}catch{}}})),alert("Selected items deleted!"),window.location.reload()}catch{alert("Error deleting selected items.")}},K=M=>M.filter(Y=>w==="all"?!0:w==="published"?Y.published:w==="unpublished"?!Y.published:w==="assignment"?Y.type==="assignment":w==="discussion"?Y.type==="discussion":!0),te=K((t||d).map(M=>({_id:M._id,title:M.title,dueDate:M.dueDate||M.due_date||M.discussionDueDate||null,attachments:M.attachments||[],createdBy:M.createdBy||M.author||{firstName:"",lastName:""},type:M.type==="discussion"||M.group==="Discussions"?"discussion":"assignment",group:M.group||"Assignments",totalPoints:M.totalPoints||M.points||0,published:M.published!==void 0?M.published:!0,replies:M.replies||[],studentGrades:M.studentGrades||[]}))),se=r==="student"&&k.length>0?k.map(M=>({...M,items:K(M.items)})).filter(M=>M.items.length>0):[],W=M=>{let Y=0;for(let Z=0;Z<M.length;Z++)Y=M.charCodeAt(Z)+((Y<<5)-Y);const P=["bg-blue-100 text-blue-700","bg-purple-100 text-purple-700","bg-green-100 text-green-700","bg-orange-100 text-orange-700","bg-pink-100 text-pink-700","bg-indigo-100 text-indigo-700","bg-teal-100 text-teal-700","bg-yellow-100 text-yellow-700","bg-red-100 text-red-700","bg-gray-100 text-gray-700"],G=Math.abs(Y)%P.length;return P[G]};return n.jsxs("div",{className:"space-y-4",children:[A&&n.jsx("div",{className:"flex space-x-2 border-b border-gray-200 dark:border-gray-700 mb-4",children:UU.map(M=>n.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium text-sm focus:outline-none ${w===M.value?"border-indigo-600 text-indigo-700":"border-transparent text-gray-500 hover:text-indigo-600"}`,onClick:()=>C(M.value),children:M.label},M.value))}),A&&j.length>0&&n.jsxs("div",{className:"flex space-x-2 mb-2",children:[n.jsx("button",{onClick:O,className:"px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Publish"}),n.jsx("button",{onClick:$,className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Unpublish"}),n.jsx("button",{onClick:z,className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]}),n.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg border border-gray-200 dark:border-gray-700",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[A&&n.jsx("th",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",id:"select-all-assignments",name:"selectAll",checked:I,onChange:L})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Group"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"}),A&&n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),A&&n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:r==="student"&&se.length>0?se.map(M=>[n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-semibold py-2 pl-2",children:M.label})},M.label),...M.items.map(Y=>{const P=Y.dueDate?new Date(Y.dueDate):null;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:G=>T(Y,G),children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-indigo-700 font-medium hover:underline",children:Y.title})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${W(Y.group)}`,children:Y.group})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:P?zt(P,"PPp"):"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Y.totalPoints})]},Y._id)})]):A?te.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-6 text-gray-400",children:"No assignments found"})}):te.map(M=>{const Y=M.dueDate?new Date(M.dueDate):null;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:P=>T(M,P),children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",id:`select-assignment-${M._id}`,name:`select-${M._id}`,checked:j.includes(M._id),onChange:()=>q(M._id)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-indigo-700 font-medium hover:underline",children:M.title})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${W(M.group)}`,children:M.group})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Y?zt(Y,"PPp"):"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:M.totalPoints}),n.jsx("td",{className:"px-4 py-2",children:M.published?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700",children:"Published"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-600",children:"Unpublished"})}),n.jsx("td",{className:"px-4 py-2 space-x-2",children:A&&M.type==="assignment"&&n.jsx(Er,{to:`/assignments/${M._id}/edit`,className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-700 dark:text-blue-200 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800",style:{textDecoration:"none"},children:"Edit"})})]},M._id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:A?7:5,className:"text-center py-6 text-gray-400",children:"No assignments found"})})})]})})]})},WU=({isOpen:e,onClose:t,courseId:r,currentConfig:s,onConfigUpdated:a})=>{const[i,l]=N.useState({showLatestAnnouncements:!1,numberOfAnnouncements:3}),[u,d]=N.useState(!1),[m,f]=N.useState(null);N.useEffect(()=>{s&&l(s)},[s]);const h=async()=>{var g,x;d(!0),f(null);try{const b=await r6(r,i);b.success?(a(b.data),t()):f(b.message||"Failed to update configuration")}catch(b){f(((x=(g=b.response)==null?void 0:g.data)==null?void 0:x.message)||"Failed to update configuration")}finally{d(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full mx-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg",children:n.jsx(Ds,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Overview Configuration"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize what students see on the overview page"})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Fd,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[m&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 px-4 py-3 rounded-xl border border-red-200 dark:border-red-800",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),m]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:n.jsx(Av,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Student Overview Settings"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Control what information students see on their overview page"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-lg",children:n.jsx(Dr,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Show Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Display recent announcements on student overview page for quick access"})]})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.showLatestAnnouncements,onChange:g=>l(x=>({...x,showLatestAnnouncements:g.target.checked})),className:"sr-only peer"}),n.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-gradient-to-r peer-checked:from-green-500 peer-checked:to-green-600"})]})]})}),i.showLatestAnnouncements&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:n.jsx(gj,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-base font-semibold text-gray-900 dark:text-white",children:"Number of Announcements to Show"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choose how many recent announcements students will see"})]})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(g=>n.jsx("button",{onClick:()=>l(x=>({...x,numberOfAnnouncements:g})),className:`p-3 rounded-lg border-2 transition-all duration-200 font-semibold text-sm ${i.numberOfAnnouncements===g?"border-blue-500 bg-blue-500 text-white shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:border-blue-300 dark:hover:border-blue-600"}`,children:g},g))}),n.jsx("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[n.jsx(gj,{className:"w-4 h-4"}),n.jsxs("span",{children:["Students will see the ",n.jsx("strong",{children:i.numberOfAnnouncements})," most recent announcements on their overview page"]})]})})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl",children:[n.jsx("button",{onClick:t,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),n.jsxs("button",{onClick:h,disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium flex items-center gap-2 shadow-lg",children:[u?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(F4,{className:"w-4 h-4"}),"Save Configuration"]})]})]})}):null},HU=({isOpen:e,onClose:t,announcement:r})=>{var O,$;const{user:s}=Tt(),[a,i]=N.useState([]),[l,u]=N.useState(!1),[d,m]=N.useState(""),[f,h]=N.useState(null),[g,x]=N.useState({}),[b,v]=N.useState(!1),[w,C]=N.useState({}),[j,_]=N.useState(!1);N.useEffect(()=>{r&&e&&k(r._id)},[r,e]);const k=async z=>{var K;u(!0);try{const te=await yb(z);if(i(te),s&&((K=r==null?void 0:r.options)!=null&&K.requirePostBeforeSeeingReplies)){const se=te.some(W=>W.author._id===s._id);_(se)}else _(!0)}catch{i([]),_(!1)}finally{u(!1)}},D=async()=>{if(!(!r||!d.trim())){v(!0);try{await vb(r._id,d),m(""),_(!0),await k(r._id)}catch(z){console.error("Failed to post comment:",z)}v(!1)}},A=async z=>{var K;if(!(!r||!z||!((K=g[z])!=null&&K.trim()))){v(!0);try{await bb(r._id,z,g[z]),x(te=>({...te,[z]:""})),h(null),await k(r._id)}catch(te){console.error("Failed to post reply:",te)}v(!1)}},T=async z=>{if(!(!r||!z)){C(K=>({...K,[z]:!0}));try{await wb(r._id,z),await k(r._id)}catch(K){console.error("Failed to like comment:",K)}C(K=>({...K,[z]:!1}))}},I=async z=>{if(!(!r||!z)){C(K=>({...K,[z]:!0}));try{await Nb(r._id,z),await k(r._id)}catch(K){console.error("Failed to unlike comment:",K)}C(K=>({...K,[z]:!1}))}},L=z=>{const K=new Date(z),te=new Date,se=Math.floor((te.getTime()-K.getTime())/(1e3*60*60));return se<1?"Just now":se<24?`${se}h ago`:se<48?"Yesterday":K.toLocaleDateString("en-US",{month:"short",day:"numeric",year:K.getFullYear()!==te.getFullYear()?"numeric":void 0})},q=(z,K=0)=>{var W;let te=z;return K===0&&s&&s.role==="student"&&((W=r==null?void 0:r.options)==null?void 0:W.requirePostBeforeSeeingReplies)&&!j&&(te=z.filter(M=>M.author._id===s._id)),n.jsx("ul",{className:K===0?"space-y-4":"ml-8 space-y-3 mt-3",children:te.filter(M=>M._id).map(M=>{var Z,F,Ne,ye;const Y=s&&M.likes&&M.likes.includes(s._id),G=j||!((Z=r==null?void 0:r.options)!=null&&Z.requirePostBeforeSeeingReplies)||(s==null?void 0:s.role)!=="student"?M.replies:[];return n.jsxs("li",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(Xl,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[M.author.firstName," ",M.author.lastName]}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:L(M.createdAt)})]})]})}),n.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:M.text}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[((F=r==null?void 0:r.options)==null?void 0:F.allowLiking)&&n.jsxs("button",{onClick:()=>Y?I(M._id):T(M._id),disabled:w[M._id],className:`flex items-center gap-1 transition-colors ${Y?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,children:[n.jsx(Tv,{className:`w-3 h-3 ${Y?"fill-current":""}`}),((Ne=M.likes)==null?void 0:Ne.length)||0]}),s&&n.jsxs("button",{onClick:()=>h(f===M._id?null:M._id),className:"flex items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[n.jsx(Ql,{className:"w-3 h-3"}),"Reply"]})]}),f===M._id&&n.jsxs("div",{className:"mt-3",children:[n.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:2,placeholder:"Write a reply...",value:g[M._id]||"",onChange:B=>x(re=>({...re,[M._id]:B.target.value})),disabled:b}),n.jsxs("div",{className:"flex gap-2 mt-2 justify-end",children:[n.jsx("button",{onClick:()=>h(null),className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:()=>A(M._id),disabled:b||!((ye=g[M._id])!=null&&ye.trim()),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1",children:[n.jsx(Ld,{className:"w-3 h-3"}),"Reply"]})]})]}),G&&G.length>0&&q(G,K+1)]},M._id)})})};return!e||!r?null:n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Announcement Details"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View full announcement and comments"})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Fd,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.jsx(vf,{className:"w-4 h-4"}),L(r.createdAt)]})]}),n.jsx("div",{className:"prose max-w-none text-gray-700 dark:text-gray-300 leading-relaxed mb-4",dangerouslySetInnerHTML:{__html:r.body}}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(Xl,{className:"w-3 h-3 text-white"})}),n.jsxs("span",{className:"font-medium",children:[r.author.firstName," ",r.author.lastName]})]})]}),((O=r.options)==null?void 0:O.allowComments)&&n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[n.jsx(Dr,{className:"w-5 h-5 text-blue-600"}),"Comments"]}),s&&s.role==="student"&&(($=r.options)==null?void 0:$.requirePostBeforeSeeingReplies)&&!j&&n.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[n.jsx(L4,{className:"w-4 h-4"}),n.jsx("span",{children:"Post a comment first to see replies from other students."})]})}),l?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),"Loading comments..."]}):n.jsxs(n.Fragment,{children:[q(a),s&&n.jsxs("div",{className:"mt-6",children:[n.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Write a comment...",value:d,onChange:z=>m(z.target.value),disabled:b}),n.jsx("div",{className:"flex gap-3 mt-3 justify-end",children:n.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:D,disabled:b||!d.trim(),children:[b?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(Ld,{className:"w-4 h-4"}),b?"Posting...":"Post Comment"]})})]})]})]})]})})]})})},VU=({courseId:e,numberOfAnnouncements:t})=>{const[r,s]=N.useState([]),[a,i]=N.useState(!0),[l,u]=N.useState(null),[d,m]=N.useState(null),[f,h]=N.useState(!1);N.useEffect(()=>{(async()=>{try{i(!0);const C=(await Yy(e)).slice(0,t);s(C)}catch{u("Failed to load announcements")}finally{i(!1)}})()},[e,t]);const g=v=>{m(v),h(!0)},x=()=>{h(!1),m(null)};if(a)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"space-y-4",children:[...Array(t)].map((v,w)=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-3 w-full"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},w))})]});if(l)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-red-600 rounded-xl",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"text-center py-8",children:n.jsx("div",{className:"text-red-500 dark:text-red-400 text-sm font-medium",children:l})})]});if(r.length===0)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"text-center py-8",children:n.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No announcements yet."})})]});const b=v=>{const w=new Date(v),C=new Date,j=Math.floor((C.getTime()-w.getTime())/(1e3*60*60));return j<1?"Just now":j<24?`${j}h ago`:j<48?"Yesterday":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:w.getFullYear()!==C.getFullYear()?"numeric":void 0})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"space-y-4",children:r.map((v,w)=>n.jsxs("div",{className:"group relative bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg hover:border-blue-200 dark:hover:border-blue-700 transition-all duration-200 cursor-pointer",onClick:()=>g(v),children:[w===0&&n.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg leading-tight group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:v.title}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full",children:[n.jsx(vf,{className:"w-3 h-3"}),b(v.createdAt)]})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 leading-relaxed line-clamp-3",children:[v.body.replace(/<[^>]+>/g,"").substring(0,200),v.body.replace(/<[^>]+>/g,"").length>200&&"..."]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(Xl,{className:"w-3 h-3 text-white"})}),n.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[v.author.firstName," ",v.author.lastName]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("span",{children:"Read more"}),n.jsx(M4,{className:"w-3 h-3"})]})]})]},v._id))})]}),n.jsx(HU,{isOpen:f,onClose:x,announcement:d})]})},ro={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},YU=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:sO,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],X2=({student:e,isInstructor:t,isAdmin:r,handleUnenroll:s,isInstructorCard:a})=>{const[i,l]=V.useState(!1);return n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 flex items-center gap-4",children:[e.profilePicture&&!i?n.jsx("img",{src:e.profilePicture.startsWith("http")?e.profilePicture:`http://localhost:5000${e.profilePicture}`,alt:e.firstName,className:"w-12 h-12 object-cover rounded-full border",onError:()=>l(!0)}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-xl font-bold text-gray-600 border",children:e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`.toUpperCase():""}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-lg text-gray-800",children:[e.firstName," ",e.lastName]}),n.jsx("div",{className:"text-gray-500 text-sm",children:e.email})]}),!a&&(t||r)&&s&&n.jsx("button",{className:"ml-auto p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:()=>s(e._id),title:"Remove student",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},J2=()=>{var Vc;const{id:e,section:t}=wr(),r=Lt(),s=Os(),{getCourse:a,getCourses:i,loading:l,error:u,enrollStudent:d,unenrollStudent:m}=Do(),{user:f}=Tt(),[h,g]=N.useState(null),[x,b]=N.useState([]),[v,w]=N.useState(""),[C,j]=N.useState([]),[_,k]=N.useState(!1),[D,A]=N.useState(null),[T,I]=N.useState(t||"overview"),L=N.useRef(a),[q,O]=N.useState(null),[$,z]=N.useState({}),[K,te]=N.useState({students:[],assignments:[],grades:{}}),se=(f==null?void 0:f.role)==="teacher"&&((Vc=h==null?void 0:h.instructor)==null?void 0:Vc._id)===(f==null?void 0:f._id),W=(f==null?void 0:f.role)==="admin",[M,Y]=N.useState(!1),[P,G]=N.useState([]),[Z,F]=N.useState(!1),[Ne,ye]=N.useState(""),[B,re]=N.useState(null),[X,U]=N.useState(""),[ne,pe]=N.useState(null),[xe,ke]=N.useState(""),[ze,He]=N.useState({}),[it,Ge]=N.useState(!1),[rt,mt]=N.useState([]),[et,ve]=N.useState(""),[he,ce]=N.useState(!1),[Ee,Ue]=N.useState([]),[ie,be]=N.useState(0),[me,Q]=N.useState(null),[ae,Te]=N.useState(null),[Ve,We]=N.useState([]),[nt,st]=N.useState([]),[$e,lt]=N.useState(!1),[gt,Rt]=N.useState(!1),[Kt,Vt]=N.useState(null),[Qt,nr]=N.useState([]),[Xt,ss]=N.useState(!0),[Di,Oa]=N.useState([]),[ta,fe]=N.useState(!1);N.useEffect(()=>{const Se=s.pathname.split("/")[3]||"overview";I(Se)},[s.pathname]);const qe=N.useCallback(async()=>{if(e)try{const Se=await L.current(e);g(Se);const De=localStorage.getItem("token"),Fe=await Re.get(`${Ae}/api/modules/${e}`,{headers:{Authorization:`Bearer ${De}`}});if(Fe.data.success){const wt=Fe.data.data,yt=await Promise.all(wt.map(async dt=>{try{const Le=await we.get(`${Ae}/api/assignments/module/${dt._id}`,{headers:{Authorization:`Bearer ${De}`}});return{...dt,assignments:Le.data}}catch{return{...dt,assignments:[]}}}));b(yt)}}catch(Se){console.error("Error fetching course or modules:",Se)}},[e,L]);N.useEffect(()=>{qe()},[qe]),N.useEffect(()=>{T==="assignments"&&qe()},[T,qe]),N.useEffect(()=>{if(!(h!=null&&h._id))return;(async()=>{ss(!0);try{const De=localStorage.getItem("token");let Fe;try{Fe=await we.get(`${Ae}/api/threads/course/${h._id}`,De?{headers:{Authorization:`Bearer ${De}`}}:void 0)}catch{Fe=await we.get(`${Ae}/api/threads?course=${h._id}`,De?{headers:{Authorization:`Bearer ${De}`}}:void 0)}let wt=(Fe.data.data||[]).filter(yt=>yt.isGraded);if(x.length>0){const dt=(await Promise.all(x.map(async Nt=>{try{return((await we.get(`${Ae}/api/threads/module/${Nt._id}`,De?{headers:{Authorization:`Bearer ${De}`}}:void 0)).data.data||[]).filter(ft=>ft.isGraded)}catch{return[]}}))).flat(),Le=new Map;[...wt,...dt].forEach(Nt=>Le.set(Nt._id,Nt)),wt=Array.from(Le.values())}nr(wt)}catch{nr([])}finally{ss(!1)}})()},[h==null?void 0:h._id,x]);const sr=YU.filter(Se=>!Se.roles||Se.roles.includes((f==null?void 0:f.role)||""));N.useEffect(()=>{L.current=a},[a]),N.useEffect(()=>{(async()=>{if(e)try{const De=await L.current(e);g(De);const Fe=localStorage.getItem("token"),wt=await Re.get(`${Ae}/api/modules/${e}`,{headers:{Authorization:`Bearer ${Fe}`}});if(wt.data.success){const yt=wt.data.data,dt=await Promise.all(yt.map(async Le=>{try{const Nt=await we.get(`${Ae}/api/assignments/module/${Le._id}`,{headers:{Authorization:`Bearer ${Fe}`}});return{...Le,assignments:Nt.data}}catch{return{...Le,assignments:[]}}}));b(dt)}}catch(De){console.error("Error fetching course or modules:",De)}})()},[e]),N.useEffect(()=>{if(!(h!=null&&h._id))return;(async()=>{try{const De=localStorage.getItem("token"),Fe=await we.get(`${Ae}/api/assignments/course/${h._id}/group-assignments`,De?{headers:{Authorization:`Bearer ${De}`}}:void 0);Oa(Fe.data)}catch{Oa([])}})()},[h==null?void 0:h._id]);const Yt=async Se=>{var De;if(!Se.trim()){j([]);return}k(!0),A(null);try{const Fe=await Re.get(`/users/search?name=${encodeURIComponent(Se)}&email=${encodeURIComponent(Se)}`),wt=Array.isArray(Fe.data.data)?Fe.data.data:[],yt=((De=h==null?void 0:h.students)==null?void 0:De.map(Le=>Le._id))||[],dt=wt.filter(Le=>Le.role==="student"&&!yt.includes(Le._id));j(dt)}catch(Fe){A(Fe instanceof Error?Fe.message:"Failed to search users"),j([])}finally{k(!1)}},rn=(Se,De)=>{let Fe;return(...wt)=>{clearTimeout(Fe),Fe=setTimeout(()=>Se(...wt),De)}},xr=V.useCallback(rn(Se=>Yt(Se),500),[h==null?void 0:h.students]),nn=Se=>{const De=Se.target.value;w(De),De.trim()?xr(De):j([])},Ur=async Se=>{if(e)try{if(await d(e,Se),j([]),w(""),e){const De=await L.current(e);g(De)}}catch(De){console.error("Error enrolling student:",De)}},Bt=async Se=>{if(e)try{await m(e,Se)}catch(De){console.error("Error unenrolling student:",De)}};N.useEffect(()=>{(async()=>{if(!(T!=="gradebook"||!se&&!W))try{const De=localStorage.getItem("token"),Fe=(h==null?void 0:h.students)||[],wt=x.flatMap(Je=>(Je.assignments||[]).map(ct=>({...ct,moduleTitle:Je.title}))),dt=(await we.get(`${Ae}/api/assignments/course/${h==null?void 0:h._id}/group-assignments`,{headers:{Authorization:`Bearer ${De}`}})).data.map(Je=>({...Je,moduleTitle:"Group Assignments"})),Nt=(await we.get(`${Ae}/api/threads/course/${h==null?void 0:h._id}`,{headers:{Authorization:`Bearer ${De}`}})).data.data.filter(Je=>Je.isGraded).map(Je=>({_id:Je._id,title:Je.title,totalPoints:Je.totalPoints,group:Je.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:Je.studentGrades||[],dueDate:Je.dueDate,replies:Je.replies||[]}));let Ye={};const ft=[...wt,...dt],xt=await we.get(`${Ae}/api/submissions/student/course/${h==null?void 0:h._id}`,{headers:{Authorization:`Bearer ${De}`}});for(const Je of xt.data){const ct=ft.find(jt=>jt._id===Je.assignment);if(ct)if(ct.isGroupAssignment&&Je.group&&Je.group.members){if(Je.group.members.some(At=>(At._id||At)===f._id))if(Ye[f._id]||(Ye[f._id]={}),Je.useIndividualGrades&&Je.memberGrades){const At=Je.memberGrades.find(oe=>{var Qe;return oe.student&&(oe.student.toString()===f._id.toString()||((Qe=oe.student._id)==null?void 0:Qe.toString())===f._id.toString())});At&&typeof At.grade=="number"?Ye[f._id][ct._id]=At.grade:typeof Je.grade=="number"?Ye[f._id][ct._id]=Je.grade:Ye[f._id][ct._id]="-"}else typeof Je.grade=="number"?Ye[f._id][ct._id]=Je.grade:Ye[f._id][ct._id]="-"}else Ye[f._id]||(Ye[f._id]={}),Ye[f._id][ct._id]=Je.grade??"-"}for(const Je of Nt)for(const ct of Fe){Ye[ct._id]||(Ye[ct._id]={});const jt=Je.studentGrades.find(At=>At.student&&(At.student._id===ct._id||At.student===ct._id));Ye[ct._id][Je._id]=typeof(jt==null?void 0:jt.grade)=="number"?jt.grade:"-"}te({students:Fe,assignments:[...wt,...dt,...Nt],grades:Ye})}catch{te({students:[],assignments:[],grades:{}})}})()},[T,se,W,h,x,ie]),N.useEffect(()=>{(async()=>{var yt,dt;if(!((yt=K.assignments)!=null&&yt.length)||!((dt=K.students)!=null&&dt.length)||!se&&!W)return;const De={},Fe={[String(f._id)]:{}},wt=localStorage.getItem("token");try{for(const Nt of K.assignments)if(!(!Nt._id||Nt.isDiscussion))try{(await we.get(`${Ae}/api/submissions/assignment/${Nt._id}`,{headers:{Authorization:`Bearer ${wt}`}})).data.forEach(ft=>{if(Nt.isGroupAssignment&&ft.group&&ft.group.members)ft.group.members.forEach(xt=>{const Je=xt._id||xt,ct=`${String(f._id)}_${String(Nt._id)}`;if(De[ct]=ft._id,ft.useIndividualGrades&&ft.memberGrades){const jt=ft.memberGrades.find(At=>{var oe;return At.student&&(At.student.toString()===String(Je)||((oe=At.student._id)==null?void 0:oe.toString())===String(Je))});jt&&typeof jt.grade=="number"?(Fe[String(Je)]||(Fe[String(Je)]={}),Fe[String(Je)][String(Nt._id)]=jt.grade):typeof ft.grade=="number"&&(Fe[String(Je)]||(Fe[String(Je)]={}),Fe[String(Je)][String(Nt._id)]=ft.grade)}else typeof ft.grade=="number"&&(Fe[String(Je)]||(Fe[String(Je)]={}),Fe[String(Je)][String(Nt._id)]=ft.grade)});else{const xt=`${String(ft.student._id)}_${String(Nt._id)}`;De[xt]=ft._id,typeof ft.grade=="number"&&(Fe[String(ft.student._id)]||(Fe[String(ft.student._id)]={}),Fe[String(ft.student._id)][String(Nt._id)]=ft.grade)}})}catch(Ye){if(Ye.response&&Ye.response.status===404)continue}if(h!=null&&h._id){const Ye=((await we.get(`${Ae}/api/threads/course/${h._id}`,{headers:{Authorization:`Bearer ${wt}`}})).data.data||[]).filter(ft=>ft.isGraded);for(const ft of Ye)for(const xt of K.students){Fe[String(xt._id)]||(Fe[String(xt._id)]={});const Je=ft.studentGrades.find(ct=>ct.student&&(ct.student._id===xt._id||ct.student===xt._id));Fe[String(xt._id)][String(ft._id)]=typeof(Je==null?void 0:Je.grade)=="number"?Je.grade:"-"}}He(De);const Le={...Fe};for(const Nt of Ve)typeof Nt.grade=="number"&&(Le[String(f._id)]||(Le[String(f._id)]={}),Le[String(f._id)][String(Nt._id)]=Nt.grade);te(Nt=>({...Nt,grades:Le}))}catch{}})()},[K.assignments,K.students,se,W,h==null?void 0:h._id]),N.useEffect(()=>{const Se=f==null?void 0:f._id;if(!(h!=null&&h._id)||!Se||(f==null?void 0:f.role)!=="student")return;(async()=>{try{const Fe=localStorage.getItem("token"),wt=await we.get(`${Ae}/api/submissions/student/course/${h._id}`,{headers:{Authorization:`Bearer ${Fe}`}}),yt={},dt={[String(Se)]:{}};Ue(wt.data),wt.data.forEach(Le=>{var Nt;if(Le.assignment&&Le._id)if(Le.assignment.isGroupAssignment&&Le.group&&Le.group.members){if(Le.group.members.some(Ye=>{var ft;return Ye.toString()===String(Se)||((ft=Ye._id)==null?void 0:ft.toString())===String(Se)}))if(yt[`${String(Se)}_${String(Le.assignment._id)}`]=Le._id,Le.useIndividualGrades&&Le.memberGrades){const Ye=Le.memberGrades.find(ft=>{var xt;return ft.student&&(ft.student.toString()===String(Se)||((xt=ft.student._id)==null?void 0:xt.toString())===String(Se))});Ye&&typeof Ye.grade=="number"?dt[String(Se)][String(Le.assignment._id)]=Ye.grade:typeof Le.grade=="number"&&(dt[String(Se)][String(Le.assignment._id)]=Le.grade)}else typeof Le.grade=="number"&&(dt[String(Se)][String(Le.assignment._id)]=Le.grade)}else Le.student&&(Le.student.toString()===String(Se)||((Nt=Le.student._id)==null?void 0:Nt.toString())===String(Se))&&(yt[`${String(Se)}_${String(Le.assignment._id)}`]=Le._id,typeof Le.grade=="number"&&(dt[String(Se)][String(Le.assignment._id)]=Le.grade))}),He(yt),te(Le=>({...Le,grades:dt}))}catch{He({}),te(wt=>({...wt,grades:{}})),Ue([])}})()},[h==null?void 0:h._id,f,x]),N.useEffect(()=>{T!=="grades"||se||W||!f||!Ve.length||te(Se=>{const De={...Se.grades};De[String(f._id)]||(De[String(f._id)]={});for(const Fe of Ve)typeof Fe.grade=="number"&&(De[String(f._id)][String(Fe._id)]=Fe.grade);return{...Se,grades:De}})},[T,se,W,f,Ve]),N.useEffect(()=>{if(T!=="grades"||se||W||!(h!=null&&h._id))return;(async()=>{try{const De=localStorage.getItem("token"),Fe=await we.get(`${Ae}/api/grades/student/course/${h._id}`,{headers:{Authorization:`Bearer ${De}`}});Q(Fe.data.totalPercent),Te(Fe.data.letterGrade)}catch{Q(null),Te(null)}})()},[T,se,W,h==null?void 0:h._id]),N.useEffect(()=>{if(T!=="grades"||se||W||!(h!=null&&h._id)||!f)return;(async()=>{try{const De=localStorage.getItem("token"),wt=((await we.get(`${Ae}/api/threads/course/${h._id}`,{headers:{Authorization:`Bearer ${De}`}})).data.data||[]).filter(yt=>yt.isGraded).map(yt=>{const dt=f==null?void 0:f._id;let Le=null,Nt=!1;return Array.isArray(yt.replies)&&(Nt=yt.replies.some(Ye=>Ye.author&&(Ye.author._id===dt||Ye.author===dt))),Array.isArray(yt.studentGrades)&&(Le=yt.studentGrades.find(Ye=>Ye.student&&(Ye.student._id===dt||Ye.student===dt))),{...yt,isDiscussion:!0,grade:typeof(Le==null?void 0:Le.grade)=="number"?Le.grade:null,feedback:typeof(Le==null?void 0:Le.feedback)=="string"?Le.feedback:"",hasSubmitted:Nt,replies:yt.replies||[]}});We(wt)}catch{We([])}})()},[T,se,W,h==null?void 0:h._id,f]),N.useEffect(()=>{if(T!=="grades"||se||W||!(h!=null&&h._id)||!f)return;(async()=>{try{const De=localStorage.getItem("token"),Fe=await we.get(`${Ae}/api/assignments/course/${h._id}/group-assignments`,{headers:{Authorization:`Bearer ${De}`}});st(Fe.data)}catch{st([])}})()},[T,se,W,h==null?void 0:h._id,f]),N.useEffect(()=>{(async()=>{if(!(T!=="gradebook"||!se))try{const De=localStorage.getItem("token"),Fe=(h==null?void 0:h.students)||[],wt=x.flatMap(xt=>(xt.assignments||[]).map(Je=>({...Je,moduleTitle:xt.title}))),dt=(await we.get(`${Ae}/api/assignments/course/${h==null?void 0:h._id}/group-assignments`,{headers:{Authorization:`Bearer ${De}`}})).data.map(xt=>({...xt,moduleTitle:"Group Assignments"})),Nt=(await we.get(`${Ae}/api/threads/course/${h==null?void 0:h._id}`,{headers:{Authorization:`Bearer ${De}`}})).data.data.filter(xt=>xt.isGraded).map(xt=>({_id:xt._id,title:xt.title,totalPoints:xt.totalPoints,group:xt.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:xt.studentGrades||[],dueDate:xt.dueDate,replies:xt.replies||[]}));let Ye={};const ft=[...wt,...dt];for(const xt of ft){const Je=await we.get(`${Ae}/api/submissions/assignment/${xt._id}`,{headers:{Authorization:`Bearer ${De}`}});for(const ct of Je.data)if(xt.isGroupAssignment&&ct.group&&ct.group.members)ct.group.members.forEach(jt=>{const At=jt._id||jt;if(Ye[String(At)]||(Ye[String(At)]={}),ct.useIndividualGrades&&ct.memberGrades){const oe=ct.memberGrades.find(Qe=>{var Pt;return Qe.student&&(Qe.student.toString()===String(At)||((Pt=Qe.student._id)==null?void 0:Pt.toString())===String(At))});oe&&typeof oe.grade=="number"?Ye[String(At)][String(xt._id)]=oe.grade:typeof ct.grade=="number"?Ye[String(At)][String(xt._id)]=ct.grade:Ye[String(At)][String(xt._id)]="-"}else typeof ct.grade=="number"?Ye[String(At)][String(xt._id)]=ct.grade:Ye[String(At)][String(xt._id)]="-"});else if(ct.student){const jt=ct.student._id||ct.student;Ye[String(jt)]||(Ye[String(jt)]={}),Ye[String(jt)][String(xt._id)]=ct.grade??"-"}}for(const xt of Nt)for(const Je of Fe){Ye[String(Je._id)]||(Ye[String(Je._id)]={});const ct=xt.studentGrades.find(jt=>jt.student&&(jt.student._id===Je._id||jt.student===Je._id));Ye[String(Je._id)][String(xt._id)]=typeof(ct==null?void 0:ct.grade)=="number"?ct.grade:"-"}te({students:Fe,assignments:[...wt,...dt,...Nt],grades:Ye})}catch{te({students:[],assignments:[],grades:{}})}})()},[T,se,h,x]);const $r=()=>{G(h!=null&&h.gradeScale?[...h.gradeScale]:[]),Y(!0),ye("")},fn=(Se,De,Fe)=>{G(wt=>wt.map((yt,dt)=>dt===Se?{...yt,[De]:Fe}:yt))},Ai=Se=>{G(De=>De.filter((Fe,wt)=>wt!==Se))},zn=async()=>{var Se,De;F(!0),ye("");try{for(const dt of P)if(!dt.letter||dt.min===""||dt.max===""||isNaN(dt.min)||isNaN(dt.max)){ye("All fields are required and must be valid numbers."),F(!1);return}const Fe=localStorage.getItem("token"),wt=(ro==null?void 0:ro.VITE_API_URL)||"http://localhost:5000",yt=await we.put(`${wt}/api/courses/${h._id}`,{title:h.title,description:h.description,gradeScale:P},{headers:{Authorization:`Bearer ${Fe}`}});yt.data.success?(g(yt.data.data),Y(!1)):ye("Failed to save grade scale.")}catch(Fe){ye(((De=(Se=Fe.response)==null?void 0:Se.data)==null?void 0:De.message)||"Error saving grade scale")}finally{F(!1)}},La=async(Se,De,Fe)=>{var Ye,ft,xt,Je,ct;if(!e)return;const wt=`${Se}_${De}`,yt=ze[wt];if(!yt){ke("No submission found for this student"),pe(null),re(null);return}if(Fe.trim()===""){pe({studentId:Se,assignmentId:De}),ke("");try{const jt=localStorage.getItem("token");(await we.post(`${Ae}/api/submissions/${yt}/grade`,{grade:null},{headers:{Authorization:`Bearer ${jt}`}})).data&&(te(oe=>{const Qe={...oe.grades};return Qe[String(Se)]&&(delete Qe[String(Se)][String(De)],Object.keys(Qe[String(Se)]).length===0&&delete Qe[String(Se)]),{...oe,grades:Qe}}),re(null))}catch(jt){ke(((ft=(Ye=jt.response)==null?void 0:Ye.data)==null?void 0:ft.message)||"Failed to remove grade")}finally{pe(null)}return}const dt=parseFloat(Fe);if(isNaN(dt)||dt<0){ke("Grade must be a valid number"),pe(null),re(null);return}const Le=K.assignments.find(jt=>jt._id===De),Nt=((xt=Le==null?void 0:Le.questions)==null?void 0:xt.reduce((jt,At)=>jt+(At.points||0),0))||(Le==null?void 0:Le.totalPoints)||0;if(dt>Nt){ke(`Grade cannot exceed ${Nt} points`),pe(null),re(null);return}pe({studentId:Se,assignmentId:De}),ke("");try{const jt=localStorage.getItem("token");(await we.post(`${Ae}/api/submissions/${yt}/grade`,{grade:dt},{headers:{Authorization:`Bearer ${jt}`}})).data&&(te(oe=>{const Qe={...oe.grades,[String(Se)]:{...oe.grades[String(Se)],[String(De)]:dt}};return{...oe,grades:Qe}}),re(null))}catch(jt){ke(((ct=(Je=jt.response)==null?void 0:Je.data)==null?void 0:ct.message)||"Failed to update grade")}finally{pe(null)}},$a=(Se,De,Fe)=>{!se&&!W||(re({studentId:Se,assignmentId:De}),U(Fe==="-"?"":Fe.toString()),ke(""))},om=()=>{mt(h!=null&&h.groups?[...h.groups]:[]),Ge(!0),ve("")},qo=(Se,De,Fe)=>{mt(wt=>wt.map((yt,dt)=>dt===Se?{...yt,[De]:Fe}:yt))},Uc=()=>{mt(Se=>[...Se,{name:"",weight:0}])},Wc=Se=>{mt(De=>De.filter((Fe,wt)=>wt!==Se))},Hc=async()=>{var Se,De;ce(!0),ve("");try{let Fe=0;for(const Le of rt){if(!Le.name||Le.weight===""||isNaN(Le.weight)){ve("All fields are required and must be valid numbers."),ce(!1);return}Fe+=Number(Le.weight)}if(Fe!==100){ve("Total weight must be 100%."),ce(!1);return}const wt=localStorage.getItem("token"),yt=(ro==null?void 0:ro.VITE_API_URL)||"http://localhost:5000",dt=await we.put(`${yt}/api/courses/${h._id}`,{...h,groups:rt},{headers:{Authorization:`Bearer ${wt}`}});dt.data.success?(g(dt.data.data),Ge(!1)):ve("Failed to save assignment groups.")}catch(Fe){ve(((De=(Se=Fe.response)==null?void 0:Se.data)==null?void 0:De.message)||"Error saving assignment groups")}finally{ce(!1)}};N.useEffect(()=>{const Se=()=>{be(De=>De+1)};return window.addEventListener("discussionGradeUpdated",Se),()=>{window.removeEventListener("discussionGradeUpdated",Se)}},[T]);const lm=async()=>{if(h!=null&&h._id){Rt(!0),Vt(null);try{const Se=await Re.patch(`/courses/${h._id}/publish`);g(De=>({...De,published:Se.data.published})),await i()}catch(Se){let De="Error toggling course publish.";Se.response&&Se.response.data&&Se.response.data.message?De=Se.response.data.message:Se.message&&(De=Se.message),Vt(De)}finally{Rt(!1)}}},cm=Se=>{g(Se)};if(l)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(u)return n.jsx("div",{className:"text-red-500 text-center p-4",children:typeof u=="string"?u:"An error occurred. Please try again."});if(!h)return n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Course not found"});const fr=()=>{var Se,De;switch(T){case"overview":return n.jsxs("div",{className:"space-y-6",children:[(se||W)&&Kt&&n.jsx("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-2 font-medium border border-red-200",children:Kt}),n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow p-6 flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:h.title}),n.jsx("p",{className:"text-gray-500 mb-2",children:h.description}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Instructor: ",h.instructor.firstName," ",h.instructor.lastName]})]}),(se||W)&&n.jsxs("div",{className:"flex flex-col items-end mt-4 md:mt-0 gap-2",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:lm,disabled:gt,className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50 ${h.published?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"} ${gt?"opacity-60 cursor-not-allowed":""}`,children:[h.published?n.jsx(Kl,{className:"w-4 h-4 mr-2"}):n.jsx(mo,{className:"w-4 h-4 mr-2"}),gt?"Updating...":h.published?"Unpublish":"Publish"]})}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:()=>r(`/courses/${h._id}/edit`),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-colors",children:"Edit Course"}),W&&n.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this course?")},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:"Delete Course"})]})]})]}),(se||W)&&n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 bg-blue-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-blue-800",children:"Students"}),n.jsx("div",{className:"text-3xl font-bold text-blue-900",children:((Se=h.students)==null?void 0:Se.length)||0})]}),n.jsxs("div",{className:"flex-1 bg-green-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-green-800",children:"Modules"}),n.jsx("div",{className:"text-3xl font-bold text-green-900",children:x.length})]}),n.jsxs("div",{className:"flex-1 bg-purple-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-purple-800",children:"Assignments"}),n.jsx("div",{className:"text-3xl font-bold text-purple-900",children:x.reduce((oe,Qe)=>{var Pt;return oe+(((Pt=Qe.assignments)==null?void 0:Pt.length)||0)},0)})]})]}),(se||W)&&n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"font-semibold mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",onClick:()=>r(`/courses/${e}/modules`),children:"Create Module"}),n.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",onClick:()=>r(`/courses/${e}/students`),children:"Manage Students"}),n.jsx("button",{className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors",onClick:()=>r(`/courses/${e}/gradebook`),children:"View Gradebook"}),n.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors flex items-center gap-2",onClick:()=>fe(!0),children:[n.jsx(Ds,{className:"w-4 h-4"}),"Configure Overview"]})]})]}),!se&&!W&&((De=h.overviewConfig)==null?void 0:De.showLatestAnnouncements)&&n.jsx(VU,{courseId:h._id,numberOfAnnouncements:h.overviewConfig.numberOfAnnouncements||3})]});case"modules":return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Course Modules"}),n.jsx(wa,{children:n.jsx(nB,{courseId:h._id})})]})});case"pages":return n.jsx(FU,{courseId:(h==null?void 0:h._id)||"",modules:x,isInstructor:se,isAdmin:W});case"assignments":const Fe=x.flatMap(oe=>oe.assignments||[]),wt=Di.map(oe=>({...oe,isGroupAssignment:!0,totalPoints:oe.totalPoints||(Array.isArray(oe.questions)?oe.questions.reduce((Qe,Pt)=>Qe+(Pt.points||0),0):0)})),yt=[...Fe,...wt,...Qt.map(oe=>({_id:oe._id,title:oe.title,dueDate:oe.dueDate||oe.due_date||oe.discussionDueDate||null,attachments:[],createdBy:oe.author||{firstName:"",lastName:""},type:"discussion",group:oe.group||"Discussions",totalPoints:oe.totalPoints||0,published:!0,studentGrades:oe.studentGrades||[],replies:oe.replies||[]}))];return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Assignments"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage course assignments"})]}),(se||W)&&n.jsx(n.Fragment,{children:x.length>0?n.jsxs("button",{onClick:()=>r(`/modules/${x[0]._id}/assignments/create`),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-sm",children:[n.jsx("span",{children:"+"})," Create Assignment"]}):n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 px-4 py-2 rounded-md",children:"Create a module first to add assignments"})})]}),Xt?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading discussions..."}):x.length>0?n.jsx(FA,{assignments:yt,userRole:f==null?void 0:f.role,studentSubmissions:(f==null?void 0:f.role)==="student"?Ee:void 0,studentId:f==null?void 0:f._id,submissionMap:(f==null?void 0:f.role)==="student"?ze:void 0,courseId:h==null?void 0:h._id}):n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No modules available. Please create a module to add assignments."})]})});case"discussions":return n.jsx(NB,{courseId:(h==null?void 0:h._id)||"",courseGroups:(h==null?void 0:h.groups)||[]});case"grades":if(!f)return n.jsx("div",{className:"text-center py-8 text-gray-500",children:"User not found."});const dt=x.flatMap(oe=>(oe.assignments||[]).map(Qe=>{let Pt=Qe.dueDate||Qe.due_date||Qe.discussionDueDate||null,ar=Pt?new Date(Pt):null;return{...Qe,moduleTitle:oe.title,isDiscussion:!1,dueDate:ar}})),Le=nt.map(oe=>({...oe,moduleTitle:"Group Assignments",isDiscussion:!1})),Nt=Ve.map(oe=>({_id:oe._id,title:oe.title,totalPoints:oe.totalPoints,group:oe.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:oe.studentGrades||[],dueDate:oe.dueDate||null,hasSubmitted:oe.hasSubmitted||!1,replies:oe.replies||[]})),Ye=[...dt,...Le,...Nt],ft=f==null?void 0:f._id;return ft?n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:"My Grades"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track your academic progress"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Due"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Out of"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Ye.map(oe=>{var Fa,vs;const Qe=`${String(ft)}_${String(oe._id)}`;let Pt=oe.isDiscussion?oe.hasSubmitted||Array.isArray(oe.replies)&&oe.replies.some(It=>It.author&&(It.author._id===String(ft)||It.author===String(ft))):!!ze[Qe],ar=oe.isDiscussion?oe.grade:(Fa=K.grades[String(ft)])==null?void 0:Fa[String(oe._id)];const ra=((vs=oe.questions)==null?void 0:vs.reduce((It,Nr)=>It+(Nr.points||0),0))||oe.totalPoints||0,_n=Ee.find(It=>It.assignment&&It.assignment._id===oe._id),sn=typeof(_n==null?void 0:_n.feedback)=="string"?_n.feedback:"",Et=oe.dueDate?new Date(oe.dueDate):null,Gn=new Date;let St=null,ys=typeof ar=="number"?Number.isInteger(ar)?ar.toString():Number(ar).toFixed(2):"-",Wr=null;if(oe.isDiscussion){if(ar==null&&Array.isArray(oe.studentGrades)){const It=oe.studentGrades.find(Nr=>Nr.student&&(Nr.student._id===String(ft)||Nr.student===String(ft)));It&&typeof It.grade=="number"&&(ar=It.grade,ys=Number.isInteger(ar)?ar.toString():Number(ar).toFixed(2),Wr=It.gradedAt?new Date(It.gradedAt):null,Pt=!0)}if(!Pt&&Array.isArray(oe.replies)){const It=oe.replies.find(Nr=>Nr.author&&(Nr.author._id===ft||Nr.author===ft));It&&It.createdAt&&(Wr=new Date(It.createdAt),Pt=!0)}Pt?Et&&Wr&&Wr>Et?St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Late"}):St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"}):Et&&Gn>Et&&(St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Missing"}),ys="0")}else oe.published?Pt?_n&&_n.submittedAt&&Et&&new Date(_n.submittedAt)>Et?St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Late"}):St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"}):Et&&Gn>Et&&(St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Missing"}),ys="0"):(St=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:"Not Published"}),ys="-");let as="";if(oe.isDiscussion&&Array.isArray(oe.studentGrades)){const It=oe.studentGrades.find(Nr=>Nr.student&&(Nr.student._id===ft||Nr.student===ft));It&&typeof It.feedback=="string"&&It.feedback.trim()!==""&&(as=It.feedback)}return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150",children:[n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:oe.title}),oe.group&&n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:oe.group})]}),n.jsx("td",{className:"px-4 py-3 text-xs text-gray-600 dark:text-gray-400",children:oe.dueDate?new Date(oe.dueDate).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),n.jsx("td",{className:"px-4 py-3 text-center",children:St}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:ys})}),n.jsx("td",{className:"px-4 py-3 text-center text-xs text-gray-600 dark:text-gray-400",children:ra}),n.jsx("td",{className:"px-4 py-3 text-center",children:oe.isDiscussion?as&&n.jsx("button",{className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors duration-150",title:"View feedback",onClick:()=>r(`/courses/${h._id}/threads/${oe._id}`),children:n.jsx("span",{role:"img","aria-label":"Comment",className:"text-sm",children:"💬"})}):Pt&&typeof sn=="string"&&sn.trim()!==""&&n.jsx("button",{className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors duration-150",title:"View feedback",onClick:()=>r(`/assignments/${oe._id}/view`),children:n.jsx("span",{role:"img","aria-label":"Comment",className:"text-sm",children:"💬"})})})]},oe._id)})})]})})]})}),n.jsx(aB,{course:h,studentId:ft,grades:K.grades,assignments:Ye,submissionMap:ze,studentSubmissions:Ee,backendTotalGrade:me,backendLetterGrade:ae})]}):n.jsx("div",{className:"text-center py-8 text-gray-500",children:"User ID not found."});case"gradebook":let xt=function(oe){return Vv(oe._id,h,ct,jt)};if(!se&&!W)return n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Access denied"});const{students:Je,assignments:ct,grades:jt}=K,At=(h.groups||[]).reduce((oe,Qe)=>(oe[Qe.name]={...Qe,assignments:[]},oe),{});return ct.forEach(oe=>{oe.group&&At[oe.group]&&At[oe.group].assignments.push(oe)}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full p-3",children:n.jsx("svg",{className:"w-8 h-8 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Gradebook"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Track student performance and manage grades"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg px-4 py-2 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Students"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Je.length})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg px-4 py-2 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Assignments"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:ct.length})]})]})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("div",{className:"overflow-x-auto w-full relative",children:n.jsxs("table",{className:"min-w-max w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-left text-gray-700 dark:text-gray-300 sticky left-0 z-50 font-semibold text-sm uppercase tracking-wider",style:{left:0,zIndex:50,boxShadow:"2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),n.jsx("span",{children:"Student Name"})]})}),ct.map(oe=>{var Qe;return n.jsxs("th",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-center text-gray-700 dark:text-gray-300 min-w-[140px]",children:[n.jsx("div",{className:"font-semibold text-blue-700 dark:text-blue-300 cursor-pointer hover:underline text-center text-sm",children:oe.title}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1 bg-blue-50 dark:bg-blue-900/20 rounded-full px-2 py-1 mx-1",children:oe.group?oe.group:"Ungrouped"}),n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:["Out of ",((Qe=oe.questions)==null?void 0:Qe.reduce((Pt,ar)=>Pt+(ar.points||0),0))||oe.totalPoints||0]})]},oe._id)}),n.jsx("th",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-center text-gray-700 dark:text-gray-300 sticky right-0 z-50 font-semibold text-sm uppercase tracking-wider",style:{right:0,zIndex:50,boxShadow:"-2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsx("span",{children:"Overall Grade"})]})})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Je.map((oe,Qe)=>{const Pt=xt(oe),ar=wD(Pt,h==null?void 0:h.gradeScale),ra=Qe%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800",_n=Qe%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800";let sn="text-gray-700 dark:text-gray-300";return ar==="A"?sn="text-green-600 dark:text-green-400":ar==="B"?sn="text-blue-600 dark:text-blue-400":ar==="C"?sn="text-yellow-600 dark:text-yellow-400":ar==="D"?sn="text-orange-600 dark:text-orange-400":ar==="F"&&(sn="text-red-600 dark:text-red-400"),n.jsxs("tr",{className:`${ra} hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150`,children:[n.jsx("td",{className:`px-6 py-4 border-r border-gray-200 dark:border-gray-600 text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer font-medium whitespace-nowrap sticky left-0 z-40 ${_n} transition-colors duration-150`,style:{left:0,zIndex:40,boxShadow:"2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[oe.profilePicture?n.jsx("img",{src:oe.profilePicture.startsWith("http")?oe.profilePicture:`http://localhost:5000${oe.profilePicture}`,alt:`${oe.firstName} ${oe.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600",onError:Et=>{Et.currentTarget.style.display="none";const Gn=Et.currentTarget.nextElementSibling;Gn&&(Gn.style.display="flex")}}):null,n.jsxs("div",{className:`w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${oe.profilePicture?"hidden":""}`,style:{display:oe.profilePicture?"none":"flex"},children:[oe.firstName.charAt(0),oe.lastName.charAt(0)]})]}),n.jsxs("span",{children:[oe.firstName," ",oe.lastName]})]})}),ct.map(Et=>{var Ba,is,os;const Gn=`${oe._id}_${Et._id}`,St=Et.isDiscussion?Array.isArray(Et.replies)&&Et.replies.some(qt=>qt.author&&(qt.author._id===oe._id||qt.author===oe._id)):!!ze[Gn],ys=Et.isDiscussion,Wr=(Ba=jt[oe._id])==null?void 0:Ba[Et._id],as=Et.dueDate?new Date(Et.dueDate):null,Fa=new Date;let vs=null;if(ys){if(Array.isArray(Et.replies)){const qt=Et.replies.find(mr=>mr.author&&(mr.author._id===oe._id||mr.author===oe._id));qt&&qt.createdAt&&(vs=new Date(qt.createdAt))}}else{const qt=ze[Gn];if(qt){const mr=Ee.find(qn=>qn._id===qt);mr!=null&&mr.submittedAt&&(vs=new Date(mr.submittedAt))}}let It,Nr="";if(!Et.isDiscussion&&!Et.published)It=n.jsx("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"Not Published"}),Nr="bg-gray-100 dark:bg-gray-800";else if(typeof Wr=="number"){const qt=((is=Et.questions)==null?void 0:is.reduce((bs,um)=>bs+(um.points||0),0))||Et.totalPoints||0,mr=Wr/qt*100;let qn="bg-green-100 dark:bg-green-900/20";mr<60?qn="bg-red-100 dark:bg-red-900/20":mr<70?qn="bg-orange-100 dark:bg-orange-900/20":mr<80&&(qn="bg-yellow-100 dark:bg-yellow-900/20"),It=n.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${qn} ${mr<60?"text-red-700 dark:text-red-300":mr<70?"text-orange-700 dark:text-orange-300":mr<80?"text-yellow-700 dark:text-yellow-300":"text-green-700 dark:text-green-300"}`,children:Number.isInteger(Wr)?Wr:Number(Wr).toFixed(2)})}else St?as&&vs&&vs.getTime()>as.getTime()?It=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Late"]}):It=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Not Graded"]}):as&&Fa.getTime()>as.getTime()?It=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"0 (MA)"]}):It=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"No Submission"]});return n.jsx("td",{className:`px-4 py-4 text-center whitespace-nowrap relative ${ra} ${Nr} transition-all duration-150`,onClick:()=>{(se||W)&&St&&$a(oe._id,Et._id,(Wr==null?void 0:Wr.toString())||"")},children:(B==null?void 0:B.studentId)===oe._id&&(B==null?void 0:B.assignmentId)===Et._id?n.jsx("div",{className:"relative",children:n.jsx("input",{type:"number",id:`grade-input-${oe._id}-${Et._id}`,name:`grade-${oe._id}-${Et._id}`,step:"0.01",min:"0",max:((os=Et.questions)==null?void 0:os.reduce((qt,mr)=>qt+(mr.points||0),0))||Et.totalPoints||0,value:X,onChange:qt=>U(qt.target.value),onKeyDown:qt=>{qt.key==="Enter"?(qt.preventDefault(),La(oe._id,Et._id,X)):qt.key==="Escape"&&(re(null),ke(""))},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})}):n.jsxs("div",{className:`${(se||W)&&St?"cursor-pointer hover:scale-105 transform transition-transform duration-150":""} ${(ne==null?void 0:ne.studentId)===oe._id&&(ne==null?void 0:ne.assignmentId)===Et._id?"opacity-50":""}`,children:[(ne==null?void 0:ne.studentId)===oe._id&&(ne==null?void 0:ne.assignmentId)===Et._id?n.jsxs("div",{className:"inline-flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):null,It]})},Et._id)}),n.jsx("td",{className:`px-6 py-4 border-l border-gray-200 dark:border-gray-600 text-center font-semibold whitespace-nowrap sticky right-0 z-40 ${ra} transition-colors duration-150`,style:{right:0,zIndex:40,boxShadow:"-2px 0 8px -4px rgba(0,0,0,0.1)"},children:h.groups&&h.groups.length>0?n.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-bold ${sn} bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-600`,children:[Number(Pt).toFixed(2),"% (",ar,")"]}):"-"})]},oe._id)})})]})}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-full w-12 bg-gradient-to-l from-gray-50 dark:from-gray-800 to-transparent",style:{zIndex:10}})]}),(!Je.length||!ct.length)&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No data available"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No students or assignments found."})]})]}),(se||W)&&n.jsx("div",{className:"flex justify-end space-x-4",children:n.jsxs("button",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:$r,children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Grade Scale"]})}),n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 mt-6 border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Assignment Group Weights"}),n.jsxs("table",{className:"min-w-max border border-gray-300 dark:border-gray-700 mb-2",children:[n.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 border-b border-r border-gray-300 dark:border-gray-700 text-left text-gray-900 dark:text-gray-100",children:"Group"}),n.jsx("th",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-left text-gray-900 dark:text-gray-100",children:"Weight"})]})}),n.jsxs("tbody",{children:[(h.groups||[]).map((oe,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 border-b border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:oe.name}),n.jsxs("td",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:[oe.weight,"%"]})]},Qe)),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-bold border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:"Total"}),n.jsxs("td",{className:"px-4 py-2 font-bold border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:[(h.groups||[]).reduce((oe,Qe)=>oe+Number(Qe.weight),0),"%"]})]})]})]})]}),(se||W)&&n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:om,children:"Edit Assignment Groups"})]})}),it&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 w-full max-w-2xl relative",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Assignment Groups"}),n.jsxs("table",{className:"min-w-full mb-4",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Group Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Weight (%)"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:rt.map((oe,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"text",id:`group-name-${Qe}`,name:`groupName-${Qe}`,value:oe.name,onChange:Pt=>qo(Qe,"name",Pt.target.value),className:"border rounded px-2 py-1 w-32"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`group-weight-${Qe}`,name:`groupWeight-${Qe}`,value:oe.weight,onChange:Pt=>qo(Qe,"weight",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>Wc(Qe),title:"Remove row",children:"×"})})]},Qe))})]}),n.jsx("button",{className:"mb-4 px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",onClick:Uc,children:"+ Add Group"}),et&&n.jsx("div",{className:"text-red-600 mb-2",children:et}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",onClick:()=>Ge(!1),disabled:he,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:Hc,disabled:he,children:he?"Saving...":"Save"})]})]})}),M&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 w-full max-w-2xl relative",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Grade Scale"}),n.jsxs("table",{className:"min-w-full mb-4",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Letter"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Min %"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Max %"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:P.map((oe,Qe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"text",id:`grade-letter-${Qe}`,name:`gradeLetter-${Qe}`,value:oe.letter,onChange:Pt=>fn(Qe,"letter",Pt.target.value),className:"border rounded px-2 py-1 w-16"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`grade-min-${Qe}`,name:`gradeMin-${Qe}`,value:oe.min,onChange:Pt=>fn(Qe,"min",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`grade-max-${Qe}`,name:`gradeMax-${Qe}`,value:oe.max,onChange:Pt=>fn(Qe,"max",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>Ai(Qe),title:"Remove row",children:"×"})})]},Qe))})]}),n.jsx("button",{className:"mb-4 px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",onClick:()=>{if(P.length===0){G([{letter:"A",min:94,max:100},{letter:"A-",min:90,max:93},{letter:"B+",min:87,max:89},{letter:"B",min:84,max:86},{letter:"B-",min:80,max:83},{letter:"C+",min:77,max:79},{letter:"C",min:74,max:76},{letter:"D",min:64,max:73},{letter:"F",min:0,max:63}]),ye("Auto-filled with default scale.");return}const oe=[...P].sort((Qe,Pt)=>Pt.min-Qe.min);if(oe.length>0){oe[0].max=100;for(let Qe=1;Qe<oe.length;Qe++)oe[Qe].max=oe[Qe-1].min-1}G(oe),ye("Auto-fixed scale for contiguous whole numbers.")},children:"Auto-Fix"}),Ne&&n.jsx("div",{className:"text-red-600 mb-2",children:Ne}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",onClick:()=>Y(!1),disabled:Z,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:zn,disabled:Z,children:Z?"Saving...":"Save"})]})]})})]});case"students":return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Student Management"}),(se||W)&&n.jsxs("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100",children:"Add Students"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search for students by name or email...",value:v,onChange:nn,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100"}),_&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),C.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Results"}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:C.map(oe=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-300",children:oe.firstName&&oe.lastName?`${oe.firstName[0]}${oe.lastName[0]}`.toUpperCase():"U"}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[oe.firstName," ",oe.lastName]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:oe.email})]})]}),n.jsx("button",{onClick:()=>Ur(oe._id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add"})]},oe._id))})]}),D&&n.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:D})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"Instructor"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.jsx(X2,{student:h.instructor,isInstructor:!0,isAdmin:W,handleUnenroll:null,isInstructorCard:!0},h.instructor._id||"instructor")})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100",children:["Enrolled Students (",h.students.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.students.map(oe=>n.jsx(X2,{student:oe,isInstructor:se,isAdmin:W,handleUnenroll:Bt},oe._id))}),h.students.length===0&&n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No students enrolled yet"})]})]})});case"groups":return se||W?n.jsx(LU,{courseId:(h==null?void 0:h._id)||""}):n.jsx($U,{courseId:(h==null?void 0:h._id)||"",userId:(f==null?void 0:f._id)||""});case"announcements":return n.jsx("div",{className:"relative",children:$e?n.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"New Announcement"}),n.jsx(LA,{onSubmit:async oe=>{await BU(h._id,oe),lt(!1),I("announcements")},loading:!1,onCancel:()=>lt(!1)})]}):n.jsxs(n.Fragment,{children:[n.jsx(qU,{courseId:h._id}),(se||W)&&n.jsx("button",{className:"fixed bottom-8 right-8 z-50 bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-blue-700 text-lg font-bold flex items-center gap-2",onClick:()=>lt(!0),children:"+ Announcement"})]})});default:return null}};return n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:sr.map(Se=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${T===Se.id?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${e}/${Se.id}`),children:[n.jsx(Se.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:Se.label})]},Se.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:fr()})}),n.jsx(WU,{isOpen:ta,onClose:()=>fe(!1),courseId:(h==null?void 0:h._id)||"",currentConfig:(h==null?void 0:h.overviewConfig)||{showLatestAnnouncements:!1,numberOfAnnouncements:3},onConfigUpdated:cm})]})},KU=({assignment:e,isInstructor:t,isAdmin:r,navigate:s})=>{var l;const a=((l=e.questions)==null?void 0:l.reduce((u,d)=>u+(d.points||0),0))||e.totalPoints||0,i=e.dueDate?new Date(e.dueDate):null;return n.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 line-clamp-2",children:e.title}),n.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.moduleTitle})]}),e.group&&n.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full",children:e.group})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsxs("span",{className:e.isOverdue?"text-red-600 font-medium":"",children:["Due: ",i?`${i.toLocaleDateString()} at ${i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"No due date"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),n.jsxs("span",{children:["Points: ",a]})]}),e.hasSubmission&&n.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.jsx("span",{children:"Submitted"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[n.jsx("button",{onClick:()=>s(`/assignments/${e._id}/view`),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors text-sm font-medium",children:"View"}),(t||r)&&n.jsx("button",{onClick:()=>s(`/assignments/${e._id}/grade`),className:"flex-1 px-3 py-2 bg-yellow-50 text-yellow-600 rounded-md hover:bg-yellow-100 transition-colors text-sm font-medium",children:"Grade"})]})]})})},Z2=({mode:e})=>{const t=Lt(),{id:r}=wr(),{createCourse:s,updateCourse:a,getCourse:i,loading:l,error:u}=Do(),d=N.useRef(i);N.useEffect(()=>{d.current=i},[i]);const[m,f]=N.useState({title:"",description:""}),[h,g]=N.useState({title:"",description:""});N.useEffect(()=>{e==="edit"&&r&&(async()=>{try{const C=await d.current(r);f({title:C.title,description:C.description})}catch(C){console.error("Error fetching course:",C)}})()},[e,r]);const x=()=>{const w={title:"",description:""};let C=!0;return m.title.trim()?m.title.length<3&&(w.title="Title must be at least 3 characters long",C=!1):(w.title="Title is required",C=!1),m.description.trim()?m.description.length<10&&(w.description="Description must be at least 10 characters long",C=!1):(w.description="Description is required",C=!1),g(w),C},b=async w=>{if(w.preventDefault(),!!x())try{e==="create"?await s(m.title,m.description):e==="edit"&&r&&await a(r,m.title,m.description),t("/courses")}catch(C){console.error("Error submitting form:",C)}},v=w=>{const{name:C,value:j}=w.target;f(_=>({..._,[C]:j})),g(_=>({..._,[C]:""}))};return n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:e==="create"?"Create Course":"Edit Course"}),u&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",id:"title",name:"title",value:m.title,onChange:v,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter course title"}),h.title&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.title})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:v,rows:4,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter course description"}),h.description&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.description})]}),n.jsxs("div",{className:"flex justify-end space-x-4",children:[n.jsx("button",{type:"button",onClick:()=>t("/courses"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?n.jsxs("span",{className:"flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e==="create"?"Creating...":"Saving..."]}):e==="create"?"Create Course":"Save Changes"})]})]})]})})},BA=()=>{const{pageId:e}=wr(),t=Lt(),{getPage:r}=ki(),[s,a]=N.useState(null),[i,l]=N.useState(!0),[u,d]=N.useState(null);return N.useEffect(()=>{(async()=>{if(e)try{l(!0);const f=await r(e);if(!f)throw new Error("Page not found");a(f)}catch(f){console.error("Error fetching page:",f),d("Failed to load page")}finally{l(!1)}})()},[e,r]),i?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[n.jsx("div",{className:"text-red-500 mb-4",children:u}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back"})]}):s?n.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:s.title}),n.jsx("div",{className:"prose max-w-none",children:n.jsx(ho,{children:s.content})})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[n.jsx("div",{className:"text-gray-500 mb-4",children:"Page not found"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back"})]})},QU=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:kr,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],XU=()=>{const{courseId:e,pageId:t}=wr(),r=Lt(),{user:s}=Tt(),[a,i]=N.useState(null),[l,u]=N.useState(!0);console.log("PageViewWrapper - courseId:",e,"pageId:",t),N.useEffect(()=>{(async()=>{var f;if(!e||e==="undefined"||e==="null"){console.error("Invalid course ID:",e);return}try{u(!0);const h=localStorage.getItem("token");if(!h)throw new Error("No authentication token found");const g=await we.get(`${Ae}/api/courses/${e}`,{headers:{Authorization:`Bearer ${h}`}});if(g.data.success)i(g.data.data);else throw new Error(g.data.message||"Failed to fetch course")}catch(h){console.error("Error fetching course:",h),((f=h.response)==null?void 0:f.status)===400&&console.error("Invalid course ID format")}finally{u(!1)}})()},[e]);const d=QU.filter(m=>!m.roles||m.roles.includes((s==null?void 0:s.role)||""));return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):!a||!a._id?n.jsx("div",{children:"Course not found or invalid course data"}):n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:d.map(m=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${m.id==="pages"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${a._id}/${m.id}`),children:[n.jsx(m.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:m.label})]},m.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(BA,{})})})]})},zA=({moduleId:e,editMode:t=!1,assignmentData:r=null})=>{var ye;const s=Lt(),[a,i]=N.useState([]),[l,u]=N.useState([]),[d,m]=N.useState({title:"",description:"",availableFrom:"",dueDate:"",attachments:[],moduleId:"",totalPoints:0,questions:[],isGroupAssignment:!1,groupSetId:null,allowStudentUploads:!1,displayMode:"single",isTimedQuiz:!1,quizTimeLimit:60,showCorrectAnswers:!1,showStudentAnswers:!1}),[f,h]=N.useState(!1),[g,x]=N.useState(""),[b,v]=N.useState({text:"",isCorrect:!1}),[w,C]=N.useState(null),[j,_]=N.useState([]),[k,D]=N.useState(""),[A,T]=N.useState(1),[I,L]=N.useState([]),[q,O]=N.useState(0),[$,z]=N.useState(!1);N.useEffect(()=>{(async()=>{var re,X;if(!e){x("Module ID is required");return}try{const U=localStorage.getItem("token"),ne=await we.get(`${Ae}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${U}`}});if(ne.data.success){const pe=ne.data.data.course._id||ne.data.data.course;C(pe);const xe=await we.get(`${Ae}/api/courses/${pe}`,{headers:{Authorization:`Bearer ${U}`}});xe.data.success&&_(xe.data.data.groups||[]);const ke=await we.get(`${Ae}/api/modules/${pe}`,{headers:{Authorization:`Bearer ${U}`}});ke.data.success?i(ke.data.data):x("Error fetching modules for the course")}else x("Error fetching current module")}catch(U){console.error("Error fetching modules:",U),((re=U.response)==null?void 0:re.status)===404?(x("Module not found. Please make sure you are accessing a valid module."),setTimeout(()=>{s(w?`/courses/${w}`:"/dashboard")},3e3)):((X=U.response)==null?void 0:X.status)===401?x("Please log in to access this page."):x("Error fetching modules. Please try again later.")}})()},[e,s]),N.useEffect(()=>{(async()=>{if(w)try{const re=localStorage.getItem("token"),X=await we.get(`${Ae}/api/groups/sets/${w}`,{headers:{Authorization:`Bearer ${re}`}});u(X.data)}catch(re){console.error("Error fetching group sets:",re)}})()},[w]),N.useEffect(()=>{var B;if(t&&r){console.log("Processing assignment data in CreateAssignmentForm:",r),console.log("Original availableFrom:",r.availableFrom),console.log("Original dueDate:",r.dueDate),(async()=>{try{const pe=localStorage.getItem("token"),xe=await we.get(`${Ae}/api/submissions/assignment/${r._id}`,{headers:{Authorization:`Bearer ${pe}`}});O(xe.data.length),z(xe.data.length>0)}catch(pe){console.error("Error fetching submission count:",pe),O(0),z(!1)}})();let X="";r.availableFrom?(X=zt(new Date(r.availableFrom),"yyyy-MM-dd'T'HH:mm"),console.log("Using availableFrom:",X)):r.dueDate&&(X=zt(new Date(r.dueDate),"yyyy-MM-dd'T'HH:mm"),console.log("Using dueDate as fallback for availableFrom:",X));const U=!!r.allowStudentUploads,ne={title:r.title||"",description:r.description||"",availableFrom:X,dueDate:r.dueDate?zt(new Date(r.dueDate),"yyyy-MM-dd'T'HH:mm"):"",attachments:[],moduleId:r.module||"",totalPoints:((B=r.questions)==null?void 0:B.reduce((pe,xe)=>pe+(xe.points||0),0))||0,questions:r.questions||[],isGroupAssignment:!!r.isGroupAssignment,groupSetId:r.groupSet||null,allowStudentUploads:U,displayMode:r.displayMode||"single",isTimedQuiz:!!r.isTimedQuiz,quizTimeLimit:r.quizTimeLimit||60,showCorrectAnswers:!!r.showCorrectAnswers,showStudentAnswers:!!r.showStudentAnswers};console.log("Setting form data:",ne),m(ne),D(r.group||""),L(r.attachments||[])}},[t,r]);const K=B=>{const re={id:Math.random().toString(36).substr(2,9),type:B,text:"",points:1};B==="multiple-choice"&&(re.options=[]),B==="matching"&&(re.leftItems=[],re.rightItems=[]);const X=[...d.questions,re],U=X.reduce((ne,pe)=>ne+(pe.points||0),0);m(ne=>({...ne,questions:X,totalPoints:U}))},te=B=>{const re=d.questions.filter((U,ne)=>ne!==B),X=re.reduce((U,ne)=>U+(ne.points||0),0);m({...d,questions:re,totalPoints:X})},se=(B,re)=>{const X=[...d.questions],U=re==="up"?B-1:B+1;[X[B],X[U]]=[X[U],X[B]],m({...d,questions:X})},W=(B,re,X)=>{const U=[...d.questions];U[B][re]=X;const ne=U.reduce((pe,xe)=>pe+(xe.points||0),0);m({...d,questions:U,totalPoints:ne})},M=B=>{if(b.text.trim()){const re=[...d.questions];re[B].options=[...re[B].options||[],{...b}],m({...d,questions:re}),v({text:"",isCorrect:!1})}},Y=(B,re)=>{var U;const X=[...d.questions];X[B].options=(U=X[B].options)==null?void 0:U.filter((ne,pe)=>pe!==re),m({...d,questions:X})},P=()=>d.title.trim()?!(d.isGroupAssignment&&d.groupSetId)&&!d.moduleId?(x("Please select a module"),!1):d.isGroupAssignment&&!d.groupSetId?(x("Please select a group set for the group assignment"),!1):!d.availableFrom||d.availableFrom.trim()===""?(x("Available from date is required"),!1):!d.dueDate||d.dueDate.trim()===""?(x("Due date is required"),!1):new Date(d.availableFrom)>=new Date(d.dueDate)?(x("Available from date must be before due date"),!1):(x(""),!0):(x("Title is required"),!1),G=()=>d.description.trim()?(x(""),!0):(x("Description is required"),!1),Z=()=>{A===1&&P()?T(2):A===2&&G()&&T(3)},F=()=>{A>1&&(T(A-1),x(""))},Ne=async B=>{var re,X,U,ne,pe,xe;if(B.preventDefault(),x(""),!d.title.trim()){x("Title is required");return}if(!d.description.trim()){x("Description is required");return}if(!(d.isGroupAssignment&&d.groupSetId)&&!d.moduleId){x("Please select a module");return}if(!d.dueDate){x("Due date is required");return}if(d.isGroupAssignment&&!d.groupSetId){x("Please select a group set for the group assignment");return}try{const ke=new FormData;ke.append("title",d.title),ke.append("description",d.description),ke.append("availableFrom",d.availableFrom),ke.append("dueDate",d.dueDate),ke.append("moduleId",d.moduleId),ke.append("totalPoints",d.totalPoints.toString()),ke.append("questions",JSON.stringify(d.questions)),ke.append("isGroupAssignment",d.isGroupAssignment.toString()),ke.append("allowStudentUploads",d.allowStudentUploads.toString()),ke.append("displayMode",d.displayMode),ke.append("isTimedQuiz",d.isTimedQuiz.toString()),ke.append("quizTimeLimit",d.quizTimeLimit.toString()),ke.append("showCorrectAnswers",d.showCorrectAnswers.toString()),ke.append("showStudentAnswers",d.showStudentAnswers.toString()),d.isGroupAssignment&&d.groupSetId&&ke.append("groupSet",d.groupSetId),k&&ke.append("group",k),d.attachments.forEach(He=>{ke.append("attachments",He)}),console.log("Sending form data:",{title:d.title,availableFrom:d.availableFrom,dueDate:d.dueDate,moduleId:d.moduleId});const ze=localStorage.getItem("token");t&&r?(await we.put(`${Ae}/api/assignments/${r._id}`,ke,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${ze}`}})).data&&s(-1):(await we.post(`${Ae}/api/assignments`,ke,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${ze}`}})).data&&s(`/modules/${e}`)}catch(ke){console.error(t?"Error updating assignment:":"Error creating assignment:",ke),((re=ke.response)==null?void 0:re.status)===403?x(`You are not authorized to ${t?"update":"create"} assignments. Please contact your administrator.`):((X=ke.response)==null?void 0:X.status)===400&&((ne=(U=ke.response)==null?void 0:U.data)!=null&&ne.submissionCount)?x(`${ke.response.data.message} (${ke.response.data.submissionCount} submission${ke.response.data.submissionCount!==1?"s":""} exist)`):x(((xe=(pe=ke.response)==null?void 0:pe.data)==null?void 0:xe.message)||`Error ${t?"updating":"creating"} assignment`)}};return n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:t?"Edit Assignment":"Create New Assignment"}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[n.jsxs("div",{className:`flex items-center ${A>=1?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${A>=1?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"1"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Basic Details"})]}),n.jsx("div",{className:`w-12 h-0.5 ${A>=2?"bg-indigo-600":"bg-gray-300"}`}),n.jsxs("div",{className:`flex items-center ${A>=2?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${A>=2?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"2"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Description"})]}),n.jsx("div",{className:`w-12 h-0.5 ${A>=3?"bg-indigo-600":"bg-gray-300"}`}),n.jsxs("div",{className:`flex items-center ${A>=3?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${A>=3?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"3"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Questions & Files"})]})]})}),g&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),t&&$&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded mb-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("h3",{className:"text-sm font-medium text-yellow-800",children:["Assignment has ",q," submission",q!==1?"s":""]}),n.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[n.jsxs("p",{children:["This assignment has been submitted by ",q," student",q!==1?"s":"",". Some changes are restricted:"]}),n.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[n.jsx("li",{children:"Cannot add or remove questions"}),n.jsx("li",{children:"Cannot change question types (e.g., from multiple-choice to text)"}),n.jsx("li",{children:"Can modify question text, options, and points"}),n.jsx("li",{children:"Can change assignment settings (title, description, dates, etc.)"})]})]})]})]})}),n.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[A===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"assignment-title",name:"title",value:d.title,onChange:B=>m({...d,title:B.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),!(d.isGroupAssignment&&d.groupSetId)&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-module",className:"block text-sm font-medium text-gray-700",children:"Module"}),n.jsxs("select",{id:"assignment-module",name:"moduleId",value:d.moduleId,onChange:B=>m({...d,moduleId:B.target.value}),required:!d.isGroupAssignment,disabled:d.isGroupAssignment,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",disabled:!0,children:"Select a module"}),a.map(B=>n.jsx("option",{value:B._id,children:B.title},B._id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"isGroupAssignment",className:"block text-sm font-medium text-gray-700",children:"Assignment Type"}),n.jsx("div",{className:"mt-2 space-y-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGroupAssignment",checked:d.isGroupAssignment,onChange:B=>m({...d,isGroupAssignment:B.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGroupAssignment",className:"ml-2 block text-sm text-gray-900",children:"This is a group assignment"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-group",className:"block text-sm font-medium text-gray-700",children:"Assignment Group"}),n.jsxs("select",{id:"assignment-group",name:"group",value:k,onChange:B=>D(B.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select a group"}),j.map(B=>n.jsx("option",{value:B.name,children:B.name},B.name))]})]})]}),k==="Quizzes"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quiz Timer"}),n.jsxs("div",{className:"mt-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"noTimer",name:"timerOption",value:"noTimer",checked:!d.isTimedQuiz,onChange:()=>m({...d,isTimedQuiz:!1}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("label",{htmlFor:"noTimer",className:"ml-2 block text-sm text-gray-900",children:"No timer (unlimited time)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"withTimer",name:"timerOption",value:"withTimer",checked:d.isTimedQuiz,onChange:()=>m({...d,isTimedQuiz:!0}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("label",{htmlFor:"withTimer",className:"ml-2 block text-sm text-gray-900",children:"Timed quiz"})]})]})]}),d.isTimedQuiz&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Limit (minutes)"}),n.jsx("input",{type:"number",id:"quiz-time-limit",name:"quizTimeLimit",value:d.quizTimeLimit,onChange:B=>m({...d,quizTimeLimit:parseInt(B.target.value)||60}),min:"1",max:"480",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"60"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter time limit in minutes (1-480 minutes)"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quiz Feedback Options"}),n.jsxs("div",{className:"mt-2 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"showCorrectAnswers",checked:d.showCorrectAnswers,onChange:B=>m({...d,showCorrectAnswers:B.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"showCorrectAnswers",className:"ml-2 block text-sm text-gray-900",children:"Show students which questions they got correct after submission"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"showStudentAnswers",checked:d.showStudentAnswers,onChange:B=>m({...d,showStudentAnswers:B.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"showStudentAnswers",className:"ml-2 block text-sm text-gray-900",children:"Show students their submitted answers after submission"})]})]}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Note: These options can be modified later in the grading page for individual submissions."})]})})]}),d.isGroupAssignment&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-group-set",className:"block text-sm font-medium text-gray-700",children:"Group Set"}),n.jsxs("select",{id:"assignment-group-set",name:"groupSetId",value:d.groupSetId||"",onChange:B=>m({...d,groupSetId:B.target.value||null}),required:d.isGroupAssignment,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select a group set"}),l.map(B=>n.jsxs("option",{value:B._id,children:[B.name," ",B.allowSelfSignup?"(Self-signup enabled)":""]},B._id))]}),d.isGroupAssignment&&!d.groupSetId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a group set for the group assignment"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-available-from",className:"block text-sm font-medium text-gray-700",children:"Available From"}),n.jsx("input",{type:"datetime-local",id:"assignment-available-from",name:"availableFrom",value:d.availableFrom,onChange:B=>m({...d,availableFrom:B.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-due-date",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),n.jsx("input",{type:"datetime-local",id:"assignment-due-date",name:"dueDate",value:d.dueDate,onChange:B=>m({...d,dueDate:B.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"button",onClick:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Save & Continue"})})]}),A===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("div",{className:"mt-1",children:n.jsx("textarea",{id:"assignment-description",name:"description",value:d.description,onChange:B=>m({...d,description:B.target.value}),rows:6,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter a detailed description of the assignment..."})}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"allowStudentUploads",checked:d.allowStudentUploads,onChange:B=>m({...d,allowStudentUploads:B.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"allowStudentUploads",className:"ml-2 block text-sm text-gray-900",children:"Allow students to upload files"})]}),t&&n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Debug: allowStudentUploads = ",String(d.allowStudentUploads)]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"displayModeSingle",className:"block text-sm font-medium text-gray-700",children:"Assignment Display Mode"}),n.jsxs("div",{className:"mt-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"displayModeSingle",name:"displayMode",value:"single",checked:d.displayMode==="single",onChange:B=>m({...d,displayMode:B.target.value}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"displayModeSingle",className:"ml-2 block text-sm text-gray-900",children:"Single Question View (one question at a time)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"displayModeScrollable",name:"displayMode",value:"scrollable",checked:d.displayMode==="scrollable",onChange:B=>m({...d,displayMode:B.target.value}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"displayModeScrollable",className:"ml-2 block text-sm text-gray-900",children:"Scrollable View (all questions at once)"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{type:"button",onClick:F,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>h(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:f?"Edit":"Preview"}),n.jsx("button",{type:"button",onClick:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Continue"})]})]})]}),A===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Points"}),n.jsx("div",{className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm p-2",children:Number.isFinite(d.totalPoints)?d.totalPoints:0})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Questions"}),n.jsxs("div",{className:"space-x-2",children:[n.jsxs("button",{type:"button",onClick:()=>K("text"),disabled:t&&$,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&$?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-indigo-600 hover:bg-indigo-700"}`,title:t&&$?"Cannot add questions after students have submitted":"",children:[n.jsx(ii,{className:"h-4 w-4 mr-1"}),"Add Text Question"]}),n.jsxs("button",{type:"button",onClick:()=>K("multiple-choice"),disabled:t&&$,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&$?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-green-600 hover:bg-green-700"}`,title:t&&$?"Cannot add questions after students have submitted":"",children:[n.jsx(ii,{className:"h-4 w-4 mr-1"}),"Add Multiple Choice"]}),n.jsxs("button",{type:"button",onClick:()=>K("matching"),disabled:t&&$,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&$?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"}`,title:t&&$?"Cannot add questions after students have submitted":"",children:[n.jsx(ii,{className:"h-4 w-4 mr-1"}),"Add Matching Question"]})]})]}),d.questions.map((B,re)=>{var X;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",re+1]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",B.type==="text"?"Text Entry":B.type==="multiple-choice"?"Multiple Choice":"Matching",")"]})]}),n.jsx("input",{type:"text",id:`question-text-${re}`,name:`question-text-${re}`,value:B.text,onChange:U=>W(re,"text",U.target.value),placeholder:"Enter question text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsx("input",{type:"number",id:`question-points-${re}`,name:`question-points-${re}`,value:B.points,onChange:U=>W(re,"points",parseInt(U.target.value)||0),onClick:U=>{B.points===0&&(U.currentTarget.value="")},min:"0",className:"w-20 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),n.jsx("span",{className:"text-sm text-gray-500",children:"points"}),n.jsx("button",{type:"button",onClick:()=>te(re),disabled:t&&$,className:`${t&&$?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,title:t&&$?"Cannot remove questions after students have submitted":"",children:n.jsx(As,{className:"h-4 w-4"})}),re>0&&n.jsx("button",{type:"button",onClick:()=>se(re,"up"),className:"text-gray-600 hover:text-gray-800",children:n.jsx(eO,{className:"h-4 w-4"})}),re<d.questions.length-1&&n.jsx("button",{type:"button",onClick:()=>se(re,"down"),className:"text-gray-600 hover:text-gray-800",children:n.jsx(JM,{className:"h-4 w-4"})})]})]}),B.type==="multiple-choice"&&n.jsxs("div",{className:"ml-4 space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Options:"}),(X=B.options)==null?void 0:X.map((U,ne)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${re}-correct`,checked:U.isCorrect,onChange:()=>{var xe;const pe=[...d.questions];pe[re].options=(xe=pe[re].options)==null?void 0:xe.map((ke,ze)=>({...ke,isCorrect:ze===ne})),m({...d,questions:pe})},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("input",{type:"text",value:U.text,onChange:pe=>{const xe=[...d.questions];xe[re].options&&(xe[re].options[ne].text=pe.target.value,m({...d,questions:xe}))},className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:()=>Y(re,ne),className:"text-red-600 hover:text-red-800",children:n.jsx(As,{className:"h-4 w-4"})})]},ne)),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",id:`new-option-${re}`,name:`new-option-${re}`,value:b.text,onChange:U=>v({...b,text:U.target.value}),placeholder:"Add new option",className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:()=>M(re),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Option"})]})]}),B.type==="matching"&&n.jsxs("div",{className:"mt-2 border rounded p-3 bg-gray-50",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Matching Pairs"}),B.leftItems&&B.leftItems.map((U,ne)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:U.text,onChange:pe=>{const xe=[...B.leftItems||[]];xe[ne].text=pe.target.value,W(re,"leftItems",xe)},placeholder:"Prompt (e.g., Red)"}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:B.rightItems&&B.rightItems[ne]?B.rightItems[ne].text:"",onChange:pe=>{const xe=[...B.rightItems||[]];xe[ne]||(xe[ne]={id:U.id,text:""}),xe[ne].text=pe.target.value,xe[ne].id=U.id,W(re,"rightItems",xe)},placeholder:"Correct Match (e.g., Green)"}),n.jsx("button",{type:"button",className:"ml-2 text-red-600",onClick:()=>{const pe=(B.leftItems||[]).filter((ke,ze)=>ze!==ne),xe=(B.rightItems||[]).filter((ke,ze)=>ze!==ne);W(re,"leftItems",pe),W(re,"rightItems",xe)},children:"Remove"})]},U.id)),n.jsx("button",{type:"button",className:"mt-2 px-2 py-1 bg-blue-100 rounded",onClick:()=>{const U=Math.random().toString(36).substr(2,9);W(re,"leftItems",[...B.leftItems||[],{id:U,text:""}]),W(re,"rightItems",[...B.rightItems||[],{id:U,text:""}])},children:"Add Pair"}),n.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Distractor Options (Right Side Only)"}),(B.rightItems||[]).slice((B.leftItems||[]).length).map((U,ne)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:U.text,onChange:pe=>{const xe=B.leftItems?B.leftItems.length:0,ke=[...B.rightItems||[]];ke[xe+ne].text=pe.target.value,W(re,"rightItems",ke)},placeholder:"Distractor (e.g., Aqua)"}),n.jsx("button",{type:"button",className:"ml-2 text-red-600",onClick:()=>{const pe=B.leftItems?B.leftItems.length:0,xe=[...B.rightItems||[]];xe.splice(pe+ne,1),W(re,"rightItems",xe)},children:"Remove"})]},U.id||ne)),n.jsx("button",{type:"button",className:"mt-2 px-2 py-1 bg-blue-100 rounded",onClick:()=>{B.leftItems&&B.leftItems.length,W(re,"rightItems",[...B.rightItems||[],{id:Math.random().toString(36).substr(2,9),text:""}])},children:"Add Distractor"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Preview:"}),(B.leftItems||[]).map((U,ne)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("span",{className:"w-40",children:U.text||n.jsx("em",{children:"Prompt"})}),n.jsxs("select",{className:"border p-1 rounded w-40",disabled:!0,children:[n.jsx("option",{children:"[ Choose ]"}),eS((B.rightItems||[]).map(pe=>pe.text)).map((pe,xe)=>n.jsx("option",{children:pe},xe))]})]},U.id))]})]})]},B.id)})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-attachments",className:"block text-sm font-medium text-gray-700",children:"Attachments"}),n.jsx("input",{type:"file",id:"assignment-attachments",name:"attachments",multiple:!0,onChange:B=>{B.target.files&&m({...d,attachments:[...d.attachments,...Array.from(B.target.files)]})},className:"mt-1 block w-full"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{type:"button",onClick:F,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>h(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:f?"Edit":"Preview"}),n.jsx("button",{type:"button",onClick:()=>s(`/modules/${d.moduleId}/assignments`),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:t?"Update Assignment":"Create Assignment"})]})]})]})]}),f&&n.jsxs("div",{className:"mt-8 p-6 border rounded-lg bg-gray-50",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:d.title}),n.jsx("div",{className:"prose max-w-none",children:n.jsx(ho,{children:d.description})}),n.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-500",children:[n.jsxs("p",{children:["Total Points: ",d.totalPoints]}),n.jsxs("p",{children:["Available From: ",new Date(d.availableFrom).toLocaleString()]}),n.jsxs("p",{children:["Due: ",new Date(d.dueDate).toLocaleString()]}),d.allowStudentUploads&&n.jsx("p",{className:"text-blue-600 font-medium",children:"✓ Students can upload files"}),n.jsxs("p",{children:["Display Mode: ",d.displayMode==="single"?"Single Question View":"Scrollable View"]})]}),n.jsx("div",{className:"mt-6 space-y-6",children:d.questions.map((B,re)=>n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium",children:["Question ",re+1," (",B.points," points)"]}),n.jsx("p",{className:"mt-1",children:B.text})]}),n.jsx("span",{className:"text-sm text-gray-500",children:B.type==="text"?"Text Entry":B.type==="multiple-choice"?"Multiple Choice":"Matching"})]}),B.type==="multiple-choice"&&B.options&&n.jsx("div",{className:"mt-4 space-y-2",children:B.options.map((X,U)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${re}`,checked:X.isCorrect,readOnly:!0,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsxs("span",{className:X.isCorrect?"text-green-600 font-medium":"",children:[X.text,X.isCorrect&&" (Correct)"]})]},U))}),B.type==="text"&&n.jsx("div",{className:"mt-4",children:n.jsx("textarea",{className:"w-full h-32 p-2 border rounded-md bg-gray-50",placeholder:"Student's answer will appear here",readOnly:!0})}),B.type==="matching"&&n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Matching Pairs:"}),(B.leftItems||[]).map((X,U)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"w-32",children:X.text||n.jsx("em",{children:"Prompt"})}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsxs("select",{className:"border p-1 rounded w-32",disabled:!0,children:[n.jsx("option",{children:"[ Choose ]"}),eS((B.rightItems||[]).map(ne=>ne.text)).map((ne,pe)=>n.jsx("option",{children:ne},pe))]})]},X.id))]})]},B.id))}),d.isGroupAssignment&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Group Assignment"}),n.jsxs("p",{className:"mt-1 text-sm text-blue-600",children:["This is a group assignment. Students will submit as a group.",d.groupSetId&&n.jsxs("span",{children:[" ","Using group set: ",(ye=l.find(B=>B._id===d.groupSetId))==null?void 0:ye.name]})]})]})]})]})})};function eS(e){return e.slice().sort(()=>Math.random()-.5)}const tS="http://localhost:5000",JU=()=>{const{moduleId:e}=wr(),t=Lt(),{user:r}=Tt(),{updateModule:s}=ki(),[a,i]=N.useState(!0),[l,u]=N.useState(null),[d,m]=N.useState({title:"",description:""}),[f,h]=N.useState(!1);N.useEffect(()=>{(async()=>{var b,v;if(e)try{const w=localStorage.getItem("token"),C=await we.get(`${tS}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${w}`}});if(C.data.success){const j=C.data.data;m({title:j.title,description:j.description||""})}else u("Failed to load module data")}catch(w){console.error("Error fetching module:",w),u(((v=(b=w.response)==null?void 0:b.data)==null?void 0:v.message)||"Error loading module")}finally{i(!1)}})()},[e]);const g=async x=>{var b,v;if(x.preventDefault(),!!e){h(!0),u(null);try{const w=localStorage.getItem("token"),C=await we.get(`${tS}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${w}`}});if(!C.data.success)throw new Error("Failed to get module data");const j=C.data.data.course._id||C.data.data.course;await s(e,d,j),t(-1)}catch(w){console.error("Error updating module:",w),u(((v=(b=w.response)==null?void 0:b.data)==null?void 0:v.message)||"Error updating module")}finally{h(!1)}}};return a?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):l?n.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:l})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit modules."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):n.jsx("div",{className:"max-w-2xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Module"}),n.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:d.title,onChange:x=>m({...d,title:x.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",value:d.description,onChange:x=>m({...d,description:x.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:f?"Saving...":"Save Changes"})]})]})]})})},rS="http://localhost:5000",ZU=()=>{const{pageId:e}=wr(),t=Lt(),{user:r}=Tt(),[s,a]=N.useState(!0),[i,l]=N.useState(null),[u,d]=N.useState({title:"",content:""}),[m,f]=N.useState(!1),[h,g]=N.useState(!1);N.useEffect(()=>{(async()=>{var v,w;if(e)try{const C=localStorage.getItem("token"),j=await we.get(`${rS}/api/pages/view/${e}`,{headers:{Authorization:`Bearer ${C}`}});if(j.data.success){const _=j.data.data;d({title:_.title,content:_.content||""})}else l("Failed to load page data")}catch(C){console.error("Error fetching page:",C),l(((w=(v=C.response)==null?void 0:v.data)==null?void 0:w.message)||"Error loading page")}finally{a(!1)}})()},[e]);const x=async b=>{var v,w;if(b.preventDefault(),!!e){f(!0),l(null);try{const C=localStorage.getItem("token"),j=new FormData;j.append("title",u.title),j.append("content",u.content);const _=await we.put(`${rS}/api/pages/${e}`,j,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"multipart/form-data"}});if(_.data.success)t(-1);else throw new Error(_.data.message||"Failed to update page")}catch(C){console.error("Error updating page:",C),l(((w=(v=C.response)==null?void 0:v.data)==null?void 0:w.message)||"Error updating page")}finally{f(!1)}}};return s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:i})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit pages."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Page"}),n.jsx("button",{type:"button",onClick:()=>g(!h),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:h?"Edit":"Preview"})]}),h?n.jsxs("div",{className:"prose max-w-none",children:[n.jsx("h1",{children:u.title}),n.jsx(ho,{children:u.content})]}):n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:u.title,onChange:b=>d({...u,title:b.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content (Markdown supported)"}),n.jsx("textarea",{id:"content",value:u.content,onChange:b=>d({...u,content:b.target.value}),rows:15,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-mono"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m?"Saving...":"Save Changes"})]})]})]})})},eW="http://localhost:5000",tW=()=>{const{id:e}=wr(),t=Lt(),{user:r}=Tt(),[s,a]=N.useState(!0),[i,l]=N.useState(null),[u,d]=N.useState(null),[m,f]=N.useState(null);return N.useEffect(()=>{(async()=>{var g,x;if(e)try{const b=localStorage.getItem("token"),v=await we.get(`${eW}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${b}`}});if(v.data){const w=v.data;if(d(w),w.module){const C=typeof w.module=="string"?w.module:w.module._id;f(C)}}else l("Failed to load assignment data")}catch(b){console.error("Error fetching assignment:",b),l(((x=(g=b.response)==null?void 0:g.data)==null?void 0:x.message)||"Error loading assignment")}finally{a(!1)}})()},[e]),s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:i})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit assignments."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):m?n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Assignment"}),n.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Editing: ",u==null?void 0:u.title]})]}),n.jsx(zA,{moduleId:m,editMode:!0,assignmentData:u})]})}):n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:"Could not determine module for this assignment."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]})},rW=()=>{var ie,be;const{id:e}=wr(),t=Lt(),[r,s]=N.useState(null),[a,i]=N.useState(null),[l,u]=N.useState(!0),[d,m]=N.useState(""),[f,h]=N.useState(null),[g,x]=N.useState({}),[b,v]=N.useState(!1),[w,C]=N.useState(null),[j,_]=N.useState(!1),[k,D]=N.useState(0),[A,T]=N.useState(new Set),[I,L]=N.useState(new Set),[q,O]=N.useState(null),[$,z]=N.useState(!1),[K,te]=N.useState(null),[se,W]=N.useState([]),[M,Y]=N.useState(!1),[P,G]=N.useState(!0),[Z,F]=N.useState(!1),[Ne,ye]=N.useState({totalStudents:0,submittedCount:0,averageGrade:0,averageTime:0,questionStats:[],engagementStats:{averageTimeSpent:0,averageAttemptsPerStudent:0,peakHour:0,peakDay:"Monday",lateSubmissions:0,totalSubmissions:0}}),[B,re]=N.useState(!1),X=(f==null?void 0:f.role)==="teacher"||(f==null?void 0:f.role)==="admin";N.useEffect(()=>{const me=JSON.parse(localStorage.getItem("user"));h(me);const Q=setTimeout(()=>{me||(m("User not found. Please log in again."),u(!1))},2e3);return()=>clearTimeout(Q)},[]),N.useEffect(()=>{i(null)},[f,e]);const U=async()=>{var me;if(!(!X||!(r!=null&&r._id)))try{re(!0);const Q=localStorage.getItem("token"),ae=await we.get(`/api/assignments/${r._id}/stats`,{headers:{Authorization:`Bearer ${Q}`}});ae.data.success&&ye(ae.data.stats)}catch(Q){console.error("Error fetching submission stats:",Q);try{const Te=(await we.get(`/api/submissions/assignment/${r._id}`,{headers:{Authorization:`Bearer ${token}`}})).data||[],Ve={totalStudents:Te.length,submittedCount:Te.filter(We=>We.submittedAt).length,averageGrade:Te.length>0?Te.reduce((We,nt)=>We+(nt.grade||0),0)/Te.length:0,averageTime:r.isTimedQuiz&&Te.length>0?Te.reduce((We,nt)=>We+(nt.timeSpent||0),0)/Te.length:0,questionStats:((me=r.questions)==null?void 0:me.map((We,nt)=>({questionIndex:nt,correctCount:0,incorrectCount:0,averagePoints:0})))||[]};ye(Ve)}catch(ae){console.error("Error calculating basic stats:",ae),ye({totalStudents:0,submittedCount:0,averageGrade:0,averageTime:0,questionStats:[]})}}finally{re(!1)}};N.useEffect(()=>{f&&(async()=>{var Q;try{const ae=localStorage.getItem("token"),Te=await we.get(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${ae}`}});if(s(Te.data),Te.data.questions){const Ve={};Te.data.questions.forEach((We,nt)=>{We.type==="matching"?Ve[nt]={}:Ve[nt]=""}),x(Ve)}if(Te.data.isGroupAssignment&&Te.data.groupSet&&(f==null?void 0:f.role)==="student"){const Ve=f._id,nt=(await we.get(`/api/groups/sets/${Te.data.groupSet}/groups`,{headers:{Authorization:`Bearer ${ae}`}})).data.find(st=>st.members.some($e=>String($e._id)===String(Ve)));C(nt?nt._id:null)}if((f==null?void 0:f.role)==="student")try{const Ve=await we.get(`/api/submissions/student/${e}`,{headers:{Authorization:`Bearer ${ae}`}});if(i(Ve.data),(Q=Ve.data)!=null&&Q.answers){const We={};Object.keys(Ve.data.answers).forEach(nt=>{const st=Ve.data.answers[nt];try{We[nt]=JSON.parse(st)}catch{We[nt]=st}}),x(We)}}catch{if(i(null),Te.data.questions){const We={};Te.data.questions.forEach((nt,st)=>{nt.type==="matching"?We[st]={}:We[st]=""}),x(We)}}else if((f==null?void 0:f.role)==="teacher"||(f==null?void 0:f.role)==="admin")try{const Ve=await we.get(`/api/submissions/assignment/${e}`,{headers:{Authorization:`Bearer ${ae}`}});i(Ve.data[0]||null)}catch{i(null)}u(!1)}catch{m("Error fetching assignment details"),u(!1)}})()},[e,f]),N.useEffect(()=>{r&&X&&U()},[r,X]),N.useEffect(()=>{if(r!=null&&r.isTimedQuiz&&(r!=null&&r.quizTimeLimit)&&(f==null?void 0:f.role)==="student"&&!a){const me=`quiz_start_${e}_${f._id}`,Q=localStorage.getItem(me);if(Q){const ae=new Date(Q),Ve=Math.floor((new Date-ae)/1e3),We=r.quizTimeLimit*60;Ve<We?(z(!0),te(ae)):localStorage.removeItem(me)}}},[r,f,a,e]),N.useEffect(()=>{if($&&K&&(r!=null&&r.isTimedQuiz)&&(r!=null&&r.quizTimeLimit)&&!a&&(f==null?void 0:f.role)==="student"){const me=setInterval(()=>{const ae=Math.floor((new Date-K)/1e3),Ve=r.quizTimeLimit*60-ae;Ve<=0?(clearInterval(me),O(0)):O(Ve)},1e3);return()=>clearInterval(me)}},[$,K,r,e,a,f]);const ne=()=>{if(r!=null&&r.isTimedQuiz&&(r!=null&&r.quizTimeLimit)){const me=new Date;te(me),z(!0);const Q=`quiz_start_${e}_${f._id}`;localStorage.setItem(Q,me.toISOString()),O(r.quizTimeLimit)}},pe=async me=>{const Q=Array.from(me.target.files);if(Q.length!==0){Y(!0);try{const ae=new FormData;Q.forEach(nt=>{ae.append("files",nt)});const Te=localStorage.getItem("token"),We=(await we.post("/api/upload",ae,{headers:{Authorization:`Bearer ${Te}`,"Content-Type":"multipart/form-data"}})).data.files.map(nt=>({name:nt.originalname,url:nt.path,size:nt.size}));W(nt=>[...nt,...We])}catch(ae){console.error("Error uploading files:",ae),m("Error uploading files. Please try again.")}finally{Y(!1)}}},xe=me=>{W(Q=>Q.filter((ae,Te)=>Te!==me))},ke=me=>{if(!me||me<=0)return"0 Hours, 0 Minutes, 0 Seconds";const Q=Math.floor(me/3600),ae=Math.floor(me%3600/60),Te=me%60;return`${Q} Hour${Q!==1?"s":""}, ${ae} Minute${ae!==1?"s":""}, ${Te} Second${Te!==1?"s":""}`},ze=(me,Q)=>{x(Te=>({...Te,[me]:Q}));const ae=typeof Q=="object"?Object.keys(Q).length>0&&Object.values(Q).some(Te=>Te&&Te.trim()!==""):Q&&Q.trim()!=="";T(ae?Te=>new Set([...Te,me]):Te=>{const Ve=new Set(Te);return Ve.delete(me),Ve})},He=me=>{D(me)},it=()=>{r!=null&&r.questions&&k<r.questions.length-1&&D(k+1)},Ge=()=>{k>0&&D(k-1)},rt=me=>{L(Q=>{const ae=new Set(Q);return ae.has(me)?ae.delete(me):ae.add(me),ae})},mt=async()=>{var me,Q,ae,Te;if(!(!f||f.role!=="student")){if(r!=null&&r.isGroupAssignment&&!w){m("You are not a member of any group for this group assignment.");return}v(!0);try{const Ve={};Object.keys(g).forEach($e=>{const lt=g[$e];lt&&typeof lt=="object"?Ve[$e]=JSON.stringify(lt):Ve[$e]=lt});const We=localStorage.getItem("token"),nt={assignment:e,answers:Ve,submittedAt:new Date,uploadedFiles:se};r!=null&&r.isGroupAssignment&&(nt.groupId=w);const st=await we.post("/api/submissions",nt,{headers:{Authorization:`Bearer ${We}`}});i(st.data),m(""),window.dispatchEvent(new Event("assignmentSubmitted"))}catch(Ve){console.error("[Frontend] Submit error:",(me=Ve.response)==null?void 0:me.status,(Q=Ve.response)==null?void 0:Q.data),m(((Te=(ae=Ve.response)==null?void 0:ae.data)==null?void 0:Te.message)||"Error submitting assignment")}finally{v(!1)}}},et=async()=>{var me,Q;if(!(!f||f.role!=="teacher"&&f.role!=="admin")&&window.confirm("Are you sure you want to delete this assignment?"))try{const ae=localStorage.getItem("token");await we.delete(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${ae}`}}),t(-1)}catch(ae){m(((Q=(me=ae.response)==null?void 0:me.data)==null?void 0:Q.message)||"Error deleting assignment")}},ve=async()=>{var me,Q;if(!(!f||f.role!=="teacher"&&f.role!=="admin")){_(!0);try{const ae=localStorage.getItem("token"),Te=await we.patch(`${Ae}/api/assignments/${e}/publish`,{},{headers:{Authorization:`Bearer ${ae}`}});s(Ve=>({...Ve,published:Te.data.published}))}catch(ae){console.error("Error toggling assignment publish:",ae),m(((Q=(me=ae.response)==null?void 0:me.data)==null?void 0:Q.message)||"Error toggling publish status")}finally{_(!1)}}};if(l)return n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(d)return n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d});if(!r)return n.jsx("div",{children:"Assignment not found"});const he=(f==null?void 0:f.role)==="student",ce=X&&((ie=r==null?void 0:r.createdBy)==null?void 0:ie._id)===(f==null?void 0:f._id),Ee=new Date>new Date(r==null?void 0:r.dueDate),Ue=X;return n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Due: ",zt(new Date(r.dueDate),"PPp"),a&&n.jsxs("span",{className:"ml-4 text-green-600",children:["Submitted: ",zt(new Date(a.submittedAt),"PPp")]})]}),he&&a&&typeof a.feedback=="string"&&a.feedback.trim()!==""&&n.jsxs("div",{className:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[n.jsx("div",{className:"text-yellow-800 font-semibold mb-1",children:"Instructor Feedback"}),n.jsx("div",{className:"text-yellow-900 whitespace-pre-line",children:a.feedback})]}),he&&a&&a.autoGraded&&n.jsxs("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:[n.jsx("div",{className:"text-blue-800 font-semibold mb-1",children:a.teacherApproved?"Grading Complete":"Auto-Graded"}),n.jsx("div",{className:"text-blue-900",children:a.teacherApproved?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:["Final Grade: ",(()=>{const me=Number(a.finalGrade||a.grade);return Number.isInteger(me)?me.toString():me.toFixed(2)})()," points"]}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Multiple choice questions were auto-graded. Other questions were graded by your instructor."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:["Auto-Grade: ",(()=>{const me=Number(a.autoGrade);return Number.isInteger(me)?me.toString():me.toFixed(2)})()," points"]}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Multiple choice questions have been auto-graded. Your instructor will review and approve the final grade."})]})})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[he&&!a&&!Ee&&(!r.isTimedQuiz||$)&&n.jsx("button",{onClick:mt,disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:b?"Submitting...":"Submit Assignment"}),ce&&n.jsx("button",{onClick:et,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]}),r.isTimedQuiz&&r.quizTimeLimit&&he&&!a&&!Ee&&!$&&n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Timed Quiz"}),n.jsxs("p",{className:"text-blue-700 mb-4",children:["This quiz has a time limit of ",r.quizTimeLimit," minutes. Once you start, the timer will begin and cannot be paused."]}),n.jsx("button",{onClick:ne,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Start Quiz"})]})}),((be=r.attachments)==null?void 0:be.length)>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Attachments"}),n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:r.attachments.map((me,Q)=>n.jsx("li",{className:"py-3",children:n.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-500",children:me.split("/").pop()})},Q))})]}),r.questions&&r.questions.length>0&&(()=>{const me=!he||!a||Ee||r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers||a.showStudentAnswers||r.showStudentAnswers);return n.jsxs("div",{className:"mt-8",children:[Ue&&n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-blue-900",children:"Assignment Analytics"}),n.jsx("p",{className:"text-blue-700",children:"Real-time statistics and performance metrics"})]})]}),B&&n.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),n.jsx("span",{children:"Loading stats..."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Submissions"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[Ne.submittedCount,"/",Ne.totalStudents]}),n.jsx("p",{className:"text-xs text-gray-500",children:Ne.totalStudents>0?`${(Ne.submittedCount/Ne.totalStudents*100).toFixed(1)}% submitted`:"0% submitted"})]}),n.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-600",children:"Submitted"}),n.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ne.submittedCount}),n.jsx("p",{className:"text-xs text-gray-500",children:Ne.totalStudents>0?`${(Ne.submittedCount/Ne.totalStudents*100).toFixed(1)}% completion`:"0% completion"})]}),n.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Average Grade"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[Ne.averageGrade>0?Ne.averageGrade.toFixed(1):"0"," pts"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[r.questions.reduce((Q,ae)=>Q+(ae.points||0),0)," total possible"]})]}),n.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-indigo-600",children:"Avg. Time Spent"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-900",children:Ne.engagementStats.averageTimeSpent>0?`${Math.floor(Ne.engagementStats.averageTimeSpent/60)}:${(Ne.engagementStats.averageTimeSpent%60).toString().padStart(2,"0")}`:"0:00"}),n.jsx("p",{className:"text-xs text-gray-500",children:r.isTimedQuiz?"Timed quiz":"Not timed"})]}),n.jsx("svg",{className:"w-8 h-8 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-teal-600",children:"Avg. Attempts"}),n.jsx("p",{className:"text-2xl font-bold text-teal-900",children:Ne.engagementStats.averageAttemptsPerStudent.toFixed(1)}),n.jsx("p",{className:"text-xs text-gray-500",children:"per student"})]}),n.jsx("svg",{className:"w-8 h-8 text-teal-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-pink-600",children:"Peak Activity"}),n.jsx("p",{className:"text-2xl font-bold text-pink-900",children:Ne.engagementStats.peakDay}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Ne.engagementStats.peakHour,":00"]})]}),n.jsx("svg",{className:"w-8 h-8 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Assignment Info"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Questions:"}),n.jsx("span",{className:"font-medium",children:r.questions.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Points:"}),n.jsx("span",{className:"font-medium",children:r.questions.reduce((Q,ae)=>Q+(ae.points||0),0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Type:"}),n.jsx("span",{className:"font-medium",children:r.group||"Assignment"})]}),r.isTimedQuiz&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Time Limit:"}),n.jsxs("span",{className:"font-medium",children:[r.quizTimeLimit," minutes"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Submission Status"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Published:"}),n.jsx("span",{className:`font-medium ${r.published?"text-green-600":"text-red-600"}`,children:r.published?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Due Date:"}),n.jsx("span",{className:"font-medium",children:zt(new Date(r.dueDate),"MMM d, yyyy")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Past Due:"}),n.jsx("span",{className:`font-medium ${Ee?"text-red-600":"text-green-600"}`,children:Ee?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>t(`/assignments/${e}/grade`),className:"w-full text-left px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 rounded-md transition-colors flex items-center space-x-2",children:[n.jsx(Ls,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{children:"Grade Submissions"})]}),n.jsxs("button",{onClick:()=>t(`/assignments/${e}/edit`),className:"w-full text-left px-3 py-2 text-sm bg-green-50 hover:bg-green-100 rounded-md transition-colors flex items-center space-x-2",children:[n.jsx(wf,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{children:"Edit Assignment"})]}),n.jsx("button",{onClick:ve,className:"w-full text-left px-3 py-2 text-sm bg-purple-50 hover:bg-purple-100 rounded-md transition-colors flex items-center space-x-2",children:r.published?n.jsxs(n.Fragment,{children:[n.jsx(mo,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{children:"Unpublish"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Kl,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{children:"Publish"})]})})]})]})]})]})}),!Ue&&(!r.isTimedQuiz||$||!he||a||Ee)&&me?r.displayMode==="single"&&he&&!a&&!Ee?n.jsxs("div",{className:"flex gap-6",children:[n.jsx("div",{className:"flex-1",children:Z?n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-4",children:n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Upload Files"})})}),n.jsx("div",{className:"border-b border-gray-200 mb-4"}),n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:"You have completed all questions. You can now upload any additional files if needed."})}),r.allowStudentUploads&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"file",multiple:!0,onChange:pe,disabled:M,className:"hidden",id:"file-upload-final"}),n.jsxs("label",{htmlFor:"file-upload-final",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer ${M?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),M?"Uploading...":"Upload File"]}),se.length>0&&n.jsxs("button",{onClick:()=>document.getElementById("file-upload-final").click(),className:"inline-flex items-center px-4 py-2 border border-pink-500 rounded-md shadow-sm text-sm font-medium text-pink-600 bg-white hover:bg-pink-50",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another File"]})]})]}),se.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Uploaded Files:"}),n.jsx("div",{className:"space-y-2",children:se.map((Q,ae)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(Q.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsx("button",{onClick:()=>xe(ae),className:"text-red-600 hover:text-red-800",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ae))})]})]}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Questions"}),n.jsx("button",{onClick:mt,disabled:b,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:b?"Submitting...":"Submit Assignment"})]})]}):n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Question ",k+1]}),n.jsx("button",{onClick:()=>rt(k),className:`p-1 rounded border ${I.has(k)?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:I.has(k)?n.jsx(va,{className:"h-3 w-3 fill-current"}):n.jsx(va,{className:"h-3 w-3"})})]}),n.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[r.questions[k].points," pts"]})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-4"}),n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:r.questions[k].text})}),r.questions[k].type==="multiple-choice"&&r.questions[k].options&&n.jsx("div",{className:"divide-y divide-gray-200",children:r.questions[k].options.map((Q,ae)=>n.jsxs("div",{className:"relative py-2",children:[n.jsx("input",{type:"radio",id:`question-${k}-option-${ae}`,name:`question-${k}`,value:Q.text,checked:g[k]===Q.text,onChange:Te=>ze(k,Te.target.value),className:"sr-only"}),n.jsxs("label",{htmlFor:`question-${k}-option-${ae}`,className:"flex items-center space-x-3 cursor-pointer",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${g[k]===Q.text?"border-indigo-500 bg-indigo-500":"border-gray-300 bg-white"}`,children:g[k]===Q.text&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),n.jsx("span",{className:"text-sm text-gray-900",children:Q.text})]})]},ae))}),r.questions[k].type==="text"&&n.jsx("div",{children:n.jsx("textarea",{id:`question-${k}-answer`,name:`question-${k}-answer`,className:"w-full h-40 p-4 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-900",value:g[k]||"",onChange:Q=>ze(k,Q.target.value),placeholder:"Enter your answer here..."})}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:Ge,disabled:k===0,className:`px-4 py-2 border rounded-md text-sm font-medium ${k===0?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:"Previous"}),k<r.questions.length-1?n.jsx("button",{onClick:it,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Next"}):n.jsx("button",{onClick:()=>F(!0),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Continue to Upload Files"})]})]})}),n.jsxs("div",{className:"w-80 bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Questions"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.questions.map((Q,ae)=>n.jsxs("button",{onClick:()=>He(ae),className:`w-full flex items-center justify-between p-2 rounded-md text-sm ${k===ae?"bg-indigo-100 text-indigo-700 border border-indigo-200":"hover:bg-gray-100"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[A.has(ae)&&I.has(ae)?n.jsxs("div",{className:"relative",children:[n.jsx(ja,{className:"h-4 w-4 text-green-600"}),n.jsx(va,{className:"h-3 w-3 text-yellow-500 absolute -top-1 -right-1"})]}):A.has(ae)?n.jsx(ja,{className:"h-4 w-4 text-green-600"}):I.has(ae)?n.jsx(va,{className:"h-4 w-4 text-yellow-600"}):n.jsx(hj,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Question ",ae+1]})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[Q.points," pts"]})]},ae))})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[A.size," of ",r.questions.length," answered"]})]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.size/r.questions.length*100}%`}})})]}),r.isTimedQuiz&&n.jsxs("div",{className:"mt-4 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Time Remaining:"}),n.jsx("button",{onClick:()=>G(!P),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:P?"Hide":"Show"})]})}),P&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Attempt due: ",zt(new Date(r.dueDate),"MMM d 'at' h:mm a")]}),$&&q!==null?n.jsx("div",{className:`text-sm font-medium ${q<=300?"text-red-600":"text-gray-700"}`,children:ke(q)}):n.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[r.quizTimeLimit," minutes"]}),!$&&n.jsx("button",{onClick:ne,className:"mt-2 w-full bg-indigo-600 text-white text-sm py-2 px-3 rounded hover:bg-indigo-700",children:"Start Quiz"})]})]})]})]}):n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Questions"}),n.jsx("div",{className:"space-y-6",children:r.questions.map((Q,ae)=>{var nt;let Te=!1,Ve=!1;if(a&&r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers)&&(Q.type==="multiple-choice"||Q.type==="matching")){Ve=!0;const st=g[ae];if(Q.type==="multiple-choice"&&Q.options){const $e=Q.options.find(lt=>lt.isCorrect);Te=st===($e==null?void 0:$e.text)}else if(Q.type==="matching"&&Q.leftItems&&Q.rightItems&&st&&typeof st=="object"){let $e=0,lt=0;for(let gt=0;gt<Q.leftItems.length;gt++){const Rt=Q.leftItems[gt],Kt=st[gt],Vt=Q.rightItems.find(Qt=>Qt.id===Rt.id);Vt&&Kt===Vt.text&&$e++,lt++}Te=$e===lt&&lt>0}}Ue&&Q.type==="multiple-choice"&&Q.options&&((nt=Q.options.find(st=>st.isCorrect))==null||nt.text);const We=a&&r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers);return n.jsxs("div",{className:`bg-white border-2 rounded-lg p-6 shadow-sm ${Ue?"border-blue-400 bg-blue-50 shadow-blue-100":(()=>{var st;if(a&&a.autoGraded&&(Q.type==="multiple-choice"||Q.type==="matching")){if(Q.type==="multiple-choice"){const $e=g[ae],lt=Q.options.find(Rt=>Rt.isCorrect);return String($e)===String(lt==null?void 0:lt.text)?"border-green-500":"border-yellow-500"}else if(Q.type==="matching"){const $e=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(ae.toString()):(st=a.autoQuestionGrades)==null?void 0:st[ae.toString()],lt=Q.points||0,gt=$e/lt;return gt===1?"border-green-500":gt===0?"border-red-500":"border-yellow-500"}}return We&&Ve?Te?"border-green-500":"border-yellow-500":"border-gray-200"})()}`,children:[n.jsx("div",{className:`rounded-lg p-3 mb-3 ${Ue?"bg-blue-100":"bg-gray-100"}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("h4",{className:"text-base font-semibold text-gray-900",children:["Question ",ae+1]}),Ue&&n.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-500 text-white rounded-full font-bold",children:"TEACHER PREVIEW"}),he&&!a&&!Ee&&n.jsx("button",{onClick:()=>rt(ae),className:`p-1 rounded border ${I.has(ae)?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:I.has(ae)?n.jsx(va,{className:"h-3 w-3 fill-current"}):n.jsx(va,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"flex items-center space-x-2",children:a&&a.autoGraded&&(Q.type==="multiple-choice"||Q.type==="matching")?(()=>{var $e;const st=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(ae.toString()):($e=a.autoQuestionGrades)==null?void 0:$e[ae.toString()];return n.jsx("span",{className:"text-base font-semibold text-gray-900",children:(()=>{const lt=Number(st||0),gt=Q.points,Rt=Number.isInteger(lt)?lt:lt.toFixed(2),Kt=Number.isInteger(gt)?gt:gt.toFixed(2);return`${Rt} / ${Kt} pts`})()})})():n.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[Q.points," pts"]})})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-3"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:Q.text}),Q.type==="multiple-choice"&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the correct answer."})]}),Q.type==="multiple-choice"&&Q.options&&n.jsxs("div",{children:[a&&a.autoGraded&&n.jsxs("div",{className:`mb-4 p-3 rounded-lg ${(()=>{const st=g[ae],$e=Q.options.find(gt=>gt.isCorrect);return String(st)===String($e==null?void 0:$e.text)?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"})()}`,children:[n.jsx("div",{className:"text-sm text-blue-800 font-medium mb-2",children:"Auto-Graded Results"}),(()=>{var Kt;const st=g[ae],$e=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(ae.toString()):(Kt=a.autoQuestionGrades)==null?void 0:Kt[ae.toString()],lt=Q.points||0,gt=Q.options.find(Vt=>Vt.isCorrect),Rt=String(st)===String(gt==null?void 0:gt.text);return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const Vt=Number($e||0),Qt=lt,nr=Number.isInteger(Vt)?Vt:Vt.toFixed(2),Xt=Number.isInteger(Qt)?Qt:Qt.toFixed(2);return`${nr} / ${Xt} pts`})()}),n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Student Answer:"}),n.jsx("div",{className:"text-sm text-gray-900 mb-2",children:st||"No answer"}),n.jsx("div",{className:`text-sm ${Rt?"text-green-600":"text-red-600"}`,children:Rt?"Correct!":`Incorrect. Correct answer: ${(gt==null?void 0:gt.text)||"Unknown"}`})]})})()]}),(!a||!a.autoGraded)&&n.jsx("div",{className:"divide-y divide-gray-200",children:Q.options.map((st,$e)=>n.jsxs("div",{className:"relative py-2",children:[n.jsx("input",{type:"radio",id:`question-${ae}-option-${$e}`,name:`question-${ae}`,value:st.text,checked:g[ae]===st.text,onChange:lt=>!a&&he&&ze(ae,lt.target.value),disabled:!!a||!he||Ee||Ue,className:"sr-only"}),n.jsxs("label",{htmlFor:`question-${ae}-option-${$e}`,className:`flex items-center space-x-3 cursor-pointer ${a||!he||Ee||Ue?"opacity-60 cursor-not-allowed":""}`,children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${g[ae]===st.text?"border-indigo-500 bg-indigo-500":"border-gray-300 bg-white"}`,children:g[ae]===st.text&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),n.jsx("span",{className:"text-sm text-gray-900",children:st.text}),Ue&&st.isCorrect&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Correct Answer"})]})]},$e))})]}),Q.type==="text"&&n.jsx("div",{children:n.jsx("textarea",{id:`question-${ae}-answer`,name:`question-${ae}-answer`,className:"w-full h-32 p-4 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-900",value:g[ae]||"",onChange:st=>!a&&he&&ze(ae,st.target.value),placeholder:he?"Enter your answer here":"Student's answer will appear here",disabled:!!a||!he||Ee})}),Q.type==="matching"&&Q.leftItems&&Q.rightItems&&n.jsxs("div",{className:"space-y-2",children:[a&&a.autoGraded&&n.jsxs("div",{className:`mb-4 p-3 rounded-lg ${(()=>{var gt;g[ae];const st=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(ae.toString()):(gt=a.autoQuestionGrades)==null?void 0:gt[ae.toString()],$e=Q.points||0,lt=st/$e;return lt===1?"bg-green-50 border border-green-200":lt>0?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"})()}`,children:[n.jsx("div",{className:"text-sm text-blue-800 font-medium mb-2",children:"Auto-Graded Results"}),(()=>{var gt;const st=g[ae],$e=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(ae.toString()):(gt=a.autoQuestionGrades)==null?void 0:gt[ae.toString()],lt=Q.points||0;return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const Rt=Number($e||0),Kt=lt,Vt=Number.isInteger(Rt)?Rt:Rt.toFixed(2),Qt=Number.isInteger(Kt)?Kt:Kt.toFixed(2);return`${Vt} / ${Qt} pts`})()}),n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Student Answer:"}),Q.leftItems.map((Rt,Kt)=>{const Vt=typeof st=="object"?st[Kt]:"",Qt=Q.rightItems.find(Xt=>Xt.id===Rt.id),nr=Vt===((Qt==null?void 0:Qt.text)||"");return n.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${nr?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:Rt.text}),n.jsx("span",{className:"text-gray-500",children:"→"}),n.jsx("span",{className:"text-gray-900",children:Vt||"No answer"})]}),n.jsx("div",{className:"flex items-center space-x-2",children:nr?n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-xs",children:"Correct"})]}):n.jsxs("div",{className:"flex items-center text-red-600",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),n.jsx("span",{className:"text-xs",children:"Incorrect"})]})}),!nr&&Qt&&n.jsxs("div",{className:"text-xs text-gray-600",children:["Correct: ",Qt.text]})]},Rt.id)})]})})()]}),(!a||!a.autoGraded)&&Q.leftItems.map((st,$e)=>{var Qt;const gt=(()=>{if(!Q.rightItems||Q.rightItems.length===0)return[];const nr=$e%Q.rightItems.length,Xt=[...Q.rightItems];for(let ss=0;ss<nr;ss++)Xt.push(Xt.shift());return Xt})(),Rt=g[ae]||{},Kt=Object.values(Rt).filter(nr=>nr!==""),Vt=gt.filter(nr=>Rt[$e]===nr.text||!Kt.includes(nr.text));return n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[n.jsx("div",{className:"flex-1",children:n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:st.text})}),n.jsx("div",{className:"flex items-center space-x-2 ml-2",children:n.jsxs("select",{id:`question-${ae}-matching-${$e}`,value:((Qt=g[ae])==null?void 0:Qt[$e])||"",onChange:nr=>{if(!a&&he&&!Ee){const Xt={...g};Xt[ae]||(Xt[ae]={}),Xt[ae][$e]=nr.target.value,ze(ae,Xt[ae])}},disabled:!!a||!he||Ee,className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white min-w-[120px]",children:[n.jsx("option",{value:"",children:"Choose..."}),Vt.map((nr,Xt)=>n.jsx("option",{value:nr.text,children:nr.text},Xt))]})})]},st.id)})]})]},Q.id||Q._id||ae)})}),r.allowStudentUploads&&he&&!a&&!Ee&&n.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Files"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"file",multiple:!0,onChange:pe,disabled:M,className:"hidden",id:"file-upload-scrollable"}),n.jsxs("label",{htmlFor:"file-upload-scrollable",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer ${M?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),M?"Uploading...":"Upload File"]}),se.length>0&&n.jsxs("button",{onClick:()=>document.getElementById("file-upload-scrollable").click(),className:"inline-flex items-center px-4 py-2 border border-pink-500 rounded-md shadow-sm text-sm font-medium text-pink-600 bg-white hover:bg-pink-50",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another File"]})]})]}),se.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Uploaded Files:"}),n.jsx("div",{className:"space-y-2",children:se.map((Q,ae)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(Q.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsx("button",{onClick:()=>xe(ae),className:"text-red-600 hover:text-red-800",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ae))})]})]})]}),he&&!a&&!Ee&&r.displayMode==="scrollable"&&n.jsx("div",{className:"mt-8",children:n.jsx("button",{onClick:mt,disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:b?"Submitting...":"Submit Assignment"})})]}),he&&!a&&!Ee&&n.jsxs("div",{className:"w-80 bg-gray-50 rounded-lg p-4 self-start",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Questions"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.questions.map((Q,ae)=>n.jsxs("button",{onClick:()=>{const Te=document.getElementById(`question-${ae}-answer`)||document.querySelector(`[name="question-${ae}"]`);Te&&Te.scrollIntoView({behavior:"smooth",block:"center"})},className:"w-full flex items-center justify-between p-2 rounded-md text-sm hover:bg-gray-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[A.has(ae)&&I.has(ae)?n.jsxs("div",{className:"relative",children:[n.jsx(ja,{className:"h-4 w-4 text-green-600"}),n.jsx(va,{className:"h-3 w-3 text-yellow-500 absolute -top-1 -right-1"})]}):A.has(ae)?n.jsx(ja,{className:"h-4 w-4 text-green-600"}):I.has(ae)?n.jsx(va,{className:"h-4 w-4 text-yellow-600"}):n.jsx(hj,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Question ",ae+1]})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[Q.points," pts"]})]},ae))})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[A.size," of ",r.questions.length," answered"]})]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.size/r.questions.length*100}%`}})})]}),r.isTimedQuiz&&n.jsxs("div",{className:"mt-4 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Time Remaining:"}),n.jsx("button",{onClick:()=>G(!P),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:P?"Hide":"Show"})]})}),P&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Attempt due: ",zt(new Date(r.dueDate),"MMM d 'at' h:mm a")]}),$&&q!==null?n.jsx("div",{className:`text-sm font-medium ${q<=300?"text-red-600":"text-gray-700"}`,children:ke(q)}):n.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[r.quizTimeLimit," minutes"]}),!$&&n.jsx("button",{onClick:ne,className:"mt-2 w-full bg-indigo-600 text-white text-sm py-2 px-3 rounded hover:bg-indigo-700",children:"Start Quiz"})]})]})]})]}):null]})})()]})})},nW=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:kr,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],sW=()=>{const{id:e}=wr(),t=Lt(),{user:r}=Tt(),[s,a]=N.useState(null),[i,l]=N.useState(!0);N.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),f=await we.get(`${Ae}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(f.data){const h=f.data;if(h.module){const g=typeof h.module=="string"?h.module:h.module._id,x=await we.get(`${Ae}/api/modules/view/${g}`,{headers:{Authorization:`Bearer ${m}`}});if(x.data.success){const b=x.data.data.course._id||x.data.data.course,v=await we.get(`${Ae}/api/courses/${b}`,{headers:{Authorization:`Bearer ${m}`}});v.data.success&&a(v.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=nW.filter(d=>!d.roles||d.roles.includes((r==null?void 0:r.role)||""));return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:u.map(d=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${d.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${d.id}`),children:[n.jsx(d.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:d.label})]},d.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(rW,{})})})]}):n.jsx("div",{children:"Course not found"})},aW=()=>{var _;const{id:e}=wr(),t=Lt(),[r,s]=N.useState(null),[a,i]=N.useState(null),[l,u]=N.useState(!0),[d,m]=N.useState(""),[f,h]=N.useState(""),[g,x]=N.useState(!1),[b,v]=N.useState({});N.useEffect(()=>{const k=JSON.parse(localStorage.getItem("user")),D=(k==null?void 0:k.role)||"";h(D),(async()=>{try{const T=localStorage.getItem("token"),I=await we.get(`${Ae}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${T}`}});if(s(I.data),D==="student")try{const L=await we.get(`${Ae}/api/submissions/student/${e}`,{headers:{Authorization:`Bearer ${T}`}});L.data&&(i(L.data),v(L.data.answers||{}))}catch(L){if(L.response&&L.response.status===404)i(null);else throw L}u(!1)}catch(T){console.error("Error fetching assignment details:",T),m("Error fetching assignment details"),u(!1)}})()},[e]);const w=(k,D)=>{v(A=>({...A,[k]:D}))},C=async k=>{k.preventDefault();try{const D=localStorage.getItem("token"),A=await we.post(`${Ae}/api/submissions`,{assignment:e,answers:b},{headers:{Authorization:`Bearer ${D}`}});i(A.data),x(!1),window.dispatchEvent(new Event("assignmentSubmitted"))}catch{m("Error submitting assignment")}},j=async()=>{setIsPublishing(!0);try{const k=localStorage.getItem("token"),D=await we.patch(`${Ae}/api/assignments/${e}/publish`,{},{headers:{Authorization:`Bearer ${k}`}});s(A=>({...A,published:D.data.published}))}catch(k){console.error("Error toggling assignment publish:",k)}finally{setIsPublishing(!1)}};return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):d?n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}):r?n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),n.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Due: ",zt(new Date(r.dueDate),"PPp")]}),console.log("userRole:",f,"assignment.submission:",r.submission),f==="student"&&r.submission&&n.jsxs("span",{className:"ml-4 text-green-600",children:["Submitted: ",zt(new Date(r.submission.submittedAt),"PPp")]})]}),n.jsxs("div",{className:"flex space-x-4",children:[(f==="teacher"||f==="admin")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:j,disabled:isPublishing,className:`inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium 
                    ${r!=null&&r.published?"border-green-300 text-green-700 bg-green-50 hover:bg-green-100":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:r!=null&&r.published?n.jsxs(n.Fragment,{children:[n.jsx(Kl,{className:"h-4 w-4 mr-2"}),"Published"]}):n.jsxs(n.Fragment,{children:[n.jsx(mo,{className:"h-4 w-4 mr-2"}),"Unpublished"]})}),n.jsx("button",{onClick:()=>t(`/assignments/${e}/edit`),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Assignment"}),n.jsx("button",{onClick:()=>t(`/assignments/${e}/grade`),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Grade Submissions"})]}),f==="student"&&n.jsx("button",{onClick:()=>t(`/assignments/${e}/view`),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Start Assignment"})]})]}),n.jsx("div",{className:"mt-6 prose max-w-none",children:n.jsx(ho,{children:r.description})}),r.content&&n.jsx("div",{className:"mt-6 prose max-w-none",children:n.jsx(ho,{children:r.content})}),f==="student"&&!g&&r.questions&&r.questions.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Questions"}),n.jsx("div",{className:"mt-4 space-y-6",children:r.questions.map((k,D)=>n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[D+1,". ",k.text," (",k.points," pts)"]}),k.type==="multiple-choice"&&n.jsx("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:k.options.map((A,T)=>n.jsx("li",{children:A.text},T))})]},D))})]}),g?n.jsxs("form",{onSubmit:C,className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Submission"}),r.questions.map((k,D)=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("p",{className:"font-semibold",children:[D+1,". ",k.text," (",k.points," pts)"]}),k.type==="multiple-choice"&&k.options.map((A,T)=>n.jsx("div",{className:"ml-4",children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${D}`,value:A.text,checked:b[D]===A.text,onChange:I=>w(D,I.target.value),className:"h-4 w-4"}),n.jsx("span",{children:A.text})]})},T)),k.type==="text"&&n.jsx("textarea",{value:b[D]||"",onChange:A=>w(D,A.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",rows:"4"})]},D)),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Submit"})]})]}):n.jsxs(n.Fragment,{children:[((_=r.attachments)==null?void 0:_.length)>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Attachments"}),n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:r.attachments.map((k,D)=>n.jsx("li",{className:"py-3",children:n.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-500",children:k.split("/").pop()})},D))})]}),(f==="teacher"||f==="admin")&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Submissions"}),a&&a.length===0?n.jsx("p",{className:"mt-2 text-gray-500",children:"No submissions yet"}):n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:a&&a.map(k=>{var D,A;return n.jsx("li",{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(D=k.student)==null?void 0:D.firstName," ",(A=k.student)==null?void 0:A.lastName]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted at: ",zt(new Date(k.submittedAt),"PPp")]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:`text-sm font-medium ${k.grade?"text-green-600":"text-yellow-600"}`,children:k.grade!==null&&k.grade!==void 0?`Grade: ${k.grade}`:"Not Graded"})})]})},k._id)})})]})]})]})}):n.jsx("div",{children:"Assignment not found"})},iW=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:kr,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],oW=()=>{const{id:e}=wr(),t=Lt(),{user:r}=Tt(),[s,a]=N.useState(null),[i,l]=N.useState(!0);N.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),f=await we.get(`${Ae}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(f.data){const h=f.data;if(h.module){const g=typeof h.module=="string"?h.module:h.module._id,x=await we.get(`${Ae}/api/modules/view/${g}`,{headers:{Authorization:`Bearer ${m}`}});if(x.data.success){const b=x.data.data.course._id||x.data.data.course,v=await we.get(`${Ae}/api/courses/${b}`,{headers:{Authorization:`Bearer ${m}`}});v.data.success&&a(v.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=iW.filter(d=>!d.roles||d.roles.includes((r==null?void 0:r.role)||""));return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:u.map(d=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${d.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${d.id}`),children:[n.jsx(d.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:d.label})]},d.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(aW,{})})})]}):n.jsx("div",{children:"Course not found"})},lW=()=>{var L,q;const{id:e}=wr(),[t,r]=N.useState(null),[s,a]=N.useState([]),[i,l]=N.useState(!0),[u,d]=N.useState(""),[m,f]=N.useState(null),[h,g]=N.useState({}),[x,b]=N.useState(""),[v,w]=N.useState(!1),[C,j]=N.useState(!1);N.useEffect(()=>{if(m&&t){const O={};t.questions.forEach(($,z)=>{const K=A(z);K!==null?O[z]=K:m.questionGrades&&m.questionGrades[z]!==void 0?O[z]=m.questionGrades[z]:O[z]=0}),g(O),b(m.feedback||"")}},[m,t]),N.useEffect(()=>{(async()=>{try{const $=localStorage.getItem("token"),z=await we.get(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${$}`}});r(z.data);const K=await we.get(`/api/submissions/assignment/${e}`,{headers:{Authorization:`Bearer ${$}`}});a(K.data),l(!1)}catch{d("Error fetching assignment data"),l(!1)}})()},[e]);const _=async(O=!1)=>{var $,z;if(m){w(!0);try{const K=localStorage.getItem("token"),te={feedback:x,approveGrade:O};O||(te.questionGrades=h);const se=await we.put(`/api/submissions/${m._id}`,te,{headers:{Authorization:`Bearer ${K}`}});a(W=>W.map(M=>M._id===m._id?se.data:M)),f(se.data),d("")}catch(K){d(((z=($=K.response)==null?void 0:$.data)==null?void 0:z.message)||"Error grading submission")}finally{w(!1)}}},k=async()=>{var O,$,z;if(m&&window.confirm("Are you sure you want to delete this submission? This action cannot be undone.")){console.log("[Frontend] Attempting to delete submission:",m._id),j(!0);try{const K=localStorage.getItem("token");console.log("[Frontend] Making DELETE request to:",`/api/submissions/${m._id}`);const te=await we.delete(`/api/submissions/${m._id}`,{headers:{Authorization:`Bearer ${K}`}});console.log("[Frontend] Delete response:",te.data),a(se=>se.filter(W=>W._id!==m._id)),f(null),d("")}catch(K){console.error("[Frontend] Delete error:",((O=K.response)==null?void 0:O.data)||K.message),d(((z=($=K.response)==null?void 0:$.data)==null?void 0:z.message)||"Error deleting submission")}finally{j(!1)}}},D=O=>{if(!(t!=null&&t.questions))return"unknown";const $=t.questions[O];return($==null?void 0:$.type)||"unknown"},A=O=>m!=null&&m.autoQuestionGrades?m.autoQuestionGrades instanceof Map?m.autoQuestionGrades.get(O.toString()):typeof m.autoQuestionGrades=="object"?m.autoQuestionGrades[O.toString()]:null:null,T=O=>{if(!(t!=null&&t.questions))return 0;const $=t.questions[O];return($==null?void 0:$.points)||0},I=O=>{if(!(m!=null&&m.answers))return"";let $="";if(m.answers instanceof Map?$=m.answers.get(O.toString())||"":typeof m.answers=="object"&&($=m.answers[O.toString()]||""),D(O)==="matching"&&typeof $=="string")try{return JSON.parse($)}catch{return console.log(`Failed to parse matching answer for question ${O}:`,$),{}}return $};return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):u?n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}):t?n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[t.title," - Grading"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," submission",s.length!==1?"s":""," to grade"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Submissions"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map(O=>{var $,z;return n.jsxs("div",{onClick:()=>f(O),className:`p-4 border rounded-lg cursor-pointer transition-colors ${(m==null?void 0:m._id)===O._id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"font-medium",children:[($=O.student)==null?void 0:$.firstName," ",(z=O.student)==null?void 0:z.lastName]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[O.autoGraded&&n.jsxs("div",{className:"flex items-center text-blue-600",children:[n.jsx(ja,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"text-xs",children:"Auto"})]}),O.teacherApproved&&n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx(ja,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"text-xs",children:"Graded"})]})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Submitted: ",zt(new Date(O.submittedAt),"MMM d, yyyy h:mm a")]}),O.autoGraded&&n.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["Auto-grade: ",O.autoGrade," points"]}),O.teacherApproved&&n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Final grade: ",O.finalGrade||O.grade," points"]})]},O._id)})})]}),n.jsx("div",{className:"lg:col-span-2",children:m?n.jsx("div",{children:n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Grading: ",(L=m.student)==null?void 0:L.firstName," ",(q=m.student)==null?void 0:q.lastName]}),m.autoGraded&&n.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Ev,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("span",{className:"font-medium text-blue-900",children:"Auto-Graded Submission"})]}),n.jsxs("div",{className:"text-blue-800",children:[n.jsxs("div",{children:["Auto-grade: ",m.autoGrade," points"]}),m.teacherApproved?n.jsxs("div",{className:"text-green-700 font-medium",children:["Final grade: ",m.finalGrade||m.grade," points"]}):n.jsx("div",{className:"text-sm",children:"Multiple choice questions have been auto-graded. You can review, edit grades, and provide feedback before approving."})]})]}),t.questions&&n.jsx("div",{className:"space-y-4",children:t.questions.map((O,$)=>{const z=D($),K=A($),te=T($),se=I($);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium",children:["Question ",$+1]}),n.jsx("p",{className:"text-sm text-gray-600",children:O.text})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[te," pts"]}),(z==="multiple-choice"||z==="matching")&&K!==null&&n.jsxs("div",{className:`text-sm ${K>0?"text-green-600":"text-red-600"}`,children:["Auto: ",K,"/",te]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Student Answer:"}),z==="multiple-choice"?n.jsx("div",{className:"text-sm text-gray-900",children:se||"No answer"}):z==="matching"?n.jsx("div",{className:"space-y-2",children:O.leftItems&&O.leftItems.map((W,M)=>{const Y=typeof se=="object"?se[M]:"",P=O.rightItems&&O.rightItems.find(Z=>Z.id===W.id),G=Y===((P==null?void 0:P.text)||"");return n.jsxs("div",{className:`p-2 rounded border ${G?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900",children:W.text}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-500",children:"→"}),n.jsx("span",{className:`text-sm ${G?"text-green-700":"text-red-700"}`,children:Y||"No answer"}),G?n.jsx(ja,{className:"h-4 w-4 text-green-600"}):n.jsx(oo,{className:"h-4 w-4 text-red-600"})]})]}),!G&&P&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Correct: ",P.text]})]},W.id)})}):n.jsx("textarea",{value:se,readOnly:!0,className:"w-full h-24 p-2 border border-gray-300 rounded text-sm",placeholder:"No answer provided"})]}),(z==="multiple-choice"||z==="matching")&&K!==null?n.jsx("div",{}):z==="matching"?n.jsxs("div",{children:[n.jsxs("label",{htmlFor:`grade-${$}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade (0-",te,"):"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{id:`grade-${$}`,name:`grade-${$}`,type:"number",min:"0",max:te,value:h[$]!==void 0?h[$]:K!==null?K:0,onChange:W=>g(M=>({...M,[$]:parseFloat(W.target.value)||0})),className:"w-20 p-2 border border-gray-300 rounded text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),K!==null&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Auto: ",K,"/",te]})]})]}):n.jsxs("div",{children:[n.jsxs("label",{htmlFor:`grade-${$}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade (0-",te,"):"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{id:`grade-${$}`,name:`grade-${$}`,type:"number",min:"0",max:te,value:h[$]!==void 0?h[$]:K!==null?K:0,onChange:W=>g(M=>({...M,[$]:parseFloat(W.target.value)||0})),className:"w-20 p-2 border border-gray-300 rounded text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),z==="multiple-choice"&&K!==null&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Auto: ",K,"/",te]})]})]})]},$)})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback:"}),n.jsx("textarea",{id:"feedback",name:"feedback",value:x,onChange:O=>b(O.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Provide feedback for the student..."})]}),n.jsxs("div",{className:"mt-6 flex space-x-3",children:[m.autoGraded?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>_(!0),disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:v?"Approving...":"Approve Auto-Grade"}),t.questions&&t.questions.some(O=>O.type!=="multiple-choice"&&O.type!=="matching")&&n.jsx("button",{onClick:()=>_(!1),disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:v?"Grading...":"Grade with Edits"})]}):n.jsx("button",{onClick:()=>_(!1),disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:v?"Grading...":"Grade Submission"}),n.jsx("button",{onClick:k,disabled:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:C?"Deleting...":"Delete Submission"})]})]})}):n.jsx("div",{className:"text-center text-gray-500 py-12",children:"Select a submission to grade"})})]})]})}):n.jsx("div",{children:"Assignment not found"})},cW=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:kr,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],uW=()=>{const{id:e}=wr(),t=Lt(),{user:r}=Tt(),[s,a]=N.useState(null),[i,l]=N.useState(!0);N.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),f=await we.get(`${Ae}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(f.data){const h=f.data;if(h.module){const g=typeof h.module=="string"?h.module:h.module._id,x=await we.get(`${Ae}/api/modules/view/${g}`,{headers:{Authorization:`Bearer ${m}`}});if(x.data.success){const b=x.data.data.course._id||x.data.data.course,v=await we.get(`${Ae}/api/courses/${b}`,{headers:{Authorization:`Bearer ${m}`}});v.data.success&&a(v.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=cW.filter(d=>!d.roles||d.roles.includes((r==null?void 0:r.role)||""));return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:u.map(d=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${d.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${d.id}`),children:[n.jsx(d.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:d.label})]},d.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(lW,{})})})]}):n.jsx("div",{children:"Course not found"})};function GA(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=GA(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function oi(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=GA(e))&&(s&&(s+=" "),s+=t);return s}function dW(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}dW(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Tc=e=>typeof e=="number"&&!isNaN(e),hi=e=>typeof e=="string",Ks=e=>typeof e=="function",fW=e=>hi(e)||Tc(e),Ky=e=>hi(e)||Ks(e)?e:null,mW=(e,t)=>e===!1||Tc(e)&&e>0?e:t,Qy=e=>N.isValidElement(e)||hi(e)||Ks(e)||Tc(e);function hW(e,t,r=300){let{scrollHeight:s,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function pW({enter:e,exit:t,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:i,position:l,preventExitTransition:u,done:d,nodeRef:m,isIn:f,playToast:h}){let g=r?`${e}--${l}`:e,x=r?`${t}--${l}`:t,b=N.useRef(0);return N.useLayoutEffect(()=>{let v=m.current,w=g.split(" "),C=j=>{j.target===m.current&&(h(),v.removeEventListener("animationend",C),v.removeEventListener("animationcancel",C),b.current===0&&j.type!=="animationcancel"&&v.classList.remove(...w))};v.classList.add(...w),v.addEventListener("animationend",C),v.addEventListener("animationcancel",C)},[]),N.useEffect(()=>{let v=m.current,w=()=>{v.removeEventListener("animationend",w),s?hW(v,d,a):d()};f||(u?w():(b.current=1,v.className+=` ${x}`,v.addEventListener("animationend",w)))},[f]),V.createElement(V.Fragment,null,i)}}function nS(e,t){return{content:qA(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function qA(e,t,r=!1){return N.isValidElement(e)&&!hi(e.type)?N.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):Ks(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function gW({closeToast:e,theme:t,ariaLabel:r="close"}){return V.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":r},V.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},V.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function xW({delay:e,isRunning:t,closeToast:r,type:s="default",hide:a,className:i,controlledProgress:l,progress:u,rtl:d,isIn:m,theme:f}){let h=a||l&&u===0,g={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(g.transform=`scaleX(${u})`);let x=oi("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),b=Ks(i)?i({rtl:d,type:s,defaultClassName:x}):oi(x,i),v={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{m&&r()}};return V.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},V.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${s}`}),V.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:b,style:g,...v}))}var yW=1,UA=()=>`${yW++}`;function vW(e,t,r){let s=1,a=0,i=[],l=[],u=t,d=new Map,m=new Set,f=j=>(m.add(j),()=>m.delete(j)),h=()=>{l=Array.from(d.values()),m.forEach(j=>j())},g=({containerId:j,toastId:_,updateId:k})=>{let D=j?j!==e:e!==1,A=d.has(_)&&k==null;return D||A},x=(j,_)=>{d.forEach(k=>{var D;(_==null||_===k.props.toastId)&&((D=k.toggle)==null||D.call(k,j))})},b=j=>{var _,k;(k=(_=j.props)==null?void 0:_.onClose)==null||k.call(_,j.removalReason),j.isActive=!1},v=j=>{if(j==null)d.forEach(b);else{let _=d.get(j);_&&b(_)}h()},w=()=>{a-=i.length,i=[]},C=j=>{var _,k;let{toastId:D,updateId:A}=j.props,T=A==null;j.staleId&&d.delete(j.staleId),j.isActive=!0,d.set(D,j),h(),r(nS(j,T?"added":"updated")),T&&((k=(_=j.props).onOpen)==null||k.call(_))};return{id:e,props:u,observe:f,toggle:x,removeToast:v,toasts:d,clearQueue:w,buildToast:(j,_)=>{if(g(_))return;let{toastId:k,updateId:D,data:A,staleId:T,delay:I}=_,L=D==null;L&&a++;let q={...u,style:u.toastStyle,key:s++,...Object.fromEntries(Object.entries(_).filter(([$,z])=>z!=null)),toastId:k,updateId:D,data:A,isIn:!1,className:Ky(_.className||u.toastClassName),progressClassName:Ky(_.progressClassName||u.progressClassName),autoClose:_.isLoading?!1:mW(_.autoClose,u.autoClose),closeToast($){d.get(k).removalReason=$,v(k)},deleteToast(){let $=d.get(k);if($!=null){if(r(nS($,"removed")),d.delete(k),a--,a<0&&(a=0),i.length>0){C(i.shift());return}h()}}};q.closeButton=u.closeButton,_.closeButton===!1||Qy(_.closeButton)?q.closeButton=_.closeButton:_.closeButton===!0&&(q.closeButton=Qy(u.closeButton)?u.closeButton:!0);let O={content:j,props:q,staleId:T};u.limit&&u.limit>0&&a>u.limit&&L?i.push(O):Tc(I)?setTimeout(()=>{C(O)},I):C(O)},setProps(j){u=j},setToggle:(j,_)=>{let k=d.get(j);k&&(k.toggle=_)},isToastActive:j=>{var _;return(_=d.get(j))==null?void 0:_.isActive},getSnapshot:()=>l}}var dn=new Map,oc=[],Xy=new Set,bW=e=>Xy.forEach(t=>t(e)),WA=()=>dn.size>0;function wW(){oc.forEach(e=>VA(e.content,e.options)),oc=[]}var NW=(e,{containerId:t})=>{var r;return(r=dn.get(t||1))==null?void 0:r.toasts.get(e)};function HA(e,t){var r;if(t)return!!((r=dn.get(t))!=null&&r.isToastActive(e));let s=!1;return dn.forEach(a=>{a.isToastActive(e)&&(s=!0)}),s}function jW(e){if(!WA()){oc=oc.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||fW(e))dn.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=dn.get(e.containerId);t?t.removeToast(e.id):dn.forEach(r=>{r.removeToast(e.id)})}}var SW=(e={})=>{dn.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function VA(e,t){Qy(e)&&(WA()||oc.push({content:e,options:t}),dn.forEach(r=>{r.buildToast(e,t)}))}function kW(e){var t;(t=dn.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function YA(e,t){dn.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function CW(e){let t=e.containerId||1;return{subscribe(r){let s=vW(t,e,bW);dn.set(t,s);let a=s.observe(r);return wW(),()=>{a(),dn.delete(t)}},setProps(r){var s;(s=dn.get(t))==null||s.setProps(r)},getSnapshot(){var r;return(r=dn.get(t))==null?void 0:r.getSnapshot()}}}function _W(e){return Xy.add(e),()=>{Xy.delete(e)}}function EW(e){return e&&(hi(e.toastId)||Tc(e.toastId))?e.toastId:UA()}function Pc(e,t){return VA(e,t),t.toastId}function Pf(e,t){return{...t,type:t&&t.type||e,toastId:EW(t)}}function Rf(e){return(t,r)=>Pc(t,Pf(e,r))}function Zt(e,t){return Pc(e,Pf("default",t))}Zt.loading=(e,t)=>Pc(e,Pf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function DW(e,{pending:t,error:r,success:s},a){let i;t&&(i=hi(t)?Zt.loading(t,a):Zt.loading(t.render,{...a,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(m,f,h)=>{if(f==null){Zt.dismiss(i);return}let g={type:m,...l,...a,data:h},x=hi(f)?{render:f}:f;return i?Zt.update(i,{...g,...x}):Zt(x.render,{...g,...x}),h},d=Ks(e)?e():e;return d.then(m=>u("success",s,m)).catch(m=>u("error",r,m)),d}Zt.promise=DW;Zt.success=Rf("success");Zt.info=Rf("info");Zt.error=Rf("error");Zt.warning=Rf("warning");Zt.warn=Zt.warning;Zt.dark=(e,t)=>Pc(e,Pf("default",{theme:"dark",...t}));function AW(e){jW(e)}Zt.dismiss=AW;Zt.clearWaitingQueue=SW;Zt.isActive=HA;Zt.update=(e,t={})=>{let r=NW(e,t);if(r){let{props:s,content:a}=r,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:UA()};i.toastId!==e&&(i.staleId=e);let l=i.render||a;delete i.render,Pc(l,i)}};Zt.done=e=>{Zt.update(e,{progress:1})};Zt.onChange=_W;Zt.play=e=>YA(!0,e);Zt.pause=e=>YA(!1,e);function TW(e){var t;let{subscribe:r,getSnapshot:s,setProps:a}=N.useRef(CW(e)).current;a(e);let i=(t=N.useSyncExternalStore(r,s,s))==null?void 0:t.slice();function l(u){if(!i)return[];let d=new Map;return e.newestOnTop&&i.reverse(),i.forEach(m=>{let{position:f}=m.props;d.has(f)||d.set(f,[]),d.get(f).push(m)}),Array.from(d,m=>u(m[0],m[1]))}return{getToastToRender:l,isToastActive:HA,count:i==null?void 0:i.length}}function PW(e){let[t,r]=N.useState(!1),[s,a]=N.useState(!1),i=N.useRef(null),l=N.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:d,closeToast:m,onClick:f,closeOnClick:h}=e;kW({id:e.toastId,containerId:e.containerId,fn:r}),N.useEffect(()=>{if(e.pauseOnFocusLoss)return g(),()=>{x()}},[e.pauseOnFocusLoss]);function g(){document.hasFocus()||C(),window.addEventListener("focus",w),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",w),window.removeEventListener("blur",C)}function b(T){if(e.draggable===!0||e.draggable===T.pointerType){j();let I=i.current;l.canCloseOnClick=!0,l.canDrag=!0,I.style.transition="none",e.draggableDirection==="x"?(l.start=T.clientX,l.removalDistance=I.offsetWidth*(e.draggablePercent/100)):(l.start=T.clientY,l.removalDistance=I.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function v(T){let{top:I,bottom:L,left:q,right:O}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&e.pauseOnHover&&T.clientX>=q&&T.clientX<=O&&T.clientY>=I&&T.clientY<=L?C():w()}function w(){r(!0)}function C(){r(!1)}function j(){l.didMove=!1,document.addEventListener("pointermove",k),document.addEventListener("pointerup",D)}function _(){document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",D)}function k(T){let I=i.current;if(l.canDrag&&I){l.didMove=!0,t&&C(),e.draggableDirection==="x"?l.delta=T.clientX-l.start:l.delta=T.clientY-l.start,l.start!==T.clientX&&(l.canCloseOnClick=!1);let L=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;I.style.transform=`translate3d(${L},0)`,I.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function D(){_();let T=i.current;if(l.canDrag&&l.didMove&&T){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let A={onPointerDown:b,onPointerUp:v};return u&&d&&(A.onMouseEnter=C,e.stacked||(A.onMouseLeave=w)),h&&(A.onClick=T=>{f&&f(T),l.canCloseOnClick&&m(!0)}),{playToast:w,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:A}}var RW=typeof window<"u"?N.useLayoutEffect:N.useEffect,If=({theme:e,type:t,isLoading:r,...s})=>V.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function IW(e){return V.createElement(If,{...e},V.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function MW(e){return V.createElement(If,{...e},V.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function OW(e){return V.createElement(If,{...e},V.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function LW(e){return V.createElement(If,{...e},V.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function $W(){return V.createElement("div",{className:"Toastify__spinner"})}var Jy={info:MW,warning:IW,success:OW,error:LW,spinner:$W},FW=e=>e in Jy;function BW({theme:e,type:t,isLoading:r,icon:s}){let a=null,i={theme:e,type:t};return s===!1||(Ks(s)?a=s({...i,isLoading:r}):N.isValidElement(s)?a=N.cloneElement(s,i):r?a=Jy.spinner():FW(t)&&(a=Jy[t](i))),a}var zW=e=>{let{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:a,playToast:i}=PW(e),{closeButton:l,children:u,autoClose:d,onClick:m,type:f,hideProgressBar:h,closeToast:g,transition:x,position:b,className:v,style:w,progressClassName:C,updateId:j,role:_,progress:k,rtl:D,toastId:A,deleteToast:T,isIn:I,isLoading:L,closeOnClick:q,theme:O,ariaLabel:$}=e,z=oi("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":D},{"Toastify__toast--close-on-click":q}),K=Ks(v)?v({rtl:D,position:b,type:f,defaultClassName:z}):oi(z,v),te=BW(e),se=!!k||!d,W={closeToast:g,type:f,theme:O},M=null;return l===!1||(Ks(l)?M=l(W):N.isValidElement(l)?M=N.cloneElement(l,W):M=gW(W)),V.createElement(x,{isIn:I,done:T,position:b,preventExitTransition:r,nodeRef:s,playToast:i},V.createElement("div",{id:A,tabIndex:0,onClick:m,"data-in":I,className:K,...a,style:w,ref:s,...I&&{role:_,"aria-label":$}},te!=null&&V.createElement("div",{className:oi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!L})},te),qA(u,e,!t),M,!e.customProgressBar&&V.createElement(xW,{...j&&!se?{key:`p-${j}`}:{},rtl:D,theme:O,delay:d,isRunning:t,isIn:I,closeToast:g,hide:h,type:f,className:C,controlledProgress:se,progress:k||0})))},GW=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),qW=pW(GW("bounce",!0)),UW={position:"top-right",transition:qW,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function WW(e){let t={...UW,...e},r=e.stacked,[s,a]=N.useState(!0),i=N.useRef(null),{getToastToRender:l,isToastActive:u,count:d}=TW(t),{className:m,style:f,rtl:h,containerId:g,hotKeys:x}=t;function b(w){let C=oi("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":h});return Ks(m)?m({position:w,rtl:h,defaultClassName:C}):oi(C,Ky(m))}function v(){r&&(a(!0),Zt.play())}return RW(()=>{var w;if(r){let C=i.current.querySelectorAll('[data-in="true"]'),j=12,_=(w=t.position)==null?void 0:w.includes("top"),k=0,D=0;Array.from(C).reverse().forEach((A,T)=>{let I=A;I.classList.add("Toastify__toast--stacked"),T>0&&(I.dataset.collapsed=`${s}`),I.dataset.pos||(I.dataset.pos=_?"top":"bot");let L=k*(s?.2:1)+(s?0:j*T);I.style.setProperty("--y",`${_?L:L*-1}px`),I.style.setProperty("--g",`${j}`),I.style.setProperty("--s",`${1-(s?D:0)}`),k+=I.offsetHeight,D+=.025})}},[s,d,r]),N.useEffect(()=>{function w(C){var j;let _=i.current;x(C)&&((j=_.querySelector('[tabIndex="0"]'))==null||j.focus(),a(!1),Zt.pause()),C.key==="Escape"&&(document.activeElement===_||_!=null&&_.contains(document.activeElement))&&(a(!0),Zt.play())}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[x]),V.createElement("section",{ref:i,className:"Toastify",id:g,onMouseEnter:()=>{r&&(a(!1),Zt.pause())},onMouseLeave:v,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((w,C)=>{let j=C.length?{...f}:{...f,pointerEvents:"none"};return V.createElement("div",{tabIndex:-1,className:b(w),"data-stacked":r,style:j,key:`c-${w}`},C.map(({content:_,props:k})=>V.createElement(zW,{...k,stacked:r,collapseAll:v,isIn:u(k.toastId,k.containerId),key:`t-${k.key}`},_)))}))}const HW=({reply:e,onReply:t,level:r,onEdit:s,onDelete:a,canModify:i,threadId:l,isReplying:u,onSubmitReply:d,replyContent:m,setReplyContent:f,setReplyingTo:h})=>{const[g,x]=N.useState(!1),[b,v]=N.useState(e.content),[w,C]=N.useState(!1),[j,_]=N.useState(!1),k=N.useRef(null),{user:D}=Tt(),A=String(D==null?void 0:D._id)===String(e.author._id)||(D==null?void 0:D.role)==="teacher";N.useEffect(()=>{const L=q=>{k.current&&!k.current.contains(q.target)&&_(!1)};return j&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[j]);const T=async L=>{if(L.preventDefault(),!!b.trim()){C(!0);try{await s(e._id,b),x(!1)}catch(q){console.error("Error editing reply:",q)}finally{C(!1)}}},I=async()=>{if(window.confirm("Are you sure you want to delete this reply?"))try{await a(e._id)}catch(L){console.error("Error deleting reply:",L)}};return n.jsxs("div",{style:{marginLeft:`${Math.min(r*32,96)}px`},className:"mb-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200 overflow-hidden",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:e.author.profilePicture?e.author.profilePicture.startsWith("http")?e.author.profilePicture:`http://localhost:5000${e.author.profilePicture}`:"/default-avatar.png",alt:e.author.firstName,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100",onError:L=>L.currentTarget.src="/default-avatar.png"})}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"font-semibold text-gray-900",children:[e.author.firstName," ",e.author.lastName]})}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx(vf,{className:"w-3 h-3"}),n.jsx("span",{children:cn(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),A&&n.jsxs("div",{className:"relative",ref:k,children:[n.jsx("button",{onClick:()=>_(!j),className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",title:"More options","aria-label":"More options",children:n.jsx(ky,{className:"w-4 h-4 text-gray-600"})}),j&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[n.jsxs("button",{onClick:()=>{x(!0),_(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[n.jsx($4,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:()=>{I(),_(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[n.jsx(As,{className:"w-4 h-4"}),n.jsx("span",{children:"Delete"})]})]})]})]}),g?n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsx(fi,{content:b,onChange:v,placeholder:"Edit your reply...",className:"min-h-[120px]"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{x(!1),v(e.content)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w||!b.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?"Saving...":"Save Changes"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"prose prose-gray max-w-none mb-4 text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}}),n.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:n.jsxs("button",{onClick:()=>t(e._id),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[n.jsx(Ql,{className:"w-4 h-4"}),n.jsx("span",{children:"Reply"})]})})]})]})}),u&&n.jsx("div",{className:"mt-3 ml-6",children:n.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-4 flex items-center space-x-2",children:[n.jsx(Ql,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reply to ",e.author.firstName]})]}),n.jsxs("form",{onSubmit:L=>d(L,e._id),children:[n.jsx(fi,{content:m,onChange:f,placeholder:"Write your reply...",className:"mb-4"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{h(null),f("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:w||!m.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[n.jsx(Ld,{className:"w-4 h-4"}),n.jsx("span",{children:w?"Posting...":"Post Reply"})]})]})]})]})})]})},VW=()=>{const{courseId:e,threadId:t}=wr(),r=Lt(),{user:s}=Tt(),[a,i]=N.useState(null),[l,u]=N.useState(!0),[d,m]=N.useState(null),[f,h]=N.useState(""),[g,x]=N.useState(!1),[b,v]=N.useState(!1),[w,C]=N.useState(""),[j,_]=N.useState(""),[k,D]=N.useState(null),[A,T]=N.useState(!1),[I,L]=N.useState(!1),[q,O]=N.useState(null),[$,z]=N.useState(""),[K,te]=N.useState(""),[se,W]=N.useState(null),[M,Y]=N.useState(!1),[P,G]=N.useState(!1),[Z,F]=N.useState({isGraded:!1,totalPoints:100,group:"Discussions",dueDate:""}),[Ne,ye]=N.useState([]),B=(s==null?void 0:s.role)==="teacher"||(s==null?void 0:s.role)==="admin";N.useEffect(()=>{(async()=>{if(!e||!t){m("Invalid course or thread ID"),u(!1);return}try{const he=localStorage.getItem("token"),ce=await Re.get(`${Ae}/api/threads/${t}`,{headers:{Authorization:`Bearer ${he}`}});if(ce.data.success){if(ce.data.data.course!==e){m("Thread not found in this course"),u(!1);return}i(ce.data.data)}else m("Failed to load thread");const Ee=await Re.get(`${Ae}/api/courses/${e}`,{headers:{Authorization:`Bearer ${he}`}});Ee.data.success&&ye(Ee.data.data.students||[])}catch(he){console.error("Error fetching thread or students:",he),m("Failed to load thread or students")}finally{u(!1)}})()},[e,t]),N.useEffect(()=>{const ve=he=>{i(he.detail)};return window.addEventListener("threadUpdated",ve),()=>{window.removeEventListener("threadUpdated",ve)}},[]);const re=async(ve,he=null)=>{if(ve.preventDefault(),!(!a||!f.trim())){x(!0);try{const ce=localStorage.getItem("token"),Ee=await Re.post(`${Ae}/api/threads/${a._id}/replies`,{content:f,parentReply:he||null},{headers:{Authorization:`Bearer ${ce}`}});Ee.data.success&&(i(Ee.data.data),h(""),D(null),T(!1))}catch(ce){console.error("Error posting reply:",ce)}finally{x(!1)}}},X=async ve=>{if(ve.preventDefault(),!(!a||!w.trim()||!j.trim())){x(!0);try{const he=localStorage.getItem("token"),ce=await Re.put(`${Ae}/api/threads/${a._id}`,{title:w,content:j},{headers:{Authorization:`Bearer ${he}`}});ce.data.success&&(i(ce.data.data),v(!1))}catch(he){console.error("Error updating thread:",he)}finally{x(!1)}}},U=async()=>{if(!(!a||!window.confirm("Are you sure you want to delete this thread?")))try{const ve=localStorage.getItem("token");(await Re.delete(`${Ae}/api/threads/${a._id}`,{headers:{Authorization:`Bearer ${ve}`}})).data.success&&r(-1)}catch(ve){console.error("Error deleting thread:",ve)}},ne=async()=>{if(a)try{const ve=localStorage.getItem("token"),he=await Re.patch(`${Ae}/api/threads/${a._id}/pin`,{},{headers:{Authorization:`Bearer ${ve}`}});he.data.success&&i(he.data.data)}catch(ve){console.error("Error toggling pin status:",ve)}},pe=async(ve,he)=>{if(a)try{const ce=localStorage.getItem("token"),Ee=await Re.put(`${Ae}/api/threads/${a._id}/replies/${ve}`,{content:he},{headers:{Authorization:`Bearer ${ce}`}});Ee.data.success&&i(Ee.data.data)}catch(ce){throw console.error("Error updating reply:",ce),ce}},xe=async ve=>{if(a)try{const he=localStorage.getItem("token"),ce=await Re.delete(`${Ae}/api/threads/${a._id}/replies/${ve}`,{headers:{Authorization:`Bearer ${he}`}});ce.data.success&&(i(ce.data.data),ce.data.data.replies.some(Ue=>Ue.author._id===(s==null?void 0:s._id))||T(!1))}catch(he){throw console.error("Error deleting reply:",he),he}},ke=ve=>{D(ve)},ze=async ve=>{if(ve.preventDefault(),!(!a||!q)){Y(!0),W(null);try{const he=localStorage.getItem("token"),ce=await Re.post(`${Ae}/api/threads/${a._id}/grade`,{studentId:q._id,grade:parseFloat($),feedback:K},{headers:{Authorization:`Bearer ${he}`}});ce.data.success?(i(ce.data.data),L(!1),O(null),z(""),te(""),window.dispatchEvent(new Event("discussionGradeUpdated"))):W("Failed to submit grade")}catch(he){console.error("Error submitting grade:",he),W("Failed to submit grade. Please try again.")}finally{Y(!1)}}},He=ve=>{var ce;const he=a==null?void 0:a.studentGrades.find(Ee=>Ee.student._id===ve._id);O(ve),z(((ce=he==null?void 0:he.grade)==null?void 0:ce.toString())||""),te((he==null?void 0:he.feedback)||""),L(!0)},it=async ve=>{if(ve.preventDefault(),!!a)try{const he=localStorage.getItem("token"),ce=await Re.put(`${Ae}/api/threads/${a._id}`,{...Z,dueDate:Z.dueDate||null},{headers:{Authorization:`Bearer ${he}`}});ce.data.success&&(i(ce.data.data),G(!1))}catch(he){console.error("Error updating thread settings:",he),m("Failed to update thread settings")}};if(l)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(d||!a)return n.jsx("div",{className:"text-red-500 text-center p-4",children:d||"Thread not found"});if((s==null?void 0:s.role)==="student"&&Array.isArray(a.studentGrades)){const ve=a.studentGrades.find(he=>he.student&&(he.student._id===s._id||he.student===s._id));ve&&typeof ve.feedback=="string"&&ve.feedback.trim()!==""&&ve.feedback}const Ge=new Map,rt=[];a.replies.forEach(ve=>{var he;ve.parentReply?(Ge.has(ve.parentReply)||Ge.set(ve.parentReply,[]),(he=Ge.get(ve.parentReply))==null||he.push(ve)):rt.push(ve)});const mt=a.replies.some(ve=>ve.parentReply===null&&ve.author._id===(s==null?void 0:s._id)),et=(ve,he=0,ce,Ee)=>ve.map(Ue=>n.jsxs(V.Fragment,{children:[n.jsx(HW,{reply:Ue,onReply:ke,level:he,onEdit:ce,onDelete:Ee,canModify:(s==null?void 0:s._id)===Ue.author._id||(s==null?void 0:s.role)==="teacher",threadId:a._id,isReplying:k===Ue._id,onSubmitReply:re,replyContent:f,setReplyContent:h,setReplyingTo:D}),Ge.get(Ue._id)&&et(Ge.get(Ue._id),he+1,ce,Ee)]},Ue._id));return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.isPinned&&n.jsxs("div",{className:"flex items-center space-x-1 text-amber-600 bg-amber-50 px-3 py-1 rounded-full",children:[n.jsx(pj,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Pinned"})]}),a.isGraded&&n.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-3 py-1 rounded-full",children:[n.jsx(Qh,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm font-medium",children:[a.totalPoints," points"]})]})]}),b?n.jsxs("form",{onSubmit:X,className:"space-y-4",children:[n.jsx("input",{type:"text",value:w,onChange:ve=>C(ve.target.value),className:"w-full text-2xl font-bold text-gray-900 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Thread title"}),n.jsx(fi,{content:j,onChange:_,placeholder:"Edit your thread content...",className:"min-h-[200px]"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{v(!1),C(a.title),_(a.content)},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g||!w.trim()||!j.trim(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":"Save Changes"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.title}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:a.author.profilePicture?a.author.profilePicture.startsWith("http")?a.author.profilePicture:`http://localhost:5000${a.author.profilePicture}`:a.author.avatarUrl?a.author.avatarUrl.startsWith("http")?a.author.avatarUrl:`http://localhost:5000${a.author.avatarUrl}`:"/default-avatar.png",alt:a.author.firstName,className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow-sm",onError:ve=>ve.currentTarget.src="/default-avatar.png"})}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"font-semibold text-gray-900",children:[a.author.firstName," ",a.author.lastName]})}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx(vf,{className:"w-4 h-4"}),n.jsx("span",{children:cn(new Date(a.createdAt),{addSuffix:!0})}),a.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsx(I4,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",cn(new Date(a.dueDate),{addSuffix:!0})]})]})]})]})]}),(s==null?void 0:s.role)==="teacher"&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:ne,className:`p-2 rounded-lg transition-colors ${a.isPinned?"text-amber-600 bg-amber-50 hover:bg-amber-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:a.isPinned?"Unpin thread":"Pin thread",children:n.jsx(pj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{v(!0),C(a.title),_(a.content)},className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit thread",children:n.jsx($4,{className:"w-5 h-5"})}),n.jsx("button",{onClick:U,className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Delete thread",children:n.jsx(As,{className:"w-5 h-5"})})]})]})]})]})})}),n.jsx("div",{className:"p-6",children:!b&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"prose prose-lg prose-gray max-w-none mb-8 text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:a.content}}),!mt&&(A?n.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[n.jsx(Dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Post a Reply"})]}),n.jsxs("form",{onSubmit:ve=>re(ve,null),children:[n.jsx("div",{onClick:ve=>ve.stopPropagation(),children:n.jsx(fi,{content:f,onChange:h,placeholder:"Share your thoughts...",className:"mb-4"})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{T(!1),h("")},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:g||!f.trim(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[n.jsx(Ld,{className:"w-4 h-4"}),n.jsx("span",{children:g?"Posting...":"Post Reply"})]})]})]})]}):n.jsxs("button",{onClick:()=>T(!0),className:"w-full px-6 py-4 text-lg font-medium text-blue-600 bg-blue-50 border-2 border-blue-200 border-dashed rounded-xl hover:bg-blue-100 hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(Dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Start the discussion"})]}))]})})]}),I&&q&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(Qh,{className:"w-5 h-5"}),n.jsxs("span",{children:["Grade Discussion - ",q.firstName," ",q.lastName]})]}),n.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx(Fd,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:ze,className:"p-6",children:[se&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center space-x-2",children:[n.jsx(Ev,{className:"w-5 h-5"}),n.jsx("span",{children:se})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-2",children:["Grade (out of ",(a==null?void 0:a.totalPoints)||100,")"]}),n.jsx("input",{type:"number",id:"grade",value:$??"",onChange:ve=>z(ve.target.value),min:"0",max:(a==null?void 0:a.totalPoints)||100,step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),n.jsx("textarea",{id:"feedback",value:K??"",onChange:ve=>te(ve.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter feedback for the student..."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>L(!1),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:M,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:M?"Submitting...":"Submit Grade"})]})]})]})}),P&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(Ds,{className:"w-5 h-5"}),n.jsx("span",{children:"Edit Thread Settings"})]}),n.jsx("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx(Fd,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:it,className:"p-6",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:Z.isGraded,onChange:ve=>F(he=>({...he,isGraded:ve.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Make this a graded discussion"})]})}),Z.isGraded&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"totalPoints",className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Points"}),n.jsx("input",{type:"number",id:"totalPoints",value:Z.totalPoints,onChange:ve=>F(he=>({...he,totalPoints:parseInt(ve.target.value)||0})),min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"group",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Group"}),n.jsxs("select",{id:"group",value:Z.group,onChange:ve=>F(he=>({...he,group:ve.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"Discussions",children:"Discussions"}),n.jsx("option",{value:"Assignments",children:"Assignments"}),n.jsx("option",{value:"Projects",children:"Projects"}),n.jsx("option",{value:"Exams",children:"Exams"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),n.jsx("input",{type:"date",id:"dueDate",value:Z.dueDate,onChange:ve=>F(he=>({...he,dueDate:ve.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>G(!1),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})}),B&&(a==null?void 0:a.isGraded)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-4 py-3 border-b border-gray-100",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(Qh,{className:"w-5 h-5"}),n.jsx("span",{children:"Student Grades"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feedback"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Graded By"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ne.map(ve=>{const he=a.studentGrades.find(ce=>ce.student._id===ve._id);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[ve.profilePicture?n.jsx("img",{src:ve.profilePicture.startsWith("http")?ve.profilePicture:`http://localhost:5000${ve.profilePicture}`,alt:`${ve.firstName} ${ve.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-100",onError:ce=>{ce.currentTarget.style.display="none";const Ee=ce.currentTarget.nextElementSibling;Ee&&(Ee.style.display="flex")}}):null,n.jsx("div",{className:`w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center ${ve.profilePicture?"hidden":""}`,style:{display:ve.profilePicture?"none":"flex"},children:n.jsx(Xl,{className:"w-4 h-4 text-blue-600"})})]}),n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[ve.firstName," ",ve.lastName]})]})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:he?`${Number.isInteger(he.grade)?he.grade:Number(he.grade).toFixed(2)} / ${a.totalPoints}`:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:(he==null?void 0:he.feedback)||"-"})}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:he!=null&&he.gradedBy?`${he.gradedBy.firstName} ${he.gradedBy.lastName}`:"-"}),n.jsx("div",{className:"text-xs text-gray-500",children:he!=null&&he.gradedAt?new Date(he.gradedAt).toLocaleString():""})]}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("button",{onClick:()=>He(ve),className:"text-blue-600 hover:text-blue-900 transition-colors",children:he?"Edit Grade":"Add Grade"})})]},ve._id)})})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Replies"}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx(Dr,{className:"w-4 h-4"}),n.jsxs("span",{children:[rt.length," ",rt.length===1?"reply":"replies"]})]})]}),et(rt,0,pe,xe)]})]})},YW=[{id:"overview",label:"Overview",icon:Aa},{id:"modules",label:"Modules",icon:kr},{id:"pages",label:"Pages",icon:Ln},{id:"assignments",label:"Assignments",icon:To},{id:"discussions",label:"Discussions",icon:Dr},{id:"announcements",label:"Announcements",icon:Ta},{id:"groups",label:"Groups",icon:cr},{id:"grades",label:"Grades",icon:Ls,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:kr,roles:["teacher","admin"]},{id:"students",label:"People",icon:Ci}],sS=()=>{const{courseId:e,threadId:t}=wr(),r=Lt(),{user:s}=Tt(),[a,i]=N.useState(null),[l,u]=N.useState(!0);console.log("ThreadViewWrapper - courseId:",e,"threadId:",t),N.useEffect(()=>{(async()=>{var f;if(!e||e==="undefined"||e==="null"){console.error("Invalid course ID:",e);return}try{u(!0);const h=localStorage.getItem("token");if(!h)throw new Error("No authentication token found");const g=await we.get(`${Ae}/api/courses/${e}`,{headers:{Authorization:`Bearer ${h}`}});if(g.data.success)i(g.data.data);else throw new Error(g.data.message||"Failed to fetch course")}catch(h){console.error("Error fetching course:",h),((f=h.response)==null?void 0:f.status)===400&&console.error("Invalid course ID format")}finally{u(!1)}})()},[e]);const d=YW.filter(m=>!m.roles||m.roles.includes((s==null?void 0:s.role)||""));return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):!a||!a._id?n.jsx("div",{children:"Course not found or invalid course data"}):n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:d.map(m=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${m.id==="discussions"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${a._id}/${m.id}`),children:[n.jsx(m.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:m.label})]},m.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(VW,{})})})]})};var KA=Symbol.for("immer-nothing"),aS=Symbol.for("immer-draftable"),$n=Symbol.for("immer-state");function hs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yo=Object.getPrototypeOf;function pi(e){return!!e&&!!e[$n]}function Qs(e){var t;return e?QA(e)||Array.isArray(e)||!!e[aS]||!!((t=e.constructor)!=null&&t[aS])||Of(e)||Lf(e):!1}var KW=Object.prototype.constructor.toString();function QA(e){if(!e||typeof e!="object")return!1;const t=yo(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===KW}function Xd(e,t){Mf(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,s)=>t(s,r,e))}function Mf(e){const t=e[$n];return t?t.type_:Array.isArray(e)?1:Of(e)?2:Lf(e)?3:0}function Zy(e,t){return Mf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XA(e,t,r){const s=Mf(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function QW(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Of(e){return e instanceof Map}function Lf(e){return e instanceof Set}function ri(e){return e.copy_||e.base_}function ev(e,t){if(Of(e))return new Map(e);if(Lf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=QA(e);if(t===!0||t==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(e);delete s[$n];let a=Reflect.ownKeys(s);for(let i=0;i<a.length;i++){const l=a[i],u=s[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(s[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(yo(e),s)}else{const s=yo(e);if(s!==null&&r)return{...e};const a=Object.create(s);return Object.assign(a,e)}}function jb(e,t=!1){return $f(e)||pi(e)||!Qs(e)||(Mf(e)>1&&(e.set=e.add=e.clear=e.delete=XW),Object.freeze(e),t&&Object.entries(e).forEach(([r,s])=>jb(s,!0))),e}function XW(){hs(2)}function $f(e){return Object.isFrozen(e)}var JW={};function gi(e){const t=JW[e];return t||hs(0,e),t}var lc;function JA(){return lc}function ZW(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iS(e,t){t&&(gi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function tv(e){rv(e),e.drafts_.forEach(eH),e.drafts_=null}function rv(e){e===lc&&(lc=e.parent_)}function oS(e){return lc=ZW(lc,e)}function eH(e){const t=e[$n];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[$n].modified_&&(tv(t),hs(4)),Qs(e)&&(e=Jd(t,e),t.parent_||Zd(t,e)),t.patches_&&gi("Patches").generateReplacementPatches_(r[$n].base_,e,t.patches_,t.inversePatches_)):e=Jd(t,r,[]),tv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==KA?e:void 0}function Jd(e,t,r){if($f(t))return t;const s=t[$n];if(!s)return Xd(t,(a,i)=>cS(e,s,t,a,i,r)),t;if(s.scope_!==e)return t;if(!s.modified_)return Zd(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let i=a,l=!1;s.type_===3&&(i=new Set(a),a.clear(),l=!0),Xd(i,(u,d)=>cS(e,s,a,u,d,r,l)),Zd(e,a,!1),r&&e.patches_&&gi("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function cS(e,t,r,s,a,i,l){if(pi(a)){const u=i&&t&&t.type_!==3&&!Zy(t.assigned_,s)?i.concat(s):void 0,d=Jd(e,a,u);if(XA(r,s,d),pi(d))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(Qs(a)&&!$f(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jd(e,a),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,s)&&Zd(e,a)}}function Zd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jb(t,r)}function tH(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:JA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,i=Sb;r&&(a=[s],i=cc);const{revoke:l,proxy:u}=Proxy.revocable(a,i);return s.draft_=u,s.revoke_=l,u}var Sb={get(e,t){if(t===$n)return e;const r=ri(e);if(!Zy(r,t))return rH(e,r,t);const s=r[t];return e.finalized_||!Qs(s)?s:s===Pp(e.base_,t)?(Rp(e),e.copy_[t]=sv(s,e)):s},has(e,t){return t in ri(e)},ownKeys(e){return Reflect.ownKeys(ri(e))},set(e,t,r){const s=ZA(ri(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const a=Pp(ri(e),t),i=a==null?void 0:a[$n];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(QW(r,a)&&(r!==void 0||Zy(e.base_,t)))return!0;Rp(e),nv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Rp(e),nv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ri(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){hs(11)},getPrototypeOf(e){return yo(e.base_)},setPrototypeOf(){hs(12)}},cc={};Xd(Sb,(e,t)=>{cc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});cc.deleteProperty=function(e,t){return cc.set.call(this,e,t,void 0)};cc.set=function(e,t,r){return Sb.set.call(this,e[0],t,r,e[0])};function Pp(e,t){const r=e[$n];return(r?ri(r):e)[t]}function rH(e,t,r){var a;const s=ZA(t,r);return s?"value"in s?s.value:(a=s.get)==null?void 0:a.call(e.draft_):void 0}function ZA(e,t){if(!(t in e))return;let r=yo(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=yo(r)}}function nv(e){e.modified_||(e.modified_=!0,e.parent_&&nv(e.parent_))}function Rp(e){e.copy_||(e.copy_=ev(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&hs(6),s!==void 0&&typeof s!="function"&&hs(7);let a;if(Qs(t)){const i=oS(this),l=sv(t,void 0);let u=!0;try{a=r(l),u=!1}finally{u?tv(i):rv(i)}return iS(i,s),lS(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===KA&&(a=void 0),this.autoFreeze_&&jb(a,!0),s){const i=[],l=[];gi("Patches").generateReplacementPatches_(t,a,i,l),s(i,l)}return a}else hs(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let s,a;return[this.produce(t,r,(l,u)=>{s=l,a=u}),s,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qs(e)||hs(8),pi(e)&&(e=sH(e));const t=oS(this),r=sv(e,void 0);return r[$n].isManual_=!0,rv(t),r}finishDraft(e,t){const r=e&&e[$n];(!r||!r.isManual_)&&hs(9);const{scope_:s}=r;return iS(s,t),lS(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const s=gi("Patches").applyPatches_;return pi(e)?s(e,t):this.produce(e,a=>s(a,t))}};function sv(e,t){const r=Of(e)?gi("MapSet").proxyMap_(e,t):Lf(e)?gi("MapSet").proxySet_(e,t):tH(e,t);return(t?t.scope_:JA()).drafts_.push(r),r}function sH(e){return pi(e)||hs(10,e),eT(e)}function eT(e){if(!Qs(e)||$f(e))return e;const t=e[$n];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ev(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ev(e,!0);return Xd(r,(s,a)=>{XA(r,s,eT(a))}),t&&(t.finalized_=!1),r}var Fn=new nH,tT=Fn.produce;Fn.produceWithPatches.bind(Fn);Fn.setAutoFreeze.bind(Fn);Fn.setUseStrictShallowCopy.bind(Fn);Fn.applyPatches.bind(Fn);Fn.createDraft.bind(Fn);Fn.finishDraft.bind(Fn);function rT(e){return({dispatch:r,getState:s})=>a=>i=>typeof i=="function"?i(r,s,e):a(i)}var aH=rT(),iH=rT,oH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zl:Zl.apply(null,arguments)};function uS(e,t){function r(...s){if(t){let a=t(...s);if(!a)throw new Error(Ys(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:s[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=s=>_B(s)&&s.type===e,r}var nT=class Il extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Il.prototype)}static get[Symbol.species](){return Il}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Il(...t[0].concat(this)):new Il(...t.concat(this))}};function dS(e){return Qs(e)?tT(e,()=>{}):e}function ad(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function lH(e){return typeof e=="boolean"}var cH=()=>function(t){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let l=new nT;return r&&(lH(r)?l.push(aH):l.push(iH(r.extraArgument))),l},uH="RTK_autoBatch",fS=e=>t=>{setTimeout(t,e)},dH=(e={type:"raf"})=>t=>(...r)=>{const s=t(...r);let a=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fS(10):e.type==="callback"?e.queueNotification:fS(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},s,{subscribe(f){const h=()=>a&&f(),g=s.subscribe(h);return u.add(f),()=>{g(),u.delete(f)}},dispatch(f){var h;try{return a=!((h=f==null?void 0:f.meta)!=null&&h[uH]),i=!a,i&&(l||(l=!0,d(m))),s.dispatch(f)}finally{a=!0}}})},fH=e=>function(r){const{autoBatch:s=!0}=r??{};let a=new nT(e);return s&&a.push(dH(typeof s=="object"?s:void 0)),a};function mH(e){const t=cH(),{reducer:r=void 0,middleware:s,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Yv(r))u=CB(r);else throw new Error(Ys(1));let d;typeof s=="function"?d=s(t):d=t();let m=Zl;a&&(m=oH({trace:!1,...typeof a=="object"&&a}));const f=CD(...d),h=fH(f);let g=typeof l=="function"?l(h):h();const x=m(...g);return Kv(u,i,x)}function sT(e){const t={},r=[];let s;const a={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Ys(28));if(u in t)throw new Error(Ys(29));return t[u]=l,a},addMatcher(i,l){return r.push({matcher:i,reducer:l}),a},addDefaultCase(i){return s=i,a}};return e(a),[t,r,s]}function hH(e){return typeof e=="function"}function pH(e,t){let[r,s,a]=sT(t),i;if(hH(e))i=()=>dS(e());else{const u=dS(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...s.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[a]),m.reduce((f,h)=>{if(h)if(pi(f)){const x=h(f,d);return x===void 0?f:x}else{if(Qs(f))return tT(f,g=>h(g,d));{const g=h(f,d);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},u)}return l.getInitialState=i,l}var gH=Symbol.for("rtk-slice-createasyncthunk");function xH(e,t){return`${e}/${t}`}function yH({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[gH];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error(Ys(11));const u=(typeof a.reducers=="function"?a.reducers(wH()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(k,D){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(Ys(12));if(A in m.sliceCaseReducersByType)throw new Error(Ys(13));return m.sliceCaseReducersByType[A]=D,f},addMatcher(k,D){return m.sliceMatchers.push({matcher:k,reducer:D}),f},exposeAction(k,D){return m.actionCreators[k]=D,f},exposeCaseReducer(k,D){return m.sliceCaseReducersByName[k]=D,f}};d.forEach(k=>{const D=u[k],A={reducerName:k,type:xH(i,k),createNotation:typeof a.reducers=="function"};jH(D)?kH(A,D,f,t):NH(A,D,f)});function h(){const[k={},D=[],A=void 0]=typeof a.extraReducers=="function"?sT(a.extraReducers):[a.extraReducers],T={...k,...m.sliceCaseReducersByType};return pH(a.initialState,I=>{for(let L in T)I.addCase(L,T[L]);for(let L of m.sliceMatchers)I.addMatcher(L.matcher,L.reducer);for(let L of D)I.addMatcher(L.matcher,L.reducer);A&&I.addDefaultCase(A)})}const g=k=>k,x=new Map,b=new WeakMap;let v;function w(k,D){return v||(v=h()),v(k,D)}function C(){return v||(v=h()),v.getInitialState()}function j(k,D=!1){function A(I){let L=I[k];return typeof L>"u"&&D&&(L=ad(b,A,C)),L}function T(I=g){const L=ad(x,D,()=>new WeakMap);return ad(L,I,()=>{const q={};for(const[O,$]of Object.entries(a.selectors??{}))q[O]=vH($,I,()=>ad(b,I,C),D);return q})}return{reducerPath:k,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const _={name:i,reducer:w,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:C,...j(l),injectInto(k,{reducerPath:D,...A}={}){const T=D??l;return k.inject({reducerPath:T,reducer:w},A),{..._,...j(T,!0)}}};return _}}function vH(e,t,r,s){function a(i,...l){let u=t(i);return typeof u>"u"&&s&&(u=r()),e(u,...l)}return a.unwrapped=e,a}var bH=yH();function wH(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function NH({type:e,reducerName:t,createNotation:r},s,a){let i,l;if("reducer"in s){if(r&&!SH(s))throw new Error(Ys(17));i=s.reducer,l=s.prepare}else i=s;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?uS(e,l):uS(e))}function jH(e){return e._reducerDefinitionType==="asyncThunk"}function SH(e){return e._reducerDefinitionType==="reducerWithPrepare"}function kH({type:e,reducerName:t},r,s,a){if(!a)throw new Error(Ys(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,h=a(e,i,f);s.exposeAction(t,h),l&&s.addCase(h.fulfilled,l),u&&s.addCase(h.pending,u),d&&s.addCase(h.rejected,d),m&&s.addMatcher(h.settled,m),s.exposeCaseReducer(t,{fulfilled:l||id,pending:u||id,rejected:d||id,settled:m||id})}function id(){}function Ys(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const CH=bH({name:"dragDrop",initialState:{},reducers:{}}),_H=mH({reducer:{dragDrop:CH.reducer}}),EH=({groupSetId:e,groupId:t,isInstructor:r})=>{const[s,a]=N.useState([]),[i,l]=N.useState(!0),[u,d]=N.useState(!1),[m,f]=N.useState([]),[h,g]=N.useState(""),[x,b]=N.useState([]),[v,w]=N.useState(!1);return N.useEffect(()=>{e&&(async()=>{l(!0);try{const j=localStorage.getItem("token"),_=await Re.get(`/pages/groupset/${e}`,{headers:{Authorization:`Bearer ${j}`}});a(_.data.data||[])}catch{a([])}finally{l(!1)}})()},[e,u]),N.useEffect(()=>{(async()=>{var j,_,k;if(t)try{const D=localStorage.getItem("token"),A=await Re.get(`/groups/${t}`,{headers:{Authorization:`Bearer ${D}`}});if(g(((j=A.data.course)==null?void 0:j._id)||A.data.course||""),(_=A.data.course)!=null&&_._id||A.data.course){const T=((k=A.data.course)==null?void 0:k._id)||A.data.course,I=await Re.get(`/modules/${T}`,{headers:{Authorization:`Bearer ${D}`}});f(I.data.data||[])}}catch{g(""),f([])}})()},[t]),N.useEffect(()=>{(async()=>{if(!(!h||!e)){w(!0);try{const j=await $A(h,e);b(j)}catch{b([])}finally{w(!1)}}})()},[h,e]),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Group Pages"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Pages shared with this group set"})]}),r&&n.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:"+ Create Page"})]}),u&&n.jsx(wa,{children:n.jsx(Hv,{modules:m,courseId:h,onSuccess:()=>d(!1),onCancel:()=>d(!1)})}),i?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading pages..."}):s.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pages available for this group set."}):n.jsx("div",{className:"divide-y",children:s.map(C=>n.jsx("div",{className:"p-4 hover:bg-gray-50 flex justify-between items-center group",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ln,{className:"w-4 h-4 text-blue-500"}),n.jsx("span",{className:"group-hover:text-blue-500 font-medium",children:C.title})]})},C._id))})]})},DH=({courseId:e,groupSetId:t})=>{var M;const{user:r}=Tt(),[s,a]=N.useState([]),[i,l]=N.useState(!1),[u,d]=N.useState(null),[m,f]=N.useState(null),[h,g]=N.useState([]),[x,b]=N.useState(!1),[v,w]=N.useState(""),[C,j]=N.useState(null),[_,k]=N.useState({}),[D,A]=N.useState(!1),[T,I]=N.useState({}),[L,q]=N.useState(!1);if(!e||!t||e===""||t==="")return n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"text-gray-500 text-center",children:"Loading announcements..."})});const O=async()=>{l(!0),d(null);try{const Y=await $A(e,t);a(Y)}catch{d("Failed to load announcements")}finally{l(!1)}},$=async Y=>{var P;b(!0);try{const G=await yb(Y);if(g(G),r&&((P=m==null?void 0:m.options)!=null&&P.requirePostBeforeSeeingReplies)){const Z=G.some(F=>F.author._id===r._id);q(Z)}else q(!0)}catch{g([]),q(!1)}finally{b(!1)}};N.useEffect(()=>{O()},[e,t]),N.useEffect(()=>{m&&$(m._id)},[m]);const z=async()=>{!m||!v.trim()||(A(!0),await vb(m._id,v),w(""),q(!0),await $(m._id),A(!1))},K=async Y=>{var P;if(!(!m||!Y||!((P=_[Y])!=null&&P.trim()))){A(!0);try{await bb(m._id,Y,_[Y]),k(G=>({...G,[Y]:""})),j(null),await $(m._id)}catch(G){console.error("Failed to post reply:",G)}A(!1)}},te=async Y=>{if(!(!m||!Y)){I(P=>({...P,[Y]:!0}));try{await wb(m._id,Y),await $(m._id)}catch{}I(P=>({...P,[Y]:!1}))}},se=async Y=>{if(!(!m||!Y)){I(P=>({...P,[Y]:!0}));try{await Nb(m._id,Y),await $(m._id)}catch{}I(P=>({...P,[Y]:!1}))}},W=(Y,P=0,G="")=>{var Ne;let Z=Y;return P===0&&r&&r.role==="student"&&((Ne=m==null?void 0:m.options)==null?void 0:Ne.requirePostBeforeSeeingReplies)&&!L&&(Z=Y.filter(ye=>ye.author._id===r._id)),n.jsx("ul",{className:P===0?"space-y-6 mt-8":"ml-8 space-y-4 mt-4",children:Z.filter(ye=>ye._id).map(ye=>{var ne,pe,xe;const B=r&&ye.likes&&ye.likes.includes(r._id),re=r&&ye.author._id===r._id,X=L||!((ne=m==null?void 0:m.options)!=null&&ne.requirePostBeforeSeeingReplies)||(r==null?void 0:r.role)!=="student",U=X?ye.replies:[];return n.jsxs("li",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"font-semibold text-gray-800",children:[ye.author.firstName," ",ye.author.lastName]}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(ye.createdAt).toLocaleString()})]}),n.jsx("div",{className:"mb-2 text-gray-700",children:ye.text}),n.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[r&&((pe=m==null?void 0:m.options)==null?void 0:pe.allowLiking)&&!re&&n.jsxs("button",{className:`text-xs flex items-center gap-1 px-2 py-1 rounded ${B?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,onClick:ke=>{ke.preventDefault(),B?se(ye._id):te(ye._id)},disabled:T[ye._id],children:[n.jsx(Tv,{className:"w-3 h-3"}),((xe=ye.likes)==null?void 0:xe.length)||0]}),r&&n.jsx("button",{className:"text-xs text-blue-600 hover:underline",onClick:()=>j(ye._id),children:"Reply"})]}),C===ye._id&&n.jsxs("div",{className:"mb-2",children:[n.jsx("textarea",{className:"w-full border rounded px-2 py-1 text-sm",rows:2,placeholder:"Write a reply...",value:_[ye._id]||"",onChange:ke=>k(ze=>({...ze,[ye._id]:ke.target.value})),disabled:D}),n.jsxs("div",{className:"flex gap-2 mt-1 justify-end",children:[n.jsx("button",{className:"px-3 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",onClick:()=>j(null),disabled:D,children:"Cancel"}),n.jsx("button",{className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>K(ye._id),disabled:D,children:D?"Replying...":"Reply"})]})]}),!X&&ye.replies&&ye.replies.length>0&&n.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700",children:[n.jsx("span",{role:"img","aria-label":"Info",children:"ℹ️"})," ",ye.replies.length," repl",ye.replies.length===1?"y":"ies"," hidden. Post a comment first to see replies."]}),U&&U.length>0&&W(U,P+1,G+ye._id+"-")]},G+ye._id)})})};return n.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Group Announcements"}),u&&n.jsx("div",{className:"text-red-500 mb-2",children:u}),m?n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-100 max-w-2xl mx-auto",children:[n.jsx("button",{className:"mb-4 px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-xs",onClick:()=>f(null),children:"← Back to Announcements"}),n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:m.title}),n.jsx("span",{className:"text-xs text-gray-400 mt-1",children:new Date(m.createdAt).toLocaleString()})]}),n.jsx("div",{className:"text-sm text-gray-800 mb-2 prose max-w-none",dangerouslySetInnerHTML:{__html:m.body}}),n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["By ",m.author.firstName," ",m.author.lastName]}),m.options&&Object.values(m.options).some(Boolean)&&r&&r.role!=="student"&&n.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[m.options.delayPosting&&n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Delay posting"}),m.options.allowComments&&n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Comments enabled"}),m.options.requirePostBeforeSeeingReplies&&n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Post before seeing replies"}),m.options.enablePodcastFeed&&n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Podcast feed"}),m.options.allowLiking&&n.jsx("span",{className:"bg-pink-100 text-pink-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Liking enabled"})]}),n.jsxs("div",{className:"mt-10",children:[n.jsx("h4",{className:"text-lg font-bold mb-4",children:"Comments"}),r&&r.role==="student"&&((M=m==null?void 0:m.options)==null?void 0:M.requirePostBeforeSeeingReplies)&&!L&&n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700",children:[n.jsx("span",{role:"img","aria-label":"Info",children:"💡"})," Post a comment first to see replies from other students."]}),x?n.jsx("div",{children:"Loading comments..."}):n.jsxs(n.Fragment,{children:[W(h),r&&n.jsxs("div",{className:"mt-6",children:[n.jsx("textarea",{className:"w-full border rounded px-2 py-2 text-sm",rows:3,placeholder:"Write a comment...",value:v,onChange:Y=>w(Y.target.value),disabled:D}),n.jsx("div",{className:"flex gap-2 mt-2 justify-end",children:n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:z,disabled:D,children:D?"Posting...":"Post Comment"})})]})]})]})]}):i?n.jsx("div",{children:"Loading announcements..."}):n.jsx(OA,{announcements:s,onSelect:f})]})},AH=[{name:"Home",path:"home",icon:$O},{name:"Pages",path:"pages",icon:Ln},{name:"Discussion",path:"discussion",icon:Dr},{name:"Assignments",path:"assignments",icon:Aa},{name:"Announcements",path:"announcements",icon:Ta},{name:"People",path:"people",icon:cr}];function TH(){const{groupId:e}=wr(),[t,r]=N.useState("Group"),[s,a]=N.useState("Group Set"),[i,l]=N.useState(""),[u,d]=N.useState([]),[m,f]=N.useState(!1),h=Lt(),[g,x]=N.useState([]),[b,v]=N.useState(!1),[w,C]=N.useState(""),j=JSON.parse(localStorage.getItem("user")||"{}"),_=(j==null?void 0:j.role)==="teacher",k=(j==null?void 0:j.role)==="admin";return N.useEffect(()=>{async function D(){var A;if(!e){console.log("[DEBUG] No groupId available");return}try{const T=localStorage.getItem("token");console.log("[DEBUG] Fetching group with ID:",e);const I=await we.get(`${Ae}/api/groups/`+e,{headers:{Authorization:`Bearer ${T}`}});console.log("[DEBUG] Group response:",JSON.stringify(I.data,null,2)),r(I.data.name||"Group"),l(I.data.groupSet),a(I.data.groupSetName||"Group Set"),C(((A=I.data.course)==null?void 0:A._id)||I.data.course||""),console.log("[DEBUG] Set groupSetId to:",I.data.groupSet)}catch(T){console.error("[DEBUG] Error fetching group:",T),r("Group"),a("Group Set")}}D()},[e]),N.useEffect(()=>{async function D(){if(i)try{const A=localStorage.getItem("token"),T=await we.get(`${Ae}/api/groups/sets/${i}/groups`,{headers:{Authorization:`Bearer ${A}`}});d(T.data)}catch{d([])}}D()},[i]),N.useEffect(()=>{if(!i||typeof i!="string"||i.length!==24){x([]);return}(async()=>{v(!0);try{const A=localStorage.getItem("token"),T=await we.get(`${Ae}/api/assignments/groupset/${i}`,{headers:{Authorization:`Bearer ${A}`}});x(T.data)}catch{x([])}finally{v(!1)}})()},[i]),n.jsxs("div",{className:"max-w-6xl mx-auto py-8 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4 px-1",children:[n.jsx(Er,{to:"/groups",className:"hover:underline text-gray-700 font-medium",children:"Group Management"}),n.jsx("span",{className:"mx-1 text-gray-300",children:">"}),n.jsx("span",{className:"text-gray-700 font-semibold",children:t})]}),n.jsxs("div",{className:"flex gap-8",children:[n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-white/80 backdrop-blur rounded-2xl shadow-lg p-6 h-fit relative border border-gray-100 mt-2",children:[n.jsxs("div",{className:"mb-8 border-b pb-3 relative",children:[_||k?n.jsxs("button",{className:"w-full flex items-center justify-between font-bold text-xl text-left focus:outline-none text-gray-900",onClick:()=>f(D=>!D),children:[n.jsxs("span",{children:[s," / ",t]}),n.jsx(_v,{className:`h-5 w-5 ml-2 transition-transform ${m?"rotate-180":""}`})]}):n.jsxs("div",{className:"font-bold text-xl text-gray-900",children:[s," / ",t]}),m&&(_||k)&&n.jsx("div",{className:"absolute left-0 right-0 z-10 bg-white border rounded shadow mt-2 max-h-60 overflow-y-auto",children:u.map(D=>n.jsx("div",{className:`px-4 py-2 cursor-pointer hover:bg-blue-50 ${D._id===e?"bg-blue-100 font-semibold":""}`,onClick:()=>{f(!1),h(`/groups/${D._id}`)},children:D.name},D._id))})]}),n.jsx("nav",{className:"flex flex-col gap-1",children:AH.map(D=>{const A=D.icon;return n.jsxs(xR,{to:D.path,className:({isActive:T})=>T?"flex items-center gap-3 font-semibold text-blue-700 bg-blue-100 rounded-lg px-4 py-2 shadow":"flex items-center gap-3 text-gray-700 hover:text-blue-700 hover:bg-blue-50 rounded-lg px-4 py-2 transition-colors",end:!0,children:[n.jsx(A,{className:"h-5 w-5"}),n.jsx("span",{className:"text-base",children:D.name})]},D.path)})})]}),n.jsxs("main",{className:"flex-1 min-w-0",children:[window.location.pathname.includes("/assignments")&&n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Group Assignments"}),b?n.jsx("div",{children:"Loading assignments..."}):g.length===0?n.jsx("div",{className:"text-gray-500",children:"No assignments for this group set."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(D=>n.jsx(KU,{assignment:D,isInstructor:_,isAdmin:k,navigate:h},D._id))})]}),window.location.pathname.includes("/pages")&&e&&n.jsx(EH,{groupSetId:i,groupId:e,isInstructor:_}),window.location.pathname.includes("/announcements")&&i&&w&&n.jsx(DH,{groupSetId:i,courseId:w}),n.jsx(sR,{context:{groupSetId:i}})]})]})]})}const PH=()=>{const e=Lt(),{groupId:t}=wr(),{user:r}=Tt(),[s,a]=N.useState([]),[i,l]=N.useState(!0),[u,d]=N.useState(null),[m,f]=N.useState(!1),[h,g]=N.useState([]),[x,b]=N.useState(""),[v,w]=N.useState(""),[C,j]=N.useState([]),_=(r==null?void 0:r.role)==="teacher";N.useEffect(()=>{(async()=>{if(t)try{const I=localStorage.getItem("token"),L=await we.get(`${Ae}/api/groups/${t}`,{headers:{Authorization:`Bearer ${I}`}});if(L.data){b(L.data.groupSet);const q=L.data.course;w(typeof q=="string"?q:(q==null?void 0:q._id)||"")}}catch(I){console.error("Error fetching group info:",I),d("Failed to load group information")}})()},[t]),N.useEffect(()=>{(async()=>{if(v)try{const I=localStorage.getItem("token"),L=await we.get(`${Ae}/api/courses/${v}`,{headers:{Authorization:`Bearer ${I}`}});L.data.success&&j(L.data.data.groups||[])}catch(I){console.error("Error fetching course groups:",I)}})()},[v]),N.useEffect(()=>{(async()=>{if(v)try{const I=localStorage.getItem("token"),L=await we.get(`${Ae}/api/modules/${v}`,{headers:{Authorization:`Bearer ${I}`}});let q=[];L.data&&Array.isArray(L.data.data)?q=L.data.data.map(O=>({...O,title:O.name})):Array.isArray(L.data)&&(q=L.data.map(O=>({...O,title:O.name}))),g(q)}catch{g([])}})()},[v]),N.useEffect(()=>{(async()=>{if(x)try{l(!0);const I=localStorage.getItem("token"),L=await Re.get(`${Ae}/api/threads/groupset/${x}`,{headers:{Authorization:`Bearer ${I}`}});L.data.success?a(L.data.data):d("Failed to fetch discussion threads")}catch(I){console.error("Error fetching threads:",I),d("Failed to load discussion threads")}finally{l(!1)}})()},[x]);const k=()=>{f(!0)},D=T=>{a(I=>[T,...I])},A=T=>{v?e(`/courses/${v}/threads/${T}`):(console.error("Course ID not found for this group. Cannot navigate to thread."),alert("Course ID not found for this group. Please contact your administrator."))};return i?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?n.jsx("div",{className:"text-red-500 text-center p-4",children:u}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Group Discussions"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Group-specific discussion threads and conversations"})]}),_&&n.jsxs("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Thread"]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No group discussion threads"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:_?"Get started by creating a new discussion thread for this group.":"There are no discussion threads yet for this group. Teachers will create threads here."}),_&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Thread"]})})]}):n.jsxs("div",{className:"space-y-4",children:[s.filter(T=>T.isPinned).length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Pinned Threads"}),n.jsx("div",{className:"space-y-4",children:s.filter(T=>T.isPinned).map(T=>n.jsxs("div",{onClick:()=>A(T._id),className:"p-4 bg-white border border-yellow-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer relative",children:[n.jsx("div",{className:"absolute top-2 right-2 text-yellow-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.715-5.349L11 4.477V16h2a1 1 0 110 2H7a1 1 0 110-2h2V4.477L6.237 7.582l1.715 5.349a1 1 0 01-.285 1.05A3.989 3.989 0 015 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.616a1 1 0 01.894-1.79l1.599.8L9 4.323V3a1 1 0 011-1z"})})}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[T.title,T.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",T.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",T.author.firstName," ",T.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:T.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(T.createdAt).toLocaleString(),children:cn(new Date(T.createdAt),{addSuffix:!0})}),T.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",cn(new Date(T.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.replyCount," ",T.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(T.lastActivity).toLocaleString(),children:["Last activity ",cn(new Date(T.lastActivity),{addSuffix:!0})]})]})]})]},T._id))})]}),s.filter(T=>!T.isPinned).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"All Threads"}),n.jsx("div",{className:"space-y-4",children:s.filter(T=>!T.isPinned).map(T=>n.jsx("div",{onClick:()=>A(T._id),className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[T.title,T.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",T.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",T.author.firstName," ",T.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:T.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(T.createdAt).toLocaleString(),children:cn(new Date(T.createdAt),{addSuffix:!0})}),T.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",cn(new Date(T.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.replyCount," ",T.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(T.lastActivity).toLocaleString(),children:["Last activity ",cn(new Date(T.lastActivity),{addSuffix:!0})]})]})]})},T._id))})]})]})]}),_&&n.jsx(kD,{isOpen:m,onClose:()=>f(!1),courseId:v,onThreadCreated:D,courseGroups:C,modules:h,defaultGroupSetId:x})]})},RH=({groupId:e,groupSetId:t})=>{const[r,s]=N.useState([]),[a,i]=N.useState(!0),[l,u]=N.useState(null),[d,m]=N.useState(null),[f,h]=N.useState(""),[g,x]=N.useState([]),[b,v]=N.useState(!1),[w,C]=N.useState(null);N.useEffect(()=>{i(!0),u(null),we.get(`/api/groups/${e}/members`).then(k=>{s(k.data),i(!1)}).catch(k=>{u("Failed to load group members"),i(!1)})},[e]),N.useEffect(()=>{if(!f.trim()){x([]);return}v(!0),we.get(`/api/groups/sets/${t}/available-students?search=${encodeURIComponent(f)}`).then(k=>{x(k.data),v(!1)}).catch(()=>{x([]),v(!1)})},[f,t]);const j=k=>{m(k),we.delete(`/api/groups/${e}/members/${k}`).then(()=>{s(D=>D.filter(A=>A._id!==k)),m(null)}).catch(()=>{u("Failed to remove member"),m(null)})},_=k=>{C(k),we.post(`/api/groups/${e}/members`,{userId:k}).then(()=>{we.get(`/api/groups/${e}/members`).then(D=>s(D.data)),h(""),x([]),C(null)}).catch(()=>{u("Failed to add member"),C(null)})};return a?n.jsx("div",{children:"Loading group members..."}):l?n.jsx("div",{className:"text-red-500",children:l}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("input",{type:"text",id:"group-search-students",name:"search",className:"w-full border rounded px-4 py-2 mb-2",placeholder:"Search students by name or email",value:f,onChange:k=>h(k.target.value)}),b&&n.jsx("div",{className:"text-gray-500",children:"Searching..."}),f&&g.length>0&&n.jsx("div",{className:"bg-white border rounded shadow p-2 mt-1",children:g.map(k=>n.jsxs("div",{className:"flex justify-between items-center py-2 px-2 hover:bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[k.profilePicture?n.jsx("img",{src:k.profilePicture.startsWith("http")?k.profilePicture:`http://localhost:5000${k.profilePicture}`,alt:`${k.firstName} ${k.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200",onError:D=>{D.currentTarget.style.display="none";const A=D.currentTarget.nextElementSibling;A&&(A.style.display="flex")}}):null,n.jsxs("div",{className:`w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${k.profilePicture?"hidden":""}`,style:{display:k.profilePicture?"none":"flex"},children:[k.firstName.charAt(0),k.lastName.charAt(0)]})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium",children:[k.firstName," ",k.lastName]}),n.jsx("span",{className:"text-gray-500 ml-2",children:k.email})]})]}),n.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",onClick:()=>_(k._id),disabled:w===k._id,children:w===k._id?"Adding...":"Add"})]},k._id))}),f&&!b&&g.length===0&&n.jsx("div",{className:"text-gray-500 p-2",children:"No students found."})]}),r.length===0?n.jsx("div",{children:"No members in this group."}):r.map(k=>n.jsxs("div",{className:"bg-white rounded shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[k.profilePicture?n.jsx("img",{src:k.profilePicture.startsWith("http")?k.profilePicture:`http://localhost:5000${k.profilePicture}`,alt:`${k.firstName} ${k.lastName}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200",onError:D=>{D.currentTarget.style.display="none";const A=D.currentTarget.nextElementSibling;A&&(A.style.display="flex")}}):null,n.jsxs("div",{className:`w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${k.profilePicture?"hidden":""}`,style:{display:k.profilePicture?"none":"flex"},children:[k.firstName.charAt(0),k.lastName.charAt(0)]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-lg",children:[k.firstName," ",k.lastName]}),n.jsx("div",{className:"text-gray-500",children:k.email})]})]}),n.jsx("button",{className:"mt-2 md:mt-0 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",onClick:()=>j(k._id),disabled:d===k._id,children:d===k._id?"Removing...":"Remove"})]},k._id))]})},IH=e=>{const t=[{label:"Account",icon:Xl,to:"/account"},{label:"Dashboard",icon:OO,to:"/"},{label:"Courses",icon:kr,to:"/courses"},{label:"Calendar",icon:I4,to:"/calendar"},{label:"Inbox",icon:BO,to:"/inbox"}];return e==="admin"?[...t,{label:"Users",icon:cr,to:"/admin/users"},{label:"Settings",icon:Ds,to:"/admin/settings"},{label:"Security",icon:lo,to:"/admin/security"}]:[...t,{label:"Groups",icon:cr,to:"/groups"},{label:"More",icon:CO,to:"/more"}]};function MH(){const e=Os(),t=Lt(),{user:r,logout:s}=Tt(),{courses:a}=Do(),[i,l]=N.useState(!1),u=N.useRef(null);N.useEffect(()=>{const h=g=>{u.current&&!u.current.contains(g.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const d=()=>{s(),t("/login")},f=(r==null?void 0:r.role)==="teacher"||(r==null?void 0:r.role)==="admin"?a:a.filter(h=>h.published);return n.jsxs("nav",{className:"fixed top-0 left-0 h-full bg-blue-900 flex flex-col items-center py-4 z-50 shadow-lg border-r-2 border-blue-700",style:{width:"80px",minWidth:"80px"},"data-testid":"global-sidebar",children:[n.jsx("div",{className:"mb-6 flex flex-col items-center",children:n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-800 flex items-center justify-center mb-2",children:n.jsx("span",{className:"text-white text-lg font-bold",children:"UIS"})})}),n.jsx("div",{className:"flex-1 flex flex-col gap-2 items-center w-full",children:IH((r==null?void 0:r.role)||"").map(({label:h,icon:g,to:x})=>{var v,w;const b=x==="/courses"&&e.pathname.startsWith("/courses")||e.pathname===x;return h==="Account"?n.jsxs(Er,{to:x,className:`flex flex-col items-center w-full py-2 transition-colors ${b?"bg-blue-800":"hover:bg-blue-800"} ${b?"text-blue-300":"text-white"}`,children:[n.jsx("div",{className:"h-5 w-5 mb-1 rounded-full bg-blue-700 flex items-center justify-center",children:r!=null&&r.profilePicture?n.jsx("img",{src:r.profilePicture,alt:`${r.firstName} ${r.lastName}`,className:"w-full h-full object-cover rounded-full",onError:()=>{}}):n.jsx("span",{className:"text-white text-xs font-bold",children:((v=r==null?void 0:r.firstName)==null?void 0:v.charAt(0))||((w=r==null?void 0:r.lastName)==null?void 0:w.charAt(0))||"U"})}),n.jsx("span",{className:"text-xs font-medium",children:h})]},h):h==="Courses"?n.jsxs("div",{className:"relative w-full",ref:u,onMouseLeave:()=>l(!1),children:[n.jsxs("button",{onClick:()=>l(!i),onMouseEnter:()=>l(!0),className:`flex flex-col items-center w-full py-2 transition-colors ${b?"bg-blue-800":"hover:bg-blue-800"} ${b?"text-blue-300":"text-white"}`,children:[n.jsx(kr,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:h})]}),i&&f.length>0&&n.jsxs("div",{className:"absolute left-full top-0 ml-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 min-w-48 z-50",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:n.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Your Courses"})}),f.map(C=>{var _,k;const j=e.pathname.startsWith(`/courses/${C._id}`);return n.jsxs(Er,{to:`/courses/${C._id}`,onClick:()=>l(!1),className:`block px-3 py-2 text-sm hover:bg-gray-50 transition-colors ${j?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"truncate",children:C.title}),j&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(_=C.instructor)==null?void 0:_.firstName," ",(k=C.instructor)==null?void 0:k.lastName]})]},C._id)})]})]},h):n.jsxs(Er,{to:x,className:`flex flex-col items-center w-full py-2 transition-colors ${b?"bg-blue-800":"hover:bg-blue-800"} ${b?"text-blue-300":"text-white"}`,children:[n.jsx(g,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:h})]},h)})}),n.jsx("div",{className:"mt-2",children:n.jsxs("button",{onClick:d,className:"flex flex-col items-center w-full py-2 transition-colors hover:bg-blue-800 text-white",children:[n.jsx(KO,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:"Logout"})]})})]})}function Xs(e){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function OH(e,t){if(Xs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aT(e){var t=OH(e,"string");return Xs(t)=="symbol"?t:t+""}function ni(e,t,r){return(t=aT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(s){ni(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ff(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Is(e,t){if(e==null)return{};var r,s,a=Ff(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hS(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aT(s.key),s)}}function Tr(e,t,r){return t&&hS(e.prototype,t),r&&hS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ef(e){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ef(e)}function iT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iT=function(){return!!e})()}function LH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $H(e,t){if(t&&(Xs(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LH(e)}function en(e,t,r){return t=ef(t),$H(e,iT()?Reflect.construct(t,r||[],ef(e).constructor):t.apply(e,r))}function tf(e,t){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},tf(e,t)}function tn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tf(e,t)}function oT(e){if(Array.isArray(e))return e}function FH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,u=[],d=!0,m=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(s=i.call(r)).done)&&(u.push(s.value),u.length!==t);d=!0);}catch(f){m=!0,a=f}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(m)throw a}}return u}}function av(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function kb(e,t){if(e){if(typeof e=="string")return av(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?av(e,t):void 0}}function lT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xi(e,t){return oT(e)||FH(e,t)||kb(e,t)||lT()}function cT(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=cT(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function vr(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=cT(e))&&(s&&(s+=" "),s+=t);return s}var Ip,pS;function BH(){if(pS)return Ip;pS=1;var e=function(t,r,s,a,i,l,u,d){if(!t){var m;if(r===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,a,i,l,u,d],h=0;m=new Error(r.replace(/%s/g,function(){return f[h++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return Ip=e,Ip}var zH=BH();const uc=qr(zH);var GH=function(){};function qH(e,t){var r={};return Object.keys(e).forEach(function(s){r[yd(s)]=GH}),r}function gS(e,t){return e[t]!==void 0}function yd(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function UH(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function WH(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tf(e,t)}function uT(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function dT(e){function t(r){var s=this.constructor.getDerivedStateFromProps(e,r);return s??null}this.setState(t.bind(this))}function fT(e,t){try{var r=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,s)}finally{this.props=r,this.state=s}}uT.__suppressDeprecationWarning=!0;dT.__suppressDeprecationWarning=!0;fT.__suppressDeprecationWarning=!0;function HH(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,s=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?s="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(s="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||s!==null||a!==null){var i=e.displayName||e.name,l=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=uT,t.componentWillReceiveProps=dT),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=fT;var u=t.componentDidUpdate;t.componentDidUpdate=function(m,f,h){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;u.call(this,m,f,g)}}return e}var VH="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function mT(e,t,r){r===void 0&&(r=[]);var s=e.displayName||e.name||"Component",a=UH(e),i=Object.keys(t),l=i.map(yd);a||!r.length||uc(!1);var u=function(m){WH(f,m);function f(){for(var g,x=arguments.length,b=new Array(x),v=0;v<x;v++)b[v]=arguments[v];g=m.call.apply(m,[this].concat(b))||this,g.handlers=Object.create(null),i.forEach(function(C){var j=t[C],_=function(D){if(g.props[j]){var A;g._notifying=!0;for(var T=arguments.length,I=new Array(T>1?T-1:0),L=1;L<T;L++)I[L-1]=arguments[L];(A=g.props)[j].apply(A,[D].concat(I)),g._notifying=!1}g.unmounted||g.setState(function(q){var O,$=q.values;return{values:dr(Object.create(null),$,(O={},O[C]=D,O))}})};g.handlers[j]=_}),r.length&&(g.attachRef=function(C){g.inner=C});var w=Object.create(null);return i.forEach(function(C){w[C]=g.props[yd(C)]}),g.state={values:w,prevProps:{}},g}var h=f.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(x,b){var v=b.values,w=b.prevProps,C={values:dr(Object.create(null),v),prevProps:{}};return i.forEach(function(j){C.prevProps[j]=x[j],!gS(x,j)&&gS(w,j)&&(C.values[j]=x[yd(j)])}),C},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var x=this,b=this.props,v=b.innerRef,w=Ff(b,["innerRef"]);l.forEach(function(j){delete w[j]});var C={};return i.forEach(function(j){var _=x.props[j];C[j]=_!==void 0?_:x.state.values[j]}),V.createElement(e,dr({},w,C,this.handlers,{ref:v||this.attachRef}))},f}(V.Component);HH(u),u.displayName="Uncontrolled("+s+")",u.propTypes=dr({innerRef:function(){}},qH(t)),r.forEach(function(m){u.prototype[m]=function(){var h;return(h=this.inner)[m].apply(h,arguments)}});var d=u;return V.forwardRef&&(d=V.forwardRef(function(m,f){return V.createElement(u,dr({},m,{innerRef:f,__source:{fileName:VH,lineNumber:128},__self:this}))}),d.propTypes=u.propTypes),d.ControlledComponent=e,d.deferControlTo=function(m,f,h){return f===void 0&&(f={}),mT(m,dr({},t,f),h)},d}var rf="milliseconds",dc="seconds",fc="minutes",mc="hours",yi="day",vo="week",hc="month",vi="year",bi="decade",wi="century",hT={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},YH={month:1,year:12,decade:10*12,century:100*12};function KH(e){return[31,QH(e),31,30,31,30,31,31,30,31,30,31]}function QH(e){return e%4===0&&e%100!==0||e%400===0?29:28}function gs(e,t,r){switch(e=new Date(e),r){case rf:case dc:case fc:case mc:case yi:case vo:return XH(e,t*hT[r]);case hc:case vi:case bi:case wi:return JH(e,t*YH[r])}throw new TypeError('Invalid units: "'+r+'"')}function XH(e,t){var r=new Date(+e+t);return ZH(e,r)}function JH(e,t){var r=e.getFullYear(),s=e.getMonth(),a=e.getDate(),i=r*12+s+t,l=Math.trunc(i/12),u=i%12,d=Math.min(a,KH(l)[u]),m=new Date(e);return m.setFullYear(l),m.setDate(1),m.setMonth(u),m.setDate(d),m}function ZH(e,t){var r=e.getTimezoneOffset(),s=t.getTimezoneOffset(),a=s-r;return new Date(+t+a*hT.minutes)}function pc(e,t,r){return gs(e,-t,r)}function Gr(e,t,r){switch(e=new Date(e),t){case wi:case bi:case vi:e=sf(e,0);case hc:e=vT(e,1);case vo:case yi:e=yc(e,0);case mc:e=bo(e,0);case fc:e=xc(e,0);case dc:e=gc(e,0)}return t===bi&&(e=pc(e,Ni(e)%10,"year")),t===wi&&(e=pc(e,Ni(e)%100,"year")),t===vo&&(e=bT(e,0,r)),e}function nf(e,t,r){switch(e=new Date(e),e=Gr(e,t,r),t){case wi:case bi:case vi:case hc:case vo:e=gs(e,1,t),e=pc(e,1,yi),e.setHours(23,59,59,999);break;case yi:e.setHours(23,59,59,999);break;case mc:case fc:case dc:e=gs(e,1,t),e=pc(e,1,rf)}return e}var Lo=Fo(function(e,t){return e===t}),Cb=Fo(function(e,t){return e!==t}),Bf=Fo(function(e,t){return e>t}),Rc=Fo(function(e,t){return e>=t}),_b=Fo(function(e,t){return e<t}),$o=Fo(function(e,t){return e<=t});function pT(){return new Date(Math.min.apply(Math,arguments))}function gT(){return new Date(Math.max.apply(Math,arguments))}function xT(e,t,r,s){return s=s||"day",(!t||Rc(e,t,s))&&(!r||$o(e,r,s))}var gc=Ra("Milliseconds"),xc=Ra("Seconds"),bo=Ra("Minutes"),yc=Ra("Hours"),yT=Ra("Day"),vT=Ra("Date"),sf=Ra("Month"),Ni=Ra("FullYear");function eV(e,t){return t===void 0?Ni(Gr(e,bi)):gs(e,t+10,vi)}function tV(e,t){return t===void 0?Ni(Gr(e,wi)):gs(e,t+100,vi)}function bT(e,t,r){var s=(yT(e)+7-(r||0))%7;return t===void 0?s:gs(e,t-s,yi)}function rV(e,t,r,s){var a,i,l;switch(r){case rf:case dc:case fc:case mc:case yi:case vo:a=t.getTime()-e.getTime();break;case hc:case vi:case bi:case wi:a=(Ni(t)-Ni(e))*12+sf(t)-sf(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case rf:i=1;break;case dc:i=1e3;break;case fc:i=1e3*60;break;case mc:i=1e3*60*60;break;case yi:i=1e3*60*60*24;break;case vo:i=1e3*60*60*24*7;break;case hc:i=1;break;case vi:i=12;break;case bi:i=120;break;case wi:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return l=a/i,s?l:Math.round(l)}function Ra(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,s){if(s===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](s),t&&a["get"+e]()!=s&&(e==="Hours"||s>=t&&a.getHours()-r.getHours()<Math.floor(s/t))&&a["set"+e](s+t),a}}function Fo(e){return function(t,r,s){return e(+Gr(t,s),+Gr(r,s))}}const xS=Object.freeze(Object.defineProperty({__proto__:null,add:gs,century:tV,date:vT,day:yT,decade:eV,diff:rV,endOf:nf,eq:Lo,gt:Bf,gte:Rc,hours:yc,inRange:xT,lt:_b,lte:$o,max:gT,milliseconds:gc,min:pT,minutes:bo,month:sf,neq:Cb,seconds:xc,startOf:Gr,subtract:pc,weekday:bT,year:Ni},Symbol.toStringTag,{value:"Module"}));function nV(e){if(Array.isArray(e))return av(e)}function wT(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vd(e){return nV(e)||wT(e)||kb(e)||sV()}var Mp,yS;function NT(){if(yS)return Mp;yS=1;function e(t,r,s){var a=-1,i=t.length;r<0&&(r=-r>i?0:i+r),s=s>i?i:s,s<0&&(s+=i),i=r>s?0:s-r>>>0,r>>>=0;for(var l=Array(i);++a<i;)l[a]=t[a+r];return l}return Mp=e,Mp}var Op,vS;function Ic(){if(vS)return Op;vS=1;function e(t,r){return t===r||t!==t&&r!==r}return Op=e,Op}var Lp,bS;function jT(){if(bS)return Lp;bS=1;var e=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu;return Lp=e,Lp}var $p,wS;function $s(){if(wS)return $p;wS=1;var e=jT(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return $p=r,$p}var Fp,NS;function Bo(){if(NS)return Fp;NS=1;var e=$s(),t=e.Symbol;return Fp=t,Fp}var Bp,jS;function aV(){if(jS)return Bp;jS=1;var e=Bo(),t=Object.prototype,r=t.hasOwnProperty,s=t.toString,a=e?e.toStringTag:void 0;function i(l){var u=r.call(l,a),d=l[a];try{l[a]=void 0;var m=!0}catch{}var f=s.call(l);return m&&(u?l[a]=d:delete l[a]),f}return Bp=i,Bp}var zp,SS;function iV(){if(SS)return zp;SS=1;var e=Object.prototype,t=e.toString;function r(s){return t.call(s)}return zp=r,zp}var Gp,kS;function zo(){if(kS)return Gp;kS=1;var e=Bo(),t=aV(),r=iV(),s="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function l(u){return u==null?u===void 0?a:s:i&&i in Object(u)?t(u):r(u)}return Gp=l,Gp}var qp,CS;function ea(){if(CS)return qp;CS=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return qp=e,qp}var Up,_S;function Eb(){if(_S)return Up;_S=1;var e=zo(),t=ea(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function l(u){if(!t(u))return!1;var d=e(u);return d==s||d==a||d==r||d==i}return Up=l,Up}var Wp,ES;function Db(){if(ES)return Wp;ES=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Wp=t,Wp}var Hp,DS;function Mc(){if(DS)return Hp;DS=1;var e=Eb(),t=Db();function r(s){return s!=null&&t(s.length)&&!e(s)}return Hp=r,Hp}var Vp,AS;function Ab(){if(AS)return Vp;AS=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(s,a){var i=typeof s;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}return Vp=r,Vp}var Yp,TS;function zf(){if(TS)return Yp;TS=1;var e=Ic(),t=Mc(),r=Ab(),s=ea();function a(i,l,u){if(!s(u))return!1;var d=typeof l;return(d=="number"?t(u)&&r(l,u.length):d=="string"&&l in u)?e(u[l],i):!1}return Yp=a,Yp}var Kp,PS;function oV(){if(PS)return Kp;PS=1;var e=/\s/;function t(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return Kp=t,Kp}var Qp,RS;function lV(){if(RS)return Qp;RS=1;var e=oV(),t=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(t,"")}return Qp=r,Qp}var Xp,IS;function Ia(){if(IS)return Xp;IS=1;function e(t){return t!=null&&typeof t=="object"}return Xp=e,Xp}var Jp,MS;function Oc(){if(MS)return Jp;MS=1;var e=zo(),t=Ia(),r="[object Symbol]";function s(a){return typeof a=="symbol"||t(a)&&e(a)==r}return Jp=s,Jp}var Zp,OS;function cV(){if(OS)return Zp;OS=1;var e=lV(),t=ea(),r=Oc(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(m){if(typeof m=="number")return m;if(r(m))return s;if(t(m)){var f=typeof m.valueOf=="function"?m.valueOf():m;m=t(f)?f+"":f}if(typeof m!="string")return m===0?m:+m;m=e(m);var h=i.test(m);return h||l.test(m)?u(m.slice(2),h?2:8):a.test(m)?s:+m}return Zp=d,Zp}var eg,LS;function ST(){if(LS)return eg;LS=1;var e=cV(),t=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return eg=s,eg}var tg,$S;function kT(){if($S)return tg;$S=1;var e=ST();function t(r){var s=e(r),a=s%1;return s===s?a?s-a:s:0}return tg=t,tg}var rg,FS;function uV(){if(FS)return rg;FS=1;var e=NT(),t=zf(),r=kT(),s=Math.ceil,a=Math.max;function i(l,u,d){(d?t(l,u,d):u===void 0)?u=1:u=a(r(u),0);var m=l==null?0:l.length;if(!m||u<1)return[];for(var f=0,h=0,g=Array(s(m/u));f<m;)g[h++]=e(l,f,f+=u);return g}return rg=i,rg}var dV=uV();const fV=qr(dV);function Lc(e){return e&&e.ownerDocument||document}function mV(e){var t=Lc(e);return t&&t.defaultView||window}function hV(e,t){return mV(e).getComputedStyle(e,t)}var pV=/([A-Z])/g;function gV(e){return e.replace(pV,"-$1").toLowerCase()}var xV=/^ms-/;function od(e){return gV(e).replace(xV,"-ms-")}var yV=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function vV(e){return!!(e&&yV.test(e))}function so(e,t){var r="",s="";if(typeof t=="string")return e.style.getPropertyValue(od(t))||hV(e).getPropertyValue(od(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(od(a)):vV(a)?s+=a+"("+i+") ":r+=od(a)+": "+i+";"}),s&&(r+="transform: "+s+";"),e.style.cssText+=";"+r}function vc(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function bV(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Tb(e){return"window"in e&&e.window===e?e:bV(e)&&e.defaultView||!1}function CT(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(s,a){var i=Tb(s);if(a===void 0)return i?i[e]:s[t];i?i.scrollTo(i[e],a):s[t]=a}return r}const _T=CT("pageXOffset"),ET=CT("pageYOffset");function li(e){var t=Lc(e),r={top:0,left:0,height:0,width:0},s=t&&t.documentElement;return!s||!vc(s,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+ET(s)-(s.clientTop||0),left:r.left+_T(s)-(s.clientLeft||0),width:r.width,height:r.height}),r}var wV=function(t){return!!t&&"offsetParent"in t};function NV(e){for(var t=Lc(e),r=e&&e.offsetParent;wV(r)&&r.nodeName!=="HTML"&&so(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var jV=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function DT(e,t){var r={top:0,left:0},s;if(so(e,"position")==="fixed")s=e.getBoundingClientRect();else{var a=t||NV(e);s=li(e),jV(a)!=="html"&&(r=li(a));var i=String(so(a,"borderTopWidth")||0);r.top+=parseInt(i,10)-ET(a)||0;var l=String(so(a,"borderLeftWidth")||0);r.left+=parseInt(l,10)-_T(a)||0}var u=String(so(e,"marginTop")||0),d=String(so(e,"marginLeft")||0);return dr({},s,{top:s.top-r.top-(parseInt(u,10)||0),left:s.left-r.left-(parseInt(d,10)||0)})}const Pb=!!(typeof window<"u"&&window.document&&window.document.createElement);var BS=new Date().getTime();function SV(e){var t=new Date().getTime(),r=Math.max(0,16-(t-BS)),s=setTimeout(e,r);return BS=t,s}var kV=["","webkit","moz","o","ms"],iv="clearTimeout",ov=SV,zS=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Pb&&kV.some(function(e){var t=zS(e,"request");return t in window&&(iv=zS(e,"cancel"),ov=function(s){return window[t](s)}),!!ov});var GS=function(t){typeof window[iv]=="function"&&window[iv](t)},AT=ov,ng;function CV(e,t){if(!ng){var r=document.body,s=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;ng=function(i,l){return s.call(i,l)}}return ng(e,t)}var _V=Function.prototype.bind.call(Function.prototype.call,[].slice);function EV(e,t){return _V(e.querySelectorAll(t))}var lv=!1,cv=!1;try{var sg={get passive(){return lv=!0},get once(){return cv=lv=!0}};Pb&&(window.addEventListener("test",sg,sg),window.removeEventListener("test",sg,!0))}catch{}function DV(e,t,r,s){if(s&&typeof s!="boolean"&&!cv){var a=s.once,i=s.capture,l=r;!cv&&a&&(l=r.__once||function u(d){this.removeEventListener(t,u,i),r.call(this,d)},r.__once=l),e.addEventListener(t,l,lv?s:i)}e.addEventListener(t,r,s)}function AV(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e},[e]),t}function qS(e){const t=AV(e);return N.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function US(){return N.useState(null)}function TV(){const e=N.useRef(!0),t=N.useRef(()=>e.current);return N.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function PV(e){const t=TV();return[e[0],N.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var jn="top",ts="bottom",rs="right",Sn="left",Rb="auto",$c=[jn,ts,rs,Sn],wo="start",bc="end",RV="clippingParents",TT="viewport",Tl="popper",IV="reference",WS=$c.reduce(function(e,t){return e.concat([t+"-"+wo,t+"-"+bc])},[]),Ib=[].concat($c,[Rb]).reduce(function(e,t){return e.concat([t,t+"-"+wo,t+"-"+bc])},[]),MV="beforeRead",OV="read",LV="afterRead",$V="beforeMain",FV="main",BV="afterMain",zV="beforeWrite",GV="write",qV="afterWrite",UV=[MV,OV,LV,$V,FV,BV,zV,GV,qV];function Ts(e){return e.split("-")[0]}function Bn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ji(e){var t=Bn(e).Element;return e instanceof t||e instanceof Element}function Ps(e){var t=Bn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Mb(e){if(typeof ShadowRoot>"u")return!1;var t=Bn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ci=Math.max,af=Math.min,No=Math.round;function uv(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function PT(){return!/^((?!chrome|android).)*safari/i.test(uv())}function jo(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var s=e.getBoundingClientRect(),a=1,i=1;t&&Ps(e)&&(a=e.offsetWidth>0&&No(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&No(s.height)/e.offsetHeight||1);var l=ji(e)?Bn(e):window,u=l.visualViewport,d=!PT()&&r,m=(s.left+(d&&u?u.offsetLeft:0))/a,f=(s.top+(d&&u?u.offsetTop:0))/i,h=s.width/a,g=s.height/i;return{width:h,height:g,top:f,right:m+h,bottom:f+g,left:m,x:m,y:f}}function Ob(e){var t=jo(e),r=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:s}}function RT(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Mb(r)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ea(e){return e?(e.nodeName||"").toLowerCase():null}function Js(e){return Bn(e).getComputedStyle(e)}function WV(e){return["table","td","th"].indexOf(Ea(e))>=0}function Ma(e){return((ji(e)?e.ownerDocument:e.document)||window.document).documentElement}function Gf(e){return Ea(e)==="html"?e:e.assignedSlot||e.parentNode||(Mb(e)?e.host:null)||Ma(e)}function HS(e){return!Ps(e)||Js(e).position==="fixed"?null:e.offsetParent}function HV(e){var t=/firefox/i.test(uv()),r=/Trident/i.test(uv());if(r&&Ps(e)){var s=Js(e);if(s.position==="fixed")return null}var a=Gf(e);for(Mb(a)&&(a=a.host);Ps(a)&&["html","body"].indexOf(Ea(a))<0;){var i=Js(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Fc(e){for(var t=Bn(e),r=HS(e);r&&WV(r)&&Js(r).position==="static";)r=HS(r);return r&&(Ea(r)==="html"||Ea(r)==="body"&&Js(r).position==="static")?t:r||HV(e)||t}function Lb(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ul(e,t,r){return ci(e,af(t,r))}function VV(e,t,r){var s=Ul(e,t,r);return s>r?r:s}function IT(){return{top:0,right:0,bottom:0,left:0}}function MT(e){return Object.assign({},IT(),e)}function OT(e,t){return t.reduce(function(r,s){return r[s]=e,r},{})}var YV=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,MT(typeof t!="number"?t:OT(t,$c))};function KV(e){var t,r=e.state,s=e.name,a=e.options,i=r.elements.arrow,l=r.modifiersData.popperOffsets,u=Ts(r.placement),d=Lb(u),m=[Sn,rs].indexOf(u)>=0,f=m?"height":"width";if(!(!i||!l)){var h=YV(a.padding,r),g=Ob(i),x=d==="y"?jn:Sn,b=d==="y"?ts:rs,v=r.rects.reference[f]+r.rects.reference[d]-l[d]-r.rects.popper[f],w=l[d]-r.rects.reference[d],C=Fc(i),j=C?d==="y"?C.clientHeight||0:C.clientWidth||0:0,_=v/2-w/2,k=h[x],D=j-g[f]-h[b],A=j/2-g[f]/2+_,T=Ul(k,A,D),I=d;r.modifiersData[s]=(t={},t[I]=T,t.centerOffset=T-A,t)}}function QV(e){var t=e.state,r=e.options,s=r.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||RT(t.elements.popper,a)&&(t.elements.arrow=a))}const XV={name:"arrow",enabled:!0,phase:"main",fn:KV,effect:QV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function So(e){return e.split("-")[1]}var JV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZV(e,t){var r=e.x,s=e.y,a=t.devicePixelRatio||1;return{x:No(r*a)/a||0,y:No(s*a)/a||0}}function VS(e){var t,r=e.popper,s=e.popperRect,a=e.placement,i=e.variation,l=e.offsets,u=e.position,d=e.gpuAcceleration,m=e.adaptive,f=e.roundOffsets,h=e.isFixed,g=l.x,x=g===void 0?0:g,b=l.y,v=b===void 0?0:b,w=typeof f=="function"?f({x,y:v}):{x,y:v};x=w.x,v=w.y;var C=l.hasOwnProperty("x"),j=l.hasOwnProperty("y"),_=Sn,k=jn,D=window;if(m){var A=Fc(r),T="clientHeight",I="clientWidth";if(A===Bn(r)&&(A=Ma(r),Js(A).position!=="static"&&u==="absolute"&&(T="scrollHeight",I="scrollWidth")),A=A,a===jn||(a===Sn||a===rs)&&i===bc){k=ts;var L=h&&A===D&&D.visualViewport?D.visualViewport.height:A[T];v-=L-s.height,v*=d?1:-1}if(a===Sn||(a===jn||a===ts)&&i===bc){_=rs;var q=h&&A===D&&D.visualViewport?D.visualViewport.width:A[I];x-=q-s.width,x*=d?1:-1}}var O=Object.assign({position:u},m&&JV),$=f===!0?ZV({x,y:v},Bn(r)):{x,y:v};if(x=$.x,v=$.y,d){var z;return Object.assign({},O,(z={},z[k]=j?"0":"",z[_]=C?"0":"",z.transform=(D.devicePixelRatio||1)<=1?"translate("+x+"px, "+v+"px)":"translate3d("+x+"px, "+v+"px, 0)",z))}return Object.assign({},O,(t={},t[k]=j?v+"px":"",t[_]=C?x+"px":"",t.transform="",t))}function eY(e){var t=e.state,r=e.options,s=r.gpuAcceleration,a=s===void 0?!0:s,i=r.adaptive,l=i===void 0?!0:i,u=r.roundOffsets,d=u===void 0?!0:u,m={placement:Ts(t.placement),variation:So(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,VS(Object.assign({},m,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,VS(Object.assign({},m,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const tY={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eY,data:{}};var ld={passive:!0};function rY(e){var t=e.state,r=e.instance,s=e.options,a=s.scroll,i=a===void 0?!0:a,l=s.resize,u=l===void 0?!0:l,d=Bn(t.elements.popper),m=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&m.forEach(function(f){f.addEventListener("scroll",r.update,ld)}),u&&d.addEventListener("resize",r.update,ld),function(){i&&m.forEach(function(f){f.removeEventListener("scroll",r.update,ld)}),u&&d.removeEventListener("resize",r.update,ld)}}const nY={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:rY,data:{}};var sY={left:"right",right:"left",bottom:"top",top:"bottom"};function bd(e){return e.replace(/left|right|bottom|top/g,function(t){return sY[t]})}var aY={start:"end",end:"start"};function YS(e){return e.replace(/start|end/g,function(t){return aY[t]})}function $b(e){var t=Bn(e),r=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:r,scrollTop:s}}function Fb(e){return jo(Ma(e)).left+$b(e).scrollLeft}function iY(e,t){var r=Bn(e),s=Ma(e),a=r.visualViewport,i=s.clientWidth,l=s.clientHeight,u=0,d=0;if(a){i=a.width,l=a.height;var m=PT();(m||!m&&t==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:i,height:l,x:u+Fb(e),y:d}}function oY(e){var t,r=Ma(e),s=$b(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=ci(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=ci(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),u=-s.scrollLeft+Fb(e),d=-s.scrollTop;return Js(a||r).direction==="rtl"&&(u+=ci(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:l,x:u,y:d}}function Bb(e){var t=Js(e),r=t.overflow,s=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+s)}function LT(e){return["html","body","#document"].indexOf(Ea(e))>=0?e.ownerDocument.body:Ps(e)&&Bb(e)?e:LT(Gf(e))}function Wl(e,t){var r;t===void 0&&(t=[]);var s=LT(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Bn(s),l=a?[i].concat(i.visualViewport||[],Bb(s)?s:[]):s,u=t.concat(l);return a?u:u.concat(Wl(Gf(l)))}function dv(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lY(e,t){var r=jo(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function KS(e,t,r){return t===TT?dv(iY(e,r)):ji(t)?lY(t,r):dv(oY(Ma(e)))}function cY(e){var t=Wl(Gf(e)),r=["absolute","fixed"].indexOf(Js(e).position)>=0,s=r&&Ps(e)?Fc(e):e;return ji(s)?t.filter(function(a){return ji(a)&&RT(a,s)&&Ea(a)!=="body"}):[]}function uY(e,t,r,s){var a=t==="clippingParents"?cY(e):[].concat(t),i=[].concat(a,[r]),l=i[0],u=i.reduce(function(d,m){var f=KS(e,m,s);return d.top=ci(f.top,d.top),d.right=af(f.right,d.right),d.bottom=af(f.bottom,d.bottom),d.left=ci(f.left,d.left),d},KS(e,l,s));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function $T(e){var t=e.reference,r=e.element,s=e.placement,a=s?Ts(s):null,i=s?So(s):null,l=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,d;switch(a){case jn:d={x:l,y:t.y-r.height};break;case ts:d={x:l,y:t.y+t.height};break;case rs:d={x:t.x+t.width,y:u};break;case Sn:d={x:t.x-r.width,y:u};break;default:d={x:t.x,y:t.y}}var m=a?Lb(a):null;if(m!=null){var f=m==="y"?"height":"width";switch(i){case wo:d[m]=d[m]-(t[f]/2-r[f]/2);break;case bc:d[m]=d[m]+(t[f]/2-r[f]/2);break}}return d}function wc(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=s===void 0?e.placement:s,i=r.strategy,l=i===void 0?e.strategy:i,u=r.boundary,d=u===void 0?RV:u,m=r.rootBoundary,f=m===void 0?TT:m,h=r.elementContext,g=h===void 0?Tl:h,x=r.altBoundary,b=x===void 0?!1:x,v=r.padding,w=v===void 0?0:v,C=MT(typeof w!="number"?w:OT(w,$c)),j=g===Tl?IV:Tl,_=e.rects.popper,k=e.elements[b?j:g],D=uY(ji(k)?k:k.contextElement||Ma(e.elements.popper),d,f,l),A=jo(e.elements.reference),T=$T({reference:A,element:_,placement:a}),I=dv(Object.assign({},_,T)),L=g===Tl?I:A,q={top:D.top-L.top+C.top,bottom:L.bottom-D.bottom+C.bottom,left:D.left-L.left+C.left,right:L.right-D.right+C.right},O=e.modifiersData.offset;if(g===Tl&&O){var $=O[a];Object.keys(q).forEach(function(z){var K=[rs,ts].indexOf(z)>=0?1:-1,te=[jn,ts].indexOf(z)>=0?"y":"x";q[z]+=$[te]*K})}return q}function dY(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=r.boundary,i=r.rootBoundary,l=r.padding,u=r.flipVariations,d=r.allowedAutoPlacements,m=d===void 0?Ib:d,f=So(s),h=f?u?WS:WS.filter(function(b){return So(b)===f}):$c,g=h.filter(function(b){return m.indexOf(b)>=0});g.length===0&&(g=h);var x=g.reduce(function(b,v){return b[v]=wc(e,{placement:v,boundary:a,rootBoundary:i,padding:l})[Ts(v)],b},{});return Object.keys(x).sort(function(b,v){return x[b]-x[v]})}function fY(e){if(Ts(e)===Rb)return[];var t=bd(e);return[YS(e),t,YS(t)]}function mY(e){var t=e.state,r=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,l=r.altAxis,u=l===void 0?!0:l,d=r.fallbackPlacements,m=r.padding,f=r.boundary,h=r.rootBoundary,g=r.altBoundary,x=r.flipVariations,b=x===void 0?!0:x,v=r.allowedAutoPlacements,w=t.options.placement,C=Ts(w),j=C===w,_=d||(j||!b?[bd(w)]:fY(w)),k=[w].concat(_).reduce(function(Ne,ye){return Ne.concat(Ts(ye)===Rb?dY(t,{placement:ye,boundary:f,rootBoundary:h,padding:m,flipVariations:b,allowedAutoPlacements:v}):ye)},[]),D=t.rects.reference,A=t.rects.popper,T=new Map,I=!0,L=k[0],q=0;q<k.length;q++){var O=k[q],$=Ts(O),z=So(O)===wo,K=[jn,ts].indexOf($)>=0,te=K?"width":"height",se=wc(t,{placement:O,boundary:f,rootBoundary:h,altBoundary:g,padding:m}),W=K?z?rs:Sn:z?ts:jn;D[te]>A[te]&&(W=bd(W));var M=bd(W),Y=[];if(i&&Y.push(se[$]<=0),u&&Y.push(se[W]<=0,se[M]<=0),Y.every(function(Ne){return Ne})){L=O,I=!1;break}T.set(O,Y)}if(I)for(var P=b?3:1,G=function(ye){var B=k.find(function(re){var X=T.get(re);if(X)return X.slice(0,ye).every(function(U){return U})});if(B)return L=B,"break"},Z=P;Z>0;Z--){var F=G(Z);if(F==="break")break}t.placement!==L&&(t.modifiersData[s]._skip=!0,t.placement=L,t.reset=!0)}}const hY={name:"flip",enabled:!0,phase:"main",fn:mY,requiresIfExists:["offset"],data:{_skip:!1}};function QS(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function XS(e){return[jn,rs,ts,Sn].some(function(t){return e[t]>=0})}function pY(e){var t=e.state,r=e.name,s=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,l=wc(t,{elementContext:"reference"}),u=wc(t,{altBoundary:!0}),d=QS(l,s),m=QS(u,a,i),f=XS(d),h=XS(m);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:f,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":h})}const gY={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pY};function xY(e,t,r){var s=Ts(e),a=[Sn,jn].indexOf(s)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=i[0],u=i[1];return l=l||0,u=(u||0)*a,[Sn,rs].indexOf(s)>=0?{x:u,y:l}:{x:l,y:u}}function yY(e){var t=e.state,r=e.options,s=e.name,a=r.offset,i=a===void 0?[0,0]:a,l=Ib.reduce(function(f,h){return f[h]=xY(h,t.rects,i),f},{}),u=l[t.placement],d=u.x,m=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=m),t.modifiersData[s]=l}const vY={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yY};function bY(e){var t=e.state,r=e.name;t.modifiersData[r]=$T({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const wY={name:"popperOffsets",enabled:!0,phase:"read",fn:bY,data:{}};function NY(e){return e==="x"?"y":"x"}function jY(e){var t=e.state,r=e.options,s=e.name,a=r.mainAxis,i=a===void 0?!0:a,l=r.altAxis,u=l===void 0?!1:l,d=r.boundary,m=r.rootBoundary,f=r.altBoundary,h=r.padding,g=r.tether,x=g===void 0?!0:g,b=r.tetherOffset,v=b===void 0?0:b,w=wc(t,{boundary:d,rootBoundary:m,padding:h,altBoundary:f}),C=Ts(t.placement),j=So(t.placement),_=!j,k=Lb(C),D=NY(k),A=t.modifiersData.popperOffsets,T=t.rects.reference,I=t.rects.popper,L=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,q=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(A){if(i){var z,K=k==="y"?jn:Sn,te=k==="y"?ts:rs,se=k==="y"?"height":"width",W=A[k],M=W+w[K],Y=W-w[te],P=x?-I[se]/2:0,G=j===wo?T[se]:I[se],Z=j===wo?-I[se]:-T[se],F=t.elements.arrow,Ne=x&&F?Ob(F):{width:0,height:0},ye=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:IT(),B=ye[K],re=ye[te],X=Ul(0,T[se],Ne[se]),U=_?T[se]/2-P-X-B-q.mainAxis:G-X-B-q.mainAxis,ne=_?-T[se]/2+P+X+re+q.mainAxis:Z+X+re+q.mainAxis,pe=t.elements.arrow&&Fc(t.elements.arrow),xe=pe?k==="y"?pe.clientTop||0:pe.clientLeft||0:0,ke=(z=O==null?void 0:O[k])!=null?z:0,ze=W+U-ke-xe,He=W+ne-ke,it=Ul(x?af(M,ze):M,W,x?ci(Y,He):Y);A[k]=it,$[k]=it-W}if(u){var Ge,rt=k==="x"?jn:Sn,mt=k==="x"?ts:rs,et=A[D],ve=D==="y"?"height":"width",he=et+w[rt],ce=et-w[mt],Ee=[jn,Sn].indexOf(C)!==-1,Ue=(Ge=O==null?void 0:O[D])!=null?Ge:0,ie=Ee?he:et-T[ve]-I[ve]-Ue+q.altAxis,be=Ee?et+T[ve]+I[ve]-Ue-q.altAxis:ce,me=x&&Ee?VV(ie,et,be):Ul(x?ie:he,et,x?be:ce);A[D]=me,$[D]=me-et}t.modifiersData[s]=$}}const SY={name:"preventOverflow",enabled:!0,phase:"main",fn:jY,requiresIfExists:["offset"]};function kY(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function CY(e){return e===Bn(e)||!Ps(e)?$b(e):kY(e)}function _Y(e){var t=e.getBoundingClientRect(),r=No(t.width)/e.offsetWidth||1,s=No(t.height)/e.offsetHeight||1;return r!==1||s!==1}function EY(e,t,r){r===void 0&&(r=!1);var s=Ps(t),a=Ps(t)&&_Y(t),i=Ma(t),l=jo(e,a,r),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!r)&&((Ea(t)!=="body"||Bb(i))&&(u=CY(t)),Ps(t)?(d=jo(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=Fb(i))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function DY(e){var t=new Map,r=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(u){if(!r.has(u)){var d=t.get(u);d&&a(d)}}),s.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),s}function AY(e){var t=DY(e);return UV.reduce(function(r,s){return r.concat(t.filter(function(a){return a.phase===s}))},[])}function TY(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function PY(e){var t=e.reduce(function(r,s){var a=r[s.name];return r[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,r},{});return Object.keys(t).map(function(r){return t[r]})}var JS={placement:"bottom",modifiers:[],strategy:"absolute"};function ZS(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function RY(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,s=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?JS:a;return function(u,d,m){m===void 0&&(m=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},JS,i),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},h=[],g=!1,x={state:f,setOptions:function(C){var j=typeof C=="function"?C(f.options):C;v(),f.options=Object.assign({},i,f.options,j),f.scrollParents={reference:ji(u)?Wl(u):u.contextElement?Wl(u.contextElement):[],popper:Wl(d)};var _=AY(PY([].concat(s,f.options.modifiers)));return f.orderedModifiers=_.filter(function(k){return k.enabled}),b(),x.update()},forceUpdate:function(){if(!g){var C=f.elements,j=C.reference,_=C.popper;if(ZS(j,_)){f.rects={reference:EY(j,Fc(_),f.options.strategy==="fixed"),popper:Ob(_)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(q){return f.modifiersData[q.name]=Object.assign({},q.data)});for(var k=0;k<f.orderedModifiers.length;k++){if(f.reset===!0){f.reset=!1,k=-1;continue}var D=f.orderedModifiers[k],A=D.fn,T=D.options,I=T===void 0?{}:T,L=D.name;typeof A=="function"&&(f=A({state:f,options:I,name:L,instance:x})||f)}}}},update:TY(function(){return new Promise(function(w){x.forceUpdate(),w(f)})}),destroy:function(){v(),g=!0}};if(!ZS(u,d))return x;x.setOptions(m).then(function(w){!g&&m.onFirstUpdate&&m.onFirstUpdate(w)});function b(){f.orderedModifiers.forEach(function(w){var C=w.name,j=w.options,_=j===void 0?{}:j,k=w.effect;if(typeof k=="function"){var D=k({state:f,name:C,instance:x,options:_}),A=function(){};h.push(D||A)}})}function v(){h.forEach(function(w){return w()}),h=[]}return x}}var IY=RY({defaultModifiers:[gY,wY,tY,nY,vY,hY,SY,XV]}),ek=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},MY={name:"applyStyles",enabled:!1},OY={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var s=r.elements,a=s.reference,i=s.popper;if("removeAttribute"in a){var l=(a.getAttribute("aria-describedby")||"").split(",").filter(function(u){return u.trim()!==i.id});l.length?a.setAttribute("aria-describedby",l.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,s=t.state,a=s.elements,i=a.popper,l=a.reference,u=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&u==="tooltip"&&"setAttribute"in l){var d=l.getAttribute("aria-describedby");if(d&&d.split(",").indexOf(i.id)!==-1)return;l.setAttribute("aria-describedby",d?d+","+i.id:i.id)}}},LY=[];function $Y(e,t,r){var s=r===void 0?{}:r,a=s.enabled,i=a===void 0?!0:a,l=s.placement,u=l===void 0?"bottom":l,d=s.strategy,m=d===void 0?"absolute":d,f=s.modifiers,h=f===void 0?LY:f,g=Ff(s,["enabled","placement","strategy","modifiers"]),x=N.useRef(),b=N.useCallback(function(){var k;(k=x.current)==null||k.update()},[]),v=N.useCallback(function(){var k;(k=x.current)==null||k.forceUpdate()},[]),w=PV(N.useState({placement:u,update:b,forceUpdate:v,attributes:{},styles:{popper:ek(m),arrow:{}}})),C=w[0],j=w[1],_=N.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(D){var A=D.state,T={},I={};Object.keys(A.elements).forEach(function(L){T[L]=A.styles[L],I[L]=A.attributes[L]}),j({state:A,styles:T,attributes:I,update:b,forceUpdate:v,placement:A.placement})}}},[b,v,j]);return N.useEffect(function(){!x.current||!i||x.current.setOptions({placement:u,strategy:m,modifiers:[].concat(h,[_,MY])})},[m,u,_,i]),N.useEffect(function(){if(!(!i||e==null||t==null))return x.current=IY(e,t,dr({},g,{placement:u,strategy:m,modifiers:[].concat(h,[OY,_])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,j(function(k){return dr({},k,{attributes:{},styles:{popper:ek(m)}})}))}},[i,e,t]),C}function FY(e,t,r,s){var a=s&&typeof s!="boolean"?s.capture:s;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function Ml(e,t,r,s){return DV(e,t,r,s),function(){FY(e,t,r,s)}}var ag,tk;function BY(){if(tk)return ag;tk=1;var e=function(){};return ag=e,ag}var zY=BY();const GY=qr(zY);function qY(e){return e&&"setState"in e?yv.findDOMNode(e):e??null}const UY=function(e){return Lc(qY(e))};var WY=27,rk=function(){};function HY(e){return e.button===0}function VY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var nk=function(t){return t&&("current"in t?t.current:t)};function YY(e,t,r){var s=r===void 0?{}:r,a=s.disabled,i=s.clickTrigger,l=i===void 0?"click":i,u=N.useRef(!1),d=t||rk,m=N.useCallback(function(g){var x,b=nk(e);GY(!!b,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),u.current=!b||VY(g)||!HY(g)||!!vc(b,(x=g.composedPath==null?void 0:g.composedPath()[0])!=null?x:g.target)},[e]),f=qS(function(g){u.current||d(g)}),h=qS(function(g){g.keyCode===WY&&d(g)});N.useEffect(function(){if(!(a||e==null)){var g=window.event,x=UY(nk(e)),b=Ml(x,l,m,!0),v=Ml(x,l,function(j){if(j===g){g=void 0;return}f(j)}),w=Ml(x,"keyup",function(j){if(j===g){g=void 0;return}h(j)}),C=[];return"ontouchstart"in x.documentElement&&(C=[].slice.call(x.body.children).map(function(j){return Ml(j,"mousemove",rk)})),function(){b(),v(),w(),C.forEach(function(j){return j()})}}},[e,a,l,m,f,h])}function KY(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function QY(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function XY(e){var t,r,s,a,i=e.enabled,l=e.enableEvents,u=e.placement,d=e.flip,m=e.offset,f=e.fixed,h=e.containerPadding,g=e.arrowElement,x=e.popperConfig,b=x===void 0?{}:x,v=KY(b.modifiers);return dr({},b,{placement:u,enabled:i,strategy:f?"fixed":b.strategy,modifiers:QY(dr({},v,{eventListeners:{enabled:l},preventOverflow:dr({},v.preventOverflow,{options:h?dr({padding:h},(t=v.preventOverflow)==null?void 0:t.options):(r=v.preventOverflow)==null?void 0:r.options}),offset:{options:dr({offset:m},(s=v.offset)==null?void 0:s.options)},arrow:dr({},v.arrow,{enabled:!!g,options:dr({},(a=v.arrow)==null?void 0:a.options,{element:g})}),flip:dr({enabled:!!d},v.flip)}))})}function JY(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function ZY(e,t){e.classList?e.classList.add(t):JY(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function sk(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function eK(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=sk(e.className,t):e.setAttribute("class",sk(e.className&&e.className.baseVal||"",t))}var cd;function zb(e){if((!cd&&cd!==0||e)&&Pb){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),cd=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return cd}var ig=function(t){var r;return typeof document>"u"?null:t==null?Lc().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function ak(e,t){var r=N.useState(function(){return ig(e)}),s=r[0],a=r[1];if(!s){var i=ig(e);i&&a(i)}return N.useEffect(function(){},[t,s]),N.useEffect(function(){var l=ig(e);l!==s&&a(l)},[e,s]),s}const ik=e=>!e||typeof e=="function"?e:t=>{e.current=t};function tK(e,t){const r=ik(e),s=ik(t);return a=>{r&&r(a),s&&s(a)}}function rK(e,t){return N.useMemo(()=>tK(e,t),[e,t])}var Gb=V.forwardRef(function(e,t){var r=e.flip,s=e.offset,a=e.placement,i=e.containerPadding,l=i===void 0?5:i,u=e.popperConfig,d=u===void 0?{}:u,m=e.transition,f=US(),h=f[0],g=f[1],x=US(),b=x[0],v=x[1],w=rK(g,t),C=ak(e.container),j=ak(e.target),_=N.useState(!e.show),k=_[0],D=_[1],A=$Y(j,h,XY({placement:a,enableEvents:!!e.show,containerPadding:l||5,flip:r,offset:s,arrowElement:b,popperConfig:d})),T=A.styles,I=A.attributes,L=Ff(A,["styles","attributes"]);e.show?k&&D(!1):!e.transition&&!k&&D(!0);var q=function(){D(!0),e.onExited&&e.onExited.apply(e,arguments)},O=e.show||m&&!k;if(YY(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!O)return null;var $=e.children(dr({},L,{show:!!e.show,props:dr({},I.popper,{style:T.popper,ref:w}),arrowProps:dr({},I.arrow,{style:T.arrow,ref:v})}));if(m){var z=e.onExit,K=e.onExiting,te=e.onEnter,se=e.onEntering,W=e.onEntered;$=V.createElement(m,{in:e.show,appear:!0,onExit:z,onExiting:K,onExited:q,onEnter:te,onEntering:se,onEntered:W},$)}return C?yv.createPortal($,C):null});Gb.displayName="Overlay";Gb.propTypes={show:Oe.bool,placement:Oe.oneOf(Ib),target:Oe.any,container:Oe.any,flip:Oe.bool,children:Oe.func.isRequired,containerPadding:Oe.number,popperConfig:Oe.object,rootClose:Oe.bool,rootCloseEvent:Oe.oneOf(["click","mousedown"]),rootCloseDisabled:Oe.bool,onHide:function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];if(t.rootClose){var i;return(i=Oe.func).isRequired.apply(i,[t].concat(s))}return Oe.func.apply(Oe,[t].concat(s))},transition:Oe.elementType,onEnter:Oe.func,onEntering:Oe.func,onEntered:Oe.func,onExit:Oe.func,onExiting:Oe.func,onExited:Oe.func};var og,ok;function nK(){if(ok)return og;ok=1;function e(){this.__data__=[],this.size=0}return og=e,og}var lg,lk;function qf(){if(lk)return lg;lk=1;var e=Ic();function t(r,s){for(var a=r.length;a--;)if(e(r[a][0],s))return a;return-1}return lg=t,lg}var cg,ck;function sK(){if(ck)return cg;ck=1;var e=qf(),t=Array.prototype,r=t.splice;function s(a){var i=this.__data__,l=e(i,a);if(l<0)return!1;var u=i.length-1;return l==u?i.pop():r.call(i,l,1),--this.size,!0}return cg=s,cg}var ug,uk;function aK(){if(uk)return ug;uk=1;var e=qf();function t(r){var s=this.__data__,a=e(s,r);return a<0?void 0:s[a][1]}return ug=t,ug}var dg,dk;function iK(){if(dk)return dg;dk=1;var e=qf();function t(r){return e(this.__data__,r)>-1}return dg=t,dg}var fg,fk;function oK(){if(fk)return fg;fk=1;var e=qf();function t(r,s){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,s])):a[i][1]=s,this}return fg=t,fg}var mg,mk;function Uf(){if(mk)return mg;mk=1;var e=nK(),t=sK(),r=aK(),s=iK(),a=oK();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var m=l[u];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,mg=i,mg}var hg,hk;function lK(){if(hk)return hg;hk=1;var e=Uf();function t(){this.__data__=new e,this.size=0}return hg=t,hg}var pg,pk;function cK(){if(pk)return pg;pk=1;function e(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}return pg=e,pg}var gg,gk;function uK(){if(gk)return gg;gk=1;function e(t){return this.__data__.get(t)}return gg=e,gg}var xg,xk;function dK(){if(xk)return xg;xk=1;function e(t){return this.__data__.has(t)}return xg=e,xg}var yg,yk;function fK(){if(yk)return yg;yk=1;var e=$s(),t=e["__core-js_shared__"];return yg=t,yg}var vg,vk;function mK(){if(vk)return vg;vk=1;var e=fK(),t=function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function r(s){return!!t&&t in s}return vg=r,vg}var bg,bk;function FT(){if(bk)return bg;bk=1;var e=Function.prototype,t=e.toString;function r(s){if(s!=null){try{return t.call(s)}catch{}try{return s+""}catch{}}return""}return bg=r,bg}var wg,wk;function hK(){if(wk)return wg;wk=1;var e=Eb(),t=mK(),r=ea(),s=FT(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,d=l.toString,m=u.hasOwnProperty,f=RegExp("^"+d.call(m).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||t(g))return!1;var x=e(g)?f:i;return x.test(s(g))}return wg=h,wg}var Ng,Nk;function pK(){if(Nk)return Ng;Nk=1;function e(t,r){return t==null?void 0:t[r]}return Ng=e,Ng}var jg,jk;function Ei(){if(jk)return jg;jk=1;var e=hK(),t=pK();function r(s,a){var i=t(s,a);return e(i)?i:void 0}return jg=r,jg}var Sg,Sk;function qb(){if(Sk)return Sg;Sk=1;var e=Ei(),t=$s(),r=e(t,"Map");return Sg=r,Sg}var kg,kk;function Wf(){if(kk)return kg;kk=1;var e=Ei(),t=e(Object,"create");return kg=t,kg}var Cg,Ck;function gK(){if(Ck)return Cg;Ck=1;var e=Wf();function t(){this.__data__=e?e(null):{},this.size=0}return Cg=t,Cg}var _g,_k;function xK(){if(_k)return _g;_k=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return _g=e,_g}var Eg,Ek;function yK(){if(Ek)return Eg;Ek=1;var e=Wf(),t="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(i){var l=this.__data__;if(e){var u=l[i];return u===t?void 0:u}return s.call(l,i)?l[i]:void 0}return Eg=a,Eg}var Dg,Dk;function vK(){if(Dk)return Dg;Dk=1;var e=Wf(),t=Object.prototype,r=t.hasOwnProperty;function s(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return Dg=s,Dg}var Ag,Ak;function bK(){if(Ak)return Ag;Ak=1;var e=Wf(),t="__lodash_hash_undefined__";function r(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=e&&a===void 0?t:a,this}return Ag=r,Ag}var Tg,Tk;function wK(){if(Tk)return Tg;Tk=1;var e=gK(),t=xK(),r=yK(),s=vK(),a=bK();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var m=l[u];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,Tg=i,Tg}var Pg,Pk;function NK(){if(Pk)return Pg;Pk=1;var e=wK(),t=Uf(),r=qb();function s(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Pg=s,Pg}var Rg,Rk;function jK(){if(Rk)return Rg;Rk=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Rg=e,Rg}var Ig,Ik;function Hf(){if(Ik)return Ig;Ik=1;var e=jK();function t(r,s){var a=r.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return Ig=t,Ig}var Mg,Mk;function SK(){if(Mk)return Mg;Mk=1;var e=Hf();function t(r){var s=e(this,r).delete(r);return this.size-=s?1:0,s}return Mg=t,Mg}var Og,Ok;function kK(){if(Ok)return Og;Ok=1;var e=Hf();function t(r){return e(this,r).get(r)}return Og=t,Og}var Lg,Lk;function CK(){if(Lk)return Lg;Lk=1;var e=Hf();function t(r){return e(this,r).has(r)}return Lg=t,Lg}var $g,$k;function _K(){if($k)return $g;$k=1;var e=Hf();function t(r,s){var a=e(this,r),i=a.size;return a.set(r,s),this.size+=a.size==i?0:1,this}return $g=t,$g}var Fg,Fk;function Ub(){if(Fk)return Fg;Fk=1;var e=NK(),t=SK(),r=kK(),s=CK(),a=_K();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var m=l[u];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,Fg=i,Fg}var Bg,Bk;function EK(){if(Bk)return Bg;Bk=1;var e=Uf(),t=qb(),r=Ub(),s=200;function a(i,l){var u=this.__data__;if(u instanceof e){var d=u.__data__;if(!t||d.length<s-1)return d.push([i,l]),this.size=++u.size,this;u=this.__data__=new r(d)}return u.set(i,l),this.size=u.size,this}return Bg=a,Bg}var zg,zk;function Wb(){if(zk)return zg;zk=1;var e=Uf(),t=lK(),r=cK(),s=uK(),a=dK(),i=EK();function l(u){var d=this.__data__=new e(u);this.size=d.size}return l.prototype.clear=t,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=i,zg=l,zg}var Gg,Gk;function DK(){if(Gk)return Gg;Gk=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Gg=t,Gg}var qg,qk;function AK(){if(qk)return qg;qk=1;function e(t){return this.__data__.has(t)}return qg=e,qg}var Ug,Uk;function TK(){if(Uk)return Ug;Uk=1;var e=Ub(),t=DK(),r=AK();function s(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new e;++i<l;)this.add(a[i])}return s.prototype.add=s.prototype.push=t,s.prototype.has=r,Ug=s,Ug}var Wg,Wk;function PK(){if(Wk)return Wg;Wk=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(r(t[s],s,t))return!0;return!1}return Wg=e,Wg}var Hg,Hk;function RK(){if(Hk)return Hg;Hk=1;function e(t,r){return t.has(r)}return Hg=e,Hg}var Vg,Vk;function BT(){if(Vk)return Vg;Vk=1;var e=TK(),t=PK(),r=RK(),s=1,a=2;function i(l,u,d,m,f,h){var g=d&s,x=l.length,b=u.length;if(x!=b&&!(g&&b>x))return!1;var v=h.get(l),w=h.get(u);if(v&&w)return v==u&&w==l;var C=-1,j=!0,_=d&a?new e:void 0;for(h.set(l,u),h.set(u,l);++C<x;){var k=l[C],D=u[C];if(m)var A=g?m(D,k,C,u,l,h):m(k,D,C,l,u,h);if(A!==void 0){if(A)continue;j=!1;break}if(_){if(!t(u,function(T,I){if(!r(_,I)&&(k===T||f(k,T,d,m,h)))return _.push(I)})){j=!1;break}}else if(!(k===D||f(k,D,d,m,h))){j=!1;break}}return h.delete(l),h.delete(u),j}return Vg=i,Vg}var Yg,Yk;function zT(){if(Yk)return Yg;Yk=1;var e=$s(),t=e.Uint8Array;return Yg=t,Yg}var Kg,Kk;function IK(){if(Kk)return Kg;Kk=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a,i){s[++r]=[i,a]}),s}return Kg=e,Kg}var Qg,Qk;function MK(){if(Qk)return Qg;Qk=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a){s[++r]=a}),s}return Qg=e,Qg}var Xg,Xk;function OK(){if(Xk)return Xg;Xk=1;var e=Bo(),t=zT(),r=Ic(),s=BT(),a=IK(),i=MK(),l=1,u=2,d="[object Boolean]",m="[object Date]",f="[object Error]",h="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",v="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",j="[object DataView]",_=e?e.prototype:void 0,k=_?_.valueOf:void 0;function D(A,T,I,L,q,O,$){switch(I){case j:if(A.byteLength!=T.byteLength||A.byteOffset!=T.byteOffset)return!1;A=A.buffer,T=T.buffer;case C:return!(A.byteLength!=T.byteLength||!O(new t(A),new t(T)));case d:case m:case g:return r(+A,+T);case f:return A.name==T.name&&A.message==T.message;case x:case v:return A==T+"";case h:var z=a;case b:var K=L&l;if(z||(z=i),A.size!=T.size&&!K)return!1;var te=$.get(A);if(te)return te==T;L|=u,$.set(A,T);var se=s(z(A),z(T),L,q,O,$);return $.delete(A),se;case w:if(k)return k.call(A)==k.call(T)}return!1}return Xg=D,Xg}var Jg,Jk;function Hb(){if(Jk)return Jg;Jk=1;function e(t,r){for(var s=-1,a=r.length,i=t.length;++s<a;)t[i+s]=r[s];return t}return Jg=e,Jg}var Zg,Zk;function ns(){if(Zk)return Zg;Zk=1;var e=Array.isArray;return Zg=e,Zg}var e0,eC;function GT(){if(eC)return e0;eC=1;var e=Hb(),t=ns();function r(s,a,i){var l=a(s);return t(s)?l:e(l,i(s))}return e0=r,e0}var t0,tC;function LK(){if(tC)return t0;tC=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=0,l=[];++s<a;){var u=t[s];r(u,s,t)&&(l[i++]=u)}return l}return t0=e,t0}var r0,rC;function qT(){if(rC)return r0;rC=1;function e(){return[]}return r0=e,r0}var n0,nC;function Vb(){if(nC)return n0;nC=1;var e=LK(),t=qT(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(l){return l==null?[]:(l=Object(l),e(a(l),function(u){return s.call(l,u)}))}:t;return n0=i,n0}var s0,sC;function $K(){if(sC)return s0;sC=1;function e(t,r){for(var s=-1,a=Array(t);++s<t;)a[s]=r(s);return a}return s0=e,s0}var a0,aC;function FK(){if(aC)return a0;aC=1;var e=zo(),t=Ia(),r="[object Arguments]";function s(a){return t(a)&&e(a)==r}return a0=s,a0}var i0,iC;function Yb(){if(iC)return i0;iC=1;var e=FK(),t=Ia(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(l){return t(l)&&s.call(l,"callee")&&!a.call(l,"callee")};return i0=i,i0}var Ol={exports:{}},o0,oC;function BK(){if(oC)return o0;oC=1;function e(){return!1}return o0=e,o0}Ol.exports;var lC;function Vf(){return lC||(lC=1,function(e,t){var r=$s(),s=BK(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,u=l?r.Buffer:void 0,d=u?u.isBuffer:void 0,m=d||s;e.exports=m}(Ol,Ol.exports)),Ol.exports}var l0,cC;function zK(){if(cC)return l0;cC=1;var e=zo(),t=Db(),r=Ia(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",m="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",v="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",j="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",D="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",L="[object Uint16Array]",q="[object Uint32Array]",O={};O[j]=O[_]=O[k]=O[D]=O[A]=O[T]=O[I]=O[L]=O[q]=!0,O[s]=O[a]=O[w]=O[i]=O[C]=O[l]=O[u]=O[d]=O[m]=O[f]=O[h]=O[g]=O[x]=O[b]=O[v]=!1;function $(z){return r(z)&&t(z.length)&&!!O[e(z)]}return l0=$,l0}var c0,uC;function Yf(){if(uC)return c0;uC=1;function e(t){return function(r){return t(r)}}return c0=e,c0}var Ll={exports:{}};Ll.exports;var dC;function Kb(){return dC||(dC=1,function(e,t){var r=jT(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&r.process,u=function(){try{var d=a&&a.require&&a.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();e.exports=u}(Ll,Ll.exports)),Ll.exports}var u0,fC;function Qb(){if(fC)return u0;fC=1;var e=zK(),t=Yf(),r=Kb(),s=r&&r.isTypedArray,a=s?t(s):e;return u0=a,u0}var d0,mC;function UT(){if(mC)return d0;mC=1;var e=$K(),t=Yb(),r=ns(),s=Vf(),a=Ab(),i=Qb(),l=Object.prototype,u=l.hasOwnProperty;function d(m,f){var h=r(m),g=!h&&t(m),x=!h&&!g&&s(m),b=!h&&!g&&!x&&i(m),v=h||g||x||b,w=v?e(m.length,String):[],C=w.length;for(var j in m)(f||u.call(m,j))&&!(v&&(j=="length"||x&&(j=="offset"||j=="parent")||b&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||a(j,C)))&&w.push(j);return w}return d0=d,d0}var f0,hC;function Xb(){if(hC)return f0;hC=1;var e=Object.prototype;function t(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||e;return r===a}return f0=t,f0}var m0,pC;function WT(){if(pC)return m0;pC=1;function e(t,r){return function(s){return t(r(s))}}return m0=e,m0}var h0,gC;function GK(){if(gC)return h0;gC=1;var e=WT(),t=e(Object.keys,Object);return h0=t,h0}var p0,xC;function qK(){if(xC)return p0;xC=1;var e=Xb(),t=GK(),r=Object.prototype,s=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var l=[];for(var u in Object(i))s.call(i,u)&&u!="constructor"&&l.push(u);return l}return p0=a,p0}var g0,yC;function Bc(){if(yC)return g0;yC=1;var e=UT(),t=qK(),r=Mc();function s(a){return r(a)?e(a):t(a)}return g0=s,g0}var x0,vC;function HT(){if(vC)return x0;vC=1;var e=GT(),t=Vb(),r=Bc();function s(a){return e(a,r,t)}return x0=s,x0}var y0,bC;function UK(){if(bC)return y0;bC=1;var e=HT(),t=1,r=Object.prototype,s=r.hasOwnProperty;function a(i,l,u,d,m,f){var h=u&t,g=e(i),x=g.length,b=e(l),v=b.length;if(x!=v&&!h)return!1;for(var w=x;w--;){var C=g[w];if(!(h?C in l:s.call(l,C)))return!1}var j=f.get(i),_=f.get(l);if(j&&_)return j==l&&_==i;var k=!0;f.set(i,l),f.set(l,i);for(var D=h;++w<x;){C=g[w];var A=i[C],T=l[C];if(d)var I=h?d(T,A,C,l,i,f):d(A,T,C,i,l,f);if(!(I===void 0?A===T||m(A,T,u,d,f):I)){k=!1;break}D||(D=C=="constructor")}if(k&&!D){var L=i.constructor,q=l.constructor;L!=q&&"constructor"in i&&"constructor"in l&&!(typeof L=="function"&&L instanceof L&&typeof q=="function"&&q instanceof q)&&(k=!1)}return f.delete(i),f.delete(l),k}return y0=a,y0}var v0,wC;function WK(){if(wC)return v0;wC=1;var e=Ei(),t=$s(),r=e(t,"DataView");return v0=r,v0}var b0,NC;function HK(){if(NC)return b0;NC=1;var e=Ei(),t=$s(),r=e(t,"Promise");return b0=r,b0}var w0,jC;function VK(){if(jC)return w0;jC=1;var e=Ei(),t=$s(),r=e(t,"Set");return w0=r,w0}var N0,SC;function YK(){if(SC)return N0;SC=1;var e=Ei(),t=$s(),r=e(t,"WeakMap");return N0=r,N0}var j0,kC;function Kf(){if(kC)return j0;kC=1;var e=WK(),t=qb(),r=HK(),s=VK(),a=YK(),i=zo(),l=FT(),u="[object Map]",d="[object Object]",m="[object Promise]",f="[object Set]",h="[object WeakMap]",g="[object DataView]",x=l(e),b=l(t),v=l(r),w=l(s),C=l(a),j=i;return(e&&j(new e(new ArrayBuffer(1)))!=g||t&&j(new t)!=u||r&&j(r.resolve())!=m||s&&j(new s)!=f||a&&j(new a)!=h)&&(j=function(_){var k=i(_),D=k==d?_.constructor:void 0,A=D?l(D):"";if(A)switch(A){case x:return g;case b:return u;case v:return m;case w:return f;case C:return h}return k}),j0=j,j0}var S0,CC;function KK(){if(CC)return S0;CC=1;var e=Wb(),t=BT(),r=OK(),s=UK(),a=Kf(),i=ns(),l=Vf(),u=Qb(),d=1,m="[object Arguments]",f="[object Array]",h="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(v,w,C,j,_,k){var D=i(v),A=i(w),T=D?f:a(v),I=A?f:a(w);T=T==m?h:T,I=I==m?h:I;var L=T==h,q=I==h,O=T==I;if(O&&l(v)){if(!l(w))return!1;D=!0,L=!1}if(O&&!L)return k||(k=new e),D||u(v)?t(v,w,C,j,_,k):r(v,w,T,C,j,_,k);if(!(C&d)){var $=L&&x.call(v,"__wrapped__"),z=q&&x.call(w,"__wrapped__");if($||z){var K=$?v.value():v,te=z?w.value():w;return k||(k=new e),_(K,te,C,j,k)}}return O?(k||(k=new e),s(v,w,C,j,_,k)):!1}return S0=b,S0}var k0,_C;function Jb(){if(_C)return k0;_C=1;var e=KK(),t=Ia();function r(s,a,i,l,u){return s===a?!0:s==null||a==null||!t(s)&&!t(a)?s!==s&&a!==a:e(s,a,i,l,r,u)}return k0=r,k0}var C0,EC;function QK(){if(EC)return C0;EC=1;var e=Jb();function t(r,s){return e(r,s)}return C0=t,C0}var XK=QK();const JK=qr(XK);function _0(e,t){var r=Tb(e);return r?r.innerHeight:li(e).height}function VT(e,t,r){e.closest&&!r&&e.closest(t);var s=e;do{if(CV(s,t))return s;s=s.parentElement}while(s&&s!==r&&s.nodeType===document.ELEMENT_NODE);return null}var E0,DC;function ZK(){if(DC)return E0;DC=1;function e(t,r,s,a){for(var i=t.length,l=s+(a?1:-1);a?l--:++l<i;)if(r(t[l],l,t))return l;return-1}return E0=e,E0}var D0,AC;function eQ(){if(AC)return D0;AC=1;var e=Wb(),t=Jb(),r=1,s=2;function a(i,l,u,d){var m=u.length,f=m,h=!d;if(i==null)return!f;for(i=Object(i);m--;){var g=u[m];if(h&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++m<f;){g=u[m];var x=g[0],b=i[x],v=g[1];if(h&&g[2]){if(b===void 0&&!(x in i))return!1}else{var w=new e;if(d)var C=d(b,v,x,i,l,w);if(!(C===void 0?t(v,b,r|s,d,w):C))return!1}}return!0}return D0=a,D0}var A0,TC;function YT(){if(TC)return A0;TC=1;var e=ea();function t(r){return r===r&&!e(r)}return A0=t,A0}var T0,PC;function tQ(){if(PC)return T0;PC=1;var e=YT(),t=Bc();function r(s){for(var a=t(s),i=a.length;i--;){var l=a[i],u=s[l];a[i]=[l,u,e(u)]}return a}return T0=r,T0}var P0,RC;function KT(){if(RC)return P0;RC=1;function e(t,r){return function(s){return s==null?!1:s[t]===r&&(r!==void 0||t in Object(s))}}return P0=e,P0}var R0,IC;function rQ(){if(IC)return R0;IC=1;var e=eQ(),t=tQ(),r=KT();function s(a){var i=t(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(l){return l===a||e(l,a,i)}}return R0=s,R0}var I0,MC;function Zb(){if(MC)return I0;MC=1;var e=ns(),t=Oc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,l){if(e(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||t(i)?!0:s.test(i)||!r.test(i)||l!=null&&i in Object(l)}return I0=a,I0}var M0,OC;function nQ(){if(OC)return M0;OC=1;var e=Ub(),t="Expected a function";function r(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var l=arguments,u=a?a.apply(this,l):l[0],d=i.cache;if(d.has(u))return d.get(u);var m=s.apply(this,l);return i.cache=d.set(u,m)||d,m};return i.cache=new(r.Cache||e),i}return r.Cache=e,M0=r,M0}var O0,LC;function sQ(){if(LC)return O0;LC=1;var e=nQ(),t=500;function r(s){var a=e(s,function(l){return i.size===t&&i.clear(),l}),i=a.cache;return a}return O0=r,O0}var L0,$C;function aQ(){if($C)return L0;$C=1;var e=sQ(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(l,u,d,m){i.push(d?m.replace(r,"$1"):u||l)}),i});return L0=s,L0}var $0,FC;function ew(){if(FC)return $0;FC=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=Array(a);++s<a;)i[s]=r(t[s],s,t);return i}return $0=e,$0}var F0,BC;function iQ(){if(BC)return F0;BC=1;var e=Bo(),t=ew(),r=ns(),s=Oc(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function l(u){if(typeof u=="string")return u;if(r(u))return t(u,l)+"";if(s(u))return i?i.call(u):"";var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}return F0=l,F0}var B0,zC;function oQ(){if(zC)return B0;zC=1;var e=iQ();function t(r){return r==null?"":e(r)}return B0=t,B0}var z0,GC;function Qf(){if(GC)return z0;GC=1;var e=ns(),t=Zb(),r=aQ(),s=oQ();function a(i,l){return e(i)?i:t(i,l)?[i]:r(s(i))}return z0=a,z0}var G0,qC;function zc(){if(qC)return G0;qC=1;var e=Oc();function t(r){if(typeof r=="string"||e(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return G0=t,G0}var q0,UC;function Xf(){if(UC)return q0;UC=1;var e=Qf(),t=zc();function r(s,a){a=e(a,s);for(var i=0,l=a.length;s!=null&&i<l;)s=s[t(a[i++])];return i&&i==l?s:void 0}return q0=r,q0}var U0,WC;function lQ(){if(WC)return U0;WC=1;var e=Xf();function t(r,s,a){var i=r==null?void 0:e(r,s);return i===void 0?a:i}return U0=t,U0}var W0,HC;function cQ(){if(HC)return W0;HC=1;function e(t,r){return t!=null&&r in Object(t)}return W0=e,W0}var H0,VC;function uQ(){if(VC)return H0;VC=1;var e=Qf(),t=Yb(),r=ns(),s=Ab(),a=Db(),i=zc();function l(u,d,m){d=e(d,u);for(var f=-1,h=d.length,g=!1;++f<h;){var x=i(d[f]);if(!(g=u!=null&&m(u,x)))break;u=u[x]}return g||++f!=h?g:(h=u==null?0:u.length,!!h&&a(h)&&s(x,h)&&(r(u)||t(u)))}return H0=l,H0}var V0,YC;function dQ(){if(YC)return V0;YC=1;var e=cQ(),t=uQ();function r(s,a){return s!=null&&t(s,a,e)}return V0=r,V0}var Y0,KC;function fQ(){if(KC)return Y0;KC=1;var e=Jb(),t=lQ(),r=dQ(),s=Zb(),a=YT(),i=KT(),l=zc(),u=1,d=2;function m(f,h){return s(f)&&a(h)?i(l(f),h):function(g){var x=t(g,f);return x===void 0&&x===h?r(g,f):e(h,x,u|d)}}return Y0=m,Y0}var K0,QC;function Jf(){if(QC)return K0;QC=1;function e(t){return t}return K0=e,K0}var Q0,XC;function mQ(){if(XC)return Q0;XC=1;function e(t){return function(r){return r==null?void 0:r[t]}}return Q0=e,Q0}var X0,JC;function hQ(){if(JC)return X0;JC=1;var e=Xf();function t(r){return function(s){return e(s,r)}}return X0=t,X0}var J0,ZC;function pQ(){if(ZC)return J0;ZC=1;var e=mQ(),t=hQ(),r=Zb(),s=zc();function a(i){return r(i)?e(s(i)):t(i)}return J0=a,J0}var Z0,e_;function Zf(){if(e_)return Z0;e_=1;var e=rQ(),t=fQ(),r=Jf(),s=ns(),a=pQ();function i(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?s(l)?t(l[0],l[1]):e(l):a(l)}return Z0=i,Z0}var ex,t_;function gQ(){if(t_)return ex;t_=1;var e=ZK(),t=Zf(),r=kT(),s=Math.max;function a(i,l,u){var d=i==null?0:i.length;if(!d)return-1;var m=u==null?0:r(u);return m<0&&(m=s(d+m,0)),e(i,t(l,3),m)}return ex=a,ex}var xQ=gQ();const yQ=qr(xQ);var tx,r_;function vQ(){if(r_)return tx;r_=1;var e=Math.ceil,t=Math.max;function r(s,a,i,l){for(var u=-1,d=t(e((a-s)/(i||1)),0),m=Array(d);d--;)m[l?d:++u]=s,s+=i;return m}return tx=r,tx}var rx,n_;function bQ(){if(n_)return rx;n_=1;var e=vQ(),t=zf(),r=ST();function s(a){return function(i,l,u){return u&&typeof u!="number"&&t(i,l,u)&&(l=u=void 0),i=r(i),l===void 0?(l=i,i=0):l=r(l),u=u===void 0?i<l?1:-1:r(u),e(i,l,u,a)}}return rx=s,rx}var nx,s_;function wQ(){if(s_)return nx;s_=1;var e=bQ(),t=e();return nx=t,nx}var NQ=wQ();const jQ=qr(NQ);var a_=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function SQ(e,t){return!!(e===t||a_(e)&&a_(t))}function kQ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!SQ(e[r],t[r]))return!1;return!0}function QT(e,t){t===void 0&&(t=kQ);var r=null;function s(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var l=e.apply(this,a);return r={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){r=null},s}function fv(e,t){var r=Tb(e);return r?r.innerWidth:li(e).width}var sx,i_;function CQ(){if(i_)return sx;i_=1;var e=Bo(),t=Yb(),r=ns(),s=e?e.isConcatSpreadable:void 0;function a(i){return r(i)||t(i)||!!(s&&i&&i[s])}return sx=a,sx}var ax,o_;function XT(){if(o_)return ax;o_=1;var e=Hb(),t=CQ();function r(s,a,i,l,u){var d=-1,m=s.length;for(i||(i=t),u||(u=[]);++d<m;){var f=s[d];a>0&&i(f)?a>1?r(f,a-1,i,l,u):e(u,f):l||(u[u.length]=f)}return u}return ax=r,ax}var ix,l_;function _Q(){if(l_)return ix;l_=1;function e(t){return function(r,s,a){for(var i=-1,l=Object(r),u=a(r),d=u.length;d--;){var m=u[t?d:++i];if(s(l[m],m,l)===!1)break}return r}}return ix=e,ix}var ox,c_;function EQ(){if(c_)return ox;c_=1;var e=_Q(),t=e();return ox=t,ox}var lx,u_;function tw(){if(u_)return lx;u_=1;var e=EQ(),t=Bc();function r(s,a){return s&&e(s,a,t)}return lx=r,lx}var cx,d_;function DQ(){if(d_)return cx;d_=1;var e=Mc();function t(r,s){return function(a,i){if(a==null)return a;if(!e(a))return r(a,i);for(var l=a.length,u=s?l:-1,d=Object(a);(s?u--:++u<l)&&i(d[u],u,d)!==!1;);return a}}return cx=t,cx}var ux,f_;function AQ(){if(f_)return ux;f_=1;var e=tw(),t=DQ(),r=t(e);return ux=r,ux}var dx,m_;function TQ(){if(m_)return dx;m_=1;var e=AQ(),t=Mc();function r(s,a){var i=-1,l=t(s)?Array(s.length):[];return e(s,function(u,d,m){l[++i]=a(u,d,m)}),l}return dx=r,dx}var fx,h_;function PQ(){if(h_)return fx;h_=1;function e(t,r){var s=t.length;for(t.sort(r);s--;)t[s]=t[s].value;return t}return fx=e,fx}var mx,p_;function RQ(){if(p_)return mx;p_=1;var e=Oc();function t(r,s){if(r!==s){var a=r!==void 0,i=r===null,l=r===r,u=e(r),d=s!==void 0,m=s===null,f=s===s,h=e(s);if(!m&&!h&&!u&&r>s||u&&d&&f&&!m&&!h||i&&d&&f||!a&&f||!l)return 1;if(!i&&!u&&!h&&r<s||h&&a&&l&&!i&&!u||m&&a&&l||!d&&l||!f)return-1}return 0}return mx=t,mx}var hx,g_;function IQ(){if(g_)return hx;g_=1;var e=RQ();function t(r,s,a){for(var i=-1,l=r.criteria,u=s.criteria,d=l.length,m=a.length;++i<d;){var f=e(l[i],u[i]);if(f){if(i>=m)return f;var h=a[i];return f*(h=="desc"?-1:1)}}return r.index-s.index}return hx=t,hx}var px,x_;function MQ(){if(x_)return px;x_=1;var e=ew(),t=Xf(),r=Zf(),s=TQ(),a=PQ(),i=Yf(),l=IQ(),u=Jf(),d=ns();function m(f,h,g){h.length?h=e(h,function(v){return d(v)?function(w){return t(w,v.length===1?v[0]:v)}:v}):h=[u];var x=-1;h=e(h,i(r));var b=s(f,function(v,w,C){var j=e(h,function(_){return _(v)});return{criteria:j,index:++x,value:v}});return a(b,function(v,w){return l(v,w,g)})}return px=m,px}var gx,y_;function OQ(){if(y_)return gx;y_=1;function e(t,r,s){switch(s.length){case 0:return t.call(r);case 1:return t.call(r,s[0]);case 2:return t.call(r,s[0],s[1]);case 3:return t.call(r,s[0],s[1],s[2])}return t.apply(r,s)}return gx=e,gx}var xx,v_;function JT(){if(v_)return xx;v_=1;var e=OQ(),t=Math.max;function r(s,a,i){return a=t(a===void 0?s.length-1:a,0),function(){for(var l=arguments,u=-1,d=t(l.length-a,0),m=Array(d);++u<d;)m[u]=l[a+u];u=-1;for(var f=Array(a+1);++u<a;)f[u]=l[u];return f[a]=i(m),e(s,this,f)}}return xx=r,xx}var yx,b_;function LQ(){if(b_)return yx;b_=1;function e(t){return function(){return t}}return yx=e,yx}var vx,w_;function ZT(){if(w_)return vx;w_=1;var e=Ei(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return vx=t,vx}var bx,N_;function $Q(){if(N_)return bx;N_=1;var e=LQ(),t=ZT(),r=Jf(),s=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return bx=s,bx}var wx,j_;function FQ(){if(j_)return wx;j_=1;var e=800,t=16,r=Date.now;function s(a){var i=0,l=0;return function(){var u=r(),d=t-(u-l);if(l=u,d>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return wx=s,wx}var Nx,S_;function eP(){if(S_)return Nx;S_=1;var e=$Q(),t=FQ(),r=t(e);return Nx=r,Nx}var jx,k_;function tP(){if(k_)return jx;k_=1;var e=Jf(),t=JT(),r=eP();function s(a,i){return r(t(a,i,e),a+"")}return jx=s,jx}var Sx,C_;function BQ(){if(C_)return Sx;C_=1;var e=XT(),t=MQ(),r=tP(),s=zf(),a=r(function(i,l){if(i==null)return[];var u=l.length;return u>1&&s(i,l[0],l[1])?l=[]:u>2&&s(l[0],l[1],l[2])&&(l=[l[0]]),t(i,e(l,1),[])});return Sx=a,Sx}var zQ=BQ();const GQ=qr(zQ);function rP(e){return oT(e)||wT(e)||kb(e)||lT()}var kx,__;function qQ(){if(__)return kx;__=1;function e(t){var r=[];if(t!=null)for(var s in Object(t))r.push(s);return r}return kx=e,kx}var Cx,E_;function UQ(){if(E_)return Cx;E_=1;var e=ea(),t=Xb(),r=qQ(),s=Object.prototype,a=s.hasOwnProperty;function i(l){if(!e(l))return r(l);var u=t(l),d=[];for(var m in l)m=="constructor"&&(u||!a.call(l,m))||d.push(m);return d}return Cx=i,Cx}var _x,D_;function em(){if(D_)return _x;D_=1;var e=UT(),t=UQ(),r=Mc();function s(a){return r(a)?e(a,!0):t(a)}return _x=s,_x}var Ex,A_;function WQ(){if(A_)return Ex;A_=1;var e=tP(),t=Ic(),r=zf(),s=em(),a=Object.prototype,i=a.hasOwnProperty,l=e(function(u,d){u=Object(u);var m=-1,f=d.length,h=f>2?d[2]:void 0;for(h&&r(d[0],d[1],h)&&(f=1);++m<f;)for(var g=d[m],x=s(g),b=-1,v=x.length;++b<v;){var w=x[b],C=u[w];(C===void 0||t(C,a[w])&&!i.call(u,w))&&(u[w]=g[w])}return u});return Ex=l,Ex}var HQ=WQ();const VQ=qr(HQ);var Dx,T_;function rw(){if(T_)return Dx;T_=1;var e=ZT();function t(r,s,a){s=="__proto__"&&e?e(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}return Dx=t,Dx}var Ax,P_;function YQ(){if(P_)return Ax;P_=1;var e=rw(),t=tw(),r=Zf();function s(a,i){var l={};return i=r(i,3),t(a,function(u,d,m){e(l,d,i(u,d,m))}),l}return Ax=s,Ax}var KQ=YQ();const QQ=qr(KQ);var Tx,R_;function nP(){if(R_)return Tx;R_=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a&&r(t[s],s,t)!==!1;);return t}return Tx=e,Tx}var Px,I_;function sP(){if(I_)return Px;I_=1;var e=rw(),t=Ic(),r=Object.prototype,s=r.hasOwnProperty;function a(i,l,u){var d=i[l];(!(s.call(i,l)&&t(d,u))||u===void 0&&!(l in i))&&e(i,l,u)}return Px=a,Px}var Rx,M_;function Gc(){if(M_)return Rx;M_=1;var e=sP(),t=rw();function r(s,a,i,l){var u=!i;i||(i={});for(var d=-1,m=a.length;++d<m;){var f=a[d],h=l?l(i[f],s[f],f,i,s):void 0;h===void 0&&(h=s[f]),u?t(i,f,h):e(i,f,h)}return i}return Rx=r,Rx}var Ix,O_;function XQ(){if(O_)return Ix;O_=1;var e=Gc(),t=Bc();function r(s,a){return s&&e(a,t(a),s)}return Ix=r,Ix}var Mx,L_;function JQ(){if(L_)return Mx;L_=1;var e=Gc(),t=em();function r(s,a){return s&&e(a,t(a),s)}return Mx=r,Mx}var $l={exports:{}};$l.exports;var $_;function ZQ(){return $_||($_=1,function(e,t){var r=$s(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i?r.Buffer:void 0,u=l?l.allocUnsafe:void 0;function d(m,f){if(f)return m.slice();var h=m.length,g=u?u(h):new m.constructor(h);return m.copy(g),g}e.exports=d}($l,$l.exports)),$l.exports}var Ox,F_;function eX(){if(F_)return Ox;F_=1;function e(t,r){var s=-1,a=t.length;for(r||(r=Array(a));++s<a;)r[s]=t[s];return r}return Ox=e,Ox}var Lx,B_;function tX(){if(B_)return Lx;B_=1;var e=Gc(),t=Vb();function r(s,a){return e(s,t(s),a)}return Lx=r,Lx}var $x,z_;function tm(){if(z_)return $x;z_=1;var e=WT(),t=e(Object.getPrototypeOf,Object);return $x=t,$x}var Fx,G_;function aP(){if(G_)return Fx;G_=1;var e=Hb(),t=tm(),r=Vb(),s=qT(),a=Object.getOwnPropertySymbols,i=a?function(l){for(var u=[];l;)e(u,r(l)),l=t(l);return u}:s;return Fx=i,Fx}var Bx,q_;function rX(){if(q_)return Bx;q_=1;var e=Gc(),t=aP();function r(s,a){return e(s,t(s),a)}return Bx=r,Bx}var zx,U_;function iP(){if(U_)return zx;U_=1;var e=GT(),t=aP(),r=em();function s(a){return e(a,r,t)}return zx=s,zx}var Gx,W_;function nX(){if(W_)return Gx;W_=1;var e=Object.prototype,t=e.hasOwnProperty;function r(s){var a=s.length,i=new s.constructor(a);return a&&typeof s[0]=="string"&&t.call(s,"index")&&(i.index=s.index,i.input=s.input),i}return Gx=r,Gx}var qx,H_;function nw(){if(H_)return qx;H_=1;var e=zT();function t(r){var s=new r.constructor(r.byteLength);return new e(s).set(new e(r)),s}return qx=t,qx}var Ux,V_;function sX(){if(V_)return Ux;V_=1;var e=nw();function t(r,s){var a=s?e(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Ux=t,Ux}var Wx,Y_;function aX(){if(Y_)return Wx;Y_=1;var e=/\w*$/;function t(r){var s=new r.constructor(r.source,e.exec(r));return s.lastIndex=r.lastIndex,s}return Wx=t,Wx}var Hx,K_;function iX(){if(K_)return Hx;K_=1;var e=Bo(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function s(a){return r?Object(r.call(a)):{}}return Hx=s,Hx}var Vx,Q_;function oX(){if(Q_)return Vx;Q_=1;var e=nw();function t(r,s){var a=s?e(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return Vx=t,Vx}var Yx,X_;function lX(){if(X_)return Yx;X_=1;var e=nw(),t=sX(),r=aX(),s=iX(),a=oX(),i="[object Boolean]",l="[object Date]",u="[object Map]",d="[object Number]",m="[object RegExp]",f="[object Set]",h="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",b="[object DataView]",v="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",j="[object Int16Array]",_="[object Int32Array]",k="[object Uint8Array]",D="[object Uint8ClampedArray]",A="[object Uint16Array]",T="[object Uint32Array]";function I(L,q,O){var $=L.constructor;switch(q){case x:return e(L);case i:case l:return new $(+L);case b:return t(L,O);case v:case w:case C:case j:case _:case k:case D:case A:case T:return a(L,O);case u:return new $;case d:case h:return new $(L);case m:return r(L);case f:return new $;case g:return s(L)}}return Yx=I,Yx}var Kx,J_;function oP(){if(J_)return Kx;J_=1;var e=ea(),t=Object.create,r=function(){function s(){}return function(a){if(!e(a))return{};if(t)return t(a);s.prototype=a;var i=new s;return s.prototype=void 0,i}}();return Kx=r,Kx}var Qx,Z_;function cX(){if(Z_)return Qx;Z_=1;var e=oP(),t=tm(),r=Xb();function s(a){return typeof a.constructor=="function"&&!r(a)?e(t(a)):{}}return Qx=s,Qx}var Xx,eE;function uX(){if(eE)return Xx;eE=1;var e=Kf(),t=Ia(),r="[object Map]";function s(a){return t(a)&&e(a)==r}return Xx=s,Xx}var Jx,tE;function dX(){if(tE)return Jx;tE=1;var e=uX(),t=Yf(),r=Kb(),s=r&&r.isMap,a=s?t(s):e;return Jx=a,Jx}var Zx,rE;function fX(){if(rE)return Zx;rE=1;var e=Kf(),t=Ia(),r="[object Set]";function s(a){return t(a)&&e(a)==r}return Zx=s,Zx}var ey,nE;function mX(){if(nE)return ey;nE=1;var e=fX(),t=Yf(),r=Kb(),s=r&&r.isSet,a=s?t(s):e;return ey=a,ey}var ty,sE;function hX(){if(sE)return ty;sE=1;var e=Wb(),t=nP(),r=sP(),s=XQ(),a=JQ(),i=ZQ(),l=eX(),u=tX(),d=rX(),m=HT(),f=iP(),h=Kf(),g=nX(),x=lX(),b=cX(),v=ns(),w=Vf(),C=dX(),j=ea(),_=mX(),k=Bc(),D=em(),A=1,T=2,I=4,L="[object Arguments]",q="[object Array]",O="[object Boolean]",$="[object Date]",z="[object Error]",K="[object Function]",te="[object GeneratorFunction]",se="[object Map]",W="[object Number]",M="[object Object]",Y="[object RegExp]",P="[object Set]",G="[object String]",Z="[object Symbol]",F="[object WeakMap]",Ne="[object ArrayBuffer]",ye="[object DataView]",B="[object Float32Array]",re="[object Float64Array]",X="[object Int8Array]",U="[object Int16Array]",ne="[object Int32Array]",pe="[object Uint8Array]",xe="[object Uint8ClampedArray]",ke="[object Uint16Array]",ze="[object Uint32Array]",He={};He[L]=He[q]=He[Ne]=He[ye]=He[O]=He[$]=He[B]=He[re]=He[X]=He[U]=He[ne]=He[se]=He[W]=He[M]=He[Y]=He[P]=He[G]=He[Z]=He[pe]=He[xe]=He[ke]=He[ze]=!0,He[z]=He[K]=He[F]=!1;function it(Ge,rt,mt,et,ve,he){var ce,Ee=rt&A,Ue=rt&T,ie=rt&I;if(mt&&(ce=ve?mt(Ge,et,ve,he):mt(Ge)),ce!==void 0)return ce;if(!j(Ge))return Ge;var be=v(Ge);if(be){if(ce=g(Ge),!Ee)return l(Ge,ce)}else{var me=h(Ge),Q=me==K||me==te;if(w(Ge))return i(Ge,Ee);if(me==M||me==L||Q&&!ve){if(ce=Ue||Q?{}:b(Ge),!Ee)return Ue?d(Ge,a(ce,Ge)):u(Ge,s(ce,Ge))}else{if(!He[me])return ve?Ge:{};ce=x(Ge,me,Ee)}}he||(he=new e);var ae=he.get(Ge);if(ae)return ae;he.set(Ge,ce),_(Ge)?Ge.forEach(function(We){ce.add(it(We,rt,mt,We,Ge,he))}):C(Ge)&&Ge.forEach(function(We,nt){ce.set(nt,it(We,rt,mt,nt,Ge,he))});var Te=ie?Ue?f:m:Ue?D:k,Ve=be?void 0:Te(Ge);return t(Ve||Ge,function(We,nt){Ve&&(nt=We,We=Ge[nt]),r(ce,nt,it(We,rt,mt,nt,Ge,he))}),ce}return ty=it,ty}var ry,aE;function pX(){if(aE)return ry;aE=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return ry=e,ry}var ny,iE;function gX(){if(iE)return ny;iE=1;var e=Xf(),t=NT();function r(s,a){return a.length<2?s:e(s,t(a,0,-1))}return ny=r,ny}var sy,oE;function xX(){if(oE)return sy;oE=1;var e=Qf(),t=pX(),r=gX(),s=zc();function a(i,l){return l=e(l,i),i=r(i,l),i==null||delete i[s(t(l))]}return sy=a,sy}var ay,lE;function yX(){if(lE)return ay;lE=1;var e=zo(),t=tm(),r=Ia(),s="[object Object]",a=Function.prototype,i=Object.prototype,l=a.toString,u=i.hasOwnProperty,d=l.call(Object);function m(f){if(!r(f)||e(f)!=s)return!1;var h=t(f);if(h===null)return!0;var g=u.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==d}return ay=m,ay}var iy,cE;function vX(){if(cE)return iy;cE=1;var e=yX();function t(r){return e(r)?void 0:r}return iy=t,iy}var oy,uE;function bX(){if(uE)return oy;uE=1;var e=XT();function t(r){var s=r==null?0:r.length;return s?e(r,1):[]}return oy=t,oy}var ly,dE;function wX(){if(dE)return ly;dE=1;var e=bX(),t=JT(),r=eP();function s(a){return r(t(a,void 0,e),a+"")}return ly=s,ly}var cy,fE;function NX(){if(fE)return cy;fE=1;var e=ew(),t=hX(),r=xX(),s=Qf(),a=Gc(),i=vX(),l=wX(),u=iP(),d=1,m=2,f=4,h=l(function(g,x){var b={};if(g==null)return b;var v=!1;x=e(x,function(C){return C=s(C,g),v||(v=C.length>1),C}),a(g,u(g),b),v&&(b=t(b,d|m|f,i));for(var w=x.length;w--;)r(b,x[w]);return b});return cy=h,cy}var jX=NX();const SX=qr(jX);var uy,mE;function kX(){if(mE)return uy;mE=1;var e=nP(),t=oP(),r=tw(),s=Zf(),a=tm(),i=ns(),l=Vf(),u=Eb(),d=ea(),m=Qb();function f(h,g,x){var b=i(h),v=b||l(h)||m(h);if(g=s(g,4),x==null){var w=h&&h.constructor;v?x=b?new w:[]:d(h)?x=u(w)?t(a(h)):{}:x={}}return(v?e:r)(h,function(C,j,_){return g(x,C,j,_)}),x}return uy=f,uy}var CX=kX();const _X=qr(CX);var wd={exports:{}},EX=wd.exports,hE;function DX(){return hE||(hE=1,function(e,t){(function(r,s){e.exports=s()})(EX,function(){return function(r,s,a){s.prototype.isBetween=function(i,l,u,d){var m=a(i),f=a(l),h=(d=d||"()")[0]==="(",g=d[1]===")";return(h?this.isAfter(m,u):!this.isBefore(m,u))&&(g?this.isBefore(f,u):!this.isAfter(f,u))||(h?this.isBefore(m,u):!this.isAfter(m,u))&&(g?this.isAfter(f,u):!this.isBefore(f,u))}}})}(wd)),wd.exports}DX();var Nd={exports:{}},AX=Nd.exports,pE;function TX(){return pE||(pE=1,function(e,t){(function(r,s){e.exports=s()})(AX,function(){return function(r,s){s.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})}(Nd)),Nd.exports}TX();var jd={exports:{}},PX=jd.exports,gE;function RX(){return gE||(gE=1,function(e,t){(function(r,s){e.exports=s()})(PX,function(){return function(r,s){s.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})}(jd)),jd.exports}RX();var Sd={exports:{}},IX=Sd.exports,xE;function MX(){return xE||(xE=1,function(e,t){(function(r,s){e.exports=s()})(IX,function(){return function(r,s,a){var i=s.prototype,l=function(h){return h&&(h.indexOf?h:h.s)},u=function(h,g,x,b,v){var w=h.name?h:h.$locale(),C=l(w[g]),j=l(w[x]),_=C||j.map(function(D){return D.slice(0,b)});if(!v)return _;var k=w.weekStart;return _.map(function(D,A){return _[(A+(k||0))%7]})},d=function(){return a.Ls[a.locale()]},m=function(h,g){return h.formats[g]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,v,w){return v||w.slice(1)})}(h.formats[g.toUpperCase()])},f=function(){var h=this;return{months:function(g){return g?g.format("MMMM"):u(h,"months")},monthsShort:function(g){return g?g.format("MMM"):u(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):u(h,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):u(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):u(h,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return m(h.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return f.bind(this)()},a.localeData=function(){var h=d();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(g){return m(h,g)},meridiem:h.meridiem,ordinal:h.ordinal}},a.months=function(){return u(d(),"months")},a.monthsShort=function(){return u(d(),"monthsShort","months",3)},a.weekdays=function(h){return u(d(),"weekdays",null,null,h)},a.weekdaysShort=function(h){return u(d(),"weekdaysShort","weekdays",3,h)},a.weekdaysMin=function(h){return u(d(),"weekdaysMin","weekdays",2,h)}}})}(Sd)),Sd.exports}MX();var kd={exports:{}},OX=kd.exports,yE;function LX(){return yE||(yE=1,function(e,t){(function(r,s){e.exports=s()})(OX,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,a,i){var l=a.prototype,u=l.format;i.en.formats=r,l.format=function(d){d===void 0&&(d="YYYY-MM-DDTHH:mm:ssZ");var m=this.$locale().formats,f=function(h,g){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,b,v){var w=v&&v.toUpperCase();return b||g[v]||r[v]||g[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,j,_){return j||_.slice(1)})})}(d,m===void 0?{}:m);return u.call(this,f)}}})}(kd)),kd.exports}LX();var Cd={exports:{}},$X=Cd.exports,vE;function FX(){return vE||(vE=1,function(e,t){(function(r,s){e.exports=s()})($X,function(){return function(r,s,a){var i=function(l,u){if(!u||!u.length||u.length===1&&!u[0]||u.length===1&&Array.isArray(u[0])&&!u[0].length)return null;var d;u.length===1&&u[0].length>0&&(u=u[0]),d=(u=u.filter(function(f){return f}))[0];for(var m=1;m<u.length;m+=1)u[m].isValid()&&!u[m][l](d)||(d=u[m]);return d};a.max=function(){var l=[].slice.call(arguments,0);return i("isAfter",l)},a.min=function(){var l=[].slice.call(arguments,0);return i("isBefore",l)}}})}(Cd)),Cd.exports}FX();var _d={exports:{}},BX=_d.exports,bE;function zX(){return bE||(bE=1,function(e,t){(function(r,s){e.exports=s()})(BX,function(){var r="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,l,u){var d=l.prototype;u.utc=function(v){var w={date:v,utc:!0,args:arguments};return new l(w)},d.utc=function(v){var w=u(this.toDate(),{locale:this.$L,utc:!0});return v?w.add(this.utcOffset(),r):w},d.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),m.call(this,v)};var f=d.init;d.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else f.call(this)};var h=d.utcOffset;d.utcOffset=function(v,w){var C=this.$utils().u;if(C(v))return this.$u?0:C(this.$offset)?h.call(this):this.$offset;if(typeof v=="string"&&(v=function(D){D===void 0&&(D="");var A=D.match(s);if(!A)return null;var T=(""+A[0]).match(a)||["-",0,0],I=T[0],L=60*+T[1]+ +T[2];return L===0?0:I==="+"?L:-L}(v),v===null))return this;var j=Math.abs(v)<=16?60*v:v,_=this;if(w)return _.$offset=j,_.$u=v===0,_;if(v!==0){var k=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(j+k,r)).$offset=j,_.$x.$localOffset=k}else _=this.utc();return _};var g=d.format;d.format=function(v){var w=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,w)},d.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var x=d.toDate;d.toDate=function(v){return v==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var b=d.diff;d.diff=function(v,w,C){if(v&&this.$u===v.$u)return b.call(this,v,w,C);var j=this.local(),_=u(v).local();return b.call(j,_,w,C)}}})}(_d)),_d.exports}zX();var Ed={exports:{}},GX=Ed.exports,wE;function qX(){return wE||(wE=1,function(e,t){(function(r,s){e.exports=s()})(GX,function(){return function(r,s){s.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})}(Ed)),Ed.exports}qX();function _s(e){return e.children}var kn={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},un={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},NE=Object.keys(un).map(function(e){return un[e]});Oe.oneOfType([Oe.string,Oe.func]);Oe.any;Oe.func;Oe.oneOfType([Oe.arrayOf(Oe.oneOf(NE)),Oe.objectOf(function(e,t){var r=NE.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];return Oe.elementType.apply(Oe,[e,t].concat(a))})]);Oe.oneOfType([Oe.oneOf(["overlap","no-overlap"]),Oe.func]);var jE={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function lP(e,t){var r=Gr(e,"month");return Gr(r,"week",t.startOfWeek())}function cP(e,t){var r=nf(e,"month");return nf(r,"week",t.startOfWeek())}function UX(e,t){for(var r=lP(e,t),s=cP(e,t),a=[];$o(r,s,"day");)a.push(r),r=gs(r,1,"day");return a}function WX(e,t){var r=Gr(e,t);return Lo(r,e)?r:gs(r,1,t)}function HX(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",s=e,a=[];$o(s,t,r);)a.push(s),s=gs(s,1,r);return a}function VX(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Gr(e,"day"),e=yc(e,yc(t)),e=bo(e,bo(t)),e=xc(e,xc(t)),gc(e,gc(t)))}function SE(e){return yc(e)===0&&bo(e)===0&&xc(e)===0&&gc(e)===0}function YX(e,t,r,s){return r==="day"&&(r="date"),Math.abs(xS[r](e,void 0,s)-xS[r](t,void 0,s))}function sw(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Gr(e,r)/jE[r]-+Gr(t,r)/jE[r]))}var KX=Oe.oneOfType([Oe.string,Oe.func]);function QX(e,t,r,s,a){var i=typeof s=="function"?s(r,a,e):t.call(e,r,s,a);return uc(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function XX(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function aw(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function JX(e,t){return sw(e,t,"minutes")+aw(e,t)}function ZX(e){var t=Gr(e,"day");return sw(t,e,"minutes")+aw(t,e)}function eJ(e,t){return _b(e,t,"day")}function tJ(e,t,r){var s=Lo(e,t,"minutes");return s?Rc(t,r,"minutes"):Bf(t,r,"minutes")}function mv(e,t){return YX(e,t,"day")}function rJ(e){var t=e.evtA,r=t.start,s=t.end,a=t.allDay,i=e.evtB,l=i.start,u=i.end,d=i.allDay,m=+Gr(r,"day")-+Gr(l,"day"),f=mv(r,s),h=mv(l,u);return m||h-f||!!d-!!a||+r-+l||+s-+u}function nJ(e){var t=e.event,r=t.start,s=t.end,a=e.range,i=a.start,l=a.end,u=Gr(r,"day"),d=$o(u,l,"day"),m=Cb(u,s,"minutes"),f=m?Bf(s,i,"minutes"):Rc(s,i,"minutes");return d&&f}function sJ(e,t){return Lo(e,t,"day")}function aJ(e,t){return SE(e)&&SE(t)}var iJ=Tr(function e(t){var r=this;Ar(this,e),uc(typeof t.format=="function","date localizer `format(..)` must be a function"),uc(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||KX,this.formats=t.formats,this.format=function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return QX.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||VX,this.inRange=t.inRange||xT,this.lt=t.lt||_b,this.lte=t.lte||$o,this.gt=t.gt||Bf,this.gte=t.gte||Rc,this.eq=t.eq||Lo,this.neq=t.neq||Cb,this.startOf=t.startOf||Gr,this.endOf=t.endOf||nf,this.add=t.add||gs,this.range=t.range||HX,this.diff=t.diff||sw,this.ceil=t.ceil||WX,this.min=t.min||pT,this.max=t.max||gT,this.minutes=t.minutes||bo,this.daySpan=t.daySpan||mv,this.firstVisibleDay=t.firstVisibleDay||lP,this.lastVisibleDay=t.lastVisibleDay||cP,this.visibleDays=t.visibleDays||UX,this.getSlotDate=t.getSlotDate||XX,this.getTimezoneOffset=t.getTimezoneOffset||function(s){return s.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||aw,this.getTotalMin=t.getTotalMin||JX,this.getMinutesFromMidnight=t.getMinutesFromMidnight||ZX,this.continuesPrior=t.continuesPrior||eJ,this.continuesAfter=t.continuesAfter||tJ,this.sortEvents=t.sortEvents||rJ,this.inEventRange=t.inEventRange||nJ,this.isSameDate=t.isSameDate||sJ,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||aJ,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function oJ(e,t,r,s){var a=Jt(Jt({},e.formats),r);return Jt(Jt({},e),{},{messages:s,startOfWeek:function(){return e.startOfWeek(t)},format:function(l,u){return e.format(l,a[u]||u,t)}})}var lJ=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.navigate=function(l){r.props.onNavigate(l)},r.view=function(l){r.props.onView(l)},r}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.localizer.messages,i=s.label;return V.createElement("div",{className:"rbc-toolbar"},V.createElement("span",{className:"rbc-btn-group"},V.createElement("button",{type:"button",onClick:this.navigate.bind(null,kn.TODAY)},a.today),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,kn.PREVIOUS)},a.previous),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,kn.NEXT)},a.next)),V.createElement("span",{className:"rbc-toolbar-label"},i),V.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(s){var a=this,i=this.props.views,l=this.props.view;if(i.length>1)return i.map(function(u){return V.createElement("button",{type:"button",key:u,className:vr({"rbc-active":l===u}),onClick:a.view.bind(null,u)},s[u])})}}])}(V.Component);function lr(e,t){e&&e.apply(null,[].concat(t))}var cJ={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function uJ(e){return Jt(Jt({},cJ),e)}function dJ(e){var t=e.ref,r=e.callback;N.useEffect(function(){var s=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[t,r])}var fJ=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],uP=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.style,i=s.className,l=s.event,u=s.selected,d=s.isAllDay,m=s.onSelect,f=s.onDoubleClick,h=s.onKeyPress,g=s.localizer,x=s.continuesPrior,b=s.continuesAfter,v=s.accessors,w=s.getters,C=s.children,j=s.components,_=j.event,k=j.eventWrapper,D=s.slotStart,A=s.slotEnd,T=Is(s,fJ);delete T.resizable;var I=v.title(l),L=v.tooltip(l),q=v.end(l),O=v.start(l),$=v.allDay(l),z=d||$||g.diff(O,g.ceil(q,"day"),"day")>1,K=w.eventProp(l,O,q,u),te=V.createElement("div",{className:"rbc-event-content",title:L||void 0},_?V.createElement(_,{event:l,continuesPrior:x,continuesAfter:b,title:I,isAllDay:$,localizer:g,slotStart:D,slotEnd:A}):I);return V.createElement(k,Object.assign({},this.props,{type:"date"}),V.createElement("div",Object.assign({},T,{style:Jt(Jt({},K.style),a),className:vr("rbc-event",i,K.className,{"rbc-selected":u,"rbc-event-allday":z,"rbc-event-continues-prior":x,"rbc-event-continues-after":b}),onClick:function(W){return m&&m(l,W)},onDoubleClick:function(W){return f&&f(l,W)},onKeyDown:function(W){return h&&h(l,W)}}),typeof C=="function"?C(te):te))}}])}(V.Component);function rm(e,t){return!e||t==null?!1:JK(e,t)}function dP(e,t){var r=e.right-e.left,s=r/t;return s}function fP(e,t,r,s){var a=dP(e,s);return r?s-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function mJ(e,t){var r=t.x,s=t.y;return s>=e.top&&s<=e.bottom&&r>=e.left&&r<=e.right}function hJ(e,t,r,s,a){var i=-1,l=-1,u=s-1,d=dP(t,s),m=fP(t,r.x,a,s),f=t.top<r.y&&t.bottom>r.y,h=t.top<e.y&&t.bottom>e.y,g=e.y>t.bottom,x=t.top>e.y,b=r.top<t.top&&r.bottom>t.bottom;return b&&(i=0,l=u),f&&(x?(i=0,l=m):g&&(i=m,l=u)),h&&(i=l=a?u-Math.floor((e.x-t.left)/d):Math.floor((e.x-t.left)/d),f?m<i?i=m:l=m:e.y<r.y?l=u:i=0),{startIdx:i,endIdx:l}}function pJ(e){var t=e.target,r=e.offset,s=e.container,a=e.box,i=li(t),l=i.top,u=i.left,d=i.width,m=i.height,f=li(s),h=f.top,g=f.left,x=f.width,b=f.height,v=li(a),w=v.width,C=v.height,j=h+b,_=g+x,k=l+C,D=u+w,A=r.x,T=r.y,I=k>j?l-C-T:l+T+m,L=D>_?u+A-w+d:u+A;return{topOffset:I,leftOffset:L}}function gJ(e){var t=e.containerRef,r=e.accessors,s=e.getters,a=e.selected,i=e.components,l=e.localizer,u=e.position,d=e.show,m=e.events,f=e.slotStart,h=e.slotEnd,g=e.onSelect,x=e.onDoubleClick,b=e.onKeyPress,v=e.handleDragStart,w=e.popperRef,C=e.target,j=e.offset;dJ({ref:w,callback:d}),N.useLayoutEffect(function(){var D=pJ({target:C,offset:j,container:t.current,box:w.current}),A=D.topOffset,T=D.leftOffset;w.current.style.top="".concat(A,"px"),w.current.style.left="".concat(T,"px")},[j.x,j.y,C]);var _=u.width,k={minWidth:_+_/2};return V.createElement("div",{style:k,className:"rbc-overlay",ref:w},V.createElement("div",{className:"rbc-overlay-header"},l.format(f,"dayHeaderFormat")),m.map(function(D,A){return V.createElement(uP,{key:A,type:"popup",localizer:l,event:D,getters:s,onSelect:g,accessors:r,components:i,onDoubleClick:x,onKeyPress:b,continuesPrior:l.lt(r.end(D),f,"day"),continuesAfter:l.gte(r.start(D),h,"day"),slotStart:f,slotEnd:h,selected:rm(D,a),draggable:!0,onDragStart:function(){return v(D)},onDragEnd:function(){return d()}})}))}var mP=V.forwardRef(function(e,t){return V.createElement(gJ,Object.assign({},e,{popperRef:t}))});mP.propTypes={accessors:Oe.object.isRequired,getters:Oe.object.isRequired,selected:Oe.object,components:Oe.object.isRequired,localizer:Oe.object.isRequired,position:Oe.object.isRequired,show:Oe.func.isRequired,events:Oe.array.isRequired,slotStart:Oe.instanceOf(Date).isRequired,slotEnd:Oe.instanceOf(Date),onSelect:Oe.func,onDoubleClick:Oe.func,onKeyPress:Oe.func,handleDragStart:Oe.func,style:Oe.object,offset:Oe.shape({x:Oe.number,y:Oe.number})};function xJ(e){var t=e.containerRef,r=e.popupOffset,s=r===void 0?5:r,a=e.overlay,i=e.accessors,l=e.localizer,u=e.components,d=e.getters,m=e.selected,f=e.handleSelectEvent,h=e.handleDoubleClickEvent,g=e.handleKeyPressEvent,x=e.handleDragStart,b=e.onHide,v=e.overlayDisplay,w=N.useRef(null);if(!a.position)return null;var C=s;isNaN(s)||(C={x:s,y:s});var j=a.position,_=a.events,k=a.date,D=a.end;return V.createElement(Gb,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:b,target:a.target},function(A){var T=A.props;return V.createElement(mP,Object.assign({},T,{containerRef:t,ref:w,target:a.target,offset:C,accessors:i,getters:d,selected:m,components:u,localizer:l,position:j,show:v,events:_,slotStart:k,slotEnd:D,onSelect:f,onDoubleClick:h,onKeyPress:g,handleDragStart:x}))})}var iw=V.forwardRef(function(e,t){return V.createElement(xJ,Object.assign({},e,{containerRef:t}))});iw.propTypes={popupOffset:Oe.oneOfType([Oe.number,Oe.shape({x:Oe.number,y:Oe.number})]),overlay:Oe.shape({position:Oe.object,events:Oe.array,date:Oe.instanceOf(Date),end:Oe.instanceOf(Date)}),accessors:Oe.object.isRequired,localizer:Oe.object.isRequired,components:Oe.object.isRequired,getters:Oe.object.isRequired,selected:Oe.object,handleSelectEvent:Oe.func,handleDoubleClickEvent:Oe.func,handleKeyPressEvent:Oe.func,handleDragStart:Oe.func,onHide:Oe.func,overlayDisplay:Oe.func};function Qr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Ml(r,e,t,{passive:!1})}function yJ(e,t,r){return!e||vc(e,document.elementFromPoint(t,r))}function vJ(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return VT(a,".rbc-event",e)}function bJ(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return VT(a,".rbc-show-more",e)}function of(e,t){return!!vJ(e,t)}function wJ(e,t){return!!bJ(e,t)}function Pl(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var kE=5,NJ=250,hP=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.global,a=s===void 0?!1:s,i=r.longPressThreshold,l=i===void 0?250:i,u=r.validContainers,d=u===void 0?[]:u;Ar(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=l,this.validContainers=d,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Qr("touchmove",function(){},window),this._removeKeyDownListener=Qr("keydown",this._keyListener),this._removeKeyUpListener=Qr("keyup",this._keyListener),this._removeDropFromOutsideListener=Qr("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Qr("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Tr(e,[{key:"on",value:function(r,s){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(s),{remove:function(){var l=a.indexOf(s);l!==-1&&a.splice(l,1)}}}},{key:"emit",value:function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];var l,u=this._listeners[r]||[];return u.forEach(function(d){l===void 0&&(l=d.apply(void 0,a))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var s=this._selectRect;return!s||!this.selecting?!1:CE(s,Si(r))}},{key:"filter",value:function(r){var s=this._selectRect;return!s||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,s){var a=this,i=null,l=null,u=null,d=function(g){i=setTimeout(function(){f(),r(g)},a.longPressThreshold),l=Qr("touchmove",function(){return f()}),u=Qr("touchend",function(){return f()})},m=Qr("touchstart",d),f=function(){i&&clearTimeout(i),l&&l(),u&&u(),i=null,l=null,u=null};return s&&d(s),function(){f(),m()}}},{key:"_addInitialEventListener",value:function(){var r=this,s=Qr("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=Qr("mousedown",r._handleInitialEvent)}),a=Qr("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){s(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var s=Pl(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:l,clientY:u}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var s=Pl(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:l,clientY:u}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var s=Pl(r),a=s.clientX,i=s.clientY,l=s.pageX,u=s.pageY,d=this.container(),m,f;if(!(r.which===3||r.button===2||!yJ(d,a,i))){if(!this.globalMouse&&d&&!vc(d,r.target)){var h=jJ(0),g=h.top,x=h.left,b=h.bottom,v=h.right;if(f=Si(d),m=CE({top:f.top-g,left:f.left-x,bottom:f.bottom+b,right:f.right+v},{top:u,left:l}),!m)return}var w=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:l,y:u,clientX:a,clientY:i});if(w!==!1)switch(r.type){case"mousedown":this._removeEndListener=Qr("mouseup",this._handleTerminatingEvent),this._onEscListener=Qr("keydown",this._handleTerminatingEvent),this._removeMoveListener=Qr("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=Qr("touchend",this._handleTerminatingEvent),this._removeMoveListener=Qr("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var s=r.target,a=this.validContainers;return!a||!a.length||!s?!0:a.some(function(i){return!!s.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var s=this.selecting,a=this._selectRect;if(!s&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||vc(this.container(),r.target),l=this._isWithinValidContainer(r);return r.key==="Escape"||!l?this.emit("reset"):!s&&i?this._handleClickEvent(r):s?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var s=Pl(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY,d=new Date().getTime();return this._lastClickData&&d-this._lastClickData.timestamp<NJ?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:l,clientY:u})):(this._lastClickData={timestamp:d},this.emit("click",{x:a,y:i,clientX:l,clientY:u}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var s=this._initialEventData,a=s.x,i=s.y,l=Pl(r),u=l.pageX,d=l.pageY,m=Math.abs(a-u),f=Math.abs(i-d),h=Math.min(u,a),g=Math.min(d,i),x=this.selecting,b=this.isClick(u,d);b&&!x&&!(m||f)||(!x&&!b&&this.emit("selectStart",this._initialEventData),b||(this.selecting=!0,this._selectRect={top:g,left:h,x:u,y:d,right:h+m,bottom:g+f},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,s){var a=this._initialEventData,i=a.x,l=a.y,u=a.isTouch;return!u&&Math.abs(r-i)<=kE&&Math.abs(s-l)<=kE}}])}();function jJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Xs(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function CE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=Si(e),a=s.top,i=s.left,l=s.right,u=l===void 0?i:l,d=s.bottom,m=d===void 0?a:d,f=Si(t),h=f.top,g=f.left,x=f.right,b=x===void 0?g:x,v=f.bottom,w=v===void 0?h:v;return!(m-r<h||a+r>w||u-r<g||i+r>b)}function Si(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+_E("left"),s=t.top+_E("top");return{top:s,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+s}}function _E(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var SJ=function(e){function t(r,s){var a;return Ar(this,t),a=en(this,t,[r,s]),a.state={selecting:!1},a.containerRef=N.createRef(),a}return tn(t,e),Tr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(s){!s.selectable&&this.props.selectable&&this._selectable(),s.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var s=this.props,a=s.range,i=s.getNow,l=s.getters,u=s.date,d=s.components.dateCellWrapper,m=s.localizer,f=this.state,h=f.selecting,g=f.startIdx,x=f.endIdx,b=i();return V.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(v,w){var C=h&&w>=g&&w<=x,j=l.dayProp(v),_=j.className,k=j.style;return V.createElement(d,{key:w,value:v,range:a},V.createElement("div",{style:k,className:vr("rbc-day-bg",_,C&&"rbc-selected-cell",m.isSameDate(v,b)&&"rbc-today",u&&m.neq(u,v,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var s=this,a=this.containerRef.current,i=this._selector=new hP(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(d,m){if(!of(a,d)&&!wJ(a,d)){var f=Si(a),h=s.props,g=h.range,x=h.rtl;if(mJ(f,d)){var b=fP(f,d.x,x,g.length);s._selectSlot({startIdx:b,endIdx:b,action:m,box:d})}}s._initial={},s.setState({selecting:!1})};i.on("selecting",function(u){var d=s.props,m=d.range,f=d.rtl,h=-1,g=-1;if(s.state.selecting||(lr(s.props.onSelectStart,[u]),s._initial={x:u.x,y:u.y}),i.isSelected(a)){var x=Si(a),b=hJ(s._initial,x,u,m.length,f);h=b.startIdx,g=b.endIdx}s.setState({selecting:!0,startIdx:h,endIdx:g})}),i.on("beforeSelect",function(u){if(s.props.selectable==="ignoreEvents")return!of(s.containerRef.current,u)}),i.on("click",function(u){return l(u,"click")}),i.on("doubleClick",function(u){return l(u,"doubleClick")}),i.on("select",function(u){s._selectSlot(Jt(Jt({},s.state),{},{action:"select",bounds:u})),s._initial={},s.setState({selecting:!1}),lr(s.props.onSelectEnd,[s.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(s){var a=s.endIdx,i=s.startIdx,l=s.action,u=s.bounds,d=s.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:l,bounds:u,box:d,resourceId:this.props.resourceId})}}])}(V.Component),Xn={propTypes:{slotMetrics:Oe.object.isRequired,selected:Oe.object,isAllDay:Oe.bool,accessors:Oe.object.isRequired,localizer:Oe.object.isRequired,components:Oe.object.isRequired,getters:Oe.object.isRequired,onSelect:Oe.func,onDoubleClick:Oe.func,onKeyPress:Oe.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var s=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,l=t.onSelect,u=t.onDoubleClick,d=t.onKeyPress,m=t.localizer,f=t.slotMetrics,h=t.components,g=t.resizable,x=f.continuesPrior(r),b=f.continuesAfter(r);return V.createElement(uP,{event:r,getters:i,localizer:m,accessors:a,components:h,onSelect:l,onDoubleClick:u,onKeyPress:d,continuesPrior:x,continuesAfter:b,slotStart:f.first,slotEnd:f.last,selected:rm(r,s),resizable:g})},renderSpan:function(t,r,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return V.createElement("div",{key:s,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},pP=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.segments,l=a.slotMetrics.slots,u=a.className,d=1;return V.createElement("div",{className:vr(u,"rbc-row")},i.reduce(function(m,f,h){var g=f.event,x=f.left,b=f.right,v=f.span,w="_lvl_"+h,C=x-d,j=Xn.renderEvent(s.props,g);return C&&m.push(Xn.renderSpan(l,C,"".concat(w,"_gap"))),m.push(Xn.renderSpan(l,v,w,j)),d=b+1,m},[]))}}])}(V.Component);pP.defaultProps=Jt({},Xn.defaultProps);function gP(e){var t=e.dateRange,r=e.unit,s=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,s)}}function kJ(e,t,r,s){var a=gP({dateRange:t,localizer:s}),i=a.first,l=a.last,u=s.diff(i,l,"day"),d=s.max(s.startOf(r.start(e),"day"),i),m=s.min(s.ceil(r.end(e),"day"),l),f=yQ(t,function(g){return s.isSameDate(g,d)}),h=s.diff(d,m,"day");return h=Math.min(h,u),h=Math.max(h-s.segmentOffset,1),{event:e,span:h,left:f+1,right:Math.max(f+h,1)}}function hv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,s,a,i=[],l=[];for(r=0;r<e.length;r++){for(a=e[r],s=0;s<i.length&&CJ(a,i[s]);s++);s>=t?l.push(a):(i[s]||(i[s]=[])).push(a)}for(r=0;r<i.length;r++)i[r].sort(function(u,d){return u.left-d.left});return{levels:i,extra:l}}function Nc(e,t,r,s,a){var i={start:s.start(e),end:s.end(e)},l={start:t,end:r};return a.inEventRange({event:i,range:l})}function CJ(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function _J(e,t,r){var s=vd(e),a=[],i=[];s.forEach(function(d){var m=t.start(d),f=t.end(d);r.daySpan(m,f)>1?a.push(d):i.push(d)});var l=a.sort(function(d,m){return pv(d,m,t,r)}),u=i.sort(function(d,m){return pv(d,m,t,r)});return[].concat(vd(l),vd(u))}function pv(e,t,r,s){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return s.sortEvents({evtA:a,evtB:i})}var gv=function(t,r){return t.left<=r&&t.right>=r},dy=function(t,r){return t.filter(function(s){return gv(s,r)}).map(function(s){return s.event})},xP=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){for(var s=this.props,a=s.segments,i=s.slotMetrics.slots,l=hv(a).levels[0],u=1,d=1,m=[];u<=i;){var f="_lvl_"+u,h=l.filter(function(k){return gv(k,u)})[0]||{},g=h.event,x=h.left,b=h.right,v=h.span;if(!g){var w=this.getHiddenEventsForSlot(a,u);if(w.length>0){var C=u-d;C&&m.push(Xn.renderSpan(i,C,f+"_gap")),m.push(Xn.renderSpan(i,1,f,this.renderShowMore(a,u))),d=u=u+1;continue}u++;continue}var j=Math.max(0,x-d);if(this.canRenderSlotEvent(x,v)){var _=Xn.renderEvent(this.props,g);j&&m.push(Xn.renderSpan(i,j,f+"_gap")),m.push(Xn.renderSpan(i,v,f,_)),d=u=b+1}else j&&m.push(Xn.renderSpan(i,j,f+"_gap")),m.push(Xn.renderSpan(i,1,f,this.renderShowMore(a,u))),d=u=u+1}return V.createElement("div",{className:"rbc-row"},m)}},{key:"getHiddenEventsForSlot",value:function(s,a){var i=dy(s,a),l=hv(s).levels[0],u=l.filter(function(d){return gv(d,a)}).map(function(d){return d.event});return i.filter(function(d){return!u.some(function(m){return m===d})})}},{key:"canRenderSlotEvent",value:function(s,a){var i=this.props.segments;return jQ(s,s+a).every(function(l){var u=dy(i,l).length;return u===1})}},{key:"renderShowMore",value:function(s,a){var i=this,l=this.props,u=l.localizer,d=l.slotMetrics,m=l.components,f=d.getEventsForSlot(a),h=dy(s,a),g=h.length;if(m!=null&&m.showMore){var x=m.showMore,b=d.getDateForSlot(a-1);return g?V.createElement(x,{localizer:u,slotDate:b,slot:a,count:g,events:f,remainingEvents:h}):!1}return g?V.createElement("button",{type:"button",key:"sm_"+a,className:vr("rbc-button-link","rbc-show-more"),onClick:function(w){return i.showMore(a,w)}},u.messages.showMore(g,h,f)):!1}},{key:"showMore",value:function(s,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(s,a.target)}}])}(V.Component);xP.defaultProps=Jt({},Xn.defaultProps);var EJ=function(t){var r=t.children;return V.createElement("div",{className:"rbc-row-content-scroll-container"},r)},DJ=function(t,r){return t.left<=r&&t.right>=r},AJ=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function yP(){return QT(function(e){for(var t=e.range,r=e.events,s=e.maxRows,a=e.minRows,i=e.accessors,l=e.localizer,u=gP({dateRange:t,localizer:l}),d=u.first,m=u.last,f=r.map(function(v){return kJ(v,t,i,l)}),h=hv(f,Math.max(s-1,1)),g=h.levels,x=h.extra,b=x.length>0?a-1:a;g.length<b;)g.push([]);return{first:d,last:m,levels:g,extra:x,range:t,slots:t.length,clone:function(w){var C=yP();return C(Jt(Jt({},e),w))},getDateForSlot:function(w){return t[w]},getSlotForDate:function(w){return t.find(function(C){return l.isSameDate(C,w)})},getEventsForSlot:function(w){return f.filter(function(C){return DJ(C,w)}).map(function(C){return C.event})},continuesPrior:function(w){return l.continuesPrior(i.start(w),d)},continuesAfter:function(w){var C=i.start(w),j=i.end(w);return l.continuesAfter(C,j,m)}}},AJ)}var jc=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.handleSelectSlot=function(l){var u=r.props,d=u.range,m=u.onSelectSlot;m(d.slice(l.start,l.end+1),l)},r.handleShowMore=function(l,u){var d=r.props,m=d.range,f=d.onShowMore,h=r.slotMetrics(r.props),g=EV(r.containerRef.current,".rbc-row-bg")[0],x;g&&(x=g.children[l-1]);var b=h.getEventsForSlot(l);f(b,m[l-1],x,l,u)},r.getContainer=function(){var l=r.props.container;return l?l():r.containerRef.current},r.renderHeadingCell=function(l,u){var d=r.props,m=d.renderHeader,f=d.getNow,h=d.localizer;return m({date:l,key:"header_".concat(u),className:vr("rbc-date-cell",h.isSameDate(l,f())&&"rbc-now")})},r.renderDummy=function(){var l=r.props,u=l.className,d=l.range,m=l.renderHeader,f=l.showAllEvents;return V.createElement("div",{className:u,ref:r.containerRef},V.createElement("div",{className:vr("rbc-row-content",f&&"rbc-row-content-scrollable")},m&&V.createElement("div",{className:"rbc-row",ref:r.headingRowRef},d.map(r.renderHeadingCell)),V.createElement("div",{className:"rbc-row",ref:r.eventRowRef},V.createElement("div",{className:"rbc-row-segment"},V.createElement("div",{className:"rbc-event"},V.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=N.createRef(),r.headingRowRef=N.createRef(),r.eventRowRef=N.createRef(),r.slotMetrics=yP(),r}return tn(t,e),Tr(t,[{key:"getRowLimit",value:function(){var s,a=_0(this.eventRowRef.current),i=(s=this.headingRowRef)!==null&&s!==void 0&&s.current?_0(this.headingRowRef.current):0,l=_0(this.containerRef.current)-i;return Math.max(Math.floor(l/a),1)}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.rtl,l=s.range,u=s.className,d=s.selected,m=s.selectable,f=s.renderForMeasure,h=s.accessors,g=s.getters,x=s.components,b=s.getNow,v=s.renderHeader,w=s.onSelect,C=s.localizer,j=s.onSelectStart,_=s.onSelectEnd,k=s.onDoubleClick,D=s.onKeyPress,A=s.resourceId,T=s.longPressThreshold,I=s.isAllDay,L=s.resizable,q=s.showAllEvents;if(f)return this.renderDummy();var O=this.slotMetrics(this.props),$=O.levels,z=O.extra,K=q?EJ:_s,te=x.weekWrapper,se={selected:d,accessors:h,getters:g,localizer:C,components:x,onSelect:w,onDoubleClick:k,onKeyPress:D,resourceId:A,slotMetrics:O,resizable:L};return V.createElement("div",{className:u,role:"rowgroup",ref:this.containerRef},V.createElement(SJ,{localizer:C,date:a,getNow:b,rtl:i,range:l,selectable:m,container:this.getContainer,getters:g,onSelectStart:j,onSelectEnd:_,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:T,resourceId:A}),V.createElement("div",{className:vr("rbc-row-content",q&&"rbc-row-content-scrollable"),role:"row"},v&&V.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),V.createElement(K,null,V.createElement(te,Object.assign({isAllDay:I},se,{rtl:this.props.rtl}),$.map(function(W,M){return V.createElement(pP,Object.assign({key:M,segments:W},se))}),!!z.length&&V.createElement(xP,Object.assign({segments:z,onShowMore:this.handleShowMore},se))))))}}])}(V.Component);jc.defaultProps={minRows:0,maxRows:1/0};var ow=function(t){var r=t.label;return V.createElement("span",{role:"columnheader","aria-sort":"none"},r)},TJ=function(t){var r=t.label,s=t.drilldownView,a=t.onDrillDown;return s?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):V.createElement("span",null,r)},PJ=["date","className"],RJ=function(t,r,s,a,i){return t.filter(function(l){return Nc(l,r,s,a,i)})},nm=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(l,u){var d=r.props,m=d.events,f=d.components,h=d.selectable,g=d.getNow,x=d.selected,b=d.date,v=d.localizer,w=d.longPressThreshold,C=d.accessors,j=d.getters,_=d.showAllEvents,k=r.state,D=k.needLimitMeasure,A=k.rowLimit,T=RJ(vd(m),l[0],l[l.length-1],C,v),I=_J(T,C,v);return V.createElement(jc,{key:u,ref:u===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:g,date:b,range:l,events:I,maxRows:_?1/0:A,selected:x,selectable:h,components:f,accessors:C,getters:j,localizer:v,renderHeader:r.readerDateHeading,renderForMeasure:D,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:w,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:_})},r.readerDateHeading=function(l){var u=l.date,d=l.className,m=Is(l,PJ),f=r.props,h=f.date,g=f.getDrilldownView,x=f.localizer,b=x.neq(h,u,"month"),v=x.isSameDate(u,h),w=g(u),C=x.format(u,"dateFormat"),j=r.props.components.dateHeader||TJ;return V.createElement("div",Object.assign({},m,{className:vr(d,b&&"rbc-off-range",v&&"rbc-current"),role:"cell"}),V.createElement(j,{label:C,date:u,drilldownView:w,isOffRange:b,onDrillDown:function(k){return r.handleHeadingClick(u,w,k)}}))},r.handleSelectSlot=function(l,u){r._pendingSelection=r._pendingSelection.concat(l),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(u)})},r.handleHeadingClick=function(l,u,d){d.preventDefault(),r.clearSelection(),lr(r.props.onDrillDown,[l,u])},r.handleSelectEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onSelectEvent,u)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onDoubleClickEvent,u)},r.handleKeyPressEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onKeyPressEvent,u)},r.handleShowMore=function(l,u,d,m,f){var h=r.props,g=h.popup,x=h.onDrillDown,b=h.onShowMore,v=h.getDrilldownView,w=h.doShowMoreDrillDown;if(r.clearSelection(),g){var C=DT(d,r.containerRef.current);r.setState({overlay:{date:u,events:l,position:C,target:f}})}else w&&lr(x,[u,v(u)||un.DAY]);lr(b,[l,u,m])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=N.createRef(),r.slotRowRef=N.createRef(),r._bgRows=[],r._pendingSelection=[],r}return tn(t,e),Tr(t,[{key:"componentDidMount",value:function(){var s=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||AT(function(){a=!1,s.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.className,u=i.visibleDays(a,i),d=fV(u,7);return this._weekCount=d.length,V.createElement("div",{className:vr("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},V.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(d[0])),d.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(s){var a=this.props,i=a.localizer,l=a.components,u=s[0],d=s[s.length-1],m=l.header||ow;return i.range(u,d,"day").map(function(f,h){return V.createElement("div",{key:"header_"+h,className:"rbc-header"},V.createElement(m,{date:f,localizer:i,label:i.format(f,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var s,a,i=this,l=(s=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&s!==void 0?s:{},u=this.props,d=u.accessors,m=u.localizer,f=u.components,h=u.getters,g=u.selected,x=u.popupOffset,b=u.handleDragStart,v=function(){return i.setState({overlay:null})};return V.createElement(iw,{overlay:l,accessors:d,localizer:m,components:f,getters:h,selected:g,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(s){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(u,d){return+u-+d});var i=new Date(a[0]),l=new Date(a[a.length-1]);l.setDate(a[a.length-1].getDate()+1),lr(this.props.onSelectSlot,{slots:a,start:i,end:l,action:s.action,bounds:s.bounds,box:s.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(s,a){var i=s.date,l=s.localizer;return{date:i,needLimitMeasure:l.neq(i,a.date,"month")}}}])}(V.Component);nm.range=function(e,t){var r=t.localizer,s=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:s,end:a}};nm.navigate=function(e,t,r){var s=r.localizer;switch(t){case kn.PREVIOUS:return s.add(e,-1,"month");case kn.NEXT:return s.add(e,1,"month");default:return e}};nm.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var EE=function(t){var r=t.min,s=t.max,a=t.step,i=t.slots,l=t.localizer;return"".concat(+l.startOf(r,"minutes"))+"".concat(+l.startOf(s,"minutes"))+"".concat(a,"-").concat(i)};function lw(e){for(var t=e.min,r=e.max,s=e.step,a=e.timeslots,i=e.localizer,l=EE({step:s,localizer:i}),u=1+i.getTotalMin(t,r),d=i.getMinutesFromMidnight(t),m=Math.ceil((u-1)/(s*a)),f=m*a,h=new Array(m),g=new Array(f),x=0;x<m;x++){h[x]=new Array(a);for(var b=0;b<a;b++){var v=x*a+b,w=v*s;g[v]=h[x][b]=i.getSlotDate(t,d,w)}}var C=g.length*s;g.push(i.getSlotDate(t,d,C));function j(_){var k=i.diff(t,_,"minutes")+i.getDstOffset(t,_);return Math.min(k,u)}return{groups:h,update:function(k){return EE(k)!==l?lw(k):this},dateIsInGroup:function(k,D){var A=h[D+1];return i.inRange(k,h[D][0],A?A[0]:r,"minutes")},nextSlot:function(k){var D=g[Math.min(g.findIndex(function(A){return A===k||i.eq(A,k)})+1,g.length-1)];return i.eq(D,k)&&(D=i.add(k,s,"minutes")),D},closestSlotToPosition:function(k){var D=Math.min(g.length-1,Math.max(0,Math.floor(k*f)));return g[D]},closestSlotFromPoint:function(k,D){var A=Math.abs(D.top-D.bottom);return this.closestSlotToPosition((k.y-D.top)/A)},closestSlotFromDate:function(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(k,t,"minutes"))return g[0];if(i.gt(k,r,"minutes"))return g[g.length-1];var A=i.diff(t,k,"minutes");return g[(A-A%s)/s+D]},startsBeforeDay:function(k){return i.lt(k,t,"day")},startsAfterDay:function(k){return i.gt(k,r,"day")},startsBefore:function(k){return i.lt(i.merge(t,k),t,"minutes")},startsAfter:function(k){return i.gt(i.merge(r,k),r,"minutes")},getRange:function(k,D,A,T){A||(k=i.min(r,i.max(t,k))),T||(D=i.min(r,i.max(t,D)));var I=j(k),L=j(D),q=L>s*f&&!i.eq(r,D)?(I-s)/(s*f)*100:I/(s*f)*100;return{top:q,height:L/(s*f)*100-q,start:j(k),startDate:k,end:j(D),endDate:D}},getCurrentTimePosition:function(k){var D=j(k),A=D/(s*f)*100;return A}}}var IJ=function(){function e(t,r){var s=r.accessors,a=r.slotMetrics;Ar(this,e);var i=a.getRange(s.start(t),s.end(t)),l=i.start,u=i.startDate,d=i.end,m=i.endDate,f=i.top,h=i.height;this.start=l,this.end=d,this.startMs=+u,this.endMs=+m,this.top=f,this.height=h,this.data=t}return Tr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var s=100-this.container._width;return s/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,s=Math.min(100,this._width*1.7);if(this.rows)return s;if(this.leaves)return this.leaves.length>0?s:r;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?r:s}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,s=r.leaves,a=r.xOffset,i=r._width,l=s.indexOf(this)+1;return a+l*i}}])}();function MJ(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function OJ(e){for(var t=GQ(e,["startMs",function(u){return-u.endMs}]),r=[];t.length>0;){var s=t.shift();r.push(s);for(var a=0;a<t.length;a++){var i=t[a];if(!(s.endMs>i.startMs)){if(a>0){var l=t.splice(a,1)[0];r.push(l)}break}}}return r}function vP(e){for(var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,i=t.map(function(f){return new IJ(f,{slotMetrics:s,accessors:a})}),l=OJ(i),u=[],d=function(){var h=l[m],g=u.find(function(v){return v.end>h.start||Math.abs(h.start-v.start)<r});if(!g)return h.rows=[],u.push(h),1;h.container=g;for(var x=null,b=g.rows.length-1;!x&&b>=0;b--)MJ(g.rows[b],h,r)&&(x=g.rows[b]);x?(x.leaves.push(h),h.row=x):(h.leaves=[],g.rows.push(h))},m=0;m<l.length;m++)d();return l.map(function(f){return{event:f.data,style:{top:f.top,height:f.height,width:f.width,xOffset:Math.max(0,f.xOffset)}}})}function bP(e,t,r){for(var s=0;s<e.friends.length;++s)if(!(r.indexOf(e.friends[s])>-1)){t=t>e.friends[s].idx?t:e.friends[s].idx,r.push(e.friends[s]);var a=bP(e.friends[s],t,r);t=t>a?t:a}return t}function LJ(e){var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,i=vP({events:t,minimumStartDifference:r,slotMetrics:s,accessors:a});i.sort(function(te,se){return te=te.style,se=se.style,te.top!==se.top?te.top>se.top?1:-1:te.height!==se.height?te.top+te.height<se.top+se.height?1:-1:0});for(var l=0;l<i.length;++l)i[l].friends=[],delete i[l].style.left,delete i[l].style.left,delete i[l].idx,delete i[l].size;for(var u=0;u<i.length-1;++u)for(var d=i[u],m=d.style.top,f=d.style.top+d.style.height,h=u+1;h<i.length;++h){var g=i[h],x=g.style.top,b=g.style.top+g.style.height;(x>=m&&b<=f||b>m&&b<=f||x>=m&&x<f)&&(d.friends.push(g),g.friends.push(d))}for(var v=0;v<i.length;++v){for(var w=i[v],C=[],j=0;j<100;++j)C.push(1);for(var _=0;_<w.friends.length;++_)w.friends[_].idx!==void 0&&(C[w.friends[_].idx]=0);w.idx=C.indexOf(1)}for(var k=0;k<i.length;++k){var D=0;if(!i[k].size){var A=[],T=bP(i[k],0,A);D=100/(T+1),i[k].size=D;for(var I=0;I<A.length;++I)A[I].size=D}}for(var L=0;L<i.length;++L){var q=i[L];q.style.left=q.idx*q.size;for(var O=0,$=0;$<q.friends.length;++$){var z=q.friends[$].idx;O=O>z?O:z}O<=q.idx&&(q.size=100-q.idx*q.size);var K=q.idx===0?0:3;q.style.width="calc(".concat(q.size,"% - ").concat(K,"px)"),q.style.height="calc(".concat(q.style.height,"% - 2px)"),q.style.xOffset="calc(".concat(q.style.left,"% + ").concat(K,"px)")}return i}var DE={overlap:vP,"no-overlap":LJ};function $J(e){return!!(e&&e.constructor&&e.call&&e.apply)}function FJ(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in DE&&(r=DE[t]),$J(r)?r.apply(this,arguments):[]}var wP=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.renderSlot,i=s.resource,l=s.group,u=s.getters,d=s.components,m=d===void 0?{}:d,f=m.timeSlotWrapper,h=f===void 0?_s:f,g=u?u.slotGroupProp(l):{};return V.createElement("div",Object.assign({className:"rbc-timeslot-group"},g),l.map(function(x,b){var v=u?u.slotProp(x,i):{};return V.createElement(h,{key:b,value:x,resource:i},V.createElement("div",Object.assign({},v,{className:vr("rbc-time-slot",v.className)}),a&&a(x,b)))}))}}])}(N.Component);function ud(e){return typeof e=="string"?e:e+"%"}function BJ(e){var t=e.style,r=e.className,s=e.event,a=e.accessors,i=e.rtl,l=e.selected,u=e.label,d=e.continuesPrior,m=e.continuesAfter,f=e.getters,h=e.onClick,g=e.onDoubleClick,x=e.isBackgroundEvent,b=e.onKeyPress,v=e.components,w=v.event,C=v.eventWrapper,j=a.title(s),_=a.tooltip(s),k=a.end(s),D=a.start(s),A=f.eventProp(s,D,k,l),T=[V.createElement("div",{key:"1",className:"rbc-event-label"},u),V.createElement("div",{key:"2",className:"rbc-event-content"},w?V.createElement(w,{event:s,title:j}):j)],I=t.height,L=t.top,q=t.width,O=t.xOffset,$=Jt(Jt({},A.style),{},ni({top:ud(L),height:ud(I),width:ud(q)},i?"right":"left",ud(O)));return V.createElement(C,Object.assign({type:"time"},e),V.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:g,style:$,onKeyDown:b,title:_?(typeof u=="string"?u+": ":"")+_:void 0,className:vr(x?"rbc-background-event":"rbc-event",r,A.className,{"rbc-selected":l,"rbc-event-continues-earlier":d,"rbc-event-continues-later":m})},T))}var zJ=function(t){var r=t.children,s=t.className,a=t.style,i=t.innerRef;return V.createElement("div",{className:s,style:a,ref:i},r)},GJ=V.forwardRef(function(e,t){return V.createElement(zJ,Object.assign({},e,{innerRef:t}))}),qJ=["dayProp"],UJ=["eventContainerWrapper","timeIndicatorWrapper"],NP=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(l){var u=l.events,d=l.isBackgroundEvent,m=r.props,f=m.rtl,h=m.selected,g=m.accessors,x=m.localizer,b=m.getters,v=m.components,w=m.step,C=m.timeslots,j=m.dayLayoutAlgorithm,_=m.resizable,k=r,D=k.slotMetrics,A=x.messages,T=FJ({events:u,accessors:g,slotMetrics:D,minimumStartDifference:Math.ceil(w*C/2),dayLayoutAlgorithm:j});return T.map(function(I,L){var q,O=I.event,$=I.style,z=g.end(O),K=g.start(O),te=(q=g.eventId(O))!==null&&q!==void 0?q:"evt_"+L,se="eventTimeRangeFormat",W,M=D.startsBeforeDay(K),Y=D.startsAfterDay(z);M?se="eventTimeRangeEndFormat":Y&&(se="eventTimeRangeStartFormat"),M&&Y?W=A.allDay:W=x.format({start:K,end:z},se);var P=M||D.startsBefore(K),G=Y||D.startsAfter(z);return V.createElement(BJ,{style:$,event:O,label:W,key:te,getters:b,rtl:f,components:v,continuesPrior:P,continuesAfter:G,accessors:g,resource:r.props.resource,selected:rm(O,h),onClick:function(F){return r._select(Jt(Jt(Jt({},O),r.props.resource&&{sourceResource:r.props.resource}),d&&{isBackgroundEvent:!0}),F)},onDoubleClick:function(F){return r._doubleClick(O,F)},isBackgroundEvent:d,onKeyPress:function(F){return r._keyPress(O,F)},resizable:_})})},r._selectable=function(){var l=r.containerRef.current,u=r.props,d=u.longPressThreshold,m=u.localizer,f=r._selector=new hP(function(){return l},{longPressThreshold:d}),h=function(v){var w=r.props.onSelecting,C=r.state||{},j=g(v),_=j.startDate,k=j.endDate;w&&(m.eq(C.startDate,_,"minutes")&&m.eq(C.endDate,k,"minutes")||w({start:_,end:k,resourceId:r.props.resource})===!1)||(r.state.start!==j.start||r.state.end!==j.end||r.state.selecting!==j.selecting)&&r.setState(j)},g=function(v){var w=r.slotMetrics.closestSlotFromPoint(v,Si(l));r.state.selecting||(r._initialSlot=w);var C=r._initialSlot;m.lte(C,w)?w=r.slotMetrics.nextSlot(w):m.gt(C,w)&&(C=r.slotMetrics.nextSlot(C));var j=r.slotMetrics.getRange(m.min(C,w),m.max(C,w));return Jt(Jt({},j),{},{selecting:!0,top:"".concat(j.top,"%"),height:"".concat(j.height,"%")})},x=function(v,w){if(!of(r.containerRef.current,v)){var C=g(v),j=C.startDate,_=C.endDate;r._selectSlot({startDate:j,endDate:_,action:w,box:v})}r.setState({selecting:!1})};f.on("selecting",h),f.on("selectStart",h),f.on("beforeSelect",function(b){if(r.props.selectable==="ignoreEvents")return!of(r.containerRef.current,b)}),f.on("click",function(b){return x(b,"click")}),f.on("doubleClick",function(b){return x(b,"doubleClick")}),f.on("select",function(b){r.state.selecting&&(r._selectSlot(Jt(Jt({},r.state),{},{action:"select",bounds:b})),r.setState({selecting:!1}))}),f.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(l){for(var u=l.startDate,d=l.endDate,m=l.action,f=l.bounds,h=l.box,g=u,x=[];r.props.localizer.lte(g,d);)x.push(g),g=new Date(+g+r.props.step*60*1e3);lr(r.props.onSelectSlot,{slots:x,start:u,end:d,resourceId:r.props.resource,action:m,bounds:f,box:h})},r._select=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onSelectEvent,u)},r._doubleClick=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onDoubleClickEvent,u)},r._keyPress=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onKeyPressEvent,u)},r.slotMetrics=lw(r.props),r.containerRef=N.createRef(),r}return tn(t,e),Tr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(s,a){this.props.selectable&&!s.selectable&&this._selectable(),!this.props.selectable&&s.selectable&&this._teardownSelectable();var i=this.props,l=i.getNow,u=i.isNow,d=i.localizer,m=i.date,f=i.min,h=i.max,g=d.neq(s.getNow(),l(),"minutes");if(s.isNow!==u||g){if(this.clearTimeIndicatorInterval(),u){var x=!g&&d.eq(s.date,m,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else u&&(d.neq(s.min,f,"minutes")||d.neq(s.max,h,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var s=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){s.intervalTriggered=!0,s.positionTimeIndicator(),s.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var s=this.props,a=s.min,i=s.max,l=s.getNow,u=l();if(u>=a&&u<=i){var d=this.slotMetrics.getCurrentTimePosition(u);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:d})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.max,l=s.rtl,u=s.isNow,d=s.resource,m=s.accessors,f=s.localizer,h=s.getters,g=h.dayProp,x=Is(h,qJ),b=s.components,v=b.eventContainerWrapper,w=b.timeIndicatorWrapper,C=Is(b,UJ);this.slotMetrics=this.slotMetrics.update(this.props);var j=this.slotMetrics,_=this.state,k=_.selecting,D=_.top,A=_.height,T=_.startDate,I=_.endDate,L={start:T,end:I},q=g(i,d),O=q.className,$=q.style,z={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},K=C.dayColumnWrapper||GJ;return V.createElement(K,{ref:this.containerRef,date:a,style:$,className:vr(O,"rbc-day-slot","rbc-time-column",u&&"rbc-now",u&&"rbc-today",k&&"rbc-slot-selecting"),slotMetrics:j,resource:d},j.groups.map(function(te,se){return V.createElement(wP,{key:se,group:te,resource:d,getters:x,components:C})}),V.createElement(v,{localizer:f,resource:d,accessors:m,getters:x,components:C,slotMetrics:j},V.createElement("div",{className:vr("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),k&&V.createElement("div",{className:"rbc-slot-selection",style:{top:D,height:A}},V.createElement("span",null,f.format(L,"selectRangeFormat"))),u&&this.intervalTriggered&&V.createElement(w,z,V.createElement("div",z)))}}])}(V.Component);NP.defaultProps={dragThroughEvents:!0,timeslots:2};var jP=function(t){var r=t.label;return V.createElement(V.Fragment,null,r)},WJ=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.handleHeaderClick=function(l,u,d){d.preventDefault(),lr(r.props.onDrillDown,[l,u])},r.renderRow=function(l){var u=r.props,d=u.events,m=u.rtl,f=u.selectable,h=u.getNow,g=u.range,x=u.getters,b=u.localizer,v=u.accessors,w=u.components,C=u.resizable,j=v.resourceId(l),_=l?d.filter(function(k){return v.resource(k)===j}):d;return V.createElement(jc,{isAllDay:!0,rtl:m,getNow:h,minRows:2,maxRows:r.props.allDayMaxRows+1,range:g,events:_,resourceId:j,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:w,accessors:v,getters:x,localizer:b,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:C})},r}return tn(t,e),Tr(t,[{key:"renderHeaderCells",value:function(s){var a=this,i=this.props,l=i.localizer,u=i.getDrilldownView,d=i.getNow,m=i.getters.dayProp,f=i.components.header,h=f===void 0?ow:f,g=d();return s.map(function(x,b){var v=u(x),w=l.format(x,"dayFormat"),C=m(x),j=C.className,_=C.style,k=V.createElement(h,{date:x,label:w,localizer:l});return V.createElement("div",{key:b,style:_,className:vr("rbc-header",j,l.isSameDate(x,g)&&"rbc-today")},v?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(A){return a.handleHeaderClick(x,v,A)}},k):V.createElement("span",null,k))})}},{key:"render",value:function(){var s=this,a=this.props,i=a.width,l=a.rtl,u=a.resources,d=a.range,m=a.events,f=a.getNow,h=a.accessors,g=a.selectable,x=a.components,b=a.getters,v=a.scrollRef,w=a.localizer,C=a.isOverflowing,j=a.components,_=j.timeGutterHeader,k=j.resourceHeader,D=k===void 0?jP:k,A=a.resizable,T={};C&&(T[l?"marginLeft":"marginRight"]="".concat(zb()-1,"px"));var I=u.groupEvents(m);return V.createElement("div",{style:T,ref:v,className:vr("rbc-time-header",C&&"rbc-overflowing")},V.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},_&&V.createElement(_,null)),u.map(function(L,q){var O=xi(L,2),$=O[0],z=O[1];return V.createElement("div",{className:"rbc-time-header-content",key:$||q},z&&V.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(q)},V.createElement("div",{className:"rbc-header"},V.createElement(D,{index:q,label:h.resourceTitle(z),resource:z}))),V.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(d.length<=1?" rbc-time-header-cell-single-day":"")},s.renderHeaderCells(d)),V.createElement(jc,{isAllDay:!0,rtl:l,getNow:f,minRows:2,maxRows:s.props.allDayMaxRows+1,range:d,events:I.get($)||[],resourceId:z&&$,className:"rbc-allday-cell",selectable:g,selected:s.props.selected,components:x,accessors:h,getters:b,localizer:w,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:A}))}))}}])}(V.Component),HJ=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.handleHeaderClick=function(l,u,d){d.preventDefault(),lr(r.props.onDrillDown,[l,u])},r}return tn(t,e),Tr(t,[{key:"renderHeaderCells",value:function(s){var a=this,i=this.props,l=i.localizer,u=i.getDrilldownView,d=i.getNow,m=i.getters.dayProp,f=i.components,h=f.header,g=h===void 0?ow:h,x=f.resourceHeader,b=x===void 0?jP:x,v=i.resources,w=i.accessors,C=i.events,j=i.rtl,_=i.selectable,k=i.components,D=i.getters,A=i.resizable,T=d(),I=v.groupEvents(C);return s.map(function(L,q){var O=u(L),$=l.format(L,"dayFormat"),z=m(L),K=z.className,te=z.style,se=V.createElement(g,{date:L,label:$,localizer:l});return V.createElement("div",{key:q,className:"rbc-time-header-content rbc-resource-grouping"},V.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(s.length<=1?" rbc-time-header-cell-single-day":"")},V.createElement("div",{style:te,className:vr("rbc-header",K,l.isSameDate(L,T)&&"rbc-today")},O?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(M){return a.handleHeaderClick(L,O,M)}},se):V.createElement("span",null,se))),V.createElement("div",{className:"rbc-row"},v.map(function(W,M){var Y=xi(W,2),P=Y[0],G=Y[1];return V.createElement("div",{key:"resource_".concat(P,"_").concat(M),className:vr("rbc-header",K,l.isSameDate(L,T)&&"rbc-today")},V.createElement(b,{index:M,label:w.resourceTitle(G),resource:G}))})),V.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},v.map(function(W,M){var Y=xi(W,2),P=Y[0],G=Y[1],Z=(I.get(P)||[]).filter(function(F){return l.isSameDate(F.start,L)||l.isSameDate(F.end,L)});return V.createElement(jc,{key:"resource_".concat(P,"_").concat(M),isAllDay:!0,rtl:j,getNow:d,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[L],events:Z,resourceId:G&&P,className:"rbc-allday-cell",selectable:_,selected:a.props.selected,components:k,accessors:w,getters:D,localizer:l,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:A})})))})}},{key:"render",value:function(){var s=this.props,a=s.width,i=s.rtl,l=s.range,u=s.scrollRef,d=s.isOverflowing,m=s.components.timeGutterHeader,f={};return d&&(f[i?"marginLeft":"marginRight"]="".concat(zb()-1,"px")),V.createElement("div",{style:f,ref:u,className:vr("rbc-time-header",d&&"rbc-overflowing")},V.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},m&&V.createElement(m,null)),this.renderHeaderCells(l))}}])}(V.Component);function VJ(e){var t=e.min,r=e.max,s=e.localizer;return s.getTimezoneOffset(t)!==s.getTimezoneOffset(r)?{start:s.add(t,-1,"day"),end:s.add(r,-1,"day")}:{start:t,end:r}}var YJ=function(t){var r=t.min,s=t.max,a=t.timeslots,i=t.step,l=t.localizer,u=t.getNow,d=t.resource,m=t.components,f=t.getters,h=t.gutterRef,g=m.timeGutterWrapper,x=N.useMemo(function(){return VJ({min:r,max:s,localizer:l})},[r==null?void 0:r.toISOString(),s==null?void 0:s.toISOString(),l]),b=x.start,v=x.end,w=N.useState(lw({min:b,max:v,timeslots:a,step:i,localizer:l})),C=xi(w,2),j=C[0],_=C[1];N.useEffect(function(){j&&_(j.update({min:b,max:v,timeslots:a,step:i,localizer:l}))},[b==null?void 0:b.toISOString(),v==null?void 0:v.toISOString(),a,i]);var k=N.useCallback(function(D,A){if(A)return null;var T=j.dateIsInGroup(u(),A);return V.createElement("span",{className:vr("rbc-label",T&&"rbc-now")},l.format(D,"timeGutterFormat"))},[j,l,u]);return V.createElement(g,{slotMetrics:j},V.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:h},j.groups.map(function(D,A){return V.createElement(wP,{key:A,group:D,resource:d,components:m,renderSlot:k,getters:f})})))},KJ=V.forwardRef(function(e,t){return V.createElement(YJ,Object.assign({gutterRef:t},e))}),fy={};function QJ(e,t){return{map:function(s){return e?e.map(function(a,i){return s([t.resourceId(a),a],i)}):[s([fy,null],0)]},groupEvents:function(s){var a=new Map;return e?(s.forEach(function(i){var l=t.resource(i)||fy;if(Array.isArray(l))l.forEach(function(d){var m=a.get(d)||[];m.push(i),a.set(d,m)});else{var u=a.get(l)||[];u.push(i),a.set(l,u)}}),a):(a.set(fy,s),a)}}}var Go=function(e){function t(r){var s;return Ar(this,t),s=en(this,t,[r]),s.handleScroll=function(a){s.scrollRef.current&&(s.scrollRef.current.scrollLeft=a.target.scrollLeft)},s.handleResize=function(){GS(s.rafHandle),s.rafHandle=AT(s.checkOverflow)},s.handleKeyPressEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];lr(s.props.onKeyPressEvent,i)},s.handleSelectEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];lr(s.props.onSelectEvent,i)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];lr(s.props.onDoubleClickEvent,i)},s.handleShowMore=function(a,i,l,u,d){var m=s.props,f=m.popup,h=m.onDrillDown,g=m.onShowMore,x=m.getDrilldownView,b=m.doShowMoreDrillDown;if(s.clearSelection(),f){var v=DT(l,s.containerRef.current);s.setState({overlay:{date:i,events:a,position:Jt(Jt({},v),{},{width:"200px"}),target:d}})}else b&&lr(h,[i,x(i)||un.DAY]);lr(g,[a,i,u])},s.handleSelectAllDaySlot=function(a,i){var l=s.props.onSelectSlot,u=new Date(a[0]),d=new Date(a[a.length-1]);d.setDate(a[a.length-1].getDate()+1),lr(l,{slots:a,start:u,end:d,action:i.action,resourceId:i.resourceId})},s.overlayDisplay=function(){s.setState({overlay:null})},s.checkOverflow=function(){if(!s._updatingOverflow){var a=s.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;s.state.isOverflowing!==i&&(s._updatingOverflow=!0,s.setState({isOverflowing:i},function(){s._updatingOverflow=!1}))}}},s.memoizedResources=QT(function(a,i){return QJ(a,i)}),s.state={gutterWidth:void 0,isOverflowing:null},s.scrollRef=V.createRef(),s.contentRef=V.createRef(),s.containerRef=V.createRef(),s._scrollRatio=null,s.gutterRef=N.createRef(),s}return tn(t,e),Tr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),GS(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(s,a,i,l,u,d,m,f,h,g){var x=this.props,b=x.min,v=x.max,w=(l.get(a)||[]).filter(function(j){return d.inRange(s,m.start(j),m.end(j),"day")}),C=(u.get(a)||[]).filter(function(j){return d.inRange(s,m.start(j),m.end(j),"day")});return V.createElement(NP,Object.assign({},this.props,{localizer:d,min:d.merge(s,b),max:d.merge(s,v),resource:i&&a,components:f,isNow:d.isSameDate(s,g),key:"".concat(a,"-").concat(s),date:s,events:w,backgroundEvents:C,dayLayoutAlgorithm:h}))}},{key:"renderResourcesFirst",value:function(s,a,i,l,u,d,m,f,h){var g=this;return a.map(function(x){var b=xi(x,2),v=b[0],w=b[1];return s.map(function(C){return g.renderDayColumn(C,v,w,i,l,u,d,f,h,m)})})}},{key:"renderRangeFirst",value:function(s,a,i,l,u,d,m,f,h){var g=this;return s.map(function(x){return V.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},a.map(function(b){var v=xi(b,2),w=v[0],C=v[1];return V.createElement("div",{style:{flex:1},key:d.resourceId(C)},g.renderDayColumn(x,w,C,i,l,u,d,f,h,m))}))})}},{key:"renderEvents",value:function(s,a,i,l){var u=this.props,d=u.accessors,m=u.localizer,f=u.resourceGroupingLayout,h=u.components,g=u.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,d),b=x.groupEvents(a),v=x.groupEvents(i);return f?this.renderRangeFirst(s,x,b,v,m,d,l,h,g):this.renderResourcesFirst(s,x,b,v,m,d,l,h,g)}},{key:"render",value:function(){var s,a=this.props,i=a.events,l=a.backgroundEvents,u=a.range,d=a.width,m=a.rtl,f=a.selected,h=a.getNow,g=a.resources,x=a.components,b=a.accessors,v=a.getters,w=a.localizer,C=a.min,j=a.max,_=a.showMultiDayTimes,k=a.longPressThreshold,D=a.resizable,A=a.resourceGroupingLayout;d=d||this.state.gutterWidth;var T=u[0],I=u[u.length-1];this.slots=u.length;var L=[],q=[],O=[];i.forEach(function(z){if(Nc(z,T,I,b,w)){var K=b.start(z),te=b.end(z);b.allDay(z)||w.startAndEndAreDateOnly(K,te)||!_&&!w.isSameDate(K,te)?L.push(z):q.push(z)}}),l.forEach(function(z){Nc(z,T,I,b,w)&&O.push(z)}),L.sort(function(z,K){return pv(z,K,b,w)});var $={range:u,events:L,width:d,rtl:m,getNow:h,localizer:w,selected:f,allDayMaxRows:this.props.showAllEvents?1/0:(s=this.props.allDayMaxRows)!==null&&s!==void 0?s:1/0,resources:this.memoizedResources(g,b),selectable:this.props.selectable,accessors:b,getters:v,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:k,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:D};return V.createElement("div",{className:vr("rbc-time-view",g&&"rbc-time-view-resources"),ref:this.containerRef},g&&g.length>1&&A?V.createElement(HJ,$):V.createElement(WJ,$),this.props.popup&&this.renderOverlay(),V.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},V.createElement(KJ,{date:T,ref:this.gutterRef,localizer:w,min:w.merge(T,C),max:w.merge(T,j),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:v}),this.renderEvents(u,q,O,h())))}},{key:"renderOverlay",value:function(){var s,a,i=this,l=(s=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&s!==void 0?s:{},u=this.props,d=u.accessors,m=u.localizer,f=u.components,h=u.getters,g=u.selected,x=u.popupOffset,b=u.handleDragStart,v=function(){return i.setState({overlay:null})};return V.createElement(iw,{overlay:l,accessors:d,localizer:m,components:f,getters:h,selected:g,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var s=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=s.gutterRef)!==null&&a!==void 0&&a.current?fv(s.gutterRef.current):void 0;i&&s.state.gutterWidth!==i&&s.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var s=this.contentRef.current;s.scrollTop=s.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=s.min,i=s.max,l=s.scrollToTime,u=s.localizer,d=u.diff(u.merge(l,a),l,"milliseconds"),m=u.diff(a,i,"milliseconds");this._scrollRatio=d/m}}])}(N.Component);Go.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var XJ=["date","localizer","min","max","scrollToTime","enableAutoScroll"],sm=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,m=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,h=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,b=Is(s,XJ),v=t.range(a,{localizer:i});return V.createElement(Go,Object.assign({},b,{range:v,eventOffset:10,localizer:i,min:u,max:m,scrollToTime:h,enableAutoScroll:x}))}}])}(V.Component);sm.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};sm.navigate=function(e,t,r){var s=r.localizer;switch(t){case kn.PREVIOUS:return s.add(e,-1,"day");case kn.NEXT:return s.add(e,1,"day");default:return e}};sm.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var JJ=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Da=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,m=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,h=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,b=Is(s,JJ),v=t.range(a,this.props);return V.createElement(Go,Object.assign({},b,{range:v,eventOffset:15,localizer:i,min:u,max:m,scrollToTime:h,enableAutoScroll:x}))}}])}(V.Component);Da.defaultProps=Go.defaultProps;Da.navigate=function(e,t,r){var s=r.localizer;switch(t){case kn.PREVIOUS:return s.add(e,-1,"week");case kn.NEXT:return s.add(e,1,"week");default:return e}};Da.range=function(e,t){var r=t.localizer,s=r.startOfWeek(),a=r.startOf(e,"week",s),i=r.endOf(e,"week",s);return r.range(a,i)};Da.title=function(e,t){var r=t.localizer,s=Da.range(e,{localizer:r}),a=rP(s),i=a[0],l=a.slice(1);return r.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var ZJ=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function cw(e,t){return Da.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var qc=function(e){function t(){return Ar(this,t),en(this,t,arguments)}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,m=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,h=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,b=Is(s,ZJ),v=cw(a,this.props);return V.createElement(Go,Object.assign({},b,{range:v,eventOffset:15,localizer:i,min:u,max:m,scrollToTime:h,enableAutoScroll:x}))}}])}(V.Component);qc.defaultProps=Go.defaultProps;qc.range=cw;qc.navigate=Da.navigate;qc.title=function(e,t){var r=t.localizer,s=cw(e,{localizer:r}),a=rP(s),i=a[0],l=a.slice(1);return r.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var am=30;function im(e){var t=e.accessors,r=e.components,s=e.date,a=e.events,i=e.getters,l=e.length,u=l===void 0?am:l,d=e.localizer,m=e.onDoubleClickEvent,f=e.onSelectEvent,h=e.selected,g=N.useRef(null),x=N.useRef(null),b=N.useRef(null),v=N.useRef(null),w=N.useRef(null);N.useEffect(function(){_()});var C=function(I,L,q){var O=r.event,$=r.date;return L=L.filter(function(z){return Nc(z,d.startOf(I,"day"),d.endOf(I,"day"),t,d)}),L.map(function(z,K){var te=t.title(z),se=t.end(z),W=t.start(z),M=i.eventProp(z,W,se,rm(z,h)),Y=K===0&&d.format(I,"agendaDateFormat"),P=K===0?V.createElement("td",{rowSpan:L.length,className:"rbc-agenda-date-cell"},$?V.createElement($,{day:I,label:Y}):Y):!1;return V.createElement("tr",{key:q+"_"+K,className:M.className,style:M.style},P,V.createElement("td",{className:"rbc-agenda-time-cell"},j(I,z)),V.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(Z){return f&&f(z,Z)},onDoubleClick:function(Z){return m&&m(z,Z)}},O?V.createElement(O,{event:z,title:te}):te))},[])},j=function(I,L){var q="",O=r.time,$=d.messages.allDay,z=t.end(L),K=t.start(L);return t.allDay(L)||(d.eq(K,z)?$=d.format(K,"agendaTimeFormat"):d.isSameDate(K,z)?$=d.format({start:K,end:z},"agendaTimeRangeFormat"):d.isSameDate(I,K)?$=d.format(K,"agendaTimeFormat"):d.isSameDate(I,z)&&($=d.format(z,"agendaTimeFormat"))),d.gt(I,K,"day")&&(q="rbc-continues-prior"),d.lt(I,z,"day")&&(q+=" rbc-continues-after"),V.createElement("span",{className:q.trim()},O?V.createElement(O,{event:L,day:I,label:$}):$)},_=function(){if(w.current){var I=g.current,L=w.current.firstChild;if(L){var q=v.current.scrollHeight>v.current.clientHeight,O=[],$=O;O=[fv(L.children[0]),fv(L.children[1])],($[0]!==O[0]||$[1]!==O[1])&&(x.current.style.width=O[0]+"px",b.current.style.width=O[1]+"px"),q?(ZY(I,"rbc-header-overflowing"),I.style.marginRight=zb()+"px"):eK(I,"rbc-header-overflowing")}}},k=d.messages,D=d.add(s,u,"day"),A=d.range(s,D,"day");return a=a.filter(function(T){return Nc(T,d.startOf(s,"day"),d.endOf(D,"day"),t,d)}),a.sort(function(T,I){return+t.start(T)-+t.start(I)}),V.createElement("div",{className:"rbc-agenda-view"},a.length!==0?V.createElement(V.Fragment,null,V.createElement("table",{ref:g,className:"rbc-agenda-table"},V.createElement("thead",null,V.createElement("tr",null,V.createElement("th",{className:"rbc-header",ref:x},k.date),V.createElement("th",{className:"rbc-header",ref:b},k.time),V.createElement("th",{className:"rbc-header"},k.event)))),V.createElement("div",{className:"rbc-agenda-content",ref:v},V.createElement("table",{className:"rbc-agenda-table"},V.createElement("tbody",{ref:w},A.map(function(T,I){return C(T,a,I)}))))):V.createElement("span",{className:"rbc-agenda-empty"},k.noEventsInRange))}im.range=function(e,t){var r=t.length,s=r===void 0?am:r,a=t.localizer,i=a.add(e,s,"day");return{start:e,end:i}};im.navigate=function(e,t,r){var s=r.length,a=s===void 0?am:s,i=r.localizer;switch(t){case kn.PREVIOUS:return i.add(e,-a,"day");case kn.NEXT:return i.add(e,a,"day");default:return e}};im.title=function(e,t){var r=t.length,s=r===void 0?am:r,a=t.localizer,i=a.add(e,s,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var Dd=ni(ni(ni(ni(ni({},un.MONTH,nm),un.WEEK,Da),un.WORK_WEEK,qc),un.DAY,sm),un.AGENDA,im),eZ=["action","date","today"];function tZ(e,t){var r=t.action,s=t.date,a=t.today,i=Is(t,eZ);switch(e=typeof e=="string"?Dd[e]:e,r){case kn.TODAY:s=a||new Date;break;case kn.DATE:break;default:uc(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),s=e.navigate(s,r,i)}return s}function rZ(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&Xs(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Vs=function(t){return function(r){return rZ(r,t)}},nZ=["view","date","getNow","onNavigate"],sZ=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function SP(e){if(Array.isArray(e))return e;for(var t=[],r=0,s=Object.entries(e);r<s.length;r++){var a=xi(s[r],2),i=a[0],l=a[1];l&&t.push(i)}return t}function aZ(e,t){var r=t.views,s=SP(r);return s.indexOf(e)!==-1}var kP=function(e){function t(){var r;Ar(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=en(this,t,[].concat(a)),r.getViews=function(){var l=r.props.views;return Array.isArray(l)?_X(l,function(u,d){return u[d]=Dd[d]},{}):Xs(l)==="object"?QQ(l,function(u,d){return u===!0?Dd[d]:u}):Dd},r.getView=function(){var l=r.getViews();return l[r.props.view]},r.getDrilldownView=function(l){var u=r.props,d=u.view,m=u.drilldownView,f=u.getDrilldownView;return f?f(l,d,Object.keys(r.getViews())):m},r.handleRangeChange=function(l,u,d){var m=r.props,f=m.onRangeChange,h=m.localizer;f&&u.range&&f(u.range(l,{localizer:h}),d)},r.handleNavigate=function(l,u){var d=r.props,m=d.view,f=d.date,h=d.getNow,g=d.onNavigate,x=Is(d,nZ),b=r.getView(),v=h();f=tZ(b,Jt(Jt({},x),{},{action:l,date:u||f||v,today:v})),g(f,m,l),r.handleRangeChange(f,b)},r.handleViewChange=function(l){l!==r.props.view&&aZ(l,r.props)&&r.props.onView(l);var u=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),u[l],l)},r.handleSelectEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onSelectEvent,u)},r.handleDoubleClickEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onDoubleClickEvent,u)},r.handleKeyPressEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];lr(r.props.onKeyPressEvent,u)},r.handleSelectSlot=function(l){lr(r.props.onSelectSlot,l)},r.handleDrillDown=function(l,u){var d=r.props.onDrillDown;if(d){d(l,u,r.drilldownView);return}u&&r.handleViewChange(u),r.handleNavigate(kn.DATE,l)},r.state={context:t.getContext(r.props)},r}return tn(t,e),Tr(t,[{key:"render",value:function(){var s=this.props,a=s.view,i=s.toolbar,l=s.events,u=s.backgroundEvents,d=s.resourceGroupingLayout,m=s.style,f=s.className,h=s.elementProps,g=s.date,x=s.getNow,b=s.length,v=s.showMultiDayTimes,w=s.onShowMore,C=s.doShowMoreDrillDown;s.components,s.formats,s.messages,s.culture;var j=Is(s,sZ);g=g||x();var _=this.getView(),k=this.state.context,D=k.accessors,A=k.components,T=k.getters,I=k.localizer,L=k.viewNames,q=A.toolbar||lJ,O=_.title(g,{localizer:I,length:b});return V.createElement("div",Object.assign({},h,{className:vr(f,"rbc-calendar",j.rtl&&"rbc-rtl"),style:m}),i&&V.createElement(q,{date:g,view:a,views:L,label:O,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:I}),V.createElement(_,Object.assign({},j,{events:l,backgroundEvents:u,date:g,getNow:x,length:b,localizer:I,getters:T,components:A,accessors:D,showMultiDayTimes:v,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:w,doShowMoreDrillDown:C,resourceGroupingLayout:d})))}}],[{key:"getDerivedStateFromProps",value:function(s){return{context:t.getContext(s)}}},{key:"getContext",value:function(s){var a=s.startAccessor,i=s.endAccessor,l=s.allDayAccessor,u=s.tooltipAccessor,d=s.titleAccessor,m=s.resourceAccessor,f=s.resourceIdAccessor,h=s.resourceTitleAccessor,g=s.eventIdAccessor,x=s.eventPropGetter,b=s.backgroundEventPropGetter,v=s.slotPropGetter,w=s.slotGroupPropGetter,C=s.dayPropGetter,j=s.view,_=s.views,k=s.localizer,D=s.culture,A=s.messages,T=A===void 0?{}:A,I=s.components,L=I===void 0?{}:I,q=s.formats,O=q===void 0?{}:q,$=SP(_),z=uJ(T);return{viewNames:$,localizer:oJ(k,D,O,z),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return b&&b.apply(void 0,arguments)||{}},slotProp:function(){return v&&v.apply(void 0,arguments)||{}},slotGroupProp:function(){return w&&w.apply(void 0,arguments)||{}},dayProp:function(){return C&&C.apply(void 0,arguments)||{}}},components:VQ(L[j]||{},SX(L,$),{eventWrapper:_s,backgroundEventWrapper:_s,eventContainerWrapper:_s,dateCellWrapper:_s,weekWrapper:_s,timeSlotWrapper:_s,timeGutterWrapper:_s,timeIndicatorWrapper:_s}),accessors:{start:Vs(a),end:Vs(i),allDay:Vs(l),tooltip:Vs(u),title:Vs(d),resource:Vs(m),resourceId:Vs(f),resourceTitle:Vs(h),eventId:Vs(g)}}}}])}(V.Component);kP.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:un.MONTH,views:[un.MONTH,un.WEEK,un.DAY,un.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:un.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var iZ=mT(kP,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),oZ=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"P",r)," – ").concat(s.format(i,"P",r))},my=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"p",r)," – ").concat(s.format(i,"p",r))},lZ=function(t,r,s){var a=t.start;return"".concat(s.format(a,"h:mma",r)," – ")},cZ=function(t,r,s){var a=t.end;return" – ".concat(s.format(a,"h:mma",r))},uZ=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"MMMM dd",r)," – ").concat(s.format(i,Lo(a,i,"month")?"dd":"MMMM dd",r))},dZ={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:my,eventTimeRangeFormat:my,eventTimeRangeStartFormat:lZ,eventTimeRangeEndFormat:cZ,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:uZ,agendaHeaderFormat:oZ,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:my},fZ=function(t){var r=t.startOfWeek,s=t.getDay,a=t.format,i=t.locales;return new iJ({formats:dZ,firstOfWeek:function(u){return s(r(new Date,{locale:i[u]}))},format:function(u,d,m){return a(new Date(u),d,{locale:i[m]})}})};const mZ={"en-US":Cv},hZ=fZ({format:zt,startOfWeek:()=>di(new Date,{weekStartsOn:0}),getDay:wM,locales:mZ}),AE={title:"",description:"",start:new Date,end:new Date,type:"Event",color:"",location:"",calendar:""},pZ=[{label:"Event",value:"Event"},{label:"My To Do",value:"My To Do"},{label:"Appointment Group",value:"Appointment Group"}];function TE(e){return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}function gZ(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}const Rl=({event:e})=>{var f;Lt();const{title:t}=e,r=e.color||e.resource&&e.resource.color||"#93c5fd";let s=null,a=null;e.start&&(s=e.start instanceof Date?e.start:new Date(e.start),isNaN(s.getTime())&&(s=null)),e.end&&(a=e.end instanceof Date?e.end:new Date(e.end),isNaN(a.getTime())&&(a=null));const l=(window.allCalendarEvents||[]).filter(h=>{let g=null,x=null;return h.start&&(g=h.start instanceof Date?h.start:new Date(h.start),isNaN(g.getTime())&&(g=null)),h.end&&(x=h.end instanceof Date?h.end:new Date(h.end),isNaN(x.getTime())&&(x=null)),!g||!x||!s||!a?!1:g.toDateString()===s.toDateString()&&(s.getTime()<x.getTime()&&a.getTime()>g.getTime()||g.getTime()<a.getTime()&&x.getTime()>s.getTime())});l.sort((h,g)=>{let x=new Date(0),b=new Date(0);return h.start&&(x=h.start instanceof Date?h.start:new Date(h.start),isNaN(x.getTime())&&(x=new Date(0))),g.start&&(b=g.start instanceof Date?g.start:new Date(g.start),isNaN(b.getTime())&&(b=new Date(0))),x.getTime()-b.getTime()});const u=l.length>1&&l[1]===e,d=((f=e.resource)==null?void 0:f.type)==="Assignment";let m=t;return s&&a&&(d&&s.getTime()===a.getTime()?m+=`
Due: ${zt(s,"h:mm a")}`:s.getTime()===a.getTime()?m+=`
${zt(s,"h:mm a")}`:e.allDay?m+=`
All Day`:m+=`
${zt(s,"h:mm a")} – ${zt(a,"h:mm a")}`),n.jsxs("div",{className:`relative px-1 py-0.5 rounded h-full flex flex-col justify-center shadow-sm transition-all duration-150 ${l.length>1?"border-l-4 border-pink-400 shadow":"border-l-4 border-transparent"} hover:ring-2 hover:ring-blue-400 ${d?"font-bold border-l-4 border-yellow-400":""}`,style:{background:r,color:"#222",minHeight:28,fontSize:13,cursor:"pointer"},title:String(m),children:[n.jsxs("div",{className:"flex items-center gap-1",children:[d&&n.jsx(Ln,{className:"w-3 h-3 mr-1"}),n.jsx("span",{className:"font-semibold truncate",style:{maxWidth:80},children:t})]}),s&&a&&(d&&s.getTime()===a.getTime()?n.jsxs("span",{className:"text-xs text-gray-700",children:["Due: ",zt(s,"h:mm a")]}):s.getTime()===a.getTime()?n.jsx("span",{className:"text-xs text-gray-700",children:zt(s,"h:mm a")}):e.allDay?n.jsx("span",{className:"text-xs text-gray-700",children:"All Day"}):n.jsxs("span",{className:"text-xs text-gray-700",children:[zt(s,"h:mm a")," – ",zt(a,"h:mm a")]})),u&&n.jsxs("span",{className:"absolute bottom-0 right-1 text-xs text-blue-700 bg-white bg-opacity-80 rounded px-1",children:["+",l.length-1," more"]})]})},no=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#b5ead7","#c7ceea","#f3b0c3","#f6dfeb","#d0f4de","#f7d6e0","#e2f0cb","#b2f7ef","#f6eac2","#f9f9c5","#e4c1f9","#a9def9","#e2f0cb","#fdffb6","#caffbf"],xZ=({colors:e,onSelect:t,onClose:r,anchorRef:s})=>{const a=N.useRef(null);N.useEffect(()=>{function f(h){a.current&&!a.current.contains(h.target)&&(!s.current||!s.current.contains(h.target))&&r()}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[r,s]);const[i,l]=N.useState({});N.useEffect(()=>{if(s.current&&a.current){const f=s.current.getBoundingClientRect();l({position:"absolute",top:f.bottom+window.scrollY+8,left:f.left+window.scrollX-40,zIndex:1e3})}},[s]);const u=48,d=56,m=2*Math.PI/e.length;return n.jsx("div",{ref:a,style:i,className:"bg-white rounded-full shadow-lg p-2 border border-gray-200",children:n.jsx("svg",{width:d*2,height:d*2,style:{display:"block"},children:e.map((f,h)=>{const g=h*m-Math.PI/2,x=d+u*Math.cos(g),b=d+u*Math.sin(g);return n.jsx("circle",{cx:x,cy:b,r:14,fill:f,stroke:"#fff",strokeWidth:2,style:{cursor:"pointer",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.08))"},onClick:()=>t(f)},f+"-"+h)})})})},yZ=()=>{const{user:e}=Tt(),{courses:t}=Do(),[r,s]=N.useState([]),[a,i]=N.useState(!1),[l,u]=N.useState(null),[d,m]=N.useState(new Date),[f,h]=N.useState("Event"),[g,x]=N.useState([]),[b,v]=N.useState(!1);N.useRef();const[w,C]=N.useState(new Date),[j,_]=N.useState({}),[k,D]=N.useState(null),A=N.useRef({}),T=Lt(),I=e&&(e.role==="teacher"||e.role==="admin"),L=e?[{label:`${e.firstName} ${e.lastName}`,value:e._id},...t.map(X=>({label:X.title,value:X._id,course:X}))]:[],q=X=>{x(U=>U.includes(X)?U.filter(ne=>ne!==X):[...U,X])},O=(X,U)=>j[X]||no[U%no.length]||"#60a5fa",$=(X,U)=>{_(ne=>({...ne,[X]:U}))},z=async()=>{if(!g.length||!e){s([]);return}let X=[];const U=new Set;for(const[ne,pe]of g.entries()){if(pe===e._id){try{const xe=await Re.get("/events?calendar="+e._id),ke=xe.data.data||xe.data;X.push(...ke.filter(ze=>ze.calendar===e._id).map(ze=>({...ze,start:new Date(ze.start),end:new Date(ze.end),title:ze.title,allDay:!1,resource:ze})))}catch(xe){console.error("Error fetching personal events:",xe)}continue}try{const xe=await Re.get("/events?calendar="+pe);let ze=(xe.data.data||xe.data).filter(it=>it.calendar===pe).map(it=>({...it,start:new Date(it.start),end:new Date(it.end),title:it.title,allDay:!1,resource:it})),He=[];console.log(`[Calendar] Fetching assignments for course: ${pe}`);try{const it=t.find(Ge=>Ge._id===pe);if(it&&Array.isArray(it.modules))for(const Ge of it.modules)try{const mt=(await Re.get(`/assignments/module/${Ge._id}`)).data;console.log(`[Calendar] Found ${mt.length} assignments in module ${Ge._id}:`,mt.map(et=>({id:et._id,title:et.title,dueDate:et.dueDate}))),mt.forEach(et=>{U.has(et._id)?console.log(`[Calendar] Skipping duplicate assignment: ${et.title} (${et._id})`):(U.add(et._id),console.log(`[Calendar] Adding assignment: ${et.title} (${et._id}) due on ${et.dueDate}`),He.push({_id:et._id,title:et.title,start:new Date(et.dueDate),end:new Date(et.dueDate),type:"Assignment",color:O(pe,ne),allDay:!1,resource:{...et,readOnly:!0,courseId:pe}}))})}catch(rt){console.error(`Error fetching assignments for module ${Ge._id}:`,rt)}else try{const Ge=await Re.get(`/courses/${pe}/modules`),rt=Ge.data.data||Ge.data;if(Array.isArray(rt))for(const mt of rt)try{const ve=(await Re.get(`/assignments/module/${mt._id}`)).data;console.log(`[Calendar] Found ${ve.length} assignments in module ${mt._id}:`,ve.map(he=>({id:he._id,title:he.title,dueDate:he.dueDate}))),ve.forEach(he=>{U.has(he._id)?console.log(`[Calendar] Skipping duplicate assignment: ${he.title} (${he._id})`):(U.add(he._id),console.log(`[Calendar] Adding assignment: ${he.title} (${he._id}) due on ${he.dueDate}`),He.push({_id:he._id,title:he.title,start:new Date(he.dueDate),end:new Date(he.dueDate),type:"Assignment",color:O(pe,ne),allDay:!1,resource:{...he,readOnly:!0,courseId:pe}}))})}catch(et){console.error(`Error fetching assignments for module ${mt._id}:`,et)}}catch(Ge){console.error(`Error fetching modules for course ${pe}:`,Ge)}}catch(it){console.error("Error processing assignments:",it)}console.log(`[Calendar] Final assignment events for course ${pe}:`,He.map(it=>({id:it._id,title:it.title,start:it.start}))),X.push(...ze,...He)}catch(xe){console.error(`Error fetching course events for ${pe}:`,xe)}}s(X)};N.useEffect(()=>{g.length&&z()},[g]),N.useEffect(()=>{e&&g.length===0&&L.length>0&&x(L.map(X=>X.value))},[e,g,L]);const K={Event:"#93c5fd","My To Do":"#fde68a","Appointment Group":"#fbcfe8",Default:"#e5e7eb"},te=X=>{const U=(X==null?void 0:X.start)||new Date;let ne=X==null?void 0:X.end;(!ne||ne.getTime()===U.getTime())&&(ne=new Date(U.getTime()+60*60*1e3));const pe=f,xe=g[0]||(e?e._id:""),ke=L.findIndex(ze=>ze.value===xe);u({...AE,start:U,end:ne,type:pe,color:O(xe,ke),calendar:xe}),i(!0)},se=X=>{var ke,ze,He,it,Ge,rt,mt,et;console.log("Event clicked:",X),console.log("Current user:",e);const U=((ke=X.resource)==null?void 0:ke.type)||X.type,ne=typeof U=="string"&&U.toLowerCase()==="assignment",pe=((ze=X.resource)==null?void 0:ze._id)||X._id;if(ne&&pe){T(`/assignments/${pe}/view`);return}const xe={_id:X._id,title:typeof X.title=="string"?X.title:"",description:((He=X.resource)==null?void 0:He.description)||"",start:X.start?new Date(X.start):new Date,end:X.end?new Date(X.end):new Date,type:((it=X.resource)==null?void 0:it.type)||"Event",color:((Ge=X.resource)==null?void 0:Ge.color)||"",location:((rt=X.resource)==null?void 0:rt.location)||"",calendar:((mt=X.resource)==null?void 0:mt.calendar)||(e?e._id:"")};console.log("Setting editing event:",xe),u(xe),h(((et=X.resource)==null?void 0:et.type)||"Event"),i(!0)},W=async(X,U)=>{var pe,xe;if(X.preventDefault(),!l)return;const ne={title:(U==null?void 0:U.title)??l.title,description:l.description,start:(pe=(U==null?void 0:U.start)??l.start)==null?void 0:pe.toISOString(),end:(xe=(U==null?void 0:U.end)??l.end)==null?void 0:xe.toISOString(),type:f,color:(U==null?void 0:U.color)??l.color,location:(U==null?void 0:U.location)??l.location,calendar:(U==null?void 0:U.calendar)??l.calendar};try{l._id?await Re.put(`/events/${l._id}`,ne):await Re.post("/events",ne),i(!1),u(null),z()}catch(ke){console.error("Error saving event:",ke)}},M=async()=>{var X,U,ne;if(l&&l._id)try{console.log("Attempting to delete event:",l._id);const pe=l.type||l.type;typeof pe=="string"&&pe.toLowerCase()==="assignment"?await Re.delete(`/assignments/${l._id}`):await Re.delete(`/events/${l._id}`),console.log("Event deleted successfully"),i(!1),u(null),z()}catch(pe){console.error("Error deleting event:",pe),console.error("Error response:",(X=pe.response)==null?void 0:X.data),alert(`Failed to delete event: ${((ne=(U=pe.response)==null?void 0:U.data)==null?void 0:ne.message)||pe.message||"Unknown error"}`)}},Y=X=>({style:{backgroundColor:X.color||(X.type==="assignment"?"#2563eb":X.type==="quiz"?"#22c55e":"#a3a3a3"),borderRadius:"8px",color:"#fff",border:"none",paddingLeft:"8px",paddingRight:"8px"}}),P=X=>{m(X)};zt(d,"MMMM yyyy");const G=aj(d);Sy(d);const Z=uj(d),F=G.getDay();let Ne=new Array(7).fill(null),ye=1;for(let X=0;X<7;X++)X>=F&&(Ne[X]=new Date(d.getFullYear(),d.getMonth(),ye++));for(;ye<=Z;){Ne=new Array(7).fill(null);for(let X=0;X<7&&ye<=Z;X++)Ne[X]=new Date(d.getFullYear(),d.getMonth(),ye++)}const B=X=>n.jsxs("div",{className:"rbc-toolbar flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("TODAY"),children:"Today"}),n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("PREV"),children:"Back"}),n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("NEXT"),children:"Next"})]}),n.jsx("span",{className:"rbc-toolbar-label text-lg font-semibold",children:X.label}),n.jsxs("div",{className:"flex gap-2 items-center",children:[["month","week","day","agenda"].map(U=>n.jsx("button",{type:"button",className:`px-3 py-1 rounded-lg transition font-medium capitalize ${X.view===U?"bg-blue-600 text-white shadow":"bg-gray-100 hover:bg-blue-100 active:bg-blue-200 text-gray-700"}`,onClick:()=>X.onView(U),children:U.charAt(0).toUpperCase()+U.slice(1)},U)),n.jsx("button",{type:"button",className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-xl ml-2 shadow hover:bg-blue-700 transition",onClick:()=>{const U=new Date,ne=f;u({...AE,start:U,end:new Date(U.getTime()+60*60*1e3),type:ne,color:K[ne]||K.Default,calendar:e?e._id:""}),h("Event"),i(!0)},children:"+"})]})]}),re=({isEdit:X})=>{const[U,ne]=N.useState((l==null?void 0:l.title)??""),[pe,xe]=N.useState((l==null?void 0:l.location)??""),[ke,ze]=N.useState((l==null?void 0:l.color)||K[(l==null?void 0:l.type)||"Default"]),[He,it]=N.useState(!1),[Ge,rt]=N.useState((l==null?void 0:l.calendar)||(e?e._id:"")),[mt,et]=N.useState(null),[ve,he]=N.useState(""),[ce,Ee]=N.useState(""),[Ue,ie]=N.useState("");N.useRef(null),N.useEffect(()=>{if(l){ne(l.title??""),xe(l.location??"");const Q=L.findIndex(Ve=>Ve.value===(l.calendar||(e?e._id:"")));ze(l.color||O(l.calendar||(e?e._id:""),Q)),rt(l.calendar||(e?e._id:"")),it(!1);const ae=new Date(l.start),Te=new Date(l.end);he(gZ(ae)),Ee(TE(ae)),ie(TE(Te))}},[l]);const be=[];for(let Q=0;Q<24;Q++)for(let ae=0;ae<60;ae+=5)be.push(`${Q.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`);const me=async Q=>{if(Q.preventDefault(),et(null),f==="My To Do"){if(!U||!ve){et("Title and date are required.");return}try{await Re.post("/todos",{title:U,dueDate:ve}),i(!1),u(null)}catch{et("Failed to create to-do")}return}const ae=new Date(`${ve}T${ce}`),Te=new Date(`${ve}T${Ue}`);if(!ae||!Te||Te<=ae){et("End time must be after start time.");return}if(!I&&!e){et("User not found.");return}W(Q,{title:U,location:pe,color:ke,start:ae,end:Te,calendar:I?Ge:e?e._id:""})};return n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm z-50",children:n.jsxs("form",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-lg",onSubmit:me,style:{minWidth:400},children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold",children:X?"Edit Event":"Create Event"}),n.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>{i(!1),u(null)},children:"×"})]}),n.jsx("div",{className:"flex border-b mb-4",children:pZ.map(Q=>n.jsx("button",{type:"button",className:`px-4 py-2 font-semibold ${f===Q.value?"border-b-4 border-purple-600 text-purple-700":"text-gray-500"}`,onClick:()=>{h(Q.value),u(l?{...l,type:Q.value}:null),He||ze(K[Q.value]||K.Default)},children:Q.label},Q.value))}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-title",className:"block text-sm font-medium mb-1",children:"Title:"}),n.jsx("input",{id:"event-title",name:"title",className:"border p-2 w-full rounded",placeholder:"Enter event title",type:"text",value:U,onChange:Q=>ne(Q.target.value),required:!0})]}),f!=="My To Do"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-color",className:"block text-sm font-medium mb-1",children:"Color:"}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("input",{id:"event-color",name:"color",type:"color",className:"w-10 h-10 p-0 border-none bg-transparent cursor-pointer",value:ke,onChange:Q=>{ze(Q.target.value),it(!0)},style:{background:"none"}}),n.jsx("button",{type:"button",className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-sm",onClick:()=>{const Q=no[Math.floor(Math.random()*no.length)];ze(Q),it(!0)},children:"Random"}),no.map((Q,ae)=>n.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border-2 border-white shadow mx-0.5 focus:outline-none focus:ring-2 focus:ring-blue-400",style:{background:Q,outline:ke===Q?"2px solid #2563eb":"none"},onClick:()=>{ze(Q),it(!0)},"aria-label":`Pick color ${Q}`},Q+"-"+ae))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-date",className:"block text-sm font-medium mb-1",children:"Date:"}),n.jsx("input",{id:"event-date",name:"date",className:"border p-2 w-full rounded",type:"date",value:ve,onChange:Q=>he(Q.target.value),required:!0})]}),f!=="My To Do"&&n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"event-time-from",className:"block text-sm font-medium mb-1",children:"From:"}),n.jsx("select",{id:"event-time-from",name:"startTime",className:"border p-2 w-full rounded",value:ce,onChange:Q=>Ee(Q.target.value),required:!0,children:be.map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"event-time-to",className:"block text-sm font-medium mb-1",children:"To:"}),n.jsx("select",{id:"event-time-to",name:"endTime",className:"border p-2 w-full rounded",value:Ue,onChange:Q=>ie(Q.target.value),required:!0,children:be.map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]})]}),mt&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:mt}),f!=="My To Do"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-location",className:"block text-sm font-medium mb-1",children:"Location:"}),n.jsx("input",{id:"event-location",name:"location",className:"border p-2 w-full rounded",placeholder:"Location",type:"text",value:pe,onChange:Q=>xe(Q.target.value)})]}),f!=="My To Do"&&(I?n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-calendar",className:"block text-sm font-medium mb-1",children:"Calendar:"}),n.jsx("select",{id:"event-calendar",name:"calendar",className:"border p-2 w-full rounded",value:Ge,onChange:Q=>{if(rt(Q.target.value),!He){const ae=L.findIndex(Te=>Te.value===Q.target.value);ze(O(Q.target.value,ae))}},required:!0,children:L.map(Q=>n.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}):null),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",children:"More Options"}),n.jsxs("div",{className:"flex gap-2",children:[(()=>{const Q=X&&(I||e&&(l==null?void 0:l.calendar)===e._id);return console.log("Delete button visibility check:",{isEdit:X,isTeacherOrAdmin:I,userRole:e==null?void 0:e.role,userCalendar:e==null?void 0:e._id,eventCalendar:l==null?void 0:l.calendar,canDelete:Q}),Q?n.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",onClick:M,children:"Delete"}):null})(),n.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Submit"})]})]})]})})};return window.allCalendarEvents=r,n.jsxs("div",{className:"flex p-8 gap-8",children:[n.jsx("div",{className:"flex-1",children:n.jsx(iZ,{localizer:hZ,events:r,startAccessor:"start",endAccessor:"end",style:{height:600,borderRadius:"16px",boxShadow:"0 4px 24px rgba(0,0,0,0.08)"},popup:!0,selectable:!0,date:d,onNavigate:P,onSelectSlot:te,onSelectEvent:se,eventPropGetter:Y,showMultiDayTimes:!1,components:{toolbar:B,event:Rl,month:{event:Rl},week:{event:Rl},day:{event:Rl},agenda:{event:Rl}}})}),n.jsxs("div",{className:"w-80 flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border rounded-xl shadow-md p-4 mb-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("button",{onClick:()=>C(X=>GM(X)),className:"px-2 py-1 rounded-full bg-gray-100 hover:bg-blue-100 text-lg font-bold transition",children:"<"}),n.jsx("div",{className:"text-center font-semibold text-lg",children:zt(w,"MMMM yyyy")}),n.jsx("button",{onClick:()=>C(X=>C4(X,1)),className:"px-2 py-1 rounded-full bg-gray-100 hover:bg-blue-100 text-lg font-bold transition",children:">"})]}),n.jsxs("table",{className:"w-full text-xs select-none",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"font-semibold text-gray-500",children:"Su"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Mo"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Tu"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"We"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Th"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Fr"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Sa"})]})}),n.jsx("tbody",{children:(()=>{const X=aj(w);Sy(w);const U=uj(w),ne=X.getDay(),pe=[];let xe=new Array(7).fill(null),ke=1;for(let ze=0;ze<7;ze++)ze>=ne&&(xe[ze]=new Date(w.getFullYear(),w.getMonth(),ke++));for(pe.push(xe);ke<=U;){xe=new Array(7).fill(null);for(let ze=0;ze<7&&ke<=U;ze++)xe[ze]=new Date(w.getFullYear(),w.getMonth(),ke++);pe.push(xe)}return pe.map((ze,He)=>n.jsx("tr",{children:ze.map((it,Ge)=>n.jsx("td",{className:it&&NM(it,w)?`cursor-pointer rounded-full w-8 h-8 text-center align-middle transition ${kv(it,w)?"bg-blue-200 text-blue-900 font-bold shadow":"hover:bg-blue-100 hover:text-blue-700"}`:"text-gray-300",onClick:()=>it&&C(it),children:it?zt(it,"d").padStart(2,"0"):""},Ge))},He))})()})]})]}),n.jsx("div",{className:"bg-white border rounded p-4 relative",children:n.jsxs("div",{className:"max-h-44 overflow-y-auto pr-1",children:[n.jsx("div",{className:"font-semibold mb-2",children:"CALENDARS"}),L.map((X,U)=>n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx("input",{type:"checkbox",id:`calendar-checkbox-${X.value}`,name:`calendar-checkbox-${X.value}`,checked:g.includes(X.value),onChange:()=>q(X.value),className:"mr-2"}),n.jsx("button",{type:"button",ref:ne=>A.current[X.value]=ne,className:"w-3 h-3 rounded-full mr-2 border-2 border-white shadow focus:outline-none focus:ring-2 focus:ring-blue-400",style:{background:O(X.value,U),outline:j[X.value]?"2px solid #2563eb":"none"},onClick:()=>D(X.value),"aria-label":`Pick color for ${X.label}`,title:"Change calendar color"}),n.jsx("span",{children:X.label})]},X.value)),k&&n.jsx("div",{className:"flex justify-center mt-4",children:n.jsx(xZ,{colors:no,onSelect:X=>{$(k,X),D(null)},onClose:()=>D(null),anchorRef:{current:null}})})]})}),n.jsx("div",{className:"max-h-64 overflow-y-auto pr-1",children:n.jsx(P4,{})})]}),a&&l&&e&&n.jsx(re,{isEdit:!!l._id})]})},dd=async()=>(await Re.get("/inbox/conversations")).data,PE=async e=>(await Re.get(`/inbox/conversations/${e}/messages`)).data,vZ=async(e,t)=>(await Re.post(`/inbox/conversations/${e}/messages`,{body:t})).data,bZ=async e=>(await Re.get(`/users/search?name=${encodeURIComponent(e)}`)).data.data,wZ=async e=>(await Re.post(`/inbox/conversations/${e}/star`)).data,NZ=async(e,t)=>(await Re.post(`/inbox/conversations/${e}/move`,{folder:t})).data,RE=async(e,t)=>{const r=e.map(s=>NZ(s,t));return Promise.all(r)},jZ=async e=>(await Re.delete(`/inbox/conversations/${e}/forever`)).data,SZ=async e=>{const t=e.map(r=>jZ(r));return Promise.all(t)};function kZ(e){return e.charAt(0).toUpperCase()+e.slice(1)}const IE=e=>e?e.firstName&&e.lastName?(e.firstName[0]+e.lastName[0]).toUpperCase():e.firstName?e.firstName[0].toUpperCase():e.lastName?e.lastName[0].toUpperCase():e.email?e.email[0].toUpperCase():"?":"?",ME=e=>{const t=["bg-blue-500","bg-green-500","bg-pink-500","bg-yellow-500","bg-purple-500","bg-indigo-500","bg-red-500","bg-teal-500","bg-orange-500","bg-gray-500"];let r=0;for(let s=0;s<(e||"").length;s++)r=(r<<5)-r+e.charCodeAt(s),r|=0;return t[Math.abs(r)%t.length]},CZ=()=>{var ta;const[e,t]=N.useState([]),[r,s]=N.useState(!0),[a,i]=N.useState(null),[l,u]=N.useState(null),[d,m]=N.useState([]),[f,h]=N.useState(!1),[g,x]=N.useState(null),[b,v]=N.useState(""),[w,C]=N.useState(!1),[j,_]=N.useState(null),[k,D]=N.useState(!1),[A,T]=N.useState([]),[I,L]=N.useState(""),[q,O]=N.useState([]),[$,z]=N.useState(""),[K,te]=N.useState(""),[se,W]=N.useState(!1),[M,Y]=N.useState(null),[P,G]=N.useState(""),[Z,F]=N.useState([]),[Ne,ye]=N.useState(!1),[B,re]=N.useState(""),[X,U]=N.useState([]),ne=N.useRef(null),[pe,xe]=N.useState(""),[ke,ze]=N.useState(!1),He=N.useRef(null),[it,Ge]=N.useState(!1),[rt,mt]=N.useState([]),[et,ve]=N.useState(!1),[he,ce]=N.useState(!1),[Ee,Ue]=N.useState([{value:"all",label:"All Courses"}]),[ie,be]=N.useState("all"),me=[{value:"inbox",label:"Inbox"},{value:"sent",label:"Sent"},{value:"archived",label:"Archived"},{value:"favorite",label:"Favorite"},{value:"deleted",label:"Deleted"}],[Q,ae]=N.useState("inbox"),[Te,Ve]=N.useState(""),{user:We}=Tt(),nt=(We==null?void 0:We._id)||"",st=N.useRef(null);N.useRef(null);const $e=()=>{if(rt.length===0){alert("Please select conversations to reply to");return}alert(`Reply to ${rt.length} conversation(s)`)},lt=async()=>{if(rt.length===0){alert("Please select conversations to archive");return}ve(!0);try{await RE(rt,"archived");const fe=await dd();t(fe),mt([])}catch{alert("Failed to archive conversations")}finally{ve(!1)}},gt=async()=>{if(rt.length===0){alert("Please select conversations to delete");return}if(Q==="deleted"){if(!confirm(`Are you sure you want to permanently delete ${rt.length} conversation(s)? This cannot be undone.`))return}else if(!confirm(`Are you sure you want to delete ${rt.length} conversation(s)?`))return;ve(!0);try{Q==="deleted"?await SZ(rt):await RE(rt,"deleted");const fe=await dd();t(fe),mt([])}catch{alert("Failed to delete conversations")}finally{ve(!1)}};N.useEffect(()=>{(async()=>{s(!0),i(null);try{const qe=await dd();t(qe)}catch{i("Failed to load conversations")}finally{s(!1)}})()},[]);const Rt=async fe=>{u(fe),m([]),h(!0),x(null);try{fe.unreadCount>0&&(await Re.post(`/inbox/conversations/${fe._id}/read`),t(sr=>sr.map(Yt=>Yt._id===fe._id?{...Yt,unreadCount:0}:Yt)));const qe=await PE(fe._id);m(qe)}catch{x("Failed to load messages")}finally{h(!1)}},Kt=async fe=>{if(fe.preventDefault(),!(!b.trim()||!l)){C(!0),_(null);try{await vZ(l._id,b),v(""),ce(!1);const qe=await PE(l._id);m(qe)}catch{_("Failed to send message")}finally{C(!1)}}};N.useEffect(()=>{if(I.length<2){O([]);return}let fe=!0;return Y(null),bZ(I).then(qe=>{fe&&O(qe)}).catch(()=>{fe&&Y("Failed to search users")}),()=>{fe=!1}},[I]);const Vt=fe=>{A.some(qe=>qe._id===fe._id)||T([...A,fe]),L(""),O([])},Qt=fe=>{T(A.filter(qe=>qe._id!==fe))},nr=async fe=>{var qe,sr;fe.preventDefault(),W(!0),Y("");try{let Yt=A.map(rn=>rn._id);B==="sections"&&(Yt=(await Re.get(`/api/courses/${P}/students`)).data.map(xr=>xr._id)),await Re.post("/inbox/conversations",{course:P,participantIds:Yt,subject:$,body:K,sendIndividually:it}),D(!1),T([]),z(""),te(""),re(""),U([]),Ge(!1)}catch(Yt){Y(((sr=(qe=Yt.response)==null?void 0:qe.data)==null?void 0:sr.message)||"Failed to send message")}finally{W(!1)}};N.useEffect(()=>{k&&Re.get("/courses").then(fe=>{F(fe.data.data||[]),fe.data.data&&fe.data.data.length>0&&G(fe.data.data[0]._id)})},[k]),N.useEffect(()=>{!P||!B||(B==="teachers"?(We==null?void 0:We.role)==="teacher"||(We==null?void 0:We.role)==="admin"?Re.get("/users/search?role=teacher,admin").then(fe=>{U(fe.data.data||[])}):Re.get(`/api/courses/${P}`).then(fe=>{const qe=fe.data.data.instructor?[fe.data.data.instructor]:[];U(qe)}):B==="students"?Re.get(`/api/courses/${P}/students`).then(fe=>{U(fe.data||[])}):B==="sections"&&U([]))},[P,B,We]),N.useEffect(()=>{if(!Ne)return;function fe(qe){ne.current&&!ne.current.contains(qe.target)&&ye(!1)}return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[Ne]),N.useEffect(()=>{if(pe.length<2){O([]);return}return He.current&&clearTimeout(He.current),He.current=setTimeout(()=>{let fe="";B==="teachers"?fe=(We==null?void 0:We.role)==="teacher"||(We==null?void 0:We.role)==="admin"?"teacher,admin":"teacher":B==="students"&&(fe="student"),Re.get(`/users/search?name=${encodeURIComponent(pe)}&role=${fe}`).then(qe=>O(qe.data.data||[])).catch(()=>O([]))},300),()=>{He.current&&clearTimeout(He.current)}},[pe,B,We]),N.useEffect(()=>{Re.get("/courses").then(fe=>{const qe=(fe.data.data||[]).map(sr=>({value:sr._id,label:sr.title}));Ue([{value:"all",label:"All Courses"},...qe])})},[]);const Xt=N.useMemo(()=>e.filter(fe=>{var rn,xr,nn;if(ie!=="all"&&fe.course!==ie)return!1;const qe=fe.participants.find(Ur=>Ur._id===nt),sr=(qe==null?void 0:qe.folder)||fe.folder||"inbox";if(Q==="inbox"&&sr!=="inbox"||Q==="sent"&&fe.createdBy!==nt||Q==="archived"&&sr!=="archived"||Q==="favorite"&&!(qe!=null&&qe.starred)||Q==="deleted"&&sr!=="deleted")return!1;const Yt=Te.toLowerCase();if(Yt){const Ur=((rn=fe.subject)==null?void 0:rn.toLowerCase())||"",Bt=((nn=(xr=fe.lastMessage)==null?void 0:xr.body)==null?void 0:nn.toLowerCase())||"",$r=fe.participants.map(fn=>fn.name||`${fn.firstName||""} ${fn.lastName||""}`).join(", ").toLowerCase();if(!Ur.includes(Yt)&&!Bt.includes(Yt)&&!$r.includes(Yt))return!1}return!0}),[e,ie,Q,Te,nt]);N.useEffect(()=>{mt(fe=>fe.filter(qe=>Xt.some(sr=>sr._id===qe)))},[Xt]);const ss=_Z(Xt),Di=Object.keys(ss).sort((fe,qe)=>qe.localeCompare(fe)),Oa=async fe=>{try{await wZ(fe._id);const qe=await dd();t(qe)}catch{}};return n.jsxs("div",{className:"flex flex-col h-full min-h-[80vh] bg-gray-100 dark:bg-gray-900",children:[n.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 border-b bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm sticky top-0 z-20",style:{minHeight:64},children:[n.jsxs("div",{className:"relative",children:[n.jsx("select",{id:"topbar-course-dropdown",name:"topbarCourseDropdown",className:"appearance-none border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-200",value:ie,onChange:fe=>be(fe.target.value),style:{minWidth:140},children:Ee.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value))}),n.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"▼"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{id:"topbar-folder-dropdown",name:"topbarFolderDropdown",className:"appearance-none border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-200",value:Q,onChange:fe=>ae(fe.target.value),style:{minWidth:110},children:me.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value))}),n.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"▼"})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx("button",{className:"p-2 rounded hover:bg-blue-100 text-blue-600",title:"Compose",onClick:()=>D(!0),children:n.jsx(wf,{size:22})}),n.jsx("button",{className:`p-2 rounded ${rt.length>0?"hover:bg-blue-200 text-blue-600":"hover:bg-gray-200 text-gray-400"}`,title:"Reply",onClick:$e,disabled:rt.length===0||et,children:n.jsx(Ql,{size:22})}),n.jsx("button",{className:`p-2 rounded ${rt.length>0?"hover:bg-yellow-200 text-yellow-600":"hover:bg-gray-200 text-gray-400"}`,title:"Archive",onClick:lt,disabled:rt.length===0||et,children:n.jsx(QM,{size:22})}),n.jsx("button",{className:`p-2 rounded ${rt.length>0?"hover:bg-red-200 text-red-600":"hover:bg-gray-200 text-gray-400"}`,title:"Delete",onClick:gt,disabled:rt.length===0||et,children:n.jsx(As,{size:22})})]}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"relative flex items-center",style:{minWidth:260},children:[n.jsx("label",{htmlFor:"inbox-search",className:"sr-only",children:"Search conversations"}),n.jsx("input",{id:"inbox-search",name:"search",ref:st,className:"border border-gray-200 dark:border-gray-700 rounded-full pl-10 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full shadow-sm",type:"text",placeholder:"Search...",value:Te,onChange:fe=>Ve(fe.target.value)}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:n.jsx(bf,{size:18})})]})]}),n.jsxs("div",{className:"flex flex-1 gap-6 px-6 py-6",children:[k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-0 w-full max-w-xl relative border border-gray-200 dark:border-gray-700",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl",onClick:()=>D(!1),children:"×"}),n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 text-xl font-semibold",children:"Compose Message"}),n.jsxs("form",{onSubmit:nr,className:"px-6 py-4",children:[n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("label",{htmlFor:"compose-course",className:"w-20 text-gray-700 font-medium",children:"Course"}),n.jsx("select",{id:"compose-course",name:"course",className:"border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 flex-1",value:P,onChange:fe=>{G(fe.target.value),re(""),U([])},children:Z.map(fe=>n.jsx("option",{value:fe._id,children:fe.title},fe._id))})]}),n.jsxs("div",{className:"mb-4 flex items-center relative",ref:ne,children:[n.jsx("span",{className:"w-20 text-gray-700 font-medium",children:"To"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsxs("div",{id:"compose-to",className:"flex items-center border border-gray-200 dark:border-gray-700 rounded px-3 py-2 bg-white dark:bg-gray-900 cursor-text",children:[n.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[B==="sections"?P?n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center",children:["All Students in ",((ta=Z.find(fe=>fe._id===P))==null?void 0:ta.title)||"Course",n.jsx("button",{type:"button",className:"ml-1 text-xs text-red-500",onClick:fe=>{fe.stopPropagation(),re(""),G("")},children:"×"})]}):n.jsx("span",{className:"text-gray-400 text-xs",children:"Select a course..."}):A.map(fe=>n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center",children:[fe.firstName," ",fe.lastName,n.jsx("button",{type:"button",className:"ml-1 text-xs text-red-500",onClick:qe=>{qe.stopPropagation(),Qt(fe._id)},children:"×"})]},fe._id)),B!=="sections"&&n.jsx("input",{type:"text",id:"compose-to-input",name:"composeToInput",className:"flex-1 min-w-24 outline-none border-none bg-transparent text-sm",placeholder:A.length===0?"Type name or email...":"",value:pe,onChange:fe=>{xe(fe.target.value),ze(!1)},onFocus:()=>{ze(!1)}})]}),n.jsx("button",{type:"button",className:"ml-2 text-gray-400 hover:text-gray-600",tabIndex:-1,"aria-label":"Choose group",onClick:fe=>{fe.stopPropagation(),ze(qe=>!qe)},children:n.jsx(pL,{size:20})})]}),ke&&!B&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20",children:[n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{re("teachers"),ze(!1)},children:"Teachers"}),n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{re("students"),ze(!1)},children:"Students"}),n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{re("sections"),ze(!1),G("")},children:"Course Sections"})]}),pe.length>=2&&q.length>0&&n.jsx("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:q.map(fe=>n.jsxs("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>{Vt(fe),xe(""),O([])},children:[fe.firstName," ",fe.lastName," (",fe.email,")"]},fe._id))}),B&&B!=="sections"&&X.length>0&&!pe&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center px-2 py-2 border-b cursor-pointer hover:bg-gray-100",onClick:()=>re(""),children:[n.jsx(mj,{size:18}),n.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:"Back"})]}),X.map(fe=>n.jsxs("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>{Vt(fe),re("")},children:[fe.firstName," ",fe.lastName," (",fe.email,")"]},fe._id))]}),B==="sections"&&!P&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center px-2 py-2 border-b cursor-pointer hover:bg-gray-100",onClick:()=>re(""),children:[n.jsx(mj,{size:18}),n.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:"Back"})]}),Z.map(fe=>n.jsx("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>G(fe._id),children:fe.title},fe._id))]})]})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("label",{htmlFor:"compose-subject",className:"w-20 text-gray-700 font-medium",children:"Subject"}),n.jsx("input",{id:"compose-subject",name:"subject",type:"text",className:"border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 flex-1",value:$,onChange:fe=>z(fe.target.value),disabled:se})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("input",{id:"send-individually",name:"sendIndividually",type:"checkbox",className:"mr-2",checked:it,onChange:fe=>Ge(fe.target.checked),disabled:se}),n.jsx("label",{htmlFor:"send-individually",className:"text-gray-700 text-sm select-none",children:"Send an individual message to each recipient"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"compose-message",className:"block text-gray-700 font-medium mb-1",children:"Message"}),n.jsx("textarea",{id:"compose-message",name:"message",className:"w-full border border-gray-200 dark:border-gray-700 rounded p-2 resize-none bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",rows:6,value:K,onChange:fe=>te(fe.target.value),disabled:se})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600",title:"Attach file",disabled:!0,children:n.jsx(eL,{size:22})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:()=>D(!1),disabled:se,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-red-600 text-white",disabled:se||!A.length&&(B!=="sections"||!P)||!$.trim()||!K.trim(),children:se?"Sending...":"Send"})]})]}),M&&n.jsx("div",{className:"text-red-500 mt-2",children:M})]})]})}),n.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 p-0 overflow-y-auto flex flex-col",children:[!r&&!a&&e.length>0&&n.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center",children:[n.jsx("input",{type:"checkbox",id:"select-all-conversations",name:"selectAllConversations",checked:rt.length===Xt.length&&Xt.length>0,onChange:fe=>{fe.target.checked?mt(Xt.map(qe=>qe._id)):mt([])},className:"mr-3 accent-blue-600 w-4 h-4"}),n.jsx("span",{className:"text-sm text-gray-600",children:et?n.jsx("span",{className:"text-blue-600",children:"Processing..."}):rt.length>0?`${rt.length} selected`:`${Xt.length} conversations`})]}),r&&n.jsx("div",{className:"p-4",children:"Loading..."}),a&&n.jsx("div",{className:"p-4 text-red-500",children:a}),!r&&!a&&e.length===0&&n.jsx("div",{className:"p-4 text-gray-400",children:"No conversations yet."}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:Di.map(fe=>n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-300 font-semibold bg-gray-50 dark:bg-gray-900 sticky top-0 z-10 rounded-t-2xl",children:EZ(fe)}),ss[fe].map(qe=>{var Ur;const sr=qe.unreadCount>0,Yt=qe.participants.find(Bt=>{var $r;return(($r=Bt._id)==null?void 0:$r.toString())===(nt==null?void 0:nt.toString())})||qe.participants[0],rn=Yt==null?void 0:Yt.starred,xr=qe.participants.filter(Bt=>{var $r;return(($r=Bt._id)==null?void 0:$r.toString())!==(nt==null?void 0:nt.toString())}),nn=xr.map(Bt=>Bt.firstName&&Bt.lastName?`${Bt.firstName} ${Bt.lastName}`.trim():Bt.firstName||Bt.lastName||Bt.email||"Unknown").join(", ");return n.jsxs("div",{className:`flex flex-col px-4 py-3 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 cursor-pointer transition-all duration-150 hover:bg-blue-50 dark:hover:bg-blue-900 ${l&&l._id===qe._id?"bg-blue-100 dark:bg-blue-900 border-l-4 border-l-blue-500":""}`,onClick:Bt=>{Bt.target.tagName!=="INPUT"&&Rt(qe)},children:[n.jsxs("div",{className:"flex items-center min-h-[24px] gap-2",children:[n.jsx("input",{type:"checkbox",id:`select-conv-${qe._id}`,name:"selectConversation",checked:rt.includes(qe._id),onChange:Bt=>mt($r=>Bt.target.checked?Array.from(new Set([...$r,qe._id])):$r.filter(fn=>fn!==qe._id)),className:"mr-2 accent-blue-600 w-4 h-4",onClick:Bt=>Bt.stopPropagation()}),n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm mr-2 overflow-hidden ${ME(qe._id)}`,children:(Ur=xr[0])!=null&&Ur.profilePicture?n.jsx("img",{src:xr[0].profilePicture.startsWith("http")?xr[0].profilePicture:`http://localhost:5000${xr[0].profilePicture}`,alt:nn,className:"w-8 h-8 object-cover rounded-full"}):IE(xr[0])}),n.jsx("span",{className:`truncate font-medium ${sr?"font-bold text-blue-900":"text-gray-900"}`,children:nn||"Unknown"}),sr&&n.jsx("span",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("div",{className:"flex flex-col items-end ml-auto min-w-[48px]",children:n.jsx("span",{className:"text-xs text-gray-400",children:qe.lastMessage?zt(new Date(qe.lastMessage.createdAt),"p"):""})})]}),n.jsxs("div",{className:"flex items-center min-h-[22px] mt-1",children:[n.jsx("span",{className:"cursor-pointer flex items-center justify-center mr-2 transition-colors",title:rn?"Unstar":"Star",onClick:Bt=>{Bt.stopPropagation(),Oa(qe)},style:{width:18,height:18},children:n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:rn?"#2563eb":"none",stroke:"#2563eb",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:n.jsx("polygon",{points:"12 17.27 18.18 21 16.54 13.97 22 9.24 14.81 8.63 12 2 9.19 8.63 2 9.24 7.46 13.97 5.82 21 12 17.27",fill:rn?"#2563eb":"none",stroke:"#2563eb"})})}),n.jsx("span",{className:`truncate flex-1 ${sr?"font-bold text-blue-900":"text-gray-700"}`,children:qe.subject}),sr&&n.jsx("span",{className:"ml-2 bg-blue-500 text-white text-xs rounded-full px-2 py-0.5",children:qe.unreadCount})]}),n.jsx("div",{className:"truncate text-xs text-gray-500 mt-1",children:qe.lastMessage?qe.lastMessage.body:n.jsx("span",{className:"italic text-gray-400",children:"No messages"})})]},qe._id)})]},fe))})]}),n.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 p-0 flex flex-col min-h-[600px]",children:[!l&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[n.jsx("svg",{width:"96",height:"96",fill:"none",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Zm2 0 8 7 8-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),n.jsx("div",{className:"mt-4 text-lg",children:"No Conversations Selected"})]}),l&&n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center justify-between sticky top-0 z-10 bg-white dark:bg-gray-800 rounded-t-2xl shadow-sm px-6 pt-6",children:n.jsx("div",{className:"font-bold text-2xl",children:l.subject})}),n.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:[f&&n.jsx("div",{children:"Loading messages..."}),g&&n.jsx("div",{className:"text-red-500",children:g}),!f&&!g&&d.length===0&&n.jsx("div",{className:"text-gray-400",children:"No messages yet."}),n.jsx("div",{className:"space-y-6 mb-6",children:d.map((fe,qe)=>{var xr,nn,Ur,Bt,$r,fn,Ai,zn,La,$a;const Yt=((xr=fe.senderId)==null?void 0:xr.firstName)&&((nn=fe.senderId)==null?void 0:nn.firstName.trim())||((Ur=fe.senderId)==null?void 0:Ur.lastName)&&((Bt=fe.senderId)==null?void 0:Bt.lastName.trim())?`${(($r=fe.senderId)==null?void 0:$r.firstName)||""} ${((fn=fe.senderId)==null?void 0:fn.lastName)||""}`.trim():((Ai=fe.senderId)==null?void 0:Ai.email)||"Unknown User";d.length-1;const rn=((zn=fe.senderId)==null?void 0:zn._id)===nt;return n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-b-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden ${ME((La=fe.senderId)==null?void 0:La._id)}`,children:($a=fe.senderId)!=null&&$a.profilePicture?n.jsx("img",{src:fe.senderId.profilePicture.startsWith("http")?fe.senderId.profilePicture:`http://localhost:5000${fe.senderId.profilePicture}`,alt:Yt,className:"w-10 h-10 object-cover rounded-full"}):IE(fe.senderId)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Yt||"Unknown User"}),n.jsx("div",{className:"text-sm text-gray-500",children:kZ(zt(new Date(fe.createdAt),"MMMM d, yyyy 'at' h:mmaaa"))})]})]}),rn&&n.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Sent"})]}),n.jsx("div",{className:"pl-13",children:n.jsx("div",{className:"text-gray-900 dark:text-gray-100 whitespace-pre-line break-words leading-relaxed",children:fe.body})})]},fe._id)})})]}),he&&n.jsxs("form",{className:"flex flex-col gap-2 mt-2 px-6 pb-6",onSubmit:Kt,children:[n.jsx("label",{htmlFor:"reply-message",className:"sr-only",children:"Reply"}),n.jsx(fi,{content:b,onChange:v,placeholder:"Type your reply...",className:"flex-1 border border-gray-200 dark:border-gray-700 rounded p-2 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 shadow",disabled:w||!b.trim(),children:w?"Sending...":"Send"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:()=>ce(!1),disabled:w,children:"Cancel"})]})]}),!he&&n.jsx("div",{className:"px-6 pb-6 flex justify-end",children:n.jsxs("button",{onClick:()=>ce(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Reply"]})}),j&&n.jsx("div",{className:"text-red-500 mt-2 px-6",children:j})]})]})]})]})};function _Z(e){const t={};return e.forEach(r=>{const s=r.lastMessage?zt(new Date(r.lastMessage.createdAt),"yyyy-MM-dd"):"No Date";t[s]||(t[s]=[]),t[s].push(r)}),t}function EZ(e){const t=A4(e+"T00:00:00");return jM(t)?"Today":CM(t)?"Yesterday":zt(t,"MMM d, yyyy")}const CP=N.createContext(void 0),DZ=({children:e})=>{const[t,r]=N.useState(()=>localStorage.getItem("theme")||"light");N.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")},[t]);const s=a=>{r(a)};return n.jsx(CP.Provider,{value:{theme:t,setTheme:s},children:e})},AZ=()=>{const e=N.useContext(CP);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},TZ=[{key:"profile",label:"Profile"},{key:"settings",label:"Settings"},{key:"notifications",label:"Notifications"},{key:"activity",label:"Recent Login Activity"}];function PZ(){var _,k;const{user:e,setUser:t}=Tt(),[r,s]=V.useState(!1),[a,i]=V.useState((e==null?void 0:e.firstName)||""),[l,u]=V.useState((e==null?void 0:e.lastName)||""),[d,m]=V.useState((e==null?void 0:e.email)||""),[f,h]=V.useState((e==null?void 0:e.bio)||""),[g,x]=V.useState(!1),[b,v]=V.useState(!1);V.useEffect(()=>{i((e==null?void 0:e.firstName)||""),u((e==null?void 0:e.lastName)||""),m((e==null?void 0:e.email)||""),h((e==null?void 0:e.bio)||"")},[e]);const w=async()=>{x(!0);try{const D=await XI({firstName:a,lastName:l,bio:f});D.data&&D.data.user&&t(D.data.user),s(!1)}catch(D){D.response&&D.response.data&&D.response.data.message?(console.error("Profile update error:",D.response.data),alert("Failed to update profile: "+D.response.data.message)):D.message?(console.error("Profile update error:",D),alert("Failed to update profile: "+D.message)):(console.error("Profile update error:",D),alert("Failed to update profile: Unknown error"))}finally{x(!1)}},C=()=>{i((e==null?void 0:e.firstName)||""),u((e==null?void 0:e.lastName)||""),m((e==null?void 0:e.email)||""),s(!1)},j=async D=>{if(!D.target.files||D.target.files.length===0)return;const A=D.target.files[0];v(!0);try{const T=await JI(A);T.data&&T.data.user&&t(T.data.user)}catch{alert("Failed to upload profile picture")}finally{v(!1)}};return n.jsxs("div",{className:"max-w-xl",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile"}),n.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[n.jsxs("div",{className:"relative w-20 h-20",children:[e&&e.profilePicture?n.jsx("img",{src:e.profilePicture.startsWith("http")?e.profilePicture:`http://localhost:5000${e.profilePicture}`,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border",onError:D=>{D.currentTarget.style.display="none";const A=D.currentTarget.nextElementSibling;A&&(A.style.display="flex")}}):null,n.jsx("div",{className:`w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-3xl text-gray-400 ${e&&e.profilePicture?"hidden":""}`,style:{display:e&&e.profilePicture?"none":"flex"},children:n.jsx("span",{children:e&&e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:""})}),n.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1 shadow cursor-pointer border border-gray-300",title:"Change profile picture",children:[n.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:j,disabled:b}),n.jsx("span",{className:"text-xs",children:b?"...":"✏️"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-bold text-lg",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),n.jsx("div",{className:"text-gray-600",children:e==null?void 0:e.email}),n.jsx("div",{className:"text-gray-500 text-sm mt-1",children:((_=e==null?void 0:e.role)==null?void 0:_.charAt(0).toUpperCase())+((k=e==null?void 0:e.role)==null?void 0:k.slice(1))})]})]}),r?n.jsxs("form",{className:"flex flex-col gap-4",onSubmit:D=>{D.preventDefault(),w()},children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium",children:"First Name"}),n.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",className:"mt-1 w-full border rounded px-3 py-2",value:a,onChange:D=>i(D.target.value)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium",children:"Last Name"}),n.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",className:"mt-1 w-full border rounded px-3 py-2",value:l,onChange:D=>u(D.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:"mt-1 w-full border rounded px-3 py-2",value:d,onChange:D=>m(D.target.value),disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium",children:"Bio"}),n.jsx("textarea",{id:"bio",name:"bio",autoComplete:"off",className:"mt-1 w-full border rounded px-3 py-2",value:f,onChange:D=>h(D.target.value),placeholder:"Tell us about yourself..."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:C,disabled:g,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white",disabled:g,children:g?"Saving...":"Save"})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Bio:"})," ",e!=null&&e.bio?e.bio:n.jsx("span",{className:"text-gray-500",children:"(not set)"})]}),n.jsx("button",{className:"mt-4 px-4 py-2 rounded bg-blue-600 text-white",onClick:()=>s(!0),children:"Edit Profile"})]})]})}function RZ(){const[e,t]=V.useState({language:"en",timeZone:"UTC",theme:"light"}),[r,s]=V.useState(!0),[a,i]=V.useState(!1),[l,u]=V.useState(null),[d,m]=V.useState(!1),{theme:f,setTheme:h}=AZ(),g=V.useRef(!0);V.useEffect(()=>{s(!0),ZI().then(v=>{v.data&&v.data.preferences&&t(v.data.preferences)}).catch(()=>u("Failed to load preferences")).finally(()=>s(!1))},[]),V.useEffect(()=>{if(g.current){g.current=!1;return}e.theme&&e.theme!==f&&h(e.theme)},[e.theme,f,h]);const x=v=>{const{name:w,value:C}=v.target;t(j=>{const _={...j,[w]:C};return w==="theme"&&h(C),_})},b=async v=>{v.preventDefault(),i(!0),u(null),m(!1);try{await e6(e),m(!0)}catch{u("Failed to save preferences")}finally{i(!1)}};return n.jsxs("div",{className:"dark:text-white",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Manage your password, language, time zone, and theme preferences."}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Change Password"}),n.jsxs("form",{className:"flex flex-col gap-2 max-w-md",children:[n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"Current Password",disabled:!0}),n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"New Password",disabled:!0}),n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"Confirm New Password",disabled:!0}),n.jsx("button",{type:"button",className:"bg-gray-300 text-gray-600 rounded px-4 py-2 mt-2 cursor-not-allowed",disabled:!0,children:"Change Password (Coming Soon)"})]})]}),n.jsxs("form",{className:"flex flex-col gap-4 max-w-md dark:bg-gray-800 dark:border-gray-700 dark:text-white p-4 rounded border",onSubmit:b,children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),n.jsxs("select",{name:"language",value:e.language,onChange:x,className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"en",children:"English"}),n.jsx("option",{value:"es",children:"Spanish"}),n.jsx("option",{value:"fr",children:"French"}),n.jsx("option",{value:"de",children:"German"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time Zone"}),n.jsxs("select",{name:"timeZone",value:e.timeZone,onChange:x,className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"UTC",children:"UTC"}),n.jsx("option",{value:"America/New_York",children:"America/New_York"}),n.jsx("option",{value:"Europe/London",children:"Europe/London"}),n.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"block text-sm font-medium",children:"Theme"}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"theme",value:"light",checked:e.theme==="light",onChange:x})," Light"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"theme",value:"dark",checked:e.theme==="dark",onChange:x})," Dark"]})]}),l&&n.jsx("div",{className:"text-red-500 text-sm",children:l}),d&&n.jsx("div",{className:"text-green-600 text-sm",children:"Preferences saved!"}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2",disabled:a||r,children:a?"Saving...":"Save Preferences"})]})]})}function IZ(){return n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notifications"}),n.jsx("p",{className:"text-gray-600",children:"Set your email notification preferences."})]})}function MZ(){const[e,t]=V.useState([]),[r,s]=V.useState(!0),[a,i]=V.useState(null),[l,u]=V.useState({page:1,limit:20,total:0,pages:0}),[d,m]=V.useState(150);V.useEffect(()=>{(async()=>{var w,C;try{s(!0),i(null);const j=await t6(l.page,l.limit,d);j.data.success&&(t(j.data.data),u(j.data.pagination))}catch(j){i(((C=(w=j.response)==null?void 0:w.data)==null?void 0:C.message)||"Failed to load login activity")}finally{s(!1)}})()},[l.page,l.limit,d]);const f=v=>new Date(v).toLocaleString(),h=v=>v?v.includes("Mobile")?"Mobile":v.includes("Tablet")?"Tablet":v.includes("Windows")?"Windows":v.includes("Mac")?"Mac":v.includes("Linux")?"Linux":"Desktop":"Unknown",g=v=>v?v.includes("Chrome")?"Chrome":v.includes("Firefox")?"Firefox":v.includes("Safari")?"Safari":v.includes("Edge")?"Edge":"Unknown Browser":"Unknown",x=v=>{u(w=>({...w,page:v}))},b=v=>{m(v),u(w=>({...w,page:1}))};return n.jsxs("div",{className:"dark:text-white",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"Recent Login Activity"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"View your recent login sessions and security information."}),n.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{htmlFor:"activity-filter",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show activity from:"}),n.jsxs("select",{id:"activity-filter",name:"activity-filter",value:d,onChange:v=>b(Number(v.target.value)),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[n.jsx("option",{value:7,children:"Last 7 days"}),n.jsx("option",{value:30,children:"Last 30 days"}),n.jsx("option",{value:90,children:"Last 90 days"}),n.jsx("option",{value:150,children:"Last 5 months"})]})]}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",e.length," of ",l.total," records"]})]}),r?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsx("p",{className:"text-red-600 dark:text-red-400",children:a})}):e.length===0?n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No login activity found."})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date & Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Device"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Browser"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:e.map((v,w)=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:f(v.timestamp)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.success?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:v.success?"Success":"Failed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:v.ipAddress}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:h(v.userAgent)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:g(v.userAgent)})]},v._id||w))})]})})}),l.pages>1&&n.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[n.jsx("button",{onClick:()=>x(l.page-1),disabled:l.page<=1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Previous"}),n.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300",children:["Page ",l.page," of ",l.pages]}),n.jsx("button",{onClick:()=>x(l.page+1),disabled:l.page>=l.pages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Next"})]})]})]})}const OZ={profile:PZ,settings:RZ,notifications:IZ,activity:MZ},LZ=()=>{const[e,t]=N.useState("profile"),r=OZ[e];return n.jsxs("div",{className:"flex min-h-[70vh]",children:[n.jsx("nav",{className:"w-56 bg-white border-r p-6 flex flex-col gap-4",children:TZ.map(s=>n.jsx("button",{className:`text-left px-3 py-2 rounded transition font-medium ${e===s.key?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>t(s.key),children:s.label},s.key))}),n.jsx("main",{className:"flex-1 p-8",children:n.jsx(r,{})})]})},$Z=()=>{const[e,t]=N.useState([]),[r,s]=N.useState([]),[a,i]=N.useState({}),[l,u]=N.useState(!0),[d,m]=N.useState(null),[f,h]=N.useState(""),[g,x]=N.useState("all"),[b,v]=N.useState("all"),[w,C]=N.useState("grid"),[j,_]=N.useState(null),k=Lt(),{user:D,loading:A}=Tt();if(N.useEffect(()=>{if(A||!D)return;(async()=>{var M,Y;u(!0),m(null);try{if(D.role==="teacher"||D.role==="admin"){const G=(await Re.get("/groups/sets/my")).data.data||[],Z=await Promise.all(G.map(async F=>{try{const ye=(await Re.get(`/groups/sets/${F._id}/groups`)).data||[];i(re=>({...re,[F._id]:ye}));const B=new Set;return ye.forEach((re,X)=>{re.members&&Array.isArray(re.members)&&re.members.forEach((U,ne)=>{const pe=U._id||U.id||U.email;pe&&B.add(pe)})}),{...F,totalGroups:ye.length,totalMembers:B.size}}catch(Ne){return console.error(`Error fetching groups for set ${F._id}:`,Ne),{...F,totalGroups:0,totalMembers:0}}}));s(Z)}else{const P=await Re.get("/groups/my");t(P.data.data||[])}}catch(P){console.error("Error fetching data:",P),((M=P.response)==null?void 0:M.status)===401?m("Please log in to view groups"):((Y=P.response)==null?void 0:Y.status)===500?m("Server error. Please try again later."):m("Failed to load groups")}finally{u(!1)}})()},[D,A]),A)return n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(!D)return n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 text-lg mb-4",children:"Please log in to view groups"}),n.jsx("button",{onClick:()=>k("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200",children:"Go to Login"})]})});const T=D.role==="teacher"||D.role==="admin",I=T?"All Group Sets":"All Groups",L=T?"View all group sets from all your courses in one place":"View all groups from all your courses in one place",q=W=>{const M=localStorage.getItem("courseColors");return(M?JSON.parse(M):{})[W]||"#556B2F"},O=()=>T?[...new Set(r.map(W=>{var M;return(M=W.course)==null?void 0:M.title}).filter(Boolean))]:[...new Set(e.map(W=>{var M;return(M=W.course)==null?void 0:M.title}).filter(Boolean))],z=(()=>{let W=T?r:e;if(f&&(W=W.filter(M=>{var Y;return M.name.toLowerCase().includes(f.toLowerCase())||((Y=M.course)==null?void 0:Y.title.toLowerCase().includes(f.toLowerCase()))})),g!=="all"&&(W=W.filter(M=>{var Y;return((Y=M.course)==null?void 0:Y.title)===g})),j)if(T)switch(j){case"groupSets":break;case"groups":W=W.filter(M=>(M.totalGroups||0)>0);break;case"members":W=W.filter(M=>(M.totalMembers||0)>0);break;case"active":W=W.filter(M=>M.allowSelfSignup);break}else switch(j){case"groups":break;case"members":W=W.filter(M=>{const Y=M;return Y.members&&Y.members.length>0});break;case"leaders":W=W.filter(M=>M.leader);break;case"active":W=W.filter(M=>{const Y=M;return Y.members&&Y.members.length>0});break}return W})(),K=O(),se=(()=>{if(T){const W=new Set;z.forEach((Y,P)=>{(a[Y._id]||[]).forEach((Z,F)=>{Z.members&&Array.isArray(Z.members)&&Z.members.forEach((Ne,ye)=>{const B=Ne._id||Ne.id||Ne.email;B&&W.add(B)})})});const M=z.reduce((Y,P)=>Y+(P.totalGroups||0),0);return{totalGroupSets:z.length,totalGroups:M,totalMembers:W.size,activeGroupSets:z.filter(Y=>Y.allowSelfSignup).length}}else{const W=new Set;return z.forEach((M,Y)=>{M.members&&Array.isArray(M.members)&&M.members.forEach((P,G)=>{const Z=P._id||P.id||P.email;Z&&W.add(Z)})}),{totalGroups:z.length,totalMembers:W.size,groupsWithLeader:z.filter(M=>M.leader).length,activeGroups:z.filter(M=>M.members&&M.members.length>0).length}}})();return n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:I}),n.jsx("p",{className:"text-gray-600",children:L})]}),T&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-blue-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${j==="groupSets"?"ring-2 ring-blue-300 shadow-lg":""}`,onClick:()=>_(j==="groupSets"?null:"groupSets"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(cr,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Group Sets"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.totalGroupSets})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-green-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${j==="groups"?"ring-2 ring-green-300 shadow-lg":""}`,onClick:()=>_(j==="groups"?null:"groups"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ls,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Groups"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.totalGroups})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-purple-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${j==="members"?"ring-2 ring-purple-300 shadow-lg":""}`,onClick:()=>_(j==="members"?null:"members"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Ci,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.totalMembers})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-orange-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${j==="active"?"ring-2 ring-orange-300 shadow-lg":""}`,onClick:()=>_(j==="active"?null:"active"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(ja,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sets"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.activeGroupSets})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:n.jsx(IO,{className:"w-5 h-5 text-blue-600"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Filters & Search"})]}),T&&n.jsxs("button",{onClick:()=>k("/groups/create"),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[n.jsx(ii,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Create Group Set"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Search Groups"}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search by name or course...",value:f,onChange:W=>h(W.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Filter by Course"}),n.jsxs("select",{value:g,onChange:W=>x(W.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white appearance-none cursor-pointer",children:[n.jsxs("option",{value:"all",children:["All Courses (",T?r.length:e.length,")"]}),K.map(W=>{const M=T?r.filter(Y=>{var P;return((P=Y.course)==null?void 0:P.title)===W}).length:e.filter(Y=>{var P;return((P=Y.course)==null?void 0:P.title)===W}).length;return n.jsxs("option",{value:W,children:[W," (",M,")"]},W)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"View Mode"}),n.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[n.jsx("button",{onClick:()=>C("grid"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${w==="grid"?"bg-white text-blue-600 shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"})]}),n.jsx("span",{children:"Grid"})]})}),n.jsx("button",{onClick:()=>C("list"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${w==="list"?"bg-white text-blue-600 shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsxs("div",{className:"flex flex-col space-y-0.5",children:[n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"}),n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"}),n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"})]}),n.jsx("span",{children:"List"})]})})]})]})]}),(f||g!=="all"||j)&&n.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Active filters:"}),f&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',f,'"',n.jsx("button",{onClick:()=>h(""),className:"ml-2 hover:text-blue-600",children:n.jsx(oo,{className:"w-3 h-3"})})]}),g!=="all"&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Course: ",g,n.jsx("button",{onClick:()=>x("all"),className:"ml-2 hover:text-green-600",children:n.jsx(oo,{className:"w-3 h-3"})})]}),j&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Metric: ",j,n.jsx("button",{onClick:()=>_(null),className:"ml-2 hover:text-purple-600",children:n.jsx(oo,{className:"w-3 h-3"})})]})]}),n.jsx("button",{onClick:()=>{h(""),x("all"),_(null)},className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear all filters"})]})]}),l&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!l&&T&&z.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",z.length," of ",T?r.length:e.length," ",T?"group sets":"groups",(f||g!=="all")&&n.jsx("span",{className:"ml-2 text-gray-400",children:"(filtered)"})]})}),n.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:z.map(W=>{var Y,P,G,Z,F;const M=W;return n.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 ${w==="list"?"flex items-center":""}`,onClick:()=>k(`/groupsets/${M._id}`),children:w==="grid"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 relative",style:{backgroundColor:q(((Y=M.course)==null?void 0:Y._id)||"default")},children:n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("div",{className:"w-5 h-5 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(cr,{className:"h-3 w-3 text-white"})})})}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"font-bold text-base mb-1",style:{color:q(((P=M.course)==null?void 0:P._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-xs",children:((G=M.course)==null?void 0:G.title)||"Unknown Course"})]})})]}):n.jsx("div",{className:"flex-1 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-base",style:{color:q(((Z=M.course)==null?void 0:Z._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-sm",children:((F=M.course)==null?void 0:F.title)||"Unknown Course"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.totalGroups||0}),n.jsx("p",{className:"text-xs text-gray-500",children:"Groups"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.totalMembers||0}),n.jsx("p",{className:"text-xs text-gray-500",children:"Members"})]})]})]})})},M._id)})})]}),!l&&!T&&z.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",z.length," of ",T?r.length:e.length," ",T?"group sets":"groups",(f||g!=="all")&&n.jsx("span",{className:"ml-2 text-gray-400",children:"(filtered)"})]})}),n.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:z.map(W=>{var Y,P,G,Z,F;const M=W;return n.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 ${w==="list"?"flex items-center":""}`,onClick:()=>k(`/groups/${M._id}`),children:w==="grid"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 relative",style:{backgroundColor:q(((Y=M.course)==null?void 0:Y._id)||"default")},children:n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("div",{className:"w-5 h-5 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(cr,{className:"h-3 w-3 text-white"})})})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"font-bold text-base mb-1",style:{color:q(((P=M.course)==null?void 0:P._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-xs",children:((G=M.course)==null?void 0:G.title)||"Unknown Course"})]}),M.members&&M.members.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:["Members (",M.members.length,")"]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.members.slice(0,2).map((Ne,ye)=>n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-700",children:[Ne.firstName," ",Ne.lastName]},ye)),M.members.length>2&&n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-700",children:["+",M.members.length-2," more"]})]})]}),M.leader&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Leader"}),n.jsxs("p",{className:"text-xs text-gray-700 font-medium",children:[M.leader.firstName," ",M.leader.lastName]})]})]})]}):n.jsx("div",{className:"flex-1 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-base",style:{color:q(((Z=M.course)==null?void 0:Z._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-sm",children:((F=M.course)==null?void 0:F.title)||"Unknown Course"}),M.members&&M.members.length>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.members.length," member",M.members.length!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[M.leader&&n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.leader.firstName," ",M.leader.lastName]}),n.jsx("p",{className:"text-xs text-gray-500",children:"Leader"})]}),M.members&&M.members.length>0&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.members.length}),n.jsx("p",{className:"text-xs text-gray-500",children:"Members"})]})]})]})})},M._id)})})]}),!l&&z.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx(cr,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f||g!=="all"?"No groups found":"No groups yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:f||g!=="all"?"Try adjusting your search or filters to find what you're looking for.":T?"Create your first group set to get started with collaborative learning.":"You haven't been assigned to any groups yet."}),!f&&g==="all"&&T&&n.jsx("button",{onClick:()=>k("/groups/create"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Group Set"})]}),d&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Ev,{className:"w-8 h-8 text-red-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error loading groups"}),n.jsx("p",{className:"text-gray-500 mb-6",children:d}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})]})},FZ=()=>{var f;const{groupSetId:e}=wr(),[t,r]=N.useState([]),[s,a]=N.useState(null),[i,l]=N.useState(!0),[u,d]=N.useState(null),m=Lt();return N.useEffect(()=>{(async()=>{if(e){l(!0),d(null);try{const g=await Re.get(`/groups/sets/${e}/groups`);r(g.data||[]);const x=await Re.get(`/groups/sets/id/${e}`);a(x.data)}catch(g){console.error("Error fetching groupset data:",g),d("Failed to load groupset data")}finally{l(!1)}}})()},[e]),i?n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):u?n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("div",{className:"text-red-800",children:u})})}):n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(s==null?void 0:s.name)||"Group Set"}),n.jsx("p",{className:"text-gray-600",children:((f=s==null?void 0:s.course)==null?void 0:f.title)||"Unknown Course"})]}),n.jsx("button",{onClick:()=>m(-1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"← Back"})]}),s&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${s.allowSelfSignup?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.allowSelfSignup?"Self Signup Allowed":"Self Signup Disabled"})}),s.groupStructure&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700",children:s.groupStructure==="manual"?"Manual":s.groupStructure==="byGroupCount"?"By Group Count":"By Students Per Group"})})]})})]}),t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No groups found"}),n.jsx("div",{className:"text-gray-400",children:"This group set doesn't have any groups yet."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(h=>n.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-100",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Group ID: ",h.groupId]})]})}),h.members&&h.members.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:["Members (",h.members.length,")"]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.members.slice(0,3).map((g,x)=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:[g.firstName," ",g.lastName]},x)),h.members.length>3&&n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:["+",h.members.length-3," more"]})]})]}),h.leader&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Leader"}),n.jsxs("p",{className:"text-sm text-gray-700",children:[h.leader.firstName," ",h.leader.lastName]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 text-sm font-medium",onClick:()=>m(`/groups/${h._id}`),children:"View Group"}),n.jsx("button",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200 text-sm",onClick:()=>m(`/groups/${h._id}/discussion`),children:n.jsx(Dr,{className:"w-4 h-4"})})]})]})},h._id))})]})},BZ=()=>{const{moduleId:e}=wr();return e?n.jsx(FA,{moduleId:e}):null},zZ=()=>{const{moduleId:e}=wr();return e?n.jsx(zA,{moduleId:e}):null};function GZ(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"401"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"You are not authorized to access this page."})]})})}function qZ(){const{groupId:e}=wr(),t=G5(),r=t==null?void 0:t.groupSetId;return!e||!r?n.jsx("div",{children:"No group selected."}):n.jsx(RH,{groupId:e,groupSetId:r})}function UZ(){const{user:e}=Tt();return(e==null?void 0:e.role)==="admin"?n.jsx(_L,{}):n.jsx(CL,{})}function WZ(){const{user:e,loading:t}=Tt(),r=!!e;return t?n.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 dark:text-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 dark:text-white",children:[r&&n.jsx(MH,{}),n.jsx("main",{className:r?"pb-10 pl-20":"pb-10",children:n.jsxs(iR,{children:[n.jsx(Ct,{path:"/login",element:n.jsx(a6,{})}),n.jsx(Ct,{path:"/signup",element:n.jsx(i6,{})}),n.jsx(Ct,{path:"/unauthorized",element:n.jsx(GZ,{})}),n.jsx(Ct,{path:"/",element:n.jsx(Ut,{children:n.jsx(UZ,{})})}),n.jsx(Ct,{path:"/courses",element:n.jsx(Ut,{children:n.jsx(RL,{})})}),n.jsx(Ct,{path:"/courses/create",element:n.jsx(Ut,{children:n.jsx(Z2,{mode:"create"})})}),n.jsx(Ct,{path:"/courses/:id",element:n.jsx(Ut,{children:n.jsx(J2,{})})}),n.jsx(Ct,{path:"/courses/:id/:section",element:n.jsx(Ut,{children:n.jsx(J2,{})})}),n.jsx(Ct,{path:"/courses/:id/edit",element:n.jsx(Ut,{children:n.jsx(Z2,{mode:"edit"})})}),n.jsx(Ct,{path:"/courses/:courseId/pages/:pageId",element:n.jsx(Ut,{children:n.jsx(wa,{children:n.jsx(XU,{})})})}),n.jsx(Ct,{path:"/pages/:pageId",element:n.jsx(Ut,{children:n.jsx(wa,{children:n.jsx(BA,{})})})}),n.jsx(Ct,{path:"/modules/:moduleId/assignments",element:n.jsx(Ut,{children:n.jsx(BZ,{})})}),n.jsx(Ct,{path:"/modules/:moduleId/assignments/create",element:n.jsx(Ut,{children:n.jsx(zZ,{})})}),n.jsx(Ct,{path:"/assignments/:id/view",element:n.jsx(Ut,{children:n.jsx(sW,{})})}),n.jsx(Ct,{path:"/assignments/:id/grade",element:n.jsx(Ut,{allowedRoles:["teacher","admin"],children:n.jsx(uW,{})})}),n.jsx(Ct,{path:"/assignments/:id/edit",element:n.jsx(Ut,{children:n.jsx(tW,{})})}),n.jsx(Ct,{path:"/assignments/:id",element:n.jsx(Ut,{children:n.jsx(oW,{})})}),n.jsx(Ct,{path:"/modules/:moduleId/edit",element:n.jsx(Ut,{children:n.jsx(wa,{children:n.jsx(JU,{})})})}),n.jsx(Ct,{path:"/pages/:pageId/edit",element:n.jsx(Ut,{children:n.jsx(wa,{children:n.jsx(ZU,{})})})}),n.jsx(Ct,{path:"/courses/:courseId/threads/:threadId",element:n.jsx(Ut,{children:n.jsx(sS,{})})}),n.jsx(Ct,{path:"/groups",element:n.jsx(Ut,{children:n.jsx($Z,{})})}),n.jsx(Ct,{path:"/groupsets/:groupSetId",element:n.jsx(Ut,{children:n.jsx(FZ,{})})}),n.jsxs(Ct,{path:"/groups/:groupId/*",element:n.jsx(TH,{}),children:[n.jsx(Ct,{path:"home",element:n.jsx("div",{children:"Group Home (placeholder)"})}),n.jsx(Ct,{path:"pages",element:n.jsx("div",{children:"Group Pages"})}),n.jsx(Ct,{path:"discussion",element:n.jsx(PH,{})}),n.jsx(Ct,{path:"assignments",element:n.jsx("div",{children:"Group Assignments (placeholder)"})}),n.jsx(Ct,{path:"announcements",element:n.jsx("div",{children:"Group Announcements (placeholder)"})}),n.jsx(Ct,{path:"people",element:n.jsx(qZ,{})}),n.jsx(Ct,{index:!0,element:n.jsx("div",{children:"Group Home (placeholder)"})})]}),n.jsx(Ct,{path:"/calendar",element:n.jsx(Ut,{children:n.jsx(yZ,{})})}),n.jsx(Ct,{path:"/inbox",element:n.jsx(Ut,{children:n.jsx(CZ,{})})}),n.jsx(Ct,{path:"/account",element:n.jsx(Ut,{children:n.jsx(LZ,{})})}),n.jsx(Ct,{path:"/threads/:threadId",element:n.jsx(Ut,{children:n.jsx(wa,{children:n.jsx(sS,{})})})}),n.jsx(Ct,{path:"/admin/users",element:n.jsx(Ut,{children:n.jsx(EL,{})})}),n.jsx(Ct,{path:"/admin/courses",element:n.jsx(Ut,{children:n.jsx(TL,{})})}),n.jsx(Ct,{path:"/admin/analytics",element:n.jsx(Ut,{children:n.jsx(DL,{})})}),n.jsx(Ct,{path:"/admin/settings",element:n.jsx(Ut,{children:n.jsx(AL,{})})}),n.jsx(Ct,{path:"/admin/security",element:n.jsx(Ut,{children:n.jsx(PL,{})})}),n.jsx(Ct,{path:"/admin/backup",element:n.jsx(Ut,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Backup & Recovery"}),n.jsx("p",{className:"text-gray-600",children:"System backup and recovery management"})]})})})]})}),n.jsx(WW,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function HZ(){return n.jsx(RD,{store:_H,children:n.jsx(DZ,{children:n.jsx(n6,{children:n.jsx(s6,{children:n.jsx(WZ,{})})})})})}h5.createRoot(document.getElementById("root")).render(n.jsx(V.StrictMode,{children:n.jsx(hR,{children:n.jsx(HZ,{})})}));
