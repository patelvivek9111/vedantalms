function N5(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tp={exports:{}},Tl={},rp={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function S5(){if(B1)return At;B1=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(U,Z,B){this.props=U,this.context=Z,this.refs=b,this.updater=B||x}w.prototype.isReactComponent={},w.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},w.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=w.prototype;function N(U,Z,B){this.props=U,this.context=Z,this.refs=b,this.updater=B||x}var E=N.prototype=new C;E.constructor=N,v(E,w.prototype),E.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,D={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function P(U,Z,B){var Ce,Se={},G=null,ae=null;if(Z!=null)for(Ce in Z.ref!==void 0&&(ae=Z.ref),Z.key!==void 0&&(G=""+Z.key),Z)_.call(Z,Ce)&&!T.hasOwnProperty(Ce)&&(Se[Ce]=Z[Ce]);var X=arguments.length-2;if(X===1)Se.children=B;else if(1<X){for(var V=Array(X),ie=0;ie<X;ie++)V[ie]=arguments[ie+2];Se.children=V}if(U&&U.defaultProps)for(Ce in X=U.defaultProps,X)Se[Ce]===void 0&&(Se[Ce]=X[Ce]);return{$$typeof:e,type:U,key:G,ref:ae,props:Se,_owner:D.current}}function O(U,Z){return{$$typeof:e,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function $(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(B){return Z[B]})}var z=/\/+/g;function q(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?$(""+U.key):Z.toString(36)}function H(U,Z,B,Ce,Se){var G=typeof U;(G==="undefined"||G==="boolean")&&(U=null);var ae=!1;if(U===null)ae=!0;else switch(G){case"string":case"number":ae=!0;break;case"object":switch(U.$$typeof){case e:case t:ae=!0}}if(ae)return ae=U,Se=Se(ae),U=Ce===""?"."+q(ae,0):Ce,S(Se)?(B="",U!=null&&(B=U.replace(z,"$&/")+"/"),H(Se,Z,B,"",function(ie){return ie})):Se!=null&&(F(Se)&&(Se=O(Se,B+(!Se.key||ae&&ae.key===Se.key?"":(""+Se.key).replace(z,"$&/")+"/")+U)),Z.push(Se)),1;if(ae=0,Ce=Ce===""?".":Ce+":",S(U))for(var X=0;X<U.length;X++){G=U[X];var V=Ce+q(G,X);ae+=H(G,Z,B,V,Se)}else if(V=g(U),typeof V=="function")for(U=V.call(U),X=0;!(G=U.next()).done;)G=G.value,V=Ce+q(G,X++),ae+=H(G,Z,B,V,Se);else if(G==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ae}function re(U,Z,B){if(U==null)return U;var Ce=[],Se=0;return H(U,Ce,"","",function(G){return Z.call(B,G,Se++)}),Ce}function ee(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(B){(U._status===0||U._status===-1)&&(U._status=1,U._result=B)},function(B){(U._status===0||U._status===-1)&&(U._status=2,U._result=B)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var L={current:null},M={transition:null},W={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:M,ReactCurrentOwner:D};function R(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:re,forEach:function(U,Z,B){re(U,function(){Z.apply(this,arguments)},B)},count:function(U){var Z=0;return re(U,function(){Z++}),Z},toArray:function(U){return re(U,function(Z){return Z})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},At.Component=w,At.Fragment=r,At.Profiler=a,At.PureComponent=N,At.StrictMode=s,At.Suspense=d,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,At.act=R,At.cloneElement=function(U,Z,B){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ce=v({},U.props),Se=U.key,G=U.ref,ae=U._owner;if(Z!=null){if(Z.ref!==void 0&&(G=Z.ref,ae=D.current),Z.key!==void 0&&(Se=""+Z.key),U.type&&U.type.defaultProps)var X=U.type.defaultProps;for(V in Z)_.call(Z,V)&&!T.hasOwnProperty(V)&&(Ce[V]=Z[V]===void 0&&X!==void 0?X[V]:Z[V])}var V=arguments.length-2;if(V===1)Ce.children=B;else if(1<V){X=Array(V);for(var ie=0;ie<V;ie++)X[ie]=arguments[ie+2];Ce.children=X}return{$$typeof:e,type:U.type,key:Se,ref:G,props:Ce,_owner:ae}},At.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},At.createElement=P,At.createFactory=function(U){var Z=P.bind(null,U);return Z.type=U,Z},At.createRef=function(){return{current:null}},At.forwardRef=function(U){return{$$typeof:u,render:U}},At.isValidElement=F,At.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ee}},At.memo=function(U,Z){return{$$typeof:h,type:U,compare:Z===void 0?null:Z}},At.startTransition=function(U){var Z=M.transition;M.transition={};try{U()}finally{M.transition=Z}},At.unstable_act=R,At.useCallback=function(U,Z){return L.current.useCallback(U,Z)},At.useContext=function(U){return L.current.useContext(U)},At.useDebugValue=function(){},At.useDeferredValue=function(U){return L.current.useDeferredValue(U)},At.useEffect=function(U,Z){return L.current.useEffect(U,Z)},At.useId=function(){return L.current.useId()},At.useImperativeHandle=function(U,Z,B){return L.current.useImperativeHandle(U,Z,B)},At.useInsertionEffect=function(U,Z){return L.current.useInsertionEffect(U,Z)},At.useLayoutEffect=function(U,Z){return L.current.useLayoutEffect(U,Z)},At.useMemo=function(U,Z){return L.current.useMemo(U,Z)},At.useReducer=function(U,Z,B){return L.current.useReducer(U,Z,B)},At.useRef=function(U){return L.current.useRef(U)},At.useState=function(U){return L.current.useState(U)},At.useSyncExternalStore=function(U,Z,B){return L.current.useSyncExternalStore(U,Z,B)},At.useTransition=function(){return L.current.useTransition()},At.version="18.3.1",At}var z1;function Cf(){return z1||(z1=1,rp.exports=S5()),rp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function k5(){if(G1)return Tl;G1=1;var e=Cf(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var f,m={},g=null,x=null;h!==void 0&&(g=""+h),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)s.call(d,f)&&!i.hasOwnProperty(f)&&(m[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:u,key:g,ref:x,props:m,_owner:a.current}}return Tl.Fragment=r,Tl.jsx=l,Tl.jsxs=l,Tl}var q1;function C5(){return q1||(q1=1,tp.exports=k5()),tp.exports}var n=C5(),j=Cf();const Q=Vr(j),_5=N5({__proto__:null,default:Q},[j]);var dd={},np={exports:{}},Nn={},sp={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function E5(){return U1||(U1=1,function(e){function t(M,W){var R=M.length;M.push(W);e:for(;0<R;){var U=R-1>>>1,Z=M[U];if(0<a(Z,W))M[U]=W,M[R]=Z,R=U;else break e}}function r(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var W=M[0],R=M.pop();if(R!==W){M[0]=R;e:for(var U=0,Z=M.length,B=Z>>>1;U<B;){var Ce=2*(U+1)-1,Se=M[Ce],G=Ce+1,ae=M[G];if(0>a(Se,R))G<Z&&0>a(ae,Se)?(M[U]=ae,M[G]=R,U=G):(M[U]=Se,M[Ce]=R,U=Ce);else if(G<Z&&0>a(ae,R))M[U]=ae,M[G]=R,U=G;else break e}}return W}function a(M,W){var R=M.sortIndex-W.sortIndex;return R!==0?R:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],f=1,m=null,g=3,x=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(M){for(var W=r(h);W!==null;){if(W.callback===null)s(h);else if(W.startTime<=M)s(h),W.sortIndex=W.expirationTime,t(d,W);else break;W=r(h)}}function S(M){if(b=!1,E(M),!v)if(r(d)!==null)v=!0,ee(_);else{var W=r(h);W!==null&&L(S,W.startTime-M)}}function _(M,W){v=!1,b&&(b=!1,C(P),P=-1),x=!0;var R=g;try{for(E(W),m=r(d);m!==null&&(!(m.expirationTime>W)||M&&!$());){var U=m.callback;if(typeof U=="function"){m.callback=null,g=m.priorityLevel;var Z=U(m.expirationTime<=W);W=e.unstable_now(),typeof Z=="function"?m.callback=Z:m===r(d)&&s(d),E(W)}else s(d);m=r(d)}if(m!==null)var B=!0;else{var Ce=r(h);Ce!==null&&L(S,Ce.startTime-W),B=!1}return B}finally{m=null,g=R,x=!1}}var D=!1,T=null,P=-1,O=5,F=-1;function $(){return!(e.unstable_now()-F<O)}function z(){if(T!==null){var M=e.unstable_now();F=M;var W=!0;try{W=T(!0,M)}finally{W?q():(D=!1,T=null)}}else D=!1}var q;if(typeof N=="function")q=function(){N(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,re=H.port2;H.port1.onmessage=z,q=function(){re.postMessage(null)}}else q=function(){w(z,0)};function ee(M){T=M,D||(D=!0,q())}function L(M,W){P=w(function(){M(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,ee(_))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(M){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var R=g;g=W;try{return M()}finally{g=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var R=g;g=M;try{return W()}finally{g=R}},e.unstable_scheduleCallback=function(M,W,R){var U=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?U+R:U):R=U,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=R+Z,M={id:f++,callback:W,priorityLevel:M,startTime:R,expirationTime:Z,sortIndex:-1},R>U?(M.sortIndex=R,t(h,M),r(d)===null&&M===r(h)&&(b?(C(P),P=-1):b=!0,L(S,R-U))):(M.sortIndex=Z,t(d,M),v||x||(v=!0,ee(_))),M},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(M){var W=g;return function(){var R=g;g=W;try{return M.apply(this,arguments)}finally{g=R}}}}(ap)),ap}var W1;function D5(){return W1||(W1=1,sp.exports=E5()),sp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1;function A5(){if(H1)return Nn;H1=1;var e=Cf(),t=D5();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(a[o]=c,o=0;o<c.length;o++)s.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(o){return d.call(m,o)?!0:d.call(f,o)?!1:h.test(o)?m[o]=!0:(f[o]=!0,!1)}function x(o,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function v(o,c,p,y){if(c===null||typeof c>"u"||x(o,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,p,y,k,A,I){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=k,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=A,this.removeEmptyString=I}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];w[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(C,N);w[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(C,N);w[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(C,N);w[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function E(o,c,p,y){var k=w.hasOwnProperty(c)?w[c]:null;(k!==null?k.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(v(c,p,k,y)&&(p=null),y||k===null?g(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):k.mustUseProperty?o[k.propertyName]=p===null?k.type===3?!1:"":p:(c=k.attributeName,y=k.attributeNamespace,p===null?o.removeAttribute(c):(k=k.type,p=k===3||k===4&&p===!0?"":""+p,y?o.setAttributeNS(y,c,p):o.setAttribute(c,p))))}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),D=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),M=Symbol.iterator;function W(o){return o===null||typeof o!="object"?null:(o=M&&o[M]||o["@@iterator"],typeof o=="function"?o:null)}var R=Object.assign,U;function Z(o){if(U===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var B=!1;function Ce(o,c){if(!o||B)return"";B=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ge){var y=ge}Reflect.construct(o,[],c)}else{try{c.call()}catch(ge){y=ge}o.call(c.prototype)}else{try{throw Error()}catch(ge){y=ge}o()}}catch(ge){if(ge&&y&&typeof ge.stack=="string"){for(var k=ge.stack.split(`
`),A=y.stack.split(`
`),I=k.length-1,Y=A.length-1;1<=I&&0<=Y&&k[I]!==A[Y];)Y--;for(;1<=I&&0<=Y;I--,Y--)if(k[I]!==A[Y]){if(I!==1||Y!==1)do if(I--,Y--,0>Y||k[I]!==A[Y]){var J=`
`+k[I].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=I&&0<=Y);break}}}finally{B=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Z(o):""}function Se(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=Ce(o.type,!1),o;case 11:return o=Ce(o.type.render,!1),o;case 1:return o=Ce(o.type,!0),o;default:return""}}function G(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case D:return"Portal";case O:return"Profiler";case P:return"StrictMode";case q:return"Suspense";case H:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case z:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case re:return c=o.displayName||null,c!==null?c:G(o.type)||"Memo";case ee:c=o._payload,o=o._init;try{return G(o(c))}catch{}}return null}function ae(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function X(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function V(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ie(o){var c=V(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var k=p.get,A=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(I){y=""+I,A.call(this,I)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(I){y=""+I},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function be(o){o._valueTracker||(o._valueTracker=ie(o))}function ve(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=V(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function Pe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function He(o,c){var p=c.checked;return R({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function Je(o,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=X(c.value!=null?c.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function le(o,c){c=c.checked,c!=null&&E(o,"checked",c,!1)}function fe(o,c){le(o,c);var p=X(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Ge(o,c.type,p):c.hasOwnProperty("defaultValue")&&Ge(o,c.type,X(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Ae(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function Ge(o,c,p){(c!=="number"||Pe(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Ye=Array.isArray;function ye(o,c,p,y){if(o=o.options,c){c={};for(var k=0;k<p.length;k++)c["$"+p[k]]=!0;for(p=0;p<o.length;p++)k=c.hasOwnProperty("$"+o[p].value),o[p].selected!==k&&(o[p].selected=k),k&&y&&(o[p].defaultSelected=!0)}else{for(p=""+X(p),c=null,k=0;k<o.length;k++){if(o[k].value===p){o[k].selected=!0,y&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function he(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return R({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ne(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(r(92));if(Ye(p)){if(1<p.length)throw Error(r(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:X(p)}}function Te(o,c){var p=X(c.value),y=X(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function Be(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function oe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?oe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var pe,K=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,k){MSApp.execUnsafeLocalFunction(function(){return o(c,p,y,k)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=pe.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function se(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var _e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ke=["Webkit","ms","Moz","O"];Object.keys(_e).forEach(function(o){Ke.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),_e[c]=_e[o]})});function Ve(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||_e.hasOwnProperty(o)&&_e[o]?(""+c).trim():c+"px"}function tt(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,k=Ve(p,c[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,k):o[p]=k}}var it=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qe(o,c){if(c){if(it[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function dt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yt=null;function It(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Xt=null,Kt=null,Jt=null;function lr(o){if(o=gl(o)){if(typeof Xt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=ku(c),Xt(o.stateNode,o.type,c))}}function Zt(o){Kt?Jt?Jt.push(o):Jt=[o]:Kt=o}function ms(){if(Kt){var o=Kt,c=Jt;if(Jt=Kt=null,lr(o),c)for(o=0;o<c.length;o++)lr(c[o])}}function Li(o,c){return o(c)}function Ua(){}var la=!1;function xe(o,c,p){if(la)return o(c,p);la=!0;try{return Li(o,c,p)}finally{la=!1,(Kt!==null||Jt!==null)&&(Ua(),ms())}}function Qe(o,c){var p=o.stateNode;if(p===null)return null;var y=ku(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var er=!1;if(u)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){er=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{er=!1}function Yr(o,c,p,y,k,A,I,Y,J){var ge=Array.prototype.slice.call(arguments,3);try{c.apply(p,ge)}catch(Me){this.onError(Me)}}var Nr=!1,ln=null,Kr=!1,qt=null,zr={onError:function(o){Nr=!0,ln=o}};function Yn(o,c,p,y,k,A,I,Y,J){Nr=!1,ln=null,Yr.apply(zr,arguments)}function Fi(o,c,p,y,k,A,I,Y,J){if(Yn.apply(this,arguments),Nr){if(Nr){var ge=ln;Nr=!1,ln=null}else throw Error(r(198));Kr||(Kr=!0,qt=ge)}}function Kn(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function Wa(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Ha(o){if(Kn(o)!==o)throw Error(r(188))}function Nm(o){var c=o.alternate;if(!c){if(c=Kn(o),c===null)throw Error(r(188));return c!==o?null:o}for(var p=o,y=c;;){var k=p.return;if(k===null)break;var A=k.alternate;if(A===null){if(y=k.return,y!==null){p=y;continue}break}if(k.child===A.child){for(A=k.child;A;){if(A===p)return Ha(k),o;if(A===y)return Ha(k),c;A=A.sibling}throw Error(r(188))}if(p.return!==y.return)p=k,y=A;else{for(var I=!1,Y=k.child;Y;){if(Y===p){I=!0,p=k,y=A;break}if(Y===y){I=!0,y=k,p=A;break}Y=Y.sibling}if(!I){for(Y=A.child;Y;){if(Y===p){I=!0,p=A,y=k;break}if(Y===y){I=!0,y=A,p=k;break}Y=Y.sibling}if(!I)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?o:c}function Bi(o){return o=Nm(o),o!==null?iu(o):null}function iu(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=iu(o);if(c!==null)return c;o=o.sibling}return null}var ou=t.unstable_scheduleCallback,lu=t.unstable_cancelCallback,Sm=t.unstable_shouldYield,km=t.unstable_requestPaint,hr=t.unstable_now,cu=t.unstable_getCurrentPriorityLevel,rl=t.unstable_ImmediatePriority,uu=t.unstable_UserBlockingPriority,zi=t.unstable_NormalPriority,Cm=t.unstable_LowPriority,du=t.unstable_IdlePriority,Va=null,Qn=null;function fu(o){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Va,o,void 0,(o.current.flags&128)===128)}catch{}}var je=Math.clz32?Math.clz32:lt,Ee=Math.log,$e=Math.LN2;function lt(o){return o>>>=0,o===0?32:31-(Ee(o)/$e|0)|0}var ht=64,ft=4194304;function Ue(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function bt(o,c){var p=o.pendingLanes;if(p===0)return 0;var y=0,k=o.suspendedLanes,A=o.pingedLanes,I=p&268435455;if(I!==0){var Y=I&~k;Y!==0?y=Ue(Y):(A&=I,A!==0&&(y=Ue(A)))}else I=p&~k,I!==0?y=Ue(I):A!==0&&(y=Ue(A));if(y===0)return 0;if(c!==0&&c!==y&&(c&k)===0&&(k=y&-y,A=c&-c,k>=A||k===16&&(A&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)p=31-je(c),k=1<<p,y|=o[p],c&=~k;return y}function rt(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,k=o.expirationTimes,A=o.pendingLanes;0<A;){var I=31-je(A),Y=1<<I,J=k[I];J===-1?((Y&p)===0||(Y&y)!==0)&&(k[I]=rt(Y,c)):J<=c&&(o.expiredLanes|=Y),A&=~Y}}function pt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function et(){var o=ht;return ht<<=1,(ht&4194240)===0&&(ht=64),o}function st(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function St(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-je(c),o[c]=p}function Tt(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var k=31-je(p),A=1<<k;c[k]=0,y[k]=-1,o[k]=-1,p&=~A}}function Qt(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-je(p),k=1<<y;k&c|o[y]&c&&(o[y]|=c),p&=~k}}var vt=0;function ca(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ce,ut,Pt,tr,Ss,Rn=!1,xn=[],kt=null,Gr=null,Sr=null,In=new Map,Dr=new Map,Qr=[],Gi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ks(o,c){switch(o){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":In.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(c.pointerId)}}function Rt(o,c,p,y,k,A){return o===null||o.nativeEvent!==A?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:A,targetContainers:[k]},c!==null&&(c=gl(c),c!==null&&ut(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function Ir(o,c,p,y,k){switch(c){case"focusin":return kt=Rt(kt,o,c,p,y,k),!0;case"dragenter":return Gr=Rt(Gr,o,c,p,y,k),!0;case"mouseover":return Sr=Rt(Sr,o,c,p,y,k),!0;case"pointerover":var A=k.pointerId;return In.set(A,Rt(In.get(A)||null,o,c,p,y,k)),!0;case"gotpointercapture":return A=k.pointerId,Dr.set(A,Rt(Dr.get(A)||null,o,c,p,y,k)),!0}return!1}function nl(o){var c=Ka(o.target);if(c!==null){var p=Kn(c);if(p!==null){if(c=p.tag,c===13){if(c=Wa(p),c!==null){o.blockedOn=c,Ss(o.priority,function(){Pt(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ya(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=Em(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);yt=y,p.target.dispatchEvent(y),yt=null}else return c=gl(p),c!==null&&ut(c),o.blockedOn=p,!1;c.shift()}return!0}function sl(o,c,p){Ya(o)&&p.delete(c)}function vr(){Rn=!1,kt!==null&&Ya(kt)&&(kt=null),Gr!==null&&Ya(Gr)&&(Gr=null),Sr!==null&&Ya(Sr)&&(Sr=null),In.forEach(sl),Dr.forEach(sl)}function pr(o,c){o.blockedOn===c&&(o.blockedOn=null,Rn||(Rn=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vr)))}function Xn(o){function c(k){return pr(k,o)}if(0<xn.length){pr(xn[0],o);for(var p=1;p<xn.length;p++){var y=xn[p];y.blockedOn===o&&(y.blockedOn=null)}}for(kt!==null&&pr(kt,o),Gr!==null&&pr(Gr,o),Sr!==null&&pr(Sr,o),In.forEach(c),Dr.forEach(c),p=0;p<Qr.length;p++)y=Qr[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<Qr.length&&(p=Qr[0],p.blockedOn===null);)nl(p),p.blockedOn===null&&Qr.shift()}var ua=S.ReactCurrentBatchConfig,qi=!0;function YP(o,c,p,y){var k=vt,A=ua.transition;ua.transition=null;try{vt=1,_m(o,c,p,y)}finally{vt=k,ua.transition=A}}function KP(o,c,p,y){var k=vt,A=ua.transition;ua.transition=null;try{vt=4,_m(o,c,p,y)}finally{vt=k,ua.transition=A}}function _m(o,c,p,y){if(qi){var k=Em(o,c,p,y);if(k===null)Wm(o,c,y,mu,p),ks(o,y);else if(Ir(k,o,c,p,y))y.stopPropagation();else if(ks(o,y),c&4&&-1<Gi.indexOf(o)){for(;k!==null;){var A=gl(k);if(A!==null&&ce(A),A=Em(o,c,p,y),A===null&&Wm(o,c,y,mu,p),A===k)break;k=A}k!==null&&y.stopPropagation()}else Wm(o,c,y,null,p)}}var mu=null;function Em(o,c,p,y){if(mu=null,o=It(y),o=Ka(o),o!==null)if(c=Kn(o),c===null)o=null;else if(p=c.tag,p===13){if(o=Wa(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return mu=o,null}function Cw(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cu()){case rl:return 1;case uu:return 4;case zi:case Cm:return 16;case du:return 536870912;default:return 16}default:return 16}}var da=null,Dm=null,hu=null;function _w(){if(hu)return hu;var o,c=Dm,p=c.length,y,k="value"in da?da.value:da.textContent,A=k.length;for(o=0;o<p&&c[o]===k[o];o++);var I=p-o;for(y=1;y<=I&&c[p-y]===k[A-y];y++);return hu=k.slice(o,1<y?1-y:void 0)}function pu(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function gu(){return!0}function Ew(){return!1}function Mn(o){function c(p,y,k,A,I){this._reactName=p,this._targetInst=k,this.type=y,this.nativeEvent=A,this.target=I,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(p=o[Y],this[Y]=p?p(A):A[Y]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?gu:Ew,this.isPropagationStopped=Ew,this}return R(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),c}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Am=Mn(Ui),al=R({},Ui,{view:0,detail:0}),QP=Mn(al),Tm,Pm,il,xu=R({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Im,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==il&&(il&&o.type==="mousemove"?(Tm=o.screenX-il.screenX,Pm=o.screenY-il.screenY):Pm=Tm=0,il=o),Tm)},movementY:function(o){return"movementY"in o?o.movementY:Pm}}),Dw=Mn(xu),XP=R({},xu,{dataTransfer:0}),JP=Mn(XP),ZP=R({},al,{relatedTarget:0}),Rm=Mn(ZP),e3=R({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),t3=Mn(e3),r3=R({},Ui,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),n3=Mn(r3),s3=R({},Ui,{data:0}),Aw=Mn(s3),a3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l3(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=o3[o])?!!c[o]:!1}function Im(){return l3}var c3=R({},al,{key:function(o){if(o.key){var c=a3[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=pu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?i3[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Im,charCode:function(o){return o.type==="keypress"?pu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?pu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),u3=Mn(c3),d3=R({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tw=Mn(d3),f3=R({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Im}),m3=Mn(f3),h3=R({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),p3=Mn(h3),g3=R({},xu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),x3=Mn(g3),y3=[9,13,27,32],Mm=u&&"CompositionEvent"in window,ol=null;u&&"documentMode"in document&&(ol=document.documentMode);var b3=u&&"TextEvent"in window&&!ol,Pw=u&&(!Mm||ol&&8<ol&&11>=ol),Rw=" ",Iw=!1;function Mw(o,c){switch(o){case"keyup":return y3.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ow(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Wi=!1;function v3(o,c){switch(o){case"compositionend":return Ow(c);case"keypress":return c.which!==32?null:(Iw=!0,Rw);case"textInput":return o=c.data,o===Rw&&Iw?null:o;default:return null}}function w3(o,c){if(Wi)return o==="compositionend"||!Mm&&Mw(o,c)?(o=_w(),hu=Dm=da=null,Wi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Pw&&c.locale!=="ko"?null:c.data;default:return null}}var j3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $w(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!j3[o.type]:c==="textarea"}function Lw(o,c,p,y){Zt(y),c=ju(c,"onChange"),0<c.length&&(p=new Am("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var ll=null,cl=null;function N3(o){rj(o,0)}function yu(o){var c=Qi(o);if(ve(c))return o}function S3(o,c){if(o==="change")return c}var Fw=!1;if(u){var Om;if(u){var $m="oninput"in document;if(!$m){var Bw=document.createElement("div");Bw.setAttribute("oninput","return;"),$m=typeof Bw.oninput=="function"}Om=$m}else Om=!1;Fw=Om&&(!document.documentMode||9<document.documentMode)}function zw(){ll&&(ll.detachEvent("onpropertychange",Gw),cl=ll=null)}function Gw(o){if(o.propertyName==="value"&&yu(cl)){var c=[];Lw(c,cl,o,It(o)),xe(N3,c)}}function k3(o,c,p){o==="focusin"?(zw(),ll=c,cl=p,ll.attachEvent("onpropertychange",Gw)):o==="focusout"&&zw()}function C3(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return yu(cl)}function _3(o,c){if(o==="click")return yu(c)}function E3(o,c){if(o==="input"||o==="change")return yu(c)}function D3(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var hs=typeof Object.is=="function"?Object.is:D3;function ul(o,c){if(hs(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var k=p[y];if(!d.call(c,k)||!hs(o[k],c[k]))return!1}return!0}function qw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Uw(o,c){var p=qw(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=qw(p)}}function Ww(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Ww(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Hw(){for(var o=window,c=Pe();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Pe(o.document)}return c}function Lm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function A3(o){var c=Hw(),p=o.focusedElem,y=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&Ww(p.ownerDocument.documentElement,p)){if(y!==null&&Lm(p)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var k=p.textContent.length,A=Math.min(y.start,k);y=y.end===void 0?A:Math.min(y.end,k),!o.extend&&A>y&&(k=y,y=A,A=k),k=Uw(p,A);var I=Uw(p,y);k&&I&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==I.node||o.focusOffset!==I.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),o.removeAllRanges(),A>y?(o.addRange(c),o.extend(I.node,I.offset)):(c.setEnd(I.node,I.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var T3=u&&"documentMode"in document&&11>=document.documentMode,Hi=null,Fm=null,dl=null,Bm=!1;function Vw(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Bm||Hi==null||Hi!==Pe(y)||(y=Hi,"selectionStart"in y&&Lm(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),dl&&ul(dl,y)||(dl=y,y=ju(Fm,"onSelect"),0<y.length&&(c=new Am("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Hi)))}function bu(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Vi={animationend:bu("Animation","AnimationEnd"),animationiteration:bu("Animation","AnimationIteration"),animationstart:bu("Animation","AnimationStart"),transitionend:bu("Transition","TransitionEnd")},zm={},Yw={};u&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function vu(o){if(zm[o])return zm[o];if(!Vi[o])return o;var c=Vi[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in Yw)return zm[o]=c[p];return o}var Kw=vu("animationend"),Qw=vu("animationiteration"),Xw=vu("animationstart"),Jw=vu("transitionend"),Zw=new Map,ej="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(o,c){Zw.set(o,c),i(c,[o])}for(var Gm=0;Gm<ej.length;Gm++){var qm=ej[Gm],P3=qm.toLowerCase(),R3=qm[0].toUpperCase()+qm.slice(1);fa(P3,"on"+R3)}fa(Kw,"onAnimationEnd"),fa(Qw,"onAnimationIteration"),fa(Xw,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(Jw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I3=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function tj(o,c,p){var y=o.type||"unknown-event";o.currentTarget=p,Fi(y,c,void 0,o),o.currentTarget=null}function rj(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],k=y.event;y=y.listeners;e:{var A=void 0;if(c)for(var I=y.length-1;0<=I;I--){var Y=y[I],J=Y.instance,ge=Y.currentTarget;if(Y=Y.listener,J!==A&&k.isPropagationStopped())break e;tj(k,Y,ge),A=J}else for(I=0;I<y.length;I++){if(Y=y[I],J=Y.instance,ge=Y.currentTarget,Y=Y.listener,J!==A&&k.isPropagationStopped())break e;tj(k,Y,ge),A=J}}}if(Kr)throw o=qt,Kr=!1,qt=null,o}function cr(o,c){var p=c[Xm];p===void 0&&(p=c[Xm]=new Set);var y=o+"__bubble";p.has(y)||(nj(c,o,2,!1),p.add(y))}function Um(o,c,p){var y=0;c&&(y|=4),nj(p,o,y,c)}var wu="_reactListening"+Math.random().toString(36).slice(2);function ml(o){if(!o[wu]){o[wu]=!0,s.forEach(function(p){p!=="selectionchange"&&(I3.has(p)||Um(p,!1,o),Um(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[wu]||(c[wu]=!0,Um("selectionchange",!1,c))}}function nj(o,c,p,y){switch(Cw(c)){case 1:var k=YP;break;case 4:k=KP;break;default:k=_m}p=k.bind(null,c,p,o),k=void 0,!er||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),y?k!==void 0?o.addEventListener(c,p,{capture:!0,passive:k}):o.addEventListener(c,p,!0):k!==void 0?o.addEventListener(c,p,{passive:k}):o.addEventListener(c,p,!1)}function Wm(o,c,p,y,k){var A=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var I=y.tag;if(I===3||I===4){var Y=y.stateNode.containerInfo;if(Y===k||Y.nodeType===8&&Y.parentNode===k)break;if(I===4)for(I=y.return;I!==null;){var J=I.tag;if((J===3||J===4)&&(J=I.stateNode.containerInfo,J===k||J.nodeType===8&&J.parentNode===k))return;I=I.return}for(;Y!==null;){if(I=Ka(Y),I===null)return;if(J=I.tag,J===5||J===6){y=A=I;continue e}Y=Y.parentNode}}y=y.return}xe(function(){var ge=A,Me=It(p),Oe=[];e:{var Re=Zw.get(o);if(Re!==void 0){var Ze=Am,at=o;switch(o){case"keypress":if(pu(p)===0)break e;case"keydown":case"keyup":Ze=u3;break;case"focusin":at="focus",Ze=Rm;break;case"focusout":at="blur",Ze=Rm;break;case"beforeblur":case"afterblur":Ze=Rm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=JP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=m3;break;case Kw:case Qw:case Xw:Ze=t3;break;case Jw:Ze=p3;break;case"scroll":Ze=QP;break;case"wheel":Ze=x3;break;case"copy":case"cut":case"paste":Ze=n3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Tw}var ot=(c&4)!==0,kr=!ot&&o==="scroll",ue=ot?Re!==null?Re+"Capture":null:Re;ot=[];for(var te=ge,de;te!==null;){de=te;var Fe=de.stateNode;if(de.tag===5&&Fe!==null&&(de=Fe,ue!==null&&(Fe=Qe(te,ue),Fe!=null&&ot.push(hl(te,Fe,de)))),kr)break;te=te.return}0<ot.length&&(Re=new Ze(Re,at,null,p,Me),Oe.push({event:Re,listeners:ot}))}}if((c&7)===0){e:{if(Re=o==="mouseover"||o==="pointerover",Ze=o==="mouseout"||o==="pointerout",Re&&p!==yt&&(at=p.relatedTarget||p.fromElement)&&(Ka(at)||at[Us]))break e;if((Ze||Re)&&(Re=Me.window===Me?Me:(Re=Me.ownerDocument)?Re.defaultView||Re.parentWindow:window,Ze?(at=p.relatedTarget||p.toElement,Ze=ge,at=at?Ka(at):null,at!==null&&(kr=Kn(at),at!==kr||at.tag!==5&&at.tag!==6)&&(at=null)):(Ze=null,at=ge),Ze!==at)){if(ot=Dw,Fe="onMouseLeave",ue="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(ot=Tw,Fe="onPointerLeave",ue="onPointerEnter",te="pointer"),kr=Ze==null?Re:Qi(Ze),de=at==null?Re:Qi(at),Re=new ot(Fe,te+"leave",Ze,p,Me),Re.target=kr,Re.relatedTarget=de,Fe=null,Ka(Me)===ge&&(ot=new ot(ue,te+"enter",at,p,Me),ot.target=de,ot.relatedTarget=kr,Fe=ot),kr=Fe,Ze&&at)t:{for(ot=Ze,ue=at,te=0,de=ot;de;de=Yi(de))te++;for(de=0,Fe=ue;Fe;Fe=Yi(Fe))de++;for(;0<te-de;)ot=Yi(ot),te--;for(;0<de-te;)ue=Yi(ue),de--;for(;te--;){if(ot===ue||ue!==null&&ot===ue.alternate)break t;ot=Yi(ot),ue=Yi(ue)}ot=null}else ot=null;Ze!==null&&sj(Oe,Re,Ze,ot,!1),at!==null&&kr!==null&&sj(Oe,kr,at,ot,!0)}}e:{if(Re=ge?Qi(ge):window,Ze=Re.nodeName&&Re.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Re.type==="file")var ct=S3;else if($w(Re))if(Fw)ct=E3;else{ct=C3;var gt=k3}else(Ze=Re.nodeName)&&Ze.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(ct=_3);if(ct&&(ct=ct(o,ge))){Lw(Oe,ct,p,Me);break e}gt&&gt(o,Re,ge),o==="focusout"&&(gt=Re._wrapperState)&&gt.controlled&&Re.type==="number"&&Ge(Re,"number",Re.value)}switch(gt=ge?Qi(ge):window,o){case"focusin":($w(gt)||gt.contentEditable==="true")&&(Hi=gt,Fm=ge,dl=null);break;case"focusout":dl=Fm=Hi=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,Vw(Oe,p,Me);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":Vw(Oe,p,Me)}var xt;if(Mm)e:{switch(o){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Wi?Mw(o,p)&&(wt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(wt="onCompositionStart");wt&&(Pw&&p.locale!=="ko"&&(Wi||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Wi&&(xt=_w()):(da=Me,Dm="value"in da?da.value:da.textContent,Wi=!0)),gt=ju(ge,wt),0<gt.length&&(wt=new Aw(wt,o,null,p,Me),Oe.push({event:wt,listeners:gt}),xt?wt.data=xt:(xt=Ow(p),xt!==null&&(wt.data=xt)))),(xt=b3?v3(o,p):w3(o,p))&&(ge=ju(ge,"onBeforeInput"),0<ge.length&&(Me=new Aw("onBeforeInput","beforeinput",null,p,Me),Oe.push({event:Me,listeners:ge}),Me.data=xt))}rj(Oe,c)})}function hl(o,c,p){return{instance:o,listener:c,currentTarget:p}}function ju(o,c){for(var p=c+"Capture",y=[];o!==null;){var k=o,A=k.stateNode;k.tag===5&&A!==null&&(k=A,A=Qe(o,p),A!=null&&y.unshift(hl(o,A,k)),A=Qe(o,c),A!=null&&y.push(hl(o,A,k))),o=o.return}return y}function Yi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function sj(o,c,p,y,k){for(var A=c._reactName,I=[];p!==null&&p!==y;){var Y=p,J=Y.alternate,ge=Y.stateNode;if(J!==null&&J===y)break;Y.tag===5&&ge!==null&&(Y=ge,k?(J=Qe(p,A),J!=null&&I.unshift(hl(p,J,Y))):k||(J=Qe(p,A),J!=null&&I.push(hl(p,J,Y)))),p=p.return}I.length!==0&&o.push({event:c,listeners:I})}var M3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function aj(o){return(typeof o=="string"?o:""+o).replace(M3,`
`).replace(O3,"")}function Nu(o,c,p){if(c=aj(c),aj(o)!==c&&p)throw Error(r(425))}function Su(){}var Hm=null,Vm=null;function Ym(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,$3=typeof clearTimeout=="function"?clearTimeout:void 0,ij=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof ij<"u"?function(o){return ij.resolve(null).then(o).catch(F3)}:Km;function F3(o){setTimeout(function(){throw o})}function Qm(o,c){var p=c,y=0;do{var k=p.nextSibling;if(o.removeChild(p),k&&k.nodeType===8)if(p=k.data,p==="/$"){if(y===0){o.removeChild(k),Xn(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=k}while(p);Xn(c)}function ma(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function oj(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Ki,pl="__reactProps$"+Ki,Us="__reactContainer$"+Ki,Xm="__reactEvents$"+Ki,B3="__reactListeners$"+Ki,z3="__reactHandles$"+Ki;function Ka(o){var c=o[Cs];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Us]||p[Cs]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=oj(o);o!==null;){if(p=o[Cs])return p;o=oj(o)}return c}o=p,p=o.parentNode}return null}function gl(o){return o=o[Cs]||o[Us],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Qi(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function ku(o){return o[pl]||null}var Jm=[],Xi=-1;function ha(o){return{current:o}}function ur(o){0>Xi||(o.current=Jm[Xi],Jm[Xi]=null,Xi--)}function sr(o,c){Xi++,Jm[Xi]=o.current,o.current=c}var pa={},Xr=ha(pa),yn=ha(!1),Qa=pa;function Ji(o,c){var p=o.type.contextTypes;if(!p)return pa;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var k={},A;for(A in p)k[A]=c[A];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=k),k}function bn(o){return o=o.childContextTypes,o!=null}function Cu(){ur(yn),ur(Xr)}function lj(o,c,p){if(Xr.current!==pa)throw Error(r(168));sr(Xr,c),sr(yn,p)}function cj(o,c,p){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var k in y)if(!(k in c))throw Error(r(108,ae(o)||"Unknown",k));return R({},p,y)}function _u(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||pa,Qa=Xr.current,sr(Xr,o),sr(yn,yn.current),!0}function uj(o,c,p){var y=o.stateNode;if(!y)throw Error(r(169));p?(o=cj(o,c,Qa),y.__reactInternalMemoizedMergedChildContext=o,ur(yn),ur(Xr),sr(Xr,o)):ur(yn),sr(yn,p)}var Ws=null,Eu=!1,Zm=!1;function dj(o){Ws===null?Ws=[o]:Ws.push(o)}function G3(o){Eu=!0,dj(o)}function ga(){if(!Zm&&Ws!==null){Zm=!0;var o=0,c=vt;try{var p=Ws;for(vt=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}Ws=null,Eu=!1}catch(k){throw Ws!==null&&(Ws=Ws.slice(o+1)),ou(rl,ga),k}finally{vt=c,Zm=!1}}return null}var Zi=[],eo=0,Du=null,Au=0,Jn=[],Zn=0,Xa=null,Hs=1,Vs="";function Ja(o,c){Zi[eo++]=Au,Zi[eo++]=Du,Du=o,Au=c}function fj(o,c,p){Jn[Zn++]=Hs,Jn[Zn++]=Vs,Jn[Zn++]=Xa,Xa=o;var y=Hs;o=Vs;var k=32-je(y)-1;y&=~(1<<k),p+=1;var A=32-je(c)+k;if(30<A){var I=k-k%5;A=(y&(1<<I)-1).toString(32),y>>=I,k-=I,Hs=1<<32-je(c)+k|p<<k|y,Vs=A+o}else Hs=1<<A|p<<k|y,Vs=o}function eh(o){o.return!==null&&(Ja(o,1),fj(o,1,0))}function th(o){for(;o===Du;)Du=Zi[--eo],Zi[eo]=null,Au=Zi[--eo],Zi[eo]=null;for(;o===Xa;)Xa=Jn[--Zn],Jn[Zn]=null,Vs=Jn[--Zn],Jn[Zn]=null,Hs=Jn[--Zn],Jn[Zn]=null}var On=null,$n=null,fr=!1,ps=null;function mj(o,c){var p=ns(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function hj(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,On=o,$n=ma(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,On=o,$n=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Xa!==null?{id:Hs,overflow:Vs}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=ns(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,On=o,$n=null,!0):!1;default:return!1}}function rh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function nh(o){if(fr){var c=$n;if(c){var p=c;if(!hj(o,c)){if(rh(o))throw Error(r(418));c=ma(p.nextSibling);var y=On;c&&hj(o,c)?mj(y,p):(o.flags=o.flags&-4097|2,fr=!1,On=o)}}else{if(rh(o))throw Error(r(418));o.flags=o.flags&-4097|2,fr=!1,On=o}}}function pj(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;On=o}function Tu(o){if(o!==On)return!1;if(!fr)return pj(o),fr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Ym(o.type,o.memoizedProps)),c&&(c=$n)){if(rh(o))throw gj(),Error(r(418));for(;c;)mj(o,c),c=ma(c.nextSibling)}if(pj(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){$n=ma(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}$n=null}}else $n=On?ma(o.stateNode.nextSibling):null;return!0}function gj(){for(var o=$n;o;)o=ma(o.nextSibling)}function to(){$n=On=null,fr=!1}function sh(o){ps===null?ps=[o]:ps.push(o)}var q3=S.ReactCurrentBatchConfig;function xl(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(r(309));var y=p.stateNode}if(!y)throw Error(r(147,o));var k=y,A=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(I){var Y=k.refs;I===null?delete Y[A]:Y[A]=I},c._stringRef=A,c)}if(typeof o!="string")throw Error(r(284));if(!p._owner)throw Error(r(290,o))}return o}function Pu(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function xj(o){var c=o._init;return c(o._payload)}function yj(o){function c(ue,te){if(o){var de=ue.deletions;de===null?(ue.deletions=[te],ue.flags|=16):de.push(te)}}function p(ue,te){if(!o)return null;for(;te!==null;)c(ue,te),te=te.sibling;return null}function y(ue,te){for(ue=new Map;te!==null;)te.key!==null?ue.set(te.key,te):ue.set(te.index,te),te=te.sibling;return ue}function k(ue,te){return ue=Sa(ue,te),ue.index=0,ue.sibling=null,ue}function A(ue,te,de){return ue.index=de,o?(de=ue.alternate,de!==null?(de=de.index,de<te?(ue.flags|=2,te):de):(ue.flags|=2,te)):(ue.flags|=1048576,te)}function I(ue){return o&&ue.alternate===null&&(ue.flags|=2),ue}function Y(ue,te,de,Fe){return te===null||te.tag!==6?(te=Kh(de,ue.mode,Fe),te.return=ue,te):(te=k(te,de),te.return=ue,te)}function J(ue,te,de,Fe){var ct=de.type;return ct===T?Me(ue,te,de.props.children,Fe,de.key):te!==null&&(te.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===ee&&xj(ct)===te.type)?(Fe=k(te,de.props),Fe.ref=xl(ue,te,de),Fe.return=ue,Fe):(Fe=rd(de.type,de.key,de.props,null,ue.mode,Fe),Fe.ref=xl(ue,te,de),Fe.return=ue,Fe)}function ge(ue,te,de,Fe){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=Qh(de,ue.mode,Fe),te.return=ue,te):(te=k(te,de.children||[]),te.return=ue,te)}function Me(ue,te,de,Fe,ct){return te===null||te.tag!==7?(te=ii(de,ue.mode,Fe,ct),te.return=ue,te):(te=k(te,de),te.return=ue,te)}function Oe(ue,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Kh(""+te,ue.mode,de),te.return=ue,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return de=rd(te.type,te.key,te.props,null,ue.mode,de),de.ref=xl(ue,null,te),de.return=ue,de;case D:return te=Qh(te,ue.mode,de),te.return=ue,te;case ee:var Fe=te._init;return Oe(ue,Fe(te._payload),de)}if(Ye(te)||W(te))return te=ii(te,ue.mode,de,null),te.return=ue,te;Pu(ue,te)}return null}function Re(ue,te,de,Fe){var ct=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return ct!==null?null:Y(ue,te,""+de,Fe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case _:return de.key===ct?J(ue,te,de,Fe):null;case D:return de.key===ct?ge(ue,te,de,Fe):null;case ee:return ct=de._init,Re(ue,te,ct(de._payload),Fe)}if(Ye(de)||W(de))return ct!==null?null:Me(ue,te,de,Fe,null);Pu(ue,de)}return null}function Ze(ue,te,de,Fe,ct){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return ue=ue.get(de)||null,Y(te,ue,""+Fe,ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _:return ue=ue.get(Fe.key===null?de:Fe.key)||null,J(te,ue,Fe,ct);case D:return ue=ue.get(Fe.key===null?de:Fe.key)||null,ge(te,ue,Fe,ct);case ee:var gt=Fe._init;return Ze(ue,te,de,gt(Fe._payload),ct)}if(Ye(Fe)||W(Fe))return ue=ue.get(de)||null,Me(te,ue,Fe,ct,null);Pu(te,Fe)}return null}function at(ue,te,de,Fe){for(var ct=null,gt=null,xt=te,wt=te=0,$r=null;xt!==null&&wt<de.length;wt++){xt.index>wt?($r=xt,xt=null):$r=xt.sibling;var Ft=Re(ue,xt,de[wt],Fe);if(Ft===null){xt===null&&(xt=$r);break}o&&xt&&Ft.alternate===null&&c(ue,xt),te=A(Ft,te,wt),gt===null?ct=Ft:gt.sibling=Ft,gt=Ft,xt=$r}if(wt===de.length)return p(ue,xt),fr&&Ja(ue,wt),ct;if(xt===null){for(;wt<de.length;wt++)xt=Oe(ue,de[wt],Fe),xt!==null&&(te=A(xt,te,wt),gt===null?ct=xt:gt.sibling=xt,gt=xt);return fr&&Ja(ue,wt),ct}for(xt=y(ue,xt);wt<de.length;wt++)$r=Ze(xt,ue,wt,de[wt],Fe),$r!==null&&(o&&$r.alternate!==null&&xt.delete($r.key===null?wt:$r.key),te=A($r,te,wt),gt===null?ct=$r:gt.sibling=$r,gt=$r);return o&&xt.forEach(function(ka){return c(ue,ka)}),fr&&Ja(ue,wt),ct}function ot(ue,te,de,Fe){var ct=W(de);if(typeof ct!="function")throw Error(r(150));if(de=ct.call(de),de==null)throw Error(r(151));for(var gt=ct=null,xt=te,wt=te=0,$r=null,Ft=de.next();xt!==null&&!Ft.done;wt++,Ft=de.next()){xt.index>wt?($r=xt,xt=null):$r=xt.sibling;var ka=Re(ue,xt,Ft.value,Fe);if(ka===null){xt===null&&(xt=$r);break}o&&xt&&ka.alternate===null&&c(ue,xt),te=A(ka,te,wt),gt===null?ct=ka:gt.sibling=ka,gt=ka,xt=$r}if(Ft.done)return p(ue,xt),fr&&Ja(ue,wt),ct;if(xt===null){for(;!Ft.done;wt++,Ft=de.next())Ft=Oe(ue,Ft.value,Fe),Ft!==null&&(te=A(Ft,te,wt),gt===null?ct=Ft:gt.sibling=Ft,gt=Ft);return fr&&Ja(ue,wt),ct}for(xt=y(ue,xt);!Ft.done;wt++,Ft=de.next())Ft=Ze(xt,ue,wt,Ft.value,Fe),Ft!==null&&(o&&Ft.alternate!==null&&xt.delete(Ft.key===null?wt:Ft.key),te=A(Ft,te,wt),gt===null?ct=Ft:gt.sibling=Ft,gt=Ft);return o&&xt.forEach(function(j5){return c(ue,j5)}),fr&&Ja(ue,wt),ct}function kr(ue,te,de,Fe){if(typeof de=="object"&&de!==null&&de.type===T&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case _:e:{for(var ct=de.key,gt=te;gt!==null;){if(gt.key===ct){if(ct=de.type,ct===T){if(gt.tag===7){p(ue,gt.sibling),te=k(gt,de.props.children),te.return=ue,ue=te;break e}}else if(gt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===ee&&xj(ct)===gt.type){p(ue,gt.sibling),te=k(gt,de.props),te.ref=xl(ue,gt,de),te.return=ue,ue=te;break e}p(ue,gt);break}else c(ue,gt);gt=gt.sibling}de.type===T?(te=ii(de.props.children,ue.mode,Fe,de.key),te.return=ue,ue=te):(Fe=rd(de.type,de.key,de.props,null,ue.mode,Fe),Fe.ref=xl(ue,te,de),Fe.return=ue,ue=Fe)}return I(ue);case D:e:{for(gt=de.key;te!==null;){if(te.key===gt)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){p(ue,te.sibling),te=k(te,de.children||[]),te.return=ue,ue=te;break e}else{p(ue,te);break}else c(ue,te);te=te.sibling}te=Qh(de,ue.mode,Fe),te.return=ue,ue=te}return I(ue);case ee:return gt=de._init,kr(ue,te,gt(de._payload),Fe)}if(Ye(de))return at(ue,te,de,Fe);if(W(de))return ot(ue,te,de,Fe);Pu(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,te!==null&&te.tag===6?(p(ue,te.sibling),te=k(te,de),te.return=ue,ue=te):(p(ue,te),te=Kh(de,ue.mode,Fe),te.return=ue,ue=te),I(ue)):p(ue,te)}return kr}var ro=yj(!0),bj=yj(!1),Ru=ha(null),Iu=null,no=null,ah=null;function ih(){ah=no=Iu=null}function oh(o){var c=Ru.current;ur(Ru),o._currentValue=c}function lh(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function so(o,c){Iu=o,ah=no=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(vn=!0),o.firstContext=null)}function es(o){var c=o._currentValue;if(ah!==o)if(o={context:o,memoizedValue:c,next:null},no===null){if(Iu===null)throw Error(r(308));no=o,Iu.dependencies={lanes:0,firstContext:o}}else no=no.next=o;return c}var Za=null;function ch(o){Za===null?Za=[o]:Za.push(o)}function vj(o,c,p,y){var k=c.interleaved;return k===null?(p.next=p,ch(c)):(p.next=k.next,k.next=p),c.interleaved=p,Ys(o,y)}function Ys(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var xa=!1;function uh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wj(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ks(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ya(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,($t&2)!==0){var k=y.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),y.pending=c,Ys(o,p)}return k=y.interleaved,k===null?(c.next=c,ch(y)):(c.next=k.next,k.next=c),y.interleaved=c,Ys(o,p)}function Mu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Qt(o,p)}}function jj(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var k=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var I={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};A===null?k=A=I:A=A.next=I,p=p.next}while(p!==null);A===null?k=A=c:A=A.next=c}else k=A=c;p={baseState:y.baseState,firstBaseUpdate:k,lastBaseUpdate:A,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function Ou(o,c,p,y){var k=o.updateQueue;xa=!1;var A=k.firstBaseUpdate,I=k.lastBaseUpdate,Y=k.shared.pending;if(Y!==null){k.shared.pending=null;var J=Y,ge=J.next;J.next=null,I===null?A=ge:I.next=ge,I=J;var Me=o.alternate;Me!==null&&(Me=Me.updateQueue,Y=Me.lastBaseUpdate,Y!==I&&(Y===null?Me.firstBaseUpdate=ge:Y.next=ge,Me.lastBaseUpdate=J))}if(A!==null){var Oe=k.baseState;I=0,Me=ge=J=null,Y=A;do{var Re=Y.lane,Ze=Y.eventTime;if((y&Re)===Re){Me!==null&&(Me=Me.next={eventTime:Ze,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var at=o,ot=Y;switch(Re=c,Ze=p,ot.tag){case 1:if(at=ot.payload,typeof at=="function"){Oe=at.call(Ze,Oe,Re);break e}Oe=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ot.payload,Re=typeof at=="function"?at.call(Ze,Oe,Re):at,Re==null)break e;Oe=R({},Oe,Re);break e;case 2:xa=!0}}Y.callback!==null&&Y.lane!==0&&(o.flags|=64,Re=k.effects,Re===null?k.effects=[Y]:Re.push(Y))}else Ze={eventTime:Ze,lane:Re,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Me===null?(ge=Me=Ze,J=Oe):Me=Me.next=Ze,I|=Re;if(Y=Y.next,Y===null){if(Y=k.shared.pending,Y===null)break;Re=Y,Y=Re.next,Re.next=null,k.lastBaseUpdate=Re,k.shared.pending=null}}while(!0);if(Me===null&&(J=Oe),k.baseState=J,k.firstBaseUpdate=ge,k.lastBaseUpdate=Me,c=k.shared.interleaved,c!==null){k=c;do I|=k.lane,k=k.next;while(k!==c)}else A===null&&(k.shared.lanes=0);ri|=I,o.lanes=I,o.memoizedState=Oe}}function Nj(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],k=y.callback;if(k!==null){if(y.callback=null,y=p,typeof k!="function")throw Error(r(191,k));k.call(y)}}}var yl={},_s=ha(yl),bl=ha(yl),vl=ha(yl);function ei(o){if(o===yl)throw Error(r(174));return o}function dh(o,c){switch(sr(vl,c),sr(bl,o),sr(_s,yl),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ne(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Ne(c,o)}ur(_s),sr(_s,c)}function ao(){ur(_s),ur(bl),ur(vl)}function Sj(o){ei(vl.current);var c=ei(_s.current),p=Ne(c,o.type);c!==p&&(sr(bl,o),sr(_s,p))}function fh(o){bl.current===o&&(ur(_s),ur(bl))}var gr=ha(0);function $u(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var mh=[];function hh(){for(var o=0;o<mh.length;o++)mh[o]._workInProgressVersionPrimary=null;mh.length=0}var Lu=S.ReactCurrentDispatcher,ph=S.ReactCurrentBatchConfig,ti=0,xr=null,Ar=null,Mr=null,Fu=!1,wl=!1,jl=0,U3=0;function Jr(){throw Error(r(321))}function gh(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!hs(o[p],c[p]))return!1;return!0}function xh(o,c,p,y,k,A){if(ti=A,xr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Lu.current=o===null||o.memoizedState===null?Y3:K3,o=p(y,k),wl){A=0;do{if(wl=!1,jl=0,25<=A)throw Error(r(301));A+=1,Mr=Ar=null,c.updateQueue=null,Lu.current=Q3,o=p(y,k)}while(wl)}if(Lu.current=Gu,c=Ar!==null&&Ar.next!==null,ti=0,Mr=Ar=xr=null,Fu=!1,c)throw Error(r(300));return o}function yh(){var o=jl!==0;return jl=0,o}function Es(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?xr.memoizedState=Mr=o:Mr=Mr.next=o,Mr}function ts(){if(Ar===null){var o=xr.alternate;o=o!==null?o.memoizedState:null}else o=Ar.next;var c=Mr===null?xr.memoizedState:Mr.next;if(c!==null)Mr=c,Ar=o;else{if(o===null)throw Error(r(310));Ar=o,o={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Mr===null?xr.memoizedState=Mr=o:Mr=Mr.next=o}return Mr}function Nl(o,c){return typeof c=="function"?c(o):c}function bh(o){var c=ts(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=o;var y=Ar,k=y.baseQueue,A=p.pending;if(A!==null){if(k!==null){var I=k.next;k.next=A.next,A.next=I}y.baseQueue=k=A,p.pending=null}if(k!==null){A=k.next,y=y.baseState;var Y=I=null,J=null,ge=A;do{var Me=ge.lane;if((ti&Me)===Me)J!==null&&(J=J.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),y=ge.hasEagerState?ge.eagerState:o(y,ge.action);else{var Oe={lane:Me,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};J===null?(Y=J=Oe,I=y):J=J.next=Oe,xr.lanes|=Me,ri|=Me}ge=ge.next}while(ge!==null&&ge!==A);J===null?I=y:J.next=Y,hs(y,c.memoizedState)||(vn=!0),c.memoizedState=y,c.baseState=I,c.baseQueue=J,p.lastRenderedState=y}if(o=p.interleaved,o!==null){k=o;do A=k.lane,xr.lanes|=A,ri|=A,k=k.next;while(k!==o)}else k===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function vh(o){var c=ts(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=o;var y=p.dispatch,k=p.pending,A=c.memoizedState;if(k!==null){p.pending=null;var I=k=k.next;do A=o(A,I.action),I=I.next;while(I!==k);hs(A,c.memoizedState)||(vn=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),p.lastRenderedState=A}return[A,y]}function kj(){}function Cj(o,c){var p=xr,y=ts(),k=c(),A=!hs(y.memoizedState,k);if(A&&(y.memoizedState=k,vn=!0),y=y.queue,wh(Dj.bind(null,p,y,o),[o]),y.getSnapshot!==c||A||Mr!==null&&Mr.memoizedState.tag&1){if(p.flags|=2048,Sl(9,Ej.bind(null,p,y,k,c),void 0,null),Or===null)throw Error(r(349));(ti&30)!==0||_j(p,c,k)}return k}function _j(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=xr.updateQueue,c===null?(c={lastEffect:null,stores:null},xr.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function Ej(o,c,p,y){c.value=p,c.getSnapshot=y,Aj(c)&&Tj(o)}function Dj(o,c,p){return p(function(){Aj(c)&&Tj(o)})}function Aj(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!hs(o,p)}catch{return!0}}function Tj(o){var c=Ys(o,1);c!==null&&bs(c,o,1,-1)}function Pj(o){var c=Es();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:o},c.queue=o,o=o.dispatch=V3.bind(null,xr,o),[c.memoizedState,o]}function Sl(o,c,p,y){return o={tag:o,create:c,destroy:p,deps:y,next:null},c=xr.updateQueue,c===null?(c={lastEffect:null,stores:null},xr.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o)),o}function Rj(){return ts().memoizedState}function Bu(o,c,p,y){var k=Es();xr.flags|=o,k.memoizedState=Sl(1|c,p,void 0,y===void 0?null:y)}function zu(o,c,p,y){var k=ts();y=y===void 0?null:y;var A=void 0;if(Ar!==null){var I=Ar.memoizedState;if(A=I.destroy,y!==null&&gh(y,I.deps)){k.memoizedState=Sl(c,p,A,y);return}}xr.flags|=o,k.memoizedState=Sl(1|c,p,A,y)}function Ij(o,c){return Bu(8390656,8,o,c)}function wh(o,c){return zu(2048,8,o,c)}function Mj(o,c){return zu(4,2,o,c)}function Oj(o,c){return zu(4,4,o,c)}function $j(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Lj(o,c,p){return p=p!=null?p.concat([o]):null,zu(4,4,$j.bind(null,c,o),p)}function jh(){}function Fj(o,c){var p=ts();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&gh(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function Bj(o,c){var p=ts();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&gh(c,y[1])?y[0]:(o=o(),p.memoizedState=[o,c],o)}function zj(o,c,p){return(ti&21)===0?(o.baseState&&(o.baseState=!1,vn=!0),o.memoizedState=p):(hs(p,c)||(p=et(),xr.lanes|=p,ri|=p,o.baseState=!0),c)}function W3(o,c){var p=vt;vt=p!==0&&4>p?p:4,o(!0);var y=ph.transition;ph.transition={};try{o(!1),c()}finally{vt=p,ph.transition=y}}function Gj(){return ts().memoizedState}function H3(o,c,p){var y=ja(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},qj(o))Uj(c,p);else if(p=vj(o,c,p,y),p!==null){var k=un();bs(p,o,y,k),Wj(p,c,y)}}function V3(o,c,p){var y=ja(o),k={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(qj(o))Uj(c,k);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var I=c.lastRenderedState,Y=A(I,p);if(k.hasEagerState=!0,k.eagerState=Y,hs(Y,I)){var J=c.interleaved;J===null?(k.next=k,ch(c)):(k.next=J.next,J.next=k),c.interleaved=k;return}}catch{}finally{}p=vj(o,c,k,y),p!==null&&(k=un(),bs(p,o,y,k),Wj(p,c,y))}}function qj(o){var c=o.alternate;return o===xr||c!==null&&c===xr}function Uj(o,c){wl=Fu=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function Wj(o,c,p){if((p&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Qt(o,p)}}var Gu={readContext:es,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},Y3={readContext:es,useCallback:function(o,c){return Es().memoizedState=[o,c===void 0?null:c],o},useContext:es,useEffect:Ij,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,Bu(4194308,4,$j.bind(null,c,o),p)},useLayoutEffect:function(o,c){return Bu(4194308,4,o,c)},useInsertionEffect:function(o,c){return Bu(4,2,o,c)},useMemo:function(o,c){var p=Es();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var y=Es();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=H3.bind(null,xr,o),[y.memoizedState,o]},useRef:function(o){var c=Es();return o={current:o},c.memoizedState=o},useState:Pj,useDebugValue:jh,useDeferredValue:function(o){return Es().memoizedState=o},useTransition:function(){var o=Pj(!1),c=o[0];return o=W3.bind(null,o[1]),Es().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var y=xr,k=Es();if(fr){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),Or===null)throw Error(r(349));(ti&30)!==0||_j(y,c,p)}k.memoizedState=p;var A={value:p,getSnapshot:c};return k.queue=A,Ij(Dj.bind(null,y,A,o),[o]),y.flags|=2048,Sl(9,Ej.bind(null,y,A,p,c),void 0,null),p},useId:function(){var o=Es(),c=Or.identifierPrefix;if(fr){var p=Vs,y=Hs;p=(y&~(1<<32-je(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=jl++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=U3++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},K3={readContext:es,useCallback:Fj,useContext:es,useEffect:wh,useImperativeHandle:Lj,useInsertionEffect:Mj,useLayoutEffect:Oj,useMemo:Bj,useReducer:bh,useRef:Rj,useState:function(){return bh(Nl)},useDebugValue:jh,useDeferredValue:function(o){var c=ts();return zj(c,Ar.memoizedState,o)},useTransition:function(){var o=bh(Nl)[0],c=ts().memoizedState;return[o,c]},useMutableSource:kj,useSyncExternalStore:Cj,useId:Gj,unstable_isNewReconciler:!1},Q3={readContext:es,useCallback:Fj,useContext:es,useEffect:wh,useImperativeHandle:Lj,useInsertionEffect:Mj,useLayoutEffect:Oj,useMemo:Bj,useReducer:vh,useRef:Rj,useState:function(){return vh(Nl)},useDebugValue:jh,useDeferredValue:function(o){var c=ts();return Ar===null?c.memoizedState=o:zj(c,Ar.memoizedState,o)},useTransition:function(){var o=vh(Nl)[0],c=ts().memoizedState;return[o,c]},useMutableSource:kj,useSyncExternalStore:Cj,useId:Gj,unstable_isNewReconciler:!1};function gs(o,c){if(o&&o.defaultProps){c=R({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function Nh(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:R({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var qu={isMounted:function(o){return(o=o._reactInternals)?Kn(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var y=un(),k=ja(o),A=Ks(y,k);A.payload=c,p!=null&&(A.callback=p),c=ya(o,A,k),c!==null&&(bs(c,o,k,y),Mu(c,o,k))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=un(),k=ja(o),A=Ks(y,k);A.tag=1,A.payload=c,p!=null&&(A.callback=p),c=ya(o,A,k),c!==null&&(bs(c,o,k,y),Mu(c,o,k))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=un(),y=ja(o),k=Ks(p,y);k.tag=2,c!=null&&(k.callback=c),c=ya(o,k,y),c!==null&&(bs(c,o,y,p),Mu(c,o,y))}};function Hj(o,c,p,y,k,A,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,A,I):c.prototype&&c.prototype.isPureReactComponent?!ul(p,y)||!ul(k,A):!0}function Vj(o,c,p){var y=!1,k=pa,A=c.contextType;return typeof A=="object"&&A!==null?A=es(A):(k=bn(c)?Qa:Xr.current,y=c.contextTypes,A=(y=y!=null)?Ji(o,k):pa),c=new c(p,A),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=qu,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=A),c}function Yj(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&qu.enqueueReplaceState(c,c.state,null)}function Sh(o,c,p,y){var k=o.stateNode;k.props=p,k.state=o.memoizedState,k.refs={},uh(o);var A=c.contextType;typeof A=="object"&&A!==null?k.context=es(A):(A=bn(c)?Qa:Xr.current,k.context=Ji(o,A)),k.state=o.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(Nh(o,c,A,p),k.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&qu.enqueueReplaceState(k,k.state,null),Ou(o,p,k,y),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function io(o,c){try{var p="",y=c;do p+=Se(y),y=y.return;while(y);var k=p}catch(A){k=`
Error generating stack: `+A.message+`
`+A.stack}return{value:o,source:c,stack:k,digest:null}}function kh(o,c,p){return{value:o,source:null,stack:p??null,digest:c??null}}function Ch(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var X3=typeof WeakMap=="function"?WeakMap:Map;function Kj(o,c,p){p=Ks(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){Qu||(Qu=!0,zh=y),Ch(o,c)},p}function Qj(o,c,p){p=Ks(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var k=c.value;p.payload=function(){return y(k)},p.callback=function(){Ch(o,c)}}var A=o.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(p.callback=function(){Ch(o,c),typeof y!="function"&&(va===null?va=new Set([this]):va.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})}),p}function Xj(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new X3;var k=new Set;y.set(c,k)}else k=y.get(c),k===void 0&&(k=new Set,y.set(c,k));k.has(p)||(k.add(p),o=d5.bind(null,o,c,p),c.then(o,o))}function Jj(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Zj(o,c,p,y,k){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Ks(-1,1),c.tag=2,ya(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var J3=S.ReactCurrentOwner,vn=!1;function cn(o,c,p,y){c.child=o===null?bj(c,null,p,y):ro(c,o.child,p,y)}function e1(o,c,p,y,k){p=p.render;var A=c.ref;return so(c,k),y=xh(o,c,p,y,A,k),p=yh(),o!==null&&!vn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Qs(o,c,k)):(fr&&p&&eh(c),c.flags|=1,cn(o,c,y,k),c.child)}function t1(o,c,p,y,k){if(o===null){var A=p.type;return typeof A=="function"&&!Yh(A)&&A.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=A,r1(o,c,A,y,k)):(o=rd(p.type,null,y,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(A=o.child,(o.lanes&k)===0){var I=A.memoizedProps;if(p=p.compare,p=p!==null?p:ul,p(I,y)&&o.ref===c.ref)return Qs(o,c,k)}return c.flags|=1,o=Sa(A,y),o.ref=c.ref,o.return=c,c.child=o}function r1(o,c,p,y,k){if(o!==null){var A=o.memoizedProps;if(ul(A,y)&&o.ref===c.ref)if(vn=!1,c.pendingProps=y=A,(o.lanes&k)!==0)(o.flags&131072)!==0&&(vn=!0);else return c.lanes=o.lanes,Qs(o,c,k)}return _h(o,c,p,y,k)}function n1(o,c,p){var y=c.pendingProps,k=y.children,A=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(lo,Ln),Ln|=p;else{if((p&1073741824)===0)return o=A!==null?A.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,sr(lo,Ln),Ln|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=A!==null?A.baseLanes:p,sr(lo,Ln),Ln|=y}else A!==null?(y=A.baseLanes|p,c.memoizedState=null):y=p,sr(lo,Ln),Ln|=y;return cn(o,c,k,p),c.child}function s1(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function _h(o,c,p,y,k){var A=bn(p)?Qa:Xr.current;return A=Ji(c,A),so(c,k),p=xh(o,c,p,y,A,k),y=yh(),o!==null&&!vn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Qs(o,c,k)):(fr&&y&&eh(c),c.flags|=1,cn(o,c,p,k),c.child)}function a1(o,c,p,y,k){if(bn(p)){var A=!0;_u(c)}else A=!1;if(so(c,k),c.stateNode===null)Wu(o,c),Vj(c,p,y),Sh(c,p,y,k),y=!0;else if(o===null){var I=c.stateNode,Y=c.memoizedProps;I.props=Y;var J=I.context,ge=p.contextType;typeof ge=="object"&&ge!==null?ge=es(ge):(ge=bn(p)?Qa:Xr.current,ge=Ji(c,ge));var Me=p.getDerivedStateFromProps,Oe=typeof Me=="function"||typeof I.getSnapshotBeforeUpdate=="function";Oe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y!==y||J!==ge)&&Yj(c,I,y,ge),xa=!1;var Re=c.memoizedState;I.state=Re,Ou(c,y,I,k),J=c.memoizedState,Y!==y||Re!==J||yn.current||xa?(typeof Me=="function"&&(Nh(c,p,Me,y),J=c.memoizedState),(Y=xa||Hj(c,p,Y,y,Re,J,ge))?(Oe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(c.flags|=4194308)):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=J),I.props=y,I.state=J,I.context=ge,y=Y):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{I=c.stateNode,wj(o,c),Y=c.memoizedProps,ge=c.type===c.elementType?Y:gs(c.type,Y),I.props=ge,Oe=c.pendingProps,Re=I.context,J=p.contextType,typeof J=="object"&&J!==null?J=es(J):(J=bn(p)?Qa:Xr.current,J=Ji(c,J));var Ze=p.getDerivedStateFromProps;(Me=typeof Ze=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y!==Oe||Re!==J)&&Yj(c,I,y,J),xa=!1,Re=c.memoizedState,I.state=Re,Ou(c,y,I,k);var at=c.memoizedState;Y!==Oe||Re!==at||yn.current||xa?(typeof Ze=="function"&&(Nh(c,p,Ze,y),at=c.memoizedState),(ge=xa||Hj(c,p,ge,y,Re,at,J)||!1)?(Me||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(y,at,J),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(y,at,J)),typeof I.componentDidUpdate=="function"&&(c.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof I.componentDidUpdate!="function"||Y===o.memoizedProps&&Re===o.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Re===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=at),I.props=y,I.state=at,I.context=J,y=ge):(typeof I.componentDidUpdate!="function"||Y===o.memoizedProps&&Re===o.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Re===o.memoizedState||(c.flags|=1024),y=!1)}return Eh(o,c,p,y,A,k)}function Eh(o,c,p,y,k,A){s1(o,c);var I=(c.flags&128)!==0;if(!y&&!I)return k&&uj(c,p,!1),Qs(o,c,A);y=c.stateNode,J3.current=c;var Y=I&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&I?(c.child=ro(c,o.child,null,A),c.child=ro(c,null,Y,A)):cn(o,c,Y,A),c.memoizedState=y.state,k&&uj(c,p,!0),c.child}function i1(o){var c=o.stateNode;c.pendingContext?lj(o,c.pendingContext,c.pendingContext!==c.context):c.context&&lj(o,c.context,!1),dh(o,c.containerInfo)}function o1(o,c,p,y,k){return to(),sh(k),c.flags|=256,cn(o,c,p,y),c.child}var Dh={dehydrated:null,treeContext:null,retryLane:0};function Ah(o){return{baseLanes:o,cachePool:null,transitions:null}}function l1(o,c,p){var y=c.pendingProps,k=gr.current,A=!1,I=(c.flags&128)!==0,Y;if((Y=I)||(Y=o!==null&&o.memoizedState===null?!1:(k&2)!==0),Y?(A=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),sr(gr,k&1),o===null)return nh(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(I=y.children,o=y.fallback,A?(y=c.mode,A=c.child,I={mode:"hidden",children:I},(y&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=I):A=nd(I,y,0,null),o=ii(o,y,p,null),A.return=c,o.return=c,A.sibling=o,c.child=A,c.child.memoizedState=Ah(p),c.memoizedState=Dh,o):Th(c,I));if(k=o.memoizedState,k!==null&&(Y=k.dehydrated,Y!==null))return Z3(o,c,I,y,Y,k,p);if(A){A=y.fallback,I=c.mode,k=o.child,Y=k.sibling;var J={mode:"hidden",children:y.children};return(I&1)===0&&c.child!==k?(y=c.child,y.childLanes=0,y.pendingProps=J,c.deletions=null):(y=Sa(k,J),y.subtreeFlags=k.subtreeFlags&14680064),Y!==null?A=Sa(Y,A):(A=ii(A,I,p,null),A.flags|=2),A.return=c,y.return=c,y.sibling=A,c.child=y,y=A,A=c.child,I=o.child.memoizedState,I=I===null?Ah(p):{baseLanes:I.baseLanes|p,cachePool:null,transitions:I.transitions},A.memoizedState=I,A.childLanes=o.childLanes&~p,c.memoizedState=Dh,y}return A=o.child,o=A.sibling,y=Sa(A,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=y,c.memoizedState=null,y}function Th(o,c){return c=nd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Uu(o,c,p,y){return y!==null&&sh(y),ro(c,o.child,null,p),o=Th(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Z3(o,c,p,y,k,A,I){if(p)return c.flags&256?(c.flags&=-257,y=kh(Error(r(422))),Uu(o,c,I,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(A=y.fallback,k=c.mode,y=nd({mode:"visible",children:y.children},k,0,null),A=ii(A,k,I,null),A.flags|=2,y.return=c,A.return=c,y.sibling=A,c.child=y,(c.mode&1)!==0&&ro(c,o.child,null,I),c.child.memoizedState=Ah(I),c.memoizedState=Dh,A);if((c.mode&1)===0)return Uu(o,c,I,null);if(k.data==="$!"){if(y=k.nextSibling&&k.nextSibling.dataset,y)var Y=y.dgst;return y=Y,A=Error(r(419)),y=kh(A,y,void 0),Uu(o,c,I,y)}if(Y=(I&o.childLanes)!==0,vn||Y){if(y=Or,y!==null){switch(I&-I){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(y.suspendedLanes|I))!==0?0:k,k!==0&&k!==A.retryLane&&(A.retryLane=k,Ys(o,k),bs(y,o,k,-1))}return Vh(),y=kh(Error(r(421))),Uu(o,c,I,y)}return k.data==="$?"?(c.flags|=128,c.child=o.child,c=f5.bind(null,o),k._reactRetry=c,null):(o=A.treeContext,$n=ma(k.nextSibling),On=c,fr=!0,ps=null,o!==null&&(Jn[Zn++]=Hs,Jn[Zn++]=Vs,Jn[Zn++]=Xa,Hs=o.id,Vs=o.overflow,Xa=c),c=Th(c,y.children),c.flags|=4096,c)}function c1(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),lh(o.return,c,p)}function Ph(o,c,p,y,k){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:k}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=p,A.tailMode=k)}function u1(o,c,p){var y=c.pendingProps,k=y.revealOrder,A=y.tail;if(cn(o,c,y.children,p),y=gr.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&c1(o,p,c);else if(o.tag===19)c1(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(sr(gr,y),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(p=c.child,k=null;p!==null;)o=p.alternate,o!==null&&$u(o)===null&&(k=p),p=p.sibling;p=k,p===null?(k=c.child,c.child=null):(k=p.sibling,p.sibling=null),Ph(c,!1,k,p,A);break;case"backwards":for(p=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&$u(o)===null){c.child=k;break}o=k.sibling,k.sibling=p,p=k,k=o}Ph(c,!0,p,null,A);break;case"together":Ph(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Wu(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Qs(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),ri|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,p=Sa(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Sa(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function e5(o,c,p){switch(c.tag){case 3:i1(c),to();break;case 5:Sj(c);break;case 1:bn(c.type)&&_u(c);break;case 4:dh(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,k=c.memoizedProps.value;sr(Ru,y._currentValue),y._currentValue=k;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(sr(gr,gr.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?l1(o,c,p):(sr(gr,gr.current&1),o=Qs(o,c,p),o!==null?o.sibling:null);sr(gr,gr.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(o.flags&128)!==0){if(y)return u1(o,c,p);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),sr(gr,gr.current),y)break;return null;case 22:case 23:return c.lanes=0,n1(o,c,p)}return Qs(o,c,p)}var d1,Rh,f1,m1;d1=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Rh=function(){},f1=function(o,c,p,y){var k=o.memoizedProps;if(k!==y){o=c.stateNode,ei(_s.current);var A=null;switch(p){case"input":k=He(o,k),y=He(o,y),A=[];break;case"select":k=R({},k,{value:void 0}),y=R({},y,{value:void 0}),A=[];break;case"textarea":k=he(o,k),y=he(o,y),A=[];break;default:typeof k.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=Su)}qe(p,y);var I;p=null;for(ge in k)if(!y.hasOwnProperty(ge)&&k.hasOwnProperty(ge)&&k[ge]!=null)if(ge==="style"){var Y=k[ge];for(I in Y)Y.hasOwnProperty(I)&&(p||(p={}),p[I]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(a.hasOwnProperty(ge)?A||(A=[]):(A=A||[]).push(ge,null));for(ge in y){var J=y[ge];if(Y=k!=null?k[ge]:void 0,y.hasOwnProperty(ge)&&J!==Y&&(J!=null||Y!=null))if(ge==="style")if(Y){for(I in Y)!Y.hasOwnProperty(I)||J&&J.hasOwnProperty(I)||(p||(p={}),p[I]="");for(I in J)J.hasOwnProperty(I)&&Y[I]!==J[I]&&(p||(p={}),p[I]=J[I])}else p||(A||(A=[]),A.push(ge,p)),p=J;else ge==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,Y=Y?Y.__html:void 0,J!=null&&Y!==J&&(A=A||[]).push(ge,J)):ge==="children"?typeof J!="string"&&typeof J!="number"||(A=A||[]).push(ge,""+J):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(a.hasOwnProperty(ge)?(J!=null&&ge==="onScroll"&&cr("scroll",o),A||Y===J||(A=[])):(A=A||[]).push(ge,J))}p&&(A=A||[]).push("style",p);var ge=A;(c.updateQueue=ge)&&(c.flags|=4)}},m1=function(o,c,p,y){p!==y&&(c.flags|=4)};function kl(o,c){if(!fr)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Zr(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var k=o.child;k!==null;)p|=k.lanes|k.childLanes,y|=k.subtreeFlags&14680064,y|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)p|=k.lanes|k.childLanes,y|=k.subtreeFlags,y|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function t5(o,c,p){var y=c.pendingProps;switch(th(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(c),null;case 1:return bn(c.type)&&Cu(),Zr(c),null;case 3:return y=c.stateNode,ao(),ur(yn),ur(Xr),hh(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Tu(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ps!==null&&(Uh(ps),ps=null))),Rh(o,c),Zr(c),null;case 5:fh(c);var k=ei(vl.current);if(p=c.type,o!==null&&c.stateNode!=null)f1(o,c,p,y,k),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Zr(c),null}if(o=ei(_s.current),Tu(c)){y=c.stateNode,p=c.type;var A=c.memoizedProps;switch(y[Cs]=c,y[pl]=A,o=(c.mode&1)!==0,p){case"dialog":cr("cancel",y),cr("close",y);break;case"iframe":case"object":case"embed":cr("load",y);break;case"video":case"audio":for(k=0;k<fl.length;k++)cr(fl[k],y);break;case"source":cr("error",y);break;case"img":case"image":case"link":cr("error",y),cr("load",y);break;case"details":cr("toggle",y);break;case"input":Je(y,A),cr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!A.multiple},cr("invalid",y);break;case"textarea":ne(y,A),cr("invalid",y)}qe(p,A),k=null;for(var I in A)if(A.hasOwnProperty(I)){var Y=A[I];I==="children"?typeof Y=="string"?y.textContent!==Y&&(A.suppressHydrationWarning!==!0&&Nu(y.textContent,Y,o),k=["children",Y]):typeof Y=="number"&&y.textContent!==""+Y&&(A.suppressHydrationWarning!==!0&&Nu(y.textContent,Y,o),k=["children",""+Y]):a.hasOwnProperty(I)&&Y!=null&&I==="onScroll"&&cr("scroll",y)}switch(p){case"input":be(y),Ae(y,A,!0);break;case"textarea":be(y),Be(y);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(y.onclick=Su)}y=k,c.updateQueue=y,y!==null&&(c.flags|=4)}else{I=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=oe(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=I.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=I.createElement(p,{is:y.is}):(o=I.createElement(p),p==="select"&&(I=o,y.multiple?I.multiple=!0:y.size&&(I.size=y.size))):o=I.createElementNS(o,p),o[Cs]=c,o[pl]=y,d1(o,c,!1,!1),c.stateNode=o;e:{switch(I=dt(p,y),p){case"dialog":cr("cancel",o),cr("close",o),k=y;break;case"iframe":case"object":case"embed":cr("load",o),k=y;break;case"video":case"audio":for(k=0;k<fl.length;k++)cr(fl[k],o);k=y;break;case"source":cr("error",o),k=y;break;case"img":case"image":case"link":cr("error",o),cr("load",o),k=y;break;case"details":cr("toggle",o),k=y;break;case"input":Je(o,y),k=He(o,y),cr("invalid",o);break;case"option":k=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},k=R({},y,{value:void 0}),cr("invalid",o);break;case"textarea":ne(o,y),k=he(o,y),cr("invalid",o);break;default:k=y}qe(p,k),Y=k;for(A in Y)if(Y.hasOwnProperty(A)){var J=Y[A];A==="style"?tt(o,J):A==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&K(o,J)):A==="children"?typeof J=="string"?(p!=="textarea"||J!=="")&&se(o,J):typeof J=="number"&&se(o,""+J):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(a.hasOwnProperty(A)?J!=null&&A==="onScroll"&&cr("scroll",o):J!=null&&E(o,A,J,I))}switch(p){case"input":be(o),Ae(o,y,!1);break;case"textarea":be(o),Be(o);break;case"option":y.value!=null&&o.setAttribute("value",""+X(y.value));break;case"select":o.multiple=!!y.multiple,A=y.value,A!=null?ye(o,!!y.multiple,A,!1):y.defaultValue!=null&&ye(o,!!y.multiple,y.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=Su)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Zr(c),null;case 6:if(o&&c.stateNode!=null)m1(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(p=ei(vl.current),ei(_s.current),Tu(c)){if(y=c.stateNode,p=c.memoizedProps,y[Cs]=c,(A=y.nodeValue!==p)&&(o=On,o!==null))switch(o.tag){case 3:Nu(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Nu(y.nodeValue,p,(o.mode&1)!==0)}A&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Cs]=c,c.stateNode=y}return Zr(c),null;case 13:if(ur(gr),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(fr&&$n!==null&&(c.mode&1)!==0&&(c.flags&128)===0)gj(),to(),c.flags|=98560,A=!1;else if(A=Tu(c),y!==null&&y.dehydrated!==null){if(o===null){if(!A)throw Error(r(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Cs]=c}else to(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Zr(c),A=!1}else ps!==null&&(Uh(ps),ps=null),A=!0;if(!A)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(gr.current&1)!==0?Tr===0&&(Tr=3):Vh())),c.updateQueue!==null&&(c.flags|=4),Zr(c),null);case 4:return ao(),Rh(o,c),o===null&&ml(c.stateNode.containerInfo),Zr(c),null;case 10:return oh(c.type._context),Zr(c),null;case 17:return bn(c.type)&&Cu(),Zr(c),null;case 19:if(ur(gr),A=c.memoizedState,A===null)return Zr(c),null;if(y=(c.flags&128)!==0,I=A.rendering,I===null)if(y)kl(A,!1);else{if(Tr!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(I=$u(o),I!==null){for(c.flags|=128,kl(A,!1),y=I.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)A=p,o=y,A.flags&=14680066,I=A.alternate,I===null?(A.childLanes=0,A.lanes=o,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=I.childLanes,A.lanes=I.lanes,A.child=I.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=I.memoizedProps,A.memoizedState=I.memoizedState,A.updateQueue=I.updateQueue,A.type=I.type,o=I.dependencies,A.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return sr(gr,gr.current&1|2),c.child}o=o.sibling}A.tail!==null&&hr()>co&&(c.flags|=128,y=!0,kl(A,!1),c.lanes=4194304)}else{if(!y)if(o=$u(I),o!==null){if(c.flags|=128,y=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),kl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!I.alternate&&!fr)return Zr(c),null}else 2*hr()-A.renderingStartTime>co&&p!==1073741824&&(c.flags|=128,y=!0,kl(A,!1),c.lanes=4194304);A.isBackwards?(I.sibling=c.child,c.child=I):(p=A.last,p!==null?p.sibling=I:c.child=I,A.last=I)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=hr(),c.sibling=null,p=gr.current,sr(gr,y?p&1|2:p&1),c):(Zr(c),null);case 22:case 23:return Hh(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Ln&1073741824)!==0&&(Zr(c),c.subtreeFlags&6&&(c.flags|=8192)):Zr(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function r5(o,c){switch(th(c),c.tag){case 1:return bn(c.type)&&Cu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return ao(),ur(yn),ur(Xr),hh(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return fh(c),null;case 13:if(ur(gr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));to()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ur(gr),null;case 4:return ao(),null;case 10:return oh(c.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var Hu=!1,en=!1,n5=typeof WeakSet=="function"?WeakSet:Set,nt=null;function oo(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){wr(o,c,y)}else p.current=null}function Ih(o,c,p){try{p()}catch(y){wr(o,c,y)}}var h1=!1;function s5(o,c){if(Hm=qi,o=Hw(),Lm(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var k=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var I=0,Y=-1,J=-1,ge=0,Me=0,Oe=o,Re=null;t:for(;;){for(var Ze;Oe!==p||k!==0&&Oe.nodeType!==3||(Y=I+k),Oe!==A||y!==0&&Oe.nodeType!==3||(J=I+y),Oe.nodeType===3&&(I+=Oe.nodeValue.length),(Ze=Oe.firstChild)!==null;)Re=Oe,Oe=Ze;for(;;){if(Oe===o)break t;if(Re===p&&++ge===k&&(Y=I),Re===A&&++Me===y&&(J=I),(Ze=Oe.nextSibling)!==null)break;Oe=Re,Re=Oe.parentNode}Oe=Ze}p=Y===-1||J===-1?null:{start:Y,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(Vm={focusedElem:o,selectionRange:p},qi=!1,nt=c;nt!==null;)if(c=nt,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,nt=o;else for(;nt!==null;){c=nt;try{var at=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ot=at.memoizedProps,kr=at.memoizedState,ue=c.stateNode,te=ue.getSnapshotBeforeUpdate(c.elementType===c.type?ot:gs(c.type,ot),kr);ue.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var de=c.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Fe){wr(c,c.return,Fe)}if(o=c.sibling,o!==null){o.return=c.return,nt=o;break}nt=c.return}return at=h1,h1=!1,at}function Cl(o,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var k=y=y.next;do{if((k.tag&o)===o){var A=k.destroy;k.destroy=void 0,A!==void 0&&Ih(c,p,A)}k=k.next}while(k!==y)}}function Vu(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function Mh(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function p1(o){var c=o.alternate;c!==null&&(o.alternate=null,p1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Cs],delete c[pl],delete c[Xm],delete c[B3],delete c[z3])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function g1(o){return o.tag===5||o.tag===3||o.tag===4}function x1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||g1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Oh(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Su));else if(y!==4&&(o=o.child,o!==null))for(Oh(o,c,p),o=o.sibling;o!==null;)Oh(o,c,p),o=o.sibling}function $h(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for($h(o,c,p),o=o.sibling;o!==null;)$h(o,c,p),o=o.sibling}var qr=null,xs=!1;function ba(o,c,p){for(p=p.child;p!==null;)y1(o,c,p),p=p.sibling}function y1(o,c,p){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Va,p)}catch{}switch(p.tag){case 5:en||oo(p,c);case 6:var y=qr,k=xs;qr=null,ba(o,c,p),qr=y,xs=k,qr!==null&&(xs?(o=qr,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):qr.removeChild(p.stateNode));break;case 18:qr!==null&&(xs?(o=qr,p=p.stateNode,o.nodeType===8?Qm(o.parentNode,p):o.nodeType===1&&Qm(o,p),Xn(o)):Qm(qr,p.stateNode));break;case 4:y=qr,k=xs,qr=p.stateNode.containerInfo,xs=!0,ba(o,c,p),qr=y,xs=k;break;case 0:case 11:case 14:case 15:if(!en&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){k=y=y.next;do{var A=k,I=A.destroy;A=A.tag,I!==void 0&&((A&2)!==0||(A&4)!==0)&&Ih(p,c,I),k=k.next}while(k!==y)}ba(o,c,p);break;case 1:if(!en&&(oo(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(Y){wr(p,c,Y)}ba(o,c,p);break;case 21:ba(o,c,p);break;case 22:p.mode&1?(en=(y=en)||p.memoizedState!==null,ba(o,c,p),en=y):ba(o,c,p);break;default:ba(o,c,p)}}function b1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new n5),c.forEach(function(y){var k=m5.bind(null,o,y);p.has(y)||(p.add(y),y.then(k,k))})}}function ys(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var k=p[y];try{var A=o,I=c,Y=I;e:for(;Y!==null;){switch(Y.tag){case 5:qr=Y.stateNode,xs=!1;break e;case 3:qr=Y.stateNode.containerInfo,xs=!0;break e;case 4:qr=Y.stateNode.containerInfo,xs=!0;break e}Y=Y.return}if(qr===null)throw Error(r(160));y1(A,I,k),qr=null,xs=!1;var J=k.alternate;J!==null&&(J.return=null),k.return=null}catch(ge){wr(k,c,ge)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)v1(c,o),c=c.sibling}function v1(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ys(c,o),Ds(o),y&4){try{Cl(3,o,o.return),Vu(3,o)}catch(ot){wr(o,o.return,ot)}try{Cl(5,o,o.return)}catch(ot){wr(o,o.return,ot)}}break;case 1:ys(c,o),Ds(o),y&512&&p!==null&&oo(p,p.return);break;case 5:if(ys(c,o),Ds(o),y&512&&p!==null&&oo(p,p.return),o.flags&32){var k=o.stateNode;try{se(k,"")}catch(ot){wr(o,o.return,ot)}}if(y&4&&(k=o.stateNode,k!=null)){var A=o.memoizedProps,I=p!==null?p.memoizedProps:A,Y=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{Y==="input"&&A.type==="radio"&&A.name!=null&&le(k,A),dt(Y,I);var ge=dt(Y,A);for(I=0;I<J.length;I+=2){var Me=J[I],Oe=J[I+1];Me==="style"?tt(k,Oe):Me==="dangerouslySetInnerHTML"?K(k,Oe):Me==="children"?se(k,Oe):E(k,Me,Oe,ge)}switch(Y){case"input":fe(k,A);break;case"textarea":Te(k,A);break;case"select":var Re=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!A.multiple;var Ze=A.value;Ze!=null?ye(k,!!A.multiple,Ze,!1):Re!==!!A.multiple&&(A.defaultValue!=null?ye(k,!!A.multiple,A.defaultValue,!0):ye(k,!!A.multiple,A.multiple?[]:"",!1))}k[pl]=A}catch(ot){wr(o,o.return,ot)}}break;case 6:if(ys(c,o),Ds(o),y&4){if(o.stateNode===null)throw Error(r(162));k=o.stateNode,A=o.memoizedProps;try{k.nodeValue=A}catch(ot){wr(o,o.return,ot)}}break;case 3:if(ys(c,o),Ds(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Xn(c.containerInfo)}catch(ot){wr(o,o.return,ot)}break;case 4:ys(c,o),Ds(o);break;case 13:ys(c,o),Ds(o),k=o.child,k.flags&8192&&(A=k.memoizedState!==null,k.stateNode.isHidden=A,!A||k.alternate!==null&&k.alternate.memoizedState!==null||(Bh=hr())),y&4&&b1(o);break;case 22:if(Me=p!==null&&p.memoizedState!==null,o.mode&1?(en=(ge=en)||Me,ys(c,o),en=ge):ys(c,o),Ds(o),y&8192){if(ge=o.memoizedState!==null,(o.stateNode.isHidden=ge)&&!Me&&(o.mode&1)!==0)for(nt=o,Me=o.child;Me!==null;){for(Oe=nt=Me;nt!==null;){switch(Re=nt,Ze=Re.child,Re.tag){case 0:case 11:case 14:case 15:Cl(4,Re,Re.return);break;case 1:oo(Re,Re.return);var at=Re.stateNode;if(typeof at.componentWillUnmount=="function"){y=Re,p=Re.return;try{c=y,at.props=c.memoizedProps,at.state=c.memoizedState,at.componentWillUnmount()}catch(ot){wr(y,p,ot)}}break;case 5:oo(Re,Re.return);break;case 22:if(Re.memoizedState!==null){N1(Oe);continue}}Ze!==null?(Ze.return=Re,nt=Ze):N1(Oe)}Me=Me.sibling}e:for(Me=null,Oe=o;;){if(Oe.tag===5){if(Me===null){Me=Oe;try{k=Oe.stateNode,ge?(A=k.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Y=Oe.stateNode,J=Oe.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null,Y.style.display=Ve("display",I))}catch(ot){wr(o,o.return,ot)}}}else if(Oe.tag===6){if(Me===null)try{Oe.stateNode.nodeValue=ge?"":Oe.memoizedProps}catch(ot){wr(o,o.return,ot)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===o)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===o)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===o)break e;Me===Oe&&(Me=null),Oe=Oe.return}Me===Oe&&(Me=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:ys(c,o),Ds(o),y&4&&b1(o);break;case 21:break;default:ys(c,o),Ds(o)}}function Ds(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(g1(p)){var y=p;break e}p=p.return}throw Error(r(160))}switch(y.tag){case 5:var k=y.stateNode;y.flags&32&&(se(k,""),y.flags&=-33);var A=x1(o);$h(o,A,k);break;case 3:case 4:var I=y.stateNode.containerInfo,Y=x1(o);Oh(o,Y,I);break;default:throw Error(r(161))}}catch(J){wr(o,o.return,J)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function a5(o,c,p){nt=o,w1(o)}function w1(o,c,p){for(var y=(o.mode&1)!==0;nt!==null;){var k=nt,A=k.child;if(k.tag===22&&y){var I=k.memoizedState!==null||Hu;if(!I){var Y=k.alternate,J=Y!==null&&Y.memoizedState!==null||en;Y=Hu;var ge=en;if(Hu=I,(en=J)&&!ge)for(nt=k;nt!==null;)I=nt,J=I.child,I.tag===22&&I.memoizedState!==null?S1(k):J!==null?(J.return=I,nt=J):S1(k);for(;A!==null;)nt=A,w1(A),A=A.sibling;nt=k,Hu=Y,en=ge}j1(o)}else(k.subtreeFlags&8772)!==0&&A!==null?(A.return=k,nt=A):j1(o)}}function j1(o){for(;nt!==null;){var c=nt;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:en||Vu(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!en)if(p===null)y.componentDidMount();else{var k=c.elementType===c.type?p.memoizedProps:gs(c.type,p.memoizedProps);y.componentDidUpdate(k,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&Nj(c,A,y);break;case 3:var I=c.updateQueue;if(I!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}Nj(c,I,p)}break;case 5:var Y=c.stateNode;if(p===null&&c.flags&4){p=Y;var J=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&p.focus();break;case"img":J.src&&(p.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ge=c.alternate;if(ge!==null){var Me=ge.memoizedState;if(Me!==null){var Oe=Me.dehydrated;Oe!==null&&Xn(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}en||c.flags&512&&Mh(c)}catch(Re){wr(c,c.return,Re)}}if(c===o){nt=null;break}if(p=c.sibling,p!==null){p.return=c.return,nt=p;break}nt=c.return}}function N1(o){for(;nt!==null;){var c=nt;if(c===o){nt=null;break}var p=c.sibling;if(p!==null){p.return=c.return,nt=p;break}nt=c.return}}function S1(o){for(;nt!==null;){var c=nt;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Vu(4,c)}catch(J){wr(c,p,J)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var k=c.return;try{y.componentDidMount()}catch(J){wr(c,k,J)}}var A=c.return;try{Mh(c)}catch(J){wr(c,A,J)}break;case 5:var I=c.return;try{Mh(c)}catch(J){wr(c,I,J)}}}catch(J){wr(c,c.return,J)}if(c===o){nt=null;break}var Y=c.sibling;if(Y!==null){Y.return=c.return,nt=Y;break}nt=c.return}}var i5=Math.ceil,Yu=S.ReactCurrentDispatcher,Lh=S.ReactCurrentOwner,rs=S.ReactCurrentBatchConfig,$t=0,Or=null,Cr=null,Ur=0,Ln=0,lo=ha(0),Tr=0,_l=null,ri=0,Ku=0,Fh=0,El=null,wn=null,Bh=0,co=1/0,Xs=null,Qu=!1,zh=null,va=null,Xu=!1,wa=null,Ju=0,Dl=0,Gh=null,Zu=-1,ed=0;function un(){return($t&6)!==0?hr():Zu!==-1?Zu:Zu=hr()}function ja(o){return(o.mode&1)===0?1:($t&2)!==0&&Ur!==0?Ur&-Ur:q3.transition!==null?(ed===0&&(ed=et()),ed):(o=vt,o!==0||(o=window.event,o=o===void 0?16:Cw(o.type)),o)}function bs(o,c,p,y){if(50<Dl)throw Dl=0,Gh=null,Error(r(185));St(o,p,y),(($t&2)===0||o!==Or)&&(o===Or&&(($t&2)===0&&(Ku|=p),Tr===4&&Na(o,Ur)),jn(o,y),p===1&&$t===0&&(c.mode&1)===0&&(co=hr()+500,Eu&&ga()))}function jn(o,c){var p=o.callbackNode;Nt(o,c);var y=bt(o,o===Or?Ur:0);if(y===0)p!==null&&lu(p),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(p!=null&&lu(p),c===1)o.tag===0?G3(C1.bind(null,o)):dj(C1.bind(null,o)),L3(function(){($t&6)===0&&ga()}),p=null;else{switch(ca(y)){case 1:p=rl;break;case 4:p=uu;break;case 16:p=zi;break;case 536870912:p=du;break;default:p=zi}p=I1(p,k1.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function k1(o,c){if(Zu=-1,ed=0,($t&6)!==0)throw Error(r(327));var p=o.callbackNode;if(uo()&&o.callbackNode!==p)return null;var y=bt(o,o===Or?Ur:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=td(o,y);else{c=y;var k=$t;$t|=2;var A=E1();(Or!==o||Ur!==c)&&(Xs=null,co=hr()+500,si(o,c));do try{c5();break}catch(Y){_1(o,Y)}while(!0);ih(),Yu.current=A,$t=k,Cr!==null?c=0:(Or=null,Ur=0,c=Tr)}if(c!==0){if(c===2&&(k=pt(o),k!==0&&(y=k,c=qh(o,k))),c===1)throw p=_l,si(o,0),Na(o,y),jn(o,hr()),p;if(c===6)Na(o,y);else{if(k=o.current.alternate,(y&30)===0&&!o5(k)&&(c=td(o,y),c===2&&(A=pt(o),A!==0&&(y=A,c=qh(o,A))),c===1))throw p=_l,si(o,0),Na(o,y),jn(o,hr()),p;switch(o.finishedWork=k,o.finishedLanes=y,c){case 0:case 1:throw Error(r(345));case 2:ai(o,wn,Xs);break;case 3:if(Na(o,y),(y&130023424)===y&&(c=Bh+500-hr(),10<c)){if(bt(o,0)!==0)break;if(k=o.suspendedLanes,(k&y)!==y){un(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=Km(ai.bind(null,o,wn,Xs),c);break}ai(o,wn,Xs);break;case 4:if(Na(o,y),(y&4194240)===y)break;for(c=o.eventTimes,k=-1;0<y;){var I=31-je(y);A=1<<I,I=c[I],I>k&&(k=I),y&=~A}if(y=k,y=hr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*i5(y/1960))-y,10<y){o.timeoutHandle=Km(ai.bind(null,o,wn,Xs),y);break}ai(o,wn,Xs);break;case 5:ai(o,wn,Xs);break;default:throw Error(r(329))}}}return jn(o,hr()),o.callbackNode===p?k1.bind(null,o):null}function qh(o,c){var p=El;return o.current.memoizedState.isDehydrated&&(si(o,c).flags|=256),o=td(o,c),o!==2&&(c=wn,wn=p,c!==null&&Uh(c)),o}function Uh(o){wn===null?wn=o:wn.push.apply(wn,o)}function o5(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var k=p[y],A=k.getSnapshot;k=k.value;try{if(!hs(A(),k))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Na(o,c){for(c&=~Fh,c&=~Ku,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-je(c),y=1<<p;o[p]=-1,c&=~y}}function C1(o){if(($t&6)!==0)throw Error(r(327));uo();var c=bt(o,0);if((c&1)===0)return jn(o,hr()),null;var p=td(o,c);if(o.tag!==0&&p===2){var y=pt(o);y!==0&&(c=y,p=qh(o,y))}if(p===1)throw p=_l,si(o,0),Na(o,c),jn(o,hr()),p;if(p===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ai(o,wn,Xs),jn(o,hr()),null}function Wh(o,c){var p=$t;$t|=1;try{return o(c)}finally{$t=p,$t===0&&(co=hr()+500,Eu&&ga())}}function ni(o){wa!==null&&wa.tag===0&&($t&6)===0&&uo();var c=$t;$t|=1;var p=rs.transition,y=vt;try{if(rs.transition=null,vt=1,o)return o()}finally{vt=y,rs.transition=p,$t=c,($t&6)===0&&ga()}}function Hh(){Ln=lo.current,ur(lo)}function si(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,$3(p)),Cr!==null)for(p=Cr.return;p!==null;){var y=p;switch(th(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Cu();break;case 3:ao(),ur(yn),ur(Xr),hh();break;case 5:fh(y);break;case 4:ao();break;case 13:ur(gr);break;case 19:ur(gr);break;case 10:oh(y.type._context);break;case 22:case 23:Hh()}p=p.return}if(Or=o,Cr=o=Sa(o.current,null),Ur=Ln=c,Tr=0,_l=null,Fh=Ku=ri=0,wn=El=null,Za!==null){for(c=0;c<Za.length;c++)if(p=Za[c],y=p.interleaved,y!==null){p.interleaved=null;var k=y.next,A=p.pending;if(A!==null){var I=A.next;A.next=k,y.next=I}p.pending=y}Za=null}return o}function _1(o,c){do{var p=Cr;try{if(ih(),Lu.current=Gu,Fu){for(var y=xr.memoizedState;y!==null;){var k=y.queue;k!==null&&(k.pending=null),y=y.next}Fu=!1}if(ti=0,Mr=Ar=xr=null,wl=!1,jl=0,Lh.current=null,p===null||p.return===null){Tr=1,_l=c,Cr=null;break}e:{var A=o,I=p.return,Y=p,J=c;if(c=Ur,Y.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ge=J,Me=Y,Oe=Me.tag;if((Me.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var Re=Me.alternate;Re?(Me.updateQueue=Re.updateQueue,Me.memoizedState=Re.memoizedState,Me.lanes=Re.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Ze=Jj(I);if(Ze!==null){Ze.flags&=-257,Zj(Ze,I,Y,A,c),Ze.mode&1&&Xj(A,ge,c),c=Ze,J=ge;var at=c.updateQueue;if(at===null){var ot=new Set;ot.add(J),c.updateQueue=ot}else at.add(J);break e}else{if((c&1)===0){Xj(A,ge,c),Vh();break e}J=Error(r(426))}}else if(fr&&Y.mode&1){var kr=Jj(I);if(kr!==null){(kr.flags&65536)===0&&(kr.flags|=256),Zj(kr,I,Y,A,c),sh(io(J,Y));break e}}A=J=io(J,Y),Tr!==4&&(Tr=2),El===null?El=[A]:El.push(A),A=I;do{switch(A.tag){case 3:A.flags|=65536,c&=-c,A.lanes|=c;var ue=Kj(A,J,c);jj(A,ue);break e;case 1:Y=J;var te=A.type,de=A.stateNode;if((A.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(va===null||!va.has(de)))){A.flags|=65536,c&=-c,A.lanes|=c;var Fe=Qj(A,Y,c);jj(A,Fe);break e}}A=A.return}while(A!==null)}A1(p)}catch(ct){c=ct,Cr===p&&p!==null&&(Cr=p=p.return);continue}break}while(!0)}function E1(){var o=Yu.current;return Yu.current=Gu,o===null?Gu:o}function Vh(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Or===null||(ri&268435455)===0&&(Ku&268435455)===0||Na(Or,Ur)}function td(o,c){var p=$t;$t|=2;var y=E1();(Or!==o||Ur!==c)&&(Xs=null,si(o,c));do try{l5();break}catch(k){_1(o,k)}while(!0);if(ih(),$t=p,Yu.current=y,Cr!==null)throw Error(r(261));return Or=null,Ur=0,Tr}function l5(){for(;Cr!==null;)D1(Cr)}function c5(){for(;Cr!==null&&!Sm();)D1(Cr)}function D1(o){var c=R1(o.alternate,o,Ln);o.memoizedProps=o.pendingProps,c===null?A1(o):Cr=c,Lh.current=null}function A1(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=t5(p,c,Ln),p!==null){Cr=p;return}}else{if(p=r5(p,c),p!==null){p.flags&=32767,Cr=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Tr=6,Cr=null;return}}if(c=c.sibling,c!==null){Cr=c;return}Cr=c=o}while(c!==null);Tr===0&&(Tr=5)}function ai(o,c,p){var y=vt,k=rs.transition;try{rs.transition=null,vt=1,u5(o,c,p,y)}finally{rs.transition=k,vt=y}return null}function u5(o,c,p,y){do uo();while(wa!==null);if(($t&6)!==0)throw Error(r(327));p=o.finishedWork;var k=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var A=p.lanes|p.childLanes;if(Tt(o,A),o===Or&&(Cr=Or=null,Ur=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Xu||(Xu=!0,I1(zi,function(){return uo(),null})),A=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||A){A=rs.transition,rs.transition=null;var I=vt;vt=1;var Y=$t;$t|=4,Lh.current=null,s5(o,p),v1(p,o),A3(Vm),qi=!!Hm,Vm=Hm=null,o.current=p,a5(p),km(),$t=Y,vt=I,rs.transition=A}else o.current=p;if(Xu&&(Xu=!1,wa=o,Ju=k),A=o.pendingLanes,A===0&&(va=null),fu(p.stateNode),jn(o,hr()),c!==null)for(y=o.onRecoverableError,p=0;p<c.length;p++)k=c[p],y(k.value,{componentStack:k.stack,digest:k.digest});if(Qu)throw Qu=!1,o=zh,zh=null,o;return(Ju&1)!==0&&o.tag!==0&&uo(),A=o.pendingLanes,(A&1)!==0?o===Gh?Dl++:(Dl=0,Gh=o):Dl=0,ga(),null}function uo(){if(wa!==null){var o=ca(Ju),c=rs.transition,p=vt;try{if(rs.transition=null,vt=16>o?16:o,wa===null)var y=!1;else{if(o=wa,wa=null,Ju=0,($t&6)!==0)throw Error(r(331));var k=$t;for($t|=4,nt=o.current;nt!==null;){var A=nt,I=A.child;if((nt.flags&16)!==0){var Y=A.deletions;if(Y!==null){for(var J=0;J<Y.length;J++){var ge=Y[J];for(nt=ge;nt!==null;){var Me=nt;switch(Me.tag){case 0:case 11:case 15:Cl(8,Me,A)}var Oe=Me.child;if(Oe!==null)Oe.return=Me,nt=Oe;else for(;nt!==null;){Me=nt;var Re=Me.sibling,Ze=Me.return;if(p1(Me),Me===ge){nt=null;break}if(Re!==null){Re.return=Ze,nt=Re;break}nt=Ze}}}var at=A.alternate;if(at!==null){var ot=at.child;if(ot!==null){at.child=null;do{var kr=ot.sibling;ot.sibling=null,ot=kr}while(ot!==null)}}nt=A}}if((A.subtreeFlags&2064)!==0&&I!==null)I.return=A,nt=I;else e:for(;nt!==null;){if(A=nt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Cl(9,A,A.return)}var ue=A.sibling;if(ue!==null){ue.return=A.return,nt=ue;break e}nt=A.return}}var te=o.current;for(nt=te;nt!==null;){I=nt;var de=I.child;if((I.subtreeFlags&2064)!==0&&de!==null)de.return=I,nt=de;else e:for(I=te;nt!==null;){if(Y=nt,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Vu(9,Y)}}catch(ct){wr(Y,Y.return,ct)}if(Y===I){nt=null;break e}var Fe=Y.sibling;if(Fe!==null){Fe.return=Y.return,nt=Fe;break e}nt=Y.return}}if($t=k,ga(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Va,o)}catch{}y=!0}return y}finally{vt=p,rs.transition=c}}return!1}function T1(o,c,p){c=io(p,c),c=Kj(o,c,1),o=ya(o,c,1),c=un(),o!==null&&(St(o,1,c),jn(o,c))}function wr(o,c,p){if(o.tag===3)T1(o,o,p);else for(;c!==null;){if(c.tag===3){T1(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(va===null||!va.has(y))){o=io(p,o),o=Qj(c,o,1),c=ya(c,o,1),o=un(),c!==null&&(St(c,1,o),jn(c,o));break}}c=c.return}}function d5(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),c=un(),o.pingedLanes|=o.suspendedLanes&p,Or===o&&(Ur&p)===p&&(Tr===4||Tr===3&&(Ur&130023424)===Ur&&500>hr()-Bh?si(o,0):Fh|=p),jn(o,c)}function P1(o,c){c===0&&((o.mode&1)===0?c=1:(c=ft,ft<<=1,(ft&130023424)===0&&(ft=4194304)));var p=un();o=Ys(o,c),o!==null&&(St(o,c,p),jn(o,p))}function f5(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),P1(o,p)}function m5(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,k=o.memoizedState;k!==null&&(p=k.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(c),P1(o,p)}var R1;R1=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||yn.current)vn=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return vn=!1,e5(o,c,p);vn=(o.flags&131072)!==0}else vn=!1,fr&&(c.flags&1048576)!==0&&fj(c,Au,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Wu(o,c),o=c.pendingProps;var k=Ji(c,Xr.current);so(c,p),k=xh(null,c,y,o,k,p);var A=yh();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,bn(y)?(A=!0,_u(c)):A=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,uh(c),k.updater=qu,c.stateNode=k,k._reactInternals=c,Sh(c,y,o,p),c=Eh(null,c,y,!0,A,p)):(c.tag=0,fr&&A&&eh(c),cn(null,c,k,p),c=c.child),c;case 16:y=c.elementType;e:{switch(Wu(o,c),o=c.pendingProps,k=y._init,y=k(y._payload),c.type=y,k=c.tag=p5(y),o=gs(y,o),k){case 0:c=_h(null,c,y,o,p);break e;case 1:c=a1(null,c,y,o,p);break e;case 11:c=e1(null,c,y,o,p);break e;case 14:c=t1(null,c,y,gs(y.type,o),p);break e}throw Error(r(306,y,""))}return c;case 0:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:gs(y,k),_h(o,c,y,k,p);case 1:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:gs(y,k),a1(o,c,y,k,p);case 3:e:{if(i1(c),o===null)throw Error(r(387));y=c.pendingProps,A=c.memoizedState,k=A.element,wj(o,c),Ou(c,y,null,p);var I=c.memoizedState;if(y=I.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){k=io(Error(r(423)),c),c=o1(o,c,y,p,k);break e}else if(y!==k){k=io(Error(r(424)),c),c=o1(o,c,y,p,k);break e}else for($n=ma(c.stateNode.containerInfo.firstChild),On=c,fr=!0,ps=null,p=bj(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(to(),y===k){c=Qs(o,c,p);break e}cn(o,c,y,p)}c=c.child}return c;case 5:return Sj(c),o===null&&nh(c),y=c.type,k=c.pendingProps,A=o!==null?o.memoizedProps:null,I=k.children,Ym(y,k)?I=null:A!==null&&Ym(y,A)&&(c.flags|=32),s1(o,c),cn(o,c,I,p),c.child;case 6:return o===null&&nh(c),null;case 13:return l1(o,c,p);case 4:return dh(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=ro(c,null,y,p):cn(o,c,y,p),c.child;case 11:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:gs(y,k),e1(o,c,y,k,p);case 7:return cn(o,c,c.pendingProps,p),c.child;case 8:return cn(o,c,c.pendingProps.children,p),c.child;case 12:return cn(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,k=c.pendingProps,A=c.memoizedProps,I=k.value,sr(Ru,y._currentValue),y._currentValue=I,A!==null)if(hs(A.value,I)){if(A.children===k.children&&!yn.current){c=Qs(o,c,p);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var Y=A.dependencies;if(Y!==null){I=A.child;for(var J=Y.firstContext;J!==null;){if(J.context===y){if(A.tag===1){J=Ks(-1,p&-p),J.tag=2;var ge=A.updateQueue;if(ge!==null){ge=ge.shared;var Me=ge.pending;Me===null?J.next=J:(J.next=Me.next,Me.next=J),ge.pending=J}}A.lanes|=p,J=A.alternate,J!==null&&(J.lanes|=p),lh(A.return,p,c),Y.lanes|=p;break}J=J.next}}else if(A.tag===10)I=A.type===c.type?null:A.child;else if(A.tag===18){if(I=A.return,I===null)throw Error(r(341));I.lanes|=p,Y=I.alternate,Y!==null&&(Y.lanes|=p),lh(I,p,c),I=A.sibling}else I=A.child;if(I!==null)I.return=A;else for(I=A;I!==null;){if(I===c){I=null;break}if(A=I.sibling,A!==null){A.return=I.return,I=A;break}I=I.return}A=I}cn(o,c,k.children,p),c=c.child}return c;case 9:return k=c.type,y=c.pendingProps.children,so(c,p),k=es(k),y=y(k),c.flags|=1,cn(o,c,y,p),c.child;case 14:return y=c.type,k=gs(y,c.pendingProps),k=gs(y.type,k),t1(o,c,y,k,p);case 15:return r1(o,c,c.type,c.pendingProps,p);case 17:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:gs(y,k),Wu(o,c),c.tag=1,bn(y)?(o=!0,_u(c)):o=!1,so(c,p),Vj(c,y,k),Sh(c,y,k,p),Eh(null,c,y,!0,o,p);case 19:return u1(o,c,p);case 22:return n1(o,c,p)}throw Error(r(156,c.tag))};function I1(o,c){return ou(o,c)}function h5(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(o,c,p,y){return new h5(o,c,p,y)}function Yh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function p5(o){if(typeof o=="function")return Yh(o)?1:0;if(o!=null){if(o=o.$$typeof,o===z)return 11;if(o===re)return 14}return 2}function Sa(o,c){var p=o.alternate;return p===null?(p=ns(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function rd(o,c,p,y,k,A){var I=2;if(y=o,typeof o=="function")Yh(o)&&(I=1);else if(typeof o=="string")I=5;else e:switch(o){case T:return ii(p.children,k,A,c);case P:I=8,k|=8;break;case O:return o=ns(12,p,c,k|2),o.elementType=O,o.lanes=A,o;case q:return o=ns(13,p,c,k),o.elementType=q,o.lanes=A,o;case H:return o=ns(19,p,c,k),o.elementType=H,o.lanes=A,o;case L:return nd(p,k,A,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:I=10;break e;case $:I=9;break e;case z:I=11;break e;case re:I=14;break e;case ee:I=16,y=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=ns(I,p,c,k),c.elementType=o,c.type=y,c.lanes=A,c}function ii(o,c,p,y){return o=ns(7,o,y,c),o.lanes=p,o}function nd(o,c,p,y){return o=ns(22,o,y,c),o.elementType=L,o.lanes=p,o.stateNode={isHidden:!1},o}function Kh(o,c,p){return o=ns(6,o,null,c),o.lanes=p,o}function Qh(o,c,p){return c=ns(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function g5(o,c,p,y,k){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=st(0),this.expirationTimes=st(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.identifierPrefix=y,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Xh(o,c,p,y,k,A,I,Y,J){return o=new g5(o,c,p,Y,J),c===1?(c=1,A===!0&&(c|=8)):c=0,A=ns(3,null,null,c),o.current=A,A.stateNode=o,A.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},uh(A),o}function x5(o,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:y==null?null:""+y,children:o,containerInfo:c,implementation:p}}function M1(o){if(!o)return pa;o=o._reactInternals;e:{if(Kn(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(bn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var p=o.type;if(bn(p))return cj(o,p,c)}return c}function O1(o,c,p,y,k,A,I,Y,J){return o=Xh(p,y,!0,o,k,A,I,Y,J),o.context=M1(null),p=o.current,y=un(),k=ja(p),A=Ks(y,k),A.callback=c??null,ya(p,A,k),o.current.lanes=k,St(o,k,y),jn(o,y),o}function sd(o,c,p,y){var k=c.current,A=un(),I=ja(k);return p=M1(p),c.context===null?c.context=p:c.pendingContext=p,c=Ks(A,I),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=ya(k,c,I),o!==null&&(bs(o,k,I,A),Mu(o,k,I)),I}function ad(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function $1(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function Jh(o,c){$1(o,c),(o=o.alternate)&&$1(o,c)}function y5(){return null}var L1=typeof reportError=="function"?reportError:function(o){console.error(o)};function Zh(o){this._internalRoot=o}id.prototype.render=Zh.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));sd(o,c,null,null)},id.prototype.unmount=Zh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;ni(function(){sd(null,o,null,null)}),c[Us]=null}};function id(o){this._internalRoot=o}id.prototype.unstable_scheduleHydration=function(o){if(o){var c=tr();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Qr.length&&c!==0&&c<Qr[p].priority;p++);Qr.splice(p,0,o),p===0&&nl(o)}};function ep(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function od(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function F1(){}function b5(o,c,p,y,k){if(k){if(typeof y=="function"){var A=y;y=function(){var ge=ad(I);A.call(ge)}}var I=O1(c,y,o,0,null,!1,!1,"",F1);return o._reactRootContainer=I,o[Us]=I.current,ml(o.nodeType===8?o.parentNode:o),ni(),I}for(;k=o.lastChild;)o.removeChild(k);if(typeof y=="function"){var Y=y;y=function(){var ge=ad(J);Y.call(ge)}}var J=Xh(o,0,!1,null,null,!1,!1,"",F1);return o._reactRootContainer=J,o[Us]=J.current,ml(o.nodeType===8?o.parentNode:o),ni(function(){sd(c,J,p,y)}),J}function ld(o,c,p,y,k){var A=p._reactRootContainer;if(A){var I=A;if(typeof k=="function"){var Y=k;k=function(){var J=ad(I);Y.call(J)}}sd(c,I,o,k)}else I=b5(p,c,o,k,y);return ad(I)}ce=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=Ue(c.pendingLanes);p!==0&&(Qt(c,p|1),jn(c,hr()),($t&6)===0&&(co=hr()+500,ga()))}break;case 13:ni(function(){var y=Ys(o,1);if(y!==null){var k=un();bs(y,o,1,k)}}),Jh(o,1)}},ut=function(o){if(o.tag===13){var c=Ys(o,134217728);if(c!==null){var p=un();bs(c,o,134217728,p)}Jh(o,134217728)}},Pt=function(o){if(o.tag===13){var c=ja(o),p=Ys(o,c);if(p!==null){var y=un();bs(p,o,c,y)}Jh(o,c)}},tr=function(){return vt},Ss=function(o,c){var p=vt;try{return vt=o,c()}finally{vt=p}},Xt=function(o,c,p){switch(c){case"input":if(fe(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var k=ku(y);if(!k)throw Error(r(90));ve(y),fe(y,k)}}}break;case"textarea":Te(o,p);break;case"select":c=p.value,c!=null&&ye(o,!!p.multiple,c,!1)}},Li=Wh,Ua=ni;var v5={usingClientEntryPoint:!1,Events:[gl,Qi,ku,Zt,ms,Wh]},Al={findFiberByHostInstance:Ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w5={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Bi(o),o===null?null:o.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||y5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Va=cd.inject(w5),Qn=cd}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v5,Nn.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(c))throw Error(r(200));return x5(o,c,null,p)},Nn.createRoot=function(o,c){if(!ep(o))throw Error(r(299));var p=!1,y="",k=L1;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Xh(o,1,!1,null,null,p,!1,y,k),o[Us]=c.current,ml(o.nodeType===8?o.parentNode:o),new Zh(c)},Nn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=Bi(c),o=o===null?null:o.stateNode,o},Nn.flushSync=function(o){return ni(o)},Nn.hydrate=function(o,c,p){if(!od(c))throw Error(r(200));return ld(null,o,c,!0,p)},Nn.hydrateRoot=function(o,c,p){if(!ep(o))throw Error(r(405));var y=p!=null&&p.hydratedSources||null,k=!1,A="",I=L1;if(p!=null&&(p.unstable_strictMode===!0&&(k=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onRecoverableError!==void 0&&(I=p.onRecoverableError)),c=O1(c,null,o,1,p??null,k,!1,A,I),o[Us]=c.current,ml(o),y)for(o=0;o<y.length;o++)p=y[o],k=p._getVersion,k=k(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,k]:c.mutableSourceEagerHydrationData.push(p,k);return new id(c)},Nn.render=function(o,c,p){if(!od(c))throw Error(r(200));return ld(null,o,c,!1,p)},Nn.unmountComponentAtNode=function(o){if(!od(o))throw Error(r(40));return o._reactRootContainer?(ni(function(){ld(null,null,o,!1,function(){o._reactRootContainer=null,o[Us]=null})}),!0):!1},Nn.unstable_batchedUpdates=Wh,Nn.unstable_renderSubtreeIntoContainer=function(o,c,p,y){if(!od(p))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return ld(o,c,p,!1,y)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var V1;function r4(){if(V1)return np.exports;V1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),np.exports=A5(),np.exports}var Y1;function T5(){if(Y1)return dd;Y1=1;var e=r4();return dd.createRoot=e.createRoot,dd.hydrateRoot=e.hydrateRoot,dd}var P5=T5();const R5=Vr(P5);var Mb=r4();const Ob=Vr(Mb);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ac.apply(this,arguments)}var Ta;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ta||(Ta={}));const K1="popstate";function I5(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:l,hash:u}=s.location;return Ay("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Yd(a)}return O5(t,r,null,e)}function yr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function n4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function M5(){return Math.random().toString(36).substr(2,8)}function Q1(e,t){return{usr:e.state,key:e.key,idx:t}}function Ay(e,t,r,s){return r===void 0&&(r=null),ac({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lo(t):t,{state:r,key:t&&t.key||s||M5()})}function Yd(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Lo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function O5(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u=Ta.Pop,d=null,h=f();h==null&&(h=0,l.replaceState(ac({},l.state,{idx:h}),""));function f(){return(l.state||{idx:null}).idx}function m(){u=Ta.Pop;let w=f(),C=w==null?null:w-h;h=w,d&&d({action:u,location:b.location,delta:C})}function g(w,C){u=Ta.Push;let N=Ay(b.location,w,C);h=f()+1;let E=Q1(N,h),S=b.createHref(N);try{l.pushState(E,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(S)}i&&d&&d({action:u,location:b.location,delta:1})}function x(w,C){u=Ta.Replace;let N=Ay(b.location,w,C);h=f();let E=Q1(N,h),S=b.createHref(N);l.replaceState(E,"",S),i&&d&&d({action:u,location:b.location,delta:0})}function v(w){let C=a.location.origin!=="null"?a.location.origin:a.location.href,N=typeof w=="string"?w:Yd(w);return N=N.replace(/ $/,"%20"),yr(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let b={get action(){return u},get location(){return e(a,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(K1,m),d=w,()=>{a.removeEventListener(K1,m),d=null}},createHref(w){return t(a,w)},createURL:v,encodeLocation(w){let C=v(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:x,go(w){return l.go(w)}};return b}var X1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(X1||(X1={}));function $5(e,t,r){return r===void 0&&(r="/"),L5(e,t,r)}function L5(e,t,r,s){let a=typeof t=="string"?Lo(t):t,i=jo(a.pathname||"/",r);if(i==null)return null;let l=s4(e);F5(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=Q5(i);u=Y5(l[d],h)}return u}function s4(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(yr(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let h=Pa([s,d.relativePath]),f=r.concat(d);i.children&&i.children.length>0&&(yr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),s4(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:H5(h,i.index),routesMeta:f})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,l);else for(let d of a4(i.path))a(i,l,d)}),t}function a4(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=a4(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function F5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:V5(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const B5=/^:[\w-]+$/,z5=3,G5=2,q5=1,U5=10,W5=-2,J1=e=>e==="*";function H5(e,t){let r=e.split("/"),s=r.length;return r.some(J1)&&(s+=W5),t&&(s+=G5),r.filter(a=>!J1(a)).reduce((a,i)=>a+(B5.test(i)?z5:i===""?q5:U5),s)}function V5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Y5(e,t,r){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=Ty({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),g=d.route;if(!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Pa([i,m.pathname]),pathnameBase:e6(Pa([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Pa([i,m.pathnameBase]))}return l}function Ty(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=K5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((h,f,m)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let b=u[m]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=u[m];return x&&!v?h[g]=void 0:h[g]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function K5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),n4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Q5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return n4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function jo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function X5(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Lo(e):e;return{pathname:r?r.startsWith("/")?r:J5(r,t):t,search:t6(s),hash:r6(a)}}function J5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ip(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $b(e,t){let r=Z5(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Lb(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Lo(e):(a=ac({},e),yr(!a.pathname||!a.pathname.includes("?"),ip("?","pathname","search",a)),yr(!a.pathname||!a.pathname.includes("#"),ip("#","pathname","hash",a)),yr(!a.search||!a.search.includes("#"),ip("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=r;else{let m=t.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;a.pathname=g.join("/")}u=m>=0?t[m]:"/"}let d=X5(a,u),h=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const Pa=e=>e.join("/").replace(/\/\/+/g,"/"),e6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,r6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function n6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i4=["post","put","patch","delete"];new Set(i4);const s6=["get",...i4];new Set(s6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ic.apply(this,arguments)}const _f=j.createContext(null),o4=j.createContext(null),sa=j.createContext(null),Ef=j.createContext(null),zs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),l4=j.createContext(null);function a6(e,t){let{relative:r}=t===void 0?{}:t;Fo()||yr(!1);let{basename:s,navigator:a}=j.useContext(sa),{hash:i,pathname:l,search:u}=Df(e,{relative:r}),d=l;return s!=="/"&&(d=l==="/"?s:Pa([s,l])),a.createHref({pathname:d,search:u,hash:i})}function Fo(){return j.useContext(Ef)!=null}function Gs(){return Fo()||yr(!1),j.useContext(Ef).location}function c4(e){j.useContext(sa).static||j.useLayoutEffect(e)}function Lt(){let{isDataRoute:e}=j.useContext(zs);return e?v6():i6()}function i6(){Fo()||yr(!1);let e=j.useContext(_f),{basename:t,future:r,navigator:s}=j.useContext(sa),{matches:a}=j.useContext(zs),{pathname:i}=Gs(),l=JSON.stringify($b(a,r.v7_relativeSplatPath)),u=j.useRef(!1);return c4(()=>{u.current=!0}),j.useCallback(function(h,f){if(f===void 0&&(f={}),!u.current)return;if(typeof h=="number"){s.go(h);return}let m=Lb(h,JSON.parse(l),i,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Pa([t,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[t,s,l,i,e])}const u4=j.createContext(null);function o6(){return j.useContext(u4)}function l6(e){let t=j.useContext(zs).outlet;return t&&j.createElement(u4.Provider,{value:e},t)}function br(){let{matches:e}=j.useContext(zs),t=e[e.length-1];return t?t.params:{}}function Df(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=j.useContext(sa),{matches:a}=j.useContext(zs),{pathname:i}=Gs(),l=JSON.stringify($b(a,s.v7_relativeSplatPath));return j.useMemo(()=>Lb(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function c6(e,t){return u6(e,t)}function u6(e,t,r,s){Fo()||yr(!1);let{navigator:a}=j.useContext(sa),{matches:i}=j.useContext(zs),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let h=Gs(),f;if(t){var m;let w=typeof t=="string"?Lo(t):t;d==="/"||(m=w.pathname)!=null&&m.startsWith(d)||yr(!1),f=w}else f=h;let g=f.pathname||"/",x=g;if(d!=="/"){let w=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=$5(e,{pathname:x}),b=p6(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Pa([d,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Pa([d,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,s);return t&&b?j.createElement(Ef.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ta.Pop}},b):b}function d6(){let e=b6(),t=n6(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:a},r):null,null)}const f6=j.createElement(d6,null);class m6 extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(zs.Provider,{value:this.props.routeContext},j.createElement(l4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h6(e){let{routeContext:t,match:r,children:s}=e,a=j.useContext(_f);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(zs.Provider,{value:t},s)}function p6(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let f=l.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);f>=0||yr(!1),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,h=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let m=l[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:g,errors:x}=r,v=m.route.loader&&g[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||v){d=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,m,g)=>{let x,v=!1,b=null,w=null;r&&(x=u&&m.route.id?u[m.route.id]:void 0,b=m.route.errorElement||f6,d&&(h<0&&g===0?(w6("route-fallback"),v=!0,w=null):h===g&&(v=!0,w=m.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,g+1)),N=()=>{let E;return x?E=b:v?E=w:m.route.Component?E=j.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=f,j.createElement(h6,{match:m,routeContext:{outlet:f,matches:C,isDataRoute:r!=null},children:E})};return r&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(m6,{location:r.location,revalidation:r.revalidation,component:b,error:x,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var d4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(d4||{}),f4=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(f4||{});function g6(e){let t=j.useContext(_f);return t||yr(!1),t}function x6(e){let t=j.useContext(o4);return t||yr(!1),t}function y6(e){let t=j.useContext(zs);return t||yr(!1),t}function m4(e){let t=y6(),r=t.matches[t.matches.length-1];return r.route.id||yr(!1),r.route.id}function b6(){var e;let t=j.useContext(l4),r=x6(),s=m4();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function v6(){let{router:e}=g6(d4.UseNavigateStable),t=m4(f4.UseNavigateStable),r=j.useRef(!1);return c4(()=>{r.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ic({fromRouteId:t},i)))},[e,t])}const Z1={};function w6(e,t,r){Z1[e]||(Z1[e]=!0)}function j6(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Py(e){let{to:t,replace:r,state:s,relative:a}=e;Fo()||yr(!1);let{future:i,static:l}=j.useContext(sa),{matches:u}=j.useContext(zs),{pathname:d}=Gs(),h=Lt(),f=Lb(t,$b(u,i.v7_relativeSplatPath),d,a==="path"),m=JSON.stringify(f);return j.useEffect(()=>h(JSON.parse(m),{replace:r,state:s,relative:a}),[h,m,a,r,s]),null}function N6(e){return l6(e.context)}function Ct(e){yr(!1)}function S6(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Ta.Pop,navigator:i,static:l=!1,future:u}=e;Fo()&&yr(!1);let d=t.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:d,navigator:i,static:l,future:ic({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);typeof s=="string"&&(s=Lo(s));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:v="default"}=s,b=j.useMemo(()=>{let w=jo(f,d);return w==null?null:{location:{pathname:w,search:m,hash:g,state:x,key:v},navigationType:a}},[d,f,m,g,x,v,a]);return b==null?null:j.createElement(sa.Provider,{value:h},j.createElement(Ef.Provider,{children:r,value:b}))}function k6(e){let{children:t,location:r}=e;return c6(Ry(t),r)}new Promise(()=>{});function Ry(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(s,a)=>{if(!j.isValidElement(s))return;let i=[...t,a];if(s.type===j.Fragment){r.push.apply(r,Ry(s.props.children,i));return}s.type!==Ct&&yr(!1),!s.props.index||!s.props.children||yr(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Ry(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kd(){return Kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kd.apply(this,arguments)}function h4(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function C6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _6(e,t){return e.button===0&&(!t||t==="_self")&&!C6(e)}const E6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],D6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],A6="6";try{window.__reactRouterVersion=A6}catch{}const T6=j.createContext({isTransitioning:!1}),P6="startTransition",eN=_5[P6];function R6(e){let{basename:t,children:r,future:s,window:a}=e,i=j.useRef();i.current==null&&(i.current=I5({window:a,v5Compat:!0}));let l=i.current,[u,d]=j.useState({action:l.action,location:l.location}),{v7_startTransition:h}=s||{},f=j.useCallback(m=>{h&&eN?eN(()=>d(m)):d(m)},[d,h]);return j.useLayoutEffect(()=>l.listen(f),[l,f]),j.useEffect(()=>j6(s),[s]),j.createElement(S6,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:l,future:s})}const I6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=j.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:u,target:d,to:h,preventScrollReset:f,viewTransition:m}=t,g=h4(t,E6),{basename:x}=j.useContext(sa),v,b=!1;if(typeof h=="string"&&M6.test(h)&&(v=h,I6))try{let E=new URL(window.location.href),S=h.startsWith("//")?new URL(E.protocol+h):new URL(h),_=jo(S.pathname,x);S.origin===E.origin&&_!=null?h=_+S.search+S.hash:b=!0}catch{}let w=a6(h,{relative:a}),C=L6(h,{replace:l,state:u,target:d,preventScrollReset:f,relative:a,viewTransition:m});function N(E){s&&s(E),E.defaultPrevented||C(E)}return j.createElement("a",Kd({},g,{href:v||w,onClick:b||i?s:N,ref:r,target:d}))}),O6=j.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:h,children:f}=t,m=h4(t,D6),g=Df(d,{relative:m.relative}),x=Gs(),v=j.useContext(o4),{navigator:b,basename:w}=j.useContext(sa),C=v!=null&&F6(g)&&h===!0,N=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,E=x.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(E=E.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&w&&(S=jo(S,w)||S);const _=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let D=E===N||!l&&E.startsWith(N)&&E.charAt(_)==="/",T=S!=null&&(S===N||!l&&S.startsWith(N)&&S.charAt(N.length)==="/"),P={isActive:D,isPending:T,isTransitioning:C},O=D?s:void 0,F;typeof i=="function"?F=i(P):F=[i,D?"active":null,T?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(P):u;return j.createElement(Mt,Kd({},m,{"aria-current":O,className:F,ref:r,style:$,to:d,viewTransition:h}),typeof f=="function"?f(P):f)});var Iy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var tN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(tN||(tN={}));function $6(e){let t=j.useContext(_f);return t||yr(!1),t}function L6(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:u}=t===void 0?{}:t,d=Lt(),h=Gs(),f=Df(e,{relative:l});return j.useCallback(m=>{if(_6(m,r)){m.preventDefault();let g=s!==void 0?s:Yd(h)===Yd(f);d(e,{replace:g,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[h,d,f,s,a,r,e,i,l,u])}function F6(e,t){t===void 0&&(t={});let r=j.useContext(T6);r==null&&yr(!1);let{basename:s}=$6(Iy.useViewTransitionState),a=Df(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=jo(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=jo(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Ty(a.pathname,l)!=null||Ty(a.pathname,i)!=null}function p4(e,t){return function(){return e.apply(t,arguments)}}const{toString:B6}=Object.prototype,{getPrototypeOf:Fb}=Object,{iterator:Af,toStringTag:g4}=Symbol,Tf=(e=>t=>{const r=B6.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=e=>(e=e.toLowerCase(),t=>Tf(t)===e),Pf=e=>t=>typeof t===e,{isArray:Bo}=Array,oc=Pf("undefined");function z6(e){return e!==null&&!oc(e)&&e.constructor!==null&&!oc(e.constructor)&&kn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const x4=Ns("ArrayBuffer");function G6(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&x4(e.buffer),t}const q6=Pf("string"),kn=Pf("function"),y4=Pf("number"),Rf=e=>e!==null&&typeof e=="object",U6=e=>e===!0||e===!1,Dd=e=>{if(Tf(e)!=="object")return!1;const t=Fb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(g4 in e)&&!(Af in e)},W6=Ns("Date"),H6=Ns("File"),V6=Ns("Blob"),Y6=Ns("FileList"),K6=e=>Rf(e)&&kn(e.pipe),Q6=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||kn(e.append)&&((t=Tf(e))==="formdata"||t==="object"&&kn(e.toString)&&e.toString()==="[object FormData]"))},X6=Ns("URLSearchParams"),[J6,Z6,eR,tR]=["ReadableStream","Request","Response","Headers"].map(Ns),rR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Bo(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let u;for(s=0;s<l;s++)u=i[s],t.call(null,e[u],u,e)}}function b4(e,t){t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,v4=e=>!oc(e)&&e!==fi;function My(){const{caseless:e}=v4(this)&&this||{},t={},r=(s,a)=>{const i=e&&b4(t,a)||a;Dd(t[i])&&Dd(s)?t[i]=My(t[i],s):Dd(s)?t[i]=My({},s):Bo(s)?t[i]=s.slice():t[i]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Lc(arguments[s],r);return t}const nR=(e,t,r,{allOwnKeys:s}={})=>(Lc(t,(a,i)=>{r&&kn(a)?e[i]=p4(a,r):e[i]=a},{allOwnKeys:s}),e),sR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aR=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},iR=(e,t,r,s)=>{let a,i,l;const u={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!s||s(l,e,t))&&!u[l]&&(t[l]=e[l],u[l]=!0);e=r!==!1&&Fb(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},oR=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},lR=e=>{if(!e)return null;if(Bo(e))return e;let t=e.length;if(!y4(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},cR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fb(Uint8Array)),uR=(e,t)=>{const s=(e&&e[Af]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},dR=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},fR=Ns("HTMLFormElement"),mR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),rN=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),hR=Ns("RegExp"),w4=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Lc(r,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(s[i]=l||a)}),Object.defineProperties(e,s)},pR=e=>{w4(e,(t,r)=>{if(kn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(kn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},gR=(e,t)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return Bo(e)?s(e):s(String(e).split(t)),r},xR=()=>{},yR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function bR(e){return!!(e&&kn(e.append)&&e[g4]==="FormData"&&e[Af])}const vR=e=>{const t=new Array(10),r=(s,a)=>{if(Rf(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[a]=s;const i=Bo(s)?[]:{};return Lc(s,(l,u)=>{const d=r(l,a+1);!oc(d)&&(i[u]=d)}),t[a]=void 0,i}}return s};return r(e,0)},wR=Ns("AsyncFunction"),jR=e=>e&&(Rf(e)||kn(e))&&kn(e.then)&&kn(e.catch),j4=((e,t)=>e?setImmediate:t?((r,s)=>(fi.addEventListener("message",({source:a,data:i})=>{a===fi&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),fi.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",kn(fi.postMessage)),NR=typeof queueMicrotask<"u"?queueMicrotask.bind(fi):typeof process<"u"&&process.nextTick||j4,SR=e=>e!=null&&kn(e[Af]),we={isArray:Bo,isArrayBuffer:x4,isBuffer:z6,isFormData:Q6,isArrayBufferView:G6,isString:q6,isNumber:y4,isBoolean:U6,isObject:Rf,isPlainObject:Dd,isReadableStream:J6,isRequest:Z6,isResponse:eR,isHeaders:tR,isUndefined:oc,isDate:W6,isFile:H6,isBlob:V6,isRegExp:hR,isFunction:kn,isStream:K6,isURLSearchParams:X6,isTypedArray:cR,isFileList:Y6,forEach:Lc,merge:My,extend:nR,trim:rR,stripBOM:sR,inherits:aR,toFlatObject:iR,kindOf:Tf,kindOfTest:Ns,endsWith:oR,toArray:lR,forEachEntry:uR,matchAll:dR,isHTMLForm:fR,hasOwnProperty:rN,hasOwnProp:rN,reduceDescriptors:w4,freezeMethods:pR,toObjectSet:gR,toCamelCase:mR,noop:xR,toFiniteNumber:yR,findKey:b4,global:fi,isContextDefined:v4,isSpecCompliantForm:bR,toJSONObject:vR,isAsyncFn:wR,isThenable:jR,setImmediate:j4,asap:NR,isIterable:SR};function _t(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}we.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.status}}});const N4=_t.prototype,S4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{S4[e]={value:e}});Object.defineProperties(_t,S4);Object.defineProperty(N4,"isAxiosError",{value:!0});_t.from=(e,t,r,s,a,i)=>{const l=Object.create(N4);return we.toFlatObject(e,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),_t.call(l,e.message,t,r,s,a),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const kR=null;function Oy(e){return we.isPlainObject(e)||we.isArray(e)}function k4(e){return we.endsWith(e,"[]")?e.slice(0,-2):e}function nN(e,t,r){return e?e.concat(t).map(function(a,i){return a=k4(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function CR(e){return we.isArray(e)&&!e.some(Oy)}const _R=we.toFlatObject(we,{},null,function(t){return/^is[A-Z]/.test(t)});function If(e,t,r){if(!we.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=we.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!we.isUndefined(w[b])});const s=r.metaTokens,a=r.visitor||f,i=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(t);if(!we.isFunction(a))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(we.isDate(v))return v.toISOString();if(!d&&we.isBlob(v))throw new _t("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(v)||we.isTypedArray(v)?d&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,b,w){let C=v;if(v&&!w&&typeof v=="object"){if(we.endsWith(b,"{}"))b=s?b:b.slice(0,-2),v=JSON.stringify(v);else if(we.isArray(v)&&CR(v)||(we.isFileList(v)||we.endsWith(b,"[]"))&&(C=we.toArray(v)))return b=k4(b),C.forEach(function(E,S){!(we.isUndefined(E)||E===null)&&t.append(l===!0?nN([b],S,i):l===null?b:b+"[]",h(E))}),!1}return Oy(v)?!0:(t.append(nN(w,b,i),h(v)),!1)}const m=[],g=Object.assign(_R,{defaultVisitor:f,convertValue:h,isVisitable:Oy});function x(v,b){if(!we.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(v),we.forEach(v,function(C,N){(!(we.isUndefined(C)||C===null)&&a.call(t,C,we.isString(N)?N.trim():N,b,g))===!0&&x(C,b?b.concat(N):[N])}),m.pop()}}if(!we.isObject(e))throw new TypeError("data must be an object");return x(e),t}function sN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Bb(e,t){this._pairs=[],e&&If(e,this,t)}const C4=Bb.prototype;C4.append=function(t,r){this._pairs.push([t,r])};C4.toString=function(t){const r=t?function(s){return t.call(this,s,sN)}:sN;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function ER(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _4(e,t,r){if(!t)return e;const s=r&&r.encode||ER;we.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=we.isURLSearchParams(t)?t.toString():new Bb(t,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class aN{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){we.forEach(this.handlers,function(s){s!==null&&t(s)})}}const E4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},DR=typeof URLSearchParams<"u"?URLSearchParams:Bb,AR=typeof FormData<"u"?FormData:null,TR=typeof Blob<"u"?Blob:null,PR={isBrowser:!0,classes:{URLSearchParams:DR,FormData:AR,Blob:TR},protocols:["http","https","file","blob","url","data"]},zb=typeof window<"u"&&typeof document<"u",$y=typeof navigator=="object"&&navigator||void 0,RR=zb&&(!$y||["ReactNative","NativeScript","NS"].indexOf($y.product)<0),IR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MR=zb&&window.location.href||"http://localhost",OR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zb,hasStandardBrowserEnv:RR,hasStandardBrowserWebWorkerEnv:IR,navigator:$y,origin:MR},Symbol.toStringTag,{value:"Module"})),rn={...OR,...PR};function $R(e,t){return If(e,new rn.classes.URLSearchParams,Object.assign({visitor:function(r,s,a,i){return rn.isNode&&we.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function LR(e){return we.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FR(e){const t={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],t[i]=e[i];return t}function D4(e){function t(r,s,a,i){let l=r[i++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=i>=r.length;return l=!l&&we.isArray(a)?a.length:l,d?(we.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!u):((!a[l]||!we.isObject(a[l]))&&(a[l]=[]),t(r,s,a[l],i)&&we.isArray(a[l])&&(a[l]=FR(a[l])),!u)}if(we.isFormData(e)&&we.isFunction(e.entries)){const r={};return we.forEachEntry(e,(s,a)=>{t(LR(s),a,r,0)}),r}return null}function BR(e,t,r){if(we.isString(e))try{return(t||JSON.parse)(e),we.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Fc={transitional:E4,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=we.isObject(t);if(i&&we.isHTMLForm(t)&&(t=new FormData(t)),we.isFormData(t))return a?JSON.stringify(D4(t)):t;if(we.isArrayBuffer(t)||we.isBuffer(t)||we.isStream(t)||we.isFile(t)||we.isBlob(t)||we.isReadableStream(t))return t;if(we.isArrayBufferView(t))return t.buffer;if(we.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return $R(t,this.formSerializer).toString();if((u=we.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return If(u?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),BR(t)):t}],transformResponse:[function(t){const r=this.transitional||Fc.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(we.isResponse(t)||we.isReadableStream(t))return t;if(t&&we.isString(t)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(u){if(l)throw u.name==="SyntaxError"?_t.from(u,_t.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rn.classes.FormData,Blob:rn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],e=>{Fc.headers[e]={}});const zR=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),GR=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||t[r]&&zR[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},iN=Symbol("internals");function Pl(e){return e&&String(e).trim().toLowerCase()}function Ad(e){return e===!1||e==null?e:we.isArray(e)?e.map(Ad):String(e)}function qR(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const UR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function op(e,t,r,s,a){if(we.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!we.isString(t)){if(we.isString(s))return t.indexOf(s)!==-1;if(we.isRegExp(s))return s.test(t)}}function WR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function HR(e,t){const r=we.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,l){return this[s].call(this,t,a,i,l)},configurable:!0})})}let Cn=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function i(u,d,h){const f=Pl(d);if(!f)throw new Error("header name must be a non-empty string");const m=we.findKey(a,f);(!m||a[m]===void 0||h===!0||h===void 0&&a[m]!==!1)&&(a[m||d]=Ad(u))}const l=(u,d)=>we.forEach(u,(h,f)=>i(h,f,d));if(we.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(we.isString(t)&&(t=t.trim())&&!UR(t))l(GR(t),r);else if(we.isObject(t)&&we.isIterable(t)){let u={},d,h;for(const f of t){if(!we.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[h=f[0]]=(d=u[h])?we.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(u,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Pl(t),t){const s=we.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return qR(a);if(we.isFunction(r))return r.call(this,a,s);if(we.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Pl(t),t){const s=we.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||op(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function i(l){if(l=Pl(l),l){const u=we.findKey(s,l);u&&(!r||op(s,s[u],u,r))&&(delete s[u],a=!0)}}return we.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!t||op(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,s={};return we.forEach(this,(a,i)=>{const l=we.findKey(s,i);if(l){r[l]=Ad(a),delete r[i];return}const u=t?WR(i):String(i).trim();u!==i&&delete r[i],r[u]=Ad(a),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return we.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&we.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[iN]=this[iN]={accessors:{}}).accessors,a=this.prototype;function i(l){const u=Pl(l);s[u]||(HR(a,l),s[u]=!0)}return we.isArray(t)?t.forEach(i):i(t),this}};Cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);we.reduceDescriptors(Cn.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});we.freezeMethods(Cn);function lp(e,t){const r=this||Fc,s=t||r,a=Cn.from(s.headers);let i=s.data;return we.forEach(e,function(u){i=u.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function A4(e){return!!(e&&e.__CANCEL__)}function zo(e,t,r){_t.call(this,e??"canceled",_t.ERR_CANCELED,t,r),this.name="CanceledError"}we.inherits(zo,_t,{__CANCEL__:!0});function T4(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new _t("Request failed with status code "+r.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function VR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function YR(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(d){const h=Date.now(),f=s[i];l||(l=h),r[a]=d,s[a]=h;let m=i,g=0;for(;m!==a;)g+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),h-l<t)return;const x=f&&h-f;return x?Math.round(g*1e3/x):void 0}}function KR(e,t){let r=0,s=1e3/t,a,i;const l=(h,f=Date.now())=>{r=f,a=null,i&&(clearTimeout(i),i=null),e.apply(null,h)};return[(...h)=>{const f=Date.now(),m=f-r;m>=s?l(h,f):(a=h,i||(i=setTimeout(()=>{i=null,l(a)},s-m)))},()=>a&&l(a)]}const Qd=(e,t,r=3)=>{let s=0;const a=YR(50,250);return KR(i=>{const l=i.loaded,u=i.lengthComputable?i.total:void 0,d=l-s,h=a(d),f=l<=u;s=l;const m={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&f?(u-l)/h:void 0,event:i,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(m)},r)},oN=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},lN=e=>(...t)=>we.asap(()=>e(...t)),QR=rn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,rn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(rn.origin),rn.navigator&&/(msie|trident)/i.test(rn.navigator.userAgent)):()=>!0,XR=rn.hasStandardBrowserEnv?{write(e,t,r,s,a,i){const l=[e+"="+encodeURIComponent(t)];we.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),we.isString(s)&&l.push("path="+s),we.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ZR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function P4(e,t,r){let s=!JR(t);return e&&(s||r==!1)?ZR(e,t):t}const cN=e=>e instanceof Cn?{...e}:e;function yi(e,t){t=t||{};const r={};function s(h,f,m,g){return we.isPlainObject(h)&&we.isPlainObject(f)?we.merge.call({caseless:g},h,f):we.isPlainObject(f)?we.merge({},f):we.isArray(f)?f.slice():f}function a(h,f,m,g){if(we.isUndefined(f)){if(!we.isUndefined(h))return s(void 0,h,m,g)}else return s(h,f,m,g)}function i(h,f){if(!we.isUndefined(f))return s(void 0,f)}function l(h,f){if(we.isUndefined(f)){if(!we.isUndefined(h))return s(void 0,h)}else return s(void 0,f)}function u(h,f,m){if(m in t)return s(h,f);if(m in e)return s(void 0,h)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(h,f,m)=>a(cN(h),cN(f),m,!0)};return we.forEach(Object.keys(Object.assign({},e,t)),function(f){const m=d[f]||a,g=m(e[f],t[f],f);we.isUndefined(g)&&m!==u||(r[f]=g)}),r}const R4=e=>{const t=yi({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:u}=t;t.headers=l=Cn.from(l),t.url=_4(P4(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(we.isFormData(r)){if(rn.hasStandardBrowserEnv||rn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[h,...f]=d?d.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...f].join("; "))}}if(rn.hasStandardBrowserEnv&&(s&&we.isFunction(s)&&(s=s(t)),s||s!==!1&&QR(t.url))){const h=a&&i&&XR.read(i);h&&l.set(a,h)}return t},eI=typeof XMLHttpRequest<"u",tI=eI&&function(e){return new Promise(function(r,s){const a=R4(e);let i=a.data;const l=Cn.from(a.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=a,f,m,g,x,v;function b(){x&&x(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function C(){if(!w)return;const E=Cn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),_={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:E,config:e,request:w};T4(function(T){r(T),b()},function(T){s(T),b()},_),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(s(new _t("Request aborted",_t.ECONNABORTED,e,w)),w=null)},w.onerror=function(){s(new _t("Network Error",_t.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let S=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const _=a.transitional||E4;a.timeoutErrorMessage&&(S=a.timeoutErrorMessage),s(new _t(S,_.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,e,w)),w=null},i===void 0&&l.setContentType(null),"setRequestHeader"in w&&we.forEach(l.toJSON(),function(S,_){w.setRequestHeader(_,S)}),we.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),u&&u!=="json"&&(w.responseType=a.responseType),h&&([g,v]=Qd(h,!0),w.addEventListener("progress",g)),d&&w.upload&&([m,x]=Qd(d),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(f=E=>{w&&(s(!E||E.type?new zo(null,e,w):E),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const N=VR(a.url);if(N&&rn.protocols.indexOf(N)===-1){s(new _t("Unsupported protocol "+N+":",_t.ERR_BAD_REQUEST,e));return}w.send(i||null)})},rI=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const i=function(h){if(!a){a=!0,u();const f=h instanceof Error?h:this.reason;s.abort(f instanceof _t?f:new zo(f instanceof Error?f.message:f))}};let l=t&&setTimeout(()=>{l=null,i(new _t(`timeout ${t} of ms exceeded`,_t.ETIMEDOUT))},t);const u=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:d}=s;return d.unsubscribe=()=>we.asap(u),d}},nI=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},sI=async function*(e,t){for await(const r of aI(e))yield*nI(r,t)},aI=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},uN=(e,t,r,s)=>{const a=sI(e,t);let i=0,l,u=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:h,value:f}=await a.next();if(h){u(),d.close();return}let m=f.byteLength;if(r){let g=i+=m;r(g)}d.enqueue(new Uint8Array(f))}catch(h){throw u(h),h}},cancel(d){return u(d),a.return()}},{highWaterMark:2})},Mf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",I4=Mf&&typeof ReadableStream=="function",iI=Mf&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),M4=(e,...t)=>{try{return!!e(...t)}catch{return!1}},oI=I4&&M4(()=>{let e=!1;const t=new Request(rn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),dN=64*1024,Ly=I4&&M4(()=>we.isReadableStream(new Response("").body)),Xd={stream:Ly&&(e=>e.body)};Mf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Xd[t]&&(Xd[t]=we.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new _t(`Response type '${t}' is not supported`,_t.ERR_NOT_SUPPORT,s)})})})(new Response);const lI=async e=>{if(e==null)return 0;if(we.isBlob(e))return e.size;if(we.isSpecCompliantForm(e))return(await new Request(rn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(we.isArrayBufferView(e)||we.isArrayBuffer(e))return e.byteLength;if(we.isURLSearchParams(e)&&(e=e+""),we.isString(e))return(await iI(e)).byteLength},cI=async(e,t)=>{const r=we.toFiniteNumber(e.getContentLength());return r??lI(t)},uI=Mf&&(async e=>{let{url:t,method:r,data:s,signal:a,cancelToken:i,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:h,headers:f,withCredentials:m="same-origin",fetchOptions:g}=R4(e);h=h?(h+"").toLowerCase():"text";let x=rI([a,i&&i.toAbortSignal()],l),v;const b=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let w;try{if(d&&oI&&r!=="get"&&r!=="head"&&(w=await cI(f,s))!==0){let _=new Request(t,{method:"POST",body:s,duplex:"half"}),D;if(we.isFormData(s)&&(D=_.headers.get("content-type"))&&f.setContentType(D),_.body){const[T,P]=oN(w,Qd(lN(d)));s=uN(_.body,dN,T,P)}}we.isString(m)||(m=m?"include":"omit");const C="credentials"in Request.prototype;v=new Request(t,{...g,signal:x,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",credentials:C?m:void 0});let N=await fetch(v);const E=Ly&&(h==="stream"||h==="response");if(Ly&&(u||E&&b)){const _={};["status","statusText","headers"].forEach(O=>{_[O]=N[O]});const D=we.toFiniteNumber(N.headers.get("content-length")),[T,P]=u&&oN(D,Qd(lN(u),!0))||[];N=new Response(uN(N.body,dN,T,()=>{P&&P(),b&&b()}),_)}h=h||"text";let S=await Xd[we.findKey(Xd,h)||"text"](N,e);return!E&&b&&b(),await new Promise((_,D)=>{T4(_,D,{data:S,headers:Cn.from(N.headers),status:N.status,statusText:N.statusText,config:e,request:v})})}catch(C){throw b&&b(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,e,v),{cause:C.cause||C}):_t.from(C,C&&C.code,e,v)}}),Fy={http:kR,xhr:tI,fetch:uI};we.forEach(Fy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const fN=e=>`- ${e}`,dI=e=>we.isFunction(e)||e===null||e===!1,O4={getAdapter:e=>{e=we.isArray(e)?e:[e];const{length:t}=e;let r,s;const a={};for(let i=0;i<t;i++){r=e[i];let l;if(s=r,!dI(r)&&(s=Fy[(l=String(r)).toLowerCase()],s===void 0))throw new _t(`Unknown adapter '${l}'`);if(s)break;a[l||"#"+i]=s}if(!s){const i=Object.entries(a).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(fN).join(`
`):" "+fN(i[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Fy};function cp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zo(null,e)}function mN(e){return cp(e),e.headers=Cn.from(e.headers),e.data=lp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),O4.getAdapter(e.adapter||Fc.adapter)(e).then(function(s){return cp(e),s.data=lp.call(e,e.transformResponse,s),s.headers=Cn.from(s.headers),s},function(s){return A4(s)||(cp(e),s&&s.response&&(s.response.data=lp.call(e,e.transformResponse,s.response),s.response.headers=Cn.from(s.response.headers))),Promise.reject(s)})}const $4="1.9.0",Of={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Of[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const hN={};Of.transitional=function(t,r,s){function a(i,l){return"[Axios v"+$4+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,u)=>{if(t===!1)throw new _t(a(l," has been removed"+(r?" in "+r:"")),_t.ERR_DEPRECATED);return r&&!hN[l]&&(hN[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,u):!0}};Of.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function fI(e,t,r){if(typeof e!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],l=t[i];if(l){const u=e[i],d=u===void 0||l(u,i,e);if(d!==!0)throw new _t("option "+i+" must be "+d,_t.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _t("Unknown option "+i,_t.ERR_BAD_OPTION)}}const Td={assertOptions:fI,validators:Of},As=Td.validators;let mi=class{constructor(t){this.defaults=t||{},this.interceptors={request:new aN,response:new aN}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=yi(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&Td.assertOptions(s,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),a!=null&&(we.isFunction(a)?r.paramsSerializer={serialize:a}:Td.assertOptions(a,{encode:As.function,serialize:As.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Td.assertOptions(r,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&we.merge(i.common,i[r.method]);i&&we.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=Cn.concat(l,i);const u=[];let d=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(d=d&&b.synchronous,u.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let f,m=0,g;if(!d){const v=[mN.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,h),g=v.length,f=Promise.resolve(r);m<g;)f=f.then(v[m++],v[m++]);return f}g=u.length;let x=r;for(m=0;m<g;){const v=u[m++],b=u[m++];try{x=v(x)}catch(w){b.call(this,w);break}}try{f=mN.call(this,x)}catch(v){return Promise.reject(v)}for(m=0,g=h.length;m<g;)f=f.then(h[m++],h[m++]);return f}getUri(t){t=yi(this.defaults,t);const r=P4(t.baseURL,t.url,t.allowAbsoluteUrls);return _4(r,t.params,t.paramsSerializer)}};we.forEach(["delete","get","head","options"],function(t){mi.prototype[t]=function(r,s){return this.request(yi(s||{},{method:t,url:r,data:(s||{}).data}))}});we.forEach(["post","put","patch"],function(t){function r(s){return function(i,l,u){return this.request(yi(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}mi.prototype[t]=r(),mi.prototype[t+"Form"]=r(!0)});let mI=class L4{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(u=>{s.subscribe(u),i=u}).then(a);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,u){s.reason||(s.reason=new zo(i,l,u),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new L4(function(a){t=a}),cancel:t}}};function hI(e){return function(r){return e.apply(null,r)}}function pI(e){return we.isObject(e)&&e.isAxiosError===!0}const By={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(By).forEach(([e,t])=>{By[t]=e});function F4(e){const t=new mi(e),r=p4(mi.prototype.request,t);return we.extend(r,mi.prototype,t,{allOwnKeys:!0}),we.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return F4(yi(e,a))},r}const me=F4(Fc);me.Axios=mi;me.CanceledError=zo;me.CancelToken=mI;me.isCancel=A4;me.VERSION=$4;me.toFormData=If;me.AxiosError=_t;me.Cancel=me.CanceledError;me.all=function(t){return Promise.all(t)};me.spread=hI;me.isAxiosError=pI;me.mergeConfig=yi;me.AxiosHeaders=Cn;me.formToJSON=e=>D4(we.isHTMLForm(e)?new FormData(e):e);me.getAdapter=O4.getAdapter;me.HttpStatusCode=By;me.default=me;const{Axios:Cee,AxiosError:_ee,CanceledError:Eee,isCancel:Dee,CancelToken:Aee,VERSION:Tee,all:Pee,Cancel:Ree,isAxiosError:Iee,spread:Mee,toFormData:Oee,AxiosHeaders:$ee,HttpStatusCode:Lee,formToJSON:Fee,getAdapter:Bee,mergeConfig:zee}=me,Ie=me.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Ie.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const gI=async e=>Ie.put("/users/me",e),xI=async e=>{const t=new FormData;return t.append("profilePicture",e),Ie.post("/users/me/profile-picture",t,{headers:{"Content-Type":"multipart/form-data"}})},yI=async()=>Ie.get("/users/me/preferences"),bI=async e=>Ie.put("/users/me/preferences",e),vI=async(e=1,t=20,r=150)=>Ie.get(`/auth/login-activity?page=${e}&limit=${t}&days=${r}`),wI=async(e,t)=>{const r=localStorage.getItem("token");return(await Ie.put(`/courses/${e}/overview-config`,t,{headers:{Authorization:`Bearer ${r}`}})).data},B4=j.createContext(void 0);function jI({children:e}){const[t,r]=j.useState(null),[s,a]=j.useState(localStorage.getItem("token")),[i,l]=j.useState(!0);j.useEffect(()=>{s?Ie.get("/auth/me").then(f=>{if(f.data.success){const m=f.data.user;r({_id:m.id||m._id,firstName:m.firstName,lastName:m.lastName,email:m.email,role:m.role,bio:m.bio,profilePicture:m.profilePicture})}}).catch(()=>{localStorage.removeItem("token"),a(null)}).finally(()=>{l(!1)}):l(!1)},[s]);const u=async(f,m)=>{const g=await Ie.post("/auth/login",{email:f,password:m}),{token:x,user:v}=g.data,b={_id:v.id||v._id,firstName:v.firstName,lastName:v.lastName,email:v.email,role:v.role,bio:v.bio,profilePicture:v.profilePicture};localStorage.setItem("token",x),localStorage.setItem("user",JSON.stringify(b)),a(x),r(b)},d=async(f,m,g,x,v)=>{var b;console.log("Signup request data:",{firstName:f,lastName:m,email:g,password:x,role:v});try{const w=await Ie.post("/auth/register",{firstName:f,lastName:m,email:g,password:x,role:v});console.log("Signup response:",w.data);const{token:C,user:N}=w.data,E={_id:N.id||N._id,firstName:N.firstName,lastName:N.lastName,email:N.email,role:N.role,bio:N.bio,profilePicture:N.profilePicture};localStorage.setItem("token",C),localStorage.setItem("user",JSON.stringify(E)),a(C),r(E)}catch(w){throw console.error("Signup error:",((b=w.response)==null?void 0:b.data)||w),w}},h=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),r(null)};return n.jsx(B4.Provider,{value:{user:t,setUser:r,token:s,loading:i,login:u,signup:d,logout:h},children:e})}function Et(){const e=j.useContext(B4);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const z4=j.createContext(void 0),NI=({children:e})=>{const[t,r]=j.useState([]),[s,a]=j.useState(!1),[i,l]=j.useState(null),{token:u}=Et(),d=async()=>{var b,w;try{a(!0),l(null);const C=await Ie.get("/courses");C.data.success?r(C.data.data):l(C.data.message||"Failed to fetch courses")}catch(C){console.error("Error fetching courses:",C),l(((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.message)||"Error fetching courses")}finally{a(!1)}},h=async b=>{var w,C;if(!b||b==="undefined"||b==="null")throw new Error("Invalid course ID");try{a(!0),l(null);const N=await Ie.get(`/courses/${b}`);if(N.data.success)return N.data.data;throw new Error(N.data.message||"Failed to fetch course")}catch(N){throw console.error("Error fetching course:",N),l(((C=(w=N.response)==null?void 0:w.data)==null?void 0:C.message)||"Error fetching course"),N}finally{a(!1)}},f=async(b,w,C)=>{var N,E;try{a(!0),l(null);const S=await Ie.post("/courses",{title:b,description:w,catalog:C});S.data.success?r([...t,S.data.data]):l(S.data.message||"Failed to create course")}catch(S){throw console.error("Error creating course:",S),l(((E=(N=S.response)==null?void 0:N.data)==null?void 0:E.message)||"Error creating course"),S}finally{a(!1)}},m=async(b,w,C,N)=>{var E,S;try{a(!0),l(null);const _=await Ie.put(`/courses/${b}`,{title:w,description:C,catalog:N});_.data.success?r(t.map(D=>D._id===b?_.data.data:D)):l(_.data.message||"Failed to update course")}catch(_){throw console.error("Error updating course:",_),l(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Error updating course"),_}finally{a(!1)}},g=async b=>{var w,C;try{a(!0),l(null);const N=await Ie.delete(`/courses/${b}`);N.data.success?r(t.filter(E=>E._id!==b)):l(N.data.message||"Failed to delete course")}catch(N){throw console.error("Error deleting course:",N),l(((C=(w=N.response)==null?void 0:w.data)==null?void 0:C.message)||"Error deleting course"),N}finally{a(!1)}},x=async(b,w)=>{var C,N;try{a(!0),l(null);const E=await Ie.post(`/courses/${b}/enroll`,{studentId:w});E.data.success?r(t.map(S=>S._id===b?E.data.data:S)):l(E.data.message||"Failed to enroll student")}catch(E){throw console.error("Error enrolling student:",E),l(((N=(C=E.response)==null?void 0:C.data)==null?void 0:N.message)||"Error enrolling student"),E}finally{a(!1)}},v=async(b,w)=>{try{(await Ie.post(`/courses/${b}/unenroll`,{studentId:w})).data.success&&await h(b)}catch(C){throw console.error("Error unenrolling student:",C),C}};return j.useEffect(()=>{u&&d().catch(b=>{console.error("Error in CourseProvider useEffect:",b)})},[u]),n.jsx(z4.Provider,{value:{courses:t,loading:s,error:i,createCourse:f,updateCourse:m,deleteCourse:g,enrollStudent:x,unenrollStudent:v,getCourses:d,getCourse:h},children:e})},Go=()=>{const e=j.useContext(z4);if(e===void 0)throw new Error("useCourse must be used within a CourseProvider");return e},G4=j.createContext(void 0),Aa=({children:e})=>{const[t,r]=j.useState([]),[s,a]=j.useState(!1),[i,l]=j.useState(null),{token:u}=Et(),d=j.useCallback(async N=>{var E,S;if(N){a(!0),l(null);try{const _=await Ie.get(`/modules/${N}`);_.data.success?r(_.data.data):l(_.data.message||"Failed to fetch modules")}catch(_){console.error("Error fetching modules:",_),l(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Error fetching modules")}finally{a(!1)}}},[]),h=j.useRef(d);j.useEffect(()=>{h.current=d},[d]);const f=async(N,E)=>{var S,_;a(!0),l(null);try{const D=await Ie.post("/modules",{title:E.title,course:N,description:E.description});D.data.success?await h.current(N):l(D.data.message||"Failed to create module")}catch(D){console.error("Error creating module:",D),l(((_=(S=D.response)==null?void 0:S.data)==null?void 0:_.message)||"Error creating module")}finally{a(!1)}},m=async(N,E,S)=>{var _,D;a(!0),l(null);try{await Ie.put(`/modules/${N}`,E),await h.current(S)}catch(T){console.error("Error updating module:",T),l(((D=(_=T.response)==null?void 0:_.data)==null?void 0:D.message)||"Error updating module")}finally{a(!1)}},g=async N=>{var E,S;a(!0),l(null);try{const _={title:N.title,content:N.content};N.module&&(_.module=N.module),N.groupSet&&(_.groupSet=N.groupSet);const D=await Ie.post("/pages",_);if(D.data.success&&N.module){const T=t.find(P=>P._id===N.module);T&&await h.current(T.course)}D.data.success||l(D.data.message||"Failed to create page")}catch(_){console.error("Error creating page:",_),l(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Error creating page")}finally{a(!1)}},x=j.useCallback(async N=>{if(!N)return[];try{const E=await Ie.get(`/pages/${N}`);return E.data.success?E.data.data:(console.error("Failed to fetch pages:",E.data.message),[])}catch(E){return console.error("Error fetching pages:",E),[]}},[]),v=j.useRef(x);j.useEffect(()=>{v.current=x},[x]);const b=async N=>{try{const E=await Ie.get(`/pages/view/${N}`);if(E.data.success)return E.data.data;throw new Error(E.data.message||"Failed to fetch page")}catch(E){throw console.error("Error fetching page:",E),E}},w=async(N,E)=>{var S,_;a(!0),l(null);try{await Ie.delete(`/modules/${N}`),await h.current(E)}catch(D){console.error("Error deleting module:",D),l(((_=(S=D.response)==null?void 0:S.data)==null?void 0:_.message)||"Error deleting module")}finally{a(!1)}},C=async N=>{var E,S;try{const _=await Ie.patch(`/modules/${N}/publish`);_.data.success&&r(D=>D.map(T=>T._id===N?{...T,published:_.data.published}:T))}catch(_){console.error("Error toggling module publish status:",_),l(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Error toggling module publish status")}};return n.jsx(G4.Provider,{value:{modules:t,loading:s,error:i,getModules:h.current,createModule:f,updateModule:m,createPage:g,getPages:v.current,getPage:b,deleteModule:w,toggleModulePublish:C},children:e})},Ri=()=>{const e=j.useContext(G4);if(e===void 0)throw new Error("useModule must be used within a ModuleProvider");return e};function zt({children:e,allowedRoles:t}){const{user:r,loading:s}=Et(),a=Gs();return s?n.jsx("div",{children:"Loading..."}):r?t&&!t.includes(r.role)?n.jsx(Py,{to:"/unauthorized",replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(Py,{to:"/login",state:{from:a},replace:!0})}function SI(){var m,g;const[e,t]=j.useState(""),[r,s]=j.useState(""),[a,i]=j.useState(""),{login:l}=Et(),u=Lt(),h=((g=(m=Gs().state)==null?void 0:m.from)==null?void 0:g.pathname)||"/",f=async x=>{x.preventDefault();try{await l(e,r),u(h,{replace:!0})}catch{i("Failed to login. Please check your credentials.")}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",n.jsx(Mt,{to:"/signup",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"create a new account"})]})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[a&&n.jsx("div",{className:"rounded-md bg-red-50 p-4",children:n.jsx("div",{className:"text-sm text-red-700",children:a})}),n.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),n.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:x=>t(x.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),n.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:x=>s(x.target.value)})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})}function kI(){const[e,t]=j.useState(""),[r,s]=j.useState(""),[a,i]=j.useState(""),[l,u]=j.useState(""),[d,h]=j.useState("student"),[f,m]=j.useState([]),[g,x]=j.useState(""),{signup:v}=Et(),b=Lt(),w=async N=>{var E,S,_,D;N.preventDefault(),m([]),x("");try{await v(e,r,a,l,d),b("/")}catch(T){(S=(E=T.response)==null?void 0:E.data)!=null&&S.errors?m(T.response.data.errors):x(((D=(_=T.response)==null?void 0:_.data)==null?void 0:D.message)||"Failed to create an account.")}},C=N=>{var E;return(E=f.find(S=>S.field===N))==null?void 0:E.message};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",n.jsx(Mt,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"sign in to your account"})]})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[g&&n.jsx("div",{className:"rounded-md bg-red-50 p-4",children:n.jsx("div",{className:"text-sm text-red-700",children:g})}),n.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"first-name",className:"sr-only",children:"First Name"}),n.jsx("input",{id:"first-name",name:"firstName",type:"text",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("firstName")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"First Name",value:e,onChange:N=>t(N.target.value)}),C("firstName")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("firstName")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"last-name",className:"sr-only",children:"Last Name"}),n.jsx("input",{id:"last-name",name:"lastName",type:"text",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("lastName")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Last Name",value:r,onChange:N=>s(N.target.value)}),C("lastName")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("lastName")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),n.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("email")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Email address",value:a,onChange:N=>i(N.target.value)}),C("email")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("email")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),n.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border ${C("password")?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm`,placeholder:"Password",value:l,onChange:N=>u(N.target.value)}),C("password")&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:C("password")})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"sr-only",children:"Role"}),n.jsxs("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",value:d,onChange:N=>h(N.target.value),children:[n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign up"})})]})]})})}const q4=6048e5,CI=864e5,U4=6e4,W4=36e5,fd=43200,pN=1440,gN=Symbol.for("constructDateFrom");function nn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&gN in e?e[gN](t):e instanceof Date?new e.constructor(t):new Date(t)}function Yt(e,t){return nn(t||e,e)}function _I(e,t,r){const s=Yt(e,r==null?void 0:r.in);return isNaN(t)?nn(e,NaN):(s.setDate(s.getDate()+t),s)}function H4(e,t,r){const s=Yt(e,r==null?void 0:r.in);if(isNaN(t))return nn(e,NaN);if(!t)return s;const a=s.getDate(),i=nn(e,s.getTime());i.setMonth(s.getMonth()+t+1,0);const l=i.getDate();return a>=l?i:(s.setFullYear(i.getFullYear(),i.getMonth(),a),s)}let EI={};function Bc(){return EI}function bi(e,t){var u,d,h,f;const r=Bc(),s=(t==null?void 0:t.weekStartsOn)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,a=Yt(e,t==null?void 0:t.in),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Jd(e,t){return bi(e,{...t,weekStartsOn:1})}function V4(e,t){const r=Yt(e,t==null?void 0:t.in),s=r.getFullYear(),a=nn(r,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const i=Jd(a),l=nn(r,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const u=Jd(l);return r.getTime()>=i.getTime()?s+1:r.getTime()>=u.getTime()?s:s-1}function Zd(e){const t=Yt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function qo(e,...t){const r=nn.bind(null,e||t.find(s=>typeof s=="object"));return t.map(r)}function ef(e,t){const r=Yt(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function DI(e,t,r){const[s,a]=qo(r==null?void 0:r.in,e,t),i=ef(s),l=ef(a),u=+i-Zd(i),d=+l-Zd(l);return Math.round((u-d)/CI)}function AI(e,t){const r=V4(e,t),s=nn(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Jd(s)}function Pd(e,t){const r=+Yt(e)-+Yt(t);return r<0?-1:r>0?1:r}function Gb(e){return nn(e,Date.now())}function qb(e,t,r){const[s,a]=qo(r==null?void 0:r.in,e,t);return+ef(s)==+ef(a)}function TI(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function PI(e){return!(!TI(e)&&typeof e!="number"||isNaN(+Yt(e)))}function RI(e,t,r){const[s,a]=qo(r==null?void 0:r.in,e,t),i=s.getFullYear()-a.getFullYear(),l=s.getMonth()-a.getMonth();return i*12+l}function II(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function MI(e,t){return+Yt(e)-+Yt(t)}function OI(e,t){const r=Yt(e,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function zy(e,t){const r=Yt(e,t==null?void 0:t.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function $I(e,t){const r=Yt(e,t==null?void 0:t.in);return+OI(r,t)==+zy(r,t)}function LI(e,t,r){const[s,a,i]=qo(r==null?void 0:r.in,e,e,t),l=Pd(a,i),u=Math.abs(RI(a,i));if(u<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*u);let d=Pd(a,i)===-l;$I(s)&&u===1&&Pd(s,i)===1&&(d=!1);const h=l*(u-+d);return h===0?0:h}function FI(e,t,r){const s=MI(e,t)/1e3;return II(r==null?void 0:r.roundingMethod)(s)}function xN(e,t){const r=Yt(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function BI(e,t){const r=Yt(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function zI(e,t){const r=t==null?void 0:t.weekStartsOn,s=Yt(e,t==null?void 0:t.in),a=s.getDay(),i=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const GI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qI=(e,t,r)=>{let s;const a=GI[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function up(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const UI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VI={date:up({formats:UI,defaultWidth:"full"}),time:up({formats:WI,defaultWidth:"full"}),dateTime:up({formats:HI,defaultWidth:"full"})},YI={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KI=(e,t,r,s)=>YI[e];function Rl(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):l;a=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const QI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZI={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rM=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},nM={ordinalNumber:rM,era:Rl({values:QI,defaultWidth:"wide"}),quarter:Rl({values:XI,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Rl({values:JI,defaultWidth:"wide"}),day:Rl({values:ZI,defaultWidth:"wide"}),dayPeriod:Rl({values:eM,defaultWidth:"wide",formattingValues:tM,defaultFormattingWidth:"wide"})};function Il(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?aM(u,m=>m.test(l)):sM(u,m=>m.test(l));let h;h=e.valueCallback?e.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const f=t.slice(l.length);return{value:h,rest:f}}}function sM(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function aM(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function iM(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const u=t.slice(a.length);return{value:l,rest:u}}}const oM=/^(\d+)(th|st|nd|rd)?/i,lM=/\d+/i,cM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uM={any:[/^b/i,/^(a|c)/i]},dM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fM={any:[/1/i,/2/i,/3/i,/4/i]},mM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bM={ordinalNumber:iM({matchPattern:oM,parsePattern:lM,valueCallback:e=>parseInt(e,10)}),era:Il({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:uM,defaultParseWidth:"any"}),quarter:Il({matchPatterns:dM,defaultMatchWidth:"wide",parsePatterns:fM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Il({matchPatterns:mM,defaultMatchWidth:"wide",parsePatterns:hM,defaultParseWidth:"any"}),day:Il({matchPatterns:pM,defaultMatchWidth:"wide",parsePatterns:gM,defaultParseWidth:"any"}),dayPeriod:Il({matchPatterns:xM,defaultMatchWidth:"any",parsePatterns:yM,defaultParseWidth:"any"})},Ub={code:"en-US",formatDistance:qI,formatLong:VI,formatRelative:KI,localize:nM,match:bM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vM(e,t){const r=Yt(e,t==null?void 0:t.in);return DI(r,BI(r))+1}function wM(e,t){const r=Yt(e,t==null?void 0:t.in),s=+Jd(r)-+AI(r);return Math.round(s/q4)+1}function Y4(e,t){var f,m,g,x;const r=Yt(e,t==null?void 0:t.in),s=r.getFullYear(),a=Bc(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=nn((t==null?void 0:t.in)||e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const u=bi(l,t),d=nn((t==null?void 0:t.in)||e,0);d.setFullYear(s,0,i),d.setHours(0,0,0,0);const h=bi(d,t);return+r>=+u?s+1:+r>=+h?s:s-1}function jM(e,t){var u,d,h,f;const r=Bc(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=Y4(e,t),i=nn((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),bi(i,t)}function NM(e,t){const r=Yt(e,t==null?void 0:t.in),s=+bi(r,t)-+jM(r,t);return Math.round(s/q4)+1}function Vt(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const Ca={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Vt(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Vt(r+1,2)},d(e,t){return Vt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Vt(e.getHours()%12||12,t.length)},H(e,t){return Vt(e.getHours(),t.length)},m(e,t){return Vt(e.getMinutes(),t.length)},s(e,t){return Vt(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Vt(a,t.length)}},fo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yN={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Ca.y(e,t)},Y:function(e,t,r,s){const a=Y4(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return Vt(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Vt(i,t.length)},R:function(e,t){const r=V4(e);return Vt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Vt(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Vt(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Vt(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return Ca.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Vt(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=NM(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Vt(a,t.length)},I:function(e,t,r){const s=wM(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Vt(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ca.d(e,t)},D:function(e,t,r){const s=vM(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Vt(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Vt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Vt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Vt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=fo.noon:s===0?a=fo.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=fo.evening:s>=12?a=fo.afternoon:s>=4?a=fo.morning:a=fo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Ca.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ca.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Vt(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Vt(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ca.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ca.s(e,t)},S:function(e,t){return Ca.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return vN(s);case"XXXX":case"XX":return li(s);case"XXXXX":case"XXX":default:return li(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return vN(s);case"xxxx":case"xx":return li(s);case"xxxxx":case"xxx":default:return li(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bN(s,":");case"OOOO":default:return"GMT"+li(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bN(s,":");case"zzzz":default:return"GMT"+li(s,":")}},t:function(e,t,r){const s=Math.trunc(+e/1e3);return Vt(s,t.length)},T:function(e,t,r){return Vt(+e,t.length)}};function bN(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Vt(i,2)}function vN(e,t){return e%60===0?(e>0?"-":"+")+Vt(Math.abs(e)/60,2):li(e,t)}function li(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Vt(Math.trunc(s/60),2),i=Vt(s%60,2);return r+a+t+i}const wN=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},K4=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},SM=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return wN(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",wN(s,t)).replace("{{time}}",K4(a,t))},kM={p:K4,P:SM},CM=/^D+$/,_M=/^Y+$/,EM=["D","DD","YY","YYYY"];function DM(e){return CM.test(e)}function AM(e){return _M.test(e)}function TM(e,t,r){const s=PM(e,t,r);if(console.warn(s),EM.includes(e))throw new RangeError(s)}function PM(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MM=/^'([^]*?)'?$/,OM=/''/g,$M=/[a-zA-Z]/;function Ut(e,t,r){var f,m,g,x,v,b,w,C;const s=Bc(),a=(r==null?void 0:r.locale)??s.locale??Ub,i=(r==null?void 0:r.firstWeekContainsDate)??((m=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((b=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??s.weekStartsOn??((C=(w=s.locale)==null?void 0:w.options)==null?void 0:C.weekStartsOn)??0,u=Yt(e,r==null?void 0:r.in);if(!PI(u))throw new RangeError("Invalid time value");let d=t.match(IM).map(N=>{const E=N[0];if(E==="p"||E==="P"){const S=kM[E];return S(N,a.formatLong)}return N}).join("").match(RM).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const E=N[0];if(E==="'")return{isToken:!1,value:LM(N)};if(yN[E])return{isToken:!0,value:N};if(E.match($M))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(d=a.localize.preprocessor(u,d));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return d.map(N=>{if(!N.isToken)return N.value;const E=N.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&AM(E)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&DM(E))&&TM(E,t,String(e));const S=yN[E[0]];return S(u,E,a.localize,h)}).join("")}function LM(e){const t=e.match(MM);return t?t[1].replace(OM,"'"):e}function FM(e,t,r){const s=Bc(),a=(r==null?void 0:r.locale)??s.locale??Ub,i=2520,l=Pd(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[d,h]=qo(r==null?void 0:r.in,...l>0?[t,e]:[e,t]),f=FI(h,d),m=(Zd(h)-Zd(d))/1e3,g=Math.round((f-m)/60);let x;if(g<2)return r!=null&&r.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,u):f<10?a.formatDistance("lessThanXSeconds",10,u):f<20?a.formatDistance("lessThanXSeconds",20,u):f<40?a.formatDistance("halfAMinute",0,u):f<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):g===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",g,u);if(g<45)return a.formatDistance("xMinutes",g,u);if(g<90)return a.formatDistance("aboutXHours",1,u);if(g<pN){const v=Math.round(g/60);return a.formatDistance("aboutXHours",v,u)}else{if(g<i)return a.formatDistance("xDays",1,u);if(g<fd){const v=Math.round(g/pN);return a.formatDistance("xDays",v,u)}else if(g<fd*2)return x=Math.round(g/fd),a.formatDistance("aboutXMonths",x,u)}if(x=LI(h,d),x<12){const v=Math.round(g/fd);return a.formatDistance("xMonths",v,u)}else{const v=x%12,b=Math.trunc(x/12);return v<3?a.formatDistance("aboutXYears",b,u):v<9?a.formatDistance("overXYears",b,u):a.formatDistance("almostXYears",b+1,u)}}function mn(e,t){return FM(e,Gb(e),t)}function BM(e,t){return Yt(e,t==null?void 0:t.in).getDay()}function jN(e,t){const r=Yt(e,t==null?void 0:t.in),s=r.getFullYear(),a=r.getMonth(),i=nn(r,0);return i.setFullYear(s,a+1,0),i.setHours(0,0,0,0),i.getDate()}function zM(e,t,r){const[s,a]=qo(r==null?void 0:r.in,e,t);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()}function GM(e,t){return qb(nn(e,e),Gb(e))}function qM(e,t,r){const s=+Yt(e,r==null?void 0:r.in),[a,i]=[+Yt(t.start,r==null?void 0:r.in),+Yt(t.end,r==null?void 0:r.in)].sort((l,u)=>l-u);return s>=a&&s<=i}function UM(e,t,r){return _I(e,-1,r)}function WM(e,t){return qb(nn(e,e),UM(Gb(e)))}function Q4(e,t){const r=()=>nn(t==null?void 0:t.in,NaN),a=KM(e);let i;if(a.date){const h=QM(a.date,2);i=XM(h.restDateString,h.year)}if(!i||isNaN(+i))return r();const l=+i;let u=0,d;if(a.time&&(u=JM(a.time),isNaN(u)))return r();if(a.timezone){if(d=ZM(a.timezone),isNaN(d))return r()}else{const h=new Date(l+u),f=Yt(0,t==null?void 0:t.in);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}return Yt(l+u+d,t==null?void 0:t.in)}const md={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},HM=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,VM=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,YM=/^([+-])(\d{2})(?::?(\d{2}))?$/;function KM(e){const t={},r=e.split(md.dateTimeDelimiter);let s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],md.timeZoneDelimiter.test(t.date)&&(t.date=e.split(md.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=md.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function QM(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function XM(e,t){if(t===null)return new Date(NaN);const r=e.match(HM);if(!r)return new Date(NaN);const s=!!r[4],a=Ml(r[1]),i=Ml(r[2])-1,l=Ml(r[3]),u=Ml(r[4]),d=Ml(r[5])-1;if(s)return sO(t,u,d)?eO(t,u,d):new Date(NaN);{const h=new Date(0);return!rO(t,i,l)||!nO(t,a)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(a,l)),h)}}function Ml(e){return e?parseInt(e):1}function JM(e){const t=e.match(VM);if(!t)return NaN;const r=dp(t[1]),s=dp(t[2]),a=dp(t[3]);return aO(r,s,a)?r*W4+s*U4+a*1e3:NaN}function dp(e){return e&&parseFloat(e.replace(",","."))||0}function ZM(e){if(e==="Z")return 0;const t=e.match(YM);if(!t)return 0;const r=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return iO(s,a)?r*(s*W4+a*U4):NaN}function eO(e,t,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,i=(t-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+i),s}const tO=[31,null,31,30,31,30,31,31,30,31,30,31];function X4(e){return e%400===0||e%4===0&&e%100!==0}function rO(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(tO[t]||(X4(e)?29:28))}function nO(e,t){return t>=1&&t<=(X4(e)?366:365)}function sO(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function aO(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function iO(e,t){return t>=0&&t<=59}function oO(e,t,r){return H4(e,-1,r)}const J4=()=>{const{user:e}=Et(),[t,r]=j.useState([]),[s,a]=j.useState(!1),[i,l]=j.useState(null),[u,d]=j.useState([]),[h,f]=j.useState(!1),[m,g]=j.useState(null),[x,v]=j.useState([]),[b,w]=j.useState(!1),[C,N]=j.useState(null),[E,S]=j.useState(0),_=(e==null?void 0:e.role)==="teacher"||(e==null?void 0:e.role)==="admin";j.useEffect(()=>{_?(async()=>{a(!0),l(null);try{const M=await Ie.get("/assignments/todo/ungraded");r(M.data)}catch{l("Failed to load To-Do assignments")}finally{a(!1)}})():(async()=>{w(!0),N(null);try{const M=await Ie.get("/assignments/todo/due");v(M.data)}catch{N("Failed to load assignments due this week")}finally{w(!1)}})()},[_,E]),j.useEffect(()=>{(async()=>{f(!0),g(null);try{const M=await Ie.get("/todos");d(M.data)}catch{g("Failed to load personal to-dos")}finally{f(!1)}})()},[]),j.useEffect(()=>{const L=()=>{setTimeout(()=>{P()},500)};return window.addEventListener("assignmentSubmitted",L),()=>{window.removeEventListener("assignmentSubmitted",L)}},[]);const D=async L=>{await Ie.delete(`/todos/${L}`),d(M=>M.filter(W=>W._id!==L))},T=async L=>{try{await Ie.delete(`/todos/${L._id}`),d(M=>M.filter(W=>W._id!==L._id)),window.location.href=`/courses/${L.courseId}/students`}catch(M){console.error("Error removing enrollment notification:",M)}},P=()=>{S(L=>L+1)},O=new Date,F=bi(O,{weekStartsOn:1}),$=zI(O,{weekStartsOn:1}),z=u.filter(L=>{const M=typeof L.dueDate=="string"?Q4(L.dueDate):new Date(L.dueDate);return qM(M,{start:F,end:$})}),q=z.filter(L=>L.type==="enrollment_request"&&L.action==="pending"),H=z.filter(L=>L.type==="enrollment_summary"),re=z.filter(L=>L.type==="waitlist_promotion"),ee=z.filter(L=>L.type!=="enrollment_request"&&L.type!=="enrollment_summary"&&L.type!=="waitlist_promotion");return n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-gray-200",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"To Do"}),H.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Enrollment Updates"}),n.jsx("ul",{className:"space-y-2",children:H.map(L=>n.jsx("li",{className:"p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors cursor-pointer",onClick:()=>T(L),children:n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium text-gray-800",children:[L.enrollmentCount," student",L.enrollmentCount!==1?"s":""," enrolled in ",L.courseName]}),L.dueDate&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:new Date(L.dueDate).toLocaleDateString()})]})},L._id))})]}),re.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Waitlist Promotions"}),n.jsx("ul",{className:"space-y-2",children:re.map(L=>n.jsx("li",{className:"p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors cursor-pointer",onClick:()=>T(L),children:n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-800",children:L.title}),L.dueDate&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:new Date(L.dueDate).toLocaleDateString()})]})},L._id))})]}),q.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Enrollment Requests"}),n.jsx("ul",{className:"space-y-2",children:q.map(L=>n.jsx("li",{className:"p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",onClick:()=>window.location.href=`/courses/${L.courseId}/students`,children:n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-800",children:L.title}),L.dueDate&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:new Date(L.dueDate).toLocaleDateString()})]})},L._id))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"My To Do"}),h?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):m?n.jsx("div",{className:"text-red-500",children:m}):ee.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No personal to-dos"}):n.jsx("ul",{className:"space-y-2",children:ee.map(L=>n.jsxs("li",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"font-medium text-gray-800",children:L.title}),L.dueDate&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:new Date(L.dueDate).toLocaleDateString()})]}),n.jsx("button",{className:"text-xs bg-green-100 text-green-700 rounded px-2 py-1 hover:bg-green-200 transition-colors",onClick:()=>D(L._id),children:"Done"})]},L._id))})]}),_?n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Ungraded Assignments"}),s?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):i?n.jsx("div",{className:"text-red-500",children:i}):t.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No ungraded assignments"}):n.jsx("ul",{className:"space-y-3",children:t.map(L=>n.jsx("li",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsxs(Mt,{to:`/assignments/${L.id}/grade`,className:"block",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"font-medium text-gray-800",title:L.title,children:L.title.length>30?L.title.slice(0,30)+"...":L.title}),n.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 rounded px-2 py-1",children:[L.ungradedCount," to grade"]})]}),n.jsx("div",{className:"text-sm text-gray-500",children:L.course.title})]})},L.id))})]}):n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-3",children:"Assignments Due This Week"}),b?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):C?n.jsx("div",{className:"text-red-500",children:C}):x.length===0?n.jsx("div",{className:"text-gray-500 text-sm italic",children:"No assignments due this week"}):n.jsx("ul",{className:"space-y-3",children:x.map(L=>{var M,W;return n.jsx("li",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsxs(Mt,{to:`/assignments/${L._id}/view`,className:"block",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"font-medium text-gray-800",title:L.title,children:L.title.length>30?L.title.slice(0,30)+"...":L.title}),n.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 rounded px-2 py-1",children:["Due ",new Date(L.dueDate).toLocaleDateString()]})]}),n.jsx("div",{className:"text-sm text-gray-500",children:((W=(M=L.module)==null?void 0:M.course)==null?void 0:W.title)||""})]})},L._id)})})]})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cO=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),NN=e=>{const t=cO(e);return t.charAt(0).toUpperCase()+t.slice(1)},Z4=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),uO=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...u},d)=>j.createElement("svg",{ref:d,...dO,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Z4("lucide",a),...!i&&!uO(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,f])=>j.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const r=j.forwardRef(({className:s,...a},i)=>j.createElement(fO,{ref:i,iconNode:t,className:Z4(`lucide-${lO(NN(e))}`,`lucide-${e}`,s),...a}));return r.displayName=NN(e),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],bo=Xe("activity",mO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],pO=Xe("archive",hO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],xO=Xe("arrow-down",gO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bO=Xe("arrow-right",yO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],wO=Xe("arrow-up",vO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fp=Xe("award",jO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],SN=Xe("bell",NO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],eD=Xe("book-open-check",SO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],or=Xe("book-open",kO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],_a=Xe("bookmark",CO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zc=Xe("calendar",_O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gn=Xe("chart-column",EO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wb=Xe("chevron-down",DO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Gy=Xe("chevron-left",AO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tD=Xe("chevron-right",TO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RO=Xe("chevron-up",PO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uo=Xe("circle-alert",IO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bn=Xe("circle-check-big",MO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],rD=Xe("circle-minus",OO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ms=Xe("circle-x",$O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kN=Xe("circle",LO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],aa=Xe("clipboard-list",FO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$f=Xe("clock",BO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Hb=Xe("database",zO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Rd=Xe("download",GO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],qy=Xe("ellipsis-vertical",qO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],nD=Xe("external-link",UO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lc=Xe("eye-off",WO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],No=Xe("eye",HO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Tn=Xe("file-text",VO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],KO=Xe("file",YO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sD=Xe("funnel",QO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],JO=Xe("gauge",XO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],e$=Xe("grip-vertical",ZO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],aD=Xe("house",t$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],n$=Xe("inbox",r$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],a$=Xe("info",s$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],o$=Xe("key",i$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],iD=Xe("lightbulb",l$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],cc=Xe("lock-open",c$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],So=Xe("lock",u$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],f$=Xe("log-out",d$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],ia=Xe("megaphone",m$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Er=Xe("message-square",h$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],hd=Xe("palette",p$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],x$=Xe("panels-top-left",g$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],b$=Xe("paperclip",y$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],oD=Xe("pen-line",v$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Ii=Xe("pen-tool",w$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],mp=Xe("pencil",j$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],CN=Xe("pin",N$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ra=Xe("plus",S$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tf=Xe("refresh-cw",k$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],uc=Xe("reply",C$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],E$=Xe("rotate-ccw",_$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vb=Xe("save",D$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Mi=Xe("search",A$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rf=Xe("send",T$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Is=Xe("settings",P$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hi=Xe("shield",R$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],_N=Xe("sparkles",I$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ls=Xe("square-check-big",M$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$$=Xe("square-check",O$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gc=Xe("square-pen",L$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],B$=Xe("star",F$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Yb=Xe("thumbs-up",z$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ls=Xe("trash-2",G$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dc=Xe("triangle-alert",q$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Uy=Xe("user-check",U$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Fa=Xe("user-plus",W$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],pd=Xe("user-x",H$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ko=Xe("user",V$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wt=Xe("users",Y$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Hl=Xe("vote",K$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Co=Xe("x",Q$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],J$=Xe("zap",X$),EN=[{name:"Olive Green",value:"#556B2F"},{name:"Sage Green",value:"#9CAF88"},{name:"Terra Cotta",value:"#E2725B"},{name:"Warm Brown",value:"#8B4513"},{name:"Moss Green",value:"#606C38"},{name:"Clay Brown",value:"#D2691E"},{name:"Forest Green",value:"#228B22"},{name:"Earth Red",value:"#CD5C5C"},{name:"Sand Beige",value:"#F4A460"},{name:"Deep Brown",value:"#654321"}],hp=[{id:"announcements",name:"Announcements",icon:ia,color:"text-gray-600"},{id:"modules",name:"Modules",icon:or,color:"text-gray-600"},{id:"pages",name:"Pages",icon:KO,color:"text-gray-600"},{id:"discussions",name:"Discussions",icon:Er,color:"text-gray-600"}];function Z$(){const{courses:e,loading:t,error:r}=Go(),{user:s}=Et(),a=Lt(),[i,l]=j.useState(()=>{const T=localStorage.getItem("courseColors");return T?JSON.parse(T):{}}),[u,d]=j.useState(null),[h,f]=j.useState(()=>{const T=localStorage.getItem("courseIcons");return T?JSON.parse(T):{}}),[m,g]=j.useState(null),x=j.useRef(null),v=(s==null?void 0:s.role)==="teacher"||(s==null?void 0:s.role)==="admin";if(j.useEffect(()=>{const T=P=>{x.current&&!x.current.contains(P.target)&&(d(null),g(null))};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),t)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(r)return n.jsx("div",{className:"text-red-500 text-center p-4",children:r});const b=e.filter(T=>T.published),w=e.filter(T=>!T.published),C=T=>{a(`/courses/${T}`)},N=(T,P)=>{const O={...i,[T]:P};l(O),localStorage.setItem("courseColors",JSON.stringify(O)),d(null)},E=T=>i[T]||"#556B2F",S=T=>h[T]||["announcements","pages","discussions"],_=(T,P)=>{const O=S(T),F=O.includes(P);let $;if(F)$=O.filter(q=>q!==P);else if(O.length<3)$=[...O,P];else return;const z={...h,[T]:$};f(z),localStorage.setItem("courseIcons",JSON.stringify(z))},D=(T,P)=>{const O=hp.find($=>$.id===T);if(!O)return null;const F=O.icon;return n.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",onClick:$=>{switch($.stopPropagation(),T){case"announcements":a(`/courses/${P}/announcements`);break;case"modules":a(`/courses/${P}/modules`);break;case"pages":a(`/courses/${P}/pages`);break;case"discussions":a(`/courses/${P}/discussions`);break;default:a(`/courses/${P}`)}},children:n.jsx(F,{className:"h-5 w-5 text-gray-600"})},T)};return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"container mx-auto px-6 py-8 flex flex-col lg:flex-row gap-8",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Dashboard"}),n.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",s==null?void 0:s.firstName,"!"]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v?n.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Published Courses (",b.length,")"]}):n.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"My Courses"}),v&&n.jsx(Mt,{to:"/courses/create",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Create Course"})]}),b.length===0?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No published courses"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(T=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ml-4 border border-gray-100",onClick:()=>C(T._id),children:[n.jsx("div",{className:"h-48 relative",style:{backgroundColor:E(T._id)},children:n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:P=>{P.stopPropagation(),d(u===T._id?null:T._id),g(null)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:n.jsx(qy,{className:"h-5 w-5 text-white"})}),u===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(hd,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Choose Color"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:EN.map(P=>n.jsx("button",{onClick:O=>{O.stopPropagation(),N(T._id,P.value)},className:"w-8 h-8 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-colors",style:{backgroundColor:P.value},title:P.name},P.value))}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:P=>{P.stopPropagation(),d(null),g(m===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Is,{className:"h-4 w-4"}),n.jsx("span",{children:"Display Icons"})]})]}),m===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Is,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Display Icons (Max 3)"})]}),n.jsx("div",{className:"space-y-2",children:hp.map(P=>{const O=P.icon,F=S(T._id).includes(P.id),$=!F&&S(T._id).length>=3;return n.jsxs("button",{onClick:z=>{z.stopPropagation(),$||_(T._id,P.id)},className:`flex items-center gap-2 w-full text-left p-2 rounded transition-colors ${F?"bg-blue-50 text-blue-700":$?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-50"}`,disabled:$,children:[n.jsx(O,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:P.name}),F&&n.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Selected"})]},P.id)})}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:P=>{P.stopPropagation(),g(null),d(u===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(hd,{className:"h-4 w-4"}),n.jsx("span",{children:"Choose Color"})]})]})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("h2",{className:"font-bold text-lg mb-1",style:{color:E(T._id)},children:T.title}),n.jsxs("p",{className:"text-gray-500 text-sm",children:["Instructor: ",T.instructor.firstName," ",T.instructor.lastName]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[S(T._id).map(P=>D(P,T._id)),Array.from({length:3-S(T._id).length}).map((P,O)=>n.jsx("div",{className:"w-9 h-9"},O))]})]})]},T._id))})]}),v&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-700 mb-6",children:["Unpublished Courses (",w.length,")"]}),w.length===0?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No unpublished courses"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(T=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100",onClick:()=>C(T._id),children:[n.jsx("div",{className:"h-48 relative bg-gradient-to-br",style:{background:`linear-gradient(135deg, ${E(T._id)} 0%, ${E(T._id)}dd 100%)`},children:n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:P=>{P.stopPropagation(),d(u===T._id?null:T._id),g(null)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:n.jsx(qy,{className:"h-5 w-5 text-white"})}),u===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(hd,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Choose Color"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:EN.map(P=>n.jsx("button",{onClick:O=>{O.stopPropagation(),N(T._id,P.value)},className:"w-8 h-8 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-colors",style:{backgroundColor:P.value},title:P.name},P.value))}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:P=>{P.stopPropagation(),d(null),g(m===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(Is,{className:"h-4 w-4"}),n.jsx("span",{children:"Display Icons"})]})]}),m===T._id&&n.jsxs("div",{className:"absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-10 min-w-48",ref:x,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Is,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Display Icons (Max 3)"})]}),n.jsx("div",{className:"space-y-2",children:hp.map(P=>{const O=P.icon,F=S(T._id).includes(P.id),$=!F&&S(T._id).length>=3;return n.jsxs("button",{onClick:z=>{z.stopPropagation(),$||_(T._id,P.id)},className:`flex items-center gap-2 w-full text-left p-2 rounded transition-colors ${F?"bg-blue-50 text-blue-700":$?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-50"}`,disabled:$,children:[n.jsx(O,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:P.name}),F&&n.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Selected"})]},P.id)})}),n.jsx("hr",{className:"my-2"}),n.jsxs("button",{onClick:P=>{P.stopPropagation(),g(null),d(u===T._id?null:T._id)},className:"flex items-center gap-2 w-full text-left text-sm text-gray-700 hover:bg-gray-50 p-2 rounded",children:[n.jsx(hd,{className:"h-4 w-4"}),n.jsx("span",{children:"Choose Color"})]})]})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h2",{className:"font-bold text-xl mb-2",style:{color:E(T._id)},children:T.title}),n.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),"Instructor: ",T.instructor.firstName," ",T.instructor.lastName]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[S(T._id).map(P=>D(P,T._id)),Array.from({length:3-S(T._id).length}).map((P,O)=>n.jsx("div",{className:"w-9 h-9"},O))]})]})]},T._id))})]})]}),n.jsx("aside",{className:"w-full lg:w-96 flex-shrink-0",children:n.jsx(J4,{})})]})})}function eL(){const{user:e}=Et(),[t,r]=j.useState({totalUsers:0,totalCourses:0,activeUsers:0,totalAssignments:0,systemHealth:"good",storageUsed:0,storageTotal:1e3}),[s,a]=j.useState([]),[i,l]=j.useState(!0);j.useEffect(()=>{setTimeout(()=>{r({totalUsers:1247,totalCourses:89,activeUsers:892,totalAssignments:156,systemHealth:"excellent",storageUsed:234,storageTotal:1e3}),a([{id:"1",type:"user_registration",description:"New student registered: John Doe",timestamp:"2 minutes ago",severity:"low"},{id:"2",type:"course_creation",description:"New course created: Advanced Mathematics",timestamp:"15 minutes ago",severity:"medium"},{id:"3",type:"system_alert",description:"High storage usage detected",timestamp:"1 hour ago",severity:"high"}]),l(!1)},1e3)},[]);const u=f=>{switch(f){case"excellent":return"text-green-500";case"good":return"text-blue-500";case"warning":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},d=f=>{switch(f){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=f=>{switch(f){case"user_registration":return n.jsx(Uy,{className:"w-4 h-4"});case"course_creation":return n.jsx(or,{className:"w-4 h-4"});case"assignment_submission":return n.jsx(Tn,{className:"w-4 h-4"});case"system_alert":return n.jsx(dc,{className:"w-4 h-4"});default:return n.jsx(bo,{className:"w-4 h-4"})}};return i?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System overview and administrative controls"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${u(t.systemHealth)}`}),n.jsxs("span",{className:"text-sm text-gray-600",children:["System Status: ",t.systemHealth]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Wt,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers.toLocaleString()})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(or,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Courses"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalCourses})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(bo,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeUsers})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tn,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Assignments"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalAssignments})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Storage Usage"}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["Used: ",t.storageUsed,"GB / ",t.storageTotal,"GB"]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(t.storageUsed/t.storageTotal*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.storageUsed/t.storageTotal*100}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(Mt,{to:"/admin/users",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Wt,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage users, roles, and permissions"})]})]})}),n.jsx(Mt,{to:"/admin/courses",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(or,{className:"w-8 h-8 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Oversight"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Monitor and manage all courses"})]})]})}),n.jsx(Mt,{to:"/admin/analytics",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(gn,{className:"w-8 h-8 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics"}),n.jsx("p",{className:"text-sm text-gray-600",children:"System analytics and reports"})]})]})}),n.jsx(Mt,{to:"/admin/system",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Is,{className:"w-8 h-8 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Settings"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Configure system parameters"})]})]})}),n.jsx(Mt,{to:"/admin/security",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:n.jsx(hi,{className:"w-8 h-8 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Security settings and monitoring"})]})]})}),n.jsx(Mt,{to:"/admin/backup",className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:n.jsx(Hb,{className:"w-8 h-8 text-indigo-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup & Recovery"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Data backup and system recovery"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:s.map(f=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:`p-2 rounded-lg ${d(f.severity)}`,children:h(f.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.description}),n.jsx("p",{className:"text-xs text-gray-500",children:f.timestamp})]})]},f.id))})]})]})}function tL(){const[e,t]=j.useState([]),[r,s]=j.useState([]),[a,i]=j.useState(!0),[l,u]=j.useState(""),[d,h]=j.useState("all"),[f,m]=j.useState("all"),[g,x]=j.useState(null),[v,b]=j.useState(!1);j.useEffect(()=>{setTimeout(()=>{const _=[{_id:"1",firstName:"John",lastName:"Doe",email:"john.doe@example.com",role:"student",status:"active",lastLogin:"2024-01-15T10:30:00Z",createdAt:"2024-01-01T00:00:00Z"},{_id:"2",firstName:"Jane",lastName:"Smith",email:"jane.smith@example.com",role:"teacher",status:"active",lastLogin:"2024-01-15T09:15:00Z",createdAt:"2023-12-15T00:00:00Z"},{_id:"3",firstName:"Bob",lastName:"Johnson",email:"bob.johnson@example.com",role:"admin",status:"active",lastLogin:"2024-01-15T08:45:00Z",createdAt:"2023-11-01T00:00:00Z"},{_id:"4",firstName:"Alice",lastName:"Brown",email:"alice.brown@example.com",role:"student",status:"inactive",lastLogin:"2024-01-10T14:20:00Z",createdAt:"2024-01-05T00:00:00Z"}];t(_),s(_),i(!1)},1e3)},[]),j.useEffect(()=>{let _=e;l&&(_=_.filter(D=>D.firstName.toLowerCase().includes(l.toLowerCase())||D.lastName.toLowerCase().includes(l.toLowerCase())||D.email.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(_=_.filter(D=>D.role===d)),f!=="all"&&(_=_.filter(D=>D.status===f)),s(_)},[e,l,d,f]);const w=_=>{switch(_){case"admin":return"bg-red-100 text-red-800";case"teacher":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},C=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=_=>{switch(_){case"active":return n.jsx(Uy,{className:"w-4 h-4"});case"inactive":return n.jsx(pd,{className:"w-4 h-4"});case"suspended":return n.jsx(pd,{className:"w-4 h-4"});default:return n.jsx(pd,{className:"w-4 h-4"})}},E=_=>new Date(_).toLocaleDateString(),S=(_,D)=>{switch(_){case"edit":x(D),b(!0);break;case"delete":confirm(`Are you sure you want to delete ${D.firstName} ${D.lastName}?`)&&t(e.filter(T=>T._id!==D._id));break;case"suspend":t(e.map(T=>T._id===D._id?{...T,status:"suspended"}:T));break;case"activate":t(e.map(T=>T._id===D._id?{...T,status:"active"}:T));break}};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage users, roles, and permissions"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wt,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," users"]})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:_=>u(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),n.jsxs("select",{value:d,onChange:_=>h(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{value:f,onChange:_=>m(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add User"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(_=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsxs("div",{className:"relative",children:[_.profilePicture?n.jsx("img",{className:"h-10 w-10 rounded-full object-cover border-2 border-gray-200",src:_.profilePicture.startsWith("http")?_.profilePicture:`http://localhost:5000${_.profilePicture}`,alt:`${_.firstName} ${_.lastName}`,onError:D=>{D.currentTarget.style.display="none";const T=D.currentTarget.nextElementSibling;T&&(T.style.display="flex")}}):null,n.jsx("div",{className:`h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center ${_.profilePicture?"hidden":""}`,style:{display:_.profilePicture?"none":"flex"},children:n.jsxs("span",{className:"text-blue-600 font-semibold",children:[_.firstName.charAt(0),_.lastName.charAt(0)]})})]})}),n.jsxs("div",{className:"ml-4",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_.firstName," ",_.lastName]}),n.jsx("div",{className:"text-sm text-gray-500",children:_.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(_.role)}`,children:_.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[N(_.status),n.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(_.status)}`,children:_.status})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.lastLogin?E(_.lastLogin):"Never"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(_.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>S("edit",_),className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gc,{className:"w-4 h-4"})}),_.status==="active"?n.jsx("button",{onClick:()=>S("suspend",_),className:"text-yellow-600 hover:text-yellow-900",children:n.jsx(pd,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>S("activate",_),className:"text-green-600 hover:text-green-900",children:n.jsx(Uy,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S("delete",_),className:"text-red-600 hover:text-red-900",children:n.jsx(ls,{className:"w-4 h-4"})})]})})]},_._id))})]})})}),v&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),n.jsx("input",{type:"text",defaultValue:g.firstName,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),n.jsx("input",{type:"text",defaultValue:g.lastName,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",defaultValue:g.email,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),n.jsxs("select",{defaultValue:g.role,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"teacher",children:"Teacher"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{defaultValue:g.status,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})]})}function rL(){const[e,t]=j.useState({userGrowth:[],courseEngagement:[],systemUsage:[],topCourses:[],recentActivity:[]}),[r,s]=j.useState(!0),[a,i]=j.useState("30d"),[l,u]=j.useState("users");return j.useEffect(()=>{setTimeout(()=>{t({userGrowth:[{month:"Jan",users:120},{month:"Feb",users:150},{month:"Mar",users:180},{month:"Apr",users:220},{month:"May",users:280},{month:"Jun",users:320}],courseEngagement:[{course:"Mathematics 101",students:45,assignments:12},{course:"English Literature",students:38,assignments:8},{course:"Computer Science",students:52,assignments:15},{course:"History",students:29,assignments:6},{course:"Physics",students:41,assignments:10}],systemUsage:[{date:"2024-01-01",activeUsers:892,storageUsed:234},{date:"2024-01-02",activeUsers:945,storageUsed:238},{date:"2024-01-03",activeUsers:878,storageUsed:241},{date:"2024-01-04",activeUsers:1023,storageUsed:245},{date:"2024-01-05",activeUsers:967,storageUsed:248}],topCourses:[{name:"Mathematics 101",enrollment:45,completion:38},{name:"English Literature",enrollment:38,completion:32},{name:"Computer Science",enrollment:52,completion:45},{name:"History",enrollment:29,completion:25},{name:"Physics",enrollment:41,completion:35}],recentActivity:[{type:"user_registration",description:"New student registered",timestamp:"2 minutes ago"},{type:"course_creation",description:"New course created: Advanced Physics",timestamp:"15 minutes ago"},{type:"assignment_submission",description:"High submission rate detected",timestamp:"1 hour ago"},{type:"system_alert",description:"Storage usage alert",timestamp:"2 hours ago"}]}),s(!1)},1e3)},[]),r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"System performance and user engagement insights"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("select",{value:a,onChange:d=>i(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"7d",children:"Last 7 days"}),n.jsx("option",{value:"30d",children:"Last 30 days"}),n.jsx("option",{value:"90d",children:"Last 90 days"}),n.jsx("option",{value:"1y",children:"Last year"})]}),n.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Rd,{className:"w-4 h-4"}),n.jsx("span",{children:"Export Report"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"1,247"}),n.jsx("p",{className:"text-sm text-green-600",children:"+12% from last month"})]}),n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Wt,{className:"w-6 h-6 text-blue-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"89"}),n.jsx("p",{className:"text-sm text-green-600",children:"+5% from last month"})]}),n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(or,{className:"w-6 h-6 text-green-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Daily Active Users"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"892"}),n.jsx("p",{className:"text-sm text-green-600",children:"+8% from last week"})]}),n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(bo,{className:"w-6 h-6 text-purple-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Storage Used"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"234 GB"}),n.jsx("p",{className:"text-sm text-yellow-600",children:"23% of total"})]}),n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(gn,{className:"w-6 h-6 text-orange-600"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Growth"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>u("users"),className:`p-2 rounded-lg ${l==="users"?"bg-blue-100 text-blue-600":"text-gray-400"}`,children:n.jsx(Wt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>u("courses"),className:`p-2 rounded-lg ${l==="courses"?"bg-green-100 text-green-600":"text-gray-400"}`,children:n.jsx(or,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>u("activity"),className:`p-2 rounded-lg ${l==="activity"?"bg-purple-100 text-purple-600":"text-gray-400"}`,children:n.jsx(bo,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:e.userGrowth.map((d,h)=>n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-full bg-blue-200 rounded-t",style:{height:`${d.users/320*200}px`}}),n.jsx("span",{className:"text-xs text-gray-500 mt-2",children:d.month})]},h))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Engagement"}),n.jsx("div",{className:"space-y-4",children:e.courseEngagement.map((d,h)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.course}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.students," students"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.assignments}),n.jsx("p",{className:"text-xs text-gray-500",children:"assignments"})]}),n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.students/52*100}%`}})})]})]},h))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Usage"}),n.jsx("div",{className:"space-y-4",children:e.systemUsage.map((d,h)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[d.activeUsers," active users"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.storageUsed," GB used"]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm text-gray-500",children:d.date})})]},h))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Courses"}),n.jsx("div",{className:"space-y-4",children:e.topCourses.map((d,h)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[d.enrollment," enrolled"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.completion}),n.jsx("p",{className:"text-xs text-gray-500",children:"completed"})]}),n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 ml-4",children:n.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${d.completion/d.enrollment*100}%`}})})]},h))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:e.recentActivity.map((d,h)=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(bo,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.description}),n.jsx("p",{className:"text-xs text-gray-500",children:d.timestamp})]})]},h))})]})]})}function nL(){const[e,t]=j.useState({general:{siteName:"UIS Learning Management System",siteDescription:"A comprehensive learning management system",maintenanceMode:!1,maxFileSize:10,allowedFileTypes:["pdf","doc","docx","jpg","png","mp4"]},security:{passwordMinLength:8,requireStrongPassword:!0,sessionTimeout:30,maxLoginAttempts:5,enableTwoFactor:!1},email:{smtpHost:"smtp.gmail.com",smtpPort:587,smtpUser:"admin@example.com",smtpPassword:"",fromEmail:"noreply@example.com",fromName:"UIS LMS"},storage:{maxStoragePerUser:100,compressionEnabled:!0,backupFrequency:"daily",retentionDays:30}}),[r,s]=j.useState(!1),[a,i]=j.useState(!1),[l,u]=j.useState("general"),[d,h]=j.useState(!1),f=(v,b,w)=>{t(C=>({...C,[v]:{...C[v],[b]:w}}))},m=async()=>{i(!0),await new Promise(v=>setTimeout(v,1e3)),i(!1)},g=async()=>{s(!0),await new Promise(v=>setTimeout(v,2e3)),s(!1)},x=[{id:"general",label:"General",icon:Is},{id:"security",label:"Security",icon:hi},{id:"email",label:"Email",icon:SN},{id:"storage",label:"Storage",icon:Hb}];return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{onClick:m,disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a?n.jsx(tf,{className:"w-4 h-4 animate-spin"}):n.jsx(Vb,{className:"w-4 h-4"}),n.jsx("span",{children:a?"Saving...":"Save Changes"})]})})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:x.map(v=>{const b=v.icon;return n.jsxs("button",{onClick:()=>u(v.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${l===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(b,{className:"w-4 h-4"}),n.jsx("span",{children:v.label})]},v.id)})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l==="general"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),n.jsx("input",{type:"text",value:e.general.siteName,onChange:v=>f("general","siteName",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),n.jsx("input",{type:"text",value:e.general.siteDescription,onChange:v=>f("general","siteDescription",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum File Size (MB)"}),n.jsx("input",{type:"number",value:e.general.maxFileSize,onChange:v=>f("general","maxFileSize",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types"}),n.jsx("input",{type:"text",value:e.general.allowedFileTypes.join(", "),onChange:v=>f("general","allowedFileTypes",v.target.value.split(", ")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"pdf, doc, docx, jpg, png"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:e.general.maintenanceMode,onChange:v=>f("general","maintenanceMode",v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"maintenanceMode",className:"text-sm font-medium text-gray-700",children:"Enable Maintenance Mode"})]})]}),l==="security"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Password Length"}),n.jsx("input",{type:"number",value:e.security.passwordMinLength,onChange:v=>f("security","passwordMinLength",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),n.jsx("input",{type:"number",value:e.security.sessionTimeout,onChange:v=>f("security","sessionTimeout",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Login Attempts"}),n.jsx("input",{type:"number",value:e.security.maxLoginAttempts,onChange:v=>f("security","maxLoginAttempts",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"requireStrongPassword",checked:e.security.requireStrongPassword,onChange:v=>f("security","requireStrongPassword",v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"requireStrongPassword",className:"text-sm font-medium text-gray-700",children:"Require Strong Passwords"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"enableTwoFactor",checked:e.security.enableTwoFactor,onChange:v=>f("security","enableTwoFactor",v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"enableTwoFactor",className:"text-sm font-medium text-gray-700",children:"Enable Two-Factor Authentication"})]})]})]}),l==="email"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),n.jsx("input",{type:"text",value:e.email.smtpHost,onChange:v=>f("email","smtpHost",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),n.jsx("input",{type:"number",value:e.email.smtpPort,onChange:v=>f("email","smtpPort",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),n.jsx("input",{type:"text",value:e.email.smtpUser,onChange:v=>f("email","smtpUser",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:d?"text":"password",value:e.email.smtpPassword,onChange:v=>f("email","smtpPassword",v.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d?n.jsx(lc,{className:"w-4 h-4 text-gray-400"}):n.jsx(No,{className:"w-4 h-4 text-gray-400"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email"}),n.jsx("input",{type:"email",value:e.email.fromEmail,onChange:v=>f("email","fromEmail",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Name"}),n.jsx("input",{type:"text",value:e.email.fromName,onChange:v=>f("email","fromName",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{onClick:g,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[r?n.jsx(tf,{className:"w-4 h-4 animate-spin"}):n.jsx(SN,{className:"w-4 h-4"}),n.jsx("span",{children:r?"Testing...":"Test Email Configuration"})]})})]}),l==="storage"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Storage Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Storage per User (GB)"}),n.jsx("input",{type:"number",value:e.storage.maxStoragePerUser,onChange:v=>f("storage","maxStoragePerUser",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),n.jsxs("select",{value:e.storage.backupFrequency,onChange:v=>f("storage","backupFrequency",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retention Days"}),n.jsx("input",{type:"number",value:e.storage.retentionDays,onChange:v=>f("storage","retentionDays",parseInt(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"compressionEnabled",checked:e.storage.compressionEnabled,onChange:v=>f("storage","compressionEnabled",v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"compressionEnabled",className:"text-sm font-medium text-gray-700",children:"Enable File Compression"})]})]})]})]})}function sL(){const[e,t]=j.useState([]),[r,s]=j.useState([]),[a,i]=j.useState(!0),[l,u]=j.useState(""),[d,h]=j.useState("all"),[f,m]=j.useState("all"),[g,x]=j.useState(null),[v,b]=j.useState(!1);j.useEffect(()=>{setTimeout(()=>{const S=[{_id:"1",title:"Mathematics 101",description:"Introduction to basic mathematics concepts",instructor:"Dr. John Smith",published:!0,enrollmentCount:45,assignmentCount:12,createdAt:"2024-01-01T00:00:00Z",lastUpdated:"2024-01-15T10:30:00Z",status:"active"},{_id:"2",title:"English Literature",description:"Study of classic and modern literature",instructor:"Prof. Jane Doe",published:!0,enrollmentCount:38,assignmentCount:8,createdAt:"2024-01-05T00:00:00Z",lastUpdated:"2024-01-14T15:20:00Z",status:"active"},{_id:"3",title:"Computer Science Fundamentals",description:"Introduction to programming and algorithms",instructor:"Dr. Bob Johnson",published:!1,enrollmentCount:0,assignmentCount:15,createdAt:"2024-01-10T00:00:00Z",lastUpdated:"2024-01-16T09:15:00Z",status:"draft"},{_id:"4",title:"History of Art",description:"Survey of art history from ancient to modern times",instructor:"Prof. Alice Brown",published:!0,enrollmentCount:29,assignmentCount:6,createdAt:"2023-12-15T00:00:00Z",lastUpdated:"2024-01-13T14:45:00Z",status:"active"}];t(S),s(S),i(!1)},1e3)},[]),j.useEffect(()=>{let S=e;if(l&&(S=S.filter(_=>_.title.toLowerCase().includes(l.toLowerCase())||_.description.toLowerCase().includes(l.toLowerCase())||_.instructor.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(S=S.filter(_=>_.status===d)),f!=="all"){const _=f==="published";S=S.filter(D=>D.published===_)}s(S)},[e,l,d,f]);const w=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=S=>S?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800",N=S=>new Date(S).toLocaleDateString(),E=(S,_)=>{switch(S){case"edit":x(_),b(!0);break;case"delete":confirm(`Are you sure you want to delete ${_.title}?`)&&t(e.filter(D=>D._id!==_._id));break;case"publish":t(e.map(D=>D._id===_._id?{...D,published:!0,status:"active"}:D));break;case"unpublish":t(e.map(D=>D._id===_._id?{...D,published:!1}:D));break;case"archive":t(e.map(D=>D._id===_._id?{...D,status:"archived"}:D));break}};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Course Oversight"}),n.jsx("p",{className:"text-gray-600",children:"Monitor and manage all courses in the system"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(or,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," courses"]})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search courses...",value:l,onChange:S=>u(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsxs("select",{value:d,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"archived",children:"Archived"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Published"}),n.jsxs("select",{value:f,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"unpublished",children:"Unpublished"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Course"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignments"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(S=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title}),n.jsx("div",{className:"text-sm text-gray-500",children:S.description})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.instructor}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(S.status)}`,children:S.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(S.published)}`,children:S.published?"Published":"Unpublished"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Wt,{className:"w-4 h-4 text-gray-400 mr-1"}),n.jsx("span",{className:"text-sm text-gray-900",children:S.enrollmentCount})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Tn,{className:"w-4 h-4 text-gray-400 mr-1"}),n.jsx("span",{className:"text-sm text-gray-900",children:S.assignmentCount})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(S.lastUpdated)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>E("edit",S),className:"text-blue-600 hover:text-blue-900",children:n.jsx(Gc,{className:"w-4 h-4"})}),S.published?n.jsx("button",{onClick:()=>E("unpublish",S),className:"text-yellow-600 hover:text-yellow-900",children:n.jsx(lc,{className:"w-4 h-4"})}):n.jsx("button",{onClick:()=>E("publish",S),className:"text-green-600 hover:text-green-900",children:n.jsx(No,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>E("archive",S),className:"text-orange-600 hover:text-orange-900",children:n.jsx(dc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>E("delete",S),className:"text-red-600 hover:text-red-900",children:n.jsx(ls,{className:"w-4 h-4"})})]})})]},S._id))})]})})}),v&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Course"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:g.title,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{defaultValue:g.description,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructor"}),n.jsx("input",{type:"text",defaultValue:g.instructor,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{defaultValue:g.status,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"archived",children:"Archived"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})]})}function aL(){const[e,t]=j.useState([]),[r,s]=j.useState({totalLogins:0,failedLogins:0,suspiciousActivities:0,blockedIPs:0,securityScore:0}),[a,i]=j.useState(!0),[l,u]=j.useState(!1);j.useEffect(()=>{setTimeout(()=>{s({totalLogins:1247,failedLogins:23,suspiciousActivities:5,blockedIPs:3,securityScore:85}),t([{id:"1",type:"failed_login",description:"Failed login attempt from 192.168.1.100",timestamp:"2 minutes ago",severity:"medium",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"},{id:"2",type:"suspicious_activity",description:"Multiple rapid login attempts detected",timestamp:"15 minutes ago",severity:"high",ipAddress:"203.0.113.45",userAgent:"Mozilla/5.0 (Unknown)"},{id:"3",type:"system_alert",description:"Security scan completed - no threats found",timestamp:"1 hour ago",severity:"low"}]),i(!1)},1e3)},[]);const d=m=>{switch(m){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=m=>{switch(m){case"login_attempt":return n.jsx(Wt,{className:"w-4 h-4"});case"failed_login":return n.jsx(Ms,{className:"w-4 h-4"});case"suspicious_activity":return n.jsx(dc,{className:"w-4 h-4"});case"system_alert":return n.jsx(hi,{className:"w-4 h-4"});default:return n.jsx(bo,{className:"w-4 h-4"})}},f=m=>m>=80?"text-green-600":m>=60?"text-yellow-600":"text-red-600";return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Security Center"}),n.jsx("p",{className:"text-gray-600",children:"Monitor and manage system security"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(hi,{className:"w-5 h-5 text-blue-600"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Security Score: ",n.jsxs("span",{className:f(r.securityScore),children:[r.securityScore,"%"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Wt,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Logins"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalLogins})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-red-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(Ms,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed Logins"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.failedLogins})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(dc,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspicious Activities"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.suspiciousActivities})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(So,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Blocked IPs"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.blockedIPs})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(hi,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Security Score"}),n.jsxs("p",{className:`text-2xl font-bold ${f(r.securityScore)}`,children:[r.securityScore,"%"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Require 2FA for all users"})]}),n.jsx("button",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700",children:"Enabled"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"IP Whitelist"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Restrict access to specific IPs"})]}),n.jsx("button",{className:"bg-gray-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-gray-700",children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Session Timeout"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:"30 minutes"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Password Policy"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Minimum requirements"})]}),n.jsx("span",{className:"text-sm text-gray-900",children:"8+ chars, mixed case"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Security Events"}),n.jsx("div",{className:"space-y-3",children:e.map(m=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[n.jsx("div",{className:`p-2 rounded-lg ${d(m.severity)}`,children:h(m.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.description}),n.jsx("p",{className:"text-xs text-gray-500",children:m.timestamp}),m.ipAddress&&n.jsxs("p",{className:"text-xs text-gray-400",children:["IP: ",m.ipAddress]})]})]},m.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(tf,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Run Security Scan"})]}),n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(Hb,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Backup Security Logs"})]}),n.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(o$,{className:"w-5 h-5 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Generate Security Report"})]})]})]})]})}const iL=()=>{const{courses:e,loading:t,error:r,deleteCourse:s}=Go(),{user:a}=Et(),i=Lt();if(j.useEffect(()=>{if(!t&&e&&e.length>0){const h=(a==null?void 0:a.role)==="teacher"||(a==null?void 0:a.role)==="admin"?e:e.filter(f=>f.published);h.length>0&&i(`/courses/${h[0]._id}`)}},[e,t,a,i]),t)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(r)return n.jsx("div",{className:"text-red-500 text-center p-4",children:r});const l=(a==null?void 0:a.role)==="teacher"||(a==null?void 0:a.role)==="admin";return(l?e:e.filter(d=>d.published)).length===0?n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Courses"})}),n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-xl text-gray-600 mb-4",children:l?"No courses available":"No published courses available"}),l&&n.jsx(Mt,{to:"/courses/create",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-md transition-colors",children:"Create Your First Course"})]})]}):n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Courses"})}),n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Redirecting to your course..."})]})]})};function oL(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const lL=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cL=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uL={};function DN(e,t){return(uL.jsx?cL:lL).test(e)}const dL=/[ \t\n\f\r]/g;function fL(e){return typeof e=="object"?e.type==="text"?AN(e.value):!1:AN(e)}function AN(e){return e.replace(dL,"")===""}class qc{constructor(t,r,s){this.normal=r,this.property=t,s&&(this.space=s)}}qc.prototype.normal={};qc.prototype.property={};qc.prototype.space=void 0;function lD(e,t){const r={},s={};for(const a of e)Object.assign(r,a.property),Object.assign(s,a.normal);return new qc(r,s,t)}function Wy(e){return e.toLowerCase()}class Pn{constructor(t,r){this.attribute=r,this.property=t}}Pn.prototype.attribute="";Pn.prototype.booleanish=!1;Pn.prototype.boolean=!1;Pn.prototype.commaOrSpaceSeparated=!1;Pn.prototype.commaSeparated=!1;Pn.prototype.defined=!1;Pn.prototype.mustUseProperty=!1;Pn.prototype.number=!1;Pn.prototype.overloadedBoolean=!1;Pn.prototype.property="";Pn.prototype.spaceSeparated=!1;Pn.prototype.space=void 0;let mL=0;const Dt=Oi(),_r=Oi(),Hy=Oi(),Le=Oi(),ar=Oi(),vo=Oi(),Fn=Oi();function Oi(){return 2**++mL}const Vy=Object.freeze(Object.defineProperty({__proto__:null,boolean:Dt,booleanish:_r,commaOrSpaceSeparated:Fn,commaSeparated:vo,number:Le,overloadedBoolean:Hy,spaceSeparated:ar},Symbol.toStringTag,{value:"Module"})),pp=Object.keys(Vy);class Kb extends Pn{constructor(t,r,s,a){let i=-1;if(super(t,r),TN(this,"space",a),typeof s=="number")for(;++i<pp.length;){const l=pp[i];TN(this,pp[i],(s&Vy[l])===Vy[l])}}}Kb.prototype.defined=!0;function TN(e,t,r){r&&(e[t]=r)}function Wo(e){const t={},r={};for(const[s,a]of Object.entries(e.properties)){const i=new Kb(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),t[s]=i,r[Wy(s)]=s,r[Wy(i.attribute)]=s}return new qc(t,r,e.space)}const cD=Wo({properties:{ariaActiveDescendant:null,ariaAtomic:_r,ariaAutoComplete:null,ariaBusy:_r,ariaChecked:_r,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:ar,ariaCurrent:null,ariaDescribedBy:ar,ariaDetails:null,ariaDisabled:_r,ariaDropEffect:ar,ariaErrorMessage:null,ariaExpanded:_r,ariaFlowTo:ar,ariaGrabbed:_r,ariaHasPopup:null,ariaHidden:_r,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ar,ariaLevel:Le,ariaLive:null,ariaModal:_r,ariaMultiLine:_r,ariaMultiSelectable:_r,ariaOrientation:null,ariaOwns:ar,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:_r,ariaReadOnly:_r,ariaRelevant:null,ariaRequired:_r,ariaRoleDescription:ar,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:_r,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function uD(e,t){return t in e?e[t]:t}function dD(e,t){return uD(e,t.toLowerCase())}const hL=Wo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vo,acceptCharset:ar,accessKey:ar,action:null,allow:null,allowFullScreen:Dt,allowPaymentRequest:Dt,allowUserMedia:Dt,alt:null,as:null,async:Dt,autoCapitalize:null,autoComplete:ar,autoFocus:Dt,autoPlay:Dt,blocking:ar,capture:null,charSet:null,checked:Dt,cite:null,className:ar,cols:Le,colSpan:null,content:null,contentEditable:_r,controls:Dt,controlsList:ar,coords:Le|vo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Dt,defer:Dt,dir:null,dirName:null,disabled:Dt,download:Hy,draggable:_r,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Dt,formTarget:null,headers:ar,height:Le,hidden:Hy,high:Le,href:null,hrefLang:null,htmlFor:ar,httpEquiv:ar,id:null,imageSizes:null,imageSrcSet:null,inert:Dt,inputMode:null,integrity:null,is:null,isMap:Dt,itemId:null,itemProp:ar,itemRef:ar,itemScope:Dt,itemType:ar,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Dt,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:Dt,muted:Dt,name:null,nonce:null,noModule:Dt,noValidate:Dt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Dt,optimum:Le,pattern:null,ping:ar,placeholder:null,playsInline:Dt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Dt,referrerPolicy:null,rel:ar,required:Dt,reversed:Dt,rows:Le,rowSpan:Le,sandbox:ar,scope:null,scoped:Dt,seamless:Dt,selected:Dt,shadowRootClonable:Dt,shadowRootDelegatesFocus:Dt,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:_r,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:Dt,useMap:null,value:_r,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ar,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Dt,declare:Dt,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:Dt,noHref:Dt,noShade:Dt,noWrap:Dt,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:_r,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Dt,disableRemotePlayback:Dt,prefix:null,property:null,results:Le,security:null,unselectable:null},space:"html",transform:dD}),pL=Wo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Fn,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:ar,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:Dt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vo,g2:vo,glyphName:vo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:Fn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ar,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Fn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Fn,rev:Fn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Fn,requiredFeatures:Fn,requiredFonts:Fn,requiredFormats:Fn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:Fn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Fn,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Fn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:uD}),fD=Wo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),mD=Wo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:dD}),hD=Wo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),gL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xL=/[A-Z]/g,PN=/-[a-z]/g,yL=/^data[-\w.:]+$/i;function bL(e,t){const r=Wy(t);let s=t,a=Pn;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&yL.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(PN,wL);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!PN.test(i)){let l=i.replace(xL,vL);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=Kb}return new a(s,t)}function vL(e){return"-"+e.toLowerCase()}function wL(e){return e.charAt(1).toUpperCase()}const jL=lD([cD,hL,fD,mD,hD],"html"),Qb=lD([cD,pL,fD,mD,hD],"svg");function NL(e){return e.join(" ").trim()}var mo={},gp,RN;function SL(){if(RN)return gp;RN=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,h="/",f="*",m="",g="comment",x="declaration";gp=function(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var C=1,N=1;function E(q){var H=q.match(t);H&&(C+=H.length);var re=q.lastIndexOf(d);N=~re?q.length-re:N+q.length}function S(){var q={line:C,column:N};return function(H){return H.position=new _(q),P(),H}}function _(q){this.start=q,this.end={line:C,column:N},this.source=w.source}_.prototype.content=b;function D(q){var H=new Error(w.source+":"+C+":"+N+": "+q);if(H.reason=q,H.filename=w.source,H.line=C,H.column=N,H.source=b,!w.silent)throw H}function T(q){var H=q.exec(b);if(H){var re=H[0];return E(re),b=b.slice(re.length),H}}function P(){T(r)}function O(q){var H;for(q=q||[];H=F();)H!==!1&&q.push(H);return q}function F(){var q=S();if(!(h!=b.charAt(0)||f!=b.charAt(1))){for(var H=2;m!=b.charAt(H)&&(f!=b.charAt(H)||h!=b.charAt(H+1));)++H;if(H+=2,m===b.charAt(H-1))return D("End of comment missing");var re=b.slice(2,H-2);return N+=2,E(re),b=b.slice(H),N+=2,q({type:g,comment:re})}}function $(){var q=S(),H=T(s);if(H){if(F(),!T(a))return D("property missing ':'");var re=T(i),ee=q({type:x,property:v(H[0].replace(e,m)),value:re?v(re[0].replace(e,m)):m});return T(l),ee}}function z(){var q=[];O(q);for(var H;H=$();)H!==!1&&(q.push(H),O(q));return q}return P(),z()};function v(b){return b?b.replace(u,m):m}return gp}var IN;function kL(){if(IN)return mo;IN=1;var e=mo&&mo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mo,"__esModule",{value:!0}),mo.default=r;var t=e(SL());function r(s,a){var i=null;if(!s||typeof s!="string")return i;var l=(0,t.default)(s),u=typeof a=="function";return l.forEach(function(d){if(d.type==="declaration"){var h=d.property,f=d.value;u?a(h,f,d):f&&(i=i||{},i[h]=f)}}),i}return mo}var Ol={},MN;function CL(){if(MN)return Ol;MN=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(h){return!h||r.test(h)||e.test(h)},l=function(h,f){return f.toUpperCase()},u=function(h,f){return"".concat(f,"-")},d=function(h,f){return f===void 0&&(f={}),i(h)?h:(h=h.toLowerCase(),f.reactCompat?h=h.replace(a,u):h=h.replace(s,u),h.replace(t,l))};return Ol.camelCase=d,Ol}var $l,ON;function _L(){if(ON)return $l;ON=1;var e=$l&&$l.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(kL()),r=CL();function s(a,i){var l={};return!a||typeof a!="string"||(0,t.default)(a,function(u,d){u&&d&&(l[(0,r.camelCase)(u,i)]=d)}),l}return s.default=s,$l=s,$l}var EL=_L();const DL=Vr(EL),pD=gD("end"),Xb=gD("start");function gD(e){return t;function t(r){const s=r&&r.position&&r.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function AL(e){const t=Xb(e),r=pD(e);if(t&&r)return{start:t,end:r}}function Jl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?$N(e.position):"start"in e||"end"in e?$N(e):"line"in e||"column"in e?Yy(e):""}function Yy(e){return LN(e&&e.line)+":"+LN(e&&e.column)}function $N(e){return Yy(e&&e.start)+"-"+Yy(e&&e.end)}function LN(e){return e&&typeof e=="number"?e:1}class sn extends Error{constructor(t,r,s){super(),typeof r=="string"&&(s=r,r=void 0);let a="",i={},l=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?a=t:!i.cause&&t&&(l=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof s=="string"){const d=s.indexOf(":");d===-1?i.ruleId=s:(i.source=s.slice(0,d),i.ruleId=s.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const u=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=u?u.line:void 0,this.name=Jl(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}sn.prototype.file="";sn.prototype.name="";sn.prototype.reason="";sn.prototype.message="";sn.prototype.stack="";sn.prototype.column=void 0;sn.prototype.line=void 0;sn.prototype.ancestors=void 0;sn.prototype.cause=void 0;sn.prototype.fatal=void 0;sn.prototype.place=void 0;sn.prototype.ruleId=void 0;sn.prototype.source=void 0;const Jb={}.hasOwnProperty,TL=new Map,PL=/[A-Z]/g,RL=new Set(["table","tbody","thead","tfoot","tr"]),IL=new Set(["td","th"]),xD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ML(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=qL(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=GL(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Qb:jL,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=yD(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function yD(e,t,r){if(t.type==="element")return OL(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return $L(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return FL(e,t,r);if(t.type==="mdxjsEsm")return LL(e,t);if(t.type==="root")return BL(e,t,r);if(t.type==="text")return zL(e,t)}function OL(e,t,r){const s=e.schema;let a=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=Qb,e.schema=a),e.ancestors.push(t);const i=vD(e,t.tagName,!1),l=UL(e,t);let u=ev(e,t);return RL.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!fL(d):!0})),bD(e,l,i,t),Zb(l,u),e.ancestors.pop(),e.schema=s,e.create(t,i,l,r)}function $L(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}fc(e,t.position)}function LL(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);fc(e,t.position)}function FL(e,t,r){const s=e.schema;let a=s;t.name==="svg"&&s.space==="html"&&(a=Qb,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:vD(e,t.name,!0),l=WL(e,t),u=ev(e,t);return bD(e,l,i,t),Zb(l,u),e.ancestors.pop(),e.schema=s,e.create(t,i,l,r)}function BL(e,t,r){const s={};return Zb(s,ev(e,t)),e.create(t,e.Fragment,s,r)}function zL(e,t){return t.value}function bD(e,t,r,s){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=s)}function Zb(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function GL(e,t,r){return s;function s(a,i,l,u){const h=Array.isArray(l.children)?r:t;return u?h(i,l,u):h(i,l)}}function qL(e,t){return r;function r(s,a,i,l){const u=Array.isArray(i.children),d=Xb(s);return t(a,i,l,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function UL(e,t){const r={};let s,a;for(a in t.properties)if(a!=="children"&&Jb.call(t.properties,a)){const i=HL(e,a,t.properties[a]);if(i){const[l,u]=i;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&IL.has(t.tagName)?s=u:r[l]=u}}if(s){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return r}function WL(e,t){const r={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const i=s.data.estree.body[0];i.type;const l=i.expression;l.type;const u=l.properties[0];u.type,Object.assign(r,e.evaluater.evaluateExpression(u.argument))}else fc(e,t.position);else{const a=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const u=s.value.data.estree.body[0];u.type,i=e.evaluater.evaluateExpression(u.expression)}else fc(e,t.position);else i=s.value===null?!0:s.value;r[a]=i}return r}function ev(e,t){const r=[];let s=-1;const a=e.passKeys?new Map:TL;for(;++s<t.children.length;){const i=t.children[s];let l;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const h=a.get(d)||0;l=d+"-"+h,a.set(d,h+1)}}const u=yD(e,i,l);u!==void 0&&r.push(u)}return r}function HL(e,t,r){const s=bL(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=s.commaSeparated?oL(r):NL(r)),s.property==="style"){let a=typeof r=="object"?r:VL(e,String(r));return e.stylePropertyNameCase==="css"&&(a=YL(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?gL[s.property]||s.property:s.attribute,r]}}function VL(e,t){try{return DL(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const s=r,a=new sn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=xD+"#cannot-parse-style-attribute",a}}function vD(e,t,r){let s;if(!r)s={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,l;for(;++i<a.length;){const u=DN(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(i&&u.type==="Literal"),optional:!1}:u}s=l}else s=DN(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const a=s.value;return Jb.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);fc(e)}function fc(e,t){const r=new sn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=xD+"#cannot-handle-mdx-estrees-without-createevaluater",r}function YL(e){const t={};let r;for(r in e)Jb.call(e,r)&&(t[KL(r)]=e[r]);return t}function KL(e){let t=e.replace(PL,QL);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function QL(e){return"-"+e.toLowerCase()}const xp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},XL={};function JL(e,t){const r=XL,s=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return wD(e,s,a)}function wD(e,t,r){if(ZL(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return FN(e.children,t,r)}return Array.isArray(e)?FN(e,t,r):""}function FN(e,t,r){const s=[];let a=-1;for(;++a<e.length;)s[a]=wD(e[a],t,r);return s.join("")}function ZL(e){return!!(e&&typeof e=="object")}const BN=document.createElement("i");function tv(e){const t="&"+e+";";BN.innerHTML=t;const r=BN.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Fs(e,t,r,s){const a=e.length;let i=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,s.length<1e4)l=Array.from(s),l.unshift(t,r),e.splice(...l);else for(r&&e.splice(t,r);i<s.length;)l=s.slice(i,i+1e4),l.unshift(t,0),e.splice(...l),i+=1e4,t+=1e4}function is(e,t){return e.length>0?(Fs(e,e.length,0,t),e):t}const zN={}.hasOwnProperty;function eF(e){const t={};let r=-1;for(;++r<e.length;)tF(t,e[r]);return t}function tF(e,t){let r;for(r in t){const a=(zN.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let l;if(i)for(l in i){zN.call(a,l)||(a[l]=[]);const u=i[l];rF(a[l],Array.isArray(u)?u:u?[u]:[])}}}function rF(e,t){let r=-1;const s=[];for(;++r<t.length;)(t[r].add==="after"?e:s).push(t[r]);Fs(e,0,0,s)}function jD(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function wo(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rs=Ba(/[A-Za-z]/),zn=Ba(/[\dA-Za-z]/),nF=Ba(/[#-'*+\--9=?A-Z^-~]/);function Ky(e){return e!==null&&(e<32||e===127)}const Qy=Ba(/\d/),sF=Ba(/[\dA-Fa-f]/),aF=Ba(/[!-/:-@[-`{-~]/);function jt(e){return e!==null&&e<-2}function _n(e){return e!==null&&(e<0||e===32)}function Gt(e){return e===-2||e===-1||e===32}const iF=Ba(new RegExp("\\p{P}|\\p{S}","u")),oF=Ba(/\s/);function Ba(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Ho(e){const t=[];let r=-1,s=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let l="";if(i===37&&zn(e.charCodeAt(r+1))&&zn(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const u=e.charCodeAt(r+1);i<56320&&u>56319&&u<57344?(l=String.fromCharCode(i,u),a=1):l="�"}else l=String.fromCharCode(i);l&&(t.push(e.slice(s,r),encodeURIComponent(l)),s=r+a+1,l=""),a&&(r+=a,a=0)}return t.join("")+e.slice(s)}function ir(e,t,r,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(d){return Gt(d)?(e.enter(r),u(d)):t(d)}function u(d){return Gt(d)&&i++<a?(e.consume(d),u):(e.exit(r),t(d))}}const lF={tokenize:cF};function cF(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let r;return t;function s(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ir(e,t,"linePrefix")}function a(u){return e.enter("paragraph"),i(u)}function i(u){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return jt(u)?(e.consume(u),e.exit("chunkText"),i):(e.consume(u),l)}}const uF={tokenize:dF},GN={tokenize:fF};function dF(e){const t=this,r=[];let s=0,a,i,l;return u;function u(E){if(s<r.length){const S=r[s];return t.containerState=S[1],e.attempt(S[0].continuation,d,h)(E)}return h(E)}function d(E){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&N();const S=t.events.length;let _=S,D;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){D=t.events[_][1].end;break}C(s);let T=S;for(;T<t.events.length;)t.events[T][1].end={...D},T++;return Fs(t.events,_+1,0,t.events.slice(S)),t.events.length=T,h(E)}return u(E)}function h(E){if(s===r.length){if(!a)return g(E);if(a.currentConstruct&&a.currentConstruct.concrete)return v(E);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(GN,f,m)(E)}function f(E){return a&&N(),C(s),g(E)}function m(E){return t.parser.lazy[t.now().line]=s!==r.length,l=t.now().offset,v(E)}function g(E){return t.containerState={},e.attempt(GN,x,v)(E)}function x(E){return s++,r.push([t.currentConstruct,t.containerState]),g(E)}function v(E){if(E===null){a&&N(),C(0),e.consume(E);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),b(E)}function b(E){if(E===null){w(e.exit("chunkFlow"),!0),C(0),e.consume(E);return}return jt(E)?(e.consume(E),w(e.exit("chunkFlow")),s=0,t.interrupt=void 0,u):(e.consume(E),b)}function w(E,S){const _=t.sliceStream(E);if(S&&_.push(null),E.previous=i,i&&(i.next=E),i=E,a.defineSkip(E.start),a.write(_),t.parser.lazy[E.start.line]){let D=a.events.length;for(;D--;)if(a.events[D][1].start.offset<l&&(!a.events[D][1].end||a.events[D][1].end.offset>l))return;const T=t.events.length;let P=T,O,F;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(O){F=t.events[P][1].end;break}O=!0}for(C(s),D=T;D<t.events.length;)t.events[D][1].end={...F},D++;Fs(t.events,P+1,0,t.events.slice(T)),t.events.length=D}}function C(E){let S=r.length;for(;S-- >E;){const _=r[S];t.containerState=_[1],_[0].exit.call(t,e)}r.length=E}function N(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function fF(e,t,r){return ir(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function qN(e){if(e===null||_n(e)||oF(e))return 1;if(iF(e))return 2}function rv(e,t,r){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(t=i(t,r),s.push(i))}return t}const Xy={name:"attention",resolveAll:mF,tokenize:hF};function mF(e,t){let r=-1,s,a,i,l,u,d,h,f;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(s=r;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[s][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[s][1].end.offset-e[s][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const m={...e[s][1].end},g={...e[r][1].start};UN(m,-d),UN(g,d),l={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[s][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:g},i={type:d>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[r][1].start}},a={type:d>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[s][1].end={...l.start},e[r][1].start={...u.end},h=[],e[s][1].end.offset-e[s][1].start.offset&&(h=is(h,[["enter",e[s][1],t],["exit",e[s][1],t]])),h=is(h,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",i,t]]),h=is(h,rv(t.parser.constructs.insideSpan.null,e.slice(s+1,r),t)),h=is(h,[["exit",i,t],["enter",u,t],["exit",u,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(f=2,h=is(h,[["enter",e[r][1],t],["exit",e[r][1],t]])):f=0,Fs(e,s-1,r-s+3,h),r=s+h.length-f-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function hF(e,t){const r=this.parser.constructs.attentionMarkers.null,s=this.previous,a=qN(s);let i;return l;function l(d){return i=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===i)return e.consume(d),u;const h=e.exit("attentionSequence"),f=qN(d),m=!f||f===2&&a||r.includes(d),g=!a||a===2&&f||r.includes(s);return h._open=!!(i===42?m:m&&(a||!g)),h._close=!!(i===42?g:g&&(f||!m)),t(d)}}function UN(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pF={name:"autolink",tokenize:gF};function gF(e,t,r){let s=0;return a;function a(x){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(x){return Rs(x)?(e.consume(x),l):x===64?r(x):h(x)}function l(x){return x===43||x===45||x===46||zn(x)?(s=1,u(x)):h(x)}function u(x){return x===58?(e.consume(x),s=0,d):(x===43||x===45||x===46||zn(x))&&s++<32?(e.consume(x),u):(s=0,h(x))}function d(x){return x===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):x===null||x===32||x===60||Ky(x)?r(x):(e.consume(x),d)}function h(x){return x===64?(e.consume(x),f):nF(x)?(e.consume(x),h):r(x)}function f(x){return zn(x)?m(x):r(x)}function m(x){return x===46?(e.consume(x),s=0,f):x===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):g(x)}function g(x){if((x===45||zn(x))&&s++<63){const v=x===45?g:m;return e.consume(x),v}return r(x)}}const Lf={partial:!0,tokenize:xF};function xF(e,t,r){return s;function s(i){return Gt(i)?ir(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||jt(i)?t(i):r(i)}}const ND={continuation:{tokenize:bF},exit:vF,name:"blockQuote",tokenize:yF};function yF(e,t,r){const s=this;return a;function a(l){if(l===62){const u=s.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),i}return r(l)}function i(l){return Gt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function bF(e,t,r){const s=this;return a;function a(l){return Gt(l)?ir(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return e.attempt(ND,t,r)(l)}}function vF(e){e.exit("blockQuote")}const SD={name:"characterEscape",tokenize:wF};function wF(e,t,r){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return aF(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const kD={name:"characterReference",tokenize:jF};function jF(e,t,r){const s=this;let a=0,i,l;return u;function u(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,l=zn,f(m))}function h(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,l=sF,f):(e.enter("characterReferenceValue"),i=7,l=Qy,f(m))}function f(m){if(m===59&&a){const g=e.exit("characterReferenceValue");return l===zn&&!tv(s.sliceSerialize(g))?r(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(m)&&a++<i?(e.consume(m),f):r(m)}}const WN={partial:!0,tokenize:SF},HN={concrete:!0,name:"codeFenced",tokenize:NF};function NF(e,t,r){const s=this,a={partial:!0,tokenize:_};let i=0,l=0,u;return d;function d(D){return h(D)}function h(D){const T=s.events[s.events.length-1];return i=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,u=D,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(D)}function f(D){return D===u?(l++,e.consume(D),f):l<3?r(D):(e.exit("codeFencedFenceSequence"),Gt(D)?ir(e,m,"whitespace")(D):m(D))}function m(D){return D===null||jt(D)?(e.exit("codeFencedFence"),s.interrupt?t(D):e.check(WN,b,S)(D)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(D))}function g(D){return D===null||jt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(D)):Gt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ir(e,x,"whitespace")(D)):D===96&&D===u?r(D):(e.consume(D),g)}function x(D){return D===null||jt(D)?m(D):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),v(D))}function v(D){return D===null||jt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(D)):D===96&&D===u?r(D):(e.consume(D),v)}function b(D){return e.attempt(a,S,w)(D)}function w(D){return e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),C}function C(D){return i>0&&Gt(D)?ir(e,N,"linePrefix",i+1)(D):N(D)}function N(D){return D===null||jt(D)?e.check(WN,b,S)(D):(e.enter("codeFlowValue"),E(D))}function E(D){return D===null||jt(D)?(e.exit("codeFlowValue"),N(D)):(e.consume(D),E)}function S(D){return e.exit("codeFenced"),t(D)}function _(D,T,P){let O=0;return F;function F(re){return D.enter("lineEnding"),D.consume(re),D.exit("lineEnding"),$}function $(re){return D.enter("codeFencedFence"),Gt(re)?ir(D,z,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(re):z(re)}function z(re){return re===u?(D.enter("codeFencedFenceSequence"),q(re)):P(re)}function q(re){return re===u?(O++,D.consume(re),q):O>=l?(D.exit("codeFencedFenceSequence"),Gt(re)?ir(D,H,"whitespace")(re):H(re)):P(re)}function H(re){return re===null||jt(re)?(D.exit("codeFencedFence"),T(re)):P(re)}}}function SF(e,t,r){const s=this;return a;function a(l){return l===null?r(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i)}function i(l){return s.parser.lazy[s.now().line]?r(l):t(l)}}const yp={name:"codeIndented",tokenize:CF},kF={partial:!0,tokenize:_F};function CF(e,t,r){const s=this;return a;function a(h){return e.enter("codeIndented"),ir(e,i,"linePrefix",5)(h)}function i(h){const f=s.events[s.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?l(h):r(h)}function l(h){return h===null?d(h):jt(h)?e.attempt(kF,l,d)(h):(e.enter("codeFlowValue"),u(h))}function u(h){return h===null||jt(h)?(e.exit("codeFlowValue"),l(h)):(e.consume(h),u)}function d(h){return e.exit("codeIndented"),t(h)}}function _F(e,t,r){const s=this;return a;function a(l){return s.parser.lazy[s.now().line]?r(l):jt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):ir(e,i,"linePrefix",5)(l)}function i(l){const u=s.events[s.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):jt(l)?a(l):r(l)}}const EF={name:"codeText",previous:AF,resolve:DF,tokenize:TF};function DF(e){let t=e.length-4,r=3,s,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=r;++s<t;)if(e[s][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(s=r-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function AF(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function TF(e,t,r){let s=0,a,i;return l;function l(m){return e.enter("codeText"),e.enter("codeTextSequence"),u(m)}function u(m){return m===96?(e.consume(m),s++,u):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?r(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(i=e.enter("codeTextSequence"),a=0,f(m)):jt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||jt(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),h)}function f(m){return m===96?(e.consume(m),a++,f):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(i.type="codeTextData",h(m))}}class PF{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const s=r??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,r,s){const a=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&Ll(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ll(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ll(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Ll(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ll(this.left,r.reverse())}}}function Ll(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function CD(e){const t={};let r=-1,s,a,i,l,u,d,h;const f=new PF(e);for(;++r<f.length;){for(;r in t;)r=t[r];if(s=f.get(r),r&&s[1].type==="chunkFlow"&&f.get(r-1)[1].type==="listItemPrefix"&&(d=s[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,RF(f,r)),r=t[r],h=!0);else if(s[1]._container){for(i=r,a=void 0;i--;)if(l=f.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(s[1].end={...f.get(a)[1].start},u=f.slice(a,r),u.unshift(s),f.splice(a,r-a+1,u))}}return Fs(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!h}function RF(e,t){const r=e.get(t)[1],s=e.get(t)[2];let a=t-1;const i=[];let l=r._tokenizer;l||(l=s.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,d=[],h={};let f,m,g=-1,x=r,v=0,b=0;const w=[b];for(;x;){for(;e.get(++a)[1]!==x;);i.push(a),x._tokenizer||(f=s.sliceStream(x),x.next||f.push(null),m&&l.defineSkip(x.start),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(f),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=x,x=x.next}for(x=r;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(b=g+1,w.push(b),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(l.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),g=w.length;g--;){const C=u.slice(w[g],w[g+1]),N=i.pop();d.push([N,N+C.length-1]),e.splice(N,2,C)}for(d.reverse(),g=-1;++g<d.length;)h[v+d[g][0]]=v+d[g][1],v+=d[g][1]-d[g][0]-1;return h}const IF={resolve:OF,tokenize:$F},MF={partial:!0,tokenize:LF};function OF(e){return CD(e),e}function $F(e,t){let r;return s;function s(u){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(u)}function a(u){return u===null?i(u):jt(u)?e.check(MF,l,i)(u):(e.consume(u),a)}function i(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function LF(e,t,r){const s=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ir(e,i,"linePrefix")}function i(l){if(l===null||jt(l))return r(l);const u=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(s.parser.constructs.flow,r,t)(l)}}function _D(e,t,r,s,a,i,l,u,d){const h=d||Number.POSITIVE_INFINITY;let f=0;return m;function m(C){return C===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(C),e.exit(i),g):C===null||C===32||C===41||Ky(C)?r(C):(e.enter(s),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),b(C))}function g(C){return C===62?(e.enter(i),e.consume(C),e.exit(i),e.exit(a),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===62?(e.exit("chunkString"),e.exit(u),g(C)):C===null||C===60||jt(C)?r(C):(e.consume(C),C===92?v:x)}function v(C){return C===60||C===62||C===92?(e.consume(C),x):x(C)}function b(C){return!f&&(C===null||C===41||_n(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(s),t(C)):f<h&&C===40?(e.consume(C),f++,b):C===41?(e.consume(C),f--,b):C===null||C===32||C===40||Ky(C)?r(C):(e.consume(C),C===92?w:b)}function w(C){return C===40||C===41||C===92?(e.consume(C),b):b(C)}}function ED(e,t,r,s,a,i){const l=this;let u=0,d;return h;function h(x){return e.enter(s),e.enter(a),e.consume(x),e.exit(a),e.enter(i),f}function f(x){return u>999||x===null||x===91||x===93&&!d||x===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?r(x):x===93?(e.exit(i),e.enter(a),e.consume(x),e.exit(a),e.exit(s),t):jt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===null||x===91||x===93||jt(x)||u++>999?(e.exit("chunkString"),f(x)):(e.consume(x),d||(d=!Gt(x)),x===92?g:m)}function g(x){return x===91||x===92||x===93?(e.consume(x),u++,m):m(x)}}function DD(e,t,r,s,a,i){let l;return u;function u(g){return g===34||g===39||g===40?(e.enter(s),e.enter(a),e.consume(g),e.exit(a),l=g===40?41:g,d):r(g)}function d(g){return g===l?(e.enter(a),e.consume(g),e.exit(a),e.exit(s),t):(e.enter(i),h(g))}function h(g){return g===l?(e.exit(i),d(l)):g===null?r(g):jt(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),ir(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===l||g===null||jt(g)?(e.exit("chunkString"),h(g)):(e.consume(g),g===92?m:f)}function m(g){return g===l||g===92?(e.consume(g),f):f(g)}}function Zl(e,t){let r;return s;function s(a){return jt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,s):Gt(a)?ir(e,s,r?"linePrefix":"lineSuffix")(a):t(a)}}const FF={name:"definition",tokenize:zF},BF={partial:!0,tokenize:GF};function zF(e,t,r){const s=this;let a;return i;function i(x){return e.enter("definition"),l(x)}function l(x){return ED.call(s,e,u,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function u(x){return a=wo(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),d):r(x)}function d(x){return _n(x)?Zl(e,h)(x):h(x)}function h(x){return _D(e,f,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return e.attempt(BF,m,m)(x)}function m(x){return Gt(x)?ir(e,g,"whitespace")(x):g(x)}function g(x){return x===null||jt(x)?(e.exit("definition"),s.parser.defined.push(a),t(x)):r(x)}}function GF(e,t,r){return s;function s(u){return _n(u)?Zl(e,a)(u):r(u)}function a(u){return DD(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function i(u){return Gt(u)?ir(e,l,"whitespace")(u):l(u)}function l(u){return u===null||jt(u)?t(u):r(u)}}const qF={name:"hardBreakEscape",tokenize:UF};function UF(e,t,r){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return jt(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const WF={name:"headingAtx",resolve:HF,tokenize:VF};function HF(e,t){let r=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),r-2>s&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&e[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},i={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},Fs(e,s,r-s+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function VF(e,t,r){let s=0;return a;function a(f){return e.enter("atxHeading"),i(f)}function i(f){return e.enter("atxHeadingSequence"),l(f)}function l(f){return f===35&&s++<6?(e.consume(f),l):f===null||_n(f)?(e.exit("atxHeadingSequence"),u(f)):r(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),d(f)):f===null||jt(f)?(e.exit("atxHeading"),t(f)):Gt(f)?ir(e,u,"whitespace")(f):(e.enter("atxHeadingText"),h(f))}function d(f){return f===35?(e.consume(f),d):(e.exit("atxHeadingSequence"),u(f))}function h(f){return f===null||f===35||_n(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),h)}}const YF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],VN=["pre","script","style","textarea"],KF={concrete:!0,name:"htmlFlow",resolveTo:JF,tokenize:ZF},QF={partial:!0,tokenize:t8},XF={partial:!0,tokenize:e8};function JF(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ZF(e,t,r){const s=this;let a,i,l,u,d;return h;function h(B){return f(B)}function f(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),m}function m(B){return B===33?(e.consume(B),g):B===47?(e.consume(B),i=!0,b):B===63?(e.consume(B),a=3,s.interrupt?t:R):Rs(B)?(e.consume(B),l=String.fromCharCode(B),w):r(B)}function g(B){return B===45?(e.consume(B),a=2,x):B===91?(e.consume(B),a=5,u=0,v):Rs(B)?(e.consume(B),a=4,s.interrupt?t:R):r(B)}function x(B){return B===45?(e.consume(B),s.interrupt?t:R):r(B)}function v(B){const Ce="CDATA[";return B===Ce.charCodeAt(u++)?(e.consume(B),u===Ce.length?s.interrupt?t:z:v):r(B)}function b(B){return Rs(B)?(e.consume(B),l=String.fromCharCode(B),w):r(B)}function w(B){if(B===null||B===47||B===62||_n(B)){const Ce=B===47,Se=l.toLowerCase();return!Ce&&!i&&VN.includes(Se)?(a=1,s.interrupt?t(B):z(B)):YF.includes(l.toLowerCase())?(a=6,Ce?(e.consume(B),C):s.interrupt?t(B):z(B)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?r(B):i?N(B):E(B))}return B===45||zn(B)?(e.consume(B),l+=String.fromCharCode(B),w):r(B)}function C(B){return B===62?(e.consume(B),s.interrupt?t:z):r(B)}function N(B){return Gt(B)?(e.consume(B),N):F(B)}function E(B){return B===47?(e.consume(B),F):B===58||B===95||Rs(B)?(e.consume(B),S):Gt(B)?(e.consume(B),E):F(B)}function S(B){return B===45||B===46||B===58||B===95||zn(B)?(e.consume(B),S):_(B)}function _(B){return B===61?(e.consume(B),D):Gt(B)?(e.consume(B),_):E(B)}function D(B){return B===null||B===60||B===61||B===62||B===96?r(B):B===34||B===39?(e.consume(B),d=B,T):Gt(B)?(e.consume(B),D):P(B)}function T(B){return B===d?(e.consume(B),d=null,O):B===null||jt(B)?r(B):(e.consume(B),T)}function P(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||_n(B)?_(B):(e.consume(B),P)}function O(B){return B===47||B===62||Gt(B)?E(B):r(B)}function F(B){return B===62?(e.consume(B),$):r(B)}function $(B){return B===null||jt(B)?z(B):Gt(B)?(e.consume(B),$):r(B)}function z(B){return B===45&&a===2?(e.consume(B),ee):B===60&&a===1?(e.consume(B),L):B===62&&a===4?(e.consume(B),U):B===63&&a===3?(e.consume(B),R):B===93&&a===5?(e.consume(B),W):jt(B)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(QF,Z,q)(B)):B===null||jt(B)?(e.exit("htmlFlowData"),q(B)):(e.consume(B),z)}function q(B){return e.check(XF,H,Z)(B)}function H(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),re}function re(B){return B===null||jt(B)?q(B):(e.enter("htmlFlowData"),z(B))}function ee(B){return B===45?(e.consume(B),R):z(B)}function L(B){return B===47?(e.consume(B),l="",M):z(B)}function M(B){if(B===62){const Ce=l.toLowerCase();return VN.includes(Ce)?(e.consume(B),U):z(B)}return Rs(B)&&l.length<8?(e.consume(B),l+=String.fromCharCode(B),M):z(B)}function W(B){return B===93?(e.consume(B),R):z(B)}function R(B){return B===62?(e.consume(B),U):B===45&&a===2?(e.consume(B),R):z(B)}function U(B){return B===null||jt(B)?(e.exit("htmlFlowData"),Z(B)):(e.consume(B),U)}function Z(B){return e.exit("htmlFlow"),t(B)}}function e8(e,t,r){const s=this;return a;function a(l){return jt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):r(l)}function i(l){return s.parser.lazy[s.now().line]?r(l):t(l)}}function t8(e,t,r){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Lf,t,r)}}const r8={name:"htmlText",tokenize:n8};function n8(e,t,r){const s=this;let a,i,l;return u;function u(R){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(R),d}function d(R){return R===33?(e.consume(R),h):R===47?(e.consume(R),_):R===63?(e.consume(R),E):Rs(R)?(e.consume(R),P):r(R)}function h(R){return R===45?(e.consume(R),f):R===91?(e.consume(R),i=0,v):Rs(R)?(e.consume(R),N):r(R)}function f(R){return R===45?(e.consume(R),x):r(R)}function m(R){return R===null?r(R):R===45?(e.consume(R),g):jt(R)?(l=m,L(R)):(e.consume(R),m)}function g(R){return R===45?(e.consume(R),x):m(R)}function x(R){return R===62?ee(R):R===45?g(R):m(R)}function v(R){const U="CDATA[";return R===U.charCodeAt(i++)?(e.consume(R),i===U.length?b:v):r(R)}function b(R){return R===null?r(R):R===93?(e.consume(R),w):jt(R)?(l=b,L(R)):(e.consume(R),b)}function w(R){return R===93?(e.consume(R),C):b(R)}function C(R){return R===62?ee(R):R===93?(e.consume(R),C):b(R)}function N(R){return R===null||R===62?ee(R):jt(R)?(l=N,L(R)):(e.consume(R),N)}function E(R){return R===null?r(R):R===63?(e.consume(R),S):jt(R)?(l=E,L(R)):(e.consume(R),E)}function S(R){return R===62?ee(R):E(R)}function _(R){return Rs(R)?(e.consume(R),D):r(R)}function D(R){return R===45||zn(R)?(e.consume(R),D):T(R)}function T(R){return jt(R)?(l=T,L(R)):Gt(R)?(e.consume(R),T):ee(R)}function P(R){return R===45||zn(R)?(e.consume(R),P):R===47||R===62||_n(R)?O(R):r(R)}function O(R){return R===47?(e.consume(R),ee):R===58||R===95||Rs(R)?(e.consume(R),F):jt(R)?(l=O,L(R)):Gt(R)?(e.consume(R),O):ee(R)}function F(R){return R===45||R===46||R===58||R===95||zn(R)?(e.consume(R),F):$(R)}function $(R){return R===61?(e.consume(R),z):jt(R)?(l=$,L(R)):Gt(R)?(e.consume(R),$):O(R)}function z(R){return R===null||R===60||R===61||R===62||R===96?r(R):R===34||R===39?(e.consume(R),a=R,q):jt(R)?(l=z,L(R)):Gt(R)?(e.consume(R),z):(e.consume(R),H)}function q(R){return R===a?(e.consume(R),a=void 0,re):R===null?r(R):jt(R)?(l=q,L(R)):(e.consume(R),q)}function H(R){return R===null||R===34||R===39||R===60||R===61||R===96?r(R):R===47||R===62||_n(R)?O(R):(e.consume(R),H)}function re(R){return R===47||R===62||_n(R)?O(R):r(R)}function ee(R){return R===62?(e.consume(R),e.exit("htmlTextData"),e.exit("htmlText"),t):r(R)}function L(R){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),M}function M(R){return Gt(R)?ir(e,W,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):W(R)}function W(R){return e.enter("htmlTextData"),l(R)}}const nv={name:"labelEnd",resolveAll:o8,resolveTo:l8,tokenize:c8},s8={tokenize:u8},a8={tokenize:d8},i8={tokenize:f8};function o8(e){let t=-1;const r=[];for(;++t<e.length;){const s=e[t][1];if(r.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",t+=a}}return e.length!==r.length&&Fs(e,0,e.length,r),e}function l8(e,t){let r=e.length,s=0,a,i,l,u;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(l=r);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[i][1].start},end:{...e[l][1].end}},f={type:"labelText",start:{...e[i+s+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",d,t],["enter",h,t]],u=is(u,e.slice(i+1,i+s+3)),u=is(u,[["enter",f,t]]),u=is(u,rv(t.parser.constructs.insideSpan.null,e.slice(i+s+4,l-3),t)),u=is(u,[["exit",f,t],e[l-2],e[l-1],["exit",h,t]]),u=is(u,e.slice(l+1)),u=is(u,[["exit",d,t]]),Fs(e,i,e.length,u),e}function c8(e,t,r){const s=this;let a=s.events.length,i,l;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return u;function u(g){return i?i._inactive?m(g):(l=s.parser.defined.includes(wo(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):r(g)}function d(g){return g===40?e.attempt(s8,f,l?f:m)(g):g===91?e.attempt(a8,f,l?h:m)(g):l?f(g):m(g)}function h(g){return e.attempt(i8,f,m)(g)}function f(g){return t(g)}function m(g){return i._balanced=!0,r(g)}}function u8(e,t,r){return s;function s(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),a}function a(m){return _n(m)?Zl(e,i)(m):i(m)}function i(m){return m===41?f(m):_D(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return _n(m)?Zl(e,d)(m):f(m)}function u(m){return r(m)}function d(m){return m===34||m===39||m===40?DD(e,h,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function h(m){return _n(m)?Zl(e,f)(m):f(m)}function f(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):r(m)}}function d8(e,t,r){const s=this;return a;function a(u){return ED.call(s,e,i,l,"reference","referenceMarker","referenceString")(u)}function i(u){return s.parser.defined.includes(wo(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(u):r(u)}function l(u){return r(u)}}function f8(e,t,r){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const m8={name:"labelStartImage",resolveAll:nv.resolveAll,tokenize:h8};function h8(e,t,r){const s=this;return a;function a(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),i}function i(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):r(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(u):t(u)}}const p8={name:"labelStartLink",resolveAll:nv.resolveAll,tokenize:g8};function g8(e,t,r){const s=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(l):t(l)}}const bp={name:"lineEnding",tokenize:x8};function x8(e,t){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),ir(e,t,"linePrefix")}}const Id={name:"thematicBreak",tokenize:y8};function y8(e,t,r){let s=0,a;return i;function i(h){return e.enter("thematicBreak"),l(h)}function l(h){return a=h,u(h)}function u(h){return h===a?(e.enter("thematicBreakSequence"),d(h)):s>=3&&(h===null||jt(h))?(e.exit("thematicBreak"),t(h)):r(h)}function d(h){return h===a?(e.consume(h),s++,d):(e.exit("thematicBreakSequence"),Gt(h)?ir(e,u,"whitespace")(h):u(h))}}const Sn={continuation:{tokenize:j8},exit:S8,name:"list",tokenize:w8},b8={partial:!0,tokenize:k8},v8={partial:!0,tokenize:N8};function w8(e,t,r){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return u;function u(x){const v=s.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!s.containerState.marker||x===s.containerState.marker:Qy(x)){if(s.containerState.type||(s.containerState.type=v,e.enter(v,{_container:!0})),v==="listUnordered")return e.enter("listItemPrefix"),x===42||x===45?e.check(Id,r,h)(x):h(x);if(!s.interrupt||x===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(x)}return r(x)}function d(x){return Qy(x)&&++l<10?(e.consume(x),d):(!s.interrupt||l<2)&&(s.containerState.marker?x===s.containerState.marker:x===41||x===46)?(e.exit("listItemValue"),h(x)):r(x)}function h(x){return e.enter("listItemMarker"),e.consume(x),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||x,e.check(Lf,s.interrupt?r:f,e.attempt(b8,g,m))}function f(x){return s.containerState.initialBlankLine=!0,i++,g(x)}function m(x){return Gt(x)?(e.enter("listItemPrefixWhitespace"),e.consume(x),e.exit("listItemPrefixWhitespace"),g):r(x)}function g(x){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(x)}}function j8(e,t,r){const s=this;return s.containerState._closeFlow=void 0,e.check(Lf,a,i);function a(u){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,ir(e,t,"listItemIndent",s.containerState.size+1)(u)}function i(u){return s.containerState.furtherBlankLines||!Gt(u)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,l(u)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(v8,t,l)(u))}function l(u){return s.containerState._closeFlow=!0,s.interrupt=void 0,ir(e,e.attempt(Sn,t,r),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function N8(e,t,r){const s=this;return ir(e,a,"listItemIndent",s.containerState.size+1);function a(i){const l=s.events[s.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===s.containerState.size?t(i):r(i)}}function S8(e){e.exit(this.containerState.type)}function k8(e,t,r){const s=this;return ir(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const l=s.events[s.events.length-1];return!Gt(i)&&l&&l[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const YN={name:"setextUnderline",resolveTo:C8,tokenize:_8};function C8(e,t){let r=e.length,s,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){s=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const l={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",l,t]),e.splice(i+1,0,["exit",e[s][1],t]),e[s][1].end={...e[i][1].end}):e[s][1]=l,e.push(["exit",l,t]),e}function _8(e,t,r){const s=this;let a;return i;function i(h){let f=s.events.length,m;for(;f--;)if(s.events[f][1].type!=="lineEnding"&&s.events[f][1].type!=="linePrefix"&&s.events[f][1].type!=="content"){m=s.events[f][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(e.enter("setextHeadingLine"),a=h,l(h)):r(h)}function l(h){return e.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===a?(e.consume(h),u):(e.exit("setextHeadingLineSequence"),Gt(h)?ir(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||jt(h)?(e.exit("setextHeadingLine"),t(h)):r(h)}}const E8={tokenize:D8};function D8(e){const t=this,r=e.attempt(Lf,s,e.attempt(this.parser.constructs.flowInitial,a,ir(e,e.attempt(this.parser.constructs.flow,a,e.attempt(IF,a)),"linePrefix")));return r;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const A8={resolveAll:TD()},T8=AD("string"),P8=AD("text");function AD(e){return{resolveAll:TD(e==="text"?R8:void 0),tokenize:t};function t(r){const s=this,a=this.parser.constructs[e],i=r.attempt(a,l,u);return l;function l(f){return h(f)?i(f):u(f)}function u(f){if(f===null){r.consume(f);return}return r.enter("data"),r.consume(f),d}function d(f){return h(f)?(r.exit("data"),i(f)):(r.consume(f),d)}function h(f){if(f===null)return!0;const m=a[f];let g=-1;if(m)for(;++g<m.length;){const x=m[g];if(!x.previous||x.previous.call(s,s.previous))return!0}return!1}}}function TD(e){return t;function t(r,s){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,s):r}}function R8(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const s=e[r-1][1],a=t.sliceStream(s);let i=a.length,l=-1,u=0,d;for(;i--;){const h=a[i];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)d=!0,u++;else if(h!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(u=0),u){const h={type:r===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:s.start._bufferIndex+l,_index:s.start._index+i,line:s.end.line,column:s.end.column-u,offset:s.end.offset-u},end:{...s.end}};s.end={...h.start},s.start.offset===s.end.offset?Object.assign(s,h):(e.splice(r,0,["enter",h,t],["exit",h,t]),r+=2)}r++}return e}const I8={42:Sn,43:Sn,45:Sn,48:Sn,49:Sn,50:Sn,51:Sn,52:Sn,53:Sn,54:Sn,55:Sn,56:Sn,57:Sn,62:ND},M8={91:FF},O8={[-2]:yp,[-1]:yp,32:yp},$8={35:WF,42:Id,45:[YN,Id],60:KF,61:YN,95:Id,96:HN,126:HN},L8={38:kD,92:SD},F8={[-5]:bp,[-4]:bp,[-3]:bp,33:m8,38:kD,42:Xy,60:[pF,r8],91:p8,92:[qF,SD],93:nv,95:Xy,96:EF},B8={null:[Xy,A8]},z8={null:[42,95]},G8={null:[]},q8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:z8,contentInitial:M8,disable:G8,document:I8,flow:$8,flowInitial:O8,insideSpan:B8,string:L8,text:F8},Symbol.toStringTag,{value:"Module"}));function U8(e,t,r){let s={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let l=[],u=[];const d={attempt:T(_),check:T(D),consume:N,enter:E,exit:S,interrupt:T(D,{interrupt:!0})},h={code:null,containerState:{},defineSkip:b,events:[],now:v,parser:e,previous:null,sliceSerialize:g,sliceStream:x,write:m};let f=t.tokenize.call(h,d);return t.resolveAll&&i.push(t),h;function m($){return l=is(l,$),w(),l[l.length-1]!==null?[]:(P(t,0),h.events=rv(i,h.events,h),h.events)}function g($,z){return H8(x($),z)}function x($){return W8(l,$)}function v(){const{_bufferIndex:$,_index:z,line:q,column:H,offset:re}=s;return{_bufferIndex:$,_index:z,line:q,column:H,offset:re}}function b($){a[$.line]=$.column,F()}function w(){let $;for(;s._index<l.length;){const z=l[s._index];if(typeof z=="string")for($=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===$&&s._bufferIndex<z.length;)C(z.charCodeAt(s._bufferIndex));else C(z)}}function C($){f=f($)}function N($){jt($)?(s.line++,s.column=1,s.offset+=$===-3?2:1,F()):$!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===l[s._index].length&&(s._bufferIndex=-1,s._index++)),h.previous=$}function E($,z){const q=z||{};return q.type=$,q.start=v(),h.events.push(["enter",q,h]),u.push(q),q}function S($){const z=u.pop();return z.end=v(),h.events.push(["exit",z,h]),z}function _($,z){P($,z.from)}function D($,z){z.restore()}function T($,z){return q;function q(H,re,ee){let L,M,W,R;return Array.isArray(H)?Z(H):"tokenize"in H?Z([H]):U(H);function U(G){return ae;function ae(X){const V=X!==null&&G[X],ie=X!==null&&G.null,be=[...Array.isArray(V)?V:V?[V]:[],...Array.isArray(ie)?ie:ie?[ie]:[]];return Z(be)(X)}}function Z(G){return L=G,M=0,G.length===0?ee:B(G[M])}function B(G){return ae;function ae(X){return R=O(),W=G,G.partial||(h.currentConstruct=G),G.name&&h.parser.constructs.disable.null.includes(G.name)?Se():G.tokenize.call(z?Object.assign(Object.create(h),z):h,d,Ce,Se)(X)}}function Ce(G){return $(W,R),re}function Se(G){return R.restore(),++M<L.length?B(L[M]):ee}}}function P($,z){$.resolveAll&&!i.includes($)&&i.push($),$.resolve&&Fs(h.events,z,h.events.length-z,$.resolve(h.events.slice(z),h)),$.resolveTo&&(h.events=$.resolveTo(h.events,h))}function O(){const $=v(),z=h.previous,q=h.currentConstruct,H=h.events.length,re=Array.from(u);return{from:H,restore:ee};function ee(){s=$,h.previous=z,h.currentConstruct=q,h.events.length=H,u=re,F()}}function F(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function W8(e,t){const r=t.start._index,s=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let l;if(r===a)l=[e[r].slice(s,i)];else{if(l=e.slice(r,a),s>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(s):l.shift()}i>0&&l.push(e[a].slice(0,i))}return l}function H8(e,t){let r=-1;const s=[];let a;for(;++r<e.length;){const i=e[r];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(i)}a=i===-2,s.push(l)}return s.join("")}function V8(e){const s={constructs:eF([q8,...(e||{}).extensions||[]]),content:a(lF),defined:[],document:a(uF),flow:a(E8),lazy:{},string:a(T8),text:a(P8)};return s;function a(i){return l;function l(u){return U8(s,i,u)}}}function Y8(e){for(;!CD(e););return e}const KN=/[\0\t\n\r]/g;function K8(){let e=1,t="",r=!0,s;return a;function a(i,l,u){const d=[];let h,f,m,g,x;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),m=0,t="",r&&(i.charCodeAt(0)===65279&&m++,r=void 0);m<i.length;){if(KN.lastIndex=m,h=KN.exec(i),g=h&&h.index!==void 0?h.index:i.length,x=i.charCodeAt(g),!h){t=i.slice(m);break}if(x===10&&m===g&&s)d.push(-3),s=void 0;else switch(s&&(d.push(-5),s=void 0),m<g&&(d.push(i.slice(m,g)),e+=g-m),x){case 0:{d.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,d.push(-2);e++<f;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:s=!0,e=1}m=g+1}return u&&(s&&d.push(-5),t&&d.push(t),d.push(null)),d}}const Q8=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function X8(e){return e.replace(Q8,J8)}function J8(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return jD(r.slice(i?2:1),i?16:10)}return tv(r)||e}const PD={}.hasOwnProperty;function Z8(e,t,r){return typeof t!="string"&&(r=t,t=void 0),e7(r)(Y8(V8(r).document().write(K8()(e,t,!0))))}function e7(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ge),autolinkProtocol:O,autolinkEmail:O,atxHeading:i(Je),blockQuote:i(ie),characterEscape:O,characterReference:O,codeFenced:i(be),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(be,l),codeText:i(ve,l),codeTextData:O,data:O,codeFlowValue:O,definition:i(Pe),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(He),hardBreakEscape:i(le),hardBreakTrailing:i(le),htmlFlow:i(fe,l),htmlFlowData:O,htmlText:i(fe,l),htmlTextData:O,image:i(Ae),label:l,link:i(Ge),listItem:i(ye),listItemValue:g,listOrdered:i(Ye,m),listUnordered:i(Ye),paragraph:i(he),reference:B,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(Je),strong:i(ne),thematicBreak:i(Be)},exit:{atxHeading:d(),atxHeadingSequence:_,autolink:d(),autolinkEmail:V,autolinkProtocol:X,blockQuote:d(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:Se,characterReferenceMarkerNumeric:Se,characterReferenceValue:G,characterReference:ae,codeFenced:d(w),codeFencedFence:b,codeFencedFenceInfo:x,codeFencedFenceMeta:v,codeFlowValue:F,codeIndented:d(C),codeText:d(re),codeTextData:F,data:F,definition:d(),definitionDestinationString:S,definitionLabelString:N,definitionTitleString:E,emphasis:d(),hardBreakEscape:d(z),hardBreakTrailing:d(z),htmlFlow:d(q),htmlFlowData:F,htmlText:d(H),htmlTextData:F,image:d(L),label:W,labelText:M,lineEnding:$,link:d(ee),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:Ce,resourceDestinationString:R,resourceTitleString:U,resource:Z,setextHeading:d(P),setextHeadingLineSequence:T,setextHeadingText:D,strong:d(),thematicBreak:d()}};RD(t,(e||{}).mdastExtensions||[]);const r={};return s;function s(oe){let Ne={type:"root",children:[]};const pe={stack:[Ne],tokenStack:[],config:t,enter:u,exit:h,buffer:l,resume:f,data:r},K=[];let se=-1;for(;++se<oe.length;)if(oe[se][1].type==="listOrdered"||oe[se][1].type==="listUnordered")if(oe[se][0]==="enter")K.push(se);else{const _e=K.pop();se=a(oe,_e,se)}for(se=-1;++se<oe.length;){const _e=t[oe[se][0]];PD.call(_e,oe[se][1].type)&&_e[oe[se][1].type].call(Object.assign({sliceSerialize:oe[se][2].sliceSerialize},pe),oe[se][1])}if(pe.tokenStack.length>0){const _e=pe.tokenStack[pe.tokenStack.length-1];(_e[1]||QN).call(pe,void 0,_e[0])}for(Ne.position={start:Ea(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:Ea(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},se=-1;++se<t.transforms.length;)Ne=t.transforms[se](Ne)||Ne;return Ne}function a(oe,Ne,pe){let K=Ne-1,se=-1,_e=!1,Ke,Ve,tt,it;for(;++K<=pe;){const qe=oe[K];switch(qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qe[0]==="enter"?se++:se--,it=void 0;break}case"lineEndingBlank":{qe[0]==="enter"&&(Ke&&!it&&!se&&!tt&&(tt=K),it=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:it=void 0}if(!se&&qe[0]==="enter"&&qe[1].type==="listItemPrefix"||se===-1&&qe[0]==="exit"&&(qe[1].type==="listUnordered"||qe[1].type==="listOrdered")){if(Ke){let dt=K;for(Ve=void 0;dt--;){const yt=oe[dt];if(yt[1].type==="lineEnding"||yt[1].type==="lineEndingBlank"){if(yt[0]==="exit")continue;Ve&&(oe[Ve][1].type="lineEndingBlank",_e=!0),yt[1].type="lineEnding",Ve=dt}else if(!(yt[1].type==="linePrefix"||yt[1].type==="blockQuotePrefix"||yt[1].type==="blockQuotePrefixWhitespace"||yt[1].type==="blockQuoteMarker"||yt[1].type==="listItemIndent"))break}tt&&(!Ve||tt<Ve)&&(Ke._spread=!0),Ke.end=Object.assign({},Ve?oe[Ve][1].start:qe[1].end),oe.splice(Ve||K,0,["exit",Ke,qe[2]]),K++,pe++}if(qe[1].type==="listItemPrefix"){const dt={type:"listItem",_spread:!1,start:Object.assign({},qe[1].start),end:void 0};Ke=dt,oe.splice(K,0,["enter",dt,qe[2]]),K++,pe++,tt=void 0,it=!0}}}return oe[Ne][1]._spread=_e,pe}function i(oe,Ne){return pe;function pe(K){u.call(this,oe(K),K),Ne&&Ne.call(this,K)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(oe,Ne,pe){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([Ne,pe||void 0]),oe.position={start:Ea(Ne.start),end:void 0}}function d(oe){return Ne;function Ne(pe){oe&&oe.call(this,pe),h.call(this,pe)}}function h(oe,Ne){const pe=this.stack.pop(),K=this.tokenStack.pop();if(K)K[0].type!==oe.type&&(Ne?Ne.call(this,oe,K[0]):(K[1]||QN).call(this,oe,K[0]));else throw new Error("Cannot close `"+oe.type+"` ("+Jl({start:oe.start,end:oe.end})+"): it’s not open");pe.position.end=Ea(oe.end)}function f(){return JL(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(oe){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function x(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=oe}function v(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=oe}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=oe.replace(/(\r?\n|\r)$/g,"")}function N(oe){const Ne=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Ne,pe.identifier=wo(this.sliceSerialize(oe)).toLowerCase()}function E(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=oe}function S(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=oe}function _(oe){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const pe=this.sliceSerialize(oe).length;Ne.depth=pe}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function T(oe){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function O(oe){const pe=this.stack[this.stack.length-1].children;let K=pe[pe.length-1];(!K||K.type!=="text")&&(K=Te(),K.position={start:Ea(oe.start),end:void 0},pe.push(K)),this.stack.push(K)}function F(oe){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(oe),Ne.position.end=Ea(oe.end)}function $(oe){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=Ne.children[Ne.children.length-1];pe.position.end=Ea(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ne.type)&&(O.call(this,oe),F.call(this,oe))}function z(){this.data.atHardBreak=!0}function q(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=oe}function H(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=oe}function re(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=oe}function ee(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=Ne,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function L(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=Ne,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function M(oe){const Ne=this.sliceSerialize(oe),pe=this.stack[this.stack.length-2];pe.label=X8(Ne),pe.identifier=wo(Ne).toLowerCase()}function W(){const oe=this.stack[this.stack.length-1],Ne=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const K=oe.children;pe.children=K}else pe.alt=Ne}function R(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=oe}function U(){const oe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=oe}function Z(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function Ce(oe){const Ne=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Ne,pe.identifier=wo(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function Se(oe){this.data.characterReferenceType=oe.type}function G(oe){const Ne=this.sliceSerialize(oe),pe=this.data.characterReferenceType;let K;pe?(K=jD(Ne,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):K=tv(Ne);const se=this.stack[this.stack.length-1];se.value+=K}function ae(oe){const Ne=this.stack.pop();Ne.position.end=Ea(oe.end)}function X(oe){F.call(this,oe);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(oe)}function V(oe){F.call(this,oe);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(oe)}function ie(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function He(){return{type:"emphasis",children:[]}}function Je(){return{type:"heading",depth:0,children:[]}}function le(){return{type:"break"}}function fe(){return{type:"html",value:""}}function Ae(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function Ye(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function ye(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function he(){return{type:"paragraph",children:[]}}function ne(){return{type:"strong",children:[]}}function Te(){return{type:"text",value:""}}function Be(){return{type:"thematicBreak"}}}function Ea(e){return{line:e.line,column:e.column,offset:e.offset}}function RD(e,t){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?RD(e,s):t7(e,s)}}function t7(e,t){let r;for(r in t)if(PD.call(t,r))switch(r){case"canContainEols":{const s=t[r];s&&e[r].push(...s);break}case"transforms":{const s=t[r];s&&e[r].push(...s);break}case"enter":case"exit":{const s=t[r];s&&Object.assign(e[r],s);break}}}function QN(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Jl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Jl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Jl({start:t.start,end:t.end})+") is still open")}function r7(e){const t=this;t.parser=r;function r(s){return Z8(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function n7(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function s7(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function a7(e,t){const r=t.value?t.value+`
`:"",s={};t.lang&&(s.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:r}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function i7(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function o7(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function l7(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=Ho(s.toLowerCase()),i=e.footnoteOrder.indexOf(s);let l,u=e.footnoteCounts.get(s);u===void 0?(u=0,e.footnoteOrder.push(s),l=e.footnoteOrder.length):l=i+1,u+=1,e.footnoteCounts.set(s,u);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function c7(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function u7(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function ID(e,t){const r=t.referenceType;let s="]";if(r==="collapsed"?s+="[]":r==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=s:a.push({type:"text",value:s}),a}function d7(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return ID(e,t);const a={src:Ho(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function f7(e,t){const r={src:Ho(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function m7(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const s={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,s),e.applyData(t,s)}function h7(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return ID(e,t);const a={href:Ho(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function p7(e,t){const r={href:Ho(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function g7(e,t,r){const s=e.all(t),a=r?x7(r):MD(t),i={},l=[];if(typeof t.checked=="boolean"){const f=s[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let u=-1;for(;++u<s.length;){const f=s[u];(a||u!==0||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?l.push(...f.children):l.push(f)}const d=s[s.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:l};return e.patch(t,h),e.applyData(t,h)}function x7(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let s=-1;for(;!t&&++s<r.length;)t=MD(r[s])}return t}function MD(e){const t=e.spread;return t??e.children.length>1}function y7(e,t){const r={},s=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<s.length;){const l=s[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function b7(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function v7(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function w7(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function j7(e,t){const r=e.all(t),s=r.shift(),a=[];if(s){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],l),a.push(l)}if(r.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},u=Xb(t.children[1]),d=pD(t.children[t.children.length-1]);u&&d&&(l.position={start:u,end:d}),a.push(l)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function N7(e,t,r){const s=r?r.children:void 0,i=(s?s.indexOf(t):1)===0?"th":"td",l=r&&r.type==="table"?r.align:void 0,u=l?l.length:t.children.length;let d=-1;const h=[];for(;++d<u;){const m=t.children[d],g={},x=l?l[d]:void 0;x&&(g.align=x);let v={type:"element",tagName:i,properties:g,children:[]};m&&(v.children=e.all(m),e.patch(m,v),v=e.applyData(m,v)),h.push(v)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,f),e.applyData(t,f)}function S7(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const XN=9,JN=32;function k7(e){const t=String(e),r=/\r?\n|\r/g;let s=r.exec(t),a=0;const i=[];for(;s;)i.push(ZN(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=r.exec(t);return i.push(ZN(t.slice(a),a>0,!1)),i.join("")}function ZN(e,t,r){let s=0,a=e.length;if(t){let i=e.codePointAt(s);for(;i===XN||i===JN;)s++,i=e.codePointAt(s)}if(r){let i=e.codePointAt(a-1);for(;i===XN||i===JN;)a--,i=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function C7(e,t){const r={type:"text",value:k7(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function _7(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const E7={blockquote:n7,break:s7,code:a7,delete:i7,emphasis:o7,footnoteReference:l7,heading:c7,html:u7,imageReference:d7,image:f7,inlineCode:m7,linkReference:h7,link:p7,listItem:g7,list:y7,paragraph:b7,root:v7,strong:w7,table:j7,tableCell:S7,tableRow:N7,text:C7,thematicBreak:_7,toml:gd,yaml:gd,definition:gd,footnoteDefinition:gd};function gd(){}const OD=-1,Ff=0,ec=1,nf=2,sv=3,av=4,iv=5,ov=6,$D=7,LD=8,e2=typeof self=="object"?self:globalThis,D7=(e,t)=>{const r=(a,i)=>(e.set(i,a),a),s=a=>{if(e.has(a))return e.get(a);const[i,l]=t[a];switch(i){case Ff:case OD:return r(l,a);case ec:{const u=r([],a);for(const d of l)u.push(s(d));return u}case nf:{const u=r({},a);for(const[d,h]of l)u[s(d)]=s(h);return u}case sv:return r(new Date(l),a);case av:{const{source:u,flags:d}=l;return r(new RegExp(u,d),a)}case iv:{const u=r(new Map,a);for(const[d,h]of l)u.set(s(d),s(h));return u}case ov:{const u=r(new Set,a);for(const d of l)u.add(s(d));return u}case $D:{const{name:u,message:d}=l;return r(new e2[u](d),a)}case LD:return r(BigInt(l),a);case"BigInt":return r(Object(BigInt(l)),a);case"ArrayBuffer":return r(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return r(new DataView(u),l)}}return r(new e2[i](l),a)};return s},t2=e=>D7(new Map,e)(0),ho="",{toString:A7}={},{keys:T7}=Object,Fl=e=>{const t=typeof e;if(t!=="object"||!e)return[Ff,t];const r=A7.call(e).slice(8,-1);switch(r){case"Array":return[ec,ho];case"Object":return[nf,ho];case"Date":return[sv,ho];case"RegExp":return[av,ho];case"Map":return[iv,ho];case"Set":return[ov,ho];case"DataView":return[ec,r]}return r.includes("Array")?[ec,r]:r.includes("Error")?[$D,r]:[nf,r]},xd=([e,t])=>e===Ff&&(t==="function"||t==="symbol"),P7=(e,t,r,s)=>{const a=(l,u)=>{const d=s.push(l)-1;return r.set(u,d),d},i=l=>{if(r.has(l))return r.get(l);let[u,d]=Fl(l);switch(u){case Ff:{let f=l;switch(d){case"bigint":u=LD,f=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);f=null;break;case"undefined":return a([OD],l)}return a([u,f],l)}case ec:{if(d){let g=l;return d==="DataView"?g=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(l)),a([d,[...g]],l)}const f=[],m=a([u,f],l);for(const g of l)f.push(i(g));return m}case nf:{if(d)switch(d){case"BigInt":return a([d,l.toString()],l);case"Boolean":case"Number":case"String":return a([d,l.valueOf()],l)}if(t&&"toJSON"in l)return i(l.toJSON());const f=[],m=a([u,f],l);for(const g of T7(l))(e||!xd(Fl(l[g])))&&f.push([i(g),i(l[g])]);return m}case sv:return a([u,l.toISOString()],l);case av:{const{source:f,flags:m}=l;return a([u,{source:f,flags:m}],l)}case iv:{const f=[],m=a([u,f],l);for(const[g,x]of l)(e||!(xd(Fl(g))||xd(Fl(x))))&&f.push([i(g),i(x)]);return m}case ov:{const f=[],m=a([u,f],l);for(const g of l)(e||!xd(Fl(g)))&&f.push(i(g));return m}}const{message:h}=l;return a([u,{name:d,message:h}],l)};return i},r2=(e,{json:t,lossy:r}={})=>{const s=[];return P7(!(t||r),!!t,new Map,s)(e),s},sf=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?t2(r2(e,t)):structuredClone(e):(e,t)=>t2(r2(e,t));function R7(e,t){const r=[{type:"text",value:"↩"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function I7(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function M7(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||R7,s=e.options.footnoteBackLabel||I7,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const f=e.all(h),m=String(h.identifier).toUpperCase(),g=Ho(m.toLowerCase());let x=0;const v=[],b=e.footnoteCounts.get(m);for(;b!==void 0&&++x<=b;){v.length>0&&v.push({type:"text",value:" "});let N=typeof r=="string"?r:r(d,x);typeof N=="string"&&(N={type:"text",value:N}),v.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(d,x),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const N=w.children[w.children.length-1];N&&N.type==="text"?N.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...v)}else f.push(...v);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(h,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...sf(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const FD=function(e){if(e==null)return F7;if(typeof e=="function")return Bf(e);if(typeof e=="object")return Array.isArray(e)?O7(e):$7(e);if(typeof e=="string")return L7(e);throw new Error("Expected function, string, or object as test")};function O7(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=FD(e[r]);return Bf(s);function s(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function $7(e){const t=e;return Bf(r);function r(s){const a=s;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function L7(e){return Bf(t);function t(r){return r&&r.type===e}}function Bf(e){return t;function t(r,s,a){return!!(B7(r)&&e.call(this,r,typeof s=="number"?s:void 0,a||void 0))}}function F7(){return!0}function B7(e){return e!==null&&typeof e=="object"&&"type"in e}const BD=[],z7=!0,n2=!1,G7="skip";function q7(e,t,r,s){let a;typeof t=="function"&&typeof r!="function"?(s=r,r=t):a=t;const i=FD(a),l=s?-1:1;u(e,void 0,[])();function u(d,h,f){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const x=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=BD,v,b,w;if((!t||i(d,h,f[f.length-1]||void 0))&&(x=U7(r(d,f)),x[0]===n2))return x;if("children"in d&&d.children){const C=d;if(C.children&&x[0]!==G7)for(b=(s?C.children.length:-1)+l,w=f.concat(C);b>-1&&b<C.children.length;){const N=C.children[b];if(v=u(N,b,w)(),v[0]===n2)return v;b=typeof v[1]=="number"?v[1]:b+l}}return x}}}function U7(e){return Array.isArray(e)?e:typeof e=="number"?[z7,e]:e==null?BD:[e]}function zD(e,t,r,s){let a,i,l;typeof t=="function"?(i=void 0,l=t,a=r):(i=t,l=r,a=s),q7(e,i,u,a);function u(d,h){const f=h[h.length-1],m=f?f.children.indexOf(d):void 0;return l(d,m,f)}}const Jy={}.hasOwnProperty,W7={};function H7(e,t){const r=t||W7,s=new Map,a=new Map,i=new Map,l={...E7,...r.handlers},u={all:h,applyData:Y7,definitionById:s,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:l,one:d,options:r,patch:V7,wrap:Q7};return zD(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const m=f.type==="definition"?s:a,g=String(f.identifier).toUpperCase();m.has(g)||m.set(g,f)}}),u;function d(f,m){const g=f.type,x=u.handlers[g];if(Jy.call(u.handlers,g)&&x)return x(u,f,m);if(u.options.passThrough&&u.options.passThrough.includes(g)){if("children"in f){const{children:b,...w}=f,C=sf(w);return C.children=u.all(f),C}return sf(f)}return(u.options.unknownHandler||K7)(u,f,m)}function h(f){const m=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const v=u.one(g[x],f);if(v){if(x&&g[x-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=s2(v.value)),!Array.isArray(v)&&v.type==="element")){const b=v.children[0];b&&b.type==="text"&&(b.value=s2(b.value))}Array.isArray(v)?m.push(...v):m.push(v)}}}return m}}function V7(e,t){e.position&&(t.position=AL(e))}function Y7(e,t){let r=t;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof s=="string")if(r.type==="element")r.tagName=s;else{const l="children"in r?r.children:[r];r={type:"element",tagName:s,properties:{},children:l}}r.type==="element"&&i&&Object.assign(r.properties,sf(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function K7(e,t){const r=t.data||{},s="value"in t&&!(Jy.call(r,"hProperties")||Jy.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Q7(e,t){const r=[];let s=-1;for(t&&r.push({type:"text",value:`
`});++s<e.length;)s&&r.push({type:"text",value:`
`}),r.push(e[s]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function s2(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function a2(e,t){const r=H7(e,t),s=r.one(e,void 0),a=M7(r),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function X7(e,t){return e&&"run"in e?async function(r,s){const a=a2(r,{file:s,...t});await e.run(a,s)}:function(r,s){return a2(r,{file:s,...e||t})}}function i2(e){if(e)throw e}var vp,o2;function J7(){if(o2)return vp;o2=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},i=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var f=e.call(h,"constructor"),m=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!f&&!m)return!1;var g;for(g in h);return typeof g>"u"||e.call(h,g)},l=function(h,f){r&&f.name==="__proto__"?r(h,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):h[f.name]=f.newValue},u=function(h,f){if(f==="__proto__")if(e.call(h,f)){if(s)return s(h,f).value}else return;return h[f]};return vp=function d(){var h,f,m,g,x,v,b=arguments[0],w=1,C=arguments.length,N=!1;for(typeof b=="boolean"&&(N=b,b=arguments[1]||{},w=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});w<C;++w)if(h=arguments[w],h!=null)for(f in h)m=u(b,f),g=u(h,f),b!==g&&(N&&g&&(i(g)||(x=a(g)))?(x?(x=!1,v=m&&a(m)?m:[]):v=m&&i(m)?m:{},l(b,{name:f,newValue:d(N,v,g)})):typeof g<"u"&&l(b,{name:f,newValue:g}));return b},vp}var Z7=J7();const wp=Vr(Z7);function Zy(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eB(){const e=[],t={run:r,use:s};return t;function r(...a){let i=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...a);function u(d,...h){const f=e[++i];let m=-1;if(d){l(d);return}for(;++m<a.length;)(h[m]===null||h[m]===void 0)&&(h[m]=a[m]);a=h,f?tB(f,u)(...h):l(null,...h)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function tB(e,t){let r;return s;function s(...l){const u=e.length>l.length;let d;u&&l.push(a);try{d=e.apply(this,l)}catch(h){const f=h;if(u&&r)throw f;return a(f)}u||(d&&d.then&&typeof d.then=="function"?d.then(i,a):d instanceof Error?a(d):i(d))}function a(l,...u){r||(r=!0,t(l,...u))}function i(l){a(null,l)}}const Ts={basename:rB,dirname:nB,extname:sB,join:aB,sep:"/"};function rB(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Uc(e);let r=0,s=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let l=-1,u=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else l<0&&(i=!0,l=a+1),u>-1&&(e.codePointAt(a)===t.codePointAt(u--)?u<0&&(s=a):(u=-1,s=l));return r===s?s=l:s<0&&(s=e.length),e.slice(r,s)}function nB(e){if(Uc(e),e.length===0)return".";let t=-1,r=e.length,s;for(;--r;)if(e.codePointAt(r)===47){if(s){t=r;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function sB(e){Uc(e);let t=e.length,r=-1,s=0,a=-1,i=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){s=t+1;break}continue}r<0&&(l=!0,r=t+1),u===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===s+1?"":e.slice(a,r)}function aB(...e){let t=-1,r;for(;++t<e.length;)Uc(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":iB(r)}function iB(e){Uc(e);const t=e.codePointAt(0)===47;let r=oB(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function oB(e,t){let r="",s=0,a=-1,i=0,l=-1,u,d;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(a===l-1||i===1))if(a!==l-1&&i===2){if(r.length<2||s!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",s=0):(r=r.slice(0,d),s=r.length-1-r.lastIndexOf("/")),a=l,i=0;continue}}else if(r.length>0){r="",s=0,a=l,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),s=l-a-1;a=l,i=0}else u===46&&i>-1?i++:i=-1}return r}function Uc(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const lB={cwd:cB};function cB(){return"/"}function eb(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function uB(e){if(typeof e=="string")e=new URL(e);else if(!eb(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return dB(e)}function dB(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const s=t.codePointAt(r+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const jp=["history","path","basename","stem","extname","dirname"];class GD{constructor(t){let r;t?eb(t)?r={path:t}:typeof t=="string"||fB(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":lB.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<jp.length;){const i=jp[s];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)jp.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Ts.basename(this.path):void 0}set basename(t){Sp(t,"basename"),Np(t,"basename"),this.path=Ts.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ts.dirname(this.path):void 0}set dirname(t){l2(this.basename,"dirname"),this.path=Ts.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ts.extname(this.path):void 0}set extname(t){if(Np(t,"extname"),l2(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ts.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){eb(t)&&(t=uB(t)),Sp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ts.basename(this.path,this.extname):void 0}set stem(t){Sp(t,"stem"),Np(t,"stem"),this.path=Ts.join(this.dirname||"",t+(this.extname||""))}fail(t,r,s){const a=this.message(t,r,s);throw a.fatal=!0,a}info(t,r,s){const a=this.message(t,r,s);return a.fatal=void 0,a}message(t,r,s){const a=new sn(t,r,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Np(e,t){if(e&&e.includes(Ts.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ts.sep+"`")}function Sp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function l2(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function fB(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const mB=function(e){const s=this.constructor.prototype,a=s[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,s),i},hB={}.hasOwnProperty;class lv extends mB{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eB()}copy(){const t=new lv;let r=-1;for(;++r<this.attachers.length;){const s=this.attachers[r];t.use(...s)}return t.data(wp(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(_p("data",this.frozen),this.namespace[t]=r,this):hB.call(this.namespace,t)&&this.namespace[t]||void 0:t?(_p("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=r.call(t,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=yd(t),s=this.parser||this.Parser;return kp("parse",s),s(String(r),r)}process(t,r){const s=this;return this.freeze(),kp("process",this.parser||this.Parser),Cp("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,l){const u=yd(t),d=s.parse(u);s.run(d,u,function(f,m,g){if(f||!m||!g)return h(f);const x=m,v=s.stringify(x,g);xB(v)?g.value=v:g.result=v,h(f,g)});function h(f,m){f||!m?l(f):i?i(m):r(void 0,m)}}}processSync(t){let r=!1,s;return this.freeze(),kp("processSync",this.parser||this.Parser),Cp("processSync",this.compiler||this.Compiler),this.process(t,a),u2("processSync","process",r),s;function a(i,l){r=!0,i2(i),s=l}}run(t,r,s){c2(t),this.freeze();const a=this.transformers;return!s&&typeof r=="function"&&(s=r,r=void 0),s?i(void 0,s):new Promise(i);function i(l,u){const d=yd(r);a.run(t,d,h);function h(f,m,g){const x=m||t;f?u(f):l?l(x):s(void 0,x,g)}}}runSync(t,r){let s=!1,a;return this.run(t,r,i),u2("runSync","run",s),a;function i(l,u){i2(l),a=u,s=!0}}stringify(t,r){this.freeze();const s=yd(r),a=this.compiler||this.Compiler;return Cp("stringify",a),c2(t),a(t,s)}use(t,...r){const s=this.attachers,a=this.namespace;if(_p("use",this.frozen),t!=null)if(typeof t=="function")d(t,r);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[f,...m]=h;d(f,m)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(a.settings=wp(!0,a.settings,h.settings))}function u(h){let f=-1;if(h!=null)if(Array.isArray(h))for(;++f<h.length;){const m=h[f];i(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,f){let m=-1,g=-1;for(;++m<s.length;)if(s[m][0]===h){g=m;break}if(g===-1)s.push([h,...f]);else if(f.length>0){let[x,...v]=f;const b=s[g][1];Zy(b)&&Zy(x)&&(x=wp(!0,b,x)),s[g]=[h,x,...v]}}}}const pB=new lv().freeze();function kp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Cp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function _p(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function c2(e){if(!Zy(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function u2(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yd(e){return gB(e)?e:new GD(e)}function gB(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function xB(e){return typeof e=="string"||yB(e)}function yB(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bB="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",d2=[],f2={allowDangerousHtml:!0},vB=/^(https?|ircs?|mailto|xmpp)$/i,wB=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _o(e){const t=jB(e),r=NB(e);return SB(t.runSync(t.parse(r),r),e)}function jB(e){const t=e.rehypePlugins||d2,r=e.remarkPlugins||d2,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...f2}:f2;return pB().use(r7).use(r).use(X7,s).use(t)}function NB(e){const t=e.children||"",r=new GD;return typeof t=="string"&&(r.value=t),r}function SB(e,t){const r=t.allowedElements,s=t.allowElement,a=t.components,i=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||kB;for(const f of wB)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+bB+f.id,void 0);return zD(e,h),ML(e,{Fragment:n.Fragment,components:a,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function h(f,m,g){if(f.type==="raw"&&g&&typeof m=="number")return l?g.children.splice(m,1):g.children[m]={type:"text",value:f.value},m;if(f.type==="element"){let x;for(x in xp)if(Object.hasOwn(xp,x)&&Object.hasOwn(f.properties,x)){const v=f.properties[x],b=xp[x];(b===null||b.includes(f.tagName))&&(f.properties[x]=d(String(v||""),x,f))}}if(f.type==="element"){let x=r?!r.includes(f.tagName):i?i.includes(f.tagName):!1;if(!x&&s&&typeof m=="number"&&(x=!s(f,m,g)),x&&g&&typeof m=="number")return u&&f.children?g.children.splice(m,1,...f.children):g.children.splice(m,1),m}}}function kB(e){const t=e.indexOf(":"),r=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||s!==-1&&t>s||vB.test(e.slice(0,t))?e:""}const CB=({pageId:e})=>{const{getPage:t}=Ri(),[r,s]=j.useState(null),[a,i]=j.useState(!1),[l,u]=j.useState(null);return j.useEffect(()=>{i(!0),t(e).then(s).catch(d=>u("Failed to load page")).finally(()=>i(!1))},[e]),a?n.jsx("div",{className:"text-gray-400",children:"Loading page..."}):l?n.jsx("div",{className:"text-red-500",children:l}):r?n.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[n.jsx("h4",{className:"text-md font-bold mb-2",children:r.title}),n.jsx("div",{className:"prose max-w-none mb-2",children:n.jsx(_o,{children:r.content})}),r.attachments&&r.attachments.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:"Attachments:"}),n.jsx("ul",{className:"list-disc ml-5",children:r.attachments.map((d,h)=>n.jsx("li",{children:n.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:d.split("/").pop()})},h))})]})]}):null},cv=({modules:e,courseId:t,onSuccess:r,onCancel:s})=>{const[a,i]=j.useState(""),[l,u]=j.useState(""),[d,h]=j.useState(!1),[f,m]=j.useState(""),[g,x]=j.useState([]),[v,b]=j.useState(""),{createPage:w}=Ri();j.useEffect(()=>{t&&(async()=>{try{const S=await Ie.get(`/groups/sets/${t}`);x(S.data||[])}catch{x([])}})()},[t]);const C=async E=>{if(E.preventDefault(),!!a.trim()&&!(!f&&!v)){h(!0);try{const S={title:a,content:l};f&&(S.module=f),v&&(S.groupSet=v),await w(S),i(""),u(""),m(""),b(""),r()}catch(S){console.error("Error creating page:",S)}finally{h(!1)}}},N=()=>{i(""),u(""),m(""),b(""),s()};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-8 relative",children:[n.jsx("button",{type:"button",onClick:N,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold focus:outline-none","aria-label":"Close",children:"×"}),n.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Create New Page"}),n.jsxs("form",{onSubmit:C,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Title"}),n.jsx("input",{type:"text",id:"title",value:a,onChange:E=>i(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),n.jsx("textarea",{id:"content",value:l,onChange:E=>u(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:5})]}),n.jsxs("div",{className:"mb-6 flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),n.jsxs("select",{id:"page-module",name:"module",value:f,onChange:E=>{m(E.target.value),E.target.value&&b("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!!v,children:[n.jsx("option",{value:"",children:"Select a module"}),e.map(E=>n.jsx("option",{value:E._id,children:E.title},E._id))]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Set"}),n.jsxs("select",{id:"page-group-set",name:"groupSet",value:v,onChange:E=>{b(E.target.value),E.target.value&&m("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!!f,children:[n.jsx("option",{value:"",children:"Select a group set"}),g.map(E=>n.jsx("option",{value:E._id,children:E.name},E._id))]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:d||!f&&!v,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Creating...":"Create Page"})]})]})]})})},ke="http://localhost:5000",_B=()=>n.jsx("svg",{className:"h-5 w-5 text-blue-400 group-hover:text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M7 8h10M7 12h6m-6 4h8M5 20l1.5-4.5M19 20l-1.5-4.5M12 4a8 8 0 100 16 8 8 0 000-16z",strokeLinecap:"round",strokeLinejoin:"round"})}),EB=({module:e,onAddPage:t})=>{const[r,s]=j.useState(!1),[a,i]=j.useState(null),[l,u]=j.useState([]),[d,h]=j.useState(!1),[f,m]=j.useState(null),{user:g}=Et(),{getPages:x,deleteModule:v,toggleModulePublish:b}=Ri(),w=Lt(),[C,N]=j.useState(!1),[E,S]=j.useState([]),[_,D]=j.useState(!1),[T,P]=j.useState(null),[O,F]=j.useState(!1),[$,z]=j.useState(null),[q,H]=j.useState({}),[re,ee]=j.useState([]),[L,M]=j.useState(!1),[W,R]=j.useState(null);j.useEffect(()=>{(async()=>{if(r){console.log("Fetching pages for module:",e._id),h(!0),m(null);try{const ie=await x(e._id);console.log("Fetched pages:",ie),u(ie)}catch(ie){console.error("Error fetching pages:",ie),m("Failed to load pages")}finally{h(!1)}}})()},[r,e._id,x]),j.useEffect(()=>{(async()=>{if(r){D(!0),P(null);try{const ie=localStorage.getItem("token"),be=await me.get(`${ke}/api/assignments/module/${e._id}`,{headers:{Authorization:`Bearer ${ie}`}});S(be.data)}catch(ie){console.error("Assignments fetch error:",ie),P("Failed to load assignments")}finally{D(!1)}}})()},[r,e._id]),j.useEffect(()=>{(async()=>{if(r){M(!0),R(null);try{const ie=localStorage.getItem("token"),be=await me.get(`${ke}/api/threads/module/${e._id}`,{headers:{Authorization:`Bearer ${ie}`}});ee(be.data||[])}catch(ie){console.error("Discussions fetch error:",ie),R("Failed to load discussions")}finally{M(!1)}}})()},[r,e._id]);const U=()=>{s(!r)},Z=(V,ie)=>{V.stopPropagation(),w(`/pages/${ie}`)},B=V=>{V.stopPropagation(),N(!0),r||s(!0)},Ce=async()=>{N(!1),await x(e._id)},Se=async V=>{V.stopPropagation(),F(!0);try{await b(e._id)}catch(ie){console.error("Error toggling publish:",ie)}finally{F(!1)}},G=async V=>{z(V._id);try{const ie=localStorage.getItem("token"),be=await me.patch(`${ke}/api/assignments/${V._id}/publish`,{},{headers:{Authorization:`Bearer ${ie}`}});H(ve=>({...ve,[V._id]:be.data.published}))}catch(ie){console.error("Error toggling assignment publish:",ie)}finally{z(null)}},ae=async V=>{if(window.confirm("Are you sure you want to delete this page?"))try{const ie=localStorage.getItem("token");await me.delete(`${ke}/api/pages/${V}`,{headers:{Authorization:`Bearer ${ie}`}}),u(l.filter(be=>be._id!==V))}catch{alert("Error deleting page")}},X=async V=>{if(window.confirm("Are you sure you want to delete this assignment?"))try{const ie=localStorage.getItem("token");await me.delete(`${ke}/api/assignments/${V}`,{headers:{Authorization:`Bearer ${ie}`}}),S(E.filter(be=>be._id!==V))}catch{alert("Error deleting assignment")}};return n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[n.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between",onClick:U,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[r?n.jsx(Wb,{className:"h-5 w-5"}):n.jsx(tD,{className:"h-5 w-5"}),n.jsx("h3",{className:"text-lg font-medium",children:e.title})]}),n.jsx("div",{className:"flex items-center gap-2",children:((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Se,className:`p-1 rounded ${e.published?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:e.published?"Unpublish Module (lock)":"Publish Module (unlock)",disabled:O,children:e.published?n.jsx(cc,{className:"h-5 w-5"}):n.jsx(So,{className:"h-5 w-5"})}),n.jsx("button",{onClick:B,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",children:n.jsx(Ra,{className:"h-5 w-5"})}),n.jsx("button",{onClick:V=>{V.stopPropagation(),w(`/modules/${e._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Module",children:n.jsx(mp,{className:"h-5 w-5"})}),n.jsx("button",{onClick:V=>{V.stopPropagation(),window.confirm("Are you sure you want to delete this module? This will remove all its pages and assignments.")&&v(e._id,e.course)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Module",children:n.jsx(ls,{className:"h-5 w-5"})})]})})]}),r&&n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[C&&n.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:n.jsx(cv,{modules:[e],courseId:e.course,onSuccess:Ce,onCancel:()=>N(!1)})}),d?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading pages..."}):f?n.jsx("div",{className:"p-4 text-center text-red-500",children:f}):l.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"No pages available"}):n.jsxs("div",{className:"divide-y",children:[l.map(V=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 flex justify-between items-center group",onClick:ie=>Z(ie,V._id),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tn,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500"}),n.jsx("span",{className:V._id===a?"text-blue-600 font-semibold":"text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:V.title})]}),((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ie=>{ie.stopPropagation(),w(`/pages/${V._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Page",children:n.jsx(mp,{className:"h-4 w-4"})}),n.jsx("button",{onClick:ie=>{ie.stopPropagation(),ae(V._id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Page",children:n.jsx(ls,{className:"h-4 w-4"})})]})]},V._id)),_?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading assignments..."}):T?n.jsx("div",{className:"p-4 text-center text-red-500",children:T}):E.length===0?null:(console.log("Assignments for module",e.title,E),E.map(V=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 flex justify-between items-center group",onClick:ie=>{ie.stopPropagation(),w(`/assignments/${V._id}/view`)},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(aa,{className:"h-5 w-5 text-green-400 group-hover:text-green-600"}),n.jsx("span",{className:"group-hover:text-green-600",children:V.title}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(",V.questions?V.questions.reduce((ie,be)=>ie+(be.points||0),0):0," pts)"]})]}),((g==null?void 0:g.role)==="teacher"||(g==null?void 0:g.role)==="admin")&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ie=>{ie.stopPropagation(),G(V)},className:`p-1 rounded ${q[V._id]??V.published?"text-green-600 hover:bg-green-100":"text-gray-500 hover:bg-gray-100"}`,title:q[V._id]??V.published?"Unpublish Assignment (lock)":"Publish Assignment (unlock)",disabled:$===V._id,children:q[V._id]??V.published?n.jsx(cc,{className:"h-5 w-5"}):n.jsx(So,{className:"h-5 w-5"})}),n.jsx("button",{onClick:ie=>{ie.stopPropagation(),w(`/assignments/${V._id}/edit`)},className:"p-1 hover:bg-yellow-100 rounded text-yellow-600",title:"Edit Assignment",children:n.jsx(mp,{className:"h-4 w-4"})}),n.jsx("button",{onClick:ie=>{ie.stopPropagation(),X(V._id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete Assignment",children:n.jsx(ls,{className:"h-4 w-4"})})]})]},V._id))),L?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading discussions..."}):W?n.jsx("div",{className:"p-4 text-center text-red-500",children:W}):re.length===0?null:re.map(V=>n.jsx("div",{className:"p-4 hover:bg-gray-50 flex justify-between items-center group",onClick:ie=>{ie.stopPropagation(),w(`/courses/${V.course}/threads/${V._id}`)},children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_B,{}),n.jsx("span",{className:"group-hover:text-blue-600",children:V.title}),V.totalPoints?n.jsxs("span",{className:"text-xs text-gray-500",children:["(",V.totalPoints," pts)"]}):null]})},V._id))]})]}),a&&n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:n.jsx(CB,{pageId:a})})]})},DB=({courseId:e,onSuccess:t,onCancel:r})=>{const[s,a]=j.useState(""),[i,l]=j.useState(""),[u,d]=j.useState(!1),{createModule:h}=Ri(),f=async g=>{if(g.preventDefault(),!!s.trim()){d(!0);try{await h(e,{title:s,description:i}),a(""),l(""),t()}catch(x){console.error("Error creating module:",x)}finally{d(!1)}}},m=()=>{a(""),l(""),r()};return n.jsxs("form",{onSubmit:f,className:"bg-white p-4 rounded-lg shadow mb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Module Title"}),n.jsx("input",{type:"text",id:"title",value:s,onChange:g=>a(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",value:i,onChange:g=>l(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Creating...":"Create Module"})]})]})},AB=({courseId:e})=>{const{modules:t,loading:r,error:s,getModules:a}=Ri(),{user:i}=Et(),[l,u]=j.useState(!1),d=j.useRef(a);j.useEffect(()=>{d.current=a},[a]),j.useEffect(()=>{e&&d.current(e).catch(f=>{console.error("Error in ModuleList useEffect:",f)})},[e]);const h=async()=>{u(!1),e&&await d.current(e)};return r?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):s?n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:s})]}):n.jsxs("div",{children:[((i==null?void 0:i.role)==="teacher"||(i==null?void 0:i.role)==="admin")&&n.jsx("div",{className:"mb-6",children:l?n.jsx(DB,{courseId:e,onSuccess:h,onCancel:()=>u(!1)}):n.jsx("button",{onClick:()=>u(!0),className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors",children:"+ Add Module"})}),t.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("p",{children:"No modules available for this course."}),n.jsx("p",{className:"text-sm mt-2",children:"Modules will appear here once they are created."})]}):n.jsx("div",{className:"space-y-4",children:t.map(f=>n.jsx(EB,{module:f,onAddPage:()=>{}},f._id))})]})};function af(e,t,r,s){const a=t.groups||[],i=new Date,l=new Set;a.forEach(w=>{r.filter(N=>N.group===w.name).forEach(N=>l.add(N._id))}),a.reduce((w,C)=>w+Number(C.weight),0);const u=[],d=[];a.forEach(w=>{const C=r.filter(_=>_.group===w.name);let N=!1,E=0,S=0;if(C.forEach(_=>{var O,F;const D=(O=s[e])==null?void 0:O[_._id],T=((F=_.questions)==null?void 0:F.reduce(($,z)=>$+(z.points||0),0))||_.totalPoints||0,P=_.dueDate?new Date(_.dueDate):null;!_.isDiscussion&&!_.published||(P&&i>P&&(D==null||D==="-")?(E+=0,S+=T):typeof D=="number"?(E+=D,S+=T,N=!0):P&&i>P&&(E+=0,S+=T))}),N&&S>0){const _=E/S*100;u.push({...w,originalWeight:w.weight,earned:E,possible:S,percent:_})}else d.push(w)});const h=r.filter(w=>!l.has(w._id));let f=!1,m=0,g=0;h.length>0&&h.forEach(w=>{var S,_;const C=(S=s[e])==null?void 0:S[w._id],N=((_=w.questions)==null?void 0:_.reduce((D,T)=>D+(T.points||0),0))||w.totalPoints||0,E=w.dueDate?new Date(w.dueDate):null;!w.isDiscussion&&!w.published||(E&&i>E&&(C==null||C==="-")?(m+=0,g+=N):typeof C=="number"?(m+=C,g+=N,f=!0):E&&i>E&&(m+=0,g+=N))});const x=d.reduce((w,C)=>w+Number(C.weight),0);if(u.length===0&&!f)return 0;let v=0,b=0;if(u.length>0){const w=u.reduce((C,N)=>C+N.originalWeight,0);u.forEach(C=>{const N=C.originalWeight/w,E=x*N,S=C.originalWeight+E;b+=C.percent*S,v+=S})}if(f&&g>0){const w=m/g*100,C=100-v;C>0&&(b+=w*C,v+=C)}return v===0?0:b/v}function tb(e,t){const s=[...t&&t.length>0?t:[{letter:"A",min:90,max:100},{letter:"B",min:80,max:89},{letter:"C",min:70,max:79},{letter:"D",min:60,max:69},{letter:"F",min:0,max:59}]].sort((a,i)=>i.min-a.min);for(const a of s)if(e>=a.min)return a.letter;return"F"}const TB=({course:e,assignments:t,currentGrades:r,studentId:s,onSaveWhatIf:a,onClose:i})=>{const[l,u]=j.useState({});j.useEffect(()=>{const x={...r[s]||{}};u(x)},[r,s]);const d=x=>{const v={[s]:x};return af(s,e,t,v)},h=x=>{const b=(e.gradeScale||[{letter:"A",min:94,max:100},{letter:"A-",min:90,max:93},{letter:"B+",min:87,max:89},{letter:"B",min:84,max:86},{letter:"B-",min:80,max:83},{letter:"C+",min:77,max:79},{letter:"C",min:74,max:76},{letter:"D",min:64,max:73},{letter:"F",min:0,max:63}]).find(w=>x>=w.min&&x<=w.max);return b?b.letter:"F"},f=(x,v)=>{const b=v===""?0:parseFloat(v);isNaN(b)||u(w=>({...w,[x]:b}))},m=d(l),g=h(m);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"What-If Scores"}),n.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Simulate different scores to see how they affect your final grade"})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[n.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"text-lg font-semibold text-blue-800",children:["Projected Grade: ",m.toFixed(2),"% [",g,"]"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full border border-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-600",children:"Assignment"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-600",children:"Group"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"Current Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"What-If Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-600",children:"Max Points"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(x=>{var w,C;const v=((w=x.questions)==null?void 0:w.reduce((N,E)=>N+(E.points||0),0))||x.totalPoints||0,b=(C=r[s])==null?void 0:C[x._id];return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:x.title}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:x.group||"Ungrouped"}),n.jsx("td",{className:"px-4 py-2 text-sm text-center text-gray-600",children:typeof b=="number"?b:"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-center",children:n.jsx("input",{type:"number",id:`what-if-score-${x._id}`,name:`whatIfScore-${x._id}`,min:"0",max:v,step:"0.01",value:l[x._id]===0?"":l[x._id]??"",onFocus:N=>{l[x._id]===0&&(N.target.value="")},onChange:N=>f(x._id,N.target.value),className:"w-20 px-2 py-1 border rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})}),n.jsx("td",{className:"px-4 py-2 text-sm text-center text-gray-600",children:v})]},x._id)})})]})})]}),n.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-3",children:n.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},PB=({course:e,studentId:t,grades:r,assignments:s,submissionMap:a,studentSubmissions:i,backendTotalGrade:l,backendLetterGrade:u})=>{const[d,h]=j.useState(!1),f=l!==null?l:af(t,e,s,r),m=u||tb(f||0,e==null?void 0:e.gradeScale);return n.jsxs("div",{className:"w-full md:w-64 flex-shrink-0",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-4 mb-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"text-lg font-bold mb-3 text-gray-900 dark:text-gray-100",children:["Total: ",(f||0).toFixed(2),"% [",m,"]"]}),n.jsx("div",{className:"space-y-2",children:n.jsx("button",{onClick:()=>h(!0),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-150 text-sm font-medium",children:"What-If Scores"})}),e.groups&&e.groups.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"font-semibold mb-2 text-xs text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Assignment Weighting"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-3",children:n.jsxs("table",{className:"min-w-full text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"px-1 py-1 text-left font-medium text-gray-700 dark:text-gray-300",children:"Group"}),n.jsx("th",{className:"px-1 py-1 text-right font-medium text-gray-700 dark:text-gray-300",children:"Weight"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(e.groups||[]).map((g,x)=>n.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150",children:[n.jsx("td",{className:"px-1 py-1 text-left text-gray-600 dark:text-gray-400",children:g.name}),n.jsxs("td",{className:"px-1 py-1 text-right font-semibold text-gray-900 dark:text-gray-100",children:[g.weight,"%"]})]},x)),n.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 font-bold",children:[n.jsx("td",{className:"px-1 py-1 text-left text-gray-900 dark:text-gray-100",children:"Total"}),n.jsxs("td",{className:"px-1 py-1 text-right text-gray-900 dark:text-gray-100",children:[(e.groups||[]).reduce((g,x)=>g+Number(x.weight),0),"%"]})]})]})]})})]})]}),d&&n.jsx(TB,{course:e,assignments:s,currentGrades:r,studentId:t,onSaveWhatIf:g=>{console.log("Saving what-if scores:",g)},onClose:()=>h(!1)})]})};var Ep={exports:{}},Dp,m2;function RB(){if(m2)return Dp;m2=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dp=e,Dp}var Ap,h2;function IB(){if(h2)return Ap;h2=1;var e=RB();function t(){}function r(){}return r.resetWarningCache=t,Ap=function(){function s(l,u,d,h,f,m){if(m!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Ap}var p2;function MB(){return p2||(p2=1,Ep.exports=IB()()),Ep.exports}var De=MB();const ze=Vr(De);var rb=function(){return rb=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},rb.apply(this,arguments)},qD={onActivate:De.func,onAddUndo:De.func,onBeforeAddUndo:De.func,onBeforeExecCommand:De.func,onBeforeGetContent:De.func,onBeforeRenderUI:De.func,onBeforeSetContent:De.func,onBeforePaste:De.func,onBlur:De.func,onChange:De.func,onClearUndos:De.func,onClick:De.func,onContextMenu:De.func,onCommentChange:De.func,onCompositionEnd:De.func,onCompositionStart:De.func,onCompositionUpdate:De.func,onCopy:De.func,onCut:De.func,onDblclick:De.func,onDeactivate:De.func,onDirty:De.func,onDrag:De.func,onDragDrop:De.func,onDragEnd:De.func,onDragGesture:De.func,onDragOver:De.func,onDrop:De.func,onExecCommand:De.func,onFocus:De.func,onFocusIn:De.func,onFocusOut:De.func,onGetContent:De.func,onHide:De.func,onInit:De.func,onInput:De.func,onKeyDown:De.func,onKeyPress:De.func,onKeyUp:De.func,onLoadContent:De.func,onMouseDown:De.func,onMouseEnter:De.func,onMouseLeave:De.func,onMouseMove:De.func,onMouseOut:De.func,onMouseOver:De.func,onMouseUp:De.func,onNodeChange:De.func,onObjectResizeStart:De.func,onObjectResized:De.func,onObjectSelected:De.func,onPaste:De.func,onPostProcess:De.func,onPostRender:De.func,onPreProcess:De.func,onProgressState:De.func,onRedo:De.func,onRemove:De.func,onReset:De.func,onSaveContent:De.func,onSelectionChange:De.func,onSetAttrib:De.func,onSetContent:De.func,onShow:De.func,onSubmit:De.func,onUndo:De.func,onVisualAid:De.func,onSkinLoadError:De.func,onThemeLoadError:De.func,onModelLoadError:De.func,onPluginLoadError:De.func,onIconsLoadError:De.func,onLanguageLoadError:De.func,onScriptsLoad:De.func,onScriptsLoadError:De.func},OB=rb({apiKey:De.string,licenseKey:De.string,id:De.string,inline:De.bool,init:De.object,initialValue:De.string,onEditorChange:De.func,value:De.string,tagName:De.string,tabIndex:De.number,cloudChannel:De.string,plugins:De.oneOfType([De.string,De.array]),toolbar:De.oneOfType([De.string,De.array]),disabled:De.bool,readonly:De.bool,textareaName:De.string,tinymceScriptSrc:De.oneOfType([De.string,De.arrayOf(De.string),De.arrayOf(De.shape({src:De.string,async:De.bool,defer:De.bool}))]),rollback:De.oneOfType([De.number,De.oneOf([!1])]),scriptLoading:De.shape({async:De.bool,defer:De.bool,delay:De.number})},qD),UD=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},Tp=function(e){return typeof e=="function"},g2=function(e){return e in qD},x2=function(e){return e.substr(2)},$B=function(e,t,r,s,a,i,l){var u=Object.keys(a).filter(g2),d=Object.keys(i).filter(g2),h=u.filter(function(m){return i[m]===void 0}),f=d.filter(function(m){return a[m]===void 0});h.forEach(function(m){var g=x2(m),x=l[g];r(g,x),delete l[g]}),f.forEach(function(m){var g=s(e,m),x=x2(m);l[x]=g,t(x,g)})},LB=function(e,t,r,s,a){return $B(a,e.on.bind(e),e.off.bind(e),function(i,l){return function(u){var d;return(d=i(l))===null||d===void 0?void 0:d(u,e)}},t,r,s)},y2=0,WD=function(e){var t=Date.now(),r=Math.floor(Math.random()*1e9);return y2++,e+"_"+r+y2+String(t)},b2=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},v2=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},FB=function(e,t){return v2(e).concat(v2(t))},BB=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},zB=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,r=e.parentNode;r!=null;)t=r,r=t.parentNode;return t===e.ownerDocument}return e.isConnected},w2=function(e,t){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(t):e.setMode(t))},GB=function(e){var t=UD(e);if(!t)throw new Error("tinymce should have been loaded into global scope");return t},j2=function(e){return e.options&&e.options.isRegistered("disabled")},nb=function(){return nb=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},nb.apply(this,arguments)},qB=function(e,t,r){var s,a,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t.id,i.src=t.src,i.async=(s=t.async)!==null&&s!==void 0?s:!1,i.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var l=function(){i.removeEventListener("load",l),i.removeEventListener("error",u),r(t.src)},u=function(d){i.removeEventListener("load",l),i.removeEventListener("error",u),r(t.src,d)};i.addEventListener("load",l),i.addEventListener("error",u),e.head&&e.head.appendChild(i)},UB=function(e){var t={},r=function(l,u){var d=t[l];d.done=!0,d.error=u;for(var h=0,f=d.handlers;h<f.length;h++){var m=f[h];m(l,u)}d.handlers=[]},s=function(l,u,d){var h=function(N){return d!==void 0?d(N):console.error(N)};if(l.length===0){h(new Error("At least one script must be provided"));return}for(var f=0,m=!1,g=function(N,E){m||(E?(m=!0,h(E)):++f===l.length&&u())},x=0,v=l;x<v.length;x++){var b=v[x],w=t[b.src];if(w)w.done?g(b.src,w.error):w.handlers.push(g);else{var C=WD("tiny-");t[b.src]={id:C,src:b.src,done:!1,error:null,handlers:[g]},qB(e,nb({id:C},b),r)}}},a=function(){for(var l,u=0,d=Object.values(t);u<d.length;u++){var h=d[u],f=e.getElementById(h.id);f!=null&&f.tagName==="SCRIPT"&&((l=f.parentNode)===null||l===void 0||l.removeChild(f))}t={}},i=function(){return e};return{loadScripts:s,deleteScripts:a,getDocument:i}},WB=function(){var e=[],t=function(a){var i=e.find(function(l){return l.getDocument()===a});return i===void 0&&(i=UB(a),e.push(i)),i},r=function(a,i,l,u,d){var h=function(){return t(a).loadScripts(i,u,d)};l>0?setTimeout(h,l):h()},s=function(){for(var a=e.pop();a!=null;a=e.pop())a.deleteScripts()};return{loadList:r,reinitialize:s}},HB=WB(),VB=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),yo=function(){return yo=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},yo.apply(this,arguments)},Pp="change keyup compositionend setcontent CommentChange",YB=function(e){VB(t,e);function t(r){var s,a,i,l=e.call(this,r)||this;return l.rollbackTimer=void 0,l.valueCursor=void 0,l.rollbackChange=function(){var u=l.editor,d=l.props.value;u&&d&&d!==l.currentContent&&u.undoManager.ignore(function(){if(u.setContent(d),l.valueCursor&&(!l.inline||u.hasFocus()))try{u.selection.moveToBookmark(l.valueCursor)}catch{}}),l.rollbackTimer=void 0},l.handleBeforeInput=function(u){if(l.props.value!==void 0&&l.props.value===l.currentContent&&l.editor&&(!l.inline||l.editor.hasFocus()))try{l.valueCursor=l.editor.selection.getBookmark(3)}catch{}},l.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&l.handleBeforeInput(u)},l.handleEditorChange=function(u){var d=l.editor;if(d&&d.initialized){var h=d.getContent();l.props.value!==void 0&&l.props.value!==h&&l.props.rollback!==!1&&(l.rollbackTimer||(l.rollbackTimer=window.setTimeout(l.rollbackChange,typeof l.props.rollback=="number"?l.props.rollback:200))),h!==l.currentContent&&(l.currentContent=h,Tp(l.props.onEditorChange)&&l.props.onEditorChange(h,d))}},l.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&l.handleEditorChange(u)},l.initialise=function(u){var d,h,f;u===void 0&&(u=0);var m=l.elementRef.current;if(m){if(!zB(m)){if(u===0)setTimeout(function(){return l.initialise(1)},1);else if(u<100)setTimeout(function(){return l.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var g=GB(l.view),x=yo(yo(yo(yo({},l.props.init),{selector:void 0,target:m,disabled:l.props.disabled,readonly:l.props.readonly,inline:l.inline,plugins:FB((d=l.props.init)===null||d===void 0?void 0:d.plugins,l.props.plugins),toolbar:(h=l.props.toolbar)!==null&&h!==void 0?h:(f=l.props.init)===null||f===void 0?void 0:f.toolbar}),l.props.licenseKey?{license_key:l.props.licenseKey}:{}),{setup:function(v){l.editor=v,l.bindHandlers({}),l.inline&&!b2(m)&&v.once("PostRender",function(b){v.setContent(l.getInitialValue(),{no_events:!0})}),l.props.init&&Tp(l.props.init.setup)&&l.props.init.setup(v),l.props.disabled&&(j2(l.editor)?l.editor.options.set("disabled",l.props.disabled):l.editor.mode.set("readonly"))},init_instance_callback:function(v){var b,w=l.getInitialValue();l.currentContent=(b=l.currentContent)!==null&&b!==void 0?b:v.getContent(),l.currentContent!==w&&(l.currentContent=w,v.setContent(w),v.undoManager.clear(),v.undoManager.add(),v.setDirty(!1)),l.props.init&&Tp(l.props.init.init_instance_callback)&&l.props.init.init_instance_callback(v)}});l.inline||(m.style.visibility=""),b2(m)&&(m.value=l.getInitialValue()),g.init(x)}},l.id=l.props.id||WD("tiny-react"),l.elementRef=j.createRef(),l.inline=(i=(s=l.props.inline)!==null&&s!==void 0?s:(a=l.props.init)===null||a===void 0?void 0:a.inline)!==null&&i!==void 0?i:!1,l.boundHandlers={},l}return Object.defineProperty(t.prototype,"view",{get:function(){var r,s;return(s=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&s!==void 0?s:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var s=this,a,i;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var l=this.editor;l.undoManager.transact(function(){var d;if(!s.inline||l.hasFocus())try{d=l.selection.getBookmark(3)}catch{}var h=s.valueCursor;if(l.setContent(s.props.value),!s.inline||l.hasFocus())for(var f=0,m=[d,h];f<m.length;f++){var g=m[f];if(g)try{l.selection.moveToBookmark(g),s.valueCursor=g;break}catch{}}})}if(this.props.readonly!==r.readonly){var u=(i=this.props.readonly)!==null&&i!==void 0?i:!1;w2(this.editor,u?"readonly":"design")}this.props.disabled!==r.disabled&&(j2(this.editor)?this.editor.options.set("disabled",this.props.disabled):w2(this.editor,this.props.disabled?"readonly":"design"))}},t.prototype.componentDidMount=function(){var r=this,s,a,i,l,u;if(UD(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(s=this.props).onScriptsLoadError)===null||a===void 0||a.call(s,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((i=this.elementRef.current)===null||i===void 0)&&i.ownerDocument){var d=function(){var f,m;(m=(f=r.props).onScriptsLoad)===null||m===void 0||m.call(f),r.initialise()},h=function(f){var m,g;(g=(m=r.props).onScriptsLoadError)===null||g===void 0||g.call(m,f)};HB.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(l=this.props.scriptLoading)===null||l===void 0?void 0:l.delay)!==null&&u!==void 0?u:0,d,h)}},t.prototype.componentWillUnmount=function(){var r=this,s=this.editor;s&&(s.off(Pp,this.handleEditorChange),s.off(this.beforeInputEvent(),this.handleBeforeInput),s.off("keypress",this.handleEditorChangeSpecial),s.off("keydown",this.handleBeforeInputSpecial),s.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){s.off(a,r.boundHandlers[a])}),this.boundHandlers={},s.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return BB()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,s=r===void 0?"div":r;return j.createElement(s,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return j.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,s,a=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,i=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:i}]:this.props.tinymceScriptSrc.map(function(h){return typeof h=="string"?{src:h,async:a,defer:i}:h});var l=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(l,"/tinymce.min.js");return[{src:d,async:a,defer:i}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var s=this;if(this.editor!==void 0){LB(this.editor,r,this.props,this.boundHandlers,function(u){return s.props[u]});var a=function(u){return u.onEditorChange!==void 0||u.value!==void 0},i=a(r),l=a(this.props);!i&&l?(this.editor.on(Pp,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):i&&!l&&(this.editor.off(Pp,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=OB,t.defaultProps={cloudChannel:"7"},t}(j.Component);const vi=({content:e,onChange:t,placeholder:r,className:s})=>n.jsx(YB,{apiKey:"gm5axo7z7bcihdlgxc1cyco7y5fczucedjgtm419lvc1sk5s",value:e,onEditorChange:t,init:{height:200,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | formatselect | bold italic underline backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlist outdent indent | removeformat | help",placeholder:r||"Write something...",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},textareaName:"content",className:s}),HD=({isOpen:e,onClose:t,courseId:r,onThreadCreated:s,courseGroups:a=[],modules:i=[],defaultGroupSetId:l})=>{const{user:u}=Et(),[d,h]=j.useState(""),[f,m]=j.useState(""),[g,x]=j.useState(!1),[v,b]=j.useState(null),[w,C]=j.useState(!1),[N,E]=j.useState(100),[S,_]=j.useState("Discussions"),[D,T]=j.useState(""),[P,O]=j.useState(""),[F,$]=j.useState([]),[z,q]=j.useState(!1),[H,re]=j.useState("");j.useEffect(()=>{l&&(q(!0),re(l))},[l]),j.useEffect(()=>{(async()=>{if(!(!r||!e))try{const M=localStorage.getItem("token"),W=await me.get(`${ke}/api/groups/sets/${r}`,{headers:{Authorization:`Bearer ${M}`}});$(W.data)}catch(M){console.error("Error fetching group sets:",M)}})()},[r,e]);const ee=async L=>{if(L.preventDefault(),!(!d.trim()||!f.trim())){x(!0),b(null);try{const M=localStorage.getItem("token"),W={title:d.trim(),content:f,courseId:r,module:P||void 0,isGraded:w,totalPoints:w?N:null,group:S,dueDate:D?new Date(D).toISOString():null};z&&H&&(W.groupSet=H);const R=await Ie.post(`${ke}/api/threads`,W,{headers:{Authorization:`Bearer ${M}`}});R.data.success?(s(R.data.data),t(),h(""),m(""),C(!1),E(100),_("Discussions"),T(""),O(""),q(!1),re("")):b("Failed to create thread")}catch(M){console.error("Error creating thread:",M),b("Failed to create thread. Please try again.")}finally{x(!1)}}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create New Discussion Thread"}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:ee,className:"p-6",children:[v&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:v}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:d,onChange:L=>h(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter thread title",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),n.jsx("div",{className:"border border-gray-300 rounded-md",children:n.jsx(vi,{content:f,onChange:m,placeholder:"Write your thread content...",className:"h-64"})})]}),n.jsxs("div",{className:"mb-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGroupDiscussion",checked:z,onChange:L=>q(L.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGroupDiscussion",className:"ml-2 block text-sm text-gray-700",children:"This is a group discussion"})]}),z&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"groupSet",className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Set"}),n.jsxs("select",{id:"groupSet",value:H,onChange:L=>re(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:z,children:[n.jsx("option",{value:"",children:"Select a group set"}),F.map(L=>n.jsxs("option",{value:L._id,children:[L.name," ",L.allowSelfSignup?"(Self-signup enabled)":""]},L._id))]}),z&&!H&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a group set for the group discussion"})]})]}),n.jsxs("div",{className:"mb-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGraded",checked:w,onChange:L=>C(L.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGraded",className:"ml-2 block text-sm text-gray-700",children:"Make this a graded discussion"})]}),w&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"totalPoints",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Points"}),n.jsx("input",{type:"number",id:"totalPoints",value:N,onChange:L=>E(Math.max(0,parseInt(L.target.value)||0)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:w})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),n.jsx("input",{type:"datetime-local",id:"dueDate",value:D,onChange:L=>T(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"group",className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Group"}),n.jsxs("select",{id:"group",value:S,onChange:L=>_(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:w,children:[a.map(L=>n.jsxs("option",{value:L.name,children:[L.name," (",L.weight,"%)"]},L.name)),n.jsx("option",{value:"Discussions",children:"Discussions"})]})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"module",className:"block text-sm font-medium text-gray-700 mb-1",children:"Module (optional)"}),n.jsxs("select",{id:"module",value:P,onChange:L=>O(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"No module"}),i&&i.map(L=>n.jsx("option",{value:L._id,children:L.title},L._id))]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g||!d.trim()||!f.trim()||z&&!H,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating...":"Create Thread"})]})]})]})}):null},KB=({courseId:e,courseGroups:t=[]})=>{const r=Lt(),{user:s}=Et(),[a,i]=j.useState([]),[l,u]=j.useState(!0),[d,h]=j.useState(null),[f,m]=j.useState(!1),[g,x]=j.useState([]),v=(s==null?void 0:s.role)==="teacher";j.useEffect(()=>{(async()=>{if(e)try{u(!0);const E=localStorage.getItem("token"),S=await Ie.get(`${ke}/api/threads/course/${e}`,{headers:{Authorization:`Bearer ${E}`}});S.data.success?i(S.data.data):h("Failed to fetch discussion threads")}catch(E){console.error("Error fetching threads:",E),h("Failed to load discussion threads")}finally{u(!1)}})()},[e]),j.useEffect(()=>{(async()=>{if(e)try{const E=localStorage.getItem("token"),S=await me.get(`${ke}/api/modules/${e}`,{headers:{Authorization:`Bearer ${E}`}});let _=[];S.data&&Array.isArray(S.data.data)?_=S.data.data.map(D=>({...D,title:D.name})):Array.isArray(S.data)&&(_=S.data.map(D=>({...D,title:D.name}))),x(_)}catch{x([])}})()},[e]);const b=()=>{m(!0)},w=N=>{i(E=>[N,...E])},C=N=>{r(`/courses/${e}/threads/${N}`)};return l?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):d?n.jsx("div",{className:"text-red-500 text-center p-4",children:d}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Discussions"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Course discussion threads and conversations"})]}),v&&n.jsxs("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Thread"]})]}),a.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-700",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No discussion threads"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v?"Get started by creating a new discussion thread.":"There are no discussion threads yet. Teachers will create threads here."}),v&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Thread"]})})]}):n.jsxs("div",{className:"space-y-4",children:[a.filter(N=>N.isPinned).length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Pinned Threads"}),n.jsx("div",{className:"space-y-4",children:a.filter(N=>N.isPinned).map(N=>n.jsxs("div",{onClick:()=>C(N._id),className:"p-4 bg-white dark:bg-gray-900 border border-yellow-200 dark:border-yellow-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer relative",children:[n.jsx("div",{className:"absolute top-2 right-2 text-yellow-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.715-5.349L11 4.477V16h2a1 1 0 110 2H7a1 1 0 110-2h2V4.477L6.237 7.582l1.715 5.349a1 1 0 01-.285 1.05A3.989 3.989 0 015 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.616a1 1 0 01.894-1.79l1.599.8L9 4.323V3a1 1 0 011-1z"})})}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[N.title,N.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",N.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",N.author.firstName," ",N.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:N.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(N.createdAt).toLocaleString(),children:mn(new Date(N.createdAt),{addSuffix:!0})}),N.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",mn(new Date(N.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),N.replyCount," ",N.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(N.lastActivity).toLocaleString(),children:["Last activity ",mn(new Date(N.lastActivity),{addSuffix:!0})]})]})]})]},N._id))})]}),a.filter(N=>!N.isPinned).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"All Threads"}),n.jsx("div",{className:"space-y-4",children:a.filter(N=>!N.isPinned).map(N=>n.jsx("div",{onClick:()=>C(N._id),className:"p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[N.title,N.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",N.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",N.author.firstName," ",N.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:N.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(N.createdAt).toLocaleString(),children:mn(new Date(N.createdAt),{addSuffix:!0})}),N.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",mn(new Date(N.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),N.replyCount," ",N.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(N.lastActivity).toLocaleString(),children:["Last activity ",mn(new Date(N.lastActivity),{addSuffix:!0})]})]})]})},N._id))})]})]})]}),v&&n.jsx(HD,{isOpen:f,onClose:()=>m(!1),courseId:e,onThreadCreated:w,courseGroups:t,modules:g})]})};function Lr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var QB=typeof Symbol=="function"&&Symbol.observable||"@@observable",N2=QB,Rp=()=>Math.random().toString(36).substring(7).split("").join("."),XB={INIT:`@@redux/INIT${Rp()}`,REPLACE:`@@redux/REPLACE${Rp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Rp()}`},of=XB;function uv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dv(e,t,r){if(typeof e!="function")throw new Error(Lr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Lr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Lr(1));return r(dv)(e,t)}let s=e,a=t,i=new Map,l=i,u=0,d=!1;function h(){l===i&&(l=new Map,i.forEach((w,C)=>{l.set(C,w)}))}function f(){if(d)throw new Error(Lr(3));return a}function m(w){if(typeof w!="function")throw new Error(Lr(4));if(d)throw new Error(Lr(5));let C=!0;h();const N=u++;return l.set(N,w),function(){if(C){if(d)throw new Error(Lr(6));C=!1,h(),l.delete(N),i=null}}}function g(w){if(!uv(w))throw new Error(Lr(7));if(typeof w.type>"u")throw new Error(Lr(8));if(typeof w.type!="string")throw new Error(Lr(17));if(d)throw new Error(Lr(9));try{d=!0,a=s(a,w)}finally{d=!1}return(i=l).forEach(N=>{N()}),w}function x(w){if(typeof w!="function")throw new Error(Lr(10));s=w,g({type:of.REPLACE})}function v(){const w=m;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Lr(11));function N(){const S=C;S.next&&S.next(f())}return N(),{unsubscribe:w(N)}},[N2](){return this}}}return g({type:of.INIT}),{dispatch:g,subscribe:m,getState:f,replaceReducer:x,[N2]:v}}function JB(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:of.INIT})>"u")throw new Error(Lr(12));if(typeof r(void 0,{type:of.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Lr(13))})}function ZB(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const s=Object.keys(r);let a;try{JB(r)}catch(i){a=i}return function(l={},u){if(a)throw a;let d=!1;const h={};for(let f=0;f<s.length;f++){const m=s[f],g=r[m],x=l[m],v=g(x,u);if(typeof v>"u")throw u&&u.type,new Error(Lr(14));h[m]=v,d=d||v!==x}return d=d||s.length!==Object.keys(l).length,d?h:l}}function S2(e,t){return function(...r){return t(e.apply(this,r))}}function k2(e,t){if(typeof e=="function")return S2(e,t);if(typeof e!="object"||e===null)throw new Error(Lr(16));const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=S2(a,t))}return r}function mc(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function VD(...e){return t=>(r,s)=>{const a=t(r,s);let i=()=>{throw new Error(Lr(15))};const l={getState:a.getState,dispatch:(d,...h)=>i(d,...h)},u=e.map(d=>d(l));return i=mc(...u)(a.dispatch),{...a,dispatch:i}}}function ez(e){return uv(e)&&"type"in e&&typeof e.type=="string"}var Ip={exports:{}},Mp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function tz(){if(C2)return Mp;C2=1;var e=Cf();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Mp.useSyncExternalStoreWithSelector=function(d,h,f,m,g){var x=a(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=l(function(){function w(_){if(!C){if(C=!0,N=_,_=m(_),g!==void 0&&v.hasValue){var D=v.value;if(g(D,_))return E=D}return E=_}if(D=E,r(N,_))return D;var T=m(_);return g!==void 0&&g(D,T)?(N=_,D):(N=_,E=T)}var C=!1,N,E,S=f===void 0?null:f;return[function(){return w(h())},S===null?void 0:function(){return w(S())}]},[h,f,m,g]);var b=s(d,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=b},[b]),u(b),b},Mp}var _2;function rz(){return _2||(_2=1,Ip.exports=tz()),Ip.exports}rz();var nz=j.version.startsWith("19"),sz=Symbol.for(nz?"react.transitional.element":"react.element"),az=Symbol.for("react.portal"),iz=Symbol.for("react.fragment"),oz=Symbol.for("react.strict_mode"),lz=Symbol.for("react.profiler"),cz=Symbol.for("react.consumer"),uz=Symbol.for("react.context"),YD=Symbol.for("react.forward_ref"),dz=Symbol.for("react.suspense"),fz=Symbol.for("react.suspense_list"),fv=Symbol.for("react.memo"),mz=Symbol.for("react.lazy"),hz=YD,pz=fv;function gz(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case sz:switch(e=e.type,e){case iz:case lz:case oz:case dz:case fz:return e;default:switch(e=e&&e.$$typeof,e){case uz:case YD:case mz:case fv:return e;case cz:return e;default:return t}}case az:return t}}}function xz(e){return gz(e)===fv}function yz(e,t,r,s,{areStatesEqual:a,areOwnPropsEqual:i,areStatePropsEqual:l}){let u=!1,d,h,f,m,g;function x(N,E){return d=N,h=E,f=e(d,h),m=t(s,h),g=r(f,m,h),u=!0,g}function v(){return f=e(d,h),t.dependsOnOwnProps&&(m=t(s,h)),g=r(f,m,h),g}function b(){return e.dependsOnOwnProps&&(f=e(d,h)),t.dependsOnOwnProps&&(m=t(s,h)),g=r(f,m,h),g}function w(){const N=e(d,h),E=!l(N,f);return f=N,E&&(g=r(f,m,h)),g}function C(N,E){const S=!i(E,h),_=!a(N,d,E,h);return d=N,h=E,S&&_?v():S?b():_?w():g}return function(E,S){return u?C(E,S):x(E,S)}}function bz(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:s,...a}){const i=t(e,a),l=r(e,a),u=s(e,a);return yz(i,l,u,e,a)}function vz(e,t){const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=(...i)=>t(a(...i)))}return r}function sb(e){return function(r){const s=e(r);function a(){return s}return a.dependsOnOwnProps=!1,a}}function E2(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function KD(e,t){return function(s,{displayName:a}){const i=function(u,d){return i.dependsOnOwnProps?i.mapToProps(u,d):i.mapToProps(u,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(u,d){i.mapToProps=e,i.dependsOnOwnProps=E2(e);let h=i(u,d);return typeof h=="function"&&(i.mapToProps=h,i.dependsOnOwnProps=E2(h),h=i(u,d)),h},i}}function mv(e,t){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function wz(e){return e&&typeof e=="object"?sb(t=>vz(e,t)):e?typeof e=="function"?KD(e):mv(e,"mapDispatchToProps"):sb(t=>({dispatch:t}))}function jz(e){return e?typeof e=="function"?KD(e):mv(e,"mapStateToProps"):sb(()=>({}))}function Nz(e,t,r){return{...r,...e,...t}}function Sz(e){return function(r,{displayName:s,areMergedPropsEqual:a}){let i=!1,l;return function(d,h,f){const m=e(d,h,f);return i?a(m,l)||(l=m):(i=!0,l=m),l}}}function kz(e){return e?typeof e=="function"?Sz(e):mv(e,"mergeProps"):()=>Nz}function Cz(e){e()}function _z(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Cz(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var D2={notify(){},get:()=>[]};function QD(e,t){let r,s=D2,a=0,i=!1;function l(b){f();const w=s.subscribe(b);let C=!1;return()=>{C||(C=!0,w(),m())}}function u(){s.notify()}function d(){v.onStateChange&&v.onStateChange()}function h(){return i}function f(){a++,r||(r=t?t.addNestedSub(d):e.subscribe(d),s=_z())}function m(){a--,r&&a===0&&(r(),r=void 0,s.clear(),s=D2)}function g(){i||(i=!0,f())}function x(){i&&(i=!1,m())}const v={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>s};return v}var Ez=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Dz=Ez(),Az=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Tz=Az(),Pz=()=>Dz||Tz?j.useLayoutEffect:j.useEffect,lf=Pz();function A2(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Op(e,t){if(A2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!A2(e[r[a]],t[r[a]]))return!1;return!0}var Rz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Iz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Mz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},XD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Oz={[hz]:Mz,[pz]:XD};function T2(e){return xz(e)?XD:Oz[e.$$typeof]||Rz}var $z=Object.defineProperty,Lz=Object.getOwnPropertyNames,P2=Object.getOwnPropertySymbols,Fz=Object.getOwnPropertyDescriptor,Bz=Object.getPrototypeOf,R2=Object.prototype;function ab(e,t){if(typeof t!="string"){if(R2){const i=Bz(t);i&&i!==R2&&ab(e,i)}let r=Lz(t);P2&&(r=r.concat(P2(t)));const s=T2(e),a=T2(t);for(let i=0;i<r.length;++i){const l=r[i];if(!Iz[l]&&!(a&&a[l])&&!(s&&s[l])){const u=Fz(t,l);try{$z(e,l,u)}catch{}}}}return e}var $p=Symbol.for("react-redux-context"),Lp=typeof globalThis<"u"?globalThis:{};function zz(){if(!j.createContext)return{};const e=Lp[$p]??(Lp[$p]=new Map);let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var JD=zz(),Gz=[null,null];function qz(e,t,r){lf(()=>e(...t),r)}function Uz(e,t,r,s,a,i){e.current=s,r.current=!1,a.current&&(a.current=null,i())}function Wz(e,t,r,s,a,i,l,u,d,h,f){if(!e)return()=>{};let m=!1,g=null;const x=()=>{if(m||!u.current)return;const b=t.getState();let w,C;try{w=s(b,a.current)}catch(N){C=N,g=N}C||(g=null),w===i.current?l.current||h():(i.current=w,d.current=w,l.current=!0,f())};return r.onStateChange=x,r.trySubscribe(),x(),()=>{if(m=!0,r.tryUnsubscribe(),r.onStateChange=null,g)throw g}}function Hz(e,t){return e===t}function Vz(e,t,r,{pure:s,areStatesEqual:a=Hz,areOwnPropsEqual:i=Op,areStatePropsEqual:l=Op,areMergedPropsEqual:u=Op,forwardRef:d=!1,context:h=JD}={}){const f=h,m=jz(e),g=wz(t),x=kz(r),v=!!e;return w=>{const C=w.displayName||w.name||"Component",N=`Connect(${C})`,E={shouldHandleStateChanges:v,displayName:N,wrappedComponentName:C,WrappedComponent:w,initMapStateToProps:m,initMapDispatchToProps:g,initMergeProps:x,areStatesEqual:a,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:u};function S(T){const[P,O,F]=j.useMemo(()=>{const{reactReduxForwardedRef:ve,...Pe}=T;return[T.context,ve,Pe]},[T]),$=j.useMemo(()=>{let ve=f;return P!=null&&P.Consumer,ve},[P,f]),z=j.useContext($),q=!!T.store&&!!T.store.getState&&!!T.store.dispatch,H=!!z&&!!z.store,re=q?T.store:z.store,ee=H?z.getServerState:re.getState,L=j.useMemo(()=>bz(re.dispatch,E),[re]),[M,W]=j.useMemo(()=>{if(!v)return Gz;const ve=QD(re,q?void 0:z.subscription),Pe=ve.notifyNestedSubs.bind(ve);return[ve,Pe]},[re,q,z]),R=j.useMemo(()=>q?z:{...z,subscription:M},[q,z,M]),U=j.useRef(void 0),Z=j.useRef(F),B=j.useRef(void 0),Ce=j.useRef(!1),Se=j.useRef(!1),G=j.useRef(void 0);lf(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const ae=j.useMemo(()=>()=>B.current&&F===Z.current?B.current:L(re.getState(),F),[re,F]),X=j.useMemo(()=>Pe=>M?Wz(v,re,M,L,Z,U,Ce,Se,B,W,Pe):()=>{},[M]);qz(Uz,[Z,U,Ce,F,B,W]);let V;try{V=j.useSyncExternalStore(X,ae,ee?()=>L(ee(),F):ae)}catch(ve){throw G.current&&(ve.message+=`
The error may be correlated with this previous error:
${G.current.stack}

`),ve}lf(()=>{G.current=void 0,B.current=void 0,U.current=V});const ie=j.useMemo(()=>j.createElement(w,{...V,ref:O}),[O,w,V]);return j.useMemo(()=>v?j.createElement($.Provider,{value:R},ie):ie,[$,ie,R])}const D=j.memo(S);if(D.WrappedComponent=w,D.displayName=S.displayName=N,d){const P=j.forwardRef(function(F,$){return j.createElement(D,{...F,reactReduxForwardedRef:$})});return P.displayName=N,P.WrappedComponent=w,ab(P,w)}return ab(D,w)}}var ZD=Vz;function Yz(e){const{children:t,context:r,serverState:s,store:a}=e,i=j.useMemo(()=>{const d=QD(a);return{store:a,subscription:d,getServerState:s?()=>s:void 0}},[a,s]),l=j.useMemo(()=>a.getState(),[a]);lf(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||JD;return j.createElement(u.Provider,{value:i},t)}var eA=Yz,Kz="Invariant failed";function Qz(e,t){throw new Error(Kz)}var ws=function(t){var r=t.top,s=t.right,a=t.bottom,i=t.left,l=s-i,u=a-r,d={top:r,right:s,bottom:a,left:i,width:l,height:u,x:i,y:r,center:{x:(s+i)/2,y:(a+r)/2}};return d},hv=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},I2=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Xz=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Fp={top:0,right:0,bottom:0,left:0},pv=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?Fp:s,i=t.border,l=i===void 0?Fp:i,u=t.padding,d=u===void 0?Fp:u,h=ws(hv(r,a)),f=ws(I2(r,l)),m=ws(I2(f,d));return{marginBox:h,borderBox:ws(r),paddingBox:f,contentBox:m,margin:a,border:l,padding:d}},ss=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&Qz(),a},Jz=function(){return{x:window.pageXOffset,y:window.pageYOffset}},cf=function(t,r){var s=t.borderBox,a=t.border,i=t.margin,l=t.padding,u=Xz(s,r);return pv({borderBox:u,border:a,margin:i,padding:l})},uf=function(t,r){return r===void 0&&(r=Jz()),cf(t,r)},tA=function(t,r){var s={top:ss(r.marginTop),right:ss(r.marginRight),bottom:ss(r.marginBottom),left:ss(r.marginLeft)},a={top:ss(r.paddingTop),right:ss(r.paddingRight),bottom:ss(r.paddingBottom),left:ss(r.paddingLeft)},i={top:ss(r.borderTopWidth),right:ss(r.borderRightWidth),bottom:ss(r.borderBottomWidth),left:ss(r.borderLeftWidth)};return pv({borderBox:t,margin:s,padding:a,border:i})},rA=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return tA(r,s)},hc=function(t){var r=[],s=null,a=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];r=u,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},mr.apply(null,arguments)}function nA(e,t){}nA.bind(null,"warn");nA.bind(null,"error");function Ia(){}function Zz(e,t){return{...e,...t}}function os(e,t,r){const s=t.map(a=>{const i=Zz(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(i=>{i()})}}const e9="Invariant failed";class df extends Error{}df.prototype.toString=function(){return this.message};function We(e,t){throw new df(e9)}let t9=class extends Q.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Ia,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof df&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=os(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof df){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const r9=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ff=e=>e+1,n9=e=>`
  You have lifted an item in position ${ff(e.source.index)}
`,sA=(e,t)=>{const r=e.droppableId===t.droppableId,s=ff(e.index),a=ff(t.index);return r?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},aA=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,s9=e=>{const t=e.destination;if(t)return sA(e.source,t);const r=e.combine;return r?aA(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},M2=e=>`
  The item has returned to its starting position
  of ${ff(e.index)}
`,a9=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${M2(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${sA(e.source,t)}
    `:r?`
      You have dropped the item.
      ${aA(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${M2(e.source)}
  `},Md={dragHandleUsageInstructions:r9,onDragStart:n9,onDragUpdate:s9,onDragEnd:a9};function i9(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function iA(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!i9(e[r],t[r]))return!1;return!0}function Ot(e,t){const r=j.useState(()=>({inputs:t,result:e()}))[0],s=j.useRef(!0),a=j.useRef(r),l=s.current||!!(t&&a.current.inputs&&iA(t,a.current.inputs))?a.current:{inputs:t,result:e()};return j.useEffect(()=>{s.current=!1,a.current=l},[l]),l.result}function mt(e,t){return Ot(()=>e,t)}const Br={x:0,y:0},Wr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Gn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ma=(e,t)=>e.x===t.x&&e.y===t.y,Vo=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),wi=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},pc=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),O2=(e,t)=>Math.min(...t.map(r=>pc(e,r))),oA=e=>t=>({x:e(t.x),y:e(t.y)});var o9=(e,t)=>{const r=ws({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Wc=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),$2=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],l9={top:0,right:0,bottom:0,left:0},c9=(e,t)=>t?Wc(e,t.scroll.diff.displacement):e,u9=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,d9=(e,t)=>t&&t.shouldClipSubject?o9(t.pageMarginBox,e):ws(e);var Eo=({page:e,withPlaceholder:t,axis:r,frame:s})=>{const a=c9(e.marginBox,s),i=u9(a,r,t),l=d9(i,s);return{page:e,withPlaceholder:t,active:l}},gv=(e,t)=>{e.frame||We();const r=e.frame,s=Gn(t,r.scroll.initial),a=Vo(s),i={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}},l=Eo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:l}};function Fr(e,t=iA){let r=null;function s(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return s.clear=function(){r=null},s}const lA=Fr(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),cA=Fr(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),zf=Fr(e=>Object.values(e)),f9=Fr(e=>Object.values(e));var Yo=Fr((e,t)=>f9(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function xv(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Gf(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var qf=Fr((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),m9=({isMovingForward:e,draggable:t,destination:r,insideDestination:s,previousImpact:a})=>{if(!r.isCombineEnabled||!xv(a))return null;function l(x){const v={type:"COMBINE",combine:{draggableId:x,droppableId:r.descriptor.id}};return{...a,at:v}}const u=a.displaced.all,d=u.length?u[0]:null;if(e)return d?l(d):null;const h=qf(t,s);if(!d){if(!h.length)return null;const x=h[h.length-1];return l(x.descriptor.id)}const f=h.findIndex(x=>x.descriptor.id===d);f===-1&&We();const m=f-1;if(m<0)return null;const g=h[m];return l(g.descriptor.id)},Ko=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const uA={point:Br,value:0},gc={invisible:{},visible:{},all:[]},h9={displaced:gc,displacedBy:uA,at:null};var cs=(e,t)=>r=>e<=r&&r<=t,dA=e=>{const t=cs(e.top,e.bottom),r=cs(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right))return!0;const i=t(s.top)||t(s.bottom),l=r(s.left)||r(s.right);if(i&&l)return!0;const d=s.top<e.top&&s.bottom>e.bottom,h=s.left<e.left&&s.right>e.right;return d&&h?!0:d&&l||h&&i}},p9=e=>{const t=cs(e.top,e.bottom),r=cs(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right)};const yv={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var g9=e=>t=>{const r=cs(t.top,t.bottom),s=cs(t.left,t.right);return a=>e===yv?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)};const x9=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:Br;return Wc(e,r)},y9=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,b9=(e,t,r)=>r(t)(e),bv=({target:e,destination:t,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const i=s?x9(e,t):e;return y9(i,t,a)&&b9(i,r,a)},v9=e=>bv({...e,isVisibleThroughFrameFn:dA}),mA=e=>bv({...e,isVisibleThroughFrameFn:p9}),w9=e=>bv({...e,isVisibleThroughFrameFn:g9(e.destination.axis)}),j9=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const i=a[e];return i?i.shouldAnimate:!0};function N9(e,t){const r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return ws(hv(r,s))}function xc({afterDragging:e,destination:t,displacedBy:r,viewport:s,forceShouldAnimate:a,last:i}){return e.reduce(function(u,d){const h=N9(d,r),f=d.descriptor.id;if(u.all.push(f),!v9({target:h,destination:t,viewport:s,withDroppableDisplacement:!0}))return u.invisible[d.descriptor.id]=!0,u;const g=j9(f,i,a),x={draggableId:f,shouldAnimate:g};return u.visible[f]=x,u},{all:[],visible:{},invisible:{}})}function S9(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function L2({insideDestination:e,inHomeList:t,displacedBy:r,destination:s}){const a=S9(e,{inHomeList:t});return{displaced:gc,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function mf({draggable:e,insideDestination:t,destination:r,viewport:s,displacedBy:a,last:i,index:l,forceShouldAnimate:u}){const d=Ko(e,r);if(l==null)return L2({insideDestination:t,inHomeList:d,displacedBy:a,destination:r});const h=t.find(v=>v.descriptor.index===l);if(!h)return L2({insideDestination:t,inHomeList:d,displacedBy:a,destination:r});const f=qf(e,t),m=t.indexOf(h),g=f.slice(m);return{displaced:xc({afterDragging:g,destination:r,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:u}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function Oa(e,t){return!!t.effected[e]}var k9=({isMovingForward:e,destination:t,draggables:r,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,u=r[i].descriptor.index;return Oa(i,a)?e?u:u-1:e?u+1:u},C9=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:s})=>{if(!r.length)return null;const a=s.index,i=e?a+1:a-1,l=r[0].descriptor.index,u=r[r.length-1].descriptor.index,d=t?u:u+1;return i<l||i>d?null:i},_9=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:s,destination:a,insideDestination:i,previousImpact:l,viewport:u,afterCritical:d})=>{const h=l.at;if(h||We(),h.type==="REORDER"){const m=C9({isMovingForward:e,isInHomeList:t,location:h.destination,insideDestination:i});return m==null?null:mf({draggable:r,insideDestination:i,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:m})}const f=k9({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:d});return f==null?null:mf({draggable:r,insideDestination:i,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})},E9=({displaced:e,afterCritical:t,combineWith:r,displacedBy:s})=>{const a=!!(e.visible[r]||e.invisible[r]);return Oa(r,t)?a?Br:Vo(s.point):a?s.point:Br},D9=({afterCritical:e,impact:t,draggables:r})=>{const s=Gf(t);s||We();const a=s.draggableId,i=r[a].page.borderBox.center,l=E9({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return Wr(i,l)};const hA=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,A9=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,vv=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,F2=({axis:e,moveRelativeTo:t,isMoving:r})=>wi(e.line,t.marginBox[e.end]+hA(e,r),vv(e,t.marginBox,r)),B2=({axis:e,moveRelativeTo:t,isMoving:r})=>wi(e.line,t.marginBox[e.start]-A9(e,r),vv(e,t.marginBox,r)),T9=({axis:e,moveInto:t,isMoving:r})=>wi(e.line,t.contentBox[e.start]+hA(e,r),vv(e,t.contentBox,r));var P9=({impact:e,draggable:t,draggables:r,droppable:s,afterCritical:a})=>{const i=Yo(s.descriptor.id,r),l=t.page,u=s.axis;if(!i.length)return T9({axis:u,moveInto:s.page,isMoving:l});const{displaced:d,displacedBy:h}=e,f=d.all[0];if(f){const g=r[f];if(Oa(f,a))return B2({axis:u,moveRelativeTo:g.page,isMoving:l});const x=cf(g.page,h.point);return B2({axis:u,moveRelativeTo:x,isMoving:l})}const m=i[i.length-1];if(m.descriptor.id===t.descriptor.id)return l.borderBox.center;if(Oa(m.descriptor.id,a)){const g=cf(m.page,Vo(a.displacedBy.point));return F2({axis:u,moveRelativeTo:g,isMoving:l})}return F2({axis:u,moveRelativeTo:m.page,isMoving:l})},ib=(e,t)=>{const r=e.frame;return r?Wr(t,r.scroll.diff.displacement):t};const R9=({impact:e,draggable:t,droppable:r,draggables:s,afterCritical:a})=>{const i=t.page.borderBox.center,l=e.at;return!r||!l?i:l.type==="REORDER"?P9({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:a}):D9({impact:e,draggables:s,afterCritical:a})};var Uf=e=>{const t=R9(e),r=e.droppable;return r?ib(r,t):t},pA=(e,t)=>{const r=Gn(t,e.scroll.initial),s=Vo(r);return{frame:ws({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}}};function z2(e,t){return e.map(r=>t[r])}function I9(e,t){for(let r=0;r<t.length;r++){const s=t[r].visible[e];if(s)return s}return null}var M9=({impact:e,viewport:t,destination:r,draggables:s,maxScrollChange:a})=>{const i=pA(t,Wr(t.scroll.current,a)),l=r.frame?gv(r,Wr(r.frame.scroll.current,a)):r,u=e.displaced,d=xc({afterDragging:z2(u.all,s),destination:r,displacedBy:e.displacedBy,viewport:i.frame,last:u,forceShouldAnimate:!1}),h=xc({afterDragging:z2(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:t.frame,last:u,forceShouldAnimate:!1}),f={},m={},g=[u,d,h];return u.all.forEach(v=>{const b=I9(v,g);if(b){m[v]=b;return}f[v]=!0}),{...e,displaced:{all:u.all,invisible:f,visible:m}}},O9=(e,t)=>Wr(e.scroll.diff.displacement,t),wv=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const s=O9(r,e),a=Gn(s,t.page.borderBox.center);return Wr(t.client.borderBox.center,a)},gA=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:i=!1})=>{const l=Gn(r,e.page.borderBox.center),d={target:Wc(e.page.borderBox,l),destination:t,withDroppableDisplacement:a,viewport:s};return i?w9(d):mA(d)},$9=({isMovingForward:e,draggable:t,destination:r,draggables:s,previousImpact:a,viewport:i,previousPageBorderBoxCenter:l,previousClientSelection:u,afterCritical:d})=>{if(!r.isEnabled)return null;const h=Yo(r.descriptor.id,s),f=Ko(t,r),m=m9({isMovingForward:e,draggable:t,destination:r,insideDestination:h,previousImpact:a})||_9({isMovingForward:e,isInHomeList:f,draggable:t,draggables:s,destination:r,insideDestination:h,previousImpact:a,viewport:i,afterCritical:d});if(!m)return null;const g=Uf({impact:m,draggable:t,droppable:r,draggables:s,afterCritical:d});if(gA({draggable:t,destination:r,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:wv({pageBorderBoxCenter:g,draggable:t,viewport:i}),impact:m,scrollJumpRequest:null};const v=Gn(g,l),b=M9({impact:m,viewport:i,destination:r,draggables:s,maxScrollChange:v});return{clientSelection:u,impact:b,scrollJumpRequest:v}};const dn=e=>{const t=e.subject.active;return t||We(),t};var L9=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:a})=>{const i=r.subject.active;if(!i)return null;const l=r.axis,u=cs(i[l.start],i[l.end]),d=zf(s).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>dA(a.frame)(dn(f))).filter(f=>{const m=dn(f);return e?i[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<i[l.crossAxisStart]}).filter(f=>{const m=dn(f),g=cs(m[l.start],m[l.end]);return u(m[l.start])||u(m[l.end])||g(i[l.start])||g(i[l.end])}).sort((f,m)=>{const g=dn(f)[l.crossAxisStart],x=dn(m)[l.crossAxisStart];return e?g-x:x-g}).filter((f,m,g)=>dn(f)[l.crossAxisStart]===dn(g[0])[l.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const h=d.filter(f=>cs(dn(f)[l.start],dn(f)[l.end])(t[l.line]));return h.length===1?h[0]:h.length>1?h.sort((f,m)=>dn(f)[l.start]-dn(m)[l.start])[0]:d.sort((f,m)=>{const g=O2(t,$2(dn(f))),x=O2(t,$2(dn(m)));return g!==x?g-x:dn(f)[l.start]-dn(m)[l.start]})[0]};const G2=(e,t)=>{const r=e.page.borderBox.center;return Oa(e.descriptor.id,t)?Gn(r,t.displacedBy.point):r},F9=(e,t)=>{const r=e.page.borderBox;return Oa(e.descriptor.id,t)?Wc(r,Vo(t.displacedBy.point)):r};var B9=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:s,afterCritical:a})=>s.filter(l=>mA({target:F9(l,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((l,u)=>{const d=pc(e,ib(r,G2(l,a))),h=pc(e,ib(r,G2(u,a)));return d<h?-1:h<d?1:l.descriptor.index-u.descriptor.index})[0]||null,Hc=Fr(function(t,r){const s=r[t.line];return{value:s,point:wi(t.line,s)}});const z9=(e,t,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return wi(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],d=Yo(e.descriptor.id,r).reduce((h,f)=>h+f.client.marginBox[s.size],0)+t[s.line]-a;return d<=0?null:wi(s.line,d)},xA=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),yA=(e,t,r)=>{const s=e.frame;Ko(t,e)&&We(),e.subject.withPlaceholder&&We();const a=Hc(e.axis,t.displaceBy).point,i=z9(e,a,r),l={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const f=Eo({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:f}}const u=i?Wr(s.scroll.max,i):s.scroll.max,d=xA(s,u),h=Eo({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:d});return{...e,subject:h,frame:d}},G9=e=>{const t=e.subject.withPlaceholder;t||We();const r=e.frame;if(!r){const l=Eo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const s=t.oldFrameMaxScroll;s||We();const a=xA(r,s),i=Eo({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:i,frame:a}};var q9=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:s,draggables:a,destination:i,viewport:l,afterCritical:u})=>{if(!t){if(r.length)return null;const m={displaced:gc,displacedBy:uA,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},g=Uf({impact:m,draggable:s,droppable:i,draggables:a,afterCritical:u}),x=Ko(s,i)?i:yA(i,s,a);return gA({draggable:s,destination:x,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const d=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],h=(()=>{const m=t.descriptor.index;return t.descriptor.id===s.descriptor.id||d?m:m+1})(),f=Hc(i.axis,s.displaceBy);return mf({draggable:s,insideDestination:r,destination:i,viewport:l,displacedBy:f,last:gc,index:h})},U9=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:s,draggables:a,droppables:i,viewport:l,afterCritical:u})=>{const d=L9({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:l});if(!d)return null;const h=Yo(d.descriptor.id,a),f=B9({pageBorderBoxCenter:t,viewport:l,destination:d,insideDestination:h,afterCritical:u}),m=q9({previousPageBorderBoxCenter:t,destination:d,draggable:r,draggables:a,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!m)return null;const g=Uf({impact:m,draggable:r,droppable:d,draggables:a,afterCritical:u});return{clientSelection:wv({pageBorderBoxCenter:g,draggable:r,viewport:l}),impact:m,scrollJumpRequest:null}},qn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const W9=(e,t)=>{const r=qn(e);return r?t[r]:null};var H9=({state:e,type:t})=>{const r=W9(e.impact,e.dimensions.droppables),s=!!r,a=e.dimensions.droppables[e.critical.droppable.id],i=r||a,l=i.axis.direction,u=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(u&&!s)return null;const d=t==="MOVE_DOWN"||t==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:m,droppables:g}=e.dimensions;return u?$9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:h,destination:i,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):U9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:h,isOver:i,draggables:m,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function ci(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function bA(e){const t=cs(e.top,e.bottom),r=cs(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function V9(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Y9({pageBorderBox:e,draggable:t,candidates:r}){const s=t.page.borderBox.center,a=r.map(i=>{const l=i.axis,u=wi(i.axis.line,e.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:pc(s,u)}}).sort((i,l)=>l.distance-i.distance);return a[0]?a[0].id:null}function K9({pageBorderBox:e,draggable:t,droppables:r}){const s=zf(r).filter(a=>{if(!a.isEnabled)return!1;const i=a.subject.active;if(!i||!V9(e,i))return!1;if(bA(i)(e.center))return!0;const l=a.axis,u=i.center[l.crossAxisLine],d=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=cs(i[l.crossAxisStart],i[l.crossAxisEnd]),m=f(d),g=f(h);return!m&&!g?!0:m?d<u:h>u});return s.length?s.length===1?s[0].descriptor.id:Y9({pageBorderBox:e,draggable:t,candidates:s}):null}const vA=(e,t)=>ws(Wc(e,t));var Q9=(e,t)=>{const r=e.frame;return r?vA(t,r.scroll.diff.value):t};function wA({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function X9({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var J9=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:s,last:a,viewport:i,afterCritical:l})=>{const u=r.axis,d=Hc(r.axis,t.displaceBy),h=d.value,f=e[u.start],m=e[u.end],x=qf(t,s).find(b=>{const w=b.descriptor.id,C=b.page.borderBox.center[u.line],N=Oa(w,l),E=wA({displaced:a,id:w});return N?E?m<=C:f<C-h:E?m<=C+h:f<C})||null,v=X9({draggable:t,closest:x,inHomeList:Ko(t,r)});return mf({draggable:t,insideDestination:s,destination:r,viewport:i,last:a,displacedBy:d,index:v})};const Z9=4;var eG=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:s,insideDestination:a,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const l=s.axis,u=Hc(s.axis,e.displaceBy),d=u.value,h=t[l.start],f=t[l.end],g=qf(e,a).find(v=>{const b=v.descriptor.id,w=v.page.borderBox,N=w[l.size]/Z9,E=Oa(b,i),S=wA({displaced:r.displaced,id:b});return E?S?f>w[l.start]+N&&f<w[l.end]-N:h>w[l.start]-d+N&&h<w[l.end]-d-N:S?f>w[l.start]+d+N&&f<w[l.end]+d-N:h>w[l.start]+N&&h<w[l.end]-N});return g?{displacedBy:u,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}}:null},jA=({pageOffset:e,draggable:t,draggables:r,droppables:s,previousImpact:a,viewport:i,afterCritical:l})=>{const u=vA(t.page.borderBox,e),d=K9({pageBorderBox:u,draggable:t,droppables:s});if(!d)return h9;const h=s[d],f=Yo(h.descriptor.id,r),m=Q9(h,u);return eG({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:a,destination:h,insideDestination:f,afterCritical:l})||J9({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:h,insideDestination:f,last:a.displaced,viewport:i,afterCritical:l})},jv=(e,t)=>({...e,[t.descriptor.id]:t});const tG=({previousImpact:e,impact:t,droppables:r})=>{const s=qn(e),a=qn(t);if(!s||s===a)return r;const i=r[s];if(!i.subject.withPlaceholder)return r;const l=G9(i);return jv(r,l)};var rG=({draggable:e,draggables:t,droppables:r,previousImpact:s,impact:a})=>{const i=tG({previousImpact:s,impact:a,droppables:r}),l=qn(a);if(!l)return i;const u=r[l];if(Ko(e,u)||u.subject.withPlaceholder)return i;const d=yA(u,e,t);return jv(i,d)},tc=({state:e,clientSelection:t,dimensions:r,viewport:s,impact:a,scrollJumpRequest:i})=>{const l=s||e.viewport,u=r||e.dimensions,d=t||e.current.client.selection,h=Gn(d,e.initial.client.selection),f={offset:h,selection:d,borderBoxCenter:Wr(e.initial.client.borderBoxCenter,h)},m={selection:Wr(f.selection,l.scroll.current),borderBoxCenter:Wr(f.borderBoxCenter,l.scroll.current),offset:Wr(f.offset,l.scroll.diff.value)},g={client:f,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:u,viewport:l,current:g};const x=u.draggables[e.critical.draggable.id],v=a||jA({pageOffset:m.offset,draggable:x,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),b=rG({draggable:x,impact:v,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables});return{...e,current:g,dimensions:{draggables:u.draggables,droppables:b},impact:v,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function nG(e,t){return e.map(r=>t[r])}var NA=({impact:e,viewport:t,draggables:r,destination:s,forceShouldAnimate:a})=>{const i=e.displaced,l=nG(i.all,r),u=xc({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return{...e,displaced:u}},SA=({impact:e,draggable:t,droppable:r,draggables:s,viewport:a,afterCritical:i})=>{const l=Uf({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:i});return wv({pageBorderBoxCenter:l,draggable:t,viewport:a})},kA=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&We();const s=e.impact,a=r||e.viewport,i=t||e.dimensions,{draggables:l,droppables:u}=i,d=l[e.critical.draggable.id],h=qn(s);h||We();const f=u[h],m=NA({impact:s,viewport:a,destination:f,draggables:l}),g=SA({impact:m,draggable:d,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return tc({impact:m,clientSelection:g,state:e,dimensions:i,viewport:a})},sG=e=>({index:e.index,droppableId:e.droppableId}),CA=({draggable:e,home:t,draggables:r,viewport:s})=>{const a=Hc(t.axis,e.displaceBy),i=Yo(t.descriptor.id,r),l=i.indexOf(e);l===-1&&We();const u=i.slice(l+1),d=u.reduce((g,x)=>(g[x.descriptor.id]=!0,g),{}),h={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:d};return{impact:{displaced:xc({afterDragging:u,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:sG(e.descriptor)}},afterCritical:h}},aG=(e,t)=>({draggables:e.draggables,droppables:jv(e.droppables,t)}),iG=({draggable:e,offset:t,initialWindowScroll:r})=>{const s=cf(e.client,t),a=uf(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},oG=e=>{const t=e.frame;return t||We(),t},lG=({additions:e,updatedDroppables:t,viewport:r})=>{const s=r.scroll.diff.value;return e.map(a=>{const i=a.descriptor.droppableId,l=t[i],d=oG(l).scroll.diff.value,h=Wr(s,d);return iG({draggable:a,offset:h,initialWindowScroll:r.scroll.initial})})},cG=({state:e,published:t})=>{const r=t.modified.map(C=>{const N=e.dimensions.droppables[C.droppableId];return gv(N,C.scroll)}),s={...e.dimensions.droppables,...lA(r)},a=cA(lG({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...a};t.removals.forEach(C=>{delete i[C]});const l={droppables:s,draggables:i},u=qn(e.impact),d=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],{impact:m,afterCritical:g}=CA({draggable:h,home:f,draggables:i,viewport:e.viewport}),x=d&&d.isCombineEnabled?e.impact:m,v=jA({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:e.viewport,afterCritical:g}),b={...e,phase:"DRAGGING",impact:v,onLiftImpact:m,dimensions:l,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?b:{...b,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const ob=e=>e.movementMode==="SNAP",Bp=(e,t,r)=>{const s=aG(e.dimensions,t);return!ob(e)||r?tc({state:e,dimensions:s}):kA({state:e,dimensions:s})};function zp(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const q2={phase:"IDLE",completed:null,shouldFlush:!1};var uG=(e=q2,t)=>{if(t.type==="FLUSH")return{...q2,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&We();const{critical:r,clientSelection:s,viewport:a,dimensions:i,movementMode:l}=t.payload,u=i.draggables[r.draggable.id],d=i.droppables[r.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:Br},f={client:h,page:{selection:Wr(h.selection,a.scroll.initial),borderBoxCenter:Wr(h.selection,a.scroll.initial),offset:Wr(h.selection,a.scroll.diff.value)}},m=zf(i.droppables).every(b=>!b.isFixedOnPage),{impact:g,afterCritical:x}=CA({draggable:u,home:d,draggables:i.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:i,initial:f,current:f,isWindowScrollAllowed:m,impact:g,afterCritical:x,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&We(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||We(),cG({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ci(e)||We();const{client:r}=t.payload;return Ma(r,e.current.client.selection)?e:tc({state:e,clientSelection:r,impact:ob(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return zp(e);ci(e)||We();const{id:r,newScroll:s}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const i=gv(a,s);return Bp(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ci(e)||We();const{id:r,isEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||We(),a.isEnabled===s&&We();const i={...a,isEnabled:s};return Bp(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ci(e)||We();const{id:r,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||We(),a.isCombineEnabled===s&&We();const i={...a,isCombineEnabled:s};return Bp(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ci(e)||We(),e.isWindowScrollAllowed||We();const r=t.payload.newScroll;if(Ma(e.viewport.scroll.current,r))return zp(e);const s=pA(e.viewport,r);return ob(e)?kA({state:e,viewport:s}):tc({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ci(e))return e;const r=t.payload.maxScroll;if(Ma(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&We();const r=H9({state:e,type:t.type});return r?tc({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&We(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||We(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function Ht(e,t){return e instanceof Object&&"type"in e&&e.type===t}const dG=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),fG=e=>({type:"LIFT",payload:e}),mG=e=>({type:"INITIAL_PUBLISH",payload:e}),hG=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),pG=()=>({type:"COLLECTION_STARTING",payload:null}),gG=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),xG=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),yG=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),_A=e=>({type:"MOVE",payload:e}),bG=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),vG=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),wG=()=>({type:"MOVE_UP",payload:null}),jG=()=>({type:"MOVE_DOWN",payload:null}),NG=()=>({type:"MOVE_RIGHT",payload:null}),SG=()=>({type:"MOVE_LEFT",payload:null}),Nv=()=>({type:"FLUSH",payload:null}),kG=e=>({type:"DROP_ANIMATE",payload:e}),Sv=e=>({type:"DROP_COMPLETE",payload:e}),EA=e=>({type:"DROP",payload:e}),CG=e=>({type:"DROP_PENDING",payload:e}),DA=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var _G=e=>({getState:t,dispatch:r})=>s=>a=>{if(!Ht(a,"LIFT")){s(a);return}const{id:i,clientSelection:l,movementMode:u}=a.payload,d=t();d.phase==="DROP_ANIMATING"&&r(Sv({completed:d.completed})),t().phase!=="IDLE"&&We(),r(Nv()),r(dG({draggableId:i,movementMode:u}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:u==="SNAP"}},{critical:m,dimensions:g,viewport:x}=e.startPublishing(f);r(mG({critical:m,dimensions:g,clientSelection:l,movementMode:u,viewport:x}))},EG=e=>()=>t=>r=>{Ht(r,"INITIAL_PUBLISH")&&e.dragging(),Ht(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(Ht(r,"FLUSH")||Ht(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const kv={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},yc={opacity:{drop:0,combining:.7},scale:{drop:.75}},AA={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},oi=`${AA.outOfTheWay}s ${kv.outOfTheWay}`,rc={fluid:`opacity ${oi}`,snap:`transform ${oi}, opacity ${oi}`,drop:e=>{const t=`${e}s ${kv.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${oi}`,placeholder:`height ${oi}, width ${oi}, margin ${oi}`},U2=e=>Ma(e,Br)?void 0:`translate(${e.x}px, ${e.y}px)`,lb={moveTo:U2,drop:(e,t)=>{const r=U2(e);if(r)return t?`${r} scale(${yc.scale.drop})`:r}},{minDropTime:cb,maxDropTime:TA}=AA,DG=TA-cb,W2=1500,AG=.6;var TG=({current:e,destination:t,reason:r})=>{const s=pc(e,t);if(s<=0)return cb;if(s>=W2)return TA;const a=s/W2,i=cb+DG*a,l=r==="CANCEL"?i*AG:i;return Number(l.toFixed(2))},PG=({impact:e,draggable:t,dimensions:r,viewport:s,afterCritical:a})=>{const{draggables:i,droppables:l}=r,u=qn(e),d=u?l[u]:null,h=l[t.descriptor.droppableId],f=SA({impact:e,draggable:t,draggables:i,afterCritical:a,droppable:d||h,viewport:s});return Gn(f,t.client.borderBox.center)},RG=({draggables:e,reason:t,lastImpact:r,home:s,viewport:a,onLiftImpact:i})=>!r.at||t!=="DROP"?{impact:NA({draggables:e,impact:i,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:gc},didDropInsideDroppable:!0};const IG=({getState:e,dispatch:t})=>r=>s=>{if(!Ht(s,"DROP")){r(s);return}const a=e(),i=s.payload.reason;if(a.phase==="COLLECTING"){t(CG({reason:i}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&We(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||We();const u=a.critical,d=a.dimensions,h=d.draggables[a.critical.draggable.id],{impact:f,didDropInsideDroppable:m}=RG({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),g=m?xv(f):null,x=m?Gf(f):null,v={index:u.draggable.index,droppableId:u.droppable.id},b={draggableId:h.descriptor.id,type:h.descriptor.type,source:v,reason:i,mode:a.movementMode,destination:g,combine:x},w=PG({impact:f,draggable:h,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),C={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:f};if(!(!Ma(a.current.client.offset,w)||!!b.combine)){t(Sv({completed:C}));return}const E=TG({current:a.current.client.offset,destination:w,reason:i});t(kG({newHomeClientOffset:w,dropDuration:E,completed:C}))};var PA=()=>({x:window.pageXOffset,y:window.pageYOffset});function MG(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function OG({onWindowScroll:e}){function t(){e(PA())}const r=hc(t),s=MG(r);let a=Ia;function i(){return a!==Ia}function l(){i()&&We(),a=os(window,[s])}function u(){i()||We(),r.cancel(),a(),a=Ia}return{start:l,stop:u,isActive:i}}const $G=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH"),LG=e=>{const t=OG({onWindowScroll:r=>{e.dispatch(bG({newScroll:r}))}});return r=>s=>{!t.isActive()&&Ht(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&$G(s)&&t.stop(),r(s)}};var FG=e=>{let t=!1,r=!1;const s=setTimeout(()=>{r=!0}),a=i=>{t||r||(t=!0,e(i),clearTimeout(s))};return a.wasCalled=()=>t,a},BG=()=>{const e=[],t=a=>{const i=e.findIndex(u=>u.timerId===a);i===-1&&We();const[l]=e.splice(i,1);l.callback()};return{add:a=>{const i=setTimeout(()=>t(i)),l={timerId:i,callback:a};e.push(l)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const zG=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,GG=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,qG=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&s},Bl=(e,t)=>{t()},bd=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Gp(e,t,r,s){if(!e){r(s(t));return}const a=FG(r);e(t,{announce:a}),a.wasCalled()||r(s(t))}var UG=(e,t)=>{const r=BG();let s=null;const a=(m,g)=>{s&&We(),Bl("onBeforeCapture",()=>{const x=e().onBeforeCapture;x&&x({draggableId:m,mode:g})})},i=(m,g)=>{s&&We(),Bl("onBeforeDragStart",()=>{const x=e().onBeforeDragStart;x&&x(bd(m,g))})},l=(m,g)=>{s&&We();const x=bd(m,g);s={mode:g,lastCritical:m,lastLocation:x.source,lastCombine:null},r.add(()=>{Bl("onDragStart",()=>Gp(e().onDragStart,x,t,Md.onDragStart))})},u=(m,g)=>{const x=xv(g),v=Gf(g);s||We();const b=!qG(m,s.lastCritical);b&&(s.lastCritical=m);const w=!zG(s.lastLocation,x);w&&(s.lastLocation=x);const C=!GG(s.lastCombine,v);if(C&&(s.lastCombine=v),!b&&!w&&!C)return;const N={...bd(m,s.mode),combine:v,destination:x};r.add(()=>{Bl("onDragUpdate",()=>Gp(e().onDragUpdate,N,t,Md.onDragUpdate))})},d=()=>{s||We(),r.flush()},h=m=>{s||We(),s=null,Bl("onDragEnd",()=>Gp(e().onDragEnd,m,t,Md.onDragEnd))};return{beforeCapture:a,beforeStart:i,start:l,update:u,flush:d,drop:h,abort:()=>{if(!s)return;const m={...bd(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};h(m)}}},WG=(e,t)=>{const r=UG(e,t);return s=>a=>i=>{if(Ht(i,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ht(i,"INITIAL_PUBLISH")){const u=i.payload.critical;r.beforeStart(u,i.payload.movementMode),a(i),r.start(u,i.payload.movementMode);return}if(Ht(i,"DROP_COMPLETE")){const u=i.payload.completed.result;r.flush(),a(i),r.drop(u);return}if(a(i),Ht(i,"FLUSH")){r.abort();return}const l=s.getState();l.phase==="DRAGGING"&&r.update(l.critical,l.impact)}};const HG=e=>t=>r=>{if(!Ht(r,"DROP_ANIMATION_FINISHED")){t(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&We(),e.dispatch(Sv({completed:s.completed}))},VG=e=>{let t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>i=>{if((Ht(i,"FLUSH")||Ht(i,"DROP_COMPLETE")||Ht(i,"DROP_ANIMATION_FINISHED"))&&s(),a(i),!Ht(i,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(DA())}};r=requestAnimationFrame(()=>{r=null,t=os(window,[l])})}};var YG=e=>()=>t=>r=>{(Ht(r,"DROP_COMPLETE")||Ht(r,"FLUSH")||Ht(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},KG=e=>{let t=!1;return()=>r=>s=>{if(Ht(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(Ht(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ht(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const QG=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH");var XG=e=>t=>r=>s=>{if(QG(s)){e.stop(),r(s);return}if(Ht(s,"INITIAL_PUBLISH")){r(s);const a=t.getState();a.phase!=="DRAGGING"&&We(),e.start(a);return}r(s),e.scroll(t.getState())};const JG=e=>t=>r=>{if(t(r),!Ht(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(EA({reason:s.reason})))},ZG=mc;var eq=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:s,announce:a,autoScroller:i})=>dv(uG,ZG(VD(EG(r),YG(e),_G(e),IG,HG,VG,JG,XG(i),LG,KG(t),WG(s,a))));const qp=()=>({additions:{},removals:{},modified:{}});function tq({registry:e,callbacks:t}){let r=qp(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:d,removals:h,modified:f}=r,m=Object.keys(d).map(v=>e.draggable.getById(v).getDimension(Br)).sort((v,b)=>v.descriptor.index-b.descriptor.index),g=Object.keys(f).map(v=>{const w=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:w}}),x={additions:m,removals:Object.keys(h),modified:g};r=qp(),t.publish(x)}))};return{add:d=>{const h=d.descriptor.id;r.additions[h]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[h]&&delete r.removals[h],a()},remove:d=>{const h=d.descriptor;r.removals[h.id]=!0,r.modified[h.droppableId]=!0,r.additions[h.id]&&delete r.additions[h.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=qp())}}}var RA=({scrollHeight:e,scrollWidth:t,height:r,width:s})=>{const a=Gn({x:t,y:e},{x:s,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},IA=()=>{const e=document.documentElement;return e||We(),e},MA=()=>{const e=IA();return RA({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},rq=()=>{const e=PA(),t=MA(),r=e.y,s=e.x,a=IA(),i=a.clientWidth,l=a.clientHeight,u=s+i,d=r+l;return{frame:ws({top:r,left:s,right:u,bottom:d}),scroll:{initial:e,current:e,max:t,diff:{value:Br,displacement:Br}}}},nq=({critical:e,scrollOptions:t,registry:r})=>{const s=rq(),a=s.scroll.current,i=e.droppable,l=r.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(a,t)),u=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(a));return{dimensions:{draggables:cA(u),droppables:lA(l)},critical:e,viewport:s}};function H2(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var sq=(e,t)=>{let r=null;const s=tq({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(g,x)=>{e.droppable.exists(g)||We(),r&&t.updateDroppableIsEnabled({id:g,isEnabled:x})},i=(g,x)=>{r&&(e.droppable.exists(g)||We(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:x}))},l=(g,x)=>{r&&(e.droppable.exists(g)||We(),t.updateDroppableScroll({id:g,newScroll:x}))},u=(g,x)=>{r&&e.droppable.getById(g).callbacks.scroll(x)},d=()=>{if(!r)return;s.stop();const g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(x=>x.callbacks.dragStopped()),r.unsubscribe(),r=null},h=g=>{r||We();const x=r.critical.draggable;g.type==="ADDITION"&&H2(e,x,g.value)&&s.add(g.value),g.type==="REMOVAL"&&H2(e,x,g.value)&&s.remove(g.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:u,updateDroppableScroll:l,startPublishing:g=>{r&&We();const x=e.draggable.getById(g.draggableId),v=e.droppable.getById(x.descriptor.droppableId),b={draggable:x.descriptor,droppable:v.descriptor},w=e.subscribe(h);return r={critical:b,unsubscribe:w},nq({critical:b,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:d}},OA=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",aq=e=>{window.scrollBy(e.x,e.y)};const iq=Fr(e=>zf(e).filter(t=>!(!t.isEnabled||!t.frame))),oq=(e,t)=>iq(t).find(s=>(s.frame||We(),bA(s.frame.pageMarginBox)(e)))||null;var lq=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return oq(e,r)};const bc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var cq=(e,t,r=()=>bc)=>{const s=r(),a=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:i}},$A=({startOfRange:e,endOfRange:t,current:r})=>{const s=t-e;return s===0?0:(r-e)/s},Cv=1,uq=(e,t,r=()=>bc)=>{const s=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return Cv;const i=1-$A({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),l=s.maxPixelScroll*s.ease(i);return Math.ceil(l)},dq=(e,t,r)=>{const s=r(),a=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,l=t,u=i,h=Date.now()-l;if(h>=i)return e;if(h<a)return Cv;const f=$A({startOfRange:a,endOfRange:u,current:h}),m=e*s.ease(f);return Math.ceil(m)},V2=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=uq(e,t,a);return i===0?0:s?Math.max(dq(i,r,a),Cv):i},Y2=({container:e,distanceToEdges:t,dragStartTime:r,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=cq(e,s,i);return t[s.end]<t[s.start]?V2({distanceToEdge:t[s.end],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*V2({distanceToEdge:t[s.start],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})},fq=({container:e,subject:t,proposedScroll:r})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?r:a&&s?null:{x:a?0:r.x,y:s?0:r.y}};const mq=oA(e=>e===0?0:e);var LA=({dragStartTime:e,container:t,subject:r,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},u=Y2({container:t,distanceToEdges:l,dragStartTime:e,axis:yv,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),d=Y2({container:t,distanceToEdges:l,dragStartTime:e,axis:fA,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),h=mq({x:d,y:u});if(Ma(h,Br))return null;const f=fq({container:t,subject:r,proposedScroll:h});return f?Ma(f,Br)?null:f:null};const hq=oA(e=>e===0?0:e>0?1:-1),_v=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:s})=>{const a=Wr(t,s),i={x:e(a.x,r.x),y:e(a.y,r.y)};return Ma(i,Br)?null:i}})(),FA=({max:e,current:t,change:r})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=hq(r),i=_v({max:s,current:t,change:a});return!i||a.x!==0&&i.x===0||a.y!==0&&i.y===0},Ev=(e,t)=>FA({current:e.scroll.current,max:e.scroll.max,change:t}),pq=(e,t)=>{if(!Ev(e,t))return null;const r=e.scroll.max,s=e.scroll.current;return _v({current:s,max:r,change:t})},Dv=(e,t)=>{const r=e.frame;return r?FA({current:r.scroll.current,max:r.scroll.max,change:t}):!1},gq=(e,t)=>{const r=e.frame;return!r||!Dv(e,t)?null:_v({current:r.scroll.current,max:r.scroll.max,change:t})};var xq=({viewport:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=LA({dragStartTime:s,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&Ev(e,l)?l:null},yq=({droppable:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=e.frame;if(!l)return null;const u=LA({dragStartTime:s,container:l.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return u&&Dv(e,u)?u:null},K2=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:i})=>{const l=e.current.page.borderBoxCenter,d=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,g=xq({dragStartTime:t,viewport:m,subject:d,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});if(g){s(g);return}}const h=lq({center:l,destination:qn(e.impact),droppables:e.dimensions.droppables});if(!h)return;const f=yq({dragStartTime:t,droppable:h,subject:d,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});f&&a(h.descriptor.id,f)},bq=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>bc})=>{const s=hc(e),a=hc(t);let i=null;const l=h=>{i||We();const{shouldUseTimeDampening:f,dragStartTime:m}=i;K2({state:h,scrollWindow:s,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:h=>{i&&We();const f=Date.now();let m=!1;const g=()=>{m=!0};K2({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:r}),i={dragStartTime:f,shouldUseTimeDampening:m},m&&l(h)},stop:()=>{i&&(s.cancel(),a.cancel(),i=null)},scroll:l}},vq=({move:e,scrollDroppable:t,scrollWindow:r})=>{const s=(u,d)=>{const h=Wr(u.current.client.selection,d);e({client:h})},a=(u,d)=>{if(!Dv(u,d))return d;const h=gq(u,d);if(!h)return t(u.descriptor.id,d),null;const f=Gn(d,h);return t(u.descriptor.id,f),Gn(d,f)},i=(u,d,h)=>{if(!u||!Ev(d,h))return h;const f=pq(d,h);if(!f)return r(h),null;const m=Gn(h,f);return r(m),Gn(h,m)};return u=>{const d=u.scrollJumpRequest;if(!d)return;const h=qn(u.impact);h||We();const f=a(u.dimensions.droppables[h],d);if(!f)return;const m=u.viewport,g=i(u.isWindowScrollAllowed,m,f);g&&s(u,g)}},wq=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:s})=>{const a=bq({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=vq({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:d=>{if(!(s().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},start:a.start,stop:a.stop}};const Do="data-rfd",Ao=(()=>{const e=`${Do}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),ub=(()=>{const e=`${Do}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),jq=(()=>{const e=`${Do}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Q2={contextId:`${Do}-scroll-container-context-id`},Nq=e=>t=>`[${t}="${e}"]`,zl=(e,t)=>e.map(r=>{const s=r.styles[t];return s?`${r.selector} { ${s} }`:""}).join(" "),Sq="pointer-events: none;";var kq=e=>{const t=Nq(e),r=(()=>{const u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ao.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:Sq,dropAnimating:u}}})(),s=(()=>{const u=`
      transition: ${rc.outOfTheWay};
    `;return{selector:t(ub.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}})(),a={selector:t(jq.contextId),styles:{always:"overflow-anchor: none;"}},l=[s,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:zl(l,"always"),resting:zl(l,"resting"),dragging:zl(l,"dragging"),dropAnimating:zl(l,"dropAnimating"),userCancel:zl(l,"userCancel")}};const Un=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,Up=()=>{const e=document.querySelector("head");return e||We(),e},X2=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Cq(e,t){const r=Ot(()=>kq(e),[e]),s=j.useRef(null),a=j.useRef(null),i=mt(Fr(m=>{const g=a.current;g||We(),g.textContent=m}),[]),l=mt(m=>{const g=s.current;g||We(),g.textContent=m},[]);Un(()=>{!s.current&&!a.current||We();const m=X2(t),g=X2(t);return s.current=m,a.current=g,m.setAttribute(`${Do}-always`,e),g.setAttribute(`${Do}-dynamic`,e),Up().appendChild(m),Up().appendChild(g),l(r.always),i(r.resting),()=>{const x=v=>{const b=v.current;b||We(),Up().removeChild(b),v.current=null};x(s),x(a)}},[t,l,i,r.always,r.resting,e]);const u=mt(()=>i(r.dragging),[i,r.dragging]),d=mt(m=>{if(m==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),h=mt(()=>{a.current&&i(r.resting)},[i,r.resting]);return Ot(()=>({dragging:u,dropping:d,resting:h}),[u,d,h])}function BA(e,t){return Array.from(e.querySelectorAll(t))}var zA=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Wf(e){return e instanceof zA(e).HTMLElement}function _q(e,t){const r=`[${Ao.contextId}="${e}"]`,s=BA(document,r);if(!s.length)return null;const a=s.find(i=>i.getAttribute(Ao.draggableId)===t);return!a||!Wf(a)?null:a}function Eq(e){const t=j.useRef({}),r=j.useRef(null),s=j.useRef(null),a=j.useRef(!1),i=mt(function(g,x){const v={id:g,focus:x};return t.current[g]=v,function(){const w=t.current;w[g]!==v&&delete w[g]}},[]),l=mt(function(g){const x=_q(e,g);x&&x!==document.activeElement&&x.focus()},[e]),u=mt(function(g,x){r.current===g&&(r.current=x)},[]),d=mt(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const g=r.current;g&&l(g)}))},[l]),h=mt(function(g){r.current=null;const x=document.activeElement;x&&x.getAttribute(Ao.draggableId)===g&&(r.current=g)},[]);return Un(()=>(a.current=!0,function(){a.current=!1;const g=s.current;g&&cancelAnimationFrame(g)}),[]),Ot(()=>({register:i,tryRecordFocus:h,tryRestoreFocusRecorded:d,tryShiftRecord:u}),[i,h,d,u])}function Dq(){const e={draggables:{},droppables:{}},t=[];function r(m){return t.push(m),function(){const x=t.indexOf(m);x!==-1&&t.splice(x,1)}}function s(m){t.length&&t.forEach(g=>g(m))}function a(m){return e.draggables[m]||null}function i(m){const g=a(m);return g||We(),g}const l={register:m=>{e.draggables[m.descriptor.id]=m,s({type:"ADDITION",value:m})},update:(m,g)=>{const x=e.draggables[g.descriptor.id];x&&x.uniqueId===m.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const g=m.descriptor.id,x=a(g);x&&m.uniqueId===x.uniqueId&&(delete e.draggables[g],e.droppables[m.descriptor.droppableId]&&s({type:"REMOVAL",value:m}))},getById:i,findById:a,exists:m=>!!a(m),getAllByType:m=>Object.values(e.draggables).filter(g=>g.descriptor.type===m)};function u(m){return e.droppables[m]||null}function d(m){const g=u(m);return g||We(),g}const h={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const g=u(m.descriptor.id);g&&m.uniqueId===g.uniqueId&&delete e.droppables[m.descriptor.id]},getById:d,findById:u,exists:m=>!!u(m),getAllByType:m=>Object.values(e.droppables).filter(g=>g.descriptor.type===m)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:h,subscribe:r,clean:f}}function Aq(){const e=Ot(Dq,[]);return j.useEffect(()=>function(){e.clean()},[e]),e}var Av=Q.createContext(null),hf=()=>{const e=document.body;return e||We(),e};const Tq={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Pq=e=>`rfd-announcement-${e}`;function Rq(e){const t=Ot(()=>Pq(e),[e]),r=j.useRef(null);return j.useEffect(function(){const i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),mr(i.style,Tq),hf().appendChild(i),function(){setTimeout(function(){const d=hf();d.contains(i)&&d.removeChild(i),i===r.current&&(r.current=null)})}},[t]),mt(a=>{const i=r.current;if(i){i.textContent=a;return}},[])}const Iq={separator:"::"};function Tv(e,t=Iq){const r=Q.useId();return Ot(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function Mq({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function Oq({contextId:e,text:t}){const r=Tv("hidden-text",{separator:"-"}),s=Ot(()=>Mq({contextId:e,uniqueId:r}),[r,e]);return j.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",hf().appendChild(i),function(){const u=hf();u.contains(i)&&u.removeChild(i)}},[s,t]),s}var Hf=Q.createContext(null);function GA(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),t}function $q(){let e=null;function t(){return!!e}function r(l){return l===e}function s(l){e&&We();const u={abandon:l};return e=u,u}function a(){e||We(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:i}}function vc(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Lq=9,Fq=13,Pv=27,qA=32,Bq=33,zq=34,Gq=35,qq=36,Uq=37,Wq=38,Hq=39,Vq=40,Yq={[Fq]:!0,[Lq]:!0};var UA=e=>{Yq[e.keyCode]&&e.preventDefault()};const Vf=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),WA=0,J2=5;function Kq(e,t){return Math.abs(t.x-e.x)>=J2||Math.abs(t.y-e.y)>=J2}const Z2={type:"IDLE"};function Qq({cancel:e,completed:t,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:i,clientX:l,clientY:u}=a;if(i!==WA)return;const d={x:l,y:u},h=r();if(h.type==="DRAGGING"){a.preventDefault(),h.actions.move(d);return}h.type!=="PENDING"&&We();const f=h.point;if(!Kq(f,d))return;a.preventDefault();const m=h.actions.fluidLift(d);s({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:a=>{const i=r();if(i.type!=="DRAGGING"){e();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===Pv){a.preventDefault(),e();return}UA(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const i=r();if(i.type==="IDLE"&&We(),i.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:Vf,fn:e}]}function Xq(e){const t=j.useRef(Z2),r=j.useRef(Ia),s=Ot(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==WA||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const g=e.findClosestDraggableId(m);if(!g)return;const x=e.tryGetLock(g,l,{sourceEvent:m});if(!x)return;m.preventDefault();const v={x:m.clientX,y:m.clientY};r.current(),h(x,v)}}),[e]),a=Ot(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const m=e.findClosestDraggableId(f);if(!m)return;const g=e.findOptionsForDraggable(m);g&&(g.shouldRespectForcePress||e.canGetLock(m)&&f.preventDefault())}}),[e]),i=mt(function(){const m={passive:!1,capture:!0};r.current=os(window,[a,s],m)},[a,s]),l=mt(()=>{t.current.type!=="IDLE"&&(t.current=Z2,r.current(),i())},[i]),u=mt(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=mt(function(){const m={capture:!0,passive:!1},g=Qq({cancel:u,completed:l,getPhase:()=>t.current,setPhase:x=>{t.current=x}});r.current=os(window,g,m)},[u,l]),h=mt(function(m,g){t.current.type!=="IDLE"&&We(),t.current={type:"PENDING",point:g,actions:m},d()},[d]);Un(function(){return i(),function(){r.current()}},[i])}function Jq(){}const Zq={[zq]:!0,[Bq]:!0,[qq]:!0,[Gq]:!0};function eU(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===Pv){a.preventDefault(),r();return}if(a.keyCode===qA){a.preventDefault(),s();return}if(a.keyCode===Vq){a.preventDefault(),e.moveDown();return}if(a.keyCode===Wq){a.preventDefault(),e.moveUp();return}if(a.keyCode===Hq){a.preventDefault(),e.moveRight();return}if(a.keyCode===Uq){a.preventDefault(),e.moveLeft();return}if(Zq[a.keyCode]){a.preventDefault();return}UA(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Vf,fn:r}]}function tU(e){const t=j.useRef(Jq),r=Ot(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==qA)return;const l=e.findClosestDraggableId(i);if(!l)return;const u=e.tryGetLock(l,f,{sourceEvent:i});if(!u)return;i.preventDefault();let d=!0;const h=u.snapLift();t.current();function f(){d||We(),d=!1,t.current(),s()}t.current=os(window,eU(h,f),{capture:!0,passive:!1})}}),[e]),s=mt(function(){const i={passive:!1,capture:!0};t.current=os(window,[r],i)},[r]);Un(function(){return s(),function(){t.current()}},[s])}const Wp={type:"IDLE"},rU=120,nU=.15;function sU({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Pv&&r.preventDefault(),e()}},{eventName:Vf,fn:e}]}function aU({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:i,clientY:l}=s.touches[0],u={x:i,y:l};s.preventDefault(),a.actions.move(u)}},{eventName:"touchend",fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=r();a.type==="IDLE"&&We();const i=s.touches[0];if(!i||!(i.force>=nU))return;const u=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){u&&e();return}if(u){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Vf,fn:e}]}function iU(e){const t=j.useRef(Wp),r=j.useRef(Ia),s=mt(function(){return t.current},[]),a=mt(function(x){t.current=x},[]),i=Ot(()=>({eventName:"touchstart",fn:function(x){if(x.defaultPrevented)return;const v=e.findClosestDraggableId(x);if(!v)return;const b=e.tryGetLock(v,u,{sourceEvent:x});if(!b)return;const w=x.touches[0],{clientX:C,clientY:N}=w,E={x:C,y:N};r.current(),m(b,E)}}),[e]),l=mt(function(){const x={capture:!0,passive:!1};r.current=os(window,[i],x)},[i]),u=mt(()=>{const g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),a(Wp),r.current(),l())},[l,a]),d=mt(()=>{const g=t.current;u(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[u]),h=mt(function(){const x={capture:!0,passive:!1},v={cancel:d,completed:u,getPhase:s},b=os(window,aU(v),x),w=os(window,sU(v),x);r.current=function(){b(),w()}},[d,s,u]),f=mt(function(){const x=s();x.type!=="PENDING"&&We();const v=x.actions.fluidLift(x.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[s,a]),m=mt(function(x,v){s().type!=="IDLE"&&We();const b=setTimeout(f,rU);a({type:"PENDING",point:v,actions:x,longPressTimerId:b}),h()},[h,s,a,f]);Un(function(){return l(),function(){r.current();const v=s();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(Wp))}},[s,l,a]),Un(function(){return os(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const oU=["input","button","textarea","select","option","optgroup","video","audio"];function HA(e,t){if(t==null)return!1;if(oU.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:HA(e,t.parentElement)}function lU(e,t){const r=t.target;return Wf(r)?HA(e,r):!1}var cU=e=>ws(e.getBoundingClientRect()).center;function uU(e){return e instanceof zA(e).Element}const dU=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function VA(e,t){return e==null?null:e[dU](t)?e:VA(e.parentElement,t)}function fU(e,t){return e.closest?e.closest(t):VA(e,t)}function mU(e){return`[${Ao.contextId}="${e}"]`}function hU(e,t){const r=t.target;if(!uU(r))return null;const s=mU(e),a=fU(r,s);return!a||!Wf(a)?null:a}function pU(e,t){const r=hU(e,t);return r?r.getAttribute(Ao.draggableId):null}function gU(e,t){const r=`[${ub.contextId}="${e}"]`,a=BA(document,r).find(i=>i.getAttribute(ub.id)===t);return!a||!Wf(a)?null:a}function xU(e){e.preventDefault()}function vd({expected:e,phase:t,isLockActive:r,shouldWarn:s}){return!(!r()||e!==t)}function YA({lockAPI:e,store:t,registry:r,draggableId:s}){if(e.isClaimed())return!1;const a=r.draggable.findById(s);return!(!a||!a.options.isEnabled||!OA(t.getState(),s))}function yU({lockAPI:e,contextId:t,store:r,registry:s,draggableId:a,forceSensorStop:i,sourceEvent:l}){if(!YA({lockAPI:e,store:r,registry:s,draggableId:a}))return null;const d=s.draggable.getById(a),h=gU(t,d.descriptor.id);if(!h||l&&!d.options.canDragInteractiveElements&&lU(h,l))return null;const f=e.claim(i||Ia);let m="PRE_DRAG";function g(){return d.options.shouldRespectForcePress}function x(){return e.isActive(f)}function v(_,D){vd({expected:_,phase:m,isLockActive:x,shouldWarn:!0})&&r.dispatch(D())}const b=v.bind(null,"DRAGGING");function w(_){function D(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(D(),We()),r.dispatch(fG(_.liftActionArgs)),m="DRAGGING";function T(P,O={shouldBlockNextClick:!1}){if(_.cleanup(),O.shouldBlockNextClick){const F=os(window,[{eventName:"click",fn:xU,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}D(),r.dispatch(EA({reason:P}))}return{isActive:()=>vd({expected:"DRAGGING",phase:m,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:g,drop:P=>T("DROP",P),cancel:P=>T("CANCEL",P),..._.actions}}function C(_){const D=hc(P=>{b(()=>_A({client:P}))});return{...w({liftActionArgs:{id:a,clientSelection:_,movementMode:"FLUID"},cleanup:()=>D.cancel(),actions:{move:D}}),move:D}}function N(){const _={moveUp:()=>b(wG),moveRight:()=>b(NG),moveDown:()=>b(jG),moveLeft:()=>b(SG)};return w({liftActionArgs:{id:a,clientSelection:cU(h),movementMode:"SNAP"},cleanup:Ia,actions:_})}function E(){vd({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!0})&&e.release()}return{isActive:()=>vd({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:C,snapLift:N,abort:E}}const bU=[Xq,tU,iU];function vU({contextId:e,store:t,registry:r,customSensors:s,enableDefaultSensors:a}){const i=[...a?bU:[],...s||[]],l=j.useState(()=>$q())[0],u=mt(function(w,C){vc(w)&&!vc(C)&&l.tryAbandon()},[l]);Un(function(){let w=t.getState();return t.subscribe(()=>{const N=t.getState();u(w,N),w=N})},[l,t,u]),Un(()=>l.tryAbandon,[l.tryAbandon]);const d=mt(b=>YA({lockAPI:l,registry:r,store:t,draggableId:b}),[l,r,t]),h=mt((b,w,C)=>yU({lockAPI:l,registry:r,contextId:e,store:t,draggableId:b,forceSensorStop:w||null,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null}),[e,l,r,t]),f=mt(b=>pU(e,b),[e]),m=mt(b=>{const w=r.draggable.findById(b);return w?w.options:null},[r.draggable]),g=mt(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Nv()))},[l,t]),x=mt(()=>l.isClaimed(),[l]),v=Ot(()=>({canGetLock:d,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:m,tryReleaseLock:g,isLockClaimed:x}),[d,h,f,m,g,x]);for(let b=0;b<i.length;b++)i[b](v)}const wU=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Mb.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),jU=e=>({...bc,...e.autoScrollerOptions,durationDampening:{...bc.durationDampening,...e.autoScrollerOptions}});function Gl(e){return e.current||We(),e.current}function NU(e){const{contextId:t,setCallbacks:r,sensors:s,nonce:a,dragHandleUsageInstructions:i}=e,l=j.useRef(null),u=GA(e),d=mt(()=>wU(u.current),[u]),h=mt(()=>jU(u.current),[u]),f=Rq(t),m=Oq({contextId:t,text:i}),g=Cq(t,a),x=mt(F=>{Gl(l).dispatch(F)},[]),v=Ot(()=>k2({publishWhileDragging:hG,updateDroppableScroll:gG,updateDroppableIsEnabled:xG,updateDroppableIsCombineEnabled:yG,collectionStarting:pG},x),[x]),b=Aq(),w=Ot(()=>sq(b,v),[b,v]),C=Ot(()=>wq({scrollWindow:aq,scrollDroppable:w.scrollDroppable,getAutoScrollerOptions:h,...k2({move:_A},x)}),[w.scrollDroppable,x,h]),N=Eq(t),E=Ot(()=>eq({announce:f,autoScroller:C,dimensionMarshal:w,focusMarshal:N,getResponders:d,styleMarshal:g}),[f,C,w,N,d,g]);l.current=E;const S=mt(()=>{const F=Gl(l);F.getState().phase!=="IDLE"&&F.dispatch(Nv())},[]),_=mt(()=>{const F=Gl(l).getState();return F.phase==="DROP_ANIMATING"?!0:F.phase==="IDLE"?!1:F.isDragging},[]),D=Ot(()=>({isDragging:_,tryAbort:S}),[_,S]);r(D);const T=mt(F=>OA(Gl(l).getState(),F),[]),P=mt(()=>ci(Gl(l).getState()),[]),O=Ot(()=>({marshal:w,focus:N,contextId:t,canLift:T,isMovementAllowed:P,dragHandleUsageInstructionsId:m,registry:b}),[t,w,m,N,T,P,b]);return vU({contextId:t,store:E,registry:b,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(()=>S,[S]),Q.createElement(Hf.Provider,{value:O},Q.createElement(eA,{context:Av,store:E},e.children))}function SU(){return Q.useId()}function kU(e){const t=SU(),r=e.dragHandleUsageInstructions||Md.dragHandleUsageInstructions;return Q.createElement(t9,null,s=>Q.createElement(NU,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const eS={dragging:5e3,dropAnimating:4500},CU=(e,t)=>t?rc.drop(t.duration):e?rc.snap:rc.fluid,_U=(e,t)=>{if(e)return t?yc.opacity.drop:yc.opacity.combining},EU=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function DU(e){const r=e.dimension.client,{offset:s,combineWith:a,dropping:i}=e,l=!!a,u=EU(e),d=!!i,h=d?lb.drop(s,l):lb.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:CU(u,i),transform:h,opacity:_U(l,d),zIndex:d?eS.dropAnimating:eS.dragging,pointerEvents:"none"}}function AU(e){return{transform:lb.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function TU(e){return e.type==="DRAGGING"?DU(e):AU(e)}function PU(e,t,r=Br){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=tA(a,s),l=uf(i,r),u={client:i,tagName:t.tagName.toLowerCase(),display:s.display},d={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:u,displaceBy:d,client:i,page:l}}function RU(e){const t=Tv("draggable"),{descriptor:r,registry:s,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:u}=e,d=Ot(()=>({canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:u}),[i,u,l]),h=mt(x=>{const v=a();return v||We(),PU(r,v,x)},[r,a]),f=Ot(()=>({uniqueId:t,descriptor:r,options:d,getDimension:h}),[r,h,d,t]),m=j.useRef(f),g=j.useRef(!0);Un(()=>(s.draggable.register(m.current),()=>s.draggable.unregister(m.current)),[s.draggable]),Un(()=>{if(g.current){g.current=!1;return}const x=m.current;m.current=f,s.draggable.update(f,x)},[f,s.draggable])}var Rv=Q.createContext(null);function pf(e){const t=j.useContext(e);return t||We(),t}function IU(e){e.preventDefault()}const MU=e=>{const t=j.useRef(null),r=mt((D=null)=>{t.current=D},[]),s=mt(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:i,registry:l}=pf(Hf),{type:u,droppableId:d}=pf(Rv),h=Ot(()=>({id:e.draggableId,index:e.index,type:u,droppableId:d}),[e.draggableId,e.index,u,d]),{children:f,draggableId:m,isEnabled:g,shouldRespectForcePress:x,canDragInteractiveElements:v,isClone:b,mapped:w,dropAnimationFinished:C}=e;if(!b){const D=Ot(()=>({descriptor:h,registry:l,getDraggableRef:s,canDragInteractiveElements:v,shouldRespectForcePress:x,isEnabled:g}),[h,l,s,v,x,g]);RU(D)}const N=Ot(()=>g?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:IU}:null,[a,i,m,g]),E=mt(D=>{w.type==="DRAGGING"&&w.dropping&&D.propertyName==="transform"&&Mb.flushSync(C)},[C,w]),S=Ot(()=>{const D=TU(w),T=w.type==="DRAGGING"&&w.dropping?E:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":m,style:D,onTransitionEnd:T},dragHandleProps:N}},[a,N,m,w,E,r]),_=Ot(()=>({draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}),[h.droppableId,h.id,h.index,h.type]);return Q.createElement(Q.Fragment,null,f(S,w.snapshot,_))};var KA=(e,t)=>e===t,QA=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const OU=e=>e.combine?e.combine.draggableId:null,$U=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function LU(){const e=Fr((a,i)=>({x:a,y:i})),t=Fr((a,i,l=null,u=null,d=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!d,dropAnimation:d,mode:a,draggingOver:l,combineWith:u,combineTargetFor:null})),r=Fr((a,i,l,u,d=null,h=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:h,mode:i,offset:a,dimension:l,forceShouldAnimate:f,snapshot:t(i,u,d,h,null)}}));return(a,i)=>{if(vc(a)){if(a.critical.draggable.id!==i.draggableId)return null;const l=a.current.client.offset,u=a.dimensions.draggables[i.draggableId],d=qn(a.impact),h=$U(a.impact),f=a.forceShouldAnimate;return r(e(l.x,l.y),a.movementMode,u,i.isClone,d,h,f)}if(a.phase==="DROP_ANIMATING"){const l=a.completed;if(l.result.draggableId!==i.draggableId)return null;const u=i.isClone,d=a.dimensions.draggables[i.draggableId],h=l.result,f=h.mode,m=QA(h),g=OU(h),v={duration:a.dropDuration,curve:kv.drop,moveTo:a.newHomeClientOffset,opacity:g?yc.opacity.drop:null,scale:g?yc.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:d,dropping:v,draggingOver:m,combineWith:g,mode:f,forceShouldAnimate:null,snapshot:t(f,u,m,g,v)}}}return null}}function XA(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const FU={mapped:{type:"SECONDARY",offset:Br,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:XA(null)}};function BU(){const e=Fr((l,u)=>({x:l,y:u})),t=Fr(XA),r=Fr((l,u=null,d)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:u,shouldAnimateDisplacement:d,snapshot:t(u)}})),s=l=>l?r(Br,l,!0):null,a=(l,u,d,h)=>{const f=d.displaced.visible[l],m=!!(h.inVirtualList&&h.effected[l]),g=Gf(d),x=g&&g.draggableId===l?u:null;if(!f){if(!m)return s(x);if(d.displaced.invisible[l])return null;const w=Vo(h.displacedBy.point),C=e(w.x,w.y);return r(C,x,!0)}if(m)return s(x);const v=d.displacedBy.point,b=e(v.x,v.y);return r(b,x,f.shouldAnimate)};return(l,u)=>{if(vc(l))return l.critical.draggable.id===u.draggableId?null:a(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const d=l.completed;return d.result.draggableId===u.draggableId?null:a(u.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const zU=()=>{const e=LU(),t=BU();return(s,a)=>e(s,a)||t(s,a)||FU},GU={dropAnimationFinished:DA},qU=ZD(zU,GU,null,{context:Av,areStatePropsEqual:KA})(MU);function JA(e){return pf(Rv).isUsingCloneFor===e.draggableId&&!e.isClone?null:Q.createElement(qU,e)}function tS(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return Q.createElement(JA,mr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const ZA=e=>t=>e===t,UU=ZA("scroll"),WU=ZA("auto"),rS=(e,t)=>t(e.overflowX)||t(e.overflowY),HU=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return rS(r,UU)||rS(r,WU)},VU=()=>!1,eT=e=>e==null?null:e===document.body?VU()?e:null:e===document.documentElement?null:HU(e)?e:eT(e.parentElement);var db=e=>({x:e.scrollLeft,y:e.scrollTop});const tT=e=>e?window.getComputedStyle(e).position==="fixed"?!0:tT(e.parentElement):!1;var YU=e=>{const t=eT(e),r=tT(e);return{closestScrollable:t,isFixedOnPage:r}},KU=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:s,direction:a,client:i,page:l,closest:u})=>{const d=(()=>{if(!u)return null;const{scrollSize:g,client:x}=u,v=RA({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:x.paddingBox.height,width:x.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:x,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:v,diff:{value:Br,displacement:Br}}}})(),h=a==="vertical"?yv:fA,f=Eo({page:l,withPlaceholder:null,axis:h,frame:d});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:h,isEnabled:t,client:i,page:l,frame:d,subject:f}};const QU=(e,t)=>{const r=rA(e);if(!t||e!==t)return r;const s=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,l=a+t.scrollWidth,d=hv({top:s,right:l,bottom:i,left:a},r.border);return pv({borderBox:d,margin:r.margin,border:r.border,padding:r.padding})};var XU=({ref:e,descriptor:t,env:r,windowScroll:s,direction:a,isDropDisabled:i,isCombineEnabled:l,shouldClipSubject:u})=>{const d=r.closestScrollable,h=QU(e,d),f=uf(h,s),m=(()=>{if(!d)return null;const x=rA(d),v={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:x,page:uf(x,s),scroll:db(d),scrollSize:v,shouldClipSubject:u}})();return KU({descriptor:t,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:a,client:h,page:f,closest:m})};const JU={passive:!1},ZU={passive:!0};var nS=e=>e.shouldPublishImmediately?JU:ZU;const wd=e=>e&&e.env.closestScrollable||null;function eW(e){const t=j.useRef(null),r=pf(Hf),s=Tv("droppable"),{registry:a,marshal:i}=r,l=GA(e),u=Ot(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),d=j.useRef(u),h=Ot(()=>Fr((S,_)=>{t.current||We();const D={x:S,y:_};i.updateDroppableScroll(u.id,D)}),[u.id,i]),f=mt(()=>{const S=t.current;return!S||!S.env.closestScrollable?Br:db(S.env.closestScrollable)},[]),m=mt(()=>{const S=f();h(S.x,S.y)},[f,h]),g=Ot(()=>hc(m),[m]),x=mt(()=>{const S=t.current,_=wd(S);if(S&&_||We(),S.scrollOptions.shouldPublishImmediately){m();return}g()},[g,m]),v=mt((S,_)=>{t.current&&We();const D=l.current,T=D.getDroppableRef();T||We();const P=YU(T),O={ref:T,descriptor:u,env:P,scrollOptions:_};t.current=O;const F=XU({ref:T,descriptor:u,env:P,windowScroll:S,direction:D.direction,isDropDisabled:D.isDropDisabled,isCombineEnabled:D.isCombineEnabled,shouldClipSubject:!D.ignoreContainerClipping}),$=P.closestScrollable;return $&&($.setAttribute(Q2.contextId,r.contextId),$.addEventListener("scroll",x,nS(O.scrollOptions))),F},[r.contextId,u,x,l]),b=mt(()=>{const S=t.current,_=wd(S);return S&&_||We(),db(_)},[]),w=mt(()=>{const S=t.current;S||We();const _=wd(S);t.current=null,_&&(g.cancel(),_.removeAttribute(Q2.contextId),_.removeEventListener("scroll",x,nS(S.scrollOptions)))},[x,g]),C=mt(S=>{const _=t.current;_||We();const D=wd(_);D||We(),D.scrollTop+=S.y,D.scrollLeft+=S.x},[]),N=Ot(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:b,dragStopped:w,scroll:C}),[w,v,b,C]),E=Ot(()=>({uniqueId:s,descriptor:u,callbacks:N}),[N,u,s]);Un(()=>(d.current=E.descriptor,a.droppable.register(E),()=>{t.current&&w(),a.droppable.unregister(E)}),[N,u,w,E,i,a.droppable]),Un(()=>{t.current&&i.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Un(()=>{t.current&&i.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Hp(){}const sS={width:0,height:0,margin:l9},tW=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?sS:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},rW=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const s=tW({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?rc.placeholder:null}},nW=e=>{const t=j.useRef(null),r=mt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:i,contextId:l}=e,[u,d]=j.useState(e.animate==="open");j.useEffect(()=>u?s!=="open"?(r(),d(!1),Hp):t.current?Hp:(t.current=setTimeout(()=>{t.current=null,d(!1)}),r):Hp,[s,u,r]);const h=mt(m=>{m.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),f=rW({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return Q.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})};var sW=Q.memo(nW);class aW extends Q.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const iW=e=>{const t=j.useContext(Hf);t||We();const{contextId:r,isMovementAllowed:s}=t,a=j.useRef(null),i=j.useRef(null),{children:l,droppableId:u,type:d,mode:h,direction:f,ignoreContainerClipping:m,isDropDisabled:g,isCombineEnabled:x,snapshot:v,useClone:b,updateViewportMaxScroll:w,getContainerForClone:C}=e,N=mt(()=>a.current,[]),E=mt(($=null)=>{a.current=$},[]);mt(()=>i.current,[]);const S=mt(($=null)=>{i.current=$},[]),_=mt(()=>{s()&&w({maxScroll:MA()})},[s,w]);eW({droppableId:u,type:d,mode:h,direction:f,isDropDisabled:g,isCombineEnabled:x,ignoreContainerClipping:m,getDroppableRef:N});const D=Ot(()=>Q.createElement(aW,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:$,data:z,animate:q})=>Q.createElement(sW,{placeholder:z,onClose:$,innerRef:S,animate:q,contextId:r,onTransitionEnd:_})),[r,_,e.placeholder,e.shouldAnimatePlaceholder,S]),T=Ot(()=>({innerRef:E,placeholder:D,droppableProps:{"data-rfd-droppable-id":u,"data-rfd-droppable-context-id":r}}),[r,u,D,E]),P=b?b.dragging.draggableId:null,O=Ot(()=>({droppableId:u,type:d,isUsingCloneFor:P}),[u,P,d]);function F(){if(!b)return null;const{dragging:$,render:z}=b,q=Q.createElement(JA,{draggableId:$.draggableId,index:$.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(H,re)=>z(H,re,$));return Ob.createPortal(q,C())}return Q.createElement(Rv.Provider,{value:O},l(T,v),F())};function oW(){return document.body||We(),document.body}const aS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:oW},rT=e=>{let t={...e},r;for(r in aS)e[r]===void 0&&(t={...t,[r]:aS[r]});return t},Vp=(e,t)=>e===t.droppable.type,iS=(e,t)=>t.draggables[e.draggable.id],lW=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=Fr(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=Fr((i,l,u,d,h,f)=>{const m=h.descriptor.id;if(h.descriptor.droppableId===i){const v=f?{render:f,dragging:r(h.descriptor)}:null,b={isDraggingOver:u,draggingOverWith:u?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:v}}if(!l)return t;if(!d)return e;const x={isDraggingOver:u,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}});return(i,l)=>{const u=rT(l),d=u.droppableId,h=u.type,f=!u.isDropDisabled,m=u.renderClone;if(vc(i)){const g=i.critical;if(!Vp(h,g))return t;const x=iS(g,i.dimensions),v=qn(i.impact)===d;return s(d,f,v,v,x,m)}if(i.phase==="DROP_ANIMATING"){const g=i.completed;if(!Vp(h,g.critical))return t;const x=iS(g.critical,i.dimensions);return s(d,f,QA(g.result)===d,qn(g.impact)===d,x,m)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const g=i.completed;if(!Vp(h,g.critical))return t;const x=qn(g.impact)===d,v=!!(g.impact.at&&g.impact.at.type==="COMBINE"),b=g.critical.droppable.id===d;return x?v?e:t:b?e:t}return t}},cW={updateViewportMaxScroll:vG},oS=ZD(lW,cW,(e,t,r)=>({...rT(r),...e,...t}),{context:Av,areStatePropsEqual:KA})(iW),uW=({courseId:e})=>{const[t,r]=j.useState([]),[s,a]=j.useState(null),[i,l]=j.useState([]),[u,d]=j.useState([]),[h,f]=j.useState(!0),[m,g]=j.useState(null),[x,v]=j.useState(!1),[b,w]=j.useState(!1),[C,N]=j.useState(!1),[E,S]=j.useState(""),[_,D]=j.useState(""),[T,P]=j.useState(4),[O,F]=j.useState([]),[$,z]=j.useState(!1),[q,H]=j.useState(!1),[re,ee]=j.useState(!1),[L,M]=j.useState(!1),[W,R]=j.useState(null),[U,Z]=j.useState(null),[B,Ce]=j.useState(""),[Se,G]=j.useState(""),[ae,X]=j.useState(new Set),[V,ie]=j.useState("manual"),[be,ve]=j.useState(2),[Pe,He]=j.useState(2),Je=Lt();j.useEffect(()=>{(async()=>{var Te,Be;try{const oe=localStorage.getItem("token"),[Ne,pe]=await Promise.all([Ie.get(`${ke}/api/groups/sets/${e}`),Ie.get(`${ke}/api/courses/${e}/students`)]);r(Ne.data),d(pe.data)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error loading data")}finally{f(!1)}})()},[e]),j.useEffect(()=>{(async()=>{var Te,Be;if(s)try{const oe=localStorage.getItem("token"),Ne=await Ie.get(`${ke}/api/groups/sets/${s._id}/groups`);l(Ne.data)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error loading groups")}})()},[s]),j.useEffect(()=>{s&&console.log("[DEBUG] selectedSet:",s)},[s]);const le=async ne=>{var Te,Be;ne.preventDefault();try{const oe=localStorage.getItem("token"),Ne={name:E,courseId:e,allowSelfSignup:$};V==="byGroupCount"||V==="byStudentsPerGroup"?Ne.groupStructure=V:Ne.groupStructure="manual",V==="byGroupCount"&&(Ne.groupCount=be),V==="byStudentsPerGroup"&&(Ne.studentsPerGroup=Pe);const pe=await Ie.post(`${ke}/api/groups/sets`,Ne,{headers:{Authorization:`Bearer ${oe}`}});pe.data.groupSet?(r([...t,pe.data.groupSet]),a(pe.data.groupSet),l(pe.data.groups||[])):(r([...t,pe.data]),a(pe.data),l([])),v(!1),S(""),z(!1),ie("manual"),ve(2),He(2)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error creating group set")}},fe=async ne=>{var oe,Ne,pe,K,se;if(ne.preventDefault(),!s)return;const Te=`${_.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}-${Math.floor(Math.random()*1e4)}`;let Be={name:_,groupId:Te};if(s.groupStructure!=="manual"){if(O.length===0){g("Please select at least one member.");return}Be.members=O,Be.leader=O[0]}console.log("[DEBUG] Creating group with payload:",Be);try{const _e=localStorage.getItem("token"),Ke=await Ie.post(`${ke}/api/groups/sets/${s._id}/groups`,Be,{headers:{Authorization:`Bearer ${_e}`}});l([...i,Ke.data]),w(!1),D(""),F([]),Je(`/groups/${Ke.data._id}`)}catch(_e){console.error("[DEBUG] Error creating group:",((oe=_e.response)==null?void 0:oe.data)||_e.message),g(((pe=(Ne=_e.response)==null?void 0:Ne.data)==null?void 0:pe.message)||((se=(K=_e.response)==null?void 0:K.data)==null?void 0:se.error)||"Error creating group")}},Ae=async ne=>{var Te,Be;if(ne.preventDefault(),!!s)try{const oe=localStorage.getItem("token"),Ne=await Ie.post(`${ke}/api/groups/sets/${s._id}/auto-split`,{groupSize:T,students:u.map(pe=>pe._id)},{headers:{Authorization:`Bearer ${oe}`}});l(Ne.data),N(!1)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error auto-splitting students")}},Ge=async ne=>{var Te,Be;if(ne.preventDefault(),!!W)try{const oe=localStorage.getItem("token"),Ne=await Ie.put(`${ke}/api/groups/${W._id}`,{name:_,leader:O[0],members:O},{headers:{Authorization:`Bearer ${oe}`}});l(i.map(pe=>pe._id===W._id?Ne.data:pe)),H(!1),R(null)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error updating group")}},Ye=async ne=>{var Te,Be;if(ne.preventDefault(),!!W)try{const oe=localStorage.getItem("token");await Ie.post(`${ke}/api/groups/${W._id}/message`,{subject:B,content:Se},{headers:{Authorization:`Bearer ${oe}`}}),ee(!1),Ce(""),G(""),R(null)}catch(oe){g(((Be=(Te=oe.response)==null?void 0:Te.data)==null?void 0:Be.message)||"Error sending message")}},ye=ne=>{const Te=new Set(ae);Te.has(ne)?Te.delete(ne):Te.add(ne),X(Te)},he=async ne=>{var Ne,pe,K,se;if(!ne.destination)return;const{source:Te,destination:Be,draggableId:oe}=ne;if(s&&s.groupStructure==="manual"&&Be.droppableId.startsWith("group-")){const _e=Be.droppableId.replace("group-",""),Ke=u.find(qe=>qe._id===oe);if(!Ke)return;const Ve=i.find(qe=>qe.members.some(dt=>dt._id===Ke._id));if(!i.find(qe=>qe._id===_e))return;let it=i.map(qe=>Ve&&qe._id===Ve._id?{...qe,members:qe.members.filter(dt=>dt._id!==Ke._id)}:qe);it=it.map(qe=>qe._id===_e&&!qe.members.some(dt=>dt._id===Ke._id)?{...qe,members:[...qe.members,Ke]}:qe),l(it);try{const qe=localStorage.getItem("token");if(Ve&&Ve._id!==_e){const It=((Ne=it.find(Xt=>Xt._id===Ve._id))==null?void 0:Ne.members.map(Xt=>Xt._id))||[];await Ie.put(`${ke}/api/groups/${Ve._id}`,{members:It,leader:It[0]||null},{headers:{Authorization:`Bearer ${qe}`}})}const dt=((pe=it.find(It=>It._id===_e))==null?void 0:pe.members.map(It=>It._id))||[];await Ie.put(`${ke}/api/groups/${_e}`,{members:dt,leader:dt[0]||null},{headers:{Authorization:`Bearer ${qe}`}});const yt=await Ie.get(`${ke}/api/groups/sets/${s._id}/groups`);l(yt.data)}catch(qe){g(((se=(K=qe.response)==null?void 0:K.data)==null?void 0:se.message)||"Error updating group")}}};return h?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Group Management"}),n.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(Ra,{className:"h-5 w-5 mr-2"}),"Create Group Set"]})]}),m&&n.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Group Sets"}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(ne=>n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${(s==null?void 0:s._id)===ne._id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>a(ne),children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:ne.name}),n.jsx("p",{className:"text-sm text-gray-500",children:ne.allowSelfSignup?"Self-signup enabled":"Self-signup disabled"})]})})},ne._id))})]}),s&&n.jsx(kU,{onDragEnd:he,children:n.jsxs("div",{className:"flex gap-6",children:[s.groupStructure==="manual"&&n.jsxs("div",{className:"w-64 bg-gray-50 border rounded-lg p-4 h-fit",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Students"}),n.jsx(oS,{droppableId:"students-list",children:ne=>n.jsxs("ul",{ref:ne.innerRef,...ne.droppableProps,className:"space-y-2 min-h-[40px]",children:[u.filter(Te=>!i.some(Be=>Be.members.some(oe=>oe._id===Te._id))).map((Te,Be)=>n.jsx(tS,{draggableId:Te._id,index:Be,children:oe=>n.jsxs("li",{ref:oe.innerRef,...oe.draggableProps,...oe.dragHandleProps,className:"p-2 bg-white border rounded flex items-center gap-2 shadow-sm cursor-move",children:[n.jsx(Wt,{className:"h-4 w-4 text-gray-400"}),Te.firstName," ",Te.lastName]})},Te._id)),ne.placeholder]})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Groups in ",s.name]}),s.groupStructure==="manual"&&n.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Group"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:i.map(ne=>n.jsx(oS,{droppableId:`group-${ne._id}`,children:Te=>n.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg min-h-[80px] cursor-pointer",onClick:Be=>{Be.target.closest("button")||Je(`/groups/${ne._id}`)},ref:Te.innerRef,...Te.droppableProps,children:[n.jsx("div",{className:"flex justify-between items-start mb-2",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>ye(ne._id),className:"text-gray-400 hover:text-gray-500",children:ae.has(ne._id)?n.jsx(RO,{className:"h-5 w-5"}):n.jsx(Wb,{className:"h-5 w-5"})}),n.jsx("h4",{className:"font-medium text-gray-900",children:ne.name})]})}),ae.has(ne._id)&&n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Members:"}),n.jsxs("ul",{className:"text-sm text-gray-600",children:[ne.members.map((Be,oe)=>n.jsx(tS,{draggableId:Be._id,index:oe,children:Ne=>n.jsxs("li",{ref:Ne.innerRef,...Ne.draggableProps,className:"flex items-center p-2 bg-white border rounded mb-1 gap-2 shadow-sm",children:[n.jsx("span",{...Ne.dragHandleProps,className:"cursor-grab px-1 text-gray-400 flex items-center","aria-label":"Drag handle",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"4",cy:"4",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"4",cy:"8",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"4",cy:"12",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"4",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"8",r:"1",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"12",r:"1",fill:"currentColor"})]})}),n.jsx(Wt,{className:"h-4 w-4 text-gray-400"}),Be.firstName," ",Be.lastName]})},Be._id)),Te.placeholder]})]})]},ne._id)},ne._id))})]})]})}),x&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Group Set"}),n.jsxs("form",{onSubmit:le,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),n.jsx("input",{type:"text",id:"new-set-name",name:"newSetName",value:E,onChange:ne=>S(ne.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"allow-self-signup",name:"allowSelfSignup",checked:$,onChange:ne=>z(ne.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow self-signup"})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupStructure",className:"block text-sm font-medium text-gray-700",children:"Group Structure"}),n.jsxs("select",{id:"groupStructure",name:"groupStructure",value:V,onChange:ne=>ie(ne.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[n.jsx("option",{value:"manual",children:"Create groups later"}),n.jsx("option",{value:"byGroupCount",children:"Split students by number of groups"}),n.jsx("option",{value:"byStudentsPerGroup",children:"Split number of students per group"})]})]}),V==="byGroupCount"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupCount",className:"block text-sm font-medium text-gray-700",children:"Number of Groups"}),n.jsx("input",{id:"groupCount",name:"groupCount",type:"number",min:2,value:be,onChange:ne=>ve(Number(ne.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),V==="byStudentsPerGroup"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"studentsPerGroup",className:"block text-sm font-medium text-gray-700",children:"Number of Students per Group"}),n.jsx("input",{id:"studentsPerGroup",name:"studentsPerGroup",type:"number",min:2,value:Pe,onChange:ne=>He(Number(ne.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the number of students you want in each group. Minimum is 2."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Create"})]})]})]})}),b&&s&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Group"}),n.jsxs("form",{onSubmit:fe,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupName",className:"block text-sm font-medium text-gray-700",children:"Group Name"}),n.jsx("input",{id:"groupName",name:"groupName",type:"text",value:_,onChange:ne=>D(ne.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.groupStructure!=="manual"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"groupMembers",className:"block text-sm font-medium text-gray-700",children:"Select Members"}),n.jsx("select",{id:"groupMembers",name:"groupMembers",multiple:!0,value:O,onChange:ne=>F(Array.from(ne.target.selectedOptions,Te=>Te.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:u.map(ne=>n.jsxs("option",{value:ne._id,children:[ne.firstName," ",ne.lastName]},ne._id))}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Hold Ctrl/Cmd to select multiple students"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Create"})]})]})]})}),C&&s&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Auto-split Students"}),n.jsxs("form",{onSubmit:Ae,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Group Size"}),n.jsx("input",{type:"number",id:"auto-split-group-size",name:"groupSize",min:"2",max:u.length,value:T,onChange:ne=>P(parseInt(ne.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Students will be randomly assigned to groups of this size"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Auto-split"})]})]})]})}),q&&W&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Group"}),n.jsxs("form",{onSubmit:Ge,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"editGroupName",className:"block text-sm font-medium text-gray-700",children:"Group Name"}),n.jsx("input",{id:"editGroupName",name:"editGroupName",type:"text",value:_,onChange:ne=>D(ne.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"editGroupMembers",className:"block text-sm font-medium text-gray-700",children:"Select Members"}),n.jsx("select",{id:"editGroupMembers",name:"editGroupMembers",multiple:!0,value:O,onChange:ne=>F(Array.from(ne.target.selectedOptions,Te=>Te.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:u.map(ne=>n.jsxs("option",{value:ne._id,children:[ne.firstName," ",ne.lastName]},ne._id))}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"First selected student will be the group leader"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{H(!1),R(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Save Changes"})]})]})]})}),re&&W&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Message Group: ",W.name]}),n.jsxs("form",{onSubmit:Ye,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),n.jsx("input",{type:"text",value:B,onChange:ne=>Ce(ne.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message"}),n.jsx("textarea",{value:Se,onChange:ne=>G(ne.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{ee(!1),R(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Send Message"})]})]})]})}),L&&U&&n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Group Activity"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Submissions"}),U.submissions.length>0?n.jsx("div",{className:"space-y-2",children:U.submissions.map(ne=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"font-medium",children:ne.assignment.title}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted: ",new Date(ne.submittedAt).toLocaleString()]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",n.jsx("span",{className:`font-medium ${ne.status==="graded"?"text-green-600":ne.status==="submitted"?"text-blue-600":"text-yellow-600"}`,children:ne.status})]})]},ne._id))}):n.jsx("p",{className:"text-gray-500",children:"No submissions yet"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Discussions"}),U.discussions.length>0?n.jsx("div",{className:"space-y-2",children:U.discussions.map(ne=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"font-medium",children:ne.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:ne.content}),n.jsxs("p",{className:"text-xs text-gray-500",children:["By ",ne.author.firstName," ",ne.author.lastName," on"," ",new Date(ne.createdAt).toLocaleString()]})]},ne._id))}):n.jsx("p",{className:"text-gray-500",children:"No discussions yet"})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>{M(!1),Z(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})]})},dW=({courseId:e,userId:t})=>{const[r,s]=j.useState([]),[a,i]=j.useState(!0),[l,u]=j.useState(null),d=Lt();j.useEffect(()=>{(async()=>{var m,g;try{const x=localStorage.getItem("token"),b=(await me.get(`${ke}/api/groups/sets/${e}`,{headers:{Authorization:`Bearer ${x}`}})).data,w=[];for(const C of b)try{(await me.get(`${ke}/api/groups/sets/${C._id}/groups`,{headers:{Authorization:`Bearer ${x}`}})).data.filter(_=>_.members.some(D=>D._id===t)).forEach(_=>{w.push({groupSet:C,group:_})})}catch(N){console.error(`Error fetching groups for set ${C._id}:`,N)}s(w)}catch(x){u(((g=(m=x.response)==null?void 0:m.data)==null?void 0:g.message)||"Error loading enrolled groups")}finally{i(!1)}})()},[e,t]);const h=f=>{d(`/groups/${f}`)};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Groups"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Groups you are enrolled in for this course"})]}),l&&n.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:l}),r.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[n.jsx(Wt,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No groups enrolled"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You are not enrolled in any groups for this course."})]}):n.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(({groupSet:f,group:m})=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m.name}),n.jsx("p",{className:"text-sm text-gray-500",children:f.name})]}),n.jsxs("button",{onClick:()=>h(m._id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100",children:[n.jsx(nD,{className:"h-4 w-4 mr-1"}),"View"]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Members (",m.members.length,"):"]}),n.jsx("ul",{className:"space-y-1",children:m.members.map(g=>n.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Wt,{className:"h-4 w-4 mr-2 text-gray-400"}),n.jsxs("span",{className:"flex-1",children:[g.firstName," ",g.lastName]}),m.leader._id===g._id&&n.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Leader"}),g._id===t&&n.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"You"})]},g._id))})]})})]},m._id))})]})},fW=({courseId:e,modules:t,isInstructor:r,isAdmin:s})=>{const[a,i]=j.useState([]),[l,u]=j.useState(!0),[d,h]=j.useState(null),[f,m]=j.useState(!1),[g,x]=j.useState("");j.useEffect(()=>{e&&(async()=>{u(!0),h(null);try{const C=localStorage.getItem("token"),N=await me.get(`${ke}/api/pages/course/${e}`,{headers:{Authorization:`Bearer ${C}`}});i(N.data.data||[])}catch{h("Failed to load pages")}finally{u(!1)}})()},[e,f]);const v=()=>{m(!0)},b=()=>{m(!1)};return n.jsx("div",{className:"flex justify-center items-start py-8",children:n.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg p-0",children:[n.jsxs("div",{className:"flex justify-between items-center px-8 pt-8 pb-4 border-b border-gray-100 dark:border-gray-800",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Pages"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-300 mt-1",children:"All pages for this course"})]}),(r||s)&&t.length>0&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:v,className:"px-5 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow transition-colors text-base",children:"+ Page"}),f&&n.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow-lg z-10 p-4",children:n.jsx(Aa,{children:n.jsx(cv,{modules:t,courseId:e,onSuccess:b,onCancel:()=>m(!1)})})})]})]}),l?n.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading pages..."}):d?n.jsx("div",{className:"text-center py-8 text-red-500",children:d}):a.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No pages available for this course."}):n.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:a.map(w=>n.jsxs("li",{className:"flex items-center px-8 py-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition group cursor-pointer",children:[n.jsx("span",{className:"mr-4 text-gray-400 group-hover:text-blue-500",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 8h8M8 12h8M8 16h4"})]})}),n.jsx(Mt,{to:`/courses/${e}/pages/${w._id}`,className:"font-medium text-blue-700 dark:text-blue-400 group-hover:underline text-lg truncate",children:w.title})]},w._id))})]})})},nT=({announcements:e,onSelect:t})=>{const{user:r}=Et();return e.length?n.jsx("ul",{className:"space-y-4",children:e.map(s=>n.jsxs("li",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4 hover:shadow-md transition cursor-pointer border border-gray-100 dark:border-gray-700",onClick:()=>t==null?void 0:t(s),children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight",children:s.title}),n.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300 mt-1",children:(()=>{const a=new Date(s.createdAt),i=a.toLocaleDateString();let l=a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return`${i} at ${l}`})()})]}),n.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1 prose max-w-none",children:(()=>{const i=s.body.replace(/<[^>]+>/g,"").split(/\r?\n|\r|<br\s*\/?>/i)[0];return i.length>120?i.slice(0,120)+"…":i})()})]},s._id))}):n.jsx("div",{className:"text-gray-500",children:"No announcements yet."})},sT=({onSubmit:e,loading:t,onCancel:r,initialValues:s})=>{const[a,i]=j.useState(""),[l,u]=j.useState(""),[d,h]=j.useState("all"),[f,m]=j.useState(null),[g,x]=j.useState({delayPosting:!1,allowComments:!1,requirePostBeforeSeeingReplies:!1,enablePodcastFeed:!1,allowLiking:!1}),[v,b]=j.useState(""),[w,C]=j.useState([]),[N,E]=j.useState(""),{token:S}=Et();j.useEffect(()=>{const D=window.location.pathname.match(/courses\/(\w+)/),T=D?D[1]:"";E(T),T&&fetch(`/api/groups/sets/${T}`,{headers:S?{Authorization:`Bearer ${S}`}:{}}).then(P=>P.json()).then(P=>{Array.isArray(P)&&C(P)})},[S]),j.useEffect(()=>{var D,T,P,O,F;s&&(i(s.title||""),u(s.body||""),h(s.postTo||"all"),x({delayPosting:!!((D=s.options)!=null&&D.delayPosting),allowComments:!!((T=s.options)!=null&&T.allowComments),requirePostBeforeSeeingReplies:!!((P=s.options)!=null&&P.requirePostBeforeSeeingReplies),enablePodcastFeed:!!((O=s.options)!=null&&O.enablePodcastFeed),allowLiking:!!((F=s.options)!=null&&F.allowLiking)}),b(s.delayedUntil||""))},[s]);const _=D=>{D.preventDefault();const T=new FormData;T.append("title",a),T.append("body",l),T.append("postTo",d),f&&Array.from(f).forEach(P=>T.append("attachments",P)),T.append("options",JSON.stringify(g)),g.delayPosting&&v&&T.append("delayedUntil",v),e(T)};return n.jsxs("form",{onSubmit:_,className:"space-y-4 bg-white rounded shadow p-6",children:[n.jsx("input",{type:"text",id:"announcement-title",name:"title",className:"w-full border rounded px-3 py-2",placeholder:"Topic Title",value:a,onChange:D=>i(D.target.value),required:!0}),n.jsx(vi,{content:l,onChange:u}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Post to"}),n.jsxs("select",{id:"announcement-post-to",name:"postTo",className:"border rounded px-2 py-1",value:d,onChange:D=>h(D.target.value),children:[n.jsx("option",{value:"all",children:"All Sections"}),w.map(D=>n.jsx("option",{value:D._id,children:D.name},D._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Attachments"}),n.jsx("input",{type:"file",id:"announcement-attachments",name:"attachments",multiple:!0,onChange:D=>m(D.target.files)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block font-medium",children:"Options"}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"delayPosting",checked:g.delayPosting,onChange:D=>x(T=>({...T,delayPosting:D.target.checked}))}),n.jsx("label",{htmlFor:"delayPosting",className:"ml-2",children:"Delay posting"})]}),g.delayPosting&&n.jsxs("div",{className:"ml-6 mt-2",children:[n.jsx("label",{className:"block text-xs mb-1",children:"Release date and time"}),n.jsx("input",{type:"datetime-local",id:"announcement-delayed-until",name:"delayedUntil",className:"border rounded px-2 py-1 text-sm",value:v,onChange:D=>b(D.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"allowComments",checked:g.allowComments,onChange:D=>x(T=>({...T,allowComments:D.target.checked}))}),n.jsx("label",{htmlFor:"allowComments",className:"ml-2",children:"Allow users to comment"})]}),n.jsxs("div",{className:"ml-6",children:[n.jsx("input",{type:"checkbox",id:"requirePostBeforeSeeingReplies",checked:g.requirePostBeforeSeeingReplies,onChange:D=>x(T=>({...T,requirePostBeforeSeeingReplies:D.target.checked})),disabled:!g.allowComments}),n.jsx("label",{htmlFor:"requirePostBeforeSeeingReplies",className:"ml-2",children:"Users must post before seeing replies"})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"enablePodcastFeed",checked:g.enablePodcastFeed,onChange:D=>x(T=>({...T,enablePodcastFeed:D.target.checked}))}),n.jsx("label",{htmlFor:"enablePodcastFeed",className:"ml-2",children:"Enable podcast feed"})]}),n.jsxs("div",{children:[n.jsx("input",{type:"checkbox",id:"allowLiking",checked:g.allowLiking,onChange:D=>x(T=>({...T,allowLiking:D.target.checked}))}),n.jsx("label",{htmlFor:"allowLiking",className:"ml-2",children:"Allow liking"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",onClick:r,children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:t,children:t?"Saving...":"Save"})]})]})},fb=async e=>{const t=localStorage.getItem("token");return(await me.get(`${ke}/api/courses/${e}/announcements`,{headers:{Authorization:`Bearer ${t}`}})).data.data},mW=async(e,t)=>{const r=localStorage.getItem("token");return(await me.post(`${ke}/api/courses/${e}/announcements`,t,{headers:{Authorization:`Bearer ${r}`}})).data.data},Iv=async e=>{const t=localStorage.getItem("token");return(await me.get(`${ke}/api/announcements/${e}/comments`,{headers:{Authorization:`Bearer ${t}`}})).data.data},Mv=async(e,t)=>{const r=localStorage.getItem("token");return(await me.post(`${ke}/api/announcements/${e}/comments`,{text:t},{headers:{Authorization:`Bearer ${r}`}})).data},Ov=async(e,t,r)=>{const s=localStorage.getItem("token");return(await me.post(`${ke}/api/announcements/${e}/comments/${t}/reply`,{text:r},{headers:{Authorization:`Bearer ${s}`}})).data},$v=async(e,t)=>{const r=localStorage.getItem("token");return(await me.post(`${ke}/api/announcements/${e}/comments/${t}/like`,{},{headers:{Authorization:`Bearer ${r}`}})).data},Lv=async(e,t)=>{const r=localStorage.getItem("token");return(await me.post(`${ke}/api/announcements/${e}/comments/${t}/unlike`,{},{headers:{Authorization:`Bearer ${r}`}})).data},aT=async(e,t)=>{const r=localStorage.getItem("token");return(await me.get(`${ke}/api/courses/${e}/announcements?groupset=${t}`,{headers:{Authorization:`Bearer ${r}`}})).data.data},hW=async(e,t)=>{const r=localStorage.getItem("token");return(await me.put(`${ke}/api/announcements/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data.data},pW=async e=>{const t=localStorage.getItem("token");return(await me.delete(`${ke}/api/announcements/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data},gW=({courseId:e})=>{var Se;const{user:t}=Et(),[r,s]=j.useState([]),[a,i]=j.useState(!1),[l,u]=j.useState(!1),[d,h]=j.useState(null),[f,m]=j.useState(null),[g,x]=j.useState([]),[v,b]=j.useState(!1),[w,C]=j.useState(""),[N,E]=j.useState(null),[S,_]=j.useState({}),[D,T]=j.useState(!1),[P,O]=j.useState({}),[F,$]=j.useState(!1),[z,q]=j.useState(!1),[H,re]=j.useState(!1),ee=async()=>{if(e){i(!0),h(null);try{const G=await fb(e);s(G)}catch{h("Failed to load announcements")}finally{i(!1)}}},L=async G=>{var ae;b(!0);try{const X=await Iv(G);if(x(X),t&&((ae=f==null?void 0:f.options)!=null&&ae.requirePostBeforeSeeingReplies)){const V=X.some(ie=>ie.author._id===t._id);$(V)}else $(!0)}catch{x([]),$(!1)}finally{b(!1)}};j.useEffect(()=>{ee()},[e]),j.useEffect(()=>{f&&L(f._id)},[f]);const M=async()=>{!f||!w.trim()||(T(!0),await Mv(f._id,w),C(""),$(!0),await L(f._id),T(!1))},W=async G=>{var ae;if(!(!f||!G||!((ae=S[G])!=null&&ae.trim()))){T(!0);try{await Ov(f._id,G,S[G]),_(X=>({...X,[G]:""})),E(null),await L(f._id)}catch(X){console.error("Failed to post reply:",X)}T(!1)}},R=async G=>{if(!(!f||!G)){O(ae=>({...ae,[G]:!0}));try{await $v(f._id,G),await L(f._id)}catch{}O(ae=>({...ae,[G]:!1}))}},U=async G=>{if(!(!f||!G)){O(ae=>({...ae,[G]:!0}));try{await Lv(f._id,G),await L(f._id)}catch{}O(ae=>({...ae,[G]:!1}))}},Z=async G=>{if(f){u(!0),h(null);try{await hW(f._id,G),q(!1),await ee();const ae=await fb(e);m(ae.find(X=>X._id===f._id)||null)}catch{h("Failed to update announcement")}finally{u(!1)}}},B=async()=>{if(f&&window.confirm("Are you sure you want to delete this announcement?")){u(!0),h(null);try{await pW(f._id),m(null),await ee()}catch{h("Failed to delete announcement")}finally{u(!1)}}},Ce=(G,ae=0,X="")=>{var be;let V=G;return ae===0&&t&&t.role==="student"&&((be=f==null?void 0:f.options)==null?void 0:be.requirePostBeforeSeeingReplies)&&!F&&(V=G.filter(ve=>ve.author._id===t._id)),n.jsx("ul",{className:ae===0?"space-y-6":"ml-8 space-y-4 mt-4",children:V.filter(ve=>ve._id).map(ve=>{var le,fe,Ae;const Pe=t&&ve.likes&&ve.likes.includes(t._id),He=F||!((le=f==null?void 0:f.options)!=null&&le.requirePostBeforeSeeingReplies)||(t==null?void 0:t.role)!=="student",Je=He?ve.replies:[];return n.jsxs("li",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-blue-600 font-semibold text-sm",children:[ve.author.firstName[0],ve.author.lastName[0]]})}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-semibold text-gray-900",children:[ve.author.firstName," ",ve.author.lastName]}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(ve.createdAt).toLocaleString()})]})]}),n.jsx("div",{className:"mb-4 text-gray-700 leading-relaxed",children:ve.text}),n.jsxs("div",{className:"flex gap-3 items-center",children:[t&&((fe=f==null?void 0:f.options)==null?void 0:fe.allowLiking)&&n.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors font-medium text-sm ${Pe?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:Ge=>{Ge.preventDefault(),Pe?U(ve._id):R(ve._id)},disabled:P[ve._id],children:[n.jsx(Yb,{className:`w-4 h-4 ${Pe?"fill-current":""}`}),((Ae=ve.likes)==null?void 0:Ae.length)||0]}),t&&n.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",onClick:()=>E(ve._id),children:"Reply"})]}),N===ve._id&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Write a reply...",value:S[ve._id]||"",onChange:Ge=>_(Ye=>({...Ye,[ve._id]:Ge.target.value})),disabled:D}),n.jsxs("div",{className:"flex gap-3 mt-3 justify-end",children:[n.jsx("button",{className:"px-4 py-2 text-sm bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-medium",onClick:()=>E(null),disabled:D,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",onClick:()=>W(ve._id),disabled:D,children:D?"Replying...":"Reply"})]})]}),!He&&ve.replies&&ve.replies.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-700",children:[n.jsx(a$,{className:"w-4 h-4 inline mr-2"})," ",ve.replies.length," repl",ve.replies.length===1?"y":"ies"," hidden. Post a comment first to see replies."]}),Je&&Je.length>0&&Ce(Je,ae+1,X+ve._id+"-")]},X+ve._id)})})};return n.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Announcements"}),n.jsx("p",{className:"text-gray-600",children:"Stay updated with the latest course information"})]}),!f&&t&&(t.role==="teacher"||t.role==="admin")&&n.jsxs("button",{onClick:()=>re(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 shadow-lg",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"New Announcement"]})]}),d&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-red-700 font-medium",children:d})]})}),f?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 max-w-4xl mx-auto overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:n.jsxs("button",{className:"mb-4 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium border border-gray-200 flex items-center gap-2 shadow-sm",onClick:()=>m(null),children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Announcements"]})}),n.jsxs("div",{className:"p-6",children:[t&&(t.role==="teacher"||t.role==="admin")&&!z&&n.jsxs("div",{className:"flex gap-2 mb-6 justify-end",children:[n.jsx("button",{className:"px-4 py-2 text-sm bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition-colors font-medium",onClick:()=>q(!0),children:"Edit"}),n.jsx("button",{className:"px-4 py-2 text-sm bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors font-medium",onClick:B,children:"Delete"})]}),z?n.jsx(sT,{onSubmit:Z,loading:l,onCancel:()=>q(!1),initialValues:{title:f.title,body:f.body,postTo:f.postTo,options:f.options,delayedUntil:f.delayedUntil}},(f==null?void 0:f._id)||"new"):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:f.title}),n.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:new Date(f.createdAt).toLocaleString()})]}),n.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:f.body}}),n.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["By ",n.jsxs("span",{className:"font-medium",children:[f.author.firstName," ",f.author.lastName]})]})]}),f.options&&Object.values(f.options).some(Boolean)&&t&&t.role!=="student"&&n.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[f.options.delayPosting&&n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium",children:"Delay posting"}),f.options.allowComments&&n.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:"Comments enabled"}),f.options.requirePostBeforeSeeingReplies&&n.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium",children:"Post before seeing replies"}),f.options.enablePodcastFeed&&n.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium",children:"Podcast feed"}),f.options.allowLiking&&n.jsx("span",{className:"bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-xs font-medium",children:"Liking enabled"})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsx("h4",{className:"text-xl font-bold mb-6 text-gray-900",children:"Comments"}),t&&t.role==="student"&&((Se=f==null?void 0:f.options)==null?void 0:Se.requirePostBeforeSeeingReplies)&&!F&&n.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[n.jsx(iD,{className:"w-4 h-4 inline mr-2"})," Post a comment first to see replies from other students."]}),v?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading comments..."}):n.jsxs(n.Fragment,{children:[Ce(g),t&&n.jsxs("div",{className:"mt-8",children:[n.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Write a comment...",value:w,onChange:G=>C(G.target.value),disabled:D}),n.jsx("div",{className:"flex gap-3 mt-3 justify-end",children:n.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",onClick:M,disabled:D,children:D?"Posting...":"Post Comment"})})]})]})]})]})]})]}):a?n.jsx("div",{children:"Loading announcements..."}):n.jsx(nT,{announcements:r,onSelect:m})]})},xW=[{label:"All",value:"all"},{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"},{label:"Assignments",value:"assignment"},{label:"Discussions",value:"discussion"}],iT=({moduleId:e,assignments:t,userRole:r,studentSubmissions:s,studentId:a,submissionMap:i,courseId:l})=>{const u=Lt(),[d,h]=j.useState([]),[f,m]=j.useState([]),[g,x]=j.useState(!0),[v,b]=j.useState(""),[w,C]=j.useState("all"),[N,E]=j.useState([]),[S,_]=j.useState([]),D=r==="teacher"||r==="admin",T=(M,W)=>{const R=W.target;R.tagName==="INPUT"||R.closest("a")||R.closest("button")||(M.type==="discussion"?u(l?`/courses/${l}/threads/${M._id}`:`/discussions/${M._id}/view`):u(`/assignments/${M._id}`))};if(j.useEffect(()=>{if(t){x(!1);return}if(!e)return;(async()=>{try{const W=localStorage.getItem("token"),R=await me.get(`/api/assignments/module/${e}`,W?{headers:{Authorization:`Bearer ${W}`}}:void 0);h(R.data);let U;try{U=await me.get(`/api/threads/module/${e}`,W?{headers:{Authorization:`Bearer ${W}`}}:void 0)}catch{U=await me.get(`/api/threads?module=${e}`,W?{headers:{Authorization:`Bearer ${W}`}}:void 0)}const Z=(U.data||[]).filter(B=>B.isGraded);m(Z),x(!1)}catch{b("Error fetching assignments"),x(!1)}})()},[e,t]),j.useEffect(()=>{const W=[...(t||d).map(G=>({_id:G._id,title:G.title,dueDate:G.dueDate||G.due_date||G.discussionDueDate||null,attachments:G.attachments||[],createdBy:G.createdBy,type:G.type==="discussion"||G.group==="Discussions"?"discussion":"assignment",group:G.group||"Assignments",totalPoints:G.totalPoints||G.points||0,published:G.published!==void 0?G.published:!0,replies:G.replies||[],studentGrades:G.studentGrades||[]})),...f.map(G=>({_id:G._id,title:G.title,dueDate:G.dueDate||G.due_date||G.discussionDueDate||null,attachments:[],createdBy:G.author||{firstName:"",lastName:""},type:"discussion",group:G.group||"Discussions",totalPoints:G.totalPoints||0,published:G.published!==void 0?G.published:!0,replies:G.replies||[],studentGrades:G.studentGrades||[]}))].filter(G=>w==="all"?!0:w==="published"?G.published:w==="unpublished"?!G.published:w==="assignment"?G.type==="assignment":w==="discussion"?G.type==="discussion":!0);W.sort((G,ae)=>G.dueDate&&ae.dueDate?new Date(G.dueDate).getTime()-new Date(ae.dueDate).getTime():G.dueDate?-1:ae.dueDate?1:G.title.localeCompare(ae.title));const R=new Date,U=G=>{if(G.type==="discussion"){const ae=Array.isArray(G.studentGrades)&&G.studentGrades.some(V=>V.student&&(V.student._id===a||V.student===a)),X=Array.isArray(G.replies)&&G.replies.some(V=>V.author&&(V.author._id===a||V.author===a));return ae||X}return i?!!i[`${a}_${G._id}`]:s?new Set(s.map(ae=>String(ae.assignment&&(ae.assignment._id||ae.assignment)))).has(String(G._id)):!1},Z=[],B=[],Ce=[];W.forEach(G=>{const ae=U(G),X=G.dueDate?new Date(G.dueDate):null;ae?Z.push(G):X&&X<R?Ce.push(G):B.push(G)});const Se=[];B.length>0&&Se.push({label:"Upcoming",items:B}),Ce.length>0&&Se.push({label:"Missing",items:Ce}),Z.length>0&&Se.push({label:"Submitted",items:Z}),_(Se)},[t,d,f,s,i,a,r,w]),g)return n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(v)return n.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded",children:v});const P=N.length===S.length&&S.length>0,O=()=>{E(P?[]:S.map(M=>M.label))},F=M=>{E(W=>W.includes(M)?W.filter(R=>R!==M):[...W,M])},$=async()=>{const M=localStorage.getItem("token");try{await Promise.all(N.map(async W=>{const R=re.find(U=>U._id===W);(R==null?void 0:R.type)==="discussion"?await me.patch(`${ke}/api/threads/${W}/publish`,{published:!0},M?{headers:{Authorization:`Bearer ${M}`}}:void 0):await me.patch(`${ke}/api/assignments/${W}/publish`,{published:!0},M?{headers:{Authorization:`Bearer ${M}`}}:void 0)})),alert("Selected items published!"),window.location.reload()}catch{alert("Error publishing selected items.")}},z=async()=>{const M=localStorage.getItem("token");try{await Promise.all(N.map(async W=>{const R=re.find(U=>U._id===W);(R==null?void 0:R.type)==="discussion"?await me.patch(`${ke}/api/threads/${W}/publish`,{published:!1},M?{headers:{Authorization:`Bearer ${M}`}}:void 0):await me.patch(`${ke}/api/assignments/${W}/publish`,{published:!1},M?{headers:{Authorization:`Bearer ${M}`}}:void 0)})),alert("Selected items unpublished!"),window.location.reload()}catch{alert("Error unpublishing selected items.")}},q=async()=>{const M=localStorage.getItem("token");if(window.confirm("Are you sure you want to delete the selected items? This cannot be undone."))try{await Promise.all(N.map(async W=>{try{await me.delete(`/api/assignments/${W}`,M?{headers:{Authorization:`Bearer ${M}`}}:void 0)}catch{try{await me.delete(`/api/threads/${W}`,M?{headers:{Authorization:`Bearer ${M}`}}:void 0)}catch{}}})),alert("Selected items deleted!"),window.location.reload()}catch{alert("Error deleting selected items.")}},H=M=>M.filter(W=>w==="all"?!0:w==="published"?W.published:w==="unpublished"?!W.published:w==="assignment"?W.type==="assignment":w==="discussion"?W.type==="discussion":!0),re=H((t||d).map(M=>({_id:M._id,title:M.title,dueDate:M.dueDate||M.due_date||M.discussionDueDate||null,attachments:M.attachments||[],createdBy:M.createdBy||M.author||{firstName:"",lastName:""},type:M.type==="discussion"||M.group==="Discussions"?"discussion":"assignment",group:M.group||"Assignments",totalPoints:M.totalPoints||M.points||0,published:M.published!==void 0?M.published:!0,replies:M.replies||[],studentGrades:M.studentGrades||[]}))),ee=r==="student"&&S.length>0?S.map(M=>({...M,items:H(M.items)})).filter(M=>M.items.length>0):[],L=M=>{let W=0;for(let Z=0;Z<M.length;Z++)W=M.charCodeAt(Z)+((W<<5)-W);const R=["bg-blue-100 text-blue-700","bg-purple-100 text-purple-700","bg-green-100 text-green-700","bg-orange-100 text-orange-700","bg-pink-100 text-pink-700","bg-indigo-100 text-indigo-700","bg-teal-100 text-teal-700","bg-yellow-100 text-yellow-700","bg-red-100 text-red-700","bg-gray-100 text-gray-700"],U=Math.abs(W)%R.length;return R[U]};return n.jsxs("div",{className:"space-y-4",children:[D&&n.jsx("div",{className:"flex space-x-2 border-b border-gray-200 dark:border-gray-700 mb-4",children:xW.map(M=>n.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 font-medium text-sm focus:outline-none ${w===M.value?"border-indigo-600 text-indigo-700":"border-transparent text-gray-500 hover:text-indigo-600"}`,onClick:()=>C(M.value),children:M.label},M.value))}),D&&N.length>0&&n.jsxs("div",{className:"flex space-x-2 mb-2",children:[n.jsx("button",{onClick:$,className:"px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Publish"}),n.jsx("button",{onClick:z,className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Unpublish"}),n.jsx("button",{onClick:q,className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]}),n.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg border border-gray-200 dark:border-gray-700",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[D&&n.jsx("th",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",id:"select-all-assignments",name:"selectAll",checked:P,onChange:O})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Group"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"}),D&&n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),D&&n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:r==="student"&&ee.length>0?ee.map(M=>[n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-semibold py-2 pl-2",children:M.label})},M.label),...M.items.map(W=>{const R=W.dueDate?new Date(W.dueDate):null;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:U=>T(W,U),children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-indigo-700 font-medium hover:underline",children:W.title})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L(W.group)}`,children:W.group})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R?Ut(R,"PPp"):"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:W.totalPoints})]},W._id)})]):D?re.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-6 text-gray-400",children:"No assignments found"})}):re.map(M=>{const W=M.dueDate?new Date(M.dueDate):null;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:R=>T(M,R),children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",id:`select-assignment-${M._id}`,name:`select-${M._id}`,checked:N.includes(M._id),onChange:()=>F(M._id)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:"text-indigo-700 font-medium hover:underline",children:M.title})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L(M.group)}`,children:M.group})}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:W?Ut(W,"PPp"):"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:M.totalPoints}),n.jsx("td",{className:"px-4 py-2",children:M.published?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700",children:"Published"}):n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-600",children:"Unpublished"})}),n.jsx("td",{className:"px-4 py-2 space-x-2",children:D&&M.type==="assignment"&&n.jsx(Mt,{to:`/assignments/${M._id}/edit`,className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-700 dark:text-blue-200 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800",style:{textDecoration:"none"},children:"Edit"})})]},M._id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:D?7:5,className:"text-center py-6 text-gray-400",children:"No assignments found"})})})]})})]})},yW=({isOpen:e,onClose:t,courseId:r,currentConfig:s,onConfigUpdated:a})=>{const[i,l]=j.useState({showLatestAnnouncements:!1,numberOfAnnouncements:3}),[u,d]=j.useState(!1),[h,f]=j.useState(null);j.useEffect(()=>{s&&l(s)},[s]);const m=async()=>{var g,x;d(!0),f(null);try{const v=await wI(r,i);v.success?(a(v.data),t()):f(v.message||"Failed to update configuration")}catch(v){f(((x=(g=v.response)==null?void 0:g.data)==null?void 0:x.message)||"Failed to update configuration")}finally{d(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full mx-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg",children:n.jsx(Is,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Overview Configuration"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize what students see on the overview page"})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Co,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[h&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 px-4 py-3 rounded-xl border border-red-200 dark:border-red-800",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),h]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:n.jsx(No,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Student Overview Settings"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Control what information students see on their overview page"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-lg",children:n.jsx(Er,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Show Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Display recent announcements on student overview page for quick access"})]})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.showLatestAnnouncements,onChange:g=>l(x=>({...x,showLatestAnnouncements:g.target.checked})),className:"sr-only peer"}),n.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-gradient-to-r peer-checked:from-green-500 peer-checked:to-green-600"})]})]})}),i.showLatestAnnouncements&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:n.jsx(_N,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-base font-semibold text-gray-900 dark:text-white",children:"Number of Announcements to Show"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choose how many recent announcements students will see"})]})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(g=>n.jsx("button",{onClick:()=>l(x=>({...x,numberOfAnnouncements:g})),className:`p-3 rounded-lg border-2 transition-all duration-200 font-semibold text-sm ${i.numberOfAnnouncements===g?"border-blue-500 bg-blue-500 text-white shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:border-blue-300 dark:hover:border-blue-600"}`,children:g},g))}),n.jsx("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[n.jsx(_N,{className:"w-4 h-4"}),n.jsxs("span",{children:["Students will see the ",n.jsx("strong",{children:i.numberOfAnnouncements})," most recent announcements on their overview page"]})]})})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl",children:[n.jsx("button",{onClick:t,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),n.jsxs("button",{onClick:m,disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium flex items-center gap-2 shadow-lg",children:[u?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(Vb,{className:"w-4 h-4"}),"Save Configuration"]})]})]})}):null},lS={overview:aa,modules:or,pages:Tn,assignments:Ii,discussions:Er,announcements:ia,polls:gn,groups:Wt,attendance:Ls,grades:gn,gradebook:eD,students:Fa},cS=({isOpen:e,onClose:t,courseId:r,currentConfig:s,onConfigUpdated:a})=>{const[i,l]=j.useState(s.items||[]),[u,d]=j.useState(s.studentVisibility||{}),[h,f]=j.useState(!1),[m,g]=j.useState("");j.useEffect(()=>{if(e){const S=(s.items||[]).map(P=>({id:P.id,label:P.label,visible:P.visible,order:P.order,fixed:P.fixed}));l(S);const _=s.studentVisibility||{},D=["overview","modules","pages","assignments","discussions","announcements","polls","groups","attendance","grades","gradebook","students"],T=Object.keys(_).filter(P=>D.includes(P)).reduce((P,O)=>(P[O]=_[O],P),{});d(T),g("")}},[e,s]);const x=(S,_)=>{var D;if((D=i[_])!=null&&D.fixed){S.preventDefault();return}S.dataTransfer.setData("text/plain",_.toString())},v=S=>{S.preventDefault()},b=(S,_)=>{var F;S.preventDefault();const D=parseInt(S.dataTransfer.getData("text/plain"));if(D===_||(F=i[_])!=null&&F.fixed)return;const T=[...i],P=T[D];T.splice(D,1),T.splice(_,0,P);const O=T.map(($,z)=>$.fixed?$:{...$,order:z});l(O)},w=S=>{l(_=>_.map(D=>D.id===S?{...D,visible:!D.visible}:D))},C=S=>{d(_=>({..._,[S]:!_[S]}))},N=()=>{const S=[{id:"overview",label:"Overview",visible:!0,order:0,fixed:!0},{id:"modules",label:"Modules",visible:!0,order:1},{id:"pages",label:"Pages",visible:!0,order:2},{id:"assignments",label:"Assignments",visible:!0,order:3},{id:"discussions",label:"Discussions",visible:!0,order:4},{id:"announcements",label:"Announcements",visible:!0,order:5},{id:"polls",label:"Polls",visible:!0,order:6},{id:"groups",label:"Groups",visible:!0,order:7},{id:"attendance",label:"Attendance",visible:!0,order:8},{id:"grades",label:"Grades",visible:!0,order:9},{id:"gradebook",label:"Gradebook",visible:!0,order:10},{id:"students",label:"People",visible:!0,order:11}],_={overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0};l(S),d(_)},E=async()=>{var S,_;f(!0),g("");try{const D=i.map(P=>({id:P.id,label:P.label,visible:P.visible,order:P.order,fixed:P.fixed}));console.log("Sending sidebar config:",{items:D,studentVisibility:u});const T=await Ie.put(`/courses/${r}/sidebar-config`,{items:D,studentVisibility:u});T.data.success?(a(T.data.data),t()):g(T.data.message||"Failed to save configuration")}catch(D){g(((_=(S=D.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to save configuration")}finally{f(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Customize Course Sidebar"}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Co,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[m&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:m}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sidebar Items"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag items to reorder them. Use the eye icons to control visibility for all users."}),n.jsx("div",{className:"space-y-2",children:i.map((S,_)=>{const D=lS[S.id];return n.jsxs("div",{draggable:!S.fixed,onDragStart:T=>x(T,_),onDragOver:v,onDrop:T=>b(T,_),className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${S.fixed?"cursor-default bg-gray-50 border-gray-200":"cursor-move"} ${S.visible?"bg-white border-gray-200 hover:border-gray-300":"bg-gray-50 border-gray-200"}`,children:[S.fixed?n.jsx("div",{className:"w-4 h-4 flex-shrink-0 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})}):n.jsx(e$,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),D&&n.jsx(D,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),n.jsx("span",{className:`flex-1 ${S.visible?"text-gray-900":"text-gray-500"}`,children:S.label}),n.jsx("button",{onClick:()=>w(S.id),className:`p-1 rounded transition-colors ${S.visible?"text-gray-600 hover:text-gray-800":"text-gray-400 hover:text-gray-600"}`,title:S.visible?"Hide item":"Show item",children:S.visible?n.jsx(No,{className:"w-4 h-4"}):n.jsx(lc,{className:"w-4 h-4"})})]},S.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student Visibility"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which items are visible to students. Teachers and admins can always see all items."}),n.jsx("div",{className:"space-y-2",children:i.map(S=>{const _=lS[S.id],D=u[S.id];return n.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg transition-colors ${D?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:[_&&n.jsx(_,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),n.jsx("span",{className:`flex-1 ${D?"text-gray-900":"text-gray-500"}`,children:S.label}),n.jsx("button",{onClick:()=>C(S.id),className:`p-1 rounded transition-colors ${D?"text-gray-600 hover:text-gray-800":"text-gray-400 hover:text-gray-600"}`,title:D?"Hide from students":"Show to students",children:D?n.jsx(No,{className:"w-4 h-4"}):n.jsx(lc,{className:"w-4 h-4"})})]},S.id)})})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[n.jsx(E$,{className:"w-4 h-4"}),"Reset to Default"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:E,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(Vb,{className:"w-4 h-4"}),h?"Saving...":"Save Changes"]})]})]})]})}):null},bW=({isOpen:e,onClose:t,announcement:r})=>{var $,z;const{user:s}=Et(),[a,i]=j.useState([]),[l,u]=j.useState(!1),[d,h]=j.useState(""),[f,m]=j.useState(null),[g,x]=j.useState({}),[v,b]=j.useState(!1),[w,C]=j.useState({}),[N,E]=j.useState(!1);j.useEffect(()=>{r&&e&&S(r._id)},[r,e]);const S=async q=>{var H;u(!0);try{const re=await Iv(q);if(i(re),s&&((H=r==null?void 0:r.options)!=null&&H.requirePostBeforeSeeingReplies)){const ee=re.some(L=>L.author._id===s._id);E(ee)}else E(!0)}catch{i([]),E(!1)}finally{u(!1)}},_=async()=>{if(!(!r||!d.trim())){b(!0);try{await Mv(r._id,d),h(""),E(!0),await S(r._id)}catch(q){console.error("Failed to post comment:",q)}b(!1)}},D=async q=>{var H;if(!(!r||!q||!((H=g[q])!=null&&H.trim()))){b(!0);try{await Ov(r._id,q,g[q]),x(re=>({...re,[q]:""})),m(null),await S(r._id)}catch(re){console.error("Failed to post reply:",re)}b(!1)}},T=async q=>{if(!(!r||!q)){C(H=>({...H,[q]:!0}));try{await $v(r._id,q),await S(r._id)}catch(H){console.error("Failed to like comment:",H)}C(H=>({...H,[q]:!1}))}},P=async q=>{if(!(!r||!q)){C(H=>({...H,[q]:!0}));try{await Lv(r._id,q),await S(r._id)}catch(H){console.error("Failed to unlike comment:",H)}C(H=>({...H,[q]:!1}))}},O=q=>{const H=new Date(q),re=new Date,ee=Math.floor((re.getTime()-H.getTime())/(1e3*60*60));return ee<1?"Just now":ee<24?`${ee}h ago`:ee<48?"Yesterday":H.toLocaleDateString("en-US",{month:"short",day:"numeric",year:H.getFullYear()!==re.getFullYear()?"numeric":void 0})},F=(q,H=0)=>{var L;let re=q;return H===0&&s&&s.role==="student"&&((L=r==null?void 0:r.options)==null?void 0:L.requirePostBeforeSeeingReplies)&&!N&&(re=q.filter(M=>M.author._id===s._id)),n.jsx("ul",{className:H===0?"space-y-4":"ml-8 space-y-3 mt-3",children:re.filter(M=>M._id).map(M=>{var Z,B,Ce,Se;const W=s&&M.likes&&M.likes.includes(s._id),U=N||!((Z=r==null?void 0:r.options)!=null&&Z.requirePostBeforeSeeingReplies)||(s==null?void 0:s.role)!=="student"?M.replies:[];return n.jsxs("li",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(ko,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[M.author.firstName," ",M.author.lastName]}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:O(M.createdAt)})]})]})}),n.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:M.text}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[((B=r==null?void 0:r.options)==null?void 0:B.allowLiking)&&n.jsxs("button",{onClick:()=>W?P(M._id):T(M._id),disabled:w[M._id],className:`flex items-center gap-1 transition-colors ${W?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,children:[n.jsx(Yb,{className:`w-3 h-3 ${W?"fill-current":""}`}),((Ce=M.likes)==null?void 0:Ce.length)||0]}),s&&n.jsxs("button",{onClick:()=>m(f===M._id?null:M._id),className:"flex items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[n.jsx(uc,{className:"w-3 h-3"}),"Reply"]})]}),f===M._id&&n.jsxs("div",{className:"mt-3",children:[n.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:2,placeholder:"Write a reply...",value:g[M._id]||"",onChange:G=>x(ae=>({...ae,[M._id]:G.target.value})),disabled:v}),n.jsxs("div",{className:"flex gap-2 mt-2 justify-end",children:[n.jsx("button",{onClick:()=>m(null),className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:()=>D(M._id),disabled:v||!((Se=g[M._id])!=null&&Se.trim()),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1",children:[n.jsx(rf,{className:"w-3 h-3"}),"Reply"]})]})]}),U&&U.length>0&&F(U,H+1)]},M._id)})})};return!e||!r?null:n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:n.jsx(Er,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Announcement Details"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View full announcement and comments"})]})]}),n.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Co,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.jsx($f,{className:"w-4 h-4"}),O(r.createdAt)]})]}),n.jsx("div",{className:"prose max-w-none text-gray-700 dark:text-gray-300 leading-relaxed mb-4",dangerouslySetInnerHTML:{__html:r.body}}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(ko,{className:"w-3 h-3 text-white"})}),n.jsxs("span",{className:"font-medium",children:[r.author.firstName," ",r.author.lastName]})]})]}),(($=r.options)==null?void 0:$.allowComments)&&n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("h4",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[n.jsx(Er,{className:"w-5 h-5 text-blue-600"}),"Comments"]}),s&&s.role==="student"&&((z=r.options)==null?void 0:z.requirePostBeforeSeeingReplies)&&!N&&n.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[n.jsx(iD,{className:"w-4 h-4"}),n.jsx("span",{children:"Post a comment first to see replies from other students."})]})}),l?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),"Loading comments..."]}):n.jsxs(n.Fragment,{children:[F(a),s&&n.jsxs("div",{className:"mt-6",children:[n.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Write a comment...",value:d,onChange:q=>h(q.target.value),disabled:v}),n.jsx("div",{className:"flex gap-3 mt-3 justify-end",children:n.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:_,disabled:v||!d.trim(),children:[v?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(rf,{className:"w-4 h-4"}),v?"Posting...":"Post Comment"]})})]})]})]})]})})]})})},vW=({courseId:e,numberOfAnnouncements:t})=>{const[r,s]=j.useState([]),[a,i]=j.useState(!0),[l,u]=j.useState(null),[d,h]=j.useState(null),[f,m]=j.useState(!1);j.useEffect(()=>{(async()=>{try{i(!0);const C=(await fb(e)).slice(0,t);s(C)}catch{u("Failed to load announcements")}finally{i(!1)}})()},[e,t]);const g=b=>{h(b),m(!0)},x=()=>{m(!1),h(null)};if(a)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:n.jsx(Er,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"space-y-4",children:[...Array(t)].map((b,w)=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-3 w-full"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},w))})]});if(l)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-red-600 rounded-xl",children:n.jsx(Er,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"text-center py-8",children:n.jsx("div",{className:"text-red-500 dark:text-red-400 text-sm font-medium",children:l})})]});if(r.length===0)return n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl",children:n.jsx(Er,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"text-center py-8",children:n.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No announcements yet."})})]});const v=b=>{const w=new Date(b),C=new Date,N=Math.floor((C.getTime()-w.getTime())/(1e3*60*60));return N<1?"Just now":N<24?`${N}h ago`:N<48?"Yesterday":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:w.getFullYear()!==C.getFullYear()?"numeric":void 0})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:n.jsx(Er,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Latest Announcements"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Stay updated with recent course announcements"})]})]}),n.jsx("div",{className:"space-y-4",children:r.map((b,w)=>n.jsxs("div",{className:"group relative bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl p-5 border border-gray-200 dark:border-gray-700 hover:shadow-lg hover:border-blue-200 dark:hover:border-blue-700 transition-all duration-200 cursor-pointer",onClick:()=>g(b),children:[w===0&&n.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg leading-tight group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:b.title}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full",children:[n.jsx($f,{className:"w-3 h-3"}),v(b.createdAt)]})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 leading-relaxed line-clamp-3",children:[b.body.replace(/<[^>]+>/g,"").substring(0,200),b.body.replace(/<[^>]+>/g,"").length>200&&"..."]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:n.jsx(ko,{className:"w-3 h-3 text-white"})}),n.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[b.author.firstName," ",b.author.lastName]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("span",{children:"Read more"}),n.jsx(nD,{className:"w-3 h-3"})]})]})]},b._id))})]}),n.jsx(bW,{isOpen:f,onClose:x,announcement:d})]})},fn={PRESENT:"present",ABSENT:"absent",LATE:"late",EXCUSED:"excused",UNMARKED:"unmarked"},Da={[fn.PRESENT]:{label:"Present",color:"bg-green-100 text-green-800 border-green-200",icon:Bn,shortLabel:"P"},[fn.ABSENT]:{label:"Absent",color:"bg-red-100 text-red-800 border-red-200",icon:Ms,shortLabel:"A"},[fn.LATE]:{label:"Late",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Uo,shortLabel:"L"},[fn.EXCUSED]:{label:"Excused",color:"bg-blue-100 text-blue-800 border-blue-200",icon:rD,shortLabel:"E"},[fn.UNMARKED]:{label:"Unmarked",color:"bg-gray-100 text-gray-800 border-gray-200",icon:Ls,shortLabel:"-"}},wW=e=>{const t=new Date(e),r=t.getFullYear(),s=t.getMonth(),a=new Date(r,s,1),i=new Date(r,s+1,0),l=a.getDay(),u=i.getDate(),d=[];for(let f=0;f<l;f++)d.push({date:null,isCurrentMonth:!1});for(let f=1;f<=u;f++){const m=new Date(r,s,f);d.push({date:m.toISOString().split("T")[0],isCurrentMonth:!0,dayNumber:f})}const h=42-d.length;for(let f=0;f<h;f++)d.push({date:null,isCurrentMonth:!1});return d},jW=({day:e,courseId:t,isInstructor:r,onDateSelect:s,selectedDate:a})=>{const[i,l]=j.useState([]),[u,d]=j.useState(!1);j.useEffect(()=>{e.date&&e.isCurrentMonth&&h(e.date)},[e.date]);const h=async x=>{try{d(!0);const v=localStorage.getItem("token");if(!v||!t)return;const b={Authorization:`Bearer ${v}`},w=await me.get(`${ke}/api/courses/${t}/attendance?date=${x}`,{headers:b});l(w.data)}catch{console.log("No attendance data for this date"),l([])}finally{d(!1)}},f=()=>{if(!e.date||!e.isCurrentMonth||i.length===0)return null;const x=i.length;if(x===0)return null;const v={present:i.filter(b=>b.status==="present").length,absent:i.filter(b=>b.status==="absent").length,late:i.filter(b=>b.status==="late").length,excused:i.filter(b=>b.status==="excused").length,unmarked:i.filter(b=>b.status==="unmarked").length};return{...v,total:x,percentages:{present:v.present/x*100,absent:v.absent/x*100,late:v.late/x*100,excused:v.excused/x*100,unmarked:v.unmarked/x*100}}};if(!e.isCurrentMonth)return n.jsx("div",{className:"p-3 text-center text-gray-300 bg-gray-50"});const m=f(),g=e.date===a;return n.jsxs("div",{className:`p-3 text-center cursor-pointer border rounded-lg transition-all hover:shadow-sm ${g?"bg-blue-100 border-blue-300 shadow-md":"bg-white border-gray-200"}`,onClick:()=>e.date&&s(e.date),children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:e.dayNumber}),u?n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mx-auto animate-pulse"}):m?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden",children:[m.present>0&&n.jsx("div",{className:"bg-green-500",style:{width:`${m.percentages.present}%`},title:`Present: ${m.present}/${m.total}`}),m.absent>0&&n.jsx("div",{className:"bg-red-500",style:{width:`${m.percentages.absent}%`},title:`Absent: ${m.absent}/${m.total}`}),m.late>0&&n.jsx("div",{className:"bg-yellow-500",style:{width:`${m.percentages.late}%`},title:`Late: ${m.late}/${m.total}`}),m.excused>0&&n.jsx("div",{className:"bg-blue-500",style:{width:`${m.percentages.excused}%`},title:`Excused: ${m.excused}/${m.total}`}),m.unmarked>0&&n.jsx("div",{className:"bg-gray-400",style:{width:`${m.percentages.unmarked}%`},title:`Unmarked: ${m.unmarked}/${m.total}`})]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[m.present,"/",m.total]})]}):n.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mx-auto"})]})},NW=()=>{const{id:e}=br(),{user:t}=Et(),[r,s]=j.useState(!0),[a,i]=j.useState([]),[l,u]=j.useState([]),[d,h]=j.useState(""),[f,m]=j.useState(!1),[g,x]=j.useState("daily"),[v,b]=j.useState(new Set),[w,C]=j.useState(""),[N,E]=j.useState(!1),[S,_]=j.useState(""),[D,T]=j.useState("all"),[P,O]=j.useState({autoMarkAbsent:!1,lateThreshold:15,allowExcused:!0,requireReason:!1,gradeIntegration:!1});j.useEffect(()=>{(async()=>{try{s(!0);const fe=localStorage.getItem("token");if(!fe){console.error("No authentication token found");return}const Ae={Authorization:`Bearer ${fe}`},Ye=(await me.get(`${ke}/api/courses/${e}`,{headers:Ae})).data,ye=Ye.data||Ye;R(ye);const he=(t==null?void 0:t.role)==="teacher"&&(!ye.instructor||ye.instructor._id===t._id||ye.instructor===t._id);m(he);const ne=new Date().toISOString().split("T")[0];h(ne);try{const Te=await me.get(`${ke}/api/courses/${e}/attendance?date=${ne}`,{headers:Ae});i(Te.data)}catch{console.log("No existing attendance data, creating default records");const oe=(await me.get(`${ke}/api/courses/${e}/students`,{headers:Ae})).data.map(Ne=>({studentId:Ne._id,studentName:`${Ne.firstName} ${Ne.lastName}`,email:Ne.email,status:fn.UNMARKED,date:ne,timestamp:null,reason:"",notes:""}));i(oe)}}catch(fe){console.error("Error fetching attendance data:",fe)}finally{s(!1)}})(),He()},[e,t]);const F=()=>{!w||v.size===0||(i(le=>le.map(fe=>v.has(fe.studentId)?{...fe,status:w,timestamp:w!==fn.UNMARKED?new Date().toISOString():null}:fe)),b(new Set),C(""))},$=()=>{v.size===a.length?b(new Set):b(new Set(a.map(le=>le.studentId)))},z=le=>{const fe=new Set(v);fe.has(le)?fe.delete(le):fe.add(le),b(fe)},q=async(le,fe)=>{console.log("Changing attendance for student:",le,"to status:",fe),console.log("Current isInstructor:",f);const Ae=a.map(Ge=>Ge.studentId===le?{...Ge,status:fe,timestamp:fe!==fn.UNMARKED?new Date().toISOString():null}:Ge);i(Ae);try{const Ge=localStorage.getItem("token");if(!Ge){console.error("No authentication token found");return}const Ye={Authorization:`Bearer ${Ge}`},ye={date:d,attendanceData:Ae.filter(ne=>ne.status!==fn.UNMARKED).map(ne=>({studentId:ne.studentId,status:ne.status,timestamp:ne.status!==fn.UNMARKED?ne.timestamp||new Date().toISOString():null,reason:ne.reason||"",notes:ne.notes||""}))};console.log("Sending attendance data:",ye),console.log("Course ID:",e),console.log("Headers:",Ye),console.log("Total students being saved:",ye.attendanceData.length),console.log("Individual student data:"),ye.attendanceData.forEach((ne,Te)=>{console.log(`Student ${Te+1}:`,ne)}),console.log("Current attendanceData state:",a),console.log("Updated attendanceData state:",Ae);const he=await me.post(`${ke}/api/courses/${e}/attendance`,ye,{headers:Ye});console.log("Attendance auto-saved:",he.data),setTimeout(async()=>{try{const ne=await me.get(`${ke}/api/courses/${e}/attendance?date=${d}`,{headers:Ye});console.log("Fetched back attendance data:",ne.data)}catch(ne){console.error("Error fetching back attendance data:",ne)}},1e3)}catch(Ge){console.error("Error auto-saving attendance:",Ge)}},H=async le=>{h(le),s(!0);try{const fe=localStorage.getItem("token");if(!fe){console.error("No authentication token found");return}const Ae={Authorization:`Bearer ${fe}`},Ge=await me.get(`${ke}/api/courses/${e}/attendance?date=${le}`,{headers:Ae});console.log("Fetched attendance data:",Ge.data),i(Ge.data)}catch(fe){console.error("Error fetching attendance for date:",le,fe);try{const Ge={Authorization:`Bearer ${localStorage.getItem("token")}`},ye=(await me.get(`${ke}/api/courses/${e}/students`,{headers:Ge})).data.map(he=>({studentId:he._id,studentName:`${he.firstName} ${he.lastName}`,email:he.email,status:fn.UNMARKED,date:le,timestamp:null,reason:"",notes:""}));i(ye)}catch(Ae){console.error("Error creating default attendance data:",Ae)}}finally{s(!1)}},[re,ee]=j.useState(!1),[L,M]=j.useState(new Set),[W,R]=j.useState(null),[U,Z]=j.useState({startDate:d,endDate:d}),B=async()=>{var le,fe;try{const Ae=localStorage.getItem("token");if(!Ae){alert("No authentication token found");return}const Ge={Authorization:`Bearer ${Ae}`};if((await me.patch(`${ke}/api/courses/${e}/assign-instructor`,{},{headers:Ge})).data.success){alert("Successfully assigned as instructor!");const ye=localStorage.getItem("token");if(ye){const he={Authorization:`Bearer ${ye}`},ne=await me.get(`${ke}/api/courses/${e}`,{headers:he});R(ne.data),m(!0)}}}catch(Ae){console.error("Error assigning instructor:",Ae),alert("Error assigning instructor: "+(((fe=(le=Ae.response)==null?void 0:le.data)==null?void 0:fe.message)||Ae.message))}},Ce=async()=>{try{const le=localStorage.getItem("token");if(!le){alert("No authentication token found");return}const fe={Authorization:`Bearer ${le}`},Ge=(await me.get(`${ke}/api/courses/${e}/attendance/percentages`,{headers:fe})).data,Ye=W!=null&&W.instructor?`${W.instructor.firstName} ${W.instructor.lastName} (${W.instructor.email})`:"No Instructor Assigned",ye=[`Course: ${(W==null?void 0:W.title)||"Unknown Course"}`,`Instructor: ${Ye}`,`Date: ${d}`,"",["Student Name","Email","Status","Overall Attendance %","Date","Notes"].join(","),...a.map(Be=>{var oe;return[Be.studentName,Be.email,Da[Be.status].label,`${((oe=Ge[Be.studentId])==null?void 0:oe.percentage)||0}%`,Be.date,Be.notes||""].join(",")})].join(`
`),he=new Blob([ye],{type:"text/csv"}),ne=window.URL.createObjectURL(he),Te=document.createElement("a");Te.href=ne,Te.download=`attendance_${((W==null?void 0:W.title)||"Unknown_Course").replace(/\s+/g,"_")}_${d}.csv`,Te.click(),window.URL.revokeObjectURL(ne)}catch(le){console.error("Error exporting attendance:",le),alert("Error exporting attendance data")}},Se=async()=>{try{s(!0);const le=localStorage.getItem("token");if(!le){alert("No authentication token found");return}const fe={Authorization:`Bearer ${le}`},Ae=new Date(d),Ge=Ae.getFullYear(),Ye=Ae.getMonth(),ye=new Date(Ge,Ye,1),he=new Date(Ge,Ye+1,0),ne=[];for(let _e=1;_e<=he.getDate();_e++){const Ve=new Date(Ge,Ye,_e).toISOString().split("T")[0];try{const tt=await me.get(`${ke}/api/courses/${e}/attendance?date=${Ve}`,{headers:fe});tt.data&&tt.data.length>0&&ne.push(...tt.data)}catch{console.log(`No attendance data for ${Ve}`)}}const Be=(await me.get(`${ke}/api/courses/${e}/attendance/percentages`,{headers:fe})).data,oe=W!=null&&W.instructor?`${W.instructor.firstName} ${W.instructor.lastName} (${W.instructor.email})`:"No Instructor Assigned",Ne=[`Course: ${(W==null?void 0:W.title)||"Unknown Course"}`,`Instructor: ${oe}`,`Period: ${Ge}-${String(Ye+1).padStart(2,"0")}`,"",["Date","Student Name","Email","Status","Overall Attendance %","Notes"].join(","),...ne.map(_e=>{var Ke,Ve;return[_e.date,_e.studentName,_e.email,((Ke=Da[_e.status])==null?void 0:Ke.label)||_e.status,`${((Ve=Be[_e.studentId])==null?void 0:Ve.percentage)||0}%`,_e.notes||""].join(",")})].join(`
`),pe=new Blob([Ne],{type:"text/csv"}),K=window.URL.createObjectURL(pe),se=document.createElement("a");se.href=K,se.download=`attendance_${Ge}_${String(Ye+1).padStart(2,"0")}.csv`,se.click(),window.URL.revokeObjectURL(K),console.log(`Exported ${ne.length} attendance records for ${Ge}-${String(Ye+1).padStart(2,"0")}`)}catch(le){console.error("Error exporting monthly attendance:",le),alert("Error exporting attendance data")}finally{s(!1)}},G=async()=>{try{s(!0);const le=localStorage.getItem("token");if(!le){alert("No authentication token found");return}const fe={Authorization:`Bearer ${le}`},Ge=(await me.get(`${ke}/api/courses/${e}/attendance/percentages`,{headers:fe})).data,Ye=L.size>0?Array.from(L):a.map(K=>K.studentId),ye=[],he=new Date(U.startDate),ne=new Date(U.endDate);for(let K=new Date(he);K<=ne;K.setDate(K.getDate()+1)){const se=K.toISOString().split("T")[0];try{const _e=await me.get(`${ke}/api/courses/${e}/attendance?date=${se}`,{headers:fe});if(_e.data&&_e.data.length>0){const Ke=_e.data.filter(Ve=>Ye.includes(Ve.studentId));ye.push(...Ke)}}catch{console.log(`No attendance data for ${se}`)}}const Te=W!=null&&W.instructor?`${W.instructor.firstName} ${W.instructor.lastName} (${W.instructor.email})`:"No Instructor Assigned",Be=[`Course: ${(W==null?void 0:W.title)||"Unknown Course"}`,`Instructor: ${Te}`,`Period: ${U.startDate} to ${U.endDate}`,"",["Date","Student Name","Email","Status","Overall Attendance %","Notes"].join(","),...ye.map(K=>{var se,_e;return[K.date,K.studentName,K.email,((se=Da[K.status])==null?void 0:se.label)||K.status,`${((_e=Ge[K.studentId])==null?void 0:_e.percentage)||0}%`,K.notes||""].join(",")})].join(`
`),oe=new Blob([Be],{type:"text/csv"}),Ne=window.URL.createObjectURL(oe),pe=document.createElement("a");pe.href=Ne,pe.download=`attendance_custom_${U.startDate}_to_${U.endDate}.csv`,pe.click(),window.URL.revokeObjectURL(Ne),ee(!1),console.log(`Exported ${ye.length} attendance records for custom range`)}catch(le){console.error("Error exporting custom attendance:",le),alert("Error exporting attendance data")}finally{s(!1)}},ae=a.filter(le=>{const fe=le.studentName.toLowerCase().includes(S.toLowerCase())||le.email.toLowerCase().includes(S.toLowerCase()),Ae=D==="all"||le.status===D;return fe&&Ae}),V=Object.values(fn).reduce((fe,Ae)=>(fe[Ae]=a.filter(Ge=>Ge.status===Ae).length,fe),{}),be=(()=>{const le=a.length;if(le===0)return 0;const fe=V[fn.PRESENT]||0,Ae=V[fn.LATE]||0,Ge=V[fn.EXCUSED]||0,Ye=fe+Ae+Ge;return Math.round(Ye/le*100)})(),[ve,Pe]=j.useState({}),He=async()=>{try{const le=localStorage.getItem("token");if(!le)return;const fe={Authorization:`Bearer ${le}`},Ae=await me.get(`${ke}/api/courses/${e}/attendance/percentages`,{headers:fe});Pe(Ae.data)}catch(le){console.error("Error fetching attendance percentages:",le)}},Je=le=>{var fe;return((fe=ve[le])==null?void 0:fe.percentage)||0};return r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ls,{className:"h-8 w-8 text-blue-600"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance"}),(t==null?void 0:t.role)==="teacher"&&!f&&n.jsx("button",{onClick:B,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium flex items-center gap-2",children:"Assign as Instructor"})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>x("daily"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g==="daily"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Daily View"}),n.jsx("button",{onClick:()=>x("calendar"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g==="calendar"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Calendar View"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center gap-2",children:[n.jsx(Rd,{className:"h-4 w-4"}),"Export Daily CSV"]}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[n.jsx(Rd,{className:"h-4 w-4"}),"Custom Export"]})]})]}),n.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zc,{className:"h-5 w-5 text-gray-500"}),n.jsx("label",{htmlFor:"attendance-date",className:"text-sm font-medium text-gray-700",children:"Select Date:"}),n.jsx("input",{type:"date",id:"attendance-date",value:d,onChange:le=>H(le.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm"})]})}),f&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Mi,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search students...",value:S,onChange:le=>_(le.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm"})]}),n.jsxs("select",{value:D,onChange:le=>T(le.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"all",children:"All Status"}),Object.entries(Da).map(([le,fe])=>n.jsx("option",{value:le,children:fe.label},le))]})]})]})}),f&&v.size>0&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[v.size," student(s) selected"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:w,onChange:le=>C(le.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"Select action..."}),Object.entries(Da).map(([le,fe])=>n.jsxs("option",{value:le,children:["Mark as ",fe.label]},le))]}),n.jsx("button",{onClick:F,disabled:!w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Apply"})]})]})}),g==="daily"?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[Object.entries(Da).map(([le,fe])=>{const Ae=fe.icon;return n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border text-center",children:[n.jsx("div",{className:"flex items-center justify-center mb-2",children:n.jsx(Ae,{className:`h-6 w-6 ${fe.color.split(" ")[1]}`})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:V[le]}),n.jsx("div",{className:"text-sm text-gray-500",children:fe.label})]},le)}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-green-200 text-center",children:[n.jsx("div",{className:"flex items-center justify-center mb-2",children:n.jsx("span",{className:"text-2xl",children:"📊"})}),n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[be,"%"]}),n.jsx("div",{className:"text-sm text-gray-500",children:"Attendance Rate"})]})]})}):n.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Attendance Calendar"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const le=new Date(d),fe=new Date(le.getFullYear(),le.getMonth()-1,1);h(fe.toISOString().split("T")[0])},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Gy,{className:"h-5 w-5"})}),n.jsx("span",{className:"text-lg font-medium text-gray-900",children:new Date(d).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>{const le=new Date(d),fe=new Date(le.getFullYear(),le.getMonth()+1,1);h(fe.toISOString().split("T")[0])},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(tD,{className:"h-5 w-5"})}),n.jsxs("button",{onClick:Se,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center gap-2",children:[n.jsx(Rd,{className:"h-4 w-4"}),"Export CSV"]})]})]}),n.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(le=>n.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 bg-gray-50",children:le},le)),wW(d).map((le,fe)=>n.jsx(jW,{day:le,courseId:e,isInstructor:f,onDateSelect:Ae=>h(Ae),selectedDate:d},fe))]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Attendance Legend"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),n.jsx(Bn,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Present"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),n.jsx(Ms,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Absent"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),n.jsx(Uo,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Late"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),n.jsx(rD,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Excused"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),n.jsx(Ls,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Unmarked"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),n.jsx("span",{className:"text-sm text-gray-600",children:"No Data"})]})]})]})]})}),g==="daily"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"h-5 w-5 text-gray-500"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Student Attendance"})]}),f&&n.jsx("button",{onClick:$,className:"text-sm text-blue-600 hover:text-blue-800",children:v.size===a.length?"Deselect All":"Select All"})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:ae.map(le=>(Da[le.status].icon,n.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[f&&n.jsx("input",{type:"checkbox",checked:v.has(le.studentId),onChange:()=>z(le.studentId),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-600",children:le.studentName.split(" ").map(Ae=>Ae[0]).join("")})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:le.studentName}),n.jsx("p",{className:"text-sm text-gray-500",children:le.email}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",le.status]}),n.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:[Je(le.studentId),"% overall"]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:Object.entries(Da).map(([Ae,Ge])=>{const Ye=Ge.icon;return n.jsxs("button",{onClick:()=>q(le.studentId,Ae),className:`p-2 rounded-lg border transition-colors ${le.status===Ae?Ge.color:"bg-white border-gray-200 hover:bg-gray-50"}`,title:Ge.label,children:[n.jsx(Ye,{className:"h-4 w-4"}),le.status===Ae&&n.jsx("span",{className:"text-xs ml-1",children:Ge.shortLabel})]},Ae)})})]},le.studentId)))})]}),N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Attendance Settings"}),n.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(Ms,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-sm font-medium",children:"Auto-mark absent after threshold"}),n.jsx("input",{type:"checkbox",checked:P.autoMarkAbsent,onChange:le=>O(fe=>({...fe,autoMarkAbsent:le.target.checked})),className:"rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Late threshold (minutes)"}),n.jsx("input",{type:"number",value:P.lateThreshold,onChange:le=>O(fe=>({...fe,lateThreshold:parseInt(le.target.value)})),className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-sm font-medium",children:"Allow excused absences"}),n.jsx("input",{type:"checkbox",checked:P.allowExcused,onChange:le=>O(fe=>({...fe,allowExcused:le.target.checked})),className:"rounded"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-sm font-medium",children:"Require reason for excused"}),n.jsx("input",{type:"checkbox",checked:P.requireReason,onChange:le=>O(fe=>({...fe,requireReason:le.target.checked})),className:"rounded"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-sm font-medium",children:"Integrate with grades"}),n.jsx("input",{type:"checkbox",checked:P.gradeIntegration,onChange:le=>O(fe=>({...fe,gradeIntegration:le.target.checked})),className:"rounded"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),n.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save Settings"})]})]})}),re&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Custom Export"}),n.jsx("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(Ms,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date Range"}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500",children:"Start Date"}),n.jsx("input",{type:"date",value:U.startDate,onChange:le=>Z(fe=>({...fe,startDate:le.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500",children:"End Date"}),n.jsx("input",{type:"date",value:U.endDate,onChange:le=>Z(fe=>({...fe,endDate:le.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Students"}),n.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:a.map(le=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:`student-${le.studentId}`,checked:L.has(le.studentId),onChange:fe=>{const Ae=new Set(L);fe.target.checked?Ae.add(le.studentId):Ae.delete(le.studentId),M(Ae)},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("label",{htmlFor:`student-${le.studentId}`,className:"ml-2 text-sm text-gray-700",children:[le.studentName," (",le.email,")"]})]},le.studentId))}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave all unchecked to export all students"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),n.jsx("button",{onClick:G,disabled:r,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Exporting...":"Export CSV"})]})]})})]})},uS=({courseId:e,poll:t,onClose:r,onSuccess:s})=>{var C;const[a,i]=j.useState({title:"",options:["",""],endDate:"",allowMultipleVotes:!1,resultsVisible:!1}),[l,u]=j.useState(!1),[d,h]=j.useState(null),f=!!t;j.useEffect(()=>{if(t){const N=new Date(t.endDate),E=Math.round(N.getMinutes()/10)*10;N.setMinutes(E);const S=N.getFullYear(),_=String(N.getMonth()+1).padStart(2,"0"),D=String(N.getDate()).padStart(2,"0"),T=String(N.getHours()).padStart(2,"0"),P=String(E).padStart(2,"0"),O=`${S}-${_}-${D}T${T}:${P}`;i({title:t.title,options:t.options.map(F=>F.text),endDate:O,allowMultipleVotes:t.allowMultipleVotes,resultsVisible:t.resultsVisible})}else{const N=new Date;N.setDate(N.getDate()+7);const E=Math.round(N.getMinutes()/10)*10;N.setMinutes(E);const S=N.getFullYear(),_=String(N.getMonth()+1).padStart(2,"0"),D=String(N.getDate()).padStart(2,"0"),T=String(N.getHours()).padStart(2,"0"),P=String(E).padStart(2,"0"),O=`${S}-${_}-${D}T${T}:${P}`;i(F=>({...F,endDate:O}))}},[t]);const m=(N,E)=>{if(N==="endDate"){const S=new Date(E),_=Math.round(S.getMinutes()/10)*10;S.setMinutes(_);const D=S.getFullYear(),T=String(S.getMonth()+1).padStart(2,"0"),P=String(S.getDate()).padStart(2,"0"),O=String(S.getHours()).padStart(2,"0"),F=String(_).padStart(2,"0"),$=`${D}-${T}-${P}T${O}:${F}`;i(z=>({...z,[N]:$}))}else i(S=>({...S,[N]:E}))},g=(N,E)=>{const S=[...a.options];S[N]=E,i(_=>({..._,options:S}))},x=()=>{a.options.length<10&&i(N=>({...N,options:[...N.options,""]}))},v=N=>{if(a.options.length>2){const E=a.options.filter((S,_)=>_!==N);i(S=>({...S,options:E}))}},b=()=>a.title.trim()?a.options.length<2?(h("At least 2 options are required"),!1):a.options.some(N=>!N.trim())?(h("All options must have text"),!1):a.endDate?new Date(a.endDate)<=new Date?(h("End date must be in the future"),!1):!0:(h("End date is required"),!1):(h("Title is required"),!1),w=async N=>{var E,S;if(N.preventDefault(),h(null),!!b()){u(!0);try{const _=localStorage.getItem("token"),D={title:a.title.trim(),options:a.options.map(T=>T.trim()),endDate:new Date(a.endDate).toISOString(),allowMultipleVotes:a.allowMultipleVotes,resultsVisible:a.resultsVisible};f?await me.put(`${ke}/api/polls/${t._id}`,D,{headers:{Authorization:`Bearer ${_}`}}):await me.post(`${ke}/api/polls/courses/${e}`,D,{headers:{Authorization:`Bearer ${_}`}}),s(),r()}catch(_){h(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Failed to save poll")}finally{u(!1)}}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:f?"Edit Poll":"Create New Poll"}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n.jsx(Co,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[d&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-700",children:d})}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Poll Title *"}),n.jsx("input",{type:"text",id:"title",value:a.title,onChange:N=>m("title",N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",placeholder:"e.g., What type of content would you prefer for next week?",maxLength:200})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dateInput",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Date"}),n.jsx("input",{type:"date",id:"dateInput",value:a.endDate.split("T")[0],onChange:N=>{const E=a.endDate.split("T")[1]||"00:00";m("endDate",`${N.target.value}T${E}`)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"hourInput",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hour"}),n.jsx("select",{id:"hourInput",value:(()=>{const N=a.endDate.split("T")[1]||"00:00",E=parseInt(N.split(":")[0]);return E===0?12:E>12?E-12:E})(),onChange:N=>{const E=a.endDate.split("T")[0],S=a.endDate.split("T")[1]||"00:00",_=parseInt(S.split(":")[0]),D=S.split(":")[1],T=_>=12;let P=parseInt(N.target.value);N.target.value==="12"?P=T?12:0:T&&(P+=12);const O=`${String(P).padStart(2,"0")}:${D}`;m("endDate",`${E}T${O}`)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",children:Array.from({length:12},(N,E)=>E+1).map(N=>n.jsx("option",{value:N,children:N},N))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"minuteInput",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Minute"}),n.jsx("select",{id:"minuteInput",value:((C=a.endDate.split("T")[1])==null?void 0:C.split(":")[1])||"00",onChange:N=>{const E=a.endDate.split("T")[0],D=`${(a.endDate.split("T")[1]||"00:00").split(":")[0]}:${N.target.value}`;m("endDate",`${E}T${D}`)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",children:[0,10,20,30,40,50].map(N=>n.jsx("option",{value:String(N).padStart(2,"0"),children:String(N).padStart(2,"0")},N))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"ampmInput",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"AM/PM"}),n.jsxs("select",{id:"ampmInput",value:(()=>{const N=a.endDate.split("T")[1]||"00:00";return parseInt(N.split(":")[0])>=12?"PM":"AM"})(),onChange:N=>{const E=a.endDate.split("T")[0],S=a.endDate.split("T")[1]||"00:00",_=parseInt(S.split(":")[0]),D=S.split(":")[1];let T=_;N.target.value==="PM"&&_<12?T=_===0?12:_+12:N.target.value==="AM"&&_>=12&&(T=_===12?0:_-12);const P=`${String(T).padStart(2,"0")}:${D}`;m("endDate",`${E}T${P}`)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",children:[n.jsx("option",{value:"AM",children:"AM"}),n.jsx("option",{value:"PM",children:"PM"})]})]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select a date and time when the poll should end (10-minute increments)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Poll Options * (at least 2)"}),n.jsx("div",{className:"space-y-3",children:a.options.map((N,E)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:N,onChange:S=>g(E,S.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",placeholder:`Option ${E+1}`,maxLength:200}),a.options.length>2&&n.jsx("button",{type:"button",onClick:()=>v(E),className:"p-2 text-red-500 hover:text-red-700 transition-colors",title:"Remove option",children:n.jsx(ls,{className:"w-4 h-4"})})]},E))}),a.options.length<10&&n.jsxs("button",{type:"button",onClick:x,className:"mt-3 flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[n.jsx(Ra,{className:"w-4 h-4"}),"Add Option"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Allow Multiple Votes"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Students can select multiple options"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.allowMultipleVotes,onChange:N=>m("allowMultipleVotes",N.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Results to Students"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Students can see voting results before poll ends"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.resultsVisible,onChange:N=>m("resultsVisible",N.target.checked),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",disabled:l,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):n.jsx(n.Fragment,{children:f?"Update Poll":"Create Poll"})})]})]})]})})},SW=({poll:e,onVoteSuccess:t})=>{var g;const[r,s]=j.useState(((g=e.studentVote)==null?void 0:g.selectedOptions)||[]),[a,i]=j.useState(!1),[l,u]=j.useState(null),[d,h]=j.useState(!1),f=x=>{e.hasVoted||s(v=>e.allowMultipleVotes?v.includes(x)?v.filter(b=>b!==x):[...v,x]:[x])},m=async()=>{var x,v;if(!e.hasVoted){if(r.length===0){u("Please select at least one option");return}if(!e.allowMultipleVotes&&r.length>1){u("You can only select one option for this poll");return}i(!0),u(null);try{const b=localStorage.getItem("token");await me.post(`${ke}/api/polls/${e._id}/vote`,{selectedOptions:r},{headers:{Authorization:`Bearer ${b}`}}),h(!0),setTimeout(()=>{t()},2e3)}catch(b){u(((v=(x=b.response)==null?void 0:x.data)==null?void 0:v.message)||"Failed to submit vote")}finally{i(!1)}}};return e.hasVoted?n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bn,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:"You have already voted on this poll"})]}),e.studentVote&&n.jsxs("div",{className:"mt-2 text-sm text-green-700 dark:text-green-300",children:["Your selection: ",e.studentVote.selectedOptions.map(x=>e.options[x].text).join(", ")]})]}):n.jsxs("div",{className:"space-y-4",children:[l&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-red-700 dark:text-red-300",children:l})]})}),d&&n.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bn,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Vote submitted successfully!"})]})}),n.jsx("div",{className:"space-y-3",children:e.options.map((x,v)=>{const b=r.includes(v);return n.jsx("div",{className:"relative",children:n.jsx("button",{type:"button",onClick:()=>f(v),disabled:e.hasVoted||a,className:`w-full text-left p-4 rounded-lg border transition-all duration-200 ${b?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"} ${e.hasVoted||a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${b?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-500"}`,children:b&&n.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),n.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:x.text})]})})},v)})}),n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.allowMultipleVotes?n.jsx("span",{children:"Select one or more options"}):n.jsx("span",{children:"Select one option"})}),n.jsx("button",{onClick:m,disabled:a||r.length===0||e.hasVoted,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Hl,{className:"w-4 h-4"}),"Submit Vote"]})})]})]})},kW=({courseId:e})=>{const[t,r]=j.useState([]),[s,a]=j.useState(!0),[i,l]=j.useState(null),{user:u}=Et(),[d,h]=j.useState(!1),[f,m]=j.useState(null),[g,x]=j.useState(null),[v,b]=j.useState(null),w=(u==null?void 0:u.role)==="teacher"||(u==null?void 0:u.role)==="admin";j.useEffect(()=>{C()},[e]);const C=async()=>{var P,O;try{a(!0);const F=localStorage.getItem("token"),$=await me.get(`${ke}/api/polls/courses/${e}`,{headers:{Authorization:`Bearer ${F}`}});r($.data.data)}catch(F){l(((O=(P=F.response)==null?void 0:P.data)==null?void 0:O.message)||"Failed to fetch polls")}finally{a(!1)}},N=async P=>{var O,F;if(window.confirm("Are you sure you want to delete this poll?")){x(P);try{const $=localStorage.getItem("token");await me.delete(`${ke}/api/polls/${P}`,{headers:{Authorization:`Bearer ${$}`}}),r(t.filter(z=>z._id!==P))}catch($){l(((F=(O=$.response)==null?void 0:O.data)==null?void 0:F.message)||"Failed to delete poll")}finally{x(null)}}},E=async(P,O)=>{var F,$;try{const z=localStorage.getItem("token");await me.put(`${ke}/api/polls/${P}`,{resultsVisible:!O},{headers:{Authorization:`Bearer ${z}`}}),r(t.map(q=>q._id===P?{...q,resultsVisible:!O}:q))}catch(z){l((($=(F=z.response)==null?void 0:F.data)==null?void 0:$.message)||"Failed to update poll")}},S=()=>{C(),b(null)},_=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=P=>{const O=new Date,F=new Date(P.endDate);return P.isActive?O>F?{status:"expired",text:"Expired",color:"red"}:{status:"active",text:"Active",color:"green"}:{status:"inactive",text:"Inactive",color:"gray"}},T=P=>{if(!P.options||P.options.length===0)return[];const O=Math.max(...P.options.map(F=>F.votes||0));return P.options.map((F,$)=>({...F,index:$})).filter(F=>(F.votes||0)===O&&O>0)};return s?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-700",children:i})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Content Polls"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Vote on upcoming content and topics"})]}),w&&n.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[n.jsx(Hl,{className:"w-4 h-4"}),"Create Poll"]})]}),t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Hl,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No polls yet"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:w?"Create your first poll to get student feedback on content":"No polls are currently available for voting"})]}):n.jsx("div",{className:"grid gap-6",children:t.map(P=>{const O=D(P),F=T(P),$=(P.resultsVisible||O.status==="expired"||w)&&(P.hasVoted||w);return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:P.title}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${O.color}-100 text-${O.color}-800 dark:bg-${O.color}-900 dark:text-${O.color}-200`,children:O.text}),P.hasVoted&&n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[n.jsx(Bn,{className:"w-3 h-3 mr-1"}),"Voted"]})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:P.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(zc,{className:"w-4 h-4"}),"Ends: ",_(P.endDate)]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Wt,{className:"w-4 h-4"}),P.totalVotes||0," votes"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Hl,{className:"w-4 h-4"}),P.options.length," options"]})]})]}),w&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E(P._id,P.resultsVisible),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:P.resultsVisible?"Hide results":"Show results",children:P.resultsVisible?n.jsx(lc,{className:"w-4 h-4"}):n.jsx(No,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m(P),className:"p-2 text-blue-500 hover:text-blue-700 transition-colors",title:"Edit poll",children:n.jsx(Gc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>N(P._id),disabled:g===P._id,className:"p-2 text-red-500 hover:text-red-700 transition-colors disabled:opacity-50",title:"Delete poll",children:g===P._id?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"}):n.jsx(ls,{className:"w-4 h-4"})})]})]})}),n.jsxs("div",{className:"p-6",children:[!w&&O.status==="active"&&!P.hasVoted&&n.jsx(SW,{poll:P,onVoteSuccess:S}),!w&&!P.hasVoted&&O.status==="active"&&n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Vote to see results"})]}),n.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Submit your vote to view the current poll results and see which option is winning."})]}),n.jsx("div",{className:"space-y-3",children:P.options.map((z,q)=>{var L,M;const H=P.totalVotes&&P.totalVotes>0?(z.votes||0)/P.totalVotes*100:0,re=F.some(W=>W.index===q),ee=(M=(L=P.studentVote)==null?void 0:L.selectedOptions)==null?void 0:M.includes(q);return n.jsx("div",{className:"relative",children:n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${ee?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${ee?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-500"}`,children:ee&&n.jsx("div",{className:"w-2 h-2 bg-white rounded-full m-0.5"})}),n.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:z.text}),re&&$&&n.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm font-medium",children:"🏆 Winner"})]}),$&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${H}%`}})}),n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-[3rem] text-right",children:[z.votes||0," (",H.toFixed(1),"%)"]})]})]})},q)})}),$&&F.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gn,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),n.jsxs("span",{className:"font-medium text-green-800 dark:text-green-200",children:["Winning option",F.length>1?"s":"",":"]})]}),n.jsx("div",{className:"mt-2 space-y-1",children:F.map((z,q)=>n.jsxs("div",{className:"text-green-700 dark:text-green-300",children:["• ",z.text]},q))})]})]})]},P._id)})}),d&&n.jsx(uS,{courseId:e,onClose:()=>h(!1),onSuccess:()=>{C(),h(!1)}}),f&&n.jsx(uS,{courseId:e,poll:f,onClose:()=>m(null),onSuccess:()=>{C(),m(null)}})]})},po={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},dS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"polls",label:"Polls",icon:gn},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:eD,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],fS=({student:e,isInstructor:t,isAdmin:r,handleUnenroll:s,isInstructorCard:a})=>{const[i,l]=Q.useState(!1);return n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 flex items-center gap-4",children:[e.profilePicture&&!i?n.jsx("img",{src:e.profilePicture.startsWith("http")?e.profilePicture:`http://localhost:5000${e.profilePicture}`,alt:e.firstName,className:"w-12 h-12 object-cover rounded-full border",onError:()=>l(!0)}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-xl font-bold text-gray-600 border",children:e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`.toUpperCase():""}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-lg text-gray-800",children:[e.firstName," ",e.lastName]}),n.jsx("div",{className:"text-gray-500 text-sm",children:e.email})]}),!a&&(t||r)&&s&&n.jsx("button",{className:"ml-auto p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:()=>s(e._id),title:"Remove student",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},mS=()=>{var fu;const{id:e,section:t}=br(),r=Lt(),s=Gs(),{getCourse:a,getCourses:i,loading:l,error:u,enrollStudent:d,unenrollStudent:h}=Go(),{user:f}=Et(),[m,g]=j.useState(null),[x,v]=j.useState([]),[b,w]=j.useState(""),[C,N]=j.useState([]),[E,S]=j.useState(!1),[_,D]=j.useState(null),[T,P]=j.useState(t||"overview"),O=j.useRef(a),[F,$]=j.useState(null),[z,q]=j.useState({}),[H,re]=j.useState({students:[],assignments:[],grades:{}}),ee=(f==null?void 0:f.role)==="teacher"&&((fu=m==null?void 0:m.instructor)==null?void 0:fu._id)===(f==null?void 0:f._id),L=(f==null?void 0:f.role)==="admin",[M,W]=j.useState(!1),[R,U]=j.useState([]),[Z,B]=j.useState(!1),[Ce,Se]=j.useState(""),[G,ae]=j.useState(null),[X,V]=j.useState(""),[ie,be]=j.useState(null),[ve,Pe]=j.useState(""),[He,Je]=j.useState({}),[le,fe]=j.useState(!1),[Ae,Ge]=j.useState([]),[Ye,ye]=j.useState(""),[he,ne]=j.useState(!1),[Te,Be]=j.useState([]),[oe,Ne]=j.useState(0),[pe,K]=j.useState(null),[se,_e]=j.useState(null),[Ke,Ve]=j.useState([]),[tt,it]=j.useState([]),[qe,dt]=j.useState(!1),[yt,It]=j.useState(!1),[Xt,Kt]=j.useState(null),[Jt,lr]=j.useState([]),[Zt,ms]=j.useState(!0),[Li,Ua]=j.useState([]),[la,xe]=j.useState(!1),[Qe,er]=j.useState(!1);j.useEffect(()=>{const je=s.pathname.split("/")[3]||"overview";P(je)},[s.pathname]);const Bt=j.useCallback(async()=>{if(e)try{const je=await O.current(e);g(je);const Ee=localStorage.getItem("token"),$e=await Ie.get(`${ke}/api/modules/${e}`,{headers:{Authorization:`Bearer ${Ee}`}});if($e.data.success){const lt=$e.data.data,ht=await Promise.all(lt.map(async ft=>{try{const Ue=await me.get(`${ke}/api/assignments/module/${ft._id}`,{headers:{Authorization:`Bearer ${Ee}`}});return{...ft,assignments:Ue.data}}catch{return{...ft,assignments:[]}}}));v(ht)}}catch(je){console.error("Error fetching course or modules:",je)}},[e,O]);j.useEffect(()=>{Bt()},[Bt]),j.useEffect(()=>{T==="assignments"&&Bt()},[T,Bt]),j.useEffect(()=>{if(!(m!=null&&m._id))return;(async()=>{ms(!0);try{const Ee=localStorage.getItem("token");let $e;try{$e=await me.get(`${ke}/api/threads/course/${m._id}`,Ee?{headers:{Authorization:`Bearer ${Ee}`}}:void 0)}catch{$e=await me.get(`${ke}/api/threads?course=${m._id}`,Ee?{headers:{Authorization:`Bearer ${Ee}`}}:void 0)}let lt=($e.data.data||[]).filter(ht=>ht.isGraded);if(x.length>0){const ft=(await Promise.all(x.map(async bt=>{try{return((await me.get(`${ke}/api/threads/module/${bt._id}`,Ee?{headers:{Authorization:`Bearer ${Ee}`}}:void 0)).data.data||[]).filter(Nt=>Nt.isGraded)}catch{return[]}}))).flat(),Ue=new Map;[...lt,...ft].forEach(bt=>Ue.set(bt._id,bt)),lt=Array.from(Ue.values())}lr(lt)}catch{lr([])}finally{ms(!1)}})()},[m==null?void 0:m._id,x]);const Yr=(m==null?void 0:m.sidebarConfig)||{items:dS.map((je,Ee)=>({id:je.id,label:je.label,visible:!0,order:Ee,fixed:je.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},ln=Yr.items.sort((je,Ee)=>je.order-Ee.order).filter(je=>je.visible).map(je=>({...dS.find($e=>$e.id===je.id),...je})).filter(je=>je.roles&&!je.roles.includes((f==null?void 0:f.role)||"")?!1:(f==null?void 0:f.role)==="student"?je.visible&&Yr.studentVisibility[je.id]:!0);j.useEffect(()=>{O.current=a},[a]),j.useEffect(()=>{(async()=>{if(e)try{const Ee=await O.current(e);g(Ee);const $e=localStorage.getItem("token"),lt=await Ie.get(`${ke}/api/modules/${e}`,{headers:{Authorization:`Bearer ${$e}`}});if(lt.data.success){const ht=lt.data.data,ft=await Promise.all(ht.map(async Ue=>{try{const bt=await me.get(`${ke}/api/assignments/module/${Ue._id}`,{headers:{Authorization:`Bearer ${$e}`}});return{...Ue,assignments:bt.data}}catch{return{...Ue,assignments:[]}}}));v(ft)}}catch(Ee){console.error("Error fetching course or modules:",Ee)}})()},[e]),j.useEffect(()=>{if(!(m!=null&&m._id))return;(async()=>{try{const Ee=localStorage.getItem("token"),$e=await me.get(`${ke}/api/assignments/course/${m._id}/group-assignments`,Ee?{headers:{Authorization:`Bearer ${Ee}`}}:void 0);Ua($e.data)}catch{Ua([])}})()},[m==null?void 0:m._id]);const Kr=async je=>{var Ee;if(!je.trim()){N([]);return}S(!0),D(null);try{const $e=await Ie.get(`/users/search?name=${encodeURIComponent(je)}&email=${encodeURIComponent(je)}`),lt=Array.isArray($e.data.data)?$e.data.data:[],ht=((Ee=m==null?void 0:m.students)==null?void 0:Ee.map(Ue=>Ue._id))||[],ft=lt.filter(Ue=>Ue.role==="student"&&!ht.includes(Ue._id));N(ft)}catch($e){D($e instanceof Error?$e.message:"Failed to search users"),N([])}finally{S(!1)}},qt=(je,Ee)=>{let $e;return(...lt)=>{clearTimeout($e),$e=setTimeout(()=>je(...lt),Ee)}},zr=Q.useCallback(qt(je=>Kr(je),500),[m==null?void 0:m.students]),Yn=je=>{const Ee=je.target.value;w(Ee),Ee.trim()?zr(Ee):N([])},Fi=async je=>{if(e)try{if(await d(e,je),N([]),w(""),e){const Ee=await O.current(e);g(Ee)}}catch(Ee){console.error("Error enrolling student:",Ee)}},Kn=async je=>{if(e)try{await h(e,je)}catch(Ee){console.error("Error unenrolling student:",Ee)}},Wa=async je=>{var Ee,$e;if(e)try{const lt=localStorage.getItem("token");if(await me.post(`${ke}/api/courses/${e}/enrollment/${je}/approve`,{},{headers:{Authorization:`Bearer ${lt}`}}),e){const ht=await O.current(e);g(ht)}alert("Enrollment approved successfully!")}catch(lt){console.error("Error approving enrollment:",lt),alert("Failed to approve enrollment: "+((($e=(Ee=lt.response)==null?void 0:Ee.data)==null?void 0:$e.message)||lt.message))}},Ha=async je=>{var Ee,$e;if(e)try{const lt=localStorage.getItem("token");if(await me.post(`${ke}/api/courses/${e}/enrollment/${je}/deny`,{},{headers:{Authorization:`Bearer ${lt}`}}),e){const ht=await O.current(e);g(ht)}alert("Enrollment denied successfully!")}catch(lt){console.error("Error denying enrollment:",lt),alert("Failed to deny enrollment: "+((($e=(Ee=lt.response)==null?void 0:Ee.data)==null?void 0:$e.message)||lt.message))}};j.useEffect(()=>{(async()=>{if(!(T!=="gradebook"||!ee&&!L))try{const Ee=localStorage.getItem("token"),$e=(m==null?void 0:m.students)||[],lt=x.flatMap(et=>(et.assignments||[]).map(st=>({...st,moduleTitle:et.title}))),ft=(await me.get(`${ke}/api/assignments/course/${m==null?void 0:m._id}/group-assignments`,{headers:{Authorization:`Bearer ${Ee}`}})).data.map(et=>({...et,moduleTitle:"Group Assignments"})),bt=(await me.get(`${ke}/api/threads/course/${m==null?void 0:m._id}`,{headers:{Authorization:`Bearer ${Ee}`}})).data.data.filter(et=>et.isGraded).map(et=>({_id:et._id,title:et.title,totalPoints:et.totalPoints,group:et.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:et.studentGrades||[],dueDate:et.dueDate,replies:et.replies||[]}));let rt={};const Nt=[...lt,...ft],pt=await me.get(`${ke}/api/submissions/student/course/${m==null?void 0:m._id}`,{headers:{Authorization:`Bearer ${Ee}`}});for(const et of pt.data){const st=Nt.find(St=>St._id===et.assignment);if(st)if(st.isGroupAssignment&&et.group&&et.group.members){if(et.group.members.some(Tt=>(Tt._id||Tt)===f._id))if(rt[f._id]||(rt[f._id]={}),et.useIndividualGrades&&et.memberGrades){const Tt=et.memberGrades.find(Qt=>{var vt;return Qt.student&&(Qt.student.toString()===f._id.toString()||((vt=Qt.student._id)==null?void 0:vt.toString())===f._id.toString())});Tt&&typeof Tt.grade=="number"?rt[f._id][st._id]=Tt.grade:typeof et.grade=="number"?rt[f._id][st._id]=et.grade:rt[f._id][st._id]="-"}else typeof et.grade=="number"?rt[f._id][st._id]=et.grade:rt[f._id][st._id]="-"}else rt[f._id]||(rt[f._id]={}),rt[f._id][st._id]=et.grade??"-"}for(const et of bt)for(const st of $e){rt[st._id]||(rt[st._id]={});const St=et.studentGrades.find(Tt=>Tt.student&&(Tt.student._id===st._id||Tt.student===st._id));rt[st._id][et._id]=typeof(St==null?void 0:St.grade)=="number"?St.grade:"-"}re({students:$e,assignments:[...lt,...ft,...bt],grades:rt})}catch{re({students:[],assignments:[],grades:{}})}})()},[T,ee,L,m,x,oe]),j.useEffect(()=>{(async()=>{var ht,ft;if(!((ht=H.assignments)!=null&&ht.length)||!((ft=H.students)!=null&&ft.length)||!ee&&!L)return;const Ee={},$e={[String(f._id)]:{}},lt=localStorage.getItem("token");try{for(const bt of H.assignments)if(!(!bt._id||bt.isDiscussion))try{(await me.get(`${ke}/api/submissions/assignment/${bt._id}`,{headers:{Authorization:`Bearer ${lt}`}})).data.forEach(Nt=>{if(bt.isGroupAssignment&&Nt.group&&Nt.group.members)Nt.group.members.forEach(pt=>{const et=pt._id||pt,st=`${String(f._id)}_${String(bt._id)}`;if(Ee[st]=Nt._id,Nt.useIndividualGrades&&Nt.memberGrades){const St=Nt.memberGrades.find(Tt=>{var Qt;return Tt.student&&(Tt.student.toString()===String(et)||((Qt=Tt.student._id)==null?void 0:Qt.toString())===String(et))});St&&typeof St.grade=="number"?($e[String(et)]||($e[String(et)]={}),$e[String(et)][String(bt._id)]=St.grade):typeof Nt.grade=="number"&&($e[String(et)]||($e[String(et)]={}),$e[String(et)][String(bt._id)]=Nt.grade)}else typeof Nt.grade=="number"&&($e[String(et)]||($e[String(et)]={}),$e[String(et)][String(bt._id)]=Nt.grade)});else{const pt=`${String(Nt.student._id)}_${String(bt._id)}`;Ee[pt]=Nt._id,typeof Nt.grade=="number"&&($e[String(Nt.student._id)]||($e[String(Nt.student._id)]={}),$e[String(Nt.student._id)][String(bt._id)]=Nt.grade)}})}catch(rt){if(rt.response&&rt.response.status===404)continue}if(m!=null&&m._id){const rt=((await me.get(`${ke}/api/threads/course/${m._id}`,{headers:{Authorization:`Bearer ${lt}`}})).data.data||[]).filter(Nt=>Nt.isGraded);for(const Nt of rt)for(const pt of H.students){$e[String(pt._id)]||($e[String(pt._id)]={});const et=Nt.studentGrades.find(st=>st.student&&(st.student._id===pt._id||st.student===pt._id));$e[String(pt._id)][String(Nt._id)]=typeof(et==null?void 0:et.grade)=="number"?et.grade:"-"}}Je(Ee);const Ue={...$e};for(const bt of Ke)typeof bt.grade=="number"&&(Ue[String(f._id)]||(Ue[String(f._id)]={}),Ue[String(f._id)][String(bt._id)]=bt.grade);re(bt=>({...bt,grades:Ue}))}catch{}})()},[H.assignments,H.students,ee,L,m==null?void 0:m._id]),j.useEffect(()=>{const je=f==null?void 0:f._id;if(!(m!=null&&m._id)||!je||(f==null?void 0:f.role)!=="student")return;(async()=>{try{const $e=localStorage.getItem("token"),lt=await me.get(`${ke}/api/submissions/student/course/${m._id}`,{headers:{Authorization:`Bearer ${$e}`}}),ht={},ft={[String(je)]:{}};Be(lt.data),lt.data.forEach(Ue=>{var bt;if(Ue.assignment&&Ue._id)if(Ue.assignment.isGroupAssignment&&Ue.group&&Ue.group.members){if(Ue.group.members.some(rt=>{var Nt;return rt.toString()===String(je)||((Nt=rt._id)==null?void 0:Nt.toString())===String(je)}))if(ht[`${String(je)}_${String(Ue.assignment._id)}`]=Ue._id,Ue.useIndividualGrades&&Ue.memberGrades){const rt=Ue.memberGrades.find(Nt=>{var pt;return Nt.student&&(Nt.student.toString()===String(je)||((pt=Nt.student._id)==null?void 0:pt.toString())===String(je))});rt&&typeof rt.grade=="number"?ft[String(je)][String(Ue.assignment._id)]=rt.grade:typeof Ue.grade=="number"&&(ft[String(je)][String(Ue.assignment._id)]=Ue.grade)}else typeof Ue.grade=="number"&&(ft[String(je)][String(Ue.assignment._id)]=Ue.grade)}else Ue.student&&(Ue.student.toString()===String(je)||((bt=Ue.student._id)==null?void 0:bt.toString())===String(je))&&(ht[`${String(je)}_${String(Ue.assignment._id)}`]=Ue._id,typeof Ue.grade=="number"&&(ft[String(je)][String(Ue.assignment._id)]=Ue.grade))}),Je(ht),re(Ue=>({...Ue,grades:ft}))}catch{Je({}),re(lt=>({...lt,grades:{}})),Be([])}})()},[m==null?void 0:m._id,f,x]),j.useEffect(()=>{T!=="grades"||ee||L||!f||!Ke.length||re(je=>{const Ee={...je.grades};Ee[String(f._id)]||(Ee[String(f._id)]={});for(const $e of Ke)typeof $e.grade=="number"&&(Ee[String(f._id)][String($e._id)]=$e.grade);return{...je,grades:Ee}})},[T,ee,L,f,Ke]),j.useEffect(()=>{if(T!=="grades"||ee||L||!(m!=null&&m._id))return;(async()=>{try{const Ee=localStorage.getItem("token"),$e=await me.get(`${ke}/api/grades/student/course/${m._id}`,{headers:{Authorization:`Bearer ${Ee}`}});K($e.data.totalPercent),_e($e.data.letterGrade)}catch{K(null),_e(null)}})()},[T,ee,L,m==null?void 0:m._id]),j.useEffect(()=>{if(T!=="grades"||ee||L||!(m!=null&&m._id)||!f)return;(async()=>{try{const Ee=localStorage.getItem("token"),lt=((await me.get(`${ke}/api/threads/course/${m._id}`,{headers:{Authorization:`Bearer ${Ee}`}})).data.data||[]).filter(ht=>ht.isGraded).map(ht=>{const ft=f==null?void 0:f._id;let Ue=null,bt=!1;return Array.isArray(ht.replies)&&(bt=ht.replies.some(rt=>rt.author&&(rt.author._id===ft||rt.author===ft))),Array.isArray(ht.studentGrades)&&(Ue=ht.studentGrades.find(rt=>rt.student&&(rt.student._id===ft||rt.student===ft))),{...ht,isDiscussion:!0,grade:typeof(Ue==null?void 0:Ue.grade)=="number"?Ue.grade:null,feedback:typeof(Ue==null?void 0:Ue.feedback)=="string"?Ue.feedback:"",hasSubmitted:bt,replies:ht.replies||[]}});Ve(lt)}catch{Ve([])}})()},[T,ee,L,m==null?void 0:m._id,f]),j.useEffect(()=>{if(T!=="grades"||ee||L||!(m!=null&&m._id)||!f)return;(async()=>{try{const Ee=localStorage.getItem("token"),$e=await me.get(`${ke}/api/assignments/course/${m._id}/group-assignments`,{headers:{Authorization:`Bearer ${Ee}`}});it($e.data)}catch{it([])}})()},[T,ee,L,m==null?void 0:m._id,f]),j.useEffect(()=>{(async()=>{if(!(T!=="gradebook"||!ee))try{const Ee=localStorage.getItem("token"),$e=(m==null?void 0:m.students)||[],lt=x.flatMap(pt=>(pt.assignments||[]).map(et=>({...et,moduleTitle:pt.title}))),ft=(await me.get(`${ke}/api/assignments/course/${m==null?void 0:m._id}/group-assignments`,{headers:{Authorization:`Bearer ${Ee}`}})).data.map(pt=>({...pt,moduleTitle:"Group Assignments"})),bt=(await me.get(`${ke}/api/threads/course/${m==null?void 0:m._id}`,{headers:{Authorization:`Bearer ${Ee}`}})).data.data.filter(pt=>pt.isGraded).map(pt=>({_id:pt._id,title:pt.title,totalPoints:pt.totalPoints,group:pt.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:pt.studentGrades||[],dueDate:pt.dueDate,replies:pt.replies||[]}));let rt={};const Nt=[...lt,...ft];for(const pt of Nt){const et=await me.get(`${ke}/api/submissions/assignment/${pt._id}`,{headers:{Authorization:`Bearer ${Ee}`}});for(const st of et.data)if(pt.isGroupAssignment&&st.group&&st.group.members)st.group.members.forEach(St=>{const Tt=St._id||St;if(rt[String(Tt)]||(rt[String(Tt)]={}),st.useIndividualGrades&&st.memberGrades){const Qt=st.memberGrades.find(vt=>{var ca;return vt.student&&(vt.student.toString()===String(Tt)||((ca=vt.student._id)==null?void 0:ca.toString())===String(Tt))});Qt&&typeof Qt.grade=="number"?rt[String(Tt)][String(pt._id)]=Qt.grade:typeof st.grade=="number"?rt[String(Tt)][String(pt._id)]=st.grade:rt[String(Tt)][String(pt._id)]="-"}else typeof st.grade=="number"?rt[String(Tt)][String(pt._id)]=st.grade:rt[String(Tt)][String(pt._id)]="-"});else if(st.student){const St=st.student._id||st.student;rt[String(St)]||(rt[String(St)]={}),rt[String(St)][String(pt._id)]=st.grade??"-"}}for(const pt of bt)for(const et of $e){rt[String(et._id)]||(rt[String(et._id)]={});const st=pt.studentGrades.find(St=>St.student&&(St.student._id===et._id||St.student===et._id));rt[String(et._id)][String(pt._id)]=typeof(st==null?void 0:st.grade)=="number"?st.grade:"-"}re({students:$e,assignments:[...lt,...ft,...bt],grades:rt})}catch{re({students:[],assignments:[],grades:{}})}})()},[T,ee,m,x]);const Nm=()=>{U(m!=null&&m.gradeScale?[...m.gradeScale]:[]),W(!0),Se("")},Bi=(je,Ee,$e)=>{U(lt=>lt.map((ht,ft)=>ft===je?{...ht,[Ee]:$e}:ht))},iu=je=>{U(Ee=>Ee.filter(($e,lt)=>lt!==je))},ou=async()=>{var je,Ee;B(!0),Se("");try{for(const ft of R)if(!ft.letter||ft.min===""||ft.max===""||isNaN(ft.min)||isNaN(ft.max)){Se("All fields are required and must be valid numbers."),B(!1);return}const $e=localStorage.getItem("token"),lt=(po==null?void 0:po.VITE_API_URL)||"http://localhost:5000",ht=await me.put(`${lt}/api/courses/${m._id}`,{title:m.title,description:m.description,gradeScale:R},{headers:{Authorization:`Bearer ${$e}`}});ht.data.success?(g(ht.data.data),W(!1)):Se("Failed to save grade scale.")}catch($e){Se(((Ee=(je=$e.response)==null?void 0:je.data)==null?void 0:Ee.message)||"Error saving grade scale")}finally{B(!1)}},lu=async(je,Ee,$e)=>{var rt,Nt,pt,et,st;if(!e)return;const lt=`${je}_${Ee}`,ht=He[lt];if(!ht){Pe("No submission found for this student"),be(null),ae(null);return}if($e.trim()===""){be({studentId:je,assignmentId:Ee}),Pe("");try{const St=localStorage.getItem("token");(await me.post(`${ke}/api/submissions/${ht}/grade`,{grade:null},{headers:{Authorization:`Bearer ${St}`}})).data&&(re(Qt=>{const vt={...Qt.grades};return vt[String(je)]&&(delete vt[String(je)][String(Ee)],Object.keys(vt[String(je)]).length===0&&delete vt[String(je)]),{...Qt,grades:vt}}),ae(null))}catch(St){Pe(((Nt=(rt=St.response)==null?void 0:rt.data)==null?void 0:Nt.message)||"Failed to remove grade")}finally{be(null)}return}const ft=parseFloat($e);if(isNaN(ft)||ft<0){Pe("Grade must be a valid number"),be(null),ae(null);return}const Ue=H.assignments.find(St=>St._id===Ee),bt=((pt=Ue==null?void 0:Ue.questions)==null?void 0:pt.reduce((St,Tt)=>St+(Tt.points||0),0))||(Ue==null?void 0:Ue.totalPoints)||0;if(ft>bt){Pe(`Grade cannot exceed ${bt} points`),be(null),ae(null);return}be({studentId:je,assignmentId:Ee}),Pe("");try{const St=localStorage.getItem("token");(await me.post(`${ke}/api/submissions/${ht}/grade`,{grade:ft},{headers:{Authorization:`Bearer ${St}`}})).data&&(re(Qt=>{const vt={...Qt.grades,[String(je)]:{...Qt.grades[String(je)],[String(Ee)]:ft}};return{...Qt,grades:vt}}),ae(null))}catch(St){Pe(((st=(et=St.response)==null?void 0:et.data)==null?void 0:st.message)||"Failed to update grade")}finally{be(null)}},Sm=(je,Ee,$e)=>{!ee&&!L||(ae({studentId:je,assignmentId:Ee}),V($e==="-"?"":$e.toString()),Pe(""))},km=()=>{try{const{students:je,assignments:Ee,grades:$e}=H,lt=m!=null&&m.instructor?`${m.instructor.firstName} ${m.instructor.lastName} (${m.instructor.email})`:"No Instructor Assigned",ht=[`Course: ${(m==null?void 0:m.title)||"Unknown Course"}`,`Instructor: ${lt}`,`Export Date: ${new Date().toLocaleDateString()}`,"",["Student Name","Email",...Ee.map(rt=>rt.title),"Overall Grade","Letter Grade"].join(","),...je.map(rt=>{const Nt=af(rt._id,m,Ee,$e),pt=tb(Nt,m==null?void 0:m.gradeScale),et=Ee.map(st=>{var Tt;const St=(Tt=$e[rt._id])==null?void 0:Tt[st._id];return St&&typeof St=="number"?St.toString():"-"});return[`${rt.firstName} ${rt.lastName}`,rt.email,...et,Nt.toFixed(2),pt].join(",")})].join(`
`),ft=new Blob([ht],{type:"text/csv"}),Ue=window.URL.createObjectURL(ft),bt=document.createElement("a");bt.href=Ue,bt.download=`gradebook_${((m==null?void 0:m.title)||"Unknown_Course").replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,bt.click(),window.URL.revokeObjectURL(Ue)}catch(je){console.error("Error exporting gradebook:",je),alert("Failed to export gradebook CSV")}},hr=()=>{Ge(m!=null&&m.groups?[...m.groups]:[]),fe(!0),ye("")},cu=(je,Ee,$e)=>{Ge(lt=>lt.map((ht,ft)=>ft===je?{...ht,[Ee]:$e}:ht))},rl=()=>{Ge(je=>[...je,{name:"",weight:0}])},uu=je=>{Ge(Ee=>Ee.filter(($e,lt)=>lt!==je))},zi=async()=>{var je,Ee;ne(!0),ye("");try{let $e=0;for(const Ue of Ae){if(!Ue.name||Ue.weight===""||isNaN(Ue.weight)){ye("All fields are required and must be valid numbers."),ne(!1);return}$e+=Number(Ue.weight)}if($e!==100){ye("Total weight must be 100%."),ne(!1);return}const lt=localStorage.getItem("token"),ht=(po==null?void 0:po.VITE_API_URL)||"http://localhost:5000",ft=await me.put(`${ht}/api/courses/${m._id}`,{...m,groups:Ae},{headers:{Authorization:`Bearer ${lt}`}});ft.data.success?(g(ft.data.data),fe(!1)):ye("Failed to save assignment groups.")}catch($e){ye(((Ee=(je=$e.response)==null?void 0:je.data)==null?void 0:Ee.message)||"Error saving assignment groups")}finally{ne(!1)}};j.useEffect(()=>{const je=()=>{Ne(Ee=>Ee+1)};return window.addEventListener("discussionGradeUpdated",je),()=>{window.removeEventListener("discussionGradeUpdated",je)}},[T]);const Cm=async()=>{if(m!=null&&m._id){It(!0),Kt(null);try{const je=await Ie.patch(`/courses/${m._id}/publish`);g(Ee=>({...Ee,published:je.data.published})),await i()}catch(je){let Ee="Error toggling course publish.";je.response&&je.response.data&&je.response.data.message?Ee=je.response.data.message:je.message&&(Ee=je.message),Kt(Ee)}finally{It(!1)}}},du=je=>{g(je)},Va=je=>{g(je)};if(l)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(u)return n.jsx("div",{className:"text-red-500 text-center p-4",children:typeof u=="string"?u:"An error occurred. Please try again."});if(!m)return n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Course not found"});const Qn=()=>{var je,Ee,$e,lt,ht;switch(T){case"overview":return n.jsxs("div",{className:"space-y-6",children:[(ee||L)&&Xt&&n.jsx("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-2 font-medium border border-red-200",children:Xt}),n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow p-6 flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:m.title}),n.jsx("p",{className:"text-gray-500 mb-2",children:m.description}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Instructor: ",m.instructor.firstName," ",m.instructor.lastName]})]}),(ee||L)&&n.jsxs("div",{className:"flex flex-col items-end mt-4 md:mt-0 gap-2",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:Cm,disabled:yt,className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50 ${m.published?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"} ${yt?"opacity-60 cursor-not-allowed":""}`,children:[m.published?n.jsx(cc,{className:"w-4 h-4 mr-2"}):n.jsx(So,{className:"w-4 h-4 mr-2"}),yt?"Updating...":m.published?"Unpublish":"Publish"]})}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:()=>r(`/courses/${m._id}/edit`),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-colors",children:"Edit Course"}),L&&n.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this course?")},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:"Delete Course"})]})]})]}),(ee||L)&&n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 bg-blue-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-blue-800",children:"Students"}),n.jsx("div",{className:"text-3xl font-bold text-blue-900",children:((je=m.students)==null?void 0:je.length)||0})]}),n.jsxs("div",{className:"flex-1 bg-green-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-green-800",children:"Modules"}),n.jsx("div",{className:"text-3xl font-bold text-green-900",children:x.length})]}),n.jsxs("div",{className:"flex-1 bg-purple-50 rounded-xl p-6 text-center shadow",children:[n.jsx("div",{className:"text-lg font-semibold text-purple-800",children:"Assignments"}),n.jsx("div",{className:"text-3xl font-bold text-purple-900",children:x.reduce((ce,ut)=>{var Pt;return ce+(((Pt=ut.assignments)==null?void 0:Pt.length)||0)},0)})]})]}),(ee||L)&&n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"font-semibold mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",onClick:()=>r(`/courses/${e}/modules`),children:"Create Module"}),n.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",onClick:()=>r(`/courses/${e}/students`),children:"Manage Students"}),n.jsx("button",{className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors",onClick:()=>r(`/courses/${e}/gradebook`),children:"View Gradebook"}),n.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors flex items-center gap-2",onClick:()=>xe(!0),children:[n.jsx(Is,{className:"w-4 h-4"}),"Configure Overview"]}),n.jsxs("button",{className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition-colors flex items-center gap-2",onClick:()=>er(!0),children:[n.jsx(x$,{className:"w-4 h-4"}),"Customize Sidebar"]})]})]}),!ee&&!L&&n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow p-6 border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Your Enrollment Status"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-green-600 font-medium",children:"✓ Enrolled in this course"}),n.jsx("span",{className:"text-sm text-gray-500",children:"You have access to all course materials and assignments"})]})]})}),!ee&&!L&&((Ee=m.overviewConfig)==null?void 0:Ee.showLatestAnnouncements)&&n.jsx(vW,{courseId:m._id,numberOfAnnouncements:m.overviewConfig.numberOfAnnouncements||3})]});case"modules":return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Course Modules"}),n.jsx(Aa,{children:n.jsx(AB,{courseId:m._id})})]})});case"pages":return n.jsx(fW,{courseId:(m==null?void 0:m._id)||"",modules:x,isInstructor:ee,isAdmin:L});case"assignments":const ft=x.flatMap(ce=>ce.assignments||[]),Ue=Li.map(ce=>({...ce,isGroupAssignment:!0,totalPoints:ce.totalPoints||(Array.isArray(ce.questions)?ce.questions.reduce((ut,Pt)=>ut+(Pt.points||0),0):0)})),bt=[...ft,...Ue,...Jt.map(ce=>({_id:ce._id,title:ce.title,dueDate:ce.dueDate||ce.due_date||ce.discussionDueDate||null,attachments:[],createdBy:ce.author||{firstName:"",lastName:""},type:"discussion",group:ce.group||"Discussions",totalPoints:ce.totalPoints||0,published:!0,studentGrades:ce.studentGrades||[],replies:ce.replies||[]}))];return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Assignments"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage course assignments"})]}),(ee||L)&&n.jsx(n.Fragment,{children:x.length>0?n.jsxs("button",{onClick:()=>r(`/modules/${x[0]._id}/assignments/create`),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-sm",children:[n.jsx("span",{children:"+"})," Create Assignment"]}):n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 px-4 py-2 rounded-md",children:"Create a module first to add assignments"})})]}),Zt?n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading discussions..."}):x.length>0?n.jsx(iT,{assignments:bt,userRole:f==null?void 0:f.role,studentSubmissions:(f==null?void 0:f.role)==="student"?Te:void 0,studentId:f==null?void 0:f._id,submissionMap:(f==null?void 0:f.role)==="student"?He:void 0,courseId:m==null?void 0:m._id}):n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No modules available. Please create a module to add assignments."})]})});case"discussions":return n.jsx(KB,{courseId:(m==null?void 0:m._id)||"",courseGroups:(m==null?void 0:m.groups)||[]});case"polls":return n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:n.jsx(kW,{courseId:(m==null?void 0:m._id)||""})})});case"grades":if(!f)return n.jsx("div",{className:"text-center py-8 text-gray-500",children:"User not found."});const rt=x.flatMap(ce=>(ce.assignments||[]).map(ut=>{let Pt=ut.dueDate||ut.due_date||ut.discussionDueDate||null,tr=Pt?new Date(Pt):null;return{...ut,moduleTitle:ce.title,isDiscussion:!1,dueDate:tr}})),Nt=tt.map(ce=>({...ce,moduleTitle:"Group Assignments",isDiscussion:!1})),pt=Ke.map(ce=>({_id:ce._id,title:ce.title,totalPoints:ce.totalPoints,group:ce.group,moduleTitle:"Discussions",isDiscussion:!0,studentGrades:ce.studentGrades||[],dueDate:ce.dueDate||null,hasSubmitted:ce.hasSubmitted||!1,replies:ce.replies||[]})),et=[...rt,...Nt,...pt],st=f==null?void 0:f._id;return st?n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:"My Grades"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track your academic progress"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Due"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Score"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Out of"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:et.map(ce=>{var Gi,ks;const ut=`${String(st)}_${String(ce._id)}`;let Pt=ce.isDiscussion?ce.hasSubmitted||Array.isArray(ce.replies)&&ce.replies.some(Rt=>Rt.author&&(Rt.author._id===String(st)||Rt.author===String(st))):!!He[ut],tr=ce.isDiscussion?ce.grade:(Gi=H.grades[String(st)])==null?void 0:Gi[String(ce._id)];const Ss=((ks=ce.questions)==null?void 0:ks.reduce((Rt,Ir)=>Rt+(Ir.points||0),0))||ce.totalPoints||0,Rn=Te.find(Rt=>Rt.assignment&&Rt.assignment._id===ce._id),xn=typeof(Rn==null?void 0:Rn.feedback)=="string"?Rn.feedback:"",kt=ce.dueDate?new Date(ce.dueDate):null,Gr=new Date;let Sr=null,In=typeof tr=="number"?Number.isInteger(tr)?tr.toString():Number(tr).toFixed(2):"-",Dr=null;if(ce.isDiscussion){if(tr==null&&Array.isArray(ce.studentGrades)){const Rt=ce.studentGrades.find(Ir=>Ir.student&&(Ir.student._id===String(st)||Ir.student===String(st)));Rt&&typeof Rt.grade=="number"&&(tr=Rt.grade,In=Number.isInteger(tr)?tr.toString():Number(tr).toFixed(2),Dr=Rt.gradedAt?new Date(Rt.gradedAt):null,Pt=!0)}if(!Pt&&Array.isArray(ce.replies)){const Rt=ce.replies.find(Ir=>Ir.author&&(Ir.author._id===st||Ir.author===st));Rt&&Rt.createdAt&&(Dr=new Date(Rt.createdAt),Pt=!0)}Pt?kt&&Dr&&Dr>kt?Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Late"}):Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"}):kt&&Gr>kt&&(Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Missing"}),In="0")}else ce.published?Pt?Rn&&Rn.submittedAt&&kt&&new Date(Rn.submittedAt)>kt?Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Late"}):Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"}):kt&&Gr>kt&&(Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Missing"}),In="0"):(Sr=n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:"Not Published"}),In="-");let Qr="";if(ce.isDiscussion&&Array.isArray(ce.studentGrades)){const Rt=ce.studentGrades.find(Ir=>Ir.student&&(Ir.student._id===st||Ir.student===st));Rt&&typeof Rt.feedback=="string"&&Rt.feedback.trim()!==""&&(Qr=Rt.feedback)}return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150",children:[n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ce.title}),ce.group&&n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ce.group})]}),n.jsx("td",{className:"px-4 py-3 text-xs text-gray-600 dark:text-gray-400",children:ce.dueDate?new Date(ce.dueDate).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),n.jsx("td",{className:"px-4 py-3 text-center",children:Sr}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:In})}),n.jsx("td",{className:"px-4 py-3 text-center text-xs text-gray-600 dark:text-gray-400",children:Ss}),n.jsx("td",{className:"px-4 py-3 text-center",children:ce.isDiscussion?Qr&&n.jsx("button",{className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors duration-150",title:"View feedback",onClick:()=>r(`/courses/${m._id}/threads/${ce._id}`),children:n.jsx("span",{role:"img","aria-label":"Comment",className:"text-sm",children:"💬"})}):Pt&&typeof xn=="string"&&xn.trim()!==""&&n.jsx("button",{className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors duration-150",title:"View feedback",onClick:()=>r(`/assignments/${ce._id}/view`),children:n.jsx("span",{role:"img","aria-label":"Comment",className:"text-sm",children:"💬"})})})]},ce._id)})})]})})]})}),n.jsx(PB,{course:m,studentId:st,grades:H.grades,assignments:et,submissionMap:He,studentSubmissions:Te,backendTotalGrade:pe,backendLetterGrade:se})]}):n.jsx("div",{className:"text-center py-8 text-gray-500",children:"User ID not found."});case"gradebook":let St=function(ce){return af(ce._id,m,Qt,vt)};if(!ee&&!L)return n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Access denied"});const{students:Tt,assignments:Qt,grades:vt}=H,ca=(m.groups||[]).reduce((ce,ut)=>(ce[ut.name]={...ut,assignments:[]},ce),{});return Qt.forEach(ce=>{ce.group&&ca[ce.group]&&ca[ce.group].assignments.push(ce)}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full p-3",children:n.jsx("svg",{className:"w-8 h-8 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Gradebook"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Track student performance and manage grades"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg px-4 py-2 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Students"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Tt.length})]}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg px-4 py-2 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Assignments"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:Qt.length})]})]})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("div",{className:"overflow-x-auto w-full relative",children:n.jsxs("table",{className:"min-w-max w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-left text-gray-700 dark:text-gray-300 sticky left-0 z-50 font-semibold text-sm uppercase tracking-wider",style:{left:0,zIndex:50,boxShadow:"2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),n.jsx("span",{children:"Student Name"})]})}),Qt.map(ce=>{var ut;return n.jsxs("th",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-center text-gray-700 dark:text-gray-300 min-w-[140px]",children:[n.jsx("div",{className:"font-semibold text-blue-700 dark:text-blue-300 cursor-pointer hover:underline text-center text-sm",children:ce.title}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1 bg-blue-50 dark:bg-blue-900/20 rounded-full px-2 py-1 mx-1",children:ce.group?ce.group:"Ungrouped"}),n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:["Out of ",((ut=ce.questions)==null?void 0:ut.reduce((Pt,tr)=>Pt+(tr.points||0),0))||ce.totalPoints||0]})]},ce._id)}),n.jsx("th",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 text-center text-gray-700 dark:text-gray-300 sticky right-0 z-50 font-semibold text-sm uppercase tracking-wider",style:{right:0,zIndex:50,boxShadow:"-2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsx("span",{children:"Overall Grade"})]})})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Tt.map((ce,ut)=>{const Pt=St(ce),tr=tb(Pt,m==null?void 0:m.gradeScale),Ss=ut%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800",Rn=ut%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800";let xn="text-gray-700 dark:text-gray-300";return tr==="A"?xn="text-green-600 dark:text-green-400":tr==="B"?xn="text-blue-600 dark:text-blue-400":tr==="C"?xn="text-yellow-600 dark:text-yellow-400":tr==="D"?xn="text-orange-600 dark:text-orange-400":tr==="F"&&(xn="text-red-600 dark:text-red-400"),n.jsxs("tr",{className:`${Ss} hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150`,children:[n.jsx("td",{className:`px-6 py-4 border-r border-gray-200 dark:border-gray-600 text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer font-medium whitespace-nowrap sticky left-0 z-40 ${Rn} transition-colors duration-150`,style:{left:0,zIndex:40,boxShadow:"2px 0 8px -4px rgba(0,0,0,0.1)"},children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[ce.profilePicture?n.jsx("img",{src:ce.profilePicture.startsWith("http")?ce.profilePicture:`http://localhost:5000${ce.profilePicture}`,alt:`${ce.firstName} ${ce.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600",onError:kt=>{kt.currentTarget.style.display="none";const Gr=kt.currentTarget.nextElementSibling;Gr&&(Gr.style.display="flex")}}):null,n.jsxs("div",{className:`w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${ce.profilePicture?"hidden":""}`,style:{display:ce.profilePicture?"none":"flex"},children:[ce.firstName.charAt(0),ce.lastName.charAt(0)]})]}),n.jsxs("span",{children:[ce.firstName," ",ce.lastName]})]})}),Qt.map(kt=>{var nl,Ya,sl;const Gr=`${ce._id}_${kt._id}`,Sr=kt.isDiscussion?Array.isArray(kt.replies)&&kt.replies.some(vr=>vr.author&&(vr.author._id===ce._id||vr.author===ce._id)):!!He[Gr],In=kt.isDiscussion,Dr=(nl=vt[ce._id])==null?void 0:nl[kt._id],Qr=kt.dueDate?new Date(kt.dueDate):null,Gi=new Date;let ks=null;if(In){if(Array.isArray(kt.replies)){const vr=kt.replies.find(pr=>pr.author&&(pr.author._id===ce._id||pr.author===ce._id));vr&&vr.createdAt&&(ks=new Date(vr.createdAt))}}else{const vr=He[Gr];if(vr){const pr=Te.find(Xn=>Xn._id===vr);pr!=null&&pr.submittedAt&&(ks=new Date(pr.submittedAt))}}let Rt,Ir="";if(!kt.isDiscussion&&!kt.published)Rt=n.jsx("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"Not Published"}),Ir="bg-gray-100 dark:bg-gray-800";else if(typeof Dr=="number"){const vr=((Ya=kt.questions)==null?void 0:Ya.reduce((ua,qi)=>ua+(qi.points||0),0))||kt.totalPoints||0,pr=Dr/vr*100;let Xn="bg-green-100 dark:bg-green-900/20";pr<60?Xn="bg-red-100 dark:bg-red-900/20":pr<70?Xn="bg-orange-100 dark:bg-orange-900/20":pr<80&&(Xn="bg-yellow-100 dark:bg-yellow-900/20"),Rt=n.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Xn} ${pr<60?"text-red-700 dark:text-red-300":pr<70?"text-orange-700 dark:text-orange-300":pr<80?"text-yellow-700 dark:text-yellow-300":"text-green-700 dark:text-green-300"}`,children:Number.isInteger(Dr)?Dr:Number(Dr).toFixed(2)})}else Sr?Qr&&ks&&ks.getTime()>Qr.getTime()?Rt=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Late"]}):Rt=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Not Graded"]}):Qr&&Gi.getTime()>Qr.getTime()?Rt=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"0 (MA)"]}):Rt=n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"No Submission"]});return n.jsx("td",{className:`px-4 py-4 text-center whitespace-nowrap relative ${Ss} ${Ir} transition-all duration-150`,onClick:()=>{(ee||L)&&Sr&&Sm(ce._id,kt._id,(Dr==null?void 0:Dr.toString())||"")},children:(G==null?void 0:G.studentId)===ce._id&&(G==null?void 0:G.assignmentId)===kt._id?n.jsx("div",{className:"relative",children:n.jsx("input",{type:"number",id:`grade-input-${ce._id}-${kt._id}`,name:`grade-${ce._id}-${kt._id}`,step:"0.01",min:"0",max:((sl=kt.questions)==null?void 0:sl.reduce((vr,pr)=>vr+(pr.points||0),0))||kt.totalPoints||0,value:X,onChange:vr=>V(vr.target.value),onKeyDown:vr=>{vr.key==="Enter"?(vr.preventDefault(),lu(ce._id,kt._id,X)):vr.key==="Escape"&&(ae(null),Pe(""))},className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})}):n.jsxs("div",{className:`${(ee||L)&&Sr?"cursor-pointer hover:scale-105 transform transition-transform duration-150":""} ${(ie==null?void 0:ie.studentId)===ce._id&&(ie==null?void 0:ie.assignmentId)===kt._id?"opacity-50":""}`,children:[(ie==null?void 0:ie.studentId)===ce._id&&(ie==null?void 0:ie.assignmentId)===kt._id?n.jsxs("div",{className:"inline-flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):null,Rt]})},kt._id)}),n.jsx("td",{className:`px-6 py-4 border-l border-gray-200 dark:border-gray-600 text-center font-semibold whitespace-nowrap sticky right-0 z-40 ${Ss} transition-colors duration-150`,style:{right:0,zIndex:40,boxShadow:"-2px 0 8px -4px rgba(0,0,0,0.1)"},children:m.groups&&m.groups.length>0?n.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-bold ${xn} bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-600`,children:[Number(Pt).toFixed(2),"% (",tr,")"]}):"-"})]},ce._id)})})]})}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-full w-12 bg-gradient-to-l from-gray-50 dark:from-gray-800 to-transparent",style:{zIndex:10}})]}),(!Tt.length||!Qt.length)&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No data available"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No students or assignments found."})]})]}),(ee||L)&&n.jsx("div",{className:"flex justify-end space-x-4",children:n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs("button",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:km,children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]}),n.jsxs("button",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:Nm,children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Grade Scale"]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 mt-6 border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Assignment Group Weights"}),n.jsxs("table",{className:"min-w-max border border-gray-300 dark:border-gray-700 mb-2",children:[n.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 border-b border-r border-gray-300 dark:border-gray-700 text-left text-gray-900 dark:text-gray-100",children:"Group"}),n.jsx("th",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-left text-gray-900 dark:text-gray-100",children:"Weight"})]})}),n.jsxs("tbody",{children:[(m.groups||[]).map((ce,ut)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 border-b border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:ce.name}),n.jsxs("td",{className:"px-4 py-2 border-b border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:[ce.weight,"%"]})]},ut)),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-bold border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:"Total"}),n.jsxs("td",{className:"px-4 py-2 font-bold border-r border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",children:[(m.groups||[]).reduce((ce,ut)=>ce+Number(ut.weight),0),"%"]})]})]})]})]}),(ee||L)&&n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:hr,children:"Edit Assignment Groups"})]})}),le&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 w-full max-w-2xl relative",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Assignment Groups"}),n.jsxs("table",{className:"min-w-full mb-4",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Group Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Weight (%)"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:Ae.map((ce,ut)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"text",id:`group-name-${ut}`,name:`groupName-${ut}`,value:ce.name,onChange:Pt=>cu(ut,"name",Pt.target.value),className:"border rounded px-2 py-1 w-32"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`group-weight-${ut}`,name:`groupWeight-${ut}`,value:ce.weight,onChange:Pt=>cu(ut,"weight",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>uu(ut),title:"Remove row",children:"×"})})]},ut))})]}),n.jsx("button",{className:"mb-4 px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",onClick:rl,children:"+ Add Group"}),Ye&&n.jsx("div",{className:"text-red-600 mb-2",children:Ye}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",onClick:()=>fe(!1),disabled:he,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:zi,disabled:he,children:he?"Saving...":"Save"})]})]})}),M&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 w-full max-w-2xl relative",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Grade Scale"}),n.jsxs("table",{className:"min-w-full mb-4",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Letter"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Min %"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Max %"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:R.map((ce,ut)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"text",id:`grade-letter-${ut}`,name:`gradeLetter-${ut}`,value:ce.letter,onChange:Pt=>Bi(ut,"letter",Pt.target.value),className:"border rounded px-2 py-1 w-16"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`grade-min-${ut}`,name:`gradeMin-${ut}`,value:ce.min,onChange:Pt=>Bi(ut,"min",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"number",id:`grade-max-${ut}`,name:`gradeMax-${ut}`,value:ce.max,onChange:Pt=>Bi(ut,"max",Number(Pt.target.value)),className:"border rounded px-2 py-1 w-20"})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>iu(ut),title:"Remove row",children:"×"})})]},ut))})]}),n.jsx("button",{className:"mb-4 px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",onClick:()=>{if(R.length===0){U([{letter:"A",min:94,max:100},{letter:"A-",min:90,max:93},{letter:"B+",min:87,max:89},{letter:"B",min:84,max:86},{letter:"B-",min:80,max:83},{letter:"C+",min:77,max:79},{letter:"C",min:74,max:76},{letter:"D",min:64,max:73},{letter:"F",min:0,max:63}]),Se("Auto-filled with default scale.");return}const ce=[...R].sort((ut,Pt)=>Pt.min-ut.min);if(ce.length>0){ce[0].max=100;for(let ut=1;ut<ce.length;ut++)ce[ut].max=ce[ut-1].min-1}U(ce),Se("Auto-fixed scale for contiguous whole numbers.")},children:"Auto-Fix"}),Ce&&n.jsx("div",{className:"text-red-600 mb-2",children:Ce}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",onClick:()=>W(!1),disabled:Z,children:"Cancel"}),n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:ou,disabled:Z,children:Z?"Saving...":"Save"})]})]})})]});case"students":return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Student Management"}),(ee||L)&&n.jsxs("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100",children:"Add Students"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search for students by name or email...",value:b,onChange:Yn,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100"}),E&&n.jsx("div",{className:"absolute right-3 top-2",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]}),C.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Results"}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:C.map(ce=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-300",children:ce.firstName&&ce.lastName?`${ce.firstName[0]}${ce.lastName[0]}`.toUpperCase():"U"}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[ce.firstName," ",ce.lastName]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:ce.email})]})]}),n.jsx("button",{onClick:()=>Fi(ce._id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add"})]},ce._id))})]}),_&&n.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:_})]}),(ee||L)&&n.jsxs("div",{className:"mb-8 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-orange-800 dark:text-orange-200",children:["Waitlisted Students - Pending Approval (",(($e=m.enrollmentRequests)==null?void 0:$e.filter(ce=>ce.status==="waitlisted").length)||0,")"]}),((lt=m.catalog)==null?void 0:lt.maxStudents)&&m.students.length>=m.catalog.maxStudents&&n.jsxs("div",{className:"mb-3 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-600 rounded text-sm text-blue-700 dark:text-blue-300",children:["💡 ",n.jsx("strong",{children:"Note:"})," As a teacher, you can approve waitlisted students to enroll them in the course, even when it's full. You can also override capacity by enrolling students directly."]}),!m.enrollmentRequests||m.enrollmentRequests.filter(ce=>ce.status==="waitlisted").length===0?n.jsx("div",{className:"text-center text-orange-700 dark:text-orange-300 py-4",children:"No waitlisted students at this time."}):n.jsx("div",{className:"space-y-3",children:m.enrollmentRequests.filter(ce=>ce.status==="waitlisted").map(ce=>{var Pt,tr;const ut=(tr=(Pt=m.waitlist)==null?void 0:Pt.find(Ss=>Ss.student._id===ce.student._id))==null?void 0:tr.position;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-orange-100 dark:bg-orange-800/30 border-orange-300 dark:border-orange-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-orange-200 dark:bg-orange-700",children:ce.student.profilePicture?n.jsx("img",{src:ce.student.profilePicture.startsWith("http")?ce.student.profilePicture:`http://localhost:5000${ce.student.profilePicture}`,alt:`${ce.student.firstName} ${ce.student.lastName}`,className:"w-10 h-10 rounded-full object-cover"}):n.jsxs("span",{className:"font-medium text-orange-700 dark:text-orange-200",children:[ce.student.firstName.charAt(0),ce.student.lastName.charAt(0)]})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[ce.student.firstName," ",ce.student.lastName," wants to join",ut&&n.jsxs("span",{className:"ml-2 text-sm text-orange-600 dark:text-orange-400 font-normal",children:["(Waitlist Position ",ut,")"]})]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Waitlisted on ",new Date(ce.requestDate).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>Wa(ce.student._id),className:"px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors font-medium",children:"Approve"}),n.jsx("button",{onClick:()=>Ha(ce.student._id),className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition-colors font-medium",children:"Deny"})]})]},ce._id)})})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"Instructor"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.jsx(fS,{student:m.instructor,isInstructor:!0,isAdmin:L,handleUnenroll:null,isInstructorCard:!0},m.instructor._id||"instructor")})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100",children:["Enrolled Students (",m.students.length,")",((ht=m.catalog)==null?void 0:ht.maxStudents)&&m.students.length>m.catalog.maxStudents&&n.jsxs("span",{className:"ml-2 text-sm text-orange-600 dark:text-orange-400 font-normal",children:["(Over Capacity: ",m.students.length,"/",m.catalog.maxStudents,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.students.map(ce=>n.jsx(fS,{student:ce,isInstructor:ee,isAdmin:L,handleUnenroll:Kn},ce._id))}),m.students.length===0&&n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No students enrolled yet"})]})]})});case"groups":return ee||L?n.jsx(uW,{courseId:(m==null?void 0:m._id)||""}):n.jsx(dW,{courseId:(m==null?void 0:m._id)||"",userId:(f==null?void 0:f._id)||""});case"attendance":return n.jsx(NW,{});case"announcements":return n.jsx("div",{className:"relative",children:qe?n.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"New Announcement"}),n.jsx(sT,{onSubmit:async ce=>{await mW(m._id,ce),dt(!1),P("announcements")},loading:!1,onCancel:()=>dt(!1)})]}):n.jsxs(n.Fragment,{children:[n.jsx(gW,{courseId:m._id}),(ee||L)&&n.jsx("button",{className:"fixed bottom-8 right-8 z-50 bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-blue-700 text-lg font-bold flex items-center gap-2",onClick:()=>dt(!0),children:"+ Announcement"})]})});case"sidebar":return n.jsx(cS,{isOpen:Qe,onClose:()=>er(!1),courseId:(m==null?void 0:m._id)||"",currentConfig:(m==null?void 0:m.sidebarConfig)||{},onConfigUpdated:Va});default:return null}};return n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:ln.map(je=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${T===je.id?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${e}/${je.id}`),children:[n.jsx(je.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:je.label})]},je.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:Qn()})}),n.jsx(yW,{isOpen:la,onClose:()=>xe(!1),courseId:(m==null?void 0:m._id)||"",currentConfig:(m==null?void 0:m.overviewConfig)||{showLatestAnnouncements:!1,numberOfAnnouncements:3},onConfigUpdated:du}),n.jsx(cS,{isOpen:Qe,onClose:()=>er(!1),courseId:(m==null?void 0:m._id)||"",currentConfig:(m==null?void 0:m.sidebarConfig)||{},onConfigUpdated:Va})]})},CW=({assignment:e,isInstructor:t,isAdmin:r,navigate:s})=>{var l;const a=((l=e.questions)==null?void 0:l.reduce((u,d)=>u+(d.points||0),0))||e.totalPoints||0,i=e.dueDate?new Date(e.dueDate):null;return n.jsx("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 line-clamp-2",children:e.title}),n.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.moduleTitle})]}),e.group&&n.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full",children:e.group})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsxs("span",{className:e.isOverdue?"text-red-600 font-medium":"",children:["Due: ",i?`${i.toLocaleDateString()} at ${i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"No due date"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),n.jsxs("span",{children:["Points: ",a]})]}),e.hasSubmission&&n.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.jsx("span",{children:"Submitted"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[n.jsx("button",{onClick:()=>s(`/assignments/${e._id}/view`),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors text-sm font-medium",children:"View"}),(t||r)&&n.jsx("button",{onClick:()=>s(`/assignments/${e._id}/grade`),className:"flex-1 px-3 py-2 bg-yellow-50 text-yellow-600 rounded-md hover:bg-yellow-100 transition-colors text-sm font-medium",children:"Grade"})]})]})})},hS=({mode:e})=>{const t=Lt(),{id:r}=br(),{createCourse:s,updateCourse:a,getCourse:i,loading:l,error:u}=Go(),d=j.useRef(i);j.useEffect(()=>{d.current=i},[i]);const[h,f]=j.useState({title:"",description:"",subject:"",catalogDescription:"",prerequisites:[],maxStudents:"",enrollmentDeadline:"",startDate:"",endDate:"",tags:"",syllabus:"",isPublic:!1,allowTeacherEnrollment:!1}),[m,g]=j.useState({title:"",description:"",subject:"",catalogDescription:"",maxStudents:"",enrollmentDeadline:"",startDate:"",endDate:"",tags:"",syllabus:"",allowTeacherEnrollment:""});j.useEffect(()=>{e==="edit"&&r&&(async()=>{var C,N,E,S,_,D,T,P,O,F,$,z,q;try{const H=await d.current(r);f({title:H.title,description:H.description,subject:((C=H.catalog)==null?void 0:C.subject)||"",catalogDescription:((N=H.catalog)==null?void 0:N.description)||"",prerequisites:((E=H.catalog)==null?void 0:E.prerequisites)||[],maxStudents:((_=(S=H.catalog)==null?void 0:S.maxStudents)==null?void 0:_.toString())||"",enrollmentDeadline:(D=H.catalog)!=null&&D.enrollmentDeadline?new Date(H.catalog.enrollmentDeadline).toISOString().split("T")[0]:"",startDate:(T=H.catalog)!=null&&T.startDate?new Date(H.catalog.startDate).toISOString().split("T")[0]:"",endDate:(P=H.catalog)!=null&&P.endDate?new Date(H.catalog.endDate).toISOString().split("T")[0]:"",tags:((F=(O=H.catalog)==null?void 0:O.tags)==null?void 0:F.join(", "))||"",syllabus:(($=H.catalog)==null?void 0:$.syllabus)||"",isPublic:((z=H.catalog)==null?void 0:z.isPublic)||!1,allowTeacherEnrollment:((q=H.catalog)==null?void 0:q.allowTeacherEnrollment)||!1})}catch(H){console.error("Error fetching course:",H)}})()},[e,r]);const x=()=>{const w={title:"",description:"",subject:"",catalogDescription:"",maxStudents:"",enrollmentDeadline:"",startDate:"",endDate:"",tags:"",syllabus:"",allowTeacherEnrollment:""};let C=!0;return h.title.trim()?h.title.length<3&&(w.title="Title must be at least 3 characters long",C=!1):(w.title="Title is required",C=!1),h.description.trim()?h.description.length<10&&(w.description="Description must be at least 10 characters long",C=!1):(w.description="Description is required",C=!1),g(w),C},v=async w=>{if(w.preventDefault(),!!x())try{const C={subject:h.subject,description:h.catalogDescription,prerequisites:h.prerequisites,maxStudents:h.maxStudents?parseInt(h.maxStudents):null,enrollmentDeadline:h.enrollmentDeadline?new Date(h.enrollmentDeadline):null,startDate:h.startDate?new Date(h.startDate):null,endDate:h.endDate?new Date(h.endDate):null,tags:h.tags?h.tags.split(",").map(N=>N.trim()).filter(N=>N):[],syllabus:h.syllabus,isPublic:h.isPublic,allowTeacherEnrollment:h.allowTeacherEnrollment};e==="create"?await s(h.title,h.description,C):e==="edit"&&r&&await a(r,h.title,h.description,C),t("/dashboard")}catch(C){console.error("Error submitting form:",C)}},b=w=>{const{name:C,value:N}=w.target;f(E=>({...E,[C]:N})),g(E=>({...E,[C]:""}))};return n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:e==="create"?"Create Course":"Edit Course"}),u&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",id:"title",name:"title",value:h.title,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter course title"}),m.title&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:h.description,onChange:b,rows:4,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter course description"}),m.description&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.description})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Catalog Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",id:"subject",name:"subject",value:h.subject,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.subject?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Computer Science, Mathematics"}),m.subject&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.subject})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"catalogDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Catalog Description"}),n.jsx("textarea",{id:"catalogDescription",name:"catalogDescription",value:h.catalogDescription,onChange:b,rows:3,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.catalogDescription?"border-red-500":"border-gray-300"}`,placeholder:"Brief description for the course catalog"}),m.catalogDescription&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.catalogDescription})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"maxStudents",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Students"}),n.jsx("input",{type:"number",id:"maxStudents",name:"maxStudents",value:h.maxStudents,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.maxStudents?"border-red-500":"border-gray-300"}`,placeholder:"Leave empty for unlimited"}),m.maxStudents&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.maxStudents})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),n.jsx("input",{type:"text",id:"tags",name:"tags",value:h.tags,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.tags?"border-red-500":"border-gray-300"}`,placeholder:"e.g., programming, web development, javascript"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Separate tags with commas"}),m.tags&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.tags})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),n.jsx("input",{type:"date",id:"startDate",name:"startDate",value:h.startDate,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.startDate?"border-red-500":"border-gray-300"}`}),m.startDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.startDate})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),n.jsx("input",{type:"date",id:"endDate",name:"endDate",value:h.endDate,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.endDate?"border-red-500":"border-gray-300"}`}),m.endDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.endDate})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"enrollmentDeadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment Deadline"}),n.jsx("input",{type:"date",id:"enrollmentDeadline",name:"enrollmentDeadline",value:h.enrollmentDeadline,onChange:b,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.enrollmentDeadline?"border-red-500":"border-gray-300"}`}),m.enrollmentDeadline&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.enrollmentDeadline})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{htmlFor:"syllabus",className:"block text-sm font-medium text-gray-700 mb-1",children:"Syllabus"}),n.jsx("textarea",{id:"syllabus",name:"syllabus",value:h.syllabus,onChange:b,rows:4,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.syllabus?"border-red-500":"border-gray-300"}`,placeholder:"Enter course syllabus or detailed description"}),m.syllabus&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.syllabus})]}),n.jsx("div",{className:"mt-6",children:n.jsxs("label",{htmlFor:"isPublic",className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:h.isPublic,onChange:w=>f(C=>({...C,isPublic:w.target.checked})),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make this course public in the catalog"})]})}),n.jsx("div",{className:"mt-4",children:n.jsxs("label",{htmlFor:"allowTeacherEnrollment",className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"allowTeacherEnrollment",name:"allowTeacherEnrollment",checked:h.allowTeacherEnrollment,onChange:w=>f(C=>({...C,allowTeacherEnrollment:w.target.checked})),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow teachers to enroll in this course"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4",children:[n.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?n.jsxs("span",{className:"flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e==="create"?"Creating...":"Saving..."]}):e==="create"?"Create Course":"Save Changes"})]})]})]})})},oT=()=>{const{pageId:e}=br(),t=Lt(),{getPage:r}=Ri(),[s,a]=j.useState(null),[i,l]=j.useState(!0),[u,d]=j.useState(null);return j.useEffect(()=>{(async()=>{if(e)try{l(!0);const f=await r(e);if(!f)throw new Error("Page not found");a(f)}catch(f){console.error("Error fetching page:",f),d("Failed to load page")}finally{l(!1)}})()},[e,r]),i?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[n.jsx("div",{className:"text-red-500 mb-4",children:u}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back"})]}):s?n.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:s.title}),n.jsx("div",{className:"prose max-w-none",children:n.jsx(_o,{children:s.content})})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[n.jsx("div",{className:"text-gray-500 mb-4",children:"Page not found"}),n.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back"})]})},pS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:or,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],_W=()=>{const{courseId:e,pageId:t}=br(),r=Lt(),{user:s}=Et(),[a,i]=j.useState(null),[l,u]=j.useState(!0);console.log("PageViewWrapper - courseId:",e,"pageId:",t),j.useEffect(()=>{(async()=>{var g;if(!e||e==="undefined"||e==="null"){console.error("Invalid course ID:",e);return}try{u(!0);const x=localStorage.getItem("token");if(!x)throw new Error("No authentication token found");const v=await me.get(`${ke}/api/courses/${e}`,{headers:{Authorization:`Bearer ${x}`}});if(v.data.success)i(v.data.data);else throw new Error(v.data.message||"Failed to fetch course")}catch(x){console.error("Error fetching course:",x),((g=x.response)==null?void 0:g.status)===400&&console.error("Invalid course ID format")}finally{u(!1)}})()},[e]);const d=(a==null?void 0:a.sidebarConfig)||{items:pS.map((m,g)=>({id:m.id,label:m.label,visible:!0,order:g,fixed:m.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},f=d.items.sort((m,g)=>m.order-g.order).filter(m=>m.visible).map(m=>({...pS.find(x=>x.id===m.id),...m})).filter(m=>m.roles&&!m.roles.includes((s==null?void 0:s.role)||"")?!1:(s==null?void 0:s.role)==="student"?m.visible&&d.studentVisibility[m.id]:!0);return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):!a||!a._id?n.jsx("div",{children:"Course not found or invalid course data"}):n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:f.map(m=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${m.id==="pages"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${a._id}/${m.id}`),children:[n.jsx(m.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:m.label})]},m.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(oT,{})})})]})},lT=({moduleId:e,editMode:t=!1,assignmentData:r=null})=>{var Se;const s=Lt(),[a,i]=j.useState([]),[l,u]=j.useState([]),[d,h]=j.useState({title:"",description:"",availableFrom:"",dueDate:"",attachments:[],moduleId:"",totalPoints:0,questions:[],isGroupAssignment:!1,groupSetId:null,allowStudentUploads:!1,displayMode:"single",isTimedQuiz:!1,quizTimeLimit:60,showCorrectAnswers:!1,showStudentAnswers:!1}),[f,m]=j.useState(!1),[g,x]=j.useState(""),[v,b]=j.useState({text:"",isCorrect:!1}),[w,C]=j.useState(null),[N,E]=j.useState([]),[S,_]=j.useState(""),[D,T]=j.useState(1),[P,O]=j.useState([]),[F,$]=j.useState(0),[z,q]=j.useState(!1);j.useEffect(()=>{(async()=>{var ae,X;if(!e){x("Module ID is required");return}try{const V=localStorage.getItem("token"),ie=await me.get(`${ke}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${V}`}});if(ie.data.success){const be=ie.data.data.course._id||ie.data.data.course;C(be);const ve=await me.get(`${ke}/api/courses/${be}`,{headers:{Authorization:`Bearer ${V}`}});ve.data.success&&E(ve.data.data.groups||[]);const Pe=await me.get(`${ke}/api/modules/${be}`,{headers:{Authorization:`Bearer ${V}`}});Pe.data.success?i(Pe.data.data):x("Error fetching modules for the course")}else x("Error fetching current module")}catch(V){console.error("Error fetching modules:",V),((ae=V.response)==null?void 0:ae.status)===404?(x("Module not found. Please make sure you are accessing a valid module."),setTimeout(()=>{s(w?`/courses/${w}`:"/dashboard")},3e3)):((X=V.response)==null?void 0:X.status)===401?x("Please log in to access this page."):x("Error fetching modules. Please try again later.")}})()},[e,s]),j.useEffect(()=>{(async()=>{if(w)try{const ae=localStorage.getItem("token"),X=await me.get(`${ke}/api/groups/sets/${w}`,{headers:{Authorization:`Bearer ${ae}`}});u(X.data)}catch(ae){console.error("Error fetching group sets:",ae)}})()},[w]),j.useEffect(()=>{var G;if(t&&r){console.log("Processing assignment data in CreateAssignmentForm:",r),console.log("Original availableFrom:",r.availableFrom),console.log("Original dueDate:",r.dueDate),(async()=>{try{const be=localStorage.getItem("token"),ve=await me.get(`${ke}/api/submissions/assignment/${r._id}`,{headers:{Authorization:`Bearer ${be}`}});$(ve.data.length),q(ve.data.length>0)}catch(be){console.error("Error fetching submission count:",be),$(0),q(!1)}})();let X="";r.availableFrom?(X=Ut(new Date(r.availableFrom),"yyyy-MM-dd'T'HH:mm"),console.log("Using availableFrom:",X)):r.dueDate&&(X=Ut(new Date(r.dueDate),"yyyy-MM-dd'T'HH:mm"),console.log("Using dueDate as fallback for availableFrom:",X));const V=!!r.allowStudentUploads,ie={title:r.title||"",description:r.description||"",availableFrom:X,dueDate:r.dueDate?Ut(new Date(r.dueDate),"yyyy-MM-dd'T'HH:mm"):"",attachments:[],moduleId:r.module||"",totalPoints:((G=r.questions)==null?void 0:G.reduce((be,ve)=>be+(ve.points||0),0))||0,questions:r.questions||[],isGroupAssignment:!!r.isGroupAssignment,groupSetId:r.groupSet||null,allowStudentUploads:V,displayMode:r.displayMode||"single",isTimedQuiz:!!r.isTimedQuiz,quizTimeLimit:r.quizTimeLimit||60,showCorrectAnswers:!!r.showCorrectAnswers,showStudentAnswers:!!r.showStudentAnswers};console.log("Setting form data:",ie),h(ie),_(r.group||""),O(r.attachments||[])}},[t,r]);const H=G=>{const ae={id:Math.random().toString(36).substr(2,9),type:G,text:"",points:1};G==="multiple-choice"&&(ae.options=[]),G==="matching"&&(ae.leftItems=[],ae.rightItems=[]);const X=[...d.questions,ae],V=X.reduce((ie,be)=>ie+(be.points||0),0);h(ie=>({...ie,questions:X,totalPoints:V}))},re=G=>{const ae=d.questions.filter((V,ie)=>ie!==G),X=ae.reduce((V,ie)=>V+(ie.points||0),0);h({...d,questions:ae,totalPoints:X})},ee=(G,ae)=>{const X=[...d.questions],V=ae==="up"?G-1:G+1;[X[G],X[V]]=[X[V],X[G]],h({...d,questions:X})},L=(G,ae,X)=>{const V=[...d.questions];V[G][ae]=X;const ie=V.reduce((be,ve)=>be+(ve.points||0),0);h({...d,questions:V,totalPoints:ie})},M=G=>{if(v.text.trim()){const ae=[...d.questions];ae[G].options=[...ae[G].options||[],{...v}],h({...d,questions:ae}),b({text:"",isCorrect:!1})}},W=(G,ae)=>{var V;const X=[...d.questions];X[G].options=(V=X[G].options)==null?void 0:V.filter((ie,be)=>be!==ae),h({...d,questions:X})},R=()=>d.title.trim()?!(d.isGroupAssignment&&d.groupSetId)&&!d.moduleId?(x("Please select a module"),!1):d.isGroupAssignment&&!d.groupSetId?(x("Please select a group set for the group assignment"),!1):!d.availableFrom||d.availableFrom.trim()===""?(x("Available from date is required"),!1):!d.dueDate||d.dueDate.trim()===""?(x("Due date is required"),!1):new Date(d.availableFrom)>=new Date(d.dueDate)?(x("Available from date must be before due date"),!1):(x(""),!0):(x("Title is required"),!1),U=()=>d.description.trim()?(x(""),!0):(x("Description is required"),!1),Z=()=>{D===1&&R()?T(2):D===2&&U()&&T(3)},B=()=>{D>1&&(T(D-1),x(""))},Ce=async G=>{var ae,X,V,ie,be,ve;if(G.preventDefault(),x(""),!d.title.trim()){x("Title is required");return}if(!d.description.trim()){x("Description is required");return}if(!(d.isGroupAssignment&&d.groupSetId)&&!d.moduleId){x("Please select a module");return}if(!d.dueDate){x("Due date is required");return}if(d.isGroupAssignment&&!d.groupSetId){x("Please select a group set for the group assignment");return}try{const Pe=new FormData;Pe.append("title",d.title),Pe.append("description",d.description),Pe.append("availableFrom",d.availableFrom),Pe.append("dueDate",d.dueDate),Pe.append("moduleId",d.moduleId),Pe.append("totalPoints",d.totalPoints.toString()),Pe.append("questions",JSON.stringify(d.questions)),Pe.append("isGroupAssignment",d.isGroupAssignment.toString()),Pe.append("allowStudentUploads",d.allowStudentUploads.toString()),Pe.append("displayMode",d.displayMode),Pe.append("isTimedQuiz",d.isTimedQuiz.toString()),Pe.append("quizTimeLimit",d.quizTimeLimit.toString()),Pe.append("showCorrectAnswers",d.showCorrectAnswers.toString()),Pe.append("showStudentAnswers",d.showStudentAnswers.toString()),d.isGroupAssignment&&d.groupSetId&&Pe.append("groupSet",d.groupSetId),S&&Pe.append("group",S),d.attachments.forEach(Je=>{Pe.append("attachments",Je)}),console.log("Sending form data:",{title:d.title,availableFrom:d.availableFrom,dueDate:d.dueDate,moduleId:d.moduleId});const He=localStorage.getItem("token");t&&r?(await me.put(`${ke}/api/assignments/${r._id}`,Pe,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${He}`}})).data&&s(-1):(await me.post(`${ke}/api/assignments`,Pe,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${He}`}})).data&&s(`/modules/${e}`)}catch(Pe){console.error(t?"Error updating assignment:":"Error creating assignment:",Pe),((ae=Pe.response)==null?void 0:ae.status)===403?x(`You are not authorized to ${t?"update":"create"} assignments. Please contact your administrator.`):((X=Pe.response)==null?void 0:X.status)===400&&((ie=(V=Pe.response)==null?void 0:V.data)!=null&&ie.submissionCount)?x(`${Pe.response.data.message} (${Pe.response.data.submissionCount} submission${Pe.response.data.submissionCount!==1?"s":""} exist)`):x(((ve=(be=Pe.response)==null?void 0:be.data)==null?void 0:ve.message)||`Error ${t?"updating":"creating"} assignment`)}};return n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:t?"Edit Assignment":"Create New Assignment"}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[n.jsxs("div",{className:`flex items-center ${D>=1?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${D>=1?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"1"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Basic Details"})]}),n.jsx("div",{className:`w-12 h-0.5 ${D>=2?"bg-indigo-600":"bg-gray-300"}`}),n.jsxs("div",{className:`flex items-center ${D>=2?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${D>=2?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"2"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Description"})]}),n.jsx("div",{className:`w-12 h-0.5 ${D>=3?"bg-indigo-600":"bg-gray-300"}`}),n.jsxs("div",{className:`flex items-center ${D>=3?"text-indigo-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${D>=3?"bg-indigo-600 border-indigo-600 text-white":"border-gray-300"}`,children:"3"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Questions & Files"})]})]})}),g&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),t&&z&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded mb-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("h3",{className:"text-sm font-medium text-yellow-800",children:["Assignment has ",F," submission",F!==1?"s":""]}),n.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[n.jsxs("p",{children:["This assignment has been submitted by ",F," student",F!==1?"s":"",". Some changes are restricted:"]}),n.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[n.jsx("li",{children:"Cannot add or remove questions"}),n.jsx("li",{children:"Cannot change question types (e.g., from multiple-choice to text)"}),n.jsx("li",{children:"Can modify question text, options, and points"}),n.jsx("li",{children:"Can change assignment settings (title, description, dates, etc.)"})]})]})]})]})}),n.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[D===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"assignment-title",name:"title",value:d.title,onChange:G=>h({...d,title:G.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),!(d.isGroupAssignment&&d.groupSetId)&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-module",className:"block text-sm font-medium text-gray-700",children:"Module"}),n.jsxs("select",{id:"assignment-module",name:"moduleId",value:d.moduleId,onChange:G=>h({...d,moduleId:G.target.value}),required:!d.isGroupAssignment,disabled:d.isGroupAssignment,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",disabled:!0,children:"Select a module"}),a.map(G=>n.jsx("option",{value:G._id,children:G.title},G._id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"isGroupAssignment",className:"block text-sm font-medium text-gray-700",children:"Assignment Type"}),n.jsx("div",{className:"mt-2 space-y-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isGroupAssignment",checked:d.isGroupAssignment,onChange:G=>h({...d,isGroupAssignment:G.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"isGroupAssignment",className:"ml-2 block text-sm text-gray-900",children:"This is a group assignment"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-group",className:"block text-sm font-medium text-gray-700",children:"Assignment Group"}),n.jsxs("select",{id:"assignment-group",name:"group",value:S,onChange:G=>_(G.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select a group"}),N.map(G=>n.jsx("option",{value:G.name,children:G.name},G.name))]})]})]}),S==="Quizzes"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quiz Timer"}),n.jsxs("div",{className:"mt-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"noTimer",name:"timerOption",value:"noTimer",checked:!d.isTimedQuiz,onChange:()=>h({...d,isTimedQuiz:!1}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("label",{htmlFor:"noTimer",className:"ml-2 block text-sm text-gray-900",children:"No timer (unlimited time)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"withTimer",name:"timerOption",value:"withTimer",checked:d.isTimedQuiz,onChange:()=>h({...d,isTimedQuiz:!0}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("label",{htmlFor:"withTimer",className:"ml-2 block text-sm text-gray-900",children:"Timed quiz"})]})]})]}),d.isTimedQuiz&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Limit (minutes)"}),n.jsx("input",{type:"number",id:"quiz-time-limit",name:"quizTimeLimit",value:d.quizTimeLimit,onChange:G=>h({...d,quizTimeLimit:parseInt(G.target.value)||60}),min:"1",max:"480",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"60"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter time limit in minutes (1-480 minutes)"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quiz Feedback Options"}),n.jsxs("div",{className:"mt-2 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"showCorrectAnswers",checked:d.showCorrectAnswers,onChange:G=>h({...d,showCorrectAnswers:G.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"showCorrectAnswers",className:"ml-2 block text-sm text-gray-900",children:"Show students which questions they got correct after submission"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"showStudentAnswers",checked:d.showStudentAnswers,onChange:G=>h({...d,showStudentAnswers:G.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"showStudentAnswers",className:"ml-2 block text-sm text-gray-900",children:"Show students their submitted answers after submission"})]})]}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Note: These options can be modified later in the grading page for individual submissions."})]})})]}),d.isGroupAssignment&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-group-set",className:"block text-sm font-medium text-gray-700",children:"Group Set"}),n.jsxs("select",{id:"assignment-group-set",name:"groupSetId",value:d.groupSetId||"",onChange:G=>h({...d,groupSetId:G.target.value||null}),required:d.isGroupAssignment,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"Select a group set"}),l.map(G=>n.jsxs("option",{value:G._id,children:[G.name," ",G.allowSelfSignup?"(Self-signup enabled)":""]},G._id))]}),d.isGroupAssignment&&!d.groupSetId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a group set for the group assignment"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-available-from",className:"block text-sm font-medium text-gray-700",children:"Available From"}),n.jsx("input",{type:"datetime-local",id:"assignment-available-from",name:"availableFrom",value:d.availableFrom,onChange:G=>h({...d,availableFrom:G.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-due-date",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),n.jsx("input",{type:"datetime-local",id:"assignment-due-date",name:"dueDate",value:d.dueDate,onChange:G=>h({...d,dueDate:G.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"button",onClick:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Save & Continue"})})]}),D===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("div",{className:"mt-1",children:n.jsx("textarea",{id:"assignment-description",name:"description",value:d.description,onChange:G=>h({...d,description:G.target.value}),rows:6,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter a detailed description of the assignment..."})}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"allowStudentUploads",checked:d.allowStudentUploads,onChange:G=>h({...d,allowStudentUploads:G.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"allowStudentUploads",className:"ml-2 block text-sm text-gray-900",children:"Allow students to upload files"})]}),t&&n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Debug: allowStudentUploads = ",String(d.allowStudentUploads)]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{htmlFor:"displayModeSingle",className:"block text-sm font-medium text-gray-700",children:"Assignment Display Mode"}),n.jsxs("div",{className:"mt-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"displayModeSingle",name:"displayMode",value:"single",checked:d.displayMode==="single",onChange:G=>h({...d,displayMode:G.target.value}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"displayModeSingle",className:"ml-2 block text-sm text-gray-900",children:"Single Question View (one question at a time)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"radio",id:"displayModeScrollable",name:"displayMode",value:"scrollable",checked:d.displayMode==="scrollable",onChange:G=>h({...d,displayMode:G.target.value}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"displayModeScrollable",className:"ml-2 block text-sm text-gray-900",children:"Scrollable View (all questions at once)"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>m(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:f?"Edit":"Preview"}),n.jsx("button",{type:"button",onClick:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Continue"})]})]})]}),D===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Points"}),n.jsx("div",{className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm p-2",children:Number.isFinite(d.totalPoints)?d.totalPoints:0})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Questions"}),n.jsxs("div",{className:"space-x-2",children:[n.jsxs("button",{type:"button",onClick:()=>H("text"),disabled:t&&z,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&z?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-indigo-600 hover:bg-indigo-700"}`,title:t&&z?"Cannot add questions after students have submitted":"",children:[n.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Add Text Question"]}),n.jsxs("button",{type:"button",onClick:()=>H("multiple-choice"),disabled:t&&z,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&z?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-green-600 hover:bg-green-700"}`,title:t&&z?"Cannot add questions after students have submitted":"",children:[n.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Add Multiple Choice"]}),n.jsxs("button",{type:"button",onClick:()=>H("matching"),disabled:t&&z,className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md ${t&&z?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"}`,title:t&&z?"Cannot add questions after students have submitted":"",children:[n.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Add Matching Question"]})]})]}),d.questions.map((G,ae)=>{var X;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",ae+1]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",G.type==="text"?"Text Entry":G.type==="multiple-choice"?"Multiple Choice":"Matching",")"]})]}),n.jsx("input",{type:"text",id:`question-text-${ae}`,name:`question-text-${ae}`,value:G.text,onChange:V=>L(ae,"text",V.target.value),placeholder:"Enter question text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsx("input",{type:"number",id:`question-points-${ae}`,name:`question-points-${ae}`,value:G.points,onChange:V=>L(ae,"points",parseInt(V.target.value)||0),onClick:V=>{G.points===0&&(V.currentTarget.value="")},min:"0",className:"w-20 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),n.jsx("span",{className:"text-sm text-gray-500",children:"points"}),n.jsx("button",{type:"button",onClick:()=>re(ae),disabled:t&&z,className:`${t&&z?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,title:t&&z?"Cannot remove questions after students have submitted":"",children:n.jsx(ls,{className:"h-4 w-4"})}),ae>0&&n.jsx("button",{type:"button",onClick:()=>ee(ae,"up"),className:"text-gray-600 hover:text-gray-800",children:n.jsx(wO,{className:"h-4 w-4"})}),ae<d.questions.length-1&&n.jsx("button",{type:"button",onClick:()=>ee(ae,"down"),className:"text-gray-600 hover:text-gray-800",children:n.jsx(xO,{className:"h-4 w-4"})})]})]}),G.type==="multiple-choice"&&n.jsxs("div",{className:"ml-4 space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Options:"}),(X=G.options)==null?void 0:X.map((V,ie)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${ae}-correct`,checked:V.isCorrect,onChange:()=>{var ve;const be=[...d.questions];be[ae].options=(ve=be[ae].options)==null?void 0:ve.map((Pe,He)=>({...Pe,isCorrect:He===ie})),h({...d,questions:be})},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("input",{type:"text",value:V.text,onChange:be=>{const ve=[...d.questions];ve[ae].options&&(ve[ae].options[ie].text=be.target.value,h({...d,questions:ve}))},className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:()=>W(ae,ie),className:"text-red-600 hover:text-red-800",children:n.jsx(ls,{className:"h-4 w-4"})})]},ie)),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",id:`new-option-${ae}`,name:`new-option-${ae}`,value:v.text,onChange:V=>b({...v,text:V.target.value}),placeholder:"Add new option",className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.jsx("button",{type:"button",onClick:()=>M(ae),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Option"})]})]}),G.type==="matching"&&n.jsxs("div",{className:"mt-2 border rounded p-3 bg-gray-50",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Matching Pairs"}),G.leftItems&&G.leftItems.map((V,ie)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:V.text,onChange:be=>{const ve=[...G.leftItems||[]];ve[ie].text=be.target.value,L(ae,"leftItems",ve)},placeholder:"Prompt (e.g., Red)"}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:G.rightItems&&G.rightItems[ie]?G.rightItems[ie].text:"",onChange:be=>{const ve=[...G.rightItems||[]];ve[ie]||(ve[ie]={id:V.id,text:""}),ve[ie].text=be.target.value,ve[ie].id=V.id,L(ae,"rightItems",ve)},placeholder:"Correct Match (e.g., Green)"}),n.jsx("button",{type:"button",className:"ml-2 text-red-600",onClick:()=>{const be=(G.leftItems||[]).filter((Pe,He)=>He!==ie),ve=(G.rightItems||[]).filter((Pe,He)=>He!==ie);L(ae,"leftItems",be),L(ae,"rightItems",ve)},children:"Remove"})]},V.id)),n.jsx("button",{type:"button",className:"mt-2 px-2 py-1 bg-blue-100 rounded",onClick:()=>{const V=Math.random().toString(36).substr(2,9);L(ae,"leftItems",[...G.leftItems||[],{id:V,text:""}]),L(ae,"rightItems",[...G.rightItems||[],{id:V,text:""}])},children:"Add Pair"}),n.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Distractor Options (Right Side Only)"}),(G.rightItems||[]).slice((G.leftItems||[]).length).map((V,ie)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("input",{type:"text",className:"border p-1 rounded w-40",value:V.text,onChange:be=>{const ve=G.leftItems?G.leftItems.length:0,Pe=[...G.rightItems||[]];Pe[ve+ie].text=be.target.value,L(ae,"rightItems",Pe)},placeholder:"Distractor (e.g., Aqua)"}),n.jsx("button",{type:"button",className:"ml-2 text-red-600",onClick:()=>{const be=G.leftItems?G.leftItems.length:0,ve=[...G.rightItems||[]];ve.splice(be+ie,1),L(ae,"rightItems",ve)},children:"Remove"})]},V.id||ie)),n.jsx("button",{type:"button",className:"mt-2 px-2 py-1 bg-blue-100 rounded",onClick:()=>{G.leftItems&&G.leftItems.length,L(ae,"rightItems",[...G.rightItems||[],{id:Math.random().toString(36).substr(2,9),text:""}])},children:"Add Distractor"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Preview:"}),(G.leftItems||[]).map((V,ie)=>n.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[n.jsx("span",{className:"w-40",children:V.text||n.jsx("em",{children:"Prompt"})}),n.jsxs("select",{className:"border p-1 rounded w-40",disabled:!0,children:[n.jsx("option",{children:"[ Choose ]"}),gS((G.rightItems||[]).map(be=>be.text)).map((be,ve)=>n.jsx("option",{children:be},ve))]})]},V.id))]})]})]},G.id)})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"assignment-attachments",className:"block text-sm font-medium text-gray-700",children:"Attachments"}),n.jsx("input",{type:"file",id:"assignment-attachments",name:"attachments",multiple:!0,onChange:G=>{G.target.files&&h({...d,attachments:[...d.attachments,...Array.from(G.target.files)]})},className:"mt-1 block w-full"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>m(!f),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:f?"Edit":"Preview"}),n.jsx("button",{type:"button",onClick:()=>s(`/modules/${d.moduleId}/assignments`),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:t?"Update Assignment":"Create Assignment"})]})]})]})]}),f&&n.jsxs("div",{className:"mt-8 p-6 border rounded-lg bg-gray-50",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:d.title}),n.jsx("div",{className:"prose max-w-none",children:n.jsx(_o,{children:d.description})}),n.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-500",children:[n.jsxs("p",{children:["Total Points: ",d.totalPoints]}),n.jsxs("p",{children:["Available From: ",new Date(d.availableFrom).toLocaleString()]}),n.jsxs("p",{children:["Due: ",new Date(d.dueDate).toLocaleString()]}),d.allowStudentUploads&&n.jsx("p",{className:"text-blue-600 font-medium",children:"✓ Students can upload files"}),n.jsxs("p",{children:["Display Mode: ",d.displayMode==="single"?"Single Question View":"Scrollable View"]})]}),n.jsx("div",{className:"mt-6 space-y-6",children:d.questions.map((G,ae)=>n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium",children:["Question ",ae+1," (",G.points," points)"]}),n.jsx("p",{className:"mt-1",children:G.text})]}),n.jsx("span",{className:"text-sm text-gray-500",children:G.type==="text"?"Text Entry":G.type==="multiple-choice"?"Multiple Choice":"Matching"})]}),G.type==="multiple-choice"&&G.options&&n.jsx("div",{className:"mt-4 space-y-2",children:G.options.map((X,V)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${ae}`,checked:X.isCorrect,readOnly:!0,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsxs("span",{className:X.isCorrect?"text-green-600 font-medium":"",children:[X.text,X.isCorrect&&" (Correct)"]})]},V))}),G.type==="text"&&n.jsx("div",{className:"mt-4",children:n.jsx("textarea",{className:"w-full h-32 p-2 border rounded-md bg-gray-50",placeholder:"Student's answer will appear here",readOnly:!0})}),G.type==="matching"&&n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Matching Pairs:"}),(G.leftItems||[]).map((X,V)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"w-32",children:X.text||n.jsx("em",{children:"Prompt"})}),n.jsx("span",{className:"mx-2",children:"→"}),n.jsxs("select",{className:"border p-1 rounded w-32",disabled:!0,children:[n.jsx("option",{children:"[ Choose ]"}),gS((G.rightItems||[]).map(ie=>ie.text)).map((ie,be)=>n.jsx("option",{children:ie},be))]})]},X.id))]})]},G.id))}),d.isGroupAssignment&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Group Assignment"}),n.jsxs("p",{className:"mt-1 text-sm text-blue-600",children:["This is a group assignment. Students will submit as a group.",d.groupSetId&&n.jsxs("span",{children:[" ","Using group set: ",(Se=l.find(G=>G._id===d.groupSetId))==null?void 0:Se.name]})]})]})]})]})})};function gS(e){return e.slice().sort(()=>Math.random()-.5)}const xS="http://localhost:5000",EW=()=>{const{moduleId:e}=br(),t=Lt(),{user:r}=Et(),{updateModule:s}=Ri(),[a,i]=j.useState(!0),[l,u]=j.useState(null),[d,h]=j.useState({title:"",description:""}),[f,m]=j.useState(!1);j.useEffect(()=>{(async()=>{var v,b;if(e)try{const w=localStorage.getItem("token"),C=await me.get(`${xS}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${w}`}});if(C.data.success){const N=C.data.data;h({title:N.title,description:N.description||""})}else u("Failed to load module data")}catch(w){console.error("Error fetching module:",w),u(((b=(v=w.response)==null?void 0:v.data)==null?void 0:b.message)||"Error loading module")}finally{i(!1)}})()},[e]);const g=async x=>{var v,b;if(x.preventDefault(),!!e){m(!0),u(null);try{const w=localStorage.getItem("token"),C=await me.get(`${xS}/api/modules/view/${e}`,{headers:{Authorization:`Bearer ${w}`}});if(!C.data.success)throw new Error("Failed to get module data");const N=C.data.data.course._id||C.data.data.course;await s(e,d,N),t(-1)}catch(w){console.error("Error updating module:",w),u(((b=(v=w.response)==null?void 0:v.data)==null?void 0:b.message)||"Error updating module")}finally{m(!1)}}};return a?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):l?n.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:l})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit modules."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):n.jsx("div",{className:"max-w-2xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Module"}),n.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:d.title,onChange:x=>h({...d,title:x.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",value:d.description,onChange:x=>h({...d,description:x.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:f?"Saving...":"Save Changes"})]})]})]})})},yS="http://localhost:5000",DW=()=>{const{pageId:e}=br(),t=Lt(),{user:r}=Et(),[s,a]=j.useState(!0),[i,l]=j.useState(null),[u,d]=j.useState({title:"",content:""}),[h,f]=j.useState(!1),[m,g]=j.useState(!1);j.useEffect(()=>{(async()=>{var b,w;if(e)try{const C=localStorage.getItem("token"),N=await me.get(`${yS}/api/pages/view/${e}`,{headers:{Authorization:`Bearer ${C}`}});if(N.data.success){const E=N.data.data;d({title:E.title,content:E.content||""})}else l("Failed to load page data")}catch(C){console.error("Error fetching page:",C),l(((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.message)||"Error loading page")}finally{a(!1)}})()},[e]);const x=async v=>{var b,w;if(v.preventDefault(),!!e){f(!0),l(null);try{const C=localStorage.getItem("token"),N=new FormData;N.append("title",u.title),N.append("content",u.content);const E=await me.put(`${yS}/api/pages/${e}`,N,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"multipart/form-data"}});if(E.data.success)t(-1);else throw new Error(E.data.message||"Failed to update page")}catch(C){console.error("Error updating page:",C),l(((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.message)||"Error updating page")}finally{f(!1)}}};return s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:i})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit pages."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Page"}),n.jsx("button",{type:"button",onClick:()=>g(!m),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:m?"Edit":"Preview"})]}),m?n.jsxs("div",{className:"prose max-w-none",children:[n.jsx("h1",{children:u.title}),n.jsx(_o,{children:u.content})]}):n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),n.jsx("input",{type:"text",id:"title",value:u.title,onChange:v=>d({...u,title:v.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content (Markdown supported)"}),n.jsx("textarea",{id:"content",value:u.content,onChange:v=>d({...u,content:v.target.value}),rows:15,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-mono"})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:h?"Saving...":"Save Changes"})]})]})]})})},AW="http://localhost:5000",TW=()=>{const{id:e}=br(),t=Lt(),{user:r}=Et(),[s,a]=j.useState(!0),[i,l]=j.useState(null),[u,d]=j.useState(null),[h,f]=j.useState(null);return j.useEffect(()=>{(async()=>{var g,x;if(e)try{const v=localStorage.getItem("token"),b=await me.get(`${AW}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${v}`}});if(b.data){const w=b.data;if(d(w),w.module){const C=typeof w.module=="string"?w.module:w.module._id;f(C)}}else l("Failed to load assignment data")}catch(v){console.error("Error fetching assignment:",v),l(((x=(g=v.response)==null?void 0:g.data)==null?void 0:x.message)||"Error loading assignment")}finally{a(!1)}})()},[e]),s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:i})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):!r||r.role!=="teacher"&&r.role!=="admin"?n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Access Denied: "}),n.jsx("span",{className:"block sm:inline",children:"You don't have permission to edit assignments."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]}):h?n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Assignment"}),n.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Editing: ",u==null?void 0:u.title]})]}),n.jsx(lT,{moduleId:h,editMode:!0,assignmentData:u})]})}):n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error: "}),n.jsx("span",{className:"block sm:inline",children:"Could not determine module for this assignment."})]}),n.jsx("button",{onClick:()=>t(-1),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Go Back"})]})},PW=()=>{var oe,Ne;const{id:e}=br(),t=Lt(),[r,s]=j.useState(null),[a,i]=j.useState(null),[l,u]=j.useState(!0),[d,h]=j.useState(""),[f,m]=j.useState(null),[g,x]=j.useState({}),[v,b]=j.useState(!1),[w,C]=j.useState(null),[N,E]=j.useState(!1),[S,_]=j.useState(0),[D,T]=j.useState(new Set),[P,O]=j.useState(new Set),[F,$]=j.useState(null),[z,q]=j.useState(!1),[H,re]=j.useState(null),[ee,L]=j.useState([]),[M,W]=j.useState(!1),[R,U]=j.useState(!0),[Z,B]=j.useState(!1),[Ce,Se]=j.useState({totalStudents:0,submittedCount:0,averageGrade:0,averageTime:0,questionStats:[],engagementStats:{averageTimeSpent:0,averageAttemptsPerStudent:0,peakHour:0,peakDay:"Monday",lateSubmissions:0,totalSubmissions:0}}),[G,ae]=j.useState(!1),X=(f==null?void 0:f.role)==="teacher"||(f==null?void 0:f.role)==="admin";j.useEffect(()=>{const pe=JSON.parse(localStorage.getItem("user"));m(pe);const K=setTimeout(()=>{pe||(h("User not found. Please log in again."),u(!1))},2e3);return()=>clearTimeout(K)},[]),j.useEffect(()=>{i(null)},[f,e]);const V=async()=>{var pe;if(!(!X||!(r!=null&&r._id)))try{ae(!0);const K=localStorage.getItem("token"),se=await me.get(`/api/assignments/${r._id}/stats`,{headers:{Authorization:`Bearer ${K}`}});se.data.success&&Se(se.data.stats)}catch(K){console.error("Error fetching submission stats:",K);try{const _e=(await me.get(`/api/submissions/assignment/${r._id}`,{headers:{Authorization:`Bearer ${token}`}})).data||[],Ke={totalStudents:_e.length,submittedCount:_e.filter(Ve=>Ve.submittedAt).length,averageGrade:_e.length>0?_e.reduce((Ve,tt)=>Ve+(tt.grade||0),0)/_e.length:0,averageTime:r.isTimedQuiz&&_e.length>0?_e.reduce((Ve,tt)=>Ve+(tt.timeSpent||0),0)/_e.length:0,questionStats:((pe=r.questions)==null?void 0:pe.map((Ve,tt)=>({questionIndex:tt,correctCount:0,incorrectCount:0,averagePoints:0})))||[]};Se(Ke)}catch(se){console.error("Error calculating basic stats:",se),Se({totalStudents:0,submittedCount:0,averageGrade:0,averageTime:0,questionStats:[]})}}finally{ae(!1)}};j.useEffect(()=>{f&&(async()=>{var K;try{const se=localStorage.getItem("token"),_e=await me.get(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${se}`}});if(s(_e.data),_e.data.questions){const Ke={};_e.data.questions.forEach((Ve,tt)=>{Ve.type==="matching"?Ke[tt]={}:Ke[tt]=""}),x(Ke)}if(_e.data.isGroupAssignment&&_e.data.groupSet&&(f==null?void 0:f.role)==="student"){const Ke=f._id,tt=(await me.get(`/api/groups/sets/${_e.data.groupSet}/groups`,{headers:{Authorization:`Bearer ${se}`}})).data.find(it=>it.members.some(qe=>String(qe._id)===String(Ke)));C(tt?tt._id:null)}if((f==null?void 0:f.role)==="student")try{const Ke=await me.get(`/api/submissions/student/${e}`,{headers:{Authorization:`Bearer ${se}`}});if(i(Ke.data),(K=Ke.data)!=null&&K.answers){const Ve={};Object.keys(Ke.data.answers).forEach(tt=>{const it=Ke.data.answers[tt];try{Ve[tt]=JSON.parse(it)}catch{Ve[tt]=it}}),x(Ve)}}catch{if(i(null),_e.data.questions){const Ve={};_e.data.questions.forEach((tt,it)=>{tt.type==="matching"?Ve[it]={}:Ve[it]=""}),x(Ve)}}else if((f==null?void 0:f.role)==="teacher"||(f==null?void 0:f.role)==="admin")try{const Ke=await me.get(`/api/submissions/assignment/${e}`,{headers:{Authorization:`Bearer ${se}`}});i(Ke.data[0]||null)}catch{i(null)}u(!1)}catch{h("Error fetching assignment details"),u(!1)}})()},[e,f]),j.useEffect(()=>{r&&X&&V()},[r,X]),j.useEffect(()=>{if(r!=null&&r.isTimedQuiz&&(r!=null&&r.quizTimeLimit)&&(f==null?void 0:f.role)==="student"&&!a){const pe=`quiz_start_${e}_${f._id}`,K=localStorage.getItem(pe);if(K){const se=new Date(K),Ke=Math.floor((new Date-se)/1e3),Ve=r.quizTimeLimit*60;Ke<Ve?(q(!0),re(se)):localStorage.removeItem(pe)}}},[r,f,a,e]),j.useEffect(()=>{if(z&&H&&(r!=null&&r.isTimedQuiz)&&(r!=null&&r.quizTimeLimit)&&!a&&(f==null?void 0:f.role)==="student"){const pe=setInterval(()=>{const se=Math.floor((new Date-H)/1e3),Ke=r.quizTimeLimit*60-se;Ke<=0?(clearInterval(pe),$(0)):$(Ke)},1e3);return()=>clearInterval(pe)}},[z,H,r,e,a,f]);const ie=()=>{if(r!=null&&r.isTimedQuiz&&(r!=null&&r.quizTimeLimit)){const pe=new Date;re(pe),q(!0);const K=`quiz_start_${e}_${f._id}`;localStorage.setItem(K,pe.toISOString()),$(r.quizTimeLimit)}},be=async pe=>{const K=Array.from(pe.target.files);if(K.length!==0){W(!0);try{const se=new FormData;K.forEach(tt=>{se.append("files",tt)});const _e=localStorage.getItem("token"),Ve=(await me.post("/api/upload",se,{headers:{Authorization:`Bearer ${_e}`,"Content-Type":"multipart/form-data"}})).data.files.map(tt=>({name:tt.originalname,url:tt.path,size:tt.size}));L(tt=>[...tt,...Ve])}catch(se){console.error("Error uploading files:",se),h("Error uploading files. Please try again.")}finally{W(!1)}}},ve=pe=>{L(K=>K.filter((se,_e)=>_e!==pe))},Pe=pe=>{if(!pe||pe<=0)return"0 Hours, 0 Minutes, 0 Seconds";const K=Math.floor(pe/3600),se=Math.floor(pe%3600/60),_e=pe%60;return`${K} Hour${K!==1?"s":""}, ${se} Minute${se!==1?"s":""}, ${_e} Second${_e!==1?"s":""}`},He=(pe,K)=>{x(_e=>({..._e,[pe]:K}));const se=typeof K=="object"?Object.keys(K).length>0&&Object.values(K).some(_e=>_e&&_e.trim()!==""):K&&K.trim()!=="";T(se?_e=>new Set([..._e,pe]):_e=>{const Ke=new Set(_e);return Ke.delete(pe),Ke})},Je=pe=>{_(pe)},le=()=>{r!=null&&r.questions&&S<r.questions.length-1&&_(S+1)},fe=()=>{S>0&&_(S-1)},Ae=pe=>{O(K=>{const se=new Set(K);return se.has(pe)?se.delete(pe):se.add(pe),se})},Ge=async()=>{var pe,K,se,_e;if(!(!f||f.role!=="student")){if(r!=null&&r.isGroupAssignment&&!w){h("You are not a member of any group for this group assignment.");return}b(!0);try{const Ke={};Object.keys(g).forEach(qe=>{const dt=g[qe];dt&&typeof dt=="object"?Ke[qe]=JSON.stringify(dt):Ke[qe]=dt});const Ve=localStorage.getItem("token"),tt={assignment:e,answers:Ke,submittedAt:new Date,uploadedFiles:ee};r!=null&&r.isGroupAssignment&&(tt.groupId=w);const it=await me.post("/api/submissions",tt,{headers:{Authorization:`Bearer ${Ve}`}});i(it.data),h(""),window.dispatchEvent(new Event("assignmentSubmitted"))}catch(Ke){console.error("[Frontend] Submit error:",(pe=Ke.response)==null?void 0:pe.status,(K=Ke.response)==null?void 0:K.data),h(((_e=(se=Ke.response)==null?void 0:se.data)==null?void 0:_e.message)||"Error submitting assignment")}finally{b(!1)}}},Ye=async()=>{var pe,K;if(!(!f||f.role!=="teacher"&&f.role!=="admin")&&window.confirm("Are you sure you want to delete this assignment?"))try{const se=localStorage.getItem("token");await me.delete(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${se}`}}),t(-1)}catch(se){h(((K=(pe=se.response)==null?void 0:pe.data)==null?void 0:K.message)||"Error deleting assignment")}},ye=async()=>{var pe,K;if(!(!f||f.role!=="teacher"&&f.role!=="admin")){E(!0);try{const se=localStorage.getItem("token"),_e=await me.patch(`${ke}/api/assignments/${e}/publish`,{},{headers:{Authorization:`Bearer ${se}`}});s(Ke=>({...Ke,published:_e.data.published}))}catch(se){console.error("Error toggling assignment publish:",se),h(((K=(pe=se.response)==null?void 0:pe.data)==null?void 0:K.message)||"Error toggling publish status")}finally{E(!1)}}};if(l)return n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(d)return n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d});if(!r)return n.jsx("div",{children:"Assignment not found"});const he=(f==null?void 0:f.role)==="student",ne=X&&((oe=r==null?void 0:r.createdBy)==null?void 0:oe._id)===(f==null?void 0:f._id),Te=new Date>new Date(r==null?void 0:r.dueDate),Be=X;return n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Due: ",Ut(new Date(r.dueDate),"PPp"),a&&n.jsxs("span",{className:"ml-4 text-green-600",children:["Submitted: ",Ut(new Date(a.submittedAt),"PPp")]})]}),he&&a&&typeof a.feedback=="string"&&a.feedback.trim()!==""&&n.jsxs("div",{className:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[n.jsx("div",{className:"text-yellow-800 font-semibold mb-1",children:"Instructor Feedback"}),n.jsx("div",{className:"text-yellow-900 whitespace-pre-line",children:a.feedback})]}),he&&a&&a.autoGraded&&n.jsxs("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:[n.jsx("div",{className:"text-blue-800 font-semibold mb-1",children:a.teacherApproved?"Grading Complete":"Auto-Graded"}),n.jsx("div",{className:"text-blue-900",children:a.teacherApproved?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:["Final Grade: ",(()=>{const pe=Number(a.finalGrade||a.grade);return Number.isInteger(pe)?pe.toString():pe.toFixed(2)})()," points"]}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Multiple choice questions were auto-graded. Other questions were graded by your instructor."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:["Auto-Grade: ",(()=>{const pe=Number(a.autoGrade);return Number.isInteger(pe)?pe.toString():pe.toFixed(2)})()," points"]}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Multiple choice questions have been auto-graded. Your instructor will review and approve the final grade."})]})})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[he&&!a&&!Te&&(!r.isTimedQuiz||z)&&n.jsx("button",{onClick:Ge,disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:v?"Submitting...":"Submit Assignment"}),ne&&n.jsx("button",{onClick:Ye,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]}),r.isTimedQuiz&&r.quizTimeLimit&&he&&!a&&!Te&&!z&&n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Timed Quiz"}),n.jsxs("p",{className:"text-blue-700 mb-4",children:["This quiz has a time limit of ",r.quizTimeLimit," minutes. Once you start, the timer will begin and cannot be paused."]}),n.jsx("button",{onClick:ie,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Start Quiz"})]})}),((Ne=r.attachments)==null?void 0:Ne.length)>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Attachments"}),n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:r.attachments.map((pe,K)=>n.jsx("li",{className:"py-3",children:n.jsx("a",{href:pe,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-500",children:pe.split("/").pop()})},K))})]}),r.questions&&r.questions.length>0&&(()=>{const pe=!he||!a||Te||r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers||a.showStudentAnswers||r.showStudentAnswers);return n.jsxs("div",{className:"mt-8",children:[Be&&n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-blue-900",children:"Assignment Analytics"}),n.jsx("p",{className:"text-blue-700",children:"Real-time statistics and performance metrics"})]})]}),G&&n.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),n.jsx("span",{children:"Loading stats..."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Submissions"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[Ce.submittedCount,"/",Ce.totalStudents]}),n.jsx("p",{className:"text-xs text-gray-500",children:Ce.totalStudents>0?`${(Ce.submittedCount/Ce.totalStudents*100).toFixed(1)}% submitted`:"0% submitted"})]}),n.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-600",children:"Submitted"}),n.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ce.submittedCount}),n.jsx("p",{className:"text-xs text-gray-500",children:Ce.totalStudents>0?`${(Ce.submittedCount/Ce.totalStudents*100).toFixed(1)}% completion`:"0% completion"})]}),n.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Average Grade"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[Ce.averageGrade>0?Ce.averageGrade.toFixed(1):"0"," pts"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[r.questions.reduce((K,se)=>K+(se.points||0),0)," total possible"]})]}),n.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-indigo-600",children:"Avg. Time Spent"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-900",children:Ce.engagementStats.averageTimeSpent>0?`${Math.floor(Ce.engagementStats.averageTimeSpent/60)}:${(Ce.engagementStats.averageTimeSpent%60).toString().padStart(2,"0")}`:"0:00"}),n.jsx("p",{className:"text-xs text-gray-500",children:r.isTimedQuiz?"Timed quiz":"Not timed"})]}),n.jsx("svg",{className:"w-8 h-8 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-teal-600",children:"Avg. Attempts"}),n.jsx("p",{className:"text-2xl font-bold text-teal-900",children:Ce.engagementStats.averageAttemptsPerStudent.toFixed(1)}),n.jsx("p",{className:"text-xs text-gray-500",children:"per student"})]}),n.jsx("svg",{className:"w-8 h-8 text-teal-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-pink-600",children:"Peak Activity"}),n.jsx("p",{className:"text-2xl font-bold text-pink-900",children:Ce.engagementStats.peakDay}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Ce.engagementStats.peakHour,":00"]})]}),n.jsx("svg",{className:"w-8 h-8 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Assignment Info"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Questions:"}),n.jsx("span",{className:"font-medium",children:r.questions.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Points:"}),n.jsx("span",{className:"font-medium",children:r.questions.reduce((K,se)=>K+(se.points||0),0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Type:"}),n.jsx("span",{className:"font-medium",children:r.group||"Assignment"})]}),r.isTimedQuiz&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Time Limit:"}),n.jsxs("span",{className:"font-medium",children:[r.quizTimeLimit," minutes"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Submission Status"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Published:"}),n.jsx("span",{className:`font-medium ${r.published?"text-green-600":"text-red-600"}`,children:r.published?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Due Date:"}),n.jsx("span",{className:"font-medium",children:Ut(new Date(r.dueDate),"MMM d, yyyy")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Past Due:"}),n.jsx("span",{className:`font-medium ${Te?"text-red-600":"text-green-600"}`,children:Te?"Yes":"No"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>t(`/assignments/${e}/grade`),className:"w-full text-left px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 rounded-md transition-colors flex items-center space-x-2",children:[n.jsx(gn,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{children:"Grade Submissions"})]}),n.jsxs("button",{onClick:()=>t(`/assignments/${e}/edit`),className:"w-full text-left px-3 py-2 text-sm bg-green-50 hover:bg-green-100 rounded-md transition-colors flex items-center space-x-2",children:[n.jsx(Gc,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{children:"Edit Assignment"})]}),n.jsx("button",{onClick:ye,className:"w-full text-left px-3 py-2 text-sm bg-purple-50 hover:bg-purple-100 rounded-md transition-colors flex items-center space-x-2",children:r.published?n.jsxs(n.Fragment,{children:[n.jsx(So,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{children:"Unpublish"})]}):n.jsxs(n.Fragment,{children:[n.jsx(cc,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{children:"Publish"})]})})]})]})]})]})}),!Be&&(!r.isTimedQuiz||z||!he||a||Te)&&pe?r.displayMode==="single"&&he&&!a&&!Te?n.jsxs("div",{className:"flex gap-6",children:[n.jsx("div",{className:"flex-1",children:Z?n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-4",children:n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Upload Files"})})}),n.jsx("div",{className:"border-b border-gray-200 mb-4"}),n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:"You have completed all questions. You can now upload any additional files if needed."})}),r.allowStudentUploads&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"file",multiple:!0,onChange:be,disabled:M,className:"hidden",id:"file-upload-final"}),n.jsxs("label",{htmlFor:"file-upload-final",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer ${M?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),M?"Uploading...":"Upload File"]}),ee.length>0&&n.jsxs("button",{onClick:()=>document.getElementById("file-upload-final").click(),className:"inline-flex items-center px-4 py-2 border border-pink-500 rounded-md shadow-sm text-sm font-medium text-pink-600 bg-white hover:bg-pink-50",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another File"]})]})]}),ee.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Uploaded Files:"}),n.jsx("div",{className:"space-y-2",children:ee.map((K,se)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:K.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(K.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsx("button",{onClick:()=>ve(se),className:"text-red-600 hover:text-red-800",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},se))})]})]}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Questions"}),n.jsx("button",{onClick:Ge,disabled:v,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:v?"Submitting...":"Submit Assignment"})]})]}):n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Question ",S+1]}),n.jsx("button",{onClick:()=>Ae(S),className:`p-1 rounded border ${P.has(S)?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:P.has(S)?n.jsx(_a,{className:"h-3 w-3 fill-current"}):n.jsx(_a,{className:"h-3 w-3"})})]}),n.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[r.questions[S].points," pts"]})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-4"}),n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:r.questions[S].text})}),r.questions[S].type==="multiple-choice"&&r.questions[S].options&&n.jsx("div",{className:"divide-y divide-gray-200",children:r.questions[S].options.map((K,se)=>n.jsxs("div",{className:"relative py-2",children:[n.jsx("input",{type:"radio",id:`question-${S}-option-${se}`,name:`question-${S}`,value:K.text,checked:g[S]===K.text,onChange:_e=>He(S,_e.target.value),className:"sr-only"}),n.jsxs("label",{htmlFor:`question-${S}-option-${se}`,className:"flex items-center space-x-3 cursor-pointer",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${g[S]===K.text?"border-indigo-500 bg-indigo-500":"border-gray-300 bg-white"}`,children:g[S]===K.text&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),n.jsx("span",{className:"text-sm text-gray-900",children:K.text})]})]},se))}),r.questions[S].type==="text"&&n.jsx("div",{children:n.jsx("textarea",{id:`question-${S}-answer`,name:`question-${S}-answer`,className:"w-full h-40 p-4 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-900",value:g[S]||"",onChange:K=>He(S,K.target.value),placeholder:"Enter your answer here..."})}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsx("button",{onClick:fe,disabled:S===0,className:`px-4 py-2 border rounded-md text-sm font-medium ${S===0?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:"Previous"}),S<r.questions.length-1?n.jsx("button",{onClick:le,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Next"}):n.jsx("button",{onClick:()=>B(!0),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Continue to Upload Files"})]})]})}),n.jsxs("div",{className:"w-80 bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Questions"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.questions.map((K,se)=>n.jsxs("button",{onClick:()=>Je(se),className:`w-full flex items-center justify-between p-2 rounded-md text-sm ${S===se?"bg-indigo-100 text-indigo-700 border border-indigo-200":"hover:bg-gray-100"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[D.has(se)&&P.has(se)?n.jsxs("div",{className:"relative",children:[n.jsx(Bn,{className:"h-4 w-4 text-green-600"}),n.jsx(_a,{className:"h-3 w-3 text-yellow-500 absolute -top-1 -right-1"})]}):D.has(se)?n.jsx(Bn,{className:"h-4 w-4 text-green-600"}):P.has(se)?n.jsx(_a,{className:"h-4 w-4 text-yellow-600"}):n.jsx(kN,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Question ",se+1]})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[K.points," pts"]})]},se))})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[D.size," of ",r.questions.length," answered"]})]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${D.size/r.questions.length*100}%`}})})]}),r.isTimedQuiz&&n.jsxs("div",{className:"mt-4 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Time Remaining:"}),n.jsx("button",{onClick:()=>U(!R),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:R?"Hide":"Show"})]})}),R&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Attempt due: ",Ut(new Date(r.dueDate),"MMM d 'at' h:mm a")]}),z&&F!==null?n.jsx("div",{className:`text-sm font-medium ${F<=300?"text-red-600":"text-gray-700"}`,children:Pe(F)}):n.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[r.quizTimeLimit," minutes"]}),!z&&n.jsx("button",{onClick:ie,className:"mt-2 w-full bg-indigo-600 text-white text-sm py-2 px-3 rounded hover:bg-indigo-700",children:"Start Quiz"})]})]})]})]}):n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Questions"}),n.jsx("div",{className:"space-y-6",children:r.questions.map((K,se)=>{var tt;let _e=!1,Ke=!1;if(a&&r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers)&&(K.type==="multiple-choice"||K.type==="matching")){Ke=!0;const it=g[se];if(K.type==="multiple-choice"&&K.options){const qe=K.options.find(dt=>dt.isCorrect);_e=it===(qe==null?void 0:qe.text)}else if(K.type==="matching"&&K.leftItems&&K.rightItems&&it&&typeof it=="object"){let qe=0,dt=0;for(let yt=0;yt<K.leftItems.length;yt++){const It=K.leftItems[yt],Xt=it[yt],Kt=K.rightItems.find(Jt=>Jt.id===It.id);Kt&&Xt===Kt.text&&qe++,dt++}_e=qe===dt&&dt>0}}Be&&K.type==="multiple-choice"&&K.options&&((tt=K.options.find(it=>it.isCorrect))==null||tt.text);const Ve=a&&r.group==="Quizzes"&&(a.showCorrectAnswers||r.showCorrectAnswers);return n.jsxs("div",{className:`bg-white border-2 rounded-lg p-6 shadow-sm ${Be?"border-blue-400 bg-blue-50 shadow-blue-100":(()=>{var it;if(a&&a.autoGraded&&(K.type==="multiple-choice"||K.type==="matching")){if(K.type==="multiple-choice"){const qe=g[se],dt=K.options.find(It=>It.isCorrect);return String(qe)===String(dt==null?void 0:dt.text)?"border-green-500":"border-yellow-500"}else if(K.type==="matching"){const qe=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(se.toString()):(it=a.autoQuestionGrades)==null?void 0:it[se.toString()],dt=K.points||0,yt=qe/dt;return yt===1?"border-green-500":yt===0?"border-red-500":"border-yellow-500"}}return Ve&&Ke?_e?"border-green-500":"border-yellow-500":"border-gray-200"})()}`,children:[n.jsx("div",{className:`rounded-lg p-3 mb-3 ${Be?"bg-blue-100":"bg-gray-100"}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("h4",{className:"text-base font-semibold text-gray-900",children:["Question ",se+1]}),Be&&n.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-500 text-white rounded-full font-bold",children:"TEACHER PREVIEW"}),he&&!a&&!Te&&n.jsx("button",{onClick:()=>Ae(se),className:`p-1 rounded border ${P.has(se)?"bg-yellow-100 border-yellow-300 text-yellow-700":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:P.has(se)?n.jsx(_a,{className:"h-3 w-3 fill-current"}):n.jsx(_a,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"flex items-center space-x-2",children:a&&a.autoGraded&&(K.type==="multiple-choice"||K.type==="matching")?(()=>{var qe;const it=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(se.toString()):(qe=a.autoQuestionGrades)==null?void 0:qe[se.toString()];return n.jsx("span",{className:"text-base font-semibold text-gray-900",children:(()=>{const dt=Number(it||0),yt=K.points,It=Number.isInteger(dt)?dt:dt.toFixed(2),Xt=Number.isInteger(yt)?yt:yt.toFixed(2);return`${It} / ${Xt} pts`})()})})():n.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[K.points," pts"]})})]})}),n.jsx("div",{className:"border-b border-gray-200 mb-3"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-lg text-gray-900 leading-relaxed",children:K.text}),K.type==="multiple-choice"&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the correct answer."})]}),K.type==="multiple-choice"&&K.options&&n.jsxs("div",{children:[a&&a.autoGraded&&n.jsxs("div",{className:`mb-4 p-3 rounded-lg ${(()=>{const it=g[se],qe=K.options.find(yt=>yt.isCorrect);return String(it)===String(qe==null?void 0:qe.text)?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"})()}`,children:[n.jsx("div",{className:"text-sm text-blue-800 font-medium mb-2",children:"Auto-Graded Results"}),(()=>{var Xt;const it=g[se],qe=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(se.toString()):(Xt=a.autoQuestionGrades)==null?void 0:Xt[se.toString()],dt=K.points||0,yt=K.options.find(Kt=>Kt.isCorrect),It=String(it)===String(yt==null?void 0:yt.text);return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const Kt=Number(qe||0),Jt=dt,lr=Number.isInteger(Kt)?Kt:Kt.toFixed(2),Zt=Number.isInteger(Jt)?Jt:Jt.toFixed(2);return`${lr} / ${Zt} pts`})()}),n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Student Answer:"}),n.jsx("div",{className:"text-sm text-gray-900 mb-2",children:it||"No answer"}),n.jsx("div",{className:`text-sm ${It?"text-green-600":"text-red-600"}`,children:It?"Correct!":`Incorrect. Correct answer: ${(yt==null?void 0:yt.text)||"Unknown"}`})]})})()]}),(!a||!a.autoGraded)&&n.jsx("div",{className:"divide-y divide-gray-200",children:K.options.map((it,qe)=>n.jsxs("div",{className:"relative py-2",children:[n.jsx("input",{type:"radio",id:`question-${se}-option-${qe}`,name:`question-${se}`,value:it.text,checked:g[se]===it.text,onChange:dt=>!a&&he&&He(se,dt.target.value),disabled:!!a||!he||Te||Be,className:"sr-only"}),n.jsxs("label",{htmlFor:`question-${se}-option-${qe}`,className:`flex items-center space-x-3 cursor-pointer ${a||!he||Te||Be?"opacity-60 cursor-not-allowed":""}`,children:[n.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${g[se]===it.text?"border-indigo-500 bg-indigo-500":"border-gray-300 bg-white"}`,children:g[se]===it.text&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),n.jsx("span",{className:"text-sm text-gray-900",children:it.text}),Be&&it.isCorrect&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Correct Answer"})]})]},qe))})]}),K.type==="text"&&n.jsx("div",{children:n.jsx("textarea",{id:`question-${se}-answer`,name:`question-${se}-answer`,className:"w-full h-32 p-4 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-900",value:g[se]||"",onChange:it=>!a&&he&&He(se,it.target.value),placeholder:he?"Enter your answer here":"Student's answer will appear here",disabled:!!a||!he||Te})}),K.type==="matching"&&K.leftItems&&K.rightItems&&n.jsxs("div",{className:"space-y-2",children:[a&&a.autoGraded&&n.jsxs("div",{className:`mb-4 p-3 rounded-lg ${(()=>{var yt;g[se];const it=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(se.toString()):(yt=a.autoQuestionGrades)==null?void 0:yt[se.toString()],qe=K.points||0,dt=it/qe;return dt===1?"bg-green-50 border border-green-200":dt>0?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"})()}`,children:[n.jsx("div",{className:"text-sm text-blue-800 font-medium mb-2",children:"Auto-Graded Results"}),(()=>{var yt;const it=g[se],qe=a.autoQuestionGrades instanceof Map?a.autoQuestionGrades.get(se.toString()):(yt=a.autoQuestionGrades)==null?void 0:yt[se.toString()],dt=K.points||0;return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const It=Number(qe||0),Xt=dt,Kt=Number.isInteger(It)?It:It.toFixed(2),Jt=Number.isInteger(Xt)?Xt:Xt.toFixed(2);return`${Kt} / ${Jt} pts`})()}),n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Student Answer:"}),K.leftItems.map((It,Xt)=>{const Kt=typeof it=="object"?it[Xt]:"",Jt=K.rightItems.find(Zt=>Zt.id===It.id),lr=Kt===((Jt==null?void 0:Jt.text)||"");return n.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${lr?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:It.text}),n.jsx("span",{className:"text-gray-500",children:"→"}),n.jsx("span",{className:"text-gray-900",children:Kt||"No answer"})]}),n.jsx("div",{className:"flex items-center space-x-2",children:lr?n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-xs",children:"Correct"})]}):n.jsxs("div",{className:"flex items-center text-red-600",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),n.jsx("span",{className:"text-xs",children:"Incorrect"})]})}),!lr&&Jt&&n.jsxs("div",{className:"text-xs text-gray-600",children:["Correct: ",Jt.text]})]},It.id)})]})})()]}),(!a||!a.autoGraded)&&K.leftItems.map((it,qe)=>{var Jt;const yt=(()=>{if(!K.rightItems||K.rightItems.length===0)return[];const lr=qe%K.rightItems.length,Zt=[...K.rightItems];for(let ms=0;ms<lr;ms++)Zt.push(Zt.shift());return Zt})(),It=g[se]||{},Xt=Object.values(It).filter(lr=>lr!==""),Kt=yt.filter(lr=>It[qe]===lr.text||!Xt.includes(lr.text));return n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[n.jsx("div",{className:"flex-1",children:n.jsx("span",{className:"font-medium text-gray-900 text-sm",children:it.text})}),n.jsx("div",{className:"flex items-center space-x-2 ml-2",children:n.jsxs("select",{id:`question-${se}-matching-${qe}`,value:((Jt=g[se])==null?void 0:Jt[qe])||"",onChange:lr=>{if(!a&&he&&!Te){const Zt={...g};Zt[se]||(Zt[se]={}),Zt[se][qe]=lr.target.value,He(se,Zt[se])}},disabled:!!a||!he||Te,className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white min-w-[120px]",children:[n.jsx("option",{value:"",children:"Choose..."}),Kt.map((lr,Zt)=>n.jsx("option",{value:lr.text,children:lr.text},Zt))]})})]},it.id)})]})]},K.id||K._id||se)})}),r.allowStudentUploads&&he&&!a&&!Te&&n.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Files"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"file",multiple:!0,onChange:be,disabled:M,className:"hidden",id:"file-upload-scrollable"}),n.jsxs("label",{htmlFor:"file-upload-scrollable",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer ${M?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),M?"Uploading...":"Upload File"]}),ee.length>0&&n.jsxs("button",{onClick:()=>document.getElementById("file-upload-scrollable").click(),className:"inline-flex items-center px-4 py-2 border border-pink-500 rounded-md shadow-sm text-sm font-medium text-pink-600 bg-white hover:bg-pink-50",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another File"]})]})]}),ee.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Uploaded Files:"}),n.jsx("div",{className:"space-y-2",children:ee.map((K,se)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:K.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(K.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsx("button",{onClick:()=>ve(se),className:"text-red-600 hover:text-red-800",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},se))})]})]})]}),he&&!a&&!Te&&r.displayMode==="scrollable"&&n.jsx("div",{className:"mt-8",children:n.jsx("button",{onClick:Ge,disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:v?"Submitting...":"Submit Assignment"})})]}),he&&!a&&!Te&&n.jsxs("div",{className:"w-80 bg-gray-50 rounded-lg p-4 self-start",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Questions"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.questions.map((K,se)=>n.jsxs("button",{onClick:()=>{const _e=document.getElementById(`question-${se}-answer`)||document.querySelector(`[name="question-${se}"]`);_e&&_e.scrollIntoView({behavior:"smooth",block:"center"})},className:"w-full flex items-center justify-between p-2 rounded-md text-sm hover:bg-gray-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[D.has(se)&&P.has(se)?n.jsxs("div",{className:"relative",children:[n.jsx(Bn,{className:"h-4 w-4 text-green-600"}),n.jsx(_a,{className:"h-3 w-3 text-yellow-500 absolute -top-1 -right-1"})]}):D.has(se)?n.jsx(Bn,{className:"h-4 w-4 text-green-600"}):P.has(se)?n.jsx(_a,{className:"h-4 w-4 text-yellow-600"}):n.jsx(kN,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Question ",se+1]})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[K.points," pts"]})]},se))})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[D.size," of ",r.questions.length," answered"]})]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${D.size/r.questions.length*100}%`}})})]}),r.isTimedQuiz&&n.jsxs("div",{className:"mt-4 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Time Remaining:"}),n.jsx("button",{onClick:()=>U(!R),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:R?"Hide":"Show"})]})}),R&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Attempt due: ",Ut(new Date(r.dueDate),"MMM d 'at' h:mm a")]}),z&&F!==null?n.jsx("div",{className:`text-sm font-medium ${F<=300?"text-red-600":"text-gray-700"}`,children:Pe(F)}):n.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[r.quizTimeLimit," minutes"]}),!z&&n.jsx("button",{onClick:ie,className:"mt-2 w-full bg-indigo-600 text-white text-sm py-2 px-3 rounded hover:bg-indigo-700",children:"Start Quiz"})]})]})]})]}):null]})})()]})})},bS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:or,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],RW=()=>{const{id:e}=br(),t=Lt(),{user:r}=Et(),[s,a]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),g=await me.get(`${ke}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(g.data){const x=g.data;if(x.module){const v=typeof x.module=="string"?x.module:x.module._id,b=await me.get(`${ke}/api/modules/view/${v}`,{headers:{Authorization:`Bearer ${m}`}});if(b.data.success){const w=b.data.data.course._id||b.data.data.course,C=await me.get(`${ke}/api/courses/${w}`,{headers:{Authorization:`Bearer ${m}`}});C.data.success&&a(C.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=(s==null?void 0:s.sidebarConfig)||{items:bS.map((f,m)=>({id:f.id,label:f.label,visible:!0,order:m,fixed:f.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},h=u.items.sort((f,m)=>f.order-m.order).filter(f=>f.visible).map(f=>({...bS.find(g=>g.id===f.id),...f})).filter(f=>f.roles&&!f.roles.includes((r==null?void 0:r.role)||"")?!1:(r==null?void 0:r.role)==="student"?f.visible&&u.studentVisibility[f.id]:!0);return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:h.map(f=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${f.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${f.id}`),children:[n.jsx(f.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:f.label})]},f.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(PW,{})})})]}):n.jsx("div",{children:"Course not found"})},IW=()=>{var E;const{id:e}=br(),t=Lt(),[r,s]=j.useState(null),[a,i]=j.useState(null),[l,u]=j.useState(!0),[d,h]=j.useState(""),[f,m]=j.useState(""),[g,x]=j.useState(!1),[v,b]=j.useState({});j.useEffect(()=>{const S=JSON.parse(localStorage.getItem("user")),_=(S==null?void 0:S.role)||"";m(_),(async()=>{try{const T=localStorage.getItem("token"),P=await me.get(`${ke}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${T}`}});if(s(P.data),_==="student")try{const O=await me.get(`${ke}/api/submissions/student/${e}`,{headers:{Authorization:`Bearer ${T}`}});O.data&&(i(O.data),b(O.data.answers||{}))}catch(O){if(O.response&&O.response.status===404)i(null);else throw O}u(!1)}catch(T){console.error("Error fetching assignment details:",T),h("Error fetching assignment details"),u(!1)}})()},[e]);const w=(S,_)=>{b(D=>({...D,[S]:_}))},C=async S=>{S.preventDefault();try{const _=localStorage.getItem("token"),D=await me.post(`${ke}/api/submissions`,{assignment:e,answers:v},{headers:{Authorization:`Bearer ${_}`}});i(D.data),x(!1),window.dispatchEvent(new Event("assignmentSubmitted"))}catch{h("Error submitting assignment")}},N=async()=>{setIsPublishing(!0);try{const S=localStorage.getItem("token"),_=await me.patch(`${ke}/api/assignments/${e}/publish`,{},{headers:{Authorization:`Bearer ${S}`}});s(D=>({...D,published:_.data.published}))}catch(S){console.error("Error toggling assignment publish:",S)}finally{setIsPublishing(!1)}};return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):d?n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}):r?n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),n.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Due: ",Ut(new Date(r.dueDate),"PPp")]}),console.log("userRole:",f,"assignment.submission:",r.submission),f==="student"&&r.submission&&n.jsxs("span",{className:"ml-4 text-green-600",children:["Submitted: ",Ut(new Date(r.submission.submittedAt),"PPp")]})]}),n.jsxs("div",{className:"flex space-x-4",children:[(f==="teacher"||f==="admin")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:N,disabled:isPublishing,className:`inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium 
                    ${r!=null&&r.published?"border-green-300 text-green-700 bg-green-50 hover:bg-green-100":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:r!=null&&r.published?n.jsxs(n.Fragment,{children:[n.jsx(cc,{className:"h-4 w-4 mr-2"}),"Published"]}):n.jsxs(n.Fragment,{children:[n.jsx(So,{className:"h-4 w-4 mr-2"}),"Unpublished"]})}),n.jsx("button",{onClick:()=>t(`/assignments/${e}/edit`),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Assignment"}),n.jsx("button",{onClick:()=>t(`/assignments/${e}/grade`),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Grade Submissions"})]}),f==="student"&&n.jsx("button",{onClick:()=>t(`/assignments/${e}/view`),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Start Assignment"})]})]}),n.jsx("div",{className:"mt-6 prose max-w-none",children:n.jsx(_o,{children:r.description})}),r.content&&n.jsx("div",{className:"mt-6 prose max-w-none",children:n.jsx(_o,{children:r.content})}),f==="student"&&!g&&r.questions&&r.questions.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Questions"}),n.jsx("div",{className:"mt-4 space-y-6",children:r.questions.map((S,_)=>n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[_+1,". ",S.text," (",S.points," pts)"]}),S.type==="multiple-choice"&&n.jsx("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:S.options.map((D,T)=>n.jsx("li",{children:D.text},T))})]},_))})]}),g?n.jsxs("form",{onSubmit:C,className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Submission"}),r.questions.map((S,_)=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("p",{className:"font-semibold",children:[_+1,". ",S.text," (",S.points," pts)"]}),S.type==="multiple-choice"&&S.options.map((D,T)=>n.jsx("div",{className:"ml-4",children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",name:`question-${_}`,value:D.text,checked:v[_]===D.text,onChange:P=>w(_,P.target.value),className:"h-4 w-4"}),n.jsx("span",{children:D.text})]})},T)),S.type==="text"&&n.jsx("textarea",{value:v[_]||"",onChange:D=>w(_,D.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",rows:"4"})]},_)),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Submit"})]})]}):n.jsxs(n.Fragment,{children:[((E=r.attachments)==null?void 0:E.length)>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Attachments"}),n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:r.attachments.map((S,_)=>n.jsx("li",{className:"py-3",children:n.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-500",children:S.split("/").pop()})},_))})]}),(f==="teacher"||f==="admin")&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Submissions"}),a&&a.length===0?n.jsx("p",{className:"mt-2 text-gray-500",children:"No submissions yet"}):n.jsx("ul",{className:"mt-2 divide-y divide-gray-200",children:a&&a.map(S=>{var _,D;return n.jsx("li",{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(_=S.student)==null?void 0:_.firstName," ",(D=S.student)==null?void 0:D.lastName]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted at: ",Ut(new Date(S.submittedAt),"PPp")]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:`text-sm font-medium ${S.grade?"text-green-600":"text-yellow-600"}`,children:S.grade!==null&&S.grade!==void 0?`Grade: ${S.grade}`:"Not Graded"})})]})},S._id)})})]})]})]})}):n.jsx("div",{children:"Assignment not found"})},vS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:or,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],MW=()=>{const{id:e}=br(),t=Lt(),{user:r}=Et(),[s,a]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),g=await me.get(`${ke}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(g.data){const x=g.data;if(x.module){const v=typeof x.module=="string"?x.module:x.module._id,b=await me.get(`${ke}/api/modules/view/${v}`,{headers:{Authorization:`Bearer ${m}`}});if(b.data.success){const w=b.data.data.course._id||b.data.data.course,C=await me.get(`${ke}/api/courses/${w}`,{headers:{Authorization:`Bearer ${m}`}});C.data.success&&a(C.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=(s==null?void 0:s.sidebarConfig)||{items:vS.map((f,m)=>({id:f.id,label:f.label,visible:!0,order:m,fixed:f.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},h=u.items.sort((f,m)=>f.order-m.order).filter(f=>f.visible).map(f=>({...vS.find(g=>g.id===f.id),...f})).filter(f=>f.roles&&!f.roles.includes((r==null?void 0:r.role)||"")?!1:(r==null?void 0:r.role)==="student"?f.visible&&u.studentVisibility[f.id]:!0);return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:h.map(f=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${f.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${f.id}`),children:[n.jsx(f.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:f.label})]},f.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(IW,{})})})]}):n.jsx("div",{children:"Course not found"})},OW=()=>{var O,F;const{id:e}=br(),[t,r]=j.useState(null),[s,a]=j.useState([]),[i,l]=j.useState(!0),[u,d]=j.useState(""),[h,f]=j.useState(null),[m,g]=j.useState({}),[x,v]=j.useState(""),[b,w]=j.useState(!1),[C,N]=j.useState(!1);j.useEffect(()=>{if(h&&t){const $={};t.questions.forEach((z,q)=>{const H=D(q);H!==null?$[q]=H:h.questionGrades&&h.questionGrades[q]!==void 0?$[q]=h.questionGrades[q]:$[q]=0}),g($),v(h.feedback||"")}},[h,t]),j.useEffect(()=>{(async()=>{try{const z=localStorage.getItem("token"),q=await me.get(`/api/assignments/${e}`,{headers:{Authorization:`Bearer ${z}`}});r(q.data);const H=await me.get(`/api/submissions/assignment/${e}`,{headers:{Authorization:`Bearer ${z}`}});a(H.data),l(!1)}catch{d("Error fetching assignment data"),l(!1)}})()},[e]);const E=async($=!1)=>{var z,q;if(h){w(!0);try{const H=localStorage.getItem("token"),re={feedback:x,approveGrade:$};$||(re.questionGrades=m);const ee=await me.put(`/api/submissions/${h._id}`,re,{headers:{Authorization:`Bearer ${H}`}});a(L=>L.map(M=>M._id===h._id?ee.data:M)),f(ee.data),d("")}catch(H){d(((q=(z=H.response)==null?void 0:z.data)==null?void 0:q.message)||"Error grading submission")}finally{w(!1)}}},S=async()=>{var $,z,q;if(h&&window.confirm("Are you sure you want to delete this submission? This action cannot be undone.")){console.log("[Frontend] Attempting to delete submission:",h._id),N(!0);try{const H=localStorage.getItem("token");console.log("[Frontend] Making DELETE request to:",`/api/submissions/${h._id}`);const re=await me.delete(`/api/submissions/${h._id}`,{headers:{Authorization:`Bearer ${H}`}});console.log("[Frontend] Delete response:",re.data),a(ee=>ee.filter(L=>L._id!==h._id)),f(null),d("")}catch(H){console.error("[Frontend] Delete error:",(($=H.response)==null?void 0:$.data)||H.message),d(((q=(z=H.response)==null?void 0:z.data)==null?void 0:q.message)||"Error deleting submission")}finally{N(!1)}}},_=$=>{if(!(t!=null&&t.questions))return"unknown";const z=t.questions[$];return(z==null?void 0:z.type)||"unknown"},D=$=>h!=null&&h.autoQuestionGrades?h.autoQuestionGrades instanceof Map?h.autoQuestionGrades.get($.toString()):typeof h.autoQuestionGrades=="object"?h.autoQuestionGrades[$.toString()]:null:null,T=$=>{if(!(t!=null&&t.questions))return 0;const z=t.questions[$];return(z==null?void 0:z.points)||0},P=$=>{if(!(h!=null&&h.answers))return"";let z="";if(h.answers instanceof Map?z=h.answers.get($.toString())||"":typeof h.answers=="object"&&(z=h.answers[$.toString()]||""),_($)==="matching"&&typeof z=="string")try{return JSON.parse(z)}catch{return console.log(`Failed to parse matching answer for question ${$}:`,z),{}}return z};return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):u?n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}):t?n.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[t.title," - Grading"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," submission",s.length!==1?"s":""," to grade"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Submissions"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map($=>{var z,q;return n.jsxs("div",{onClick:()=>f($),className:`p-4 border rounded-lg cursor-pointer transition-colors ${(h==null?void 0:h._id)===$._id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"font-medium",children:[(z=$.student)==null?void 0:z.firstName," ",(q=$.student)==null?void 0:q.lastName]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[$.autoGraded&&n.jsxs("div",{className:"flex items-center text-blue-600",children:[n.jsx(Bn,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"text-xs",children:"Auto"})]}),$.teacherApproved&&n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx(Bn,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"text-xs",children:"Graded"})]})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Submitted: ",Ut(new Date($.submittedAt),"MMM d, yyyy h:mm a")]}),$.autoGraded&&n.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["Auto-grade: ",$.autoGrade," points"]}),$.teacherApproved&&n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Final grade: ",$.finalGrade||$.grade," points"]})]},$._id)})})]}),n.jsx("div",{className:"lg:col-span-2",children:h?n.jsx("div",{children:n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Grading: ",(O=h.student)==null?void 0:O.firstName," ",(F=h.student)==null?void 0:F.lastName]}),h.autoGraded&&n.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Uo,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("span",{className:"font-medium text-blue-900",children:"Auto-Graded Submission"})]}),n.jsxs("div",{className:"text-blue-800",children:[n.jsxs("div",{children:["Auto-grade: ",h.autoGrade," points"]}),h.teacherApproved?n.jsxs("div",{className:"text-green-700 font-medium",children:["Final grade: ",h.finalGrade||h.grade," points"]}):n.jsx("div",{className:"text-sm",children:"Multiple choice questions have been auto-graded. You can review, edit grades, and provide feedback before approving."})]})]}),t.questions&&n.jsx("div",{className:"space-y-4",children:t.questions.map(($,z)=>{const q=_(z),H=D(z),re=T(z),ee=P(z);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium",children:["Question ",z+1]}),n.jsx("p",{className:"text-sm text-gray-600",children:$.text})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[re," pts"]}),(q==="multiple-choice"||q==="matching")&&H!==null&&n.jsxs("div",{className:`text-sm ${H>0?"text-green-600":"text-red-600"}`,children:["Auto: ",H,"/",re]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Student Answer:"}),q==="multiple-choice"?n.jsx("div",{className:"text-sm text-gray-900",children:ee||"No answer"}):q==="matching"?n.jsx("div",{className:"space-y-2",children:$.leftItems&&$.leftItems.map((L,M)=>{const W=typeof ee=="object"?ee[M]:"",R=$.rightItems&&$.rightItems.find(Z=>Z.id===L.id),U=W===((R==null?void 0:R.text)||"");return n.jsxs("div",{className:`p-2 rounded border ${U?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900",children:L.text}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-500",children:"→"}),n.jsx("span",{className:`text-sm ${U?"text-green-700":"text-red-700"}`,children:W||"No answer"}),U?n.jsx(Bn,{className:"h-4 w-4 text-green-600"}):n.jsx(Ms,{className:"h-4 w-4 text-red-600"})]})]}),!U&&R&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Correct: ",R.text]})]},L.id)})}):n.jsx("textarea",{value:ee,readOnly:!0,className:"w-full h-24 p-2 border border-gray-300 rounded text-sm",placeholder:"No answer provided"})]}),(q==="multiple-choice"||q==="matching")&&H!==null?n.jsx("div",{}):q==="matching"?n.jsxs("div",{children:[n.jsxs("label",{htmlFor:`grade-${z}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade (0-",re,"):"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{id:`grade-${z}`,name:`grade-${z}`,type:"number",min:"0",max:re,value:m[z]!==void 0?m[z]:H!==null?H:0,onChange:L=>g(M=>({...M,[z]:parseFloat(L.target.value)||0})),className:"w-20 p-2 border border-gray-300 rounded text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),H!==null&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Auto: ",H,"/",re]})]})]}):n.jsxs("div",{children:[n.jsxs("label",{htmlFor:`grade-${z}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Grade (0-",re,"):"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{id:`grade-${z}`,name:`grade-${z}`,type:"number",min:"0",max:re,value:m[z]!==void 0?m[z]:H!==null?H:0,onChange:L=>g(M=>({...M,[z]:parseFloat(L.target.value)||0})),className:"w-20 p-2 border border-gray-300 rounded text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),q==="multiple-choice"&&H!==null&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Auto: ",H,"/",re]})]})]})]},z)})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback:"}),n.jsx("textarea",{id:"feedback",name:"feedback",value:x,onChange:$=>v($.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Provide feedback for the student..."})]}),n.jsxs("div",{className:"mt-6 flex space-x-3",children:[h.autoGraded?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>E(!0),disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:b?"Approving...":"Approve Auto-Grade"}),t.questions&&t.questions.some($=>$.type!=="multiple-choice"&&$.type!=="matching")&&n.jsx("button",{onClick:()=>E(!1),disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:b?"Grading...":"Grade with Edits"})]}):n.jsx("button",{onClick:()=>E(!1),disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:b?"Grading...":"Grade Submission"}),n.jsx("button",{onClick:S,disabled:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:C?"Deleting...":"Delete Submission"})]})]})}):n.jsx("div",{className:"text-center text-gray-500 py-12",children:"Select a submission to grade"})})]})]})}):n.jsx("div",{children:"Assignment not found"})},wS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:or,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],$W=()=>{const{id:e}=br(),t=Lt(),{user:r}=Et(),[s,a]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{(async()=>{if(e)try{const m=localStorage.getItem("token"),g=await me.get(`${ke}/api/assignments/${e}`,{headers:{Authorization:`Bearer ${m}`}});if(g.data){const x=g.data;if(x.module){const v=typeof x.module=="string"?x.module:x.module._id,b=await me.get(`${ke}/api/modules/view/${v}`,{headers:{Authorization:`Bearer ${m}`}});if(b.data.success){const w=b.data.data.course._id||b.data.data.course,C=await me.get(`${ke}/api/courses/${w}`,{headers:{Authorization:`Bearer ${m}`}});C.data.success&&a(C.data.data)}}}}catch(m){console.error("Error fetching course data:",m)}finally{l(!1)}})()},[e]);const u=(s==null?void 0:s.sidebarConfig)||{items:wS.map((f,m)=>({id:f.id,label:f.label,visible:!0,order:m,fixed:f.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},h=u.items.sort((f,m)=>f.order-m.order).filter(f=>f.visible).map(f=>({...wS.find(g=>g.id===f.id),...f})).filter(f=>f.roles&&!f.roles.includes((r==null?void 0:r.role)||"")?!1:(r==null?void 0:r.role)==="student"?f.visible&&u.studentVisibility[f.id]:!0);return i?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:h.map(f=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${f.id==="assignments"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>t(`/courses/${s._id}/${f.id}`),children:[n.jsx(f.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:f.label})]},f.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(OW,{})})})]}):n.jsx("div",{children:"Course not found"})};function cT(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=cT(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function pi(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=cT(e))&&(s&&(s+=" "),s+=t);return s}function LW(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}LW(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Vc=e=>typeof e=="number"&&!isNaN(e),ji=e=>typeof e=="string",ea=e=>typeof e=="function",FW=e=>ji(e)||Vc(e),mb=e=>ji(e)||ea(e)?e:null,BW=(e,t)=>e===!1||Vc(e)&&e>0?e:t,hb=e=>j.isValidElement(e)||ji(e)||ea(e)||Vc(e);function zW(e,t,r=300){let{scrollHeight:s,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function GW({enter:e,exit:t,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:i,position:l,preventExitTransition:u,done:d,nodeRef:h,isIn:f,playToast:m}){let g=r?`${e}--${l}`:e,x=r?`${t}--${l}`:t,v=j.useRef(0);return j.useLayoutEffect(()=>{let b=h.current,w=g.split(" "),C=N=>{N.target===h.current&&(m(),b.removeEventListener("animationend",C),b.removeEventListener("animationcancel",C),v.current===0&&N.type!=="animationcancel"&&b.classList.remove(...w))};b.classList.add(...w),b.addEventListener("animationend",C),b.addEventListener("animationcancel",C)},[]),j.useEffect(()=>{let b=h.current,w=()=>{b.removeEventListener("animationend",w),s?zW(b,d,a):d()};f||(u?w():(v.current=1,b.className+=` ${x}`,b.addEventListener("animationend",w)))},[f]),Q.createElement(Q.Fragment,null,i)}}function jS(e,t){return{content:uT(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function uT(e,t,r=!1){return j.isValidElement(e)&&!ji(e.type)?j.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):ea(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function qW({closeToast:e,theme:t,ariaLabel:r="close"}){return Q.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":r},Q.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Q.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function UW({delay:e,isRunning:t,closeToast:r,type:s="default",hide:a,className:i,controlledProgress:l,progress:u,rtl:d,isIn:h,theme:f}){let m=a||l&&u===0,g={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(g.transform=`scaleX(${u})`);let x=pi("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),v=ea(i)?i({rtl:d,type:s,defaultClassName:x}):pi(x,i),b={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&r()}};return Q.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Q.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${s}`}),Q.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:v,style:g,...b}))}var WW=1,dT=()=>`${WW++}`;function HW(e,t,r){let s=1,a=0,i=[],l=[],u=t,d=new Map,h=new Set,f=N=>(h.add(N),()=>h.delete(N)),m=()=>{l=Array.from(d.values()),h.forEach(N=>N())},g=({containerId:N,toastId:E,updateId:S})=>{let _=N?N!==e:e!==1,D=d.has(E)&&S==null;return _||D},x=(N,E)=>{d.forEach(S=>{var _;(E==null||E===S.props.toastId)&&((_=S.toggle)==null||_.call(S,N))})},v=N=>{var E,S;(S=(E=N.props)==null?void 0:E.onClose)==null||S.call(E,N.removalReason),N.isActive=!1},b=N=>{if(N==null)d.forEach(v);else{let E=d.get(N);E&&v(E)}m()},w=()=>{a-=i.length,i=[]},C=N=>{var E,S;let{toastId:_,updateId:D}=N.props,T=D==null;N.staleId&&d.delete(N.staleId),N.isActive=!0,d.set(_,N),m(),r(jS(N,T?"added":"updated")),T&&((S=(E=N.props).onOpen)==null||S.call(E))};return{id:e,props:u,observe:f,toggle:x,removeToast:b,toasts:d,clearQueue:w,buildToast:(N,E)=>{if(g(E))return;let{toastId:S,updateId:_,data:D,staleId:T,delay:P}=E,O=_==null;O&&a++;let F={...u,style:u.toastStyle,key:s++,...Object.fromEntries(Object.entries(E).filter(([z,q])=>q!=null)),toastId:S,updateId:_,data:D,isIn:!1,className:mb(E.className||u.toastClassName),progressClassName:mb(E.progressClassName||u.progressClassName),autoClose:E.isLoading?!1:BW(E.autoClose,u.autoClose),closeToast(z){d.get(S).removalReason=z,b(S)},deleteToast(){let z=d.get(S);if(z!=null){if(r(jS(z,"removed")),d.delete(S),a--,a<0&&(a=0),i.length>0){C(i.shift());return}m()}}};F.closeButton=u.closeButton,E.closeButton===!1||hb(E.closeButton)?F.closeButton=E.closeButton:E.closeButton===!0&&(F.closeButton=hb(u.closeButton)?u.closeButton:!0);let $={content:N,props:F,staleId:T};u.limit&&u.limit>0&&a>u.limit&&O?i.push($):Vc(P)?setTimeout(()=>{C($)},P):C($)},setProps(N){u=N},setToggle:(N,E)=>{let S=d.get(N);S&&(S.toggle=E)},isToastActive:N=>{var E;return(E=d.get(N))==null?void 0:E.isActive},getSnapshot:()=>l}}var pn=new Map,wc=[],pb=new Set,VW=e=>pb.forEach(t=>t(e)),fT=()=>pn.size>0;function YW(){wc.forEach(e=>hT(e.content,e.options)),wc=[]}var KW=(e,{containerId:t})=>{var r;return(r=pn.get(t||1))==null?void 0:r.toasts.get(e)};function mT(e,t){var r;if(t)return!!((r=pn.get(t))!=null&&r.isToastActive(e));let s=!1;return pn.forEach(a=>{a.isToastActive(e)&&(s=!0)}),s}function QW(e){if(!fT()){wc=wc.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||FW(e))pn.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=pn.get(e.containerId);t?t.removeToast(e.id):pn.forEach(r=>{r.removeToast(e.id)})}}var XW=(e={})=>{pn.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function hT(e,t){hb(e)&&(fT()||wc.push({content:e,options:t}),pn.forEach(r=>{r.buildToast(e,t)}))}function JW(e){var t;(t=pn.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function pT(e,t){pn.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function ZW(e){let t=e.containerId||1;return{subscribe(r){let s=HW(t,e,VW);pn.set(t,s);let a=s.observe(r);return YW(),()=>{a(),pn.delete(t)}},setProps(r){var s;(s=pn.get(t))==null||s.setProps(r)},getSnapshot(){var r;return(r=pn.get(t))==null?void 0:r.getSnapshot()}}}function eH(e){return pb.add(e),()=>{pb.delete(e)}}function tH(e){return e&&(ji(e.toastId)||Vc(e.toastId))?e.toastId:dT()}function Yc(e,t){return hT(e,t),t.toastId}function Yf(e,t){return{...t,type:t&&t.type||e,toastId:tH(t)}}function Kf(e){return(t,r)=>Yc(t,Yf(e,r))}function nr(e,t){return Yc(e,Yf("default",t))}nr.loading=(e,t)=>Yc(e,Yf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function rH(e,{pending:t,error:r,success:s},a){let i;t&&(i=ji(t)?nr.loading(t,a):nr.loading(t.render,{...a,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(h,f,m)=>{if(f==null){nr.dismiss(i);return}let g={type:h,...l,...a,data:m},x=ji(f)?{render:f}:f;return i?nr.update(i,{...g,...x}):nr(x.render,{...g,...x}),m},d=ea(e)?e():e;return d.then(h=>u("success",s,h)).catch(h=>u("error",r,h)),d}nr.promise=rH;nr.success=Kf("success");nr.info=Kf("info");nr.error=Kf("error");nr.warning=Kf("warning");nr.warn=nr.warning;nr.dark=(e,t)=>Yc(e,Yf("default",{theme:"dark",...t}));function nH(e){QW(e)}nr.dismiss=nH;nr.clearWaitingQueue=XW;nr.isActive=mT;nr.update=(e,t={})=>{let r=KW(e,t);if(r){let{props:s,content:a}=r,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:dT()};i.toastId!==e&&(i.staleId=e);let l=i.render||a;delete i.render,Yc(l,i)}};nr.done=e=>{nr.update(e,{progress:1})};nr.onChange=eH;nr.play=e=>pT(!0,e);nr.pause=e=>pT(!1,e);function sH(e){var t;let{subscribe:r,getSnapshot:s,setProps:a}=j.useRef(ZW(e)).current;a(e);let i=(t=j.useSyncExternalStore(r,s,s))==null?void 0:t.slice();function l(u){if(!i)return[];let d=new Map;return e.newestOnTop&&i.reverse(),i.forEach(h=>{let{position:f}=h.props;d.has(f)||d.set(f,[]),d.get(f).push(h)}),Array.from(d,h=>u(h[0],h[1]))}return{getToastToRender:l,isToastActive:mT,count:i==null?void 0:i.length}}function aH(e){let[t,r]=j.useState(!1),[s,a]=j.useState(!1),i=j.useRef(null),l=j.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:d,closeToast:h,onClick:f,closeOnClick:m}=e;JW({id:e.toastId,containerId:e.containerId,fn:r}),j.useEffect(()=>{if(e.pauseOnFocusLoss)return g(),()=>{x()}},[e.pauseOnFocusLoss]);function g(){document.hasFocus()||C(),window.addEventListener("focus",w),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",w),window.removeEventListener("blur",C)}function v(T){if(e.draggable===!0||e.draggable===T.pointerType){N();let P=i.current;l.canCloseOnClick=!0,l.canDrag=!0,P.style.transition="none",e.draggableDirection==="x"?(l.start=T.clientX,l.removalDistance=P.offsetWidth*(e.draggablePercent/100)):(l.start=T.clientY,l.removalDistance=P.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function b(T){let{top:P,bottom:O,left:F,right:$}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&e.pauseOnHover&&T.clientX>=F&&T.clientX<=$&&T.clientY>=P&&T.clientY<=O?C():w()}function w(){r(!0)}function C(){r(!1)}function N(){l.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",_)}function E(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",_)}function S(T){let P=i.current;if(l.canDrag&&P){l.didMove=!0,t&&C(),e.draggableDirection==="x"?l.delta=T.clientX-l.start:l.delta=T.clientY-l.start,l.start!==T.clientX&&(l.canCloseOnClick=!1);let O=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;P.style.transform=`translate3d(${O},0)`,P.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function _(){E();let T=i.current;if(l.canDrag&&l.didMove&&T){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let D={onPointerDown:v,onPointerUp:b};return u&&d&&(D.onMouseEnter=C,e.stacked||(D.onMouseLeave=w)),m&&(D.onClick=T=>{f&&f(T),l.canCloseOnClick&&h(!0)}),{playToast:w,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:D}}var iH=typeof window<"u"?j.useLayoutEffect:j.useEffect,Qf=({theme:e,type:t,isLoading:r,...s})=>Q.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function oH(e){return Q.createElement(Qf,{...e},Q.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function lH(e){return Q.createElement(Qf,{...e},Q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function cH(e){return Q.createElement(Qf,{...e},Q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function uH(e){return Q.createElement(Qf,{...e},Q.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function dH(){return Q.createElement("div",{className:"Toastify__spinner"})}var gb={info:lH,warning:oH,success:cH,error:uH,spinner:dH},fH=e=>e in gb;function mH({theme:e,type:t,isLoading:r,icon:s}){let a=null,i={theme:e,type:t};return s===!1||(ea(s)?a=s({...i,isLoading:r}):j.isValidElement(s)?a=j.cloneElement(s,i):r?a=gb.spinner():fH(t)&&(a=gb[t](i))),a}var hH=e=>{let{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:a,playToast:i}=aH(e),{closeButton:l,children:u,autoClose:d,onClick:h,type:f,hideProgressBar:m,closeToast:g,transition:x,position:v,className:b,style:w,progressClassName:C,updateId:N,role:E,progress:S,rtl:_,toastId:D,deleteToast:T,isIn:P,isLoading:O,closeOnClick:F,theme:$,ariaLabel:z}=e,q=pi("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":F}),H=ea(b)?b({rtl:_,position:v,type:f,defaultClassName:q}):pi(q,b),re=mH(e),ee=!!S||!d,L={closeToast:g,type:f,theme:$},M=null;return l===!1||(ea(l)?M=l(L):j.isValidElement(l)?M=j.cloneElement(l,L):M=qW(L)),Q.createElement(x,{isIn:P,done:T,position:v,preventExitTransition:r,nodeRef:s,playToast:i},Q.createElement("div",{id:D,tabIndex:0,onClick:h,"data-in":P,className:H,...a,style:w,ref:s,...P&&{role:E,"aria-label":z}},re!=null&&Q.createElement("div",{className:pi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},re),uT(u,e,!t),M,!e.customProgressBar&&Q.createElement(UW,{...N&&!ee?{key:`p-${N}`}:{},rtl:_,theme:$,delay:d,isRunning:t,isIn:P,closeToast:g,hide:m,type:f,className:C,controlledProgress:ee,progress:S||0})))},pH=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),gH=GW(pH("bounce",!0)),xH={position:"top-right",transition:gH,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function yH(e){let t={...xH,...e},r=e.stacked,[s,a]=j.useState(!0),i=j.useRef(null),{getToastToRender:l,isToastActive:u,count:d}=sH(t),{className:h,style:f,rtl:m,containerId:g,hotKeys:x}=t;function v(w){let C=pi("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":m});return ea(h)?h({position:w,rtl:m,defaultClassName:C}):pi(C,mb(h))}function b(){r&&(a(!0),nr.play())}return iH(()=>{var w;if(r){let C=i.current.querySelectorAll('[data-in="true"]'),N=12,E=(w=t.position)==null?void 0:w.includes("top"),S=0,_=0;Array.from(C).reverse().forEach((D,T)=>{let P=D;P.classList.add("Toastify__toast--stacked"),T>0&&(P.dataset.collapsed=`${s}`),P.dataset.pos||(P.dataset.pos=E?"top":"bot");let O=S*(s?.2:1)+(s?0:N*T);P.style.setProperty("--y",`${E?O:O*-1}px`),P.style.setProperty("--g",`${N}`),P.style.setProperty("--s",`${1-(s?_:0)}`),S+=P.offsetHeight,_+=.025})}},[s,d,r]),j.useEffect(()=>{function w(C){var N;let E=i.current;x(C)&&((N=E.querySelector('[tabIndex="0"]'))==null||N.focus(),a(!1),nr.pause()),C.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(a(!0),nr.play())}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[x]),Q.createElement("section",{ref:i,className:"Toastify",id:g,onMouseEnter:()=>{r&&(a(!1),nr.pause())},onMouseLeave:b,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((w,C)=>{let N=C.length?{...f}:{...f,pointerEvents:"none"};return Q.createElement("div",{tabIndex:-1,className:v(w),"data-stacked":r,style:N,key:`c-${w}`},C.map(({content:E,props:S})=>Q.createElement(hH,{...S,stacked:r,collapseAll:b,isIn:u(S.toastId,S.containerId),key:`t-${S.key}`},E)))}))}const bH=({reply:e,onReply:t,level:r,onEdit:s,onDelete:a,canModify:i,threadId:l,isReplying:u,onSubmitReply:d,replyContent:h,setReplyContent:f,setReplyingTo:m})=>{const[g,x]=j.useState(!1),[v,b]=j.useState(e.content),[w,C]=j.useState(!1),[N,E]=j.useState(!1),S=j.useRef(null),{user:_}=Et(),D=String(_==null?void 0:_._id)===String(e.author._id)||(_==null?void 0:_.role)==="teacher";j.useEffect(()=>{const O=F=>{S.current&&!S.current.contains(F.target)&&E(!1)};return N&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[N]);const T=async O=>{if(O.preventDefault(),!!v.trim()){C(!0);try{await s(e._id,v),x(!1)}catch(F){console.error("Error editing reply:",F)}finally{C(!1)}}},P=async()=>{if(window.confirm("Are you sure you want to delete this reply?"))try{await a(e._id)}catch(O){console.error("Error deleting reply:",O)}};return n.jsxs("div",{style:{marginLeft:`${Math.min(r*32,96)}px`},className:"mb-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200 overflow-hidden",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:e.author.profilePicture?e.author.profilePicture.startsWith("http")?e.author.profilePicture:`http://localhost:5000${e.author.profilePicture}`:"/default-avatar.png",alt:e.author.firstName,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100",onError:O=>O.currentTarget.src="/default-avatar.png"})}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"font-semibold text-gray-900",children:[e.author.firstName," ",e.author.lastName]})}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx($f,{className:"w-3 h-3"}),n.jsx("span",{children:mn(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),D&&n.jsxs("div",{className:"relative",ref:S,children:[n.jsx("button",{onClick:()=>E(!N),className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",title:"More options","aria-label":"More options",children:n.jsx(qy,{className:"w-4 h-4 text-gray-600"})}),N&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[n.jsxs("button",{onClick:()=>{x(!0),E(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[n.jsx(oD,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:()=>{P(),E(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[n.jsx(ls,{className:"w-4 h-4"}),n.jsx("span",{children:"Delete"})]})]})]})]}),g?n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsx(vi,{content:v,onChange:b,placeholder:"Edit your reply...",className:"min-h-[120px]"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{x(!1),b(e.content)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w||!v.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?"Saving...":"Save Changes"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"prose prose-gray max-w-none mb-4 text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}}),n.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:n.jsxs("button",{onClick:()=>t(e._id),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[n.jsx(uc,{className:"w-4 h-4"}),n.jsx("span",{children:"Reply"})]})})]})]})}),u&&n.jsx("div",{className:"mt-3 ml-6",children:n.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-4 flex items-center space-x-2",children:[n.jsx(uc,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reply to ",e.author.firstName]})]}),n.jsxs("form",{onSubmit:O=>d(O,e._id),children:[n.jsx(vi,{content:h,onChange:f,placeholder:"Write your reply...",className:"mb-4"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{m(null),f("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:w||!h.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[n.jsx(rf,{className:"w-4 h-4"}),n.jsx("span",{children:w?"Posting...":"Post Reply"})]})]})]})]})})]})},vH=()=>{const{courseId:e,threadId:t}=br(),r=Lt(),{user:s}=Et(),[a,i]=j.useState(null),[l,u]=j.useState(!0),[d,h]=j.useState(null),[f,m]=j.useState(""),[g,x]=j.useState(!1),[v,b]=j.useState(!1),[w,C]=j.useState(""),[N,E]=j.useState(""),[S,_]=j.useState(null),[D,T]=j.useState(!1),[P,O]=j.useState(!1),[F,$]=j.useState(null),[z,q]=j.useState(""),[H,re]=j.useState(""),[ee,L]=j.useState(null),[M,W]=j.useState(!1),[R,U]=j.useState(!1),[Z,B]=j.useState({isGraded:!1,totalPoints:100,group:"Discussions",dueDate:""}),[Ce,Se]=j.useState([]),G=(s==null?void 0:s.role)==="teacher"||(s==null?void 0:s.role)==="admin";j.useEffect(()=>{(async()=>{if(!e||!t){h("Invalid course or thread ID"),u(!1);return}try{const he=localStorage.getItem("token"),ne=await Ie.get(`${ke}/api/threads/${t}`,{headers:{Authorization:`Bearer ${he}`}});if(ne.data.success){if(ne.data.data.course!==e){h("Thread not found in this course"),u(!1);return}i(ne.data.data)}else h("Failed to load thread");const Te=await Ie.get(`${ke}/api/courses/${e}`,{headers:{Authorization:`Bearer ${he}`}});Te.data.success&&Se(Te.data.data.students||[])}catch(he){console.error("Error fetching thread or students:",he),h("Failed to load thread or students")}finally{u(!1)}})()},[e,t]),j.useEffect(()=>{const ye=he=>{i(he.detail)};return window.addEventListener("threadUpdated",ye),()=>{window.removeEventListener("threadUpdated",ye)}},[]);const ae=async(ye,he=null)=>{if(ye.preventDefault(),!(!a||!f.trim())){x(!0);try{const ne=localStorage.getItem("token"),Te=await Ie.post(`${ke}/api/threads/${a._id}/replies`,{content:f,parentReply:he||null},{headers:{Authorization:`Bearer ${ne}`}});Te.data.success&&(i(Te.data.data),m(""),_(null),T(!1))}catch(ne){console.error("Error posting reply:",ne)}finally{x(!1)}}},X=async ye=>{if(ye.preventDefault(),!(!a||!w.trim()||!N.trim())){x(!0);try{const he=localStorage.getItem("token"),ne=await Ie.put(`${ke}/api/threads/${a._id}`,{title:w,content:N},{headers:{Authorization:`Bearer ${he}`}});ne.data.success&&(i(ne.data.data),b(!1))}catch(he){console.error("Error updating thread:",he)}finally{x(!1)}}},V=async()=>{if(!(!a||!window.confirm("Are you sure you want to delete this thread?")))try{const ye=localStorage.getItem("token");(await Ie.delete(`${ke}/api/threads/${a._id}`,{headers:{Authorization:`Bearer ${ye}`}})).data.success&&r(-1)}catch(ye){console.error("Error deleting thread:",ye)}},ie=async()=>{if(a)try{const ye=localStorage.getItem("token"),he=await Ie.patch(`${ke}/api/threads/${a._id}/pin`,{},{headers:{Authorization:`Bearer ${ye}`}});he.data.success&&i(he.data.data)}catch(ye){console.error("Error toggling pin status:",ye)}},be=async(ye,he)=>{if(a)try{const ne=localStorage.getItem("token"),Te=await Ie.put(`${ke}/api/threads/${a._id}/replies/${ye}`,{content:he},{headers:{Authorization:`Bearer ${ne}`}});Te.data.success&&i(Te.data.data)}catch(ne){throw console.error("Error updating reply:",ne),ne}},ve=async ye=>{if(a)try{const he=localStorage.getItem("token"),ne=await Ie.delete(`${ke}/api/threads/${a._id}/replies/${ye}`,{headers:{Authorization:`Bearer ${he}`}});ne.data.success&&(i(ne.data.data),ne.data.data.replies.some(Be=>Be.author._id===(s==null?void 0:s._id))||T(!1))}catch(he){throw console.error("Error deleting reply:",he),he}},Pe=ye=>{_(ye)},He=async ye=>{if(ye.preventDefault(),!(!a||!F)){W(!0),L(null);try{const he=localStorage.getItem("token"),ne=await Ie.post(`${ke}/api/threads/${a._id}/grade`,{studentId:F._id,grade:parseFloat(z),feedback:H},{headers:{Authorization:`Bearer ${he}`}});ne.data.success?(i(ne.data.data),O(!1),$(null),q(""),re(""),window.dispatchEvent(new Event("discussionGradeUpdated"))):L("Failed to submit grade")}catch(he){console.error("Error submitting grade:",he),L("Failed to submit grade. Please try again.")}finally{W(!1)}}},Je=ye=>{var ne;const he=a==null?void 0:a.studentGrades.find(Te=>Te.student._id===ye._id);$(ye),q(((ne=he==null?void 0:he.grade)==null?void 0:ne.toString())||""),re((he==null?void 0:he.feedback)||""),O(!0)},le=async ye=>{if(ye.preventDefault(),!!a)try{const he=localStorage.getItem("token"),ne=await Ie.put(`${ke}/api/threads/${a._id}`,{...Z,dueDate:Z.dueDate||null},{headers:{Authorization:`Bearer ${he}`}});ne.data.success&&(i(ne.data.data),U(!1))}catch(he){console.error("Error updating thread settings:",he),h("Failed to update thread settings")}};if(l)return n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(d||!a)return n.jsx("div",{className:"text-red-500 text-center p-4",children:d||"Thread not found"});if((s==null?void 0:s.role)==="student"&&Array.isArray(a.studentGrades)){const ye=a.studentGrades.find(he=>he.student&&(he.student._id===s._id||he.student===s._id));ye&&typeof ye.feedback=="string"&&ye.feedback.trim()!==""&&ye.feedback}const fe=new Map,Ae=[];a.replies.forEach(ye=>{var he;ye.parentReply?(fe.has(ye.parentReply)||fe.set(ye.parentReply,[]),(he=fe.get(ye.parentReply))==null||he.push(ye)):Ae.push(ye)});const Ge=a.replies.some(ye=>ye.parentReply===null&&ye.author._id===(s==null?void 0:s._id)),Ye=(ye,he=0,ne,Te)=>ye.map(Be=>n.jsxs(Q.Fragment,{children:[n.jsx(bH,{reply:Be,onReply:Pe,level:he,onEdit:ne,onDelete:Te,canModify:(s==null?void 0:s._id)===Be.author._id||(s==null?void 0:s.role)==="teacher",threadId:a._id,isReplying:S===Be._id,onSubmitReply:ae,replyContent:f,setReplyContent:m,setReplyingTo:_}),fe.get(Be._id)&&Ye(fe.get(Be._id),he+1,ne,Te)]},Be._id));return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.isPinned&&n.jsxs("div",{className:"flex items-center space-x-1 text-amber-600 bg-amber-50 px-3 py-1 rounded-full",children:[n.jsx(CN,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Pinned"})]}),a.isGraded&&n.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-3 py-1 rounded-full",children:[n.jsx(fp,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm font-medium",children:[a.totalPoints," points"]})]})]}),v?n.jsxs("form",{onSubmit:X,className:"space-y-4",children:[n.jsx("input",{type:"text",value:w,onChange:ye=>C(ye.target.value),className:"w-full text-2xl font-bold text-gray-900 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Thread title"}),n.jsx(vi,{content:N,onChange:E,placeholder:"Edit your thread content...",className:"min-h-[200px]"}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{b(!1),C(a.title),E(a.content)},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g||!w.trim()||!N.trim(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":"Save Changes"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.title}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:a.author.profilePicture?a.author.profilePicture.startsWith("http")?a.author.profilePicture:`http://localhost:5000${a.author.profilePicture}`:a.author.avatarUrl?a.author.avatarUrl.startsWith("http")?a.author.avatarUrl:`http://localhost:5000${a.author.avatarUrl}`:"/default-avatar.png",alt:a.author.firstName,className:"w-12 h-12 rounded-full object-cover border-2 border-white shadow-sm",onError:ye=>ye.currentTarget.src="/default-avatar.png"})}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"font-semibold text-gray-900",children:[a.author.firstName," ",a.author.lastName]})}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx($f,{className:"w-4 h-4"}),n.jsx("span",{children:mn(new Date(a.createdAt),{addSuffix:!0})}),a.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsx(zc,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",mn(new Date(a.dueDate),{addSuffix:!0})]})]})]})]})]}),(s==null?void 0:s.role)==="teacher"&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:ie,className:`p-2 rounded-lg transition-colors ${a.isPinned?"text-amber-600 bg-amber-50 hover:bg-amber-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:a.isPinned?"Unpin thread":"Pin thread",children:n.jsx(CN,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{b(!0),C(a.title),E(a.content)},className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit thread",children:n.jsx(oD,{className:"w-5 h-5"})}),n.jsx("button",{onClick:V,className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Delete thread",children:n.jsx(ls,{className:"w-5 h-5"})})]})]})]})]})})}),n.jsx("div",{className:"p-6",children:!v&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"prose prose-lg prose-gray max-w-none mb-8 text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:a.content}}),!Ge&&(D?n.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[n.jsx(Er,{className:"w-5 h-5"}),n.jsx("span",{children:"Post a Reply"})]}),n.jsxs("form",{onSubmit:ye=>ae(ye,null),children:[n.jsx("div",{onClick:ye=>ye.stopPropagation(),children:n.jsx(vi,{content:f,onChange:m,placeholder:"Share your thoughts...",className:"mb-4"})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>{T(!1),m("")},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:g||!f.trim(),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[n.jsx(rf,{className:"w-4 h-4"}),n.jsx("span",{children:g?"Posting...":"Post Reply"})]})]})]})]}):n.jsxs("button",{onClick:()=>T(!0),className:"w-full px-6 py-4 text-lg font-medium text-blue-600 bg-blue-50 border-2 border-blue-200 border-dashed rounded-xl hover:bg-blue-100 hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(Er,{className:"w-5 h-5"}),n.jsx("span",{children:"Start the discussion"})]}))]})})]}),P&&F&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(fp,{className:"w-5 h-5"}),n.jsxs("span",{children:["Grade Discussion - ",F.firstName," ",F.lastName]})]}),n.jsx("button",{onClick:()=>O(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx(Co,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:He,className:"p-6",children:[ee&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center space-x-2",children:[n.jsx(Uo,{className:"w-5 h-5"}),n.jsx("span",{children:ee})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-2",children:["Grade (out of ",(a==null?void 0:a.totalPoints)||100,")"]}),n.jsx("input",{type:"number",id:"grade",value:z??"",onChange:ye=>q(ye.target.value),min:"0",max:(a==null?void 0:a.totalPoints)||100,step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),n.jsx("textarea",{id:"feedback",value:H??"",onChange:ye=>re(ye.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter feedback for the student..."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:M,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:M?"Submitting...":"Submit Grade"})]})]})]})}),R&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(Is,{className:"w-5 h-5"}),n.jsx("span",{children:"Edit Thread Settings"})]}),n.jsx("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx(Co,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:le,className:"p-6",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:Z.isGraded,onChange:ye=>B(he=>({...he,isGraded:ye.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Make this a graded discussion"})]})}),Z.isGraded&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"totalPoints",className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Points"}),n.jsx("input",{type:"number",id:"totalPoints",value:Z.totalPoints,onChange:ye=>B(he=>({...he,totalPoints:parseInt(ye.target.value)||0})),min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"group",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Group"}),n.jsxs("select",{id:"group",value:Z.group,onChange:ye=>B(he=>({...he,group:ye.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"Discussions",children:"Discussions"}),n.jsx("option",{value:"Assignments",children:"Assignments"}),n.jsx("option",{value:"Projects",children:"Projects"}),n.jsx("option",{value:"Exams",children:"Exams"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),n.jsx("input",{type:"date",id:"dueDate",value:Z.dueDate,onChange:ye=>B(he=>({...he,dueDate:ye.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})}),G&&(a==null?void 0:a.isGraded)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-4 py-3 border-b border-gray-100",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2",children:[n.jsx(fp,{className:"w-5 h-5"}),n.jsx("span",{children:"Student Grades"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feedback"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Graded By"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.map(ye=>{const he=a.studentGrades.find(ne=>ne.student._id===ye._id);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[ye.profilePicture?n.jsx("img",{src:ye.profilePicture.startsWith("http")?ye.profilePicture:`http://localhost:5000${ye.profilePicture}`,alt:`${ye.firstName} ${ye.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-100",onError:ne=>{ne.currentTarget.style.display="none";const Te=ne.currentTarget.nextElementSibling;Te&&(Te.style.display="flex")}}):null,n.jsx("div",{className:`w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center ${ye.profilePicture?"hidden":""}`,style:{display:ye.profilePicture?"none":"flex"},children:n.jsx(ko,{className:"w-4 h-4 text-blue-600"})})]}),n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[ye.firstName," ",ye.lastName]})]})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:he?`${Number.isInteger(he.grade)?he.grade:Number(he.grade).toFixed(2)} / ${a.totalPoints}`:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:(he==null?void 0:he.feedback)||"-"})}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:he!=null&&he.gradedBy?`${he.gradedBy.firstName} ${he.gradedBy.lastName}`:"-"}),n.jsx("div",{className:"text-xs text-gray-500",children:he!=null&&he.gradedAt?new Date(he.gradedAt).toLocaleString():""})]}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("button",{onClick:()=>Je(ye),className:"text-blue-600 hover:text-blue-900 transition-colors",children:he?"Edit Grade":"Add Grade"})})]},ye._id)})})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Replies"}),n.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[n.jsx(Er,{className:"w-4 h-4"}),n.jsxs("span",{children:[Ae.length," ",Ae.length===1?"reply":"replies"]})]})]}),Ye(Ae,0,be,ve)]})]})},NS=[{id:"overview",label:"Overview",icon:aa},{id:"modules",label:"Modules",icon:or},{id:"pages",label:"Pages",icon:Tn},{id:"assignments",label:"Assignments",icon:Ii},{id:"discussions",label:"Discussions",icon:Er},{id:"announcements",label:"Announcements",icon:ia},{id:"groups",label:"Groups",icon:Wt},{id:"attendance",label:"Attendance",icon:Ls},{id:"grades",label:"Grades",icon:gn,roles:["student"]},{id:"gradebook",label:"Gradebook",icon:or,roles:["teacher","admin"]},{id:"students",label:"People",icon:Fa}],SS=()=>{const{courseId:e,threadId:t}=br(),r=Lt(),{user:s}=Et(),[a,i]=j.useState(null),[l,u]=j.useState(!0);console.log("ThreadViewWrapper - courseId:",e,"threadId:",t),j.useEffect(()=>{(async()=>{var g;if(!e||e==="undefined"||e==="null"){console.error("Invalid course ID:",e);return}try{u(!0);const x=localStorage.getItem("token");if(!x)throw new Error("No authentication token found");const v=await me.get(`${ke}/api/courses/${e}`,{headers:{Authorization:`Bearer ${x}`}});if(v.data.success)i(v.data.data);else throw new Error(v.data.message||"Failed to fetch course")}catch(x){console.error("Error fetching course:",x),((g=x.response)==null?void 0:g.status)===400&&console.error("Invalid course ID format")}finally{u(!1)}})()},[e]);const d=(a==null?void 0:a.sidebarConfig)||{items:NS.map((m,g)=>({id:m.id,label:m.label,visible:!0,order:g,fixed:m.id==="overview"})),studentVisibility:{overview:!0,modules:!0,pages:!0,assignments:!0,discussions:!0,announcements:!0,polls:!0,groups:!0,attendance:!0,grades:!0,gradebook:!1,students:!0}},f=d.items.sort((m,g)=>m.order-g.order).filter(m=>m.visible).map(m=>({...NS.find(x=>x.id===m.id),...m})).filter(m=>m.roles&&!m.roles.includes((s==null?void 0:s.role)||"")?!1:(s==null?void 0:s.role)==="student"?m.visible&&d.studentVisibility[m.id]:!0);return l?n.jsx("div",{className:"flex justify-center items-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):!a||!a._id?n.jsx("div",{children:"Course not found or invalid course data"}):n.jsxs("div",{className:"flex w-full max-w-7xl mx-auto",children:[n.jsx("aside",{className:"w-64 mr-8 mt-4",children:n.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-4 flex flex-col gap-1 border border-gray-100 dark:border-gray-700",children:f.map(m=>n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 ${m.id==="discussions"?"bg-blue-100 text-blue-700 font-semibold shadow":""}`,onClick:()=>r(`/courses/${a._id}/${m.id}`),children:[n.jsx(m.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"text-base",children:m.label})]},m.id))})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx(vH,{})})})]})};var gT=Symbol.for("immer-nothing"),kS=Symbol.for("immer-draftable"),Wn=Symbol.for("immer-state");function vs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var To=Object.getPrototypeOf;function Ni(e){return!!e&&!!e[Wn]}function ta(e){var t;return e?xT(e)||Array.isArray(e)||!!e[kS]||!!((t=e.constructor)!=null&&t[kS])||Jf(e)||Zf(e):!1}var wH=Object.prototype.constructor.toString();function xT(e){if(!e||typeof e!="object")return!1;const t=To(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===wH}function gf(e,t){Xf(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,s)=>t(s,r,e))}function Xf(e){const t=e[Wn];return t?t.type_:Array.isArray(e)?1:Jf(e)?2:Zf(e)?3:0}function xb(e,t){return Xf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yT(e,t,r){const s=Xf(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function jH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Jf(e){return e instanceof Map}function Zf(e){return e instanceof Set}function ui(e){return e.copy_||e.base_}function yb(e,t){if(Jf(e))return new Map(e);if(Zf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=xT(e);if(t===!0||t==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(e);delete s[Wn];let a=Reflect.ownKeys(s);for(let i=0;i<a.length;i++){const l=a[i],u=s[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(s[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(To(e),s)}else{const s=To(e);if(s!==null&&r)return{...e};const a=Object.create(s);return Object.assign(a,e)}}function Fv(e,t=!1){return em(e)||Ni(e)||!ta(e)||(Xf(e)>1&&(e.set=e.add=e.clear=e.delete=NH),Object.freeze(e),t&&Object.entries(e).forEach(([r,s])=>Fv(s,!0))),e}function NH(){vs(2)}function em(e){return Object.isFrozen(e)}var SH={};function Si(e){const t=SH[e];return t||vs(0,e),t}var jc;function bT(){return jc}function kH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function CS(e,t){t&&(Si("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function bb(e){vb(e),e.drafts_.forEach(CH),e.drafts_=null}function vb(e){e===jc&&(jc=e.parent_)}function _S(e){return jc=kH(jc,e)}function CH(e){const t=e[Wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ES(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wn].modified_&&(bb(t),vs(4)),ta(e)&&(e=xf(t,e),t.parent_||yf(t,e)),t.patches_&&Si("Patches").generateReplacementPatches_(r[Wn].base_,e,t.patches_,t.inversePatches_)):e=xf(t,r,[]),bb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gT?e:void 0}function xf(e,t,r){if(em(t))return t;const s=t[Wn];if(!s)return gf(t,(a,i)=>DS(e,s,t,a,i,r)),t;if(s.scope_!==e)return t;if(!s.modified_)return yf(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let i=a,l=!1;s.type_===3&&(i=new Set(a),a.clear(),l=!0),gf(i,(u,d)=>DS(e,s,a,u,d,r,l)),yf(e,a,!1),r&&e.patches_&&Si("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function DS(e,t,r,s,a,i,l){if(Ni(a)){const u=i&&t&&t.type_!==3&&!xb(t.assigned_,s)?i.concat(s):void 0,d=xf(e,a,u);if(yT(r,s,d),Ni(d))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(ta(a)&&!em(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xf(e,a),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,s)&&yf(e,a)}}function yf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fv(t,r)}function _H(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:bT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,i=Bv;r&&(a=[s],i=Nc);const{revoke:l,proxy:u}=Proxy.revocable(a,i);return s.draft_=u,s.revoke_=l,u}var Bv={get(e,t){if(t===Wn)return e;const r=ui(e);if(!xb(r,t))return EH(e,r,t);const s=r[t];return e.finalized_||!ta(s)?s:s===Yp(e.base_,t)?(Kp(e),e.copy_[t]=jb(s,e)):s},has(e,t){return t in ui(e)},ownKeys(e){return Reflect.ownKeys(ui(e))},set(e,t,r){const s=vT(ui(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const a=Yp(ui(e),t),i=a==null?void 0:a[Wn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jH(r,a)&&(r!==void 0||xb(e.base_,t)))return!0;Kp(e),wb(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Yp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Kp(e),wb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ui(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){vs(11)},getPrototypeOf(e){return To(e.base_)},setPrototypeOf(){vs(12)}},Nc={};gf(Bv,(e,t)=>{Nc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Nc.deleteProperty=function(e,t){return Nc.set.call(this,e,t,void 0)};Nc.set=function(e,t,r){return Bv.set.call(this,e[0],t,r,e[0])};function Yp(e,t){const r=e[Wn];return(r?ui(r):e)[t]}function EH(e,t,r){var a;const s=vT(t,r);return s?"value"in s?s.value:(a=s.get)==null?void 0:a.call(e.draft_):void 0}function vT(e,t){if(!(t in e))return;let r=To(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=To(r)}}function wb(e){e.modified_||(e.modified_=!0,e.parent_&&wb(e.parent_))}function Kp(e){e.copy_||(e.copy_=yb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var DH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...h){return l.produce(d,f=>r.call(this,f,...h))}}typeof r!="function"&&vs(6),s!==void 0&&typeof s!="function"&&vs(7);let a;if(ta(t)){const i=_S(this),l=jb(t,void 0);let u=!0;try{a=r(l),u=!1}finally{u?bb(i):vb(i)}return CS(i,s),ES(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===gT&&(a=void 0),this.autoFreeze_&&Fv(a,!0),s){const i=[],l=[];Si("Patches").generateReplacementPatches_(t,a,i,l),s(i,l)}return a}else vs(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let s,a;return[this.produce(t,r,(l,u)=>{s=l,a=u}),s,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ta(e)||vs(8),Ni(e)&&(e=AH(e));const t=_S(this),r=jb(e,void 0);return r[Wn].isManual_=!0,vb(t),r}finishDraft(e,t){const r=e&&e[Wn];(!r||!r.isManual_)&&vs(9);const{scope_:s}=r;return CS(s,t),ES(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const s=Si("Patches").applyPatches_;return Ni(e)?s(e,t):this.produce(e,a=>s(a,t))}};function jb(e,t){const r=Jf(e)?Si("MapSet").proxyMap_(e,t):Zf(e)?Si("MapSet").proxySet_(e,t):_H(e,t);return(t?t.scope_:bT()).drafts_.push(r),r}function AH(e){return Ni(e)||vs(10,e),wT(e)}function wT(e){if(!ta(e)||em(e))return e;const t=e[Wn];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=yb(e,t.scope_.immer_.useStrictShallowCopy_)}else r=yb(e,!0);return gf(r,(s,a)=>{yT(r,s,wT(a))}),t&&(t.finalized_=!1),r}var Hn=new DH,jT=Hn.produce;Hn.produceWithPatches.bind(Hn);Hn.setAutoFreeze.bind(Hn);Hn.setUseStrictShallowCopy.bind(Hn);Hn.applyPatches.bind(Hn);Hn.createDraft.bind(Hn);Hn.finishDraft.bind(Hn);function NT(e){return({dispatch:r,getState:s})=>a=>i=>typeof i=="function"?i(r,s,e):a(i)}var TH=NT(),PH=NT,RH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mc:mc.apply(null,arguments)};function AS(e,t){function r(...s){if(t){let a=t(...s);if(!a)throw new Error(Zs(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:s[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=s=>ez(s)&&s.type===e,r}var ST=class Vl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Vl.prototype)}static get[Symbol.species](){return Vl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Vl(...t[0].concat(this)):new Vl(...t.concat(this))}};function TS(e){return ta(e)?jT(e,()=>{}):e}function jd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function IH(e){return typeof e=="boolean"}var MH=()=>function(t){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let l=new ST;return r&&(IH(r)?l.push(TH):l.push(PH(r.extraArgument))),l},OH="RTK_autoBatch",PS=e=>t=>{setTimeout(t,e)},$H=(e={type:"raf"})=>t=>(...r)=>{const s=t(...r);let a=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PS(10):e.type==="callback"?e.queueNotification:PS(e.timeout),h=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},s,{subscribe(f){const m=()=>a&&f(),g=s.subscribe(m);return u.add(f),()=>{g(),u.delete(f)}},dispatch(f){var m;try{return a=!((m=f==null?void 0:f.meta)!=null&&m[OH]),i=!a,i&&(l||(l=!0,d(h))),s.dispatch(f)}finally{a=!0}}})},LH=e=>function(r){const{autoBatch:s=!0}=r??{};let a=new ST(e);return s&&a.push($H(typeof s=="object"?s:void 0)),a};function FH(e){const t=MH(),{reducer:r=void 0,middleware:s,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(uv(r))u=ZB(r);else throw new Error(Zs(1));let d;typeof s=="function"?d=s(t):d=t();let h=mc;a&&(h=RH({trace:!1,...typeof a=="object"&&a}));const f=VD(...d),m=LH(f);let g=typeof l=="function"?l(m):m();const x=h(...g);return dv(u,i,x)}function kT(e){const t={},r=[];let s;const a={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Zs(28));if(u in t)throw new Error(Zs(29));return t[u]=l,a},addMatcher(i,l){return r.push({matcher:i,reducer:l}),a},addDefaultCase(i){return s=i,a}};return e(a),[t,r,s]}function BH(e){return typeof e=="function"}function zH(e,t){let[r,s,a]=kT(t),i;if(BH(e))i=()=>TS(e());else{const u=TS(e);i=()=>u}function l(u=i(),d){let h=[r[d.type],...s.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return h.filter(f=>!!f).length===0&&(h=[a]),h.reduce((f,m)=>{if(m)if(Ni(f)){const x=m(f,d);return x===void 0?f:x}else{if(ta(f))return jT(f,g=>m(g,d));{const g=m(f,d);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},u)}return l.getInitialState=i,l}var GH=Symbol.for("rtk-slice-createasyncthunk");function qH(e,t){return`${e}/${t}`}function UH({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[GH];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error(Zs(11));const u=(typeof a.reducers=="function"?a.reducers(VH()):a.reducers)||{},d=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(S,_){const D=typeof S=="string"?S:S.type;if(!D)throw new Error(Zs(12));if(D in h.sliceCaseReducersByType)throw new Error(Zs(13));return h.sliceCaseReducersByType[D]=_,f},addMatcher(S,_){return h.sliceMatchers.push({matcher:S,reducer:_}),f},exposeAction(S,_){return h.actionCreators[S]=_,f},exposeCaseReducer(S,_){return h.sliceCaseReducersByName[S]=_,f}};d.forEach(S=>{const _=u[S],D={reducerName:S,type:qH(i,S),createNotation:typeof a.reducers=="function"};KH(_)?XH(D,_,f,t):YH(D,_,f)});function m(){const[S={},_=[],D=void 0]=typeof a.extraReducers=="function"?kT(a.extraReducers):[a.extraReducers],T={...S,...h.sliceCaseReducersByType};return zH(a.initialState,P=>{for(let O in T)P.addCase(O,T[O]);for(let O of h.sliceMatchers)P.addMatcher(O.matcher,O.reducer);for(let O of _)P.addMatcher(O.matcher,O.reducer);D&&P.addDefaultCase(D)})}const g=S=>S,x=new Map,v=new WeakMap;let b;function w(S,_){return b||(b=m()),b(S,_)}function C(){return b||(b=m()),b.getInitialState()}function N(S,_=!1){function D(P){let O=P[S];return typeof O>"u"&&_&&(O=jd(v,D,C)),O}function T(P=g){const O=jd(x,_,()=>new WeakMap);return jd(O,P,()=>{const F={};for(const[$,z]of Object.entries(a.selectors??{}))F[$]=WH(z,P,()=>jd(v,P,C),_);return F})}return{reducerPath:S,getSelectors:T,get selectors(){return T(D)},selectSlice:D}}const E={name:i,reducer:w,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:C,...N(l),injectInto(S,{reducerPath:_,...D}={}){const T=_??l;return S.inject({reducerPath:T,reducer:w},D),{...E,...N(T,!0)}}};return E}}function WH(e,t,r,s){function a(i,...l){let u=t(i);return typeof u>"u"&&s&&(u=r()),e(u,...l)}return a.unwrapped=e,a}var HH=UH();function VH(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function YH({type:e,reducerName:t,createNotation:r},s,a){let i,l;if("reducer"in s){if(r&&!QH(s))throw new Error(Zs(17));i=s.reducer,l=s.prepare}else i=s;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?AS(e,l):AS(e))}function KH(e){return e._reducerDefinitionType==="asyncThunk"}function QH(e){return e._reducerDefinitionType==="reducerWithPrepare"}function XH({type:e,reducerName:t},r,s,a){if(!a)throw new Error(Zs(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:h,options:f}=r,m=a(e,i,f);s.exposeAction(t,m),l&&s.addCase(m.fulfilled,l),u&&s.addCase(m.pending,u),d&&s.addCase(m.rejected,d),h&&s.addMatcher(m.settled,h),s.exposeCaseReducer(t,{fulfilled:l||Nd,pending:u||Nd,rejected:d||Nd,settled:h||Nd})}function Nd(){}function Zs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const JH=HH({name:"dragDrop",initialState:{},reducers:{}}),ZH=FH({reducer:{dragDrop:JH.reducer}}),eV=({groupSetId:e,groupId:t,isInstructor:r})=>{const[s,a]=j.useState([]),[i,l]=j.useState(!0),[u,d]=j.useState(!1),[h,f]=j.useState([]),[m,g]=j.useState(""),[x,v]=j.useState([]),[b,w]=j.useState(!1);return j.useEffect(()=>{e&&(async()=>{l(!0);try{const N=localStorage.getItem("token"),E=await Ie.get(`/pages/groupset/${e}`,{headers:{Authorization:`Bearer ${N}`}});a(E.data.data||[])}catch{a([])}finally{l(!1)}})()},[e,u]),j.useEffect(()=>{(async()=>{var N,E,S;if(t)try{const _=localStorage.getItem("token"),D=await Ie.get(`/groups/${t}`,{headers:{Authorization:`Bearer ${_}`}});if(g(((N=D.data.course)==null?void 0:N._id)||D.data.course||""),(E=D.data.course)!=null&&E._id||D.data.course){const T=((S=D.data.course)==null?void 0:S._id)||D.data.course,P=await Ie.get(`/modules/${T}`,{headers:{Authorization:`Bearer ${_}`}});f(P.data.data||[])}}catch{g(""),f([])}})()},[t]),j.useEffect(()=>{(async()=>{if(!(!m||!e)){w(!0);try{const N=await aT(m,e);v(N)}catch{v([])}finally{w(!1)}}})()},[m,e]),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Group Pages"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Pages shared with this group set"})]}),r&&n.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:"+ Create Page"})]}),u&&n.jsx(Aa,{children:n.jsx(cv,{modules:h,courseId:m,onSuccess:()=>d(!1),onCancel:()=>d(!1)})}),i?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading pages..."}):s.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pages available for this group set."}):n.jsx("div",{className:"divide-y",children:s.map(C=>n.jsx("div",{className:"p-4 hover:bg-gray-50 flex justify-between items-center group",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tn,{className:"w-4 h-4 text-blue-500"}),n.jsx("span",{className:"group-hover:text-blue-500 font-medium",children:C.title})]})},C._id))})]})},tV=({courseId:e,groupSetId:t})=>{var M;const{user:r}=Et(),[s,a]=j.useState([]),[i,l]=j.useState(!1),[u,d]=j.useState(null),[h,f]=j.useState(null),[m,g]=j.useState([]),[x,v]=j.useState(!1),[b,w]=j.useState(""),[C,N]=j.useState(null),[E,S]=j.useState({}),[_,D]=j.useState(!1),[T,P]=j.useState({}),[O,F]=j.useState(!1);if(!e||!t||e===""||t==="")return n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"text-gray-500 text-center",children:"Loading announcements..."})});const $=async()=>{l(!0),d(null);try{const W=await aT(e,t);a(W)}catch{d("Failed to load announcements")}finally{l(!1)}},z=async W=>{var R;v(!0);try{const U=await Iv(W);if(g(U),r&&((R=h==null?void 0:h.options)!=null&&R.requirePostBeforeSeeingReplies)){const Z=U.some(B=>B.author._id===r._id);F(Z)}else F(!0)}catch{g([]),F(!1)}finally{v(!1)}};j.useEffect(()=>{$()},[e,t]),j.useEffect(()=>{h&&z(h._id)},[h]);const q=async()=>{!h||!b.trim()||(D(!0),await Mv(h._id,b),w(""),F(!0),await z(h._id),D(!1))},H=async W=>{var R;if(!(!h||!W||!((R=E[W])!=null&&R.trim()))){D(!0);try{await Ov(h._id,W,E[W]),S(U=>({...U,[W]:""})),N(null),await z(h._id)}catch(U){console.error("Failed to post reply:",U)}D(!1)}},re=async W=>{if(!(!h||!W)){P(R=>({...R,[W]:!0}));try{await $v(h._id,W),await z(h._id)}catch{}P(R=>({...R,[W]:!1}))}},ee=async W=>{if(!(!h||!W)){P(R=>({...R,[W]:!0}));try{await Lv(h._id,W),await z(h._id)}catch{}P(R=>({...R,[W]:!1}))}},L=(W,R=0,U="")=>{var Ce;let Z=W;return R===0&&r&&r.role==="student"&&((Ce=h==null?void 0:h.options)==null?void 0:Ce.requirePostBeforeSeeingReplies)&&!O&&(Z=W.filter(Se=>Se.author._id===r._id)),n.jsx("ul",{className:R===0?"space-y-6 mt-8":"ml-8 space-y-4 mt-4",children:Z.filter(Se=>Se._id).map(Se=>{var ie,be,ve;const G=r&&Se.likes&&Se.likes.includes(r._id),ae=r&&Se.author._id===r._id,X=O||!((ie=h==null?void 0:h.options)!=null&&ie.requirePostBeforeSeeingReplies)||(r==null?void 0:r.role)!=="student",V=X?Se.replies:[];return n.jsxs("li",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"font-semibold text-gray-800",children:[Se.author.firstName," ",Se.author.lastName]}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(Se.createdAt).toLocaleString()})]}),n.jsx("div",{className:"mb-2 text-gray-700",children:Se.text}),n.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[r&&((be=h==null?void 0:h.options)==null?void 0:be.allowLiking)&&!ae&&n.jsxs("button",{className:`text-xs flex items-center gap-1 px-2 py-1 rounded ${G?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,onClick:Pe=>{Pe.preventDefault(),G?ee(Se._id):re(Se._id)},disabled:T[Se._id],children:[n.jsx(Yb,{className:"w-3 h-3"}),((ve=Se.likes)==null?void 0:ve.length)||0]}),r&&n.jsx("button",{className:"text-xs text-blue-600 hover:underline",onClick:()=>N(Se._id),children:"Reply"})]}),C===Se._id&&n.jsxs("div",{className:"mb-2",children:[n.jsx("textarea",{className:"w-full border rounded px-2 py-1 text-sm",rows:2,placeholder:"Write a reply...",value:E[Se._id]||"",onChange:Pe=>S(He=>({...He,[Se._id]:Pe.target.value})),disabled:_}),n.jsxs("div",{className:"flex gap-2 mt-1 justify-end",children:[n.jsx("button",{className:"px-3 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",onClick:()=>N(null),disabled:_,children:"Cancel"}),n.jsx("button",{className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>H(Se._id),disabled:_,children:_?"Replying...":"Reply"})]})]}),!X&&Se.replies&&Se.replies.length>0&&n.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700",children:[n.jsx("span",{role:"img","aria-label":"Info",children:"ℹ️"})," ",Se.replies.length," repl",Se.replies.length===1?"y":"ies"," hidden. Post a comment first to see replies."]}),V&&V.length>0&&L(V,R+1,U+Se._id+"-")]},U+Se._id)})})};return n.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Group Announcements"}),u&&n.jsx("div",{className:"text-red-500 mb-2",children:u}),h?n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-100 max-w-2xl mx-auto",children:[n.jsx("button",{className:"mb-4 px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-xs",onClick:()=>f(null),children:"← Back to Announcements"}),n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:h.title}),n.jsx("span",{className:"text-xs text-gray-400 mt-1",children:new Date(h.createdAt).toLocaleString()})]}),n.jsx("div",{className:"text-sm text-gray-800 mb-2 prose max-w-none",dangerouslySetInnerHTML:{__html:h.body}}),n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["By ",h.author.firstName," ",h.author.lastName]}),h.options&&Object.values(h.options).some(Boolean)&&r&&r.role!=="student"&&n.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[h.options.delayPosting&&n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Delay posting"}),h.options.allowComments&&n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Comments enabled"}),h.options.requirePostBeforeSeeingReplies&&n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Post before seeing replies"}),h.options.enablePodcastFeed&&n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Podcast feed"}),h.options.allowLiking&&n.jsx("span",{className:"bg-pink-100 text-pink-800 px-2 py-0.5 rounded text-xs font-semibold",children:"Liking enabled"})]}),n.jsxs("div",{className:"mt-10",children:[n.jsx("h4",{className:"text-lg font-bold mb-4",children:"Comments"}),r&&r.role==="student"&&((M=h==null?void 0:h.options)==null?void 0:M.requirePostBeforeSeeingReplies)&&!O&&n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700",children:[n.jsx("span",{role:"img","aria-label":"Info",children:"💡"})," Post a comment first to see replies from other students."]}),x?n.jsx("div",{children:"Loading comments..."}):n.jsxs(n.Fragment,{children:[L(m),r&&n.jsxs("div",{className:"mt-6",children:[n.jsx("textarea",{className:"w-full border rounded px-2 py-2 text-sm",rows:3,placeholder:"Write a comment...",value:b,onChange:W=>w(W.target.value),disabled:_}),n.jsx("div",{className:"flex gap-2 mt-2 justify-end",children:n.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:q,disabled:_,children:_?"Posting...":"Post Comment"})})]})]})]})]}):i?n.jsx("div",{children:"Loading announcements..."}):n.jsx(nT,{announcements:s,onSelect:f})]})},rV=[{name:"Home",path:"home",icon:aD},{name:"Pages",path:"pages",icon:Tn},{name:"Discussion",path:"discussion",icon:Er},{name:"Assignments",path:"assignments",icon:aa},{name:"Announcements",path:"announcements",icon:ia},{name:"People",path:"people",icon:Wt}];function nV(){const{groupId:e}=br(),[t,r]=j.useState("Group"),[s,a]=j.useState("Group Set"),[i,l]=j.useState(""),[u,d]=j.useState([]),[h,f]=j.useState(!1),m=Lt(),[g,x]=j.useState([]),[v,b]=j.useState(!1),[w,C]=j.useState(""),N=JSON.parse(localStorage.getItem("user")||"{}"),E=(N==null?void 0:N.role)==="teacher",S=(N==null?void 0:N.role)==="admin";return j.useEffect(()=>{async function _(){var D;if(!e){console.log("[DEBUG] No groupId available");return}try{const T=localStorage.getItem("token");console.log("[DEBUG] Fetching group with ID:",e);const P=await me.get(`${ke}/api/groups/`+e,{headers:{Authorization:`Bearer ${T}`}});console.log("[DEBUG] Group response:",JSON.stringify(P.data,null,2)),r(P.data.name||"Group"),l(P.data.groupSet),a(P.data.groupSetName||"Group Set"),C(((D=P.data.course)==null?void 0:D._id)||P.data.course||""),console.log("[DEBUG] Set groupSetId to:",P.data.groupSet)}catch(T){console.error("[DEBUG] Error fetching group:",T),r("Group"),a("Group Set")}}_()},[e]),j.useEffect(()=>{async function _(){if(i)try{const D=localStorage.getItem("token"),T=await me.get(`${ke}/api/groups/sets/${i}/groups`,{headers:{Authorization:`Bearer ${D}`}});d(T.data)}catch{d([])}}_()},[i]),j.useEffect(()=>{if(!i||typeof i!="string"||i.length!==24){x([]);return}(async()=>{b(!0);try{const D=localStorage.getItem("token"),T=await me.get(`${ke}/api/assignments/groupset/${i}`,{headers:{Authorization:`Bearer ${D}`}});x(T.data)}catch{x([])}finally{b(!1)}})()},[i]),n.jsxs("div",{className:"max-w-6xl mx-auto py-8 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4 px-1",children:[n.jsx(Mt,{to:"/groups",className:"hover:underline text-gray-700 font-medium",children:"Group Management"}),n.jsx("span",{className:"mx-1 text-gray-300",children:">"}),n.jsx("span",{className:"text-gray-700 font-semibold",children:t})]}),n.jsxs("div",{className:"flex gap-8",children:[n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-white/80 backdrop-blur rounded-2xl shadow-lg p-6 h-fit relative border border-gray-100 mt-2",children:[n.jsxs("div",{className:"mb-8 border-b pb-3 relative",children:[E||S?n.jsxs("button",{className:"w-full flex items-center justify-between font-bold text-xl text-left focus:outline-none text-gray-900",onClick:()=>f(_=>!_),children:[n.jsxs("span",{children:[s," / ",t]}),n.jsx(Wb,{className:`h-5 w-5 ml-2 transition-transform ${h?"rotate-180":""}`})]}):n.jsxs("div",{className:"font-bold text-xl text-gray-900",children:[s," / ",t]}),h&&(E||S)&&n.jsx("div",{className:"absolute left-0 right-0 z-10 bg-white border rounded shadow mt-2 max-h-60 overflow-y-auto",children:u.map(_=>n.jsx("div",{className:`px-4 py-2 cursor-pointer hover:bg-blue-50 ${_._id===e?"bg-blue-100 font-semibold":""}`,onClick:()=>{f(!1),m(`/groups/${_._id}`)},children:_.name},_._id))})]}),n.jsx("nav",{className:"flex flex-col gap-1",children:rV.map(_=>{const D=_.icon;return n.jsxs(O6,{to:_.path,className:({isActive:T})=>T?"flex items-center gap-3 font-semibold text-blue-700 bg-blue-100 rounded-lg px-4 py-2 shadow":"flex items-center gap-3 text-gray-700 hover:text-blue-700 hover:bg-blue-50 rounded-lg px-4 py-2 transition-colors",end:!0,children:[n.jsx(D,{className:"h-5 w-5"}),n.jsx("span",{className:"text-base",children:_.name})]},_.path)})})]}),n.jsxs("main",{className:"flex-1 min-w-0",children:[window.location.pathname.includes("/assignments")&&n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Group Assignments"}),v?n.jsx("div",{children:"Loading assignments..."}):g.length===0?n.jsx("div",{className:"text-gray-500",children:"No assignments for this group set."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(_=>n.jsx(CW,{assignment:_,isInstructor:E,isAdmin:S,navigate:m},_._id))})]}),window.location.pathname.includes("/pages")&&e&&n.jsx(eV,{groupSetId:i,groupId:e,isInstructor:E}),window.location.pathname.includes("/announcements")&&i&&w&&n.jsx(tV,{groupSetId:i,courseId:w}),n.jsx(N6,{context:{groupSetId:i}})]})]})]})}const sV=()=>{const e=Lt(),{groupId:t}=br(),{user:r}=Et(),[s,a]=j.useState([]),[i,l]=j.useState(!0),[u,d]=j.useState(null),[h,f]=j.useState(!1),[m,g]=j.useState([]),[x,v]=j.useState(""),[b,w]=j.useState(""),[C,N]=j.useState([]),E=(r==null?void 0:r.role)==="teacher";j.useEffect(()=>{(async()=>{if(t)try{const P=localStorage.getItem("token"),O=await me.get(`${ke}/api/groups/${t}`,{headers:{Authorization:`Bearer ${P}`}});if(O.data){v(O.data.groupSet);const F=O.data.course;w(typeof F=="string"?F:(F==null?void 0:F._id)||"")}}catch(P){console.error("Error fetching group info:",P),d("Failed to load group information")}})()},[t]),j.useEffect(()=>{(async()=>{if(b)try{const P=localStorage.getItem("token"),O=await me.get(`${ke}/api/courses/${b}`,{headers:{Authorization:`Bearer ${P}`}});O.data.success&&N(O.data.data.groups||[])}catch(P){console.error("Error fetching course groups:",P)}})()},[b]),j.useEffect(()=>{(async()=>{if(b)try{const P=localStorage.getItem("token"),O=await me.get(`${ke}/api/modules/${b}`,{headers:{Authorization:`Bearer ${P}`}});let F=[];O.data&&Array.isArray(O.data.data)?F=O.data.data.map($=>({...$,title:$.name})):Array.isArray(O.data)&&(F=O.data.map($=>({...$,title:$.name}))),g(F)}catch{g([])}})()},[b]),j.useEffect(()=>{(async()=>{if(x)try{l(!0);const P=localStorage.getItem("token"),O=await Ie.get(`${ke}/api/threads/groupset/${x}`,{headers:{Authorization:`Bearer ${P}`}});O.data.success?a(O.data.data):d("Failed to fetch discussion threads")}catch(P){console.error("Error fetching threads:",P),d("Failed to load discussion threads")}finally{l(!1)}})()},[x]);const S=()=>{f(!0)},_=T=>{a(P=>[T,...P])},D=T=>{b?e(`/courses/${b}/threads/${T}`):(console.error("Course ID not found for this group. Cannot navigate to thread."),alert("Course ID not found for this group. Please contact your administrator."))};return i?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?n.jsx("div",{className:"text-red-500 text-center p-4",children:u}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Group Discussions"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Group-specific discussion threads and conversations"})]}),E&&n.jsxs("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Thread"]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No group discussion threads"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:E?"Get started by creating a new discussion thread for this group.":"There are no discussion threads yet for this group. Teachers will create threads here."}),E&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:S,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Thread"]})})]}):n.jsxs("div",{className:"space-y-4",children:[s.filter(T=>T.isPinned).length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Pinned Threads"}),n.jsx("div",{className:"space-y-4",children:s.filter(T=>T.isPinned).map(T=>n.jsxs("div",{onClick:()=>D(T._id),className:"p-4 bg-white border border-yellow-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer relative",children:[n.jsx("div",{className:"absolute top-2 right-2 text-yellow-500",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.715-5.349L11 4.477V16h2a1 1 0 110 2H7a1 1 0 110-2h2V4.477L6.237 7.582l1.715 5.349a1 1 0 01-.285 1.05A3.989 3.989 0 015 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.616a1 1 0 01.894-1.79l1.599.8L9 4.323V3a1 1 0 011-1z"})})}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[T.title,T.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",T.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",T.author.firstName," ",T.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:T.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(T.createdAt).toLocaleString(),children:mn(new Date(T.createdAt),{addSuffix:!0})}),T.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",mn(new Date(T.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.replyCount," ",T.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(T.lastActivity).toLocaleString(),children:["Last activity ",mn(new Date(T.lastActivity),{addSuffix:!0})]})]})]})]},T._id))})]}),s.filter(T=>!T.isPinned).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"All Threads"}),n.jsx("div",{className:"space-y-4",children:s.filter(T=>!T.isPinned).map(T=>n.jsx("div",{onClick:()=>D(T._id),className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:[T.title,T.isGraded&&n.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Graded (",T.totalPoints," points)"]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[n.jsxs("span",{children:["Posted by ",T.author.firstName," ",T.author.lastName,n.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:T.author.role})]}),n.jsx("span",{children:"•"}),n.jsx("span",{title:new Date(T.createdAt).toLocaleString(),children:mn(new Date(T.createdAt),{addSuffix:!0})}),T.dueDate&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{className:"text-orange-600",children:["Due ",mn(new Date(T.dueDate),{addSuffix:!0})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.replyCount," ",T.replyCount===1?"reply":"replies"]}),n.jsxs("div",{className:"text-gray-500",title:new Date(T.lastActivity).toLocaleString(),children:["Last activity ",mn(new Date(T.lastActivity),{addSuffix:!0})]})]})]})},T._id))})]})]})]}),E&&n.jsx(HD,{isOpen:h,onClose:()=>f(!1),courseId:b,onThreadCreated:_,courseGroups:C,modules:m,defaultGroupSetId:x})]})},aV=({groupId:e,groupSetId:t})=>{const[r,s]=j.useState([]),[a,i]=j.useState(!0),[l,u]=j.useState(null),[d,h]=j.useState(null),[f,m]=j.useState(""),[g,x]=j.useState([]),[v,b]=j.useState(!1),[w,C]=j.useState(null);j.useEffect(()=>{i(!0),u(null),me.get(`/api/groups/${e}/members`).then(S=>{s(S.data),i(!1)}).catch(S=>{u("Failed to load group members"),i(!1)})},[e]),j.useEffect(()=>{if(!f.trim()){x([]);return}b(!0),me.get(`/api/groups/sets/${t}/available-students?search=${encodeURIComponent(f)}`).then(S=>{x(S.data),b(!1)}).catch(()=>{x([]),b(!1)})},[f,t]);const N=S=>{h(S),me.delete(`/api/groups/${e}/members/${S}`).then(()=>{s(_=>_.filter(D=>D._id!==S)),h(null)}).catch(()=>{u("Failed to remove member"),h(null)})},E=S=>{C(S),me.post(`/api/groups/${e}/members`,{userId:S}).then(()=>{me.get(`/api/groups/${e}/members`).then(_=>s(_.data)),m(""),x([]),C(null)}).catch(()=>{u("Failed to add member"),C(null)})};return a?n.jsx("div",{children:"Loading group members..."}):l?n.jsx("div",{className:"text-red-500",children:l}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("input",{type:"text",id:"group-search-students",name:"search",className:"w-full border rounded px-4 py-2 mb-2",placeholder:"Search students by name or email",value:f,onChange:S=>m(S.target.value)}),v&&n.jsx("div",{className:"text-gray-500",children:"Searching..."}),f&&g.length>0&&n.jsx("div",{className:"bg-white border rounded shadow p-2 mt-1",children:g.map(S=>n.jsxs("div",{className:"flex justify-between items-center py-2 px-2 hover:bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[S.profilePicture?n.jsx("img",{src:S.profilePicture.startsWith("http")?S.profilePicture:`http://localhost:5000${S.profilePicture}`,alt:`${S.firstName} ${S.lastName}`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200",onError:_=>{_.currentTarget.style.display="none";const D=_.currentTarget.nextElementSibling;D&&(D.style.display="flex")}}):null,n.jsxs("div",{className:`w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${S.profilePicture?"hidden":""}`,style:{display:S.profilePicture?"none":"flex"},children:[S.firstName.charAt(0),S.lastName.charAt(0)]})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium",children:[S.firstName," ",S.lastName]}),n.jsx("span",{className:"text-gray-500 ml-2",children:S.email})]})]}),n.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",onClick:()=>E(S._id),disabled:w===S._id,children:w===S._id?"Adding...":"Add"})]},S._id))}),f&&!v&&g.length===0&&n.jsx("div",{className:"text-gray-500 p-2",children:"No students found."})]}),r.length===0?n.jsx("div",{children:"No members in this group."}):r.map(S=>n.jsxs("div",{className:"bg-white rounded shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[S.profilePicture?n.jsx("img",{src:S.profilePicture.startsWith("http")?S.profilePicture:`http://localhost:5000${S.profilePicture}`,alt:`${S.firstName} ${S.lastName}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200",onError:_=>{_.currentTarget.style.display="none";const D=_.currentTarget.nextElementSibling;D&&(D.style.display="flex")}}):null,n.jsxs("div",{className:`w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold ${S.profilePicture?"hidden":""}`,style:{display:S.profilePicture?"none":"flex"},children:[S.firstName.charAt(0),S.lastName.charAt(0)]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-lg",children:[S.firstName," ",S.lastName]}),n.jsx("div",{className:"text-gray-500",children:S.email})]})]}),n.jsx("button",{className:"mt-2 md:mt-0 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",onClick:()=>N(S._id),disabled:d===S._id,children:d===S._id?"Removing...":"Remove"})]},S._id))]})},iV=e=>{const t=[{label:"Account",icon:ko,to:"/account"},{label:"Dashboard",icon:JO,to:"/"},{label:"Courses",icon:or,to:"/courses"},{label:"Calendar",icon:zc,to:"/calendar"},{label:"Inbox",icon:n$,to:"/inbox"}];return e==="admin"?[...t,{label:"Users",icon:Wt,to:"/admin/users"},{label:"Settings",icon:Is,to:"/admin/settings"},{label:"Security",icon:hi,to:"/admin/security"}]:[...t,{label:"Groups",icon:Wt,to:"/groups"},{label:"Catalog",icon:Mi,to:"/catalog"}]};function oV(){const e=Gs(),t=Lt(),{user:r,logout:s}=Et(),{courses:a}=Go(),[i,l]=j.useState(!1),u=j.useRef(null);j.useEffect(()=>{const m=g=>{u.current&&!u.current.contains(g.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const d=()=>{s(),t("/login")},f=(r==null?void 0:r.role)==="teacher"||(r==null?void 0:r.role)==="admin"?a:a.filter(m=>m.published);return n.jsxs("nav",{className:"fixed top-0 left-0 h-full bg-blue-900 flex flex-col items-center py-4 z-50 shadow-lg border-r-2 border-blue-700",style:{width:"80px",minWidth:"80px"},"data-testid":"global-sidebar",children:[n.jsx("div",{className:"mb-6 flex flex-col items-center",children:n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-800 flex items-center justify-center mb-2",children:n.jsx("span",{className:"text-white text-lg font-bold",children:"UIS"})})}),n.jsx("div",{className:"flex-1 flex flex-col gap-2 items-center w-full",children:iV((r==null?void 0:r.role)||"").map(({label:m,icon:g,to:x})=>{var b,w;const v=x==="/courses"&&e.pathname.startsWith("/courses")||e.pathname===x;return m==="Account"?n.jsxs(Mt,{to:x,className:`flex flex-col items-center w-full py-2 transition-colors ${v?"bg-blue-800":"hover:bg-blue-800"} ${v?"text-blue-300":"text-white"}`,children:[n.jsx("div",{className:"h-5 w-5 mb-1 rounded-full bg-blue-700 flex items-center justify-center",children:r!=null&&r.profilePicture?n.jsx("img",{src:r.profilePicture,alt:`${r.firstName} ${r.lastName}`,className:"w-full h-full object-cover rounded-full",onError:()=>{}}):n.jsx("span",{className:"text-white text-xs font-bold",children:((b=r==null?void 0:r.firstName)==null?void 0:b.charAt(0))||((w=r==null?void 0:r.lastName)==null?void 0:w.charAt(0))||"U"})}),n.jsx("span",{className:"text-xs font-medium",children:m})]},m):m==="Courses"?n.jsxs("div",{className:"relative w-full",ref:u,onMouseLeave:()=>l(!1),children:[n.jsxs("button",{onClick:()=>l(!i),onMouseEnter:()=>l(!0),className:`flex flex-col items-center w-full py-2 transition-colors ${v?"bg-blue-800":"hover:bg-blue-800"} ${v?"text-blue-300":"text-white"}`,children:[n.jsx(or,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:m})]}),i&&f.length>0&&n.jsxs("div",{className:"absolute left-full top-0 ml-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 min-w-48 z-50",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-100",children:n.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Your Courses"})}),f.map(C=>{var E,S;const N=e.pathname.startsWith(`/courses/${C._id}`);return n.jsxs(Mt,{to:`/courses/${C._id}`,onClick:()=>l(!1),className:`block px-3 py-2 text-sm hover:bg-gray-50 transition-colors ${N?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"truncate",children:C.title}),N&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(E=C.instructor)==null?void 0:E.firstName," ",(S=C.instructor)==null?void 0:S.lastName]})]},C._id)})]})]},m):n.jsxs(Mt,{to:x,className:`flex flex-col items-center w-full py-2 transition-colors ${v?"bg-blue-800":"hover:bg-blue-800"} ${v?"text-blue-300":"text-white"}`,children:[n.jsx(g,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:m})]},m)})}),n.jsx("div",{className:"mt-2",children:n.jsxs("button",{onClick:d,className:"flex flex-col items-center w-full py-2 transition-colors hover:bg-blue-800 text-white",children:[n.jsx(f$,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:"Logout"})]})})]})}function ra(e){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(e)}function lV(e,t){if(ra(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ra(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CT(e){var t=lV(e,"string");return ra(t)=="symbol"?t:t+""}function di(e,t,r){return(t=CT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(s){di(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tm(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Bs(e,t){if(e==null)return{};var r,s,a=tm(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IS(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,CT(s.key),s)}}function Rr(e,t,r){return t&&IS(e.prototype,t),r&&IS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bf(e){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bf(e)}function _T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_T=function(){return!!e})()}function cV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uV(e,t){if(t&&(ra(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cV(e)}function an(e,t,r){return t=bf(t),uV(e,_T()?Reflect.construct(t,r||[],bf(e).constructor):t.apply(e,r))}function vf(e,t){return vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},vf(e,t)}function on(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vf(e,t)}function ET(e){if(Array.isArray(e))return e}function dV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,u=[],d=!0,h=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(s=i.call(r)).done)&&(u.push(s.value),u.length!==t);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(h)throw a}}return u}}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function zv(e,t){if(e){if(typeof e=="string")return Nb(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nb(e,t):void 0}}function DT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ki(e,t){return ET(e)||dV(e,t)||zv(e,t)||DT()}function AT(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=AT(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function jr(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=AT(e))&&(s&&(s+=" "),s+=t);return s}var Qp,MS;function fV(){if(MS)return Qp;MS=1;var e=function(t,r,s,a,i,l,u,d){if(!t){var h;if(r===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,a,i,l,u,d],m=0;h=new Error(r.replace(/%s/g,function(){return f[m++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Qp=e,Qp}var mV=fV();const Sc=Vr(mV);var hV=function(){};function pV(e,t){var r={};return Object.keys(e).forEach(function(s){r[Od(s)]=hV}),r}function OS(e,t){return e[t]!==void 0}function Od(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function gV(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function xV(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,vf(e,t)}function TT(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function PT(e){function t(r){var s=this.constructor.getDerivedStateFromProps(e,r);return s??null}this.setState(t.bind(this))}function RT(e,t){try{var r=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,s)}finally{this.props=r,this.state=s}}TT.__suppressDeprecationWarning=!0;PT.__suppressDeprecationWarning=!0;RT.__suppressDeprecationWarning=!0;function yV(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,s=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?s="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(s="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||s!==null||a!==null){var i=e.displayName||e.name,l=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=TT,t.componentWillReceiveProps=PT),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=RT;var u=t.componentDidUpdate;t.componentDidUpdate=function(h,f,m){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;u.call(this,h,f,g)}}return e}var bV="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function IT(e,t,r){r===void 0&&(r=[]);var s=e.displayName||e.name||"Component",a=gV(e),i=Object.keys(t),l=i.map(Od);a||!r.length||Sc(!1);var u=function(h){xV(f,h);function f(){for(var g,x=arguments.length,v=new Array(x),b=0;b<x;b++)v[b]=arguments[b];g=h.call.apply(h,[this].concat(v))||this,g.handlers=Object.create(null),i.forEach(function(C){var N=t[C],E=function(_){if(g.props[N]){var D;g._notifying=!0;for(var T=arguments.length,P=new Array(T>1?T-1:0),O=1;O<T;O++)P[O-1]=arguments[O];(D=g.props)[N].apply(D,[_].concat(P)),g._notifying=!1}g.unmounted||g.setState(function(F){var $,z=F.values;return{values:mr(Object.create(null),z,($={},$[C]=_,$))}})};g.handlers[N]=E}),r.length&&(g.attachRef=function(C){g.inner=C});var w=Object.create(null);return i.forEach(function(C){w[C]=g.props[Od(C)]}),g.state={values:w,prevProps:{}},g}var m=f.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(x,v){var b=v.values,w=v.prevProps,C={values:mr(Object.create(null),b),prevProps:{}};return i.forEach(function(N){C.prevProps[N]=x[N],!OS(x,N)&&OS(w,N)&&(C.values[N]=x[Od(N)])}),C},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var x=this,v=this.props,b=v.innerRef,w=tm(v,["innerRef"]);l.forEach(function(N){delete w[N]});var C={};return i.forEach(function(N){var E=x.props[N];C[N]=E!==void 0?E:x.state.values[N]}),Q.createElement(e,mr({},w,C,this.handlers,{ref:b||this.attachRef}))},f}(Q.Component);yV(u),u.displayName="Uncontrolled("+s+")",u.propTypes=mr({innerRef:function(){}},pV(t)),r.forEach(function(h){u.prototype[h]=function(){var m;return(m=this.inner)[h].apply(m,arguments)}});var d=u;return Q.forwardRef&&(d=Q.forwardRef(function(h,f){return Q.createElement(u,mr({},h,{innerRef:f,__source:{fileName:bV,lineNumber:128},__self:this}))}),d.propTypes=u.propTypes),d.ControlledComponent=e,d.deferControlTo=function(h,f,m){return f===void 0&&(f={}),IT(h,mr({},t,f),m)},d}var wf="milliseconds",kc="seconds",Cc="minutes",_c="hours",Ci="day",Po="week",Ec="month",_i="year",Ei="decade",Di="century",MT={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},vV={month:1,year:12,decade:10*12,century:100*12};function wV(e){return[31,jV(e),31,30,31,30,31,31,30,31,30,31]}function jV(e){return e%4===0&&e%100!==0||e%400===0?29:28}function js(e,t,r){switch(e=new Date(e),r){case wf:case kc:case Cc:case _c:case Ci:case Po:return NV(e,t*MT[r]);case Ec:case _i:case Ei:case Di:return SV(e,t*vV[r])}throw new TypeError('Invalid units: "'+r+'"')}function NV(e,t){var r=new Date(+e+t);return kV(e,r)}function SV(e,t){var r=e.getFullYear(),s=e.getMonth(),a=e.getDate(),i=r*12+s+t,l=Math.trunc(i/12),u=i%12,d=Math.min(a,wV(l)[u]),h=new Date(e);return h.setFullYear(l),h.setDate(1),h.setMonth(u),h.setDate(d),h}function kV(e,t){var r=e.getTimezoneOffset(),s=t.getTimezoneOffset(),a=s-r;return new Date(+t+a*MT.minutes)}function Dc(e,t,r){return js(e,-t,r)}function Hr(e,t,r){switch(e=new Date(e),t){case Di:case Ei:case _i:e=Nf(e,0);case Ec:e=BT(e,1);case Po:case Ci:e=Pc(e,0);case _c:e=Ro(e,0);case Cc:e=Tc(e,0);case kc:e=Ac(e,0)}return t===Ei&&(e=Dc(e,Ai(e)%10,"year")),t===Di&&(e=Dc(e,Ai(e)%100,"year")),t===Po&&(e=zT(e,0,r)),e}function jf(e,t,r){switch(e=new Date(e),e=Hr(e,t,r),t){case Di:case Ei:case _i:case Ec:case Po:e=js(e,1,t),e=Dc(e,1,Ci),e.setHours(23,59,59,999);break;case Ci:e.setHours(23,59,59,999);break;case _c:case Cc:case kc:e=js(e,1,t),e=Dc(e,1,wf)}return e}var Qo=Jo(function(e,t){return e===t}),Gv=Jo(function(e,t){return e!==t}),rm=Jo(function(e,t){return e>t}),Kc=Jo(function(e,t){return e>=t}),qv=Jo(function(e,t){return e<t}),Xo=Jo(function(e,t){return e<=t});function OT(){return new Date(Math.min.apply(Math,arguments))}function $T(){return new Date(Math.max.apply(Math,arguments))}function LT(e,t,r,s){return s=s||"day",(!t||Kc(e,t,s))&&(!r||Xo(e,r,s))}var Ac=za("Milliseconds"),Tc=za("Seconds"),Ro=za("Minutes"),Pc=za("Hours"),FT=za("Day"),BT=za("Date"),Nf=za("Month"),Ai=za("FullYear");function CV(e,t){return t===void 0?Ai(Hr(e,Ei)):js(e,t+10,_i)}function _V(e,t){return t===void 0?Ai(Hr(e,Di)):js(e,t+100,_i)}function zT(e,t,r){var s=(FT(e)+7-(r||0))%7;return t===void 0?s:js(e,t-s,Ci)}function EV(e,t,r,s){var a,i,l;switch(r){case wf:case kc:case Cc:case _c:case Ci:case Po:a=t.getTime()-e.getTime();break;case Ec:case _i:case Ei:case Di:a=(Ai(t)-Ai(e))*12+Nf(t)-Nf(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case wf:i=1;break;case kc:i=1e3;break;case Cc:i=1e3*60;break;case _c:i=1e3*60*60;break;case Ci:i=1e3*60*60*24;break;case Po:i=1e3*60*60*24*7;break;case Ec:i=1;break;case _i:i=12;break;case Ei:i=120;break;case Di:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return l=a/i,s?l:Math.round(l)}function za(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,s){if(s===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](s),t&&a["get"+e]()!=s&&(e==="Hours"||s>=t&&a.getHours()-r.getHours()<Math.floor(s/t))&&a["set"+e](s+t),a}}function Jo(e){return function(t,r,s){return e(+Hr(t,s),+Hr(r,s))}}const $S=Object.freeze(Object.defineProperty({__proto__:null,add:js,century:_V,date:BT,day:FT,decade:CV,diff:EV,endOf:jf,eq:Qo,gt:rm,gte:Kc,hours:Pc,inRange:LT,lt:qv,lte:Xo,max:$T,milliseconds:Ac,min:OT,minutes:Ro,month:Nf,neq:Gv,seconds:Tc,startOf:Hr,subtract:Dc,weekday:zT,year:Ai},Symbol.toStringTag,{value:"Module"}));function DV(e){if(Array.isArray(e))return Nb(e)}function GT(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d(e){return DV(e)||GT(e)||zv(e)||AV()}var Xp,LS;function qT(){if(LS)return Xp;LS=1;function e(t,r,s){var a=-1,i=t.length;r<0&&(r=-r>i?0:i+r),s=s>i?i:s,s<0&&(s+=i),i=r>s?0:s-r>>>0,r>>>=0;for(var l=Array(i);++a<i;)l[a]=t[a+r];return l}return Xp=e,Xp}var Jp,FS;function Qc(){if(FS)return Jp;FS=1;function e(t,r){return t===r||t!==t&&r!==r}return Jp=e,Jp}var Zp,BS;function UT(){if(BS)return Zp;BS=1;var e=typeof ud=="object"&&ud&&ud.Object===Object&&ud;return Zp=e,Zp}var eg,zS;function qs(){if(zS)return eg;zS=1;var e=UT(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return eg=r,eg}var tg,GS;function Zo(){if(GS)return tg;GS=1;var e=qs(),t=e.Symbol;return tg=t,tg}var rg,qS;function TV(){if(qS)return rg;qS=1;var e=Zo(),t=Object.prototype,r=t.hasOwnProperty,s=t.toString,a=e?e.toStringTag:void 0;function i(l){var u=r.call(l,a),d=l[a];try{l[a]=void 0;var h=!0}catch{}var f=s.call(l);return h&&(u?l[a]=d:delete l[a]),f}return rg=i,rg}var ng,US;function PV(){if(US)return ng;US=1;var e=Object.prototype,t=e.toString;function r(s){return t.call(s)}return ng=r,ng}var sg,WS;function el(){if(WS)return sg;WS=1;var e=Zo(),t=TV(),r=PV(),s="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function l(u){return u==null?u===void 0?a:s:i&&i in Object(u)?t(u):r(u)}return sg=l,sg}var ag,HS;function oa(){if(HS)return ag;HS=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ag=e,ag}var ig,VS;function Uv(){if(VS)return ig;VS=1;var e=el(),t=oa(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function l(u){if(!t(u))return!1;var d=e(u);return d==s||d==a||d==r||d==i}return ig=l,ig}var og,YS;function Wv(){if(YS)return og;YS=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return og=t,og}var lg,KS;function Xc(){if(KS)return lg;KS=1;var e=Uv(),t=Wv();function r(s){return s!=null&&t(s.length)&&!e(s)}return lg=r,lg}var cg,QS;function Hv(){if(QS)return cg;QS=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(s,a){var i=typeof s;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}return cg=r,cg}var ug,XS;function nm(){if(XS)return ug;XS=1;var e=Qc(),t=Xc(),r=Hv(),s=oa();function a(i,l,u){if(!s(u))return!1;var d=typeof l;return(d=="number"?t(u)&&r(l,u.length):d=="string"&&l in u)?e(u[l],i):!1}return ug=a,ug}var dg,JS;function RV(){if(JS)return dg;JS=1;var e=/\s/;function t(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return dg=t,dg}var fg,ZS;function IV(){if(ZS)return fg;ZS=1;var e=RV(),t=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(t,"")}return fg=r,fg}var mg,ek;function Ga(){if(ek)return mg;ek=1;function e(t){return t!=null&&typeof t=="object"}return mg=e,mg}var hg,tk;function Jc(){if(tk)return hg;tk=1;var e=el(),t=Ga(),r="[object Symbol]";function s(a){return typeof a=="symbol"||t(a)&&e(a)==r}return hg=s,hg}var pg,rk;function MV(){if(rk)return pg;rk=1;var e=IV(),t=oa(),r=Jc(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return s;if(t(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=t(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=e(h);var m=i.test(h);return m||l.test(h)?u(h.slice(2),m?2:8):a.test(h)?s:+h}return pg=d,pg}var gg,nk;function WT(){if(nk)return gg;nk=1;var e=MV(),t=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return gg=s,gg}var xg,sk;function HT(){if(sk)return xg;sk=1;var e=WT();function t(r){var s=e(r),a=s%1;return s===s?a?s-a:s:0}return xg=t,xg}var yg,ak;function OV(){if(ak)return yg;ak=1;var e=qT(),t=nm(),r=HT(),s=Math.ceil,a=Math.max;function i(l,u,d){(d?t(l,u,d):u===void 0)?u=1:u=a(r(u),0);var h=l==null?0:l.length;if(!h||u<1)return[];for(var f=0,m=0,g=Array(s(h/u));f<h;)g[m++]=e(l,f,f+=u);return g}return yg=i,yg}var $V=OV();const LV=Vr($V);function Zc(e){return e&&e.ownerDocument||document}function FV(e){var t=Zc(e);return t&&t.defaultView||window}function BV(e,t){return FV(e).getComputedStyle(e,t)}var zV=/([A-Z])/g;function GV(e){return e.replace(zV,"-$1").toLowerCase()}var qV=/^ms-/;function Sd(e){return GV(e).replace(qV,"-ms-")}var UV=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function WV(e){return!!(e&&UV.test(e))}function xo(e,t){var r="",s="";if(typeof t=="string")return e.style.getPropertyValue(Sd(t))||BV(e).getPropertyValue(Sd(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(Sd(a)):WV(a)?s+=a+"("+i+") ":r+=Sd(a)+": "+i+";"}),s&&(r+="transform: "+s+";"),e.style.cssText+=";"+r}function Rc(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function HV(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Vv(e){return"window"in e&&e.window===e?e:HV(e)&&e.defaultView||!1}function VT(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(s,a){var i=Vv(s);if(a===void 0)return i?i[e]:s[t];i?i.scrollTo(i[e],a):s[t]=a}return r}const YT=VT("pageXOffset"),KT=VT("pageYOffset");function gi(e){var t=Zc(e),r={top:0,left:0,height:0,width:0},s=t&&t.documentElement;return!s||!Rc(s,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+KT(s)-(s.clientTop||0),left:r.left+YT(s)-(s.clientLeft||0),width:r.width,height:r.height}),r}var VV=function(t){return!!t&&"offsetParent"in t};function YV(e){for(var t=Zc(e),r=e&&e.offsetParent;VV(r)&&r.nodeName!=="HTML"&&xo(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var KV=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function QT(e,t){var r={top:0,left:0},s;if(xo(e,"position")==="fixed")s=e.getBoundingClientRect();else{var a=t||YV(e);s=gi(e),KV(a)!=="html"&&(r=gi(a));var i=String(xo(a,"borderTopWidth")||0);r.top+=parseInt(i,10)-KT(a)||0;var l=String(xo(a,"borderLeftWidth")||0);r.left+=parseInt(l,10)-YT(a)||0}var u=String(xo(e,"marginTop")||0),d=String(xo(e,"marginLeft")||0);return mr({},s,{top:s.top-r.top-(parseInt(u,10)||0),left:s.left-r.left-(parseInt(d,10)||0)})}const Yv=!!(typeof window<"u"&&window.document&&window.document.createElement);var ik=new Date().getTime();function QV(e){var t=new Date().getTime(),r=Math.max(0,16-(t-ik)),s=setTimeout(e,r);return ik=t,s}var XV=["","webkit","moz","o","ms"],Sb="clearTimeout",kb=QV,ok=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Yv&&XV.some(function(e){var t=ok(e,"request");return t in window&&(Sb=ok(e,"cancel"),kb=function(s){return window[t](s)}),!!kb});var lk=function(t){typeof window[Sb]=="function"&&window[Sb](t)},XT=kb,bg;function JV(e,t){if(!bg){var r=document.body,s=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;bg=function(i,l){return s.call(i,l)}}return bg(e,t)}var ZV=Function.prototype.bind.call(Function.prototype.call,[].slice);function eY(e,t){return ZV(e.querySelectorAll(t))}var Cb=!1,_b=!1;try{var vg={get passive(){return Cb=!0},get once(){return _b=Cb=!0}};Yv&&(window.addEventListener("test",vg,vg),window.removeEventListener("test",vg,!0))}catch{}function tY(e,t,r,s){if(s&&typeof s!="boolean"&&!_b){var a=s.once,i=s.capture,l=r;!_b&&a&&(l=r.__once||function u(d){this.removeEventListener(t,u,i),r.call(this,d)},r.__once=l),e.addEventListener(t,l,Cb?s:i)}e.addEventListener(t,r,s)}function rY(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e},[e]),t}function ck(e){const t=rY(e);return j.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function uk(){return j.useState(null)}function nY(){const e=j.useRef(!0),t=j.useRef(()=>e.current);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function sY(e){const t=nY();return[e[0],j.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var En="top",us="bottom",ds="right",Dn="left",Kv="auto",eu=[En,us,ds,Dn],Io="start",Ic="end",aY="clippingParents",JT="viewport",ql="popper",iY="reference",dk=eu.reduce(function(e,t){return e.concat([t+"-"+Io,t+"-"+Ic])},[]),Qv=[].concat(eu,[Kv]).reduce(function(e,t){return e.concat([t,t+"-"+Io,t+"-"+Ic])},[]),oY="beforeRead",lY="read",cY="afterRead",uY="beforeMain",dY="main",fY="afterMain",mY="beforeWrite",hY="write",pY="afterWrite",gY=[oY,lY,cY,uY,dY,fY,mY,hY,pY];function Os(e){return e.split("-")[0]}function Vn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ti(e){var t=Vn(e).Element;return e instanceof t||e instanceof Element}function $s(e){var t=Vn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Xv(e){if(typeof ShadowRoot>"u")return!1;var t=Vn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var xi=Math.max,Sf=Math.min,Mo=Math.round;function Eb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ZT(){return!/^((?!chrome|android).)*safari/i.test(Eb())}function Oo(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var s=e.getBoundingClientRect(),a=1,i=1;t&&$s(e)&&(a=e.offsetWidth>0&&Mo(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Mo(s.height)/e.offsetHeight||1);var l=Ti(e)?Vn(e):window,u=l.visualViewport,d=!ZT()&&r,h=(s.left+(d&&u?u.offsetLeft:0))/a,f=(s.top+(d&&u?u.offsetTop:0))/i,m=s.width/a,g=s.height/i;return{width:m,height:g,top:f,right:h+m,bottom:f+g,left:h,x:h,y:f}}function Jv(e){var t=Oo(e),r=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:s}}function eP(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Xv(r)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function $a(e){return e?(e.nodeName||"").toLowerCase():null}function na(e){return Vn(e).getComputedStyle(e)}function xY(e){return["table","td","th"].indexOf($a(e))>=0}function qa(e){return((Ti(e)?e.ownerDocument:e.document)||window.document).documentElement}function sm(e){return $a(e)==="html"?e:e.assignedSlot||e.parentNode||(Xv(e)?e.host:null)||qa(e)}function fk(e){return!$s(e)||na(e).position==="fixed"?null:e.offsetParent}function yY(e){var t=/firefox/i.test(Eb()),r=/Trident/i.test(Eb());if(r&&$s(e)){var s=na(e);if(s.position==="fixed")return null}var a=sm(e);for(Xv(a)&&(a=a.host);$s(a)&&["html","body"].indexOf($a(a))<0;){var i=na(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function tu(e){for(var t=Vn(e),r=fk(e);r&&xY(r)&&na(r).position==="static";)r=fk(r);return r&&($a(r)==="html"||$a(r)==="body"&&na(r).position==="static")?t:r||yY(e)||t}function Zv(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nc(e,t,r){return xi(e,Sf(t,r))}function bY(e,t,r){var s=nc(e,t,r);return s>r?r:s}function tP(){return{top:0,right:0,bottom:0,left:0}}function rP(e){return Object.assign({},tP(),e)}function nP(e,t){return t.reduce(function(r,s){return r[s]=e,r},{})}var vY=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,rP(typeof t!="number"?t:nP(t,eu))};function wY(e){var t,r=e.state,s=e.name,a=e.options,i=r.elements.arrow,l=r.modifiersData.popperOffsets,u=Os(r.placement),d=Zv(u),h=[Dn,ds].indexOf(u)>=0,f=h?"height":"width";if(!(!i||!l)){var m=vY(a.padding,r),g=Jv(i),x=d==="y"?En:Dn,v=d==="y"?us:ds,b=r.rects.reference[f]+r.rects.reference[d]-l[d]-r.rects.popper[f],w=l[d]-r.rects.reference[d],C=tu(i),N=C?d==="y"?C.clientHeight||0:C.clientWidth||0:0,E=b/2-w/2,S=m[x],_=N-g[f]-m[v],D=N/2-g[f]/2+E,T=nc(S,D,_),P=d;r.modifiersData[s]=(t={},t[P]=T,t.centerOffset=T-D,t)}}function jY(e){var t=e.state,r=e.options,s=r.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||eP(t.elements.popper,a)&&(t.elements.arrow=a))}const NY={name:"arrow",enabled:!0,phase:"main",fn:wY,effect:jY,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $o(e){return e.split("-")[1]}var SY={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kY(e,t){var r=e.x,s=e.y,a=t.devicePixelRatio||1;return{x:Mo(r*a)/a||0,y:Mo(s*a)/a||0}}function mk(e){var t,r=e.popper,s=e.popperRect,a=e.placement,i=e.variation,l=e.offsets,u=e.position,d=e.gpuAcceleration,h=e.adaptive,f=e.roundOffsets,m=e.isFixed,g=l.x,x=g===void 0?0:g,v=l.y,b=v===void 0?0:v,w=typeof f=="function"?f({x,y:b}):{x,y:b};x=w.x,b=w.y;var C=l.hasOwnProperty("x"),N=l.hasOwnProperty("y"),E=Dn,S=En,_=window;if(h){var D=tu(r),T="clientHeight",P="clientWidth";if(D===Vn(r)&&(D=qa(r),na(D).position!=="static"&&u==="absolute"&&(T="scrollHeight",P="scrollWidth")),D=D,a===En||(a===Dn||a===ds)&&i===Ic){S=us;var O=m&&D===_&&_.visualViewport?_.visualViewport.height:D[T];b-=O-s.height,b*=d?1:-1}if(a===Dn||(a===En||a===us)&&i===Ic){E=ds;var F=m&&D===_&&_.visualViewport?_.visualViewport.width:D[P];x-=F-s.width,x*=d?1:-1}}var $=Object.assign({position:u},h&&SY),z=f===!0?kY({x,y:b},Vn(r)):{x,y:b};if(x=z.x,b=z.y,d){var q;return Object.assign({},$,(q={},q[S]=N?"0":"",q[E]=C?"0":"",q.transform=(_.devicePixelRatio||1)<=1?"translate("+x+"px, "+b+"px)":"translate3d("+x+"px, "+b+"px, 0)",q))}return Object.assign({},$,(t={},t[S]=N?b+"px":"",t[E]=C?x+"px":"",t.transform="",t))}function CY(e){var t=e.state,r=e.options,s=r.gpuAcceleration,a=s===void 0?!0:s,i=r.adaptive,l=i===void 0?!0:i,u=r.roundOffsets,d=u===void 0?!0:u,h={placement:Os(t.placement),variation:$o(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mk(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mk(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _Y={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:CY,data:{}};var kd={passive:!0};function EY(e){var t=e.state,r=e.instance,s=e.options,a=s.scroll,i=a===void 0?!0:a,l=s.resize,u=l===void 0?!0:l,d=Vn(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&h.forEach(function(f){f.addEventListener("scroll",r.update,kd)}),u&&d.addEventListener("resize",r.update,kd),function(){i&&h.forEach(function(f){f.removeEventListener("scroll",r.update,kd)}),u&&d.removeEventListener("resize",r.update,kd)}}const DY={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:EY,data:{}};var AY={left:"right",right:"left",bottom:"top",top:"bottom"};function Ld(e){return e.replace(/left|right|bottom|top/g,function(t){return AY[t]})}var TY={start:"end",end:"start"};function hk(e){return e.replace(/start|end/g,function(t){return TY[t]})}function ew(e){var t=Vn(e),r=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:r,scrollTop:s}}function tw(e){return Oo(qa(e)).left+ew(e).scrollLeft}function PY(e,t){var r=Vn(e),s=qa(e),a=r.visualViewport,i=s.clientWidth,l=s.clientHeight,u=0,d=0;if(a){i=a.width,l=a.height;var h=ZT();(h||!h&&t==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:i,height:l,x:u+tw(e),y:d}}function RY(e){var t,r=qa(e),s=ew(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=xi(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=xi(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),u=-s.scrollLeft+tw(e),d=-s.scrollTop;return na(a||r).direction==="rtl"&&(u+=xi(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:l,x:u,y:d}}function rw(e){var t=na(e),r=t.overflow,s=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+s)}function sP(e){return["html","body","#document"].indexOf($a(e))>=0?e.ownerDocument.body:$s(e)&&rw(e)?e:sP(sm(e))}function sc(e,t){var r;t===void 0&&(t=[]);var s=sP(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Vn(s),l=a?[i].concat(i.visualViewport||[],rw(s)?s:[]):s,u=t.concat(l);return a?u:u.concat(sc(sm(l)))}function Db(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function IY(e,t){var r=Oo(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function pk(e,t,r){return t===JT?Db(PY(e,r)):Ti(t)?IY(t,r):Db(RY(qa(e)))}function MY(e){var t=sc(sm(e)),r=["absolute","fixed"].indexOf(na(e).position)>=0,s=r&&$s(e)?tu(e):e;return Ti(s)?t.filter(function(a){return Ti(a)&&eP(a,s)&&$a(a)!=="body"}):[]}function OY(e,t,r,s){var a=t==="clippingParents"?MY(e):[].concat(t),i=[].concat(a,[r]),l=i[0],u=i.reduce(function(d,h){var f=pk(e,h,s);return d.top=xi(f.top,d.top),d.right=Sf(f.right,d.right),d.bottom=Sf(f.bottom,d.bottom),d.left=xi(f.left,d.left),d},pk(e,l,s));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function aP(e){var t=e.reference,r=e.element,s=e.placement,a=s?Os(s):null,i=s?$o(s):null,l=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,d;switch(a){case En:d={x:l,y:t.y-r.height};break;case us:d={x:l,y:t.y+t.height};break;case ds:d={x:t.x+t.width,y:u};break;case Dn:d={x:t.x-r.width,y:u};break;default:d={x:t.x,y:t.y}}var h=a?Zv(a):null;if(h!=null){var f=h==="y"?"height":"width";switch(i){case Io:d[h]=d[h]-(t[f]/2-r[f]/2);break;case Ic:d[h]=d[h]+(t[f]/2-r[f]/2);break}}return d}function Mc(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=s===void 0?e.placement:s,i=r.strategy,l=i===void 0?e.strategy:i,u=r.boundary,d=u===void 0?aY:u,h=r.rootBoundary,f=h===void 0?JT:h,m=r.elementContext,g=m===void 0?ql:m,x=r.altBoundary,v=x===void 0?!1:x,b=r.padding,w=b===void 0?0:b,C=rP(typeof w!="number"?w:nP(w,eu)),N=g===ql?iY:ql,E=e.rects.popper,S=e.elements[v?N:g],_=OY(Ti(S)?S:S.contextElement||qa(e.elements.popper),d,f,l),D=Oo(e.elements.reference),T=aP({reference:D,element:E,placement:a}),P=Db(Object.assign({},E,T)),O=g===ql?P:D,F={top:_.top-O.top+C.top,bottom:O.bottom-_.bottom+C.bottom,left:_.left-O.left+C.left,right:O.right-_.right+C.right},$=e.modifiersData.offset;if(g===ql&&$){var z=$[a];Object.keys(F).forEach(function(q){var H=[ds,us].indexOf(q)>=0?1:-1,re=[En,us].indexOf(q)>=0?"y":"x";F[q]+=z[re]*H})}return F}function $Y(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=r.boundary,i=r.rootBoundary,l=r.padding,u=r.flipVariations,d=r.allowedAutoPlacements,h=d===void 0?Qv:d,f=$o(s),m=f?u?dk:dk.filter(function(v){return $o(v)===f}):eu,g=m.filter(function(v){return h.indexOf(v)>=0});g.length===0&&(g=m);var x=g.reduce(function(v,b){return v[b]=Mc(e,{placement:b,boundary:a,rootBoundary:i,padding:l})[Os(b)],v},{});return Object.keys(x).sort(function(v,b){return x[v]-x[b]})}function LY(e){if(Os(e)===Kv)return[];var t=Ld(e);return[hk(e),t,hk(t)]}function FY(e){var t=e.state,r=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,l=r.altAxis,u=l===void 0?!0:l,d=r.fallbackPlacements,h=r.padding,f=r.boundary,m=r.rootBoundary,g=r.altBoundary,x=r.flipVariations,v=x===void 0?!0:x,b=r.allowedAutoPlacements,w=t.options.placement,C=Os(w),N=C===w,E=d||(N||!v?[Ld(w)]:LY(w)),S=[w].concat(E).reduce(function(Ce,Se){return Ce.concat(Os(Se)===Kv?$Y(t,{placement:Se,boundary:f,rootBoundary:m,padding:h,flipVariations:v,allowedAutoPlacements:b}):Se)},[]),_=t.rects.reference,D=t.rects.popper,T=new Map,P=!0,O=S[0],F=0;F<S.length;F++){var $=S[F],z=Os($),q=$o($)===Io,H=[En,us].indexOf(z)>=0,re=H?"width":"height",ee=Mc(t,{placement:$,boundary:f,rootBoundary:m,altBoundary:g,padding:h}),L=H?q?ds:Dn:q?us:En;_[re]>D[re]&&(L=Ld(L));var M=Ld(L),W=[];if(i&&W.push(ee[z]<=0),u&&W.push(ee[L]<=0,ee[M]<=0),W.every(function(Ce){return Ce})){O=$,P=!1;break}T.set($,W)}if(P)for(var R=v?3:1,U=function(Se){var G=S.find(function(ae){var X=T.get(ae);if(X)return X.slice(0,Se).every(function(V){return V})});if(G)return O=G,"break"},Z=R;Z>0;Z--){var B=U(Z);if(B==="break")break}t.placement!==O&&(t.modifiersData[s]._skip=!0,t.placement=O,t.reset=!0)}}const BY={name:"flip",enabled:!0,phase:"main",fn:FY,requiresIfExists:["offset"],data:{_skip:!1}};function gk(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function xk(e){return[En,ds,us,Dn].some(function(t){return e[t]>=0})}function zY(e){var t=e.state,r=e.name,s=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,l=Mc(t,{elementContext:"reference"}),u=Mc(t,{altBoundary:!0}),d=gk(l,s),h=gk(u,a,i),f=xk(d),m=xk(h);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":m})}const GY={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:zY};function qY(e,t,r){var s=Os(e),a=[Dn,En].indexOf(s)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=i[0],u=i[1];return l=l||0,u=(u||0)*a,[Dn,ds].indexOf(s)>=0?{x:u,y:l}:{x:l,y:u}}function UY(e){var t=e.state,r=e.options,s=e.name,a=r.offset,i=a===void 0?[0,0]:a,l=Qv.reduce(function(f,m){return f[m]=qY(m,t.rects,i),f},{}),u=l[t.placement],d=u.x,h=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=l}const WY={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:UY};function HY(e){var t=e.state,r=e.name;t.modifiersData[r]=aP({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const VY={name:"popperOffsets",enabled:!0,phase:"read",fn:HY,data:{}};function YY(e){return e==="x"?"y":"x"}function KY(e){var t=e.state,r=e.options,s=e.name,a=r.mainAxis,i=a===void 0?!0:a,l=r.altAxis,u=l===void 0?!1:l,d=r.boundary,h=r.rootBoundary,f=r.altBoundary,m=r.padding,g=r.tether,x=g===void 0?!0:g,v=r.tetherOffset,b=v===void 0?0:v,w=Mc(t,{boundary:d,rootBoundary:h,padding:m,altBoundary:f}),C=Os(t.placement),N=$o(t.placement),E=!N,S=Zv(C),_=YY(S),D=t.modifiersData.popperOffsets,T=t.rects.reference,P=t.rects.popper,O=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,F=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,z={x:0,y:0};if(D){if(i){var q,H=S==="y"?En:Dn,re=S==="y"?us:ds,ee=S==="y"?"height":"width",L=D[S],M=L+w[H],W=L-w[re],R=x?-P[ee]/2:0,U=N===Io?T[ee]:P[ee],Z=N===Io?-P[ee]:-T[ee],B=t.elements.arrow,Ce=x&&B?Jv(B):{width:0,height:0},Se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:tP(),G=Se[H],ae=Se[re],X=nc(0,T[ee],Ce[ee]),V=E?T[ee]/2-R-X-G-F.mainAxis:U-X-G-F.mainAxis,ie=E?-T[ee]/2+R+X+ae+F.mainAxis:Z+X+ae+F.mainAxis,be=t.elements.arrow&&tu(t.elements.arrow),ve=be?S==="y"?be.clientTop||0:be.clientLeft||0:0,Pe=(q=$==null?void 0:$[S])!=null?q:0,He=L+V-Pe-ve,Je=L+ie-Pe,le=nc(x?Sf(M,He):M,L,x?xi(W,Je):W);D[S]=le,z[S]=le-L}if(u){var fe,Ae=S==="x"?En:Dn,Ge=S==="x"?us:ds,Ye=D[_],ye=_==="y"?"height":"width",he=Ye+w[Ae],ne=Ye-w[Ge],Te=[En,Dn].indexOf(C)!==-1,Be=(fe=$==null?void 0:$[_])!=null?fe:0,oe=Te?he:Ye-T[ye]-P[ye]-Be+F.altAxis,Ne=Te?Ye+T[ye]+P[ye]-Be-F.altAxis:ne,pe=x&&Te?bY(oe,Ye,Ne):nc(x?oe:he,Ye,x?Ne:ne);D[_]=pe,z[_]=pe-Ye}t.modifiersData[s]=z}}const QY={name:"preventOverflow",enabled:!0,phase:"main",fn:KY,requiresIfExists:["offset"]};function XY(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function JY(e){return e===Vn(e)||!$s(e)?ew(e):XY(e)}function ZY(e){var t=e.getBoundingClientRect(),r=Mo(t.width)/e.offsetWidth||1,s=Mo(t.height)/e.offsetHeight||1;return r!==1||s!==1}function eK(e,t,r){r===void 0&&(r=!1);var s=$s(t),a=$s(t)&&ZY(t),i=qa(t),l=Oo(e,a,r),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!r)&&(($a(t)!=="body"||rw(i))&&(u=JY(t)),$s(t)?(d=Oo(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=tw(i))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function tK(e){var t=new Map,r=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(u){if(!r.has(u)){var d=t.get(u);d&&a(d)}}),s.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),s}function rK(e){var t=tK(e);return gY.reduce(function(r,s){return r.concat(t.filter(function(a){return a.phase===s}))},[])}function nK(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function sK(e){var t=e.reduce(function(r,s){var a=r[s.name];return r[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,r},{});return Object.keys(t).map(function(r){return t[r]})}var yk={placement:"bottom",modifiers:[],strategy:"absolute"};function bk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function aK(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,s=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?yk:a;return function(u,d,h){h===void 0&&(h=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},yk,i),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],g=!1,x={state:f,setOptions:function(C){var N=typeof C=="function"?C(f.options):C;b(),f.options=Object.assign({},i,f.options,N),f.scrollParents={reference:Ti(u)?sc(u):u.contextElement?sc(u.contextElement):[],popper:sc(d)};var E=rK(sK([].concat(s,f.options.modifiers)));return f.orderedModifiers=E.filter(function(S){return S.enabled}),v(),x.update()},forceUpdate:function(){if(!g){var C=f.elements,N=C.reference,E=C.popper;if(bk(N,E)){f.rects={reference:eK(N,tu(E),f.options.strategy==="fixed"),popper:Jv(E)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(F){return f.modifiersData[F.name]=Object.assign({},F.data)});for(var S=0;S<f.orderedModifiers.length;S++){if(f.reset===!0){f.reset=!1,S=-1;continue}var _=f.orderedModifiers[S],D=_.fn,T=_.options,P=T===void 0?{}:T,O=_.name;typeof D=="function"&&(f=D({state:f,options:P,name:O,instance:x})||f)}}}},update:nK(function(){return new Promise(function(w){x.forceUpdate(),w(f)})}),destroy:function(){b(),g=!0}};if(!bk(u,d))return x;x.setOptions(h).then(function(w){!g&&h.onFirstUpdate&&h.onFirstUpdate(w)});function v(){f.orderedModifiers.forEach(function(w){var C=w.name,N=w.options,E=N===void 0?{}:N,S=w.effect;if(typeof S=="function"){var _=S({state:f,name:C,instance:x,options:E}),D=function(){};m.push(_||D)}})}function b(){m.forEach(function(w){return w()}),m=[]}return x}}var iK=aK({defaultModifiers:[GY,VY,_Y,DY,WY,BY,QY,NY]}),vk=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},oK={name:"applyStyles",enabled:!1},lK={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var s=r.elements,a=s.reference,i=s.popper;if("removeAttribute"in a){var l=(a.getAttribute("aria-describedby")||"").split(",").filter(function(u){return u.trim()!==i.id});l.length?a.setAttribute("aria-describedby",l.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,s=t.state,a=s.elements,i=a.popper,l=a.reference,u=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&u==="tooltip"&&"setAttribute"in l){var d=l.getAttribute("aria-describedby");if(d&&d.split(",").indexOf(i.id)!==-1)return;l.setAttribute("aria-describedby",d?d+","+i.id:i.id)}}},cK=[];function uK(e,t,r){var s=r===void 0?{}:r,a=s.enabled,i=a===void 0?!0:a,l=s.placement,u=l===void 0?"bottom":l,d=s.strategy,h=d===void 0?"absolute":d,f=s.modifiers,m=f===void 0?cK:f,g=tm(s,["enabled","placement","strategy","modifiers"]),x=j.useRef(),v=j.useCallback(function(){var S;(S=x.current)==null||S.update()},[]),b=j.useCallback(function(){var S;(S=x.current)==null||S.forceUpdate()},[]),w=sY(j.useState({placement:u,update:v,forceUpdate:b,attributes:{},styles:{popper:vk(h),arrow:{}}})),C=w[0],N=w[1],E=j.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(_){var D=_.state,T={},P={};Object.keys(D.elements).forEach(function(O){T[O]=D.styles[O],P[O]=D.attributes[O]}),N({state:D,styles:T,attributes:P,update:v,forceUpdate:b,placement:D.placement})}}},[v,b,N]);return j.useEffect(function(){!x.current||!i||x.current.setOptions({placement:u,strategy:h,modifiers:[].concat(m,[E,oK])})},[h,u,E,i]),j.useEffect(function(){if(!(!i||e==null||t==null))return x.current=iK(e,t,mr({},g,{placement:u,strategy:h,modifiers:[].concat(m,[lK,E])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,N(function(S){return mr({},S,{attributes:{},styles:{popper:vk(h)}})}))}},[i,e,t]),C}function dK(e,t,r,s){var a=s&&typeof s!="boolean"?s.capture:s;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function Yl(e,t,r,s){return tY(e,t,r,s),function(){dK(e,t,r,s)}}var wg,wk;function fK(){if(wk)return wg;wk=1;var e=function(){};return wg=e,wg}var mK=fK();const hK=Vr(mK);function pK(e){return e&&"setState"in e?Ob.findDOMNode(e):e??null}const gK=function(e){return Zc(pK(e))};var xK=27,jk=function(){};function yK(e){return e.button===0}function bK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Nk=function(t){return t&&("current"in t?t.current:t)};function vK(e,t,r){var s=r===void 0?{}:r,a=s.disabled,i=s.clickTrigger,l=i===void 0?"click":i,u=j.useRef(!1),d=t||jk,h=j.useCallback(function(g){var x,v=Nk(e);hK(!!v,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),u.current=!v||bK(g)||!yK(g)||!!Rc(v,(x=g.composedPath==null?void 0:g.composedPath()[0])!=null?x:g.target)},[e]),f=ck(function(g){u.current||d(g)}),m=ck(function(g){g.keyCode===xK&&d(g)});j.useEffect(function(){if(!(a||e==null)){var g=window.event,x=gK(Nk(e)),v=Yl(x,l,h,!0),b=Yl(x,l,function(N){if(N===g){g=void 0;return}f(N)}),w=Yl(x,"keyup",function(N){if(N===g){g=void 0;return}m(N)}),C=[];return"ontouchstart"in x.documentElement&&(C=[].slice.call(x.body.children).map(function(N){return Yl(N,"mousemove",jk)})),function(){v(),b(),w(),C.forEach(function(N){return N()})}}},[e,a,l,h,f,m])}function wK(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function jK(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function NK(e){var t,r,s,a,i=e.enabled,l=e.enableEvents,u=e.placement,d=e.flip,h=e.offset,f=e.fixed,m=e.containerPadding,g=e.arrowElement,x=e.popperConfig,v=x===void 0?{}:x,b=wK(v.modifiers);return mr({},v,{placement:u,enabled:i,strategy:f?"fixed":v.strategy,modifiers:jK(mr({},b,{eventListeners:{enabled:l},preventOverflow:mr({},b.preventOverflow,{options:m?mr({padding:m},(t=b.preventOverflow)==null?void 0:t.options):(r=b.preventOverflow)==null?void 0:r.options}),offset:{options:mr({offset:h},(s=b.offset)==null?void 0:s.options)},arrow:mr({},b.arrow,{enabled:!!g,options:mr({},(a=b.arrow)==null?void 0:a.options,{element:g})}),flip:mr({enabled:!!d},b.flip)}))})}function SK(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function kK(e,t){e.classList?e.classList.add(t):SK(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Sk(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function CK(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Sk(e.className,t):e.setAttribute("class",Sk(e.className&&e.className.baseVal||"",t))}var Cd;function nw(e){if((!Cd&&Cd!==0||e)&&Yv){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Cd=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Cd}var jg=function(t){var r;return typeof document>"u"?null:t==null?Zc().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function kk(e,t){var r=j.useState(function(){return jg(e)}),s=r[0],a=r[1];if(!s){var i=jg(e);i&&a(i)}return j.useEffect(function(){},[t,s]),j.useEffect(function(){var l=jg(e);l!==s&&a(l)},[e,s]),s}const Ck=e=>!e||typeof e=="function"?e:t=>{e.current=t};function _K(e,t){const r=Ck(e),s=Ck(t);return a=>{r&&r(a),s&&s(a)}}function EK(e,t){return j.useMemo(()=>_K(e,t),[e,t])}var sw=Q.forwardRef(function(e,t){var r=e.flip,s=e.offset,a=e.placement,i=e.containerPadding,l=i===void 0?5:i,u=e.popperConfig,d=u===void 0?{}:u,h=e.transition,f=uk(),m=f[0],g=f[1],x=uk(),v=x[0],b=x[1],w=EK(g,t),C=kk(e.container),N=kk(e.target),E=j.useState(!e.show),S=E[0],_=E[1],D=uK(N,m,NK({placement:a,enableEvents:!!e.show,containerPadding:l||5,flip:r,offset:s,arrowElement:v,popperConfig:d})),T=D.styles,P=D.attributes,O=tm(D,["styles","attributes"]);e.show?S&&_(!1):!e.transition&&!S&&_(!0);var F=function(){_(!0),e.onExited&&e.onExited.apply(e,arguments)},$=e.show||h&&!S;if(vK(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!$)return null;var z=e.children(mr({},O,{show:!!e.show,props:mr({},P.popper,{style:T.popper,ref:w}),arrowProps:mr({},P.arrow,{style:T.arrow,ref:b})}));if(h){var q=e.onExit,H=e.onExiting,re=e.onEnter,ee=e.onEntering,L=e.onEntered;z=Q.createElement(h,{in:e.show,appear:!0,onExit:q,onExiting:H,onExited:F,onEnter:re,onEntering:ee,onEntered:L},z)}return C?Ob.createPortal(z,C):null});sw.displayName="Overlay";sw.propTypes={show:ze.bool,placement:ze.oneOf(Qv),target:ze.any,container:ze.any,flip:ze.bool,children:ze.func.isRequired,containerPadding:ze.number,popperConfig:ze.object,rootClose:ze.bool,rootCloseEvent:ze.oneOf(["click","mousedown"]),rootCloseDisabled:ze.bool,onHide:function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];if(t.rootClose){var i;return(i=ze.func).isRequired.apply(i,[t].concat(s))}return ze.func.apply(ze,[t].concat(s))},transition:ze.elementType,onEnter:ze.func,onEntering:ze.func,onEntered:ze.func,onExit:ze.func,onExiting:ze.func,onExited:ze.func};var Ng,_k;function DK(){if(_k)return Ng;_k=1;function e(){this.__data__=[],this.size=0}return Ng=e,Ng}var Sg,Ek;function am(){if(Ek)return Sg;Ek=1;var e=Qc();function t(r,s){for(var a=r.length;a--;)if(e(r[a][0],s))return a;return-1}return Sg=t,Sg}var kg,Dk;function AK(){if(Dk)return kg;Dk=1;var e=am(),t=Array.prototype,r=t.splice;function s(a){var i=this.__data__,l=e(i,a);if(l<0)return!1;var u=i.length-1;return l==u?i.pop():r.call(i,l,1),--this.size,!0}return kg=s,kg}var Cg,Ak;function TK(){if(Ak)return Cg;Ak=1;var e=am();function t(r){var s=this.__data__,a=e(s,r);return a<0?void 0:s[a][1]}return Cg=t,Cg}var _g,Tk;function PK(){if(Tk)return _g;Tk=1;var e=am();function t(r){return e(this.__data__,r)>-1}return _g=t,_g}var Eg,Pk;function RK(){if(Pk)return Eg;Pk=1;var e=am();function t(r,s){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,s])):a[i][1]=s,this}return Eg=t,Eg}var Dg,Rk;function im(){if(Rk)return Dg;Rk=1;var e=DK(),t=AK(),r=TK(),s=PK(),a=RK();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var h=l[u];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,Dg=i,Dg}var Ag,Ik;function IK(){if(Ik)return Ag;Ik=1;var e=im();function t(){this.__data__=new e,this.size=0}return Ag=t,Ag}var Tg,Mk;function MK(){if(Mk)return Tg;Mk=1;function e(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}return Tg=e,Tg}var Pg,Ok;function OK(){if(Ok)return Pg;Ok=1;function e(t){return this.__data__.get(t)}return Pg=e,Pg}var Rg,$k;function $K(){if($k)return Rg;$k=1;function e(t){return this.__data__.has(t)}return Rg=e,Rg}var Ig,Lk;function LK(){if(Lk)return Ig;Lk=1;var e=qs(),t=e["__core-js_shared__"];return Ig=t,Ig}var Mg,Fk;function FK(){if(Fk)return Mg;Fk=1;var e=LK(),t=function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function r(s){return!!t&&t in s}return Mg=r,Mg}var Og,Bk;function iP(){if(Bk)return Og;Bk=1;var e=Function.prototype,t=e.toString;function r(s){if(s!=null){try{return t.call(s)}catch{}try{return s+""}catch{}}return""}return Og=r,Og}var $g,zk;function BK(){if(zk)return $g;zk=1;var e=Uv(),t=FK(),r=oa(),s=iP(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,d=l.toString,h=u.hasOwnProperty,f=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!r(g)||t(g))return!1;var x=e(g)?f:i;return x.test(s(g))}return $g=m,$g}var Lg,Gk;function zK(){if(Gk)return Lg;Gk=1;function e(t,r){return t==null?void 0:t[r]}return Lg=e,Lg}var Fg,qk;function $i(){if(qk)return Fg;qk=1;var e=BK(),t=zK();function r(s,a){var i=t(s,a);return e(i)?i:void 0}return Fg=r,Fg}var Bg,Uk;function aw(){if(Uk)return Bg;Uk=1;var e=$i(),t=qs(),r=e(t,"Map");return Bg=r,Bg}var zg,Wk;function om(){if(Wk)return zg;Wk=1;var e=$i(),t=e(Object,"create");return zg=t,zg}var Gg,Hk;function GK(){if(Hk)return Gg;Hk=1;var e=om();function t(){this.__data__=e?e(null):{},this.size=0}return Gg=t,Gg}var qg,Vk;function qK(){if(Vk)return qg;Vk=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return qg=e,qg}var Ug,Yk;function UK(){if(Yk)return Ug;Yk=1;var e=om(),t="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(i){var l=this.__data__;if(e){var u=l[i];return u===t?void 0:u}return s.call(l,i)?l[i]:void 0}return Ug=a,Ug}var Wg,Kk;function WK(){if(Kk)return Wg;Kk=1;var e=om(),t=Object.prototype,r=t.hasOwnProperty;function s(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return Wg=s,Wg}var Hg,Qk;function HK(){if(Qk)return Hg;Qk=1;var e=om(),t="__lodash_hash_undefined__";function r(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=e&&a===void 0?t:a,this}return Hg=r,Hg}var Vg,Xk;function VK(){if(Xk)return Vg;Xk=1;var e=GK(),t=qK(),r=UK(),s=WK(),a=HK();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var h=l[u];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,Vg=i,Vg}var Yg,Jk;function YK(){if(Jk)return Yg;Jk=1;var e=VK(),t=im(),r=aw();function s(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Yg=s,Yg}var Kg,Zk;function KK(){if(Zk)return Kg;Zk=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Kg=e,Kg}var Qg,eC;function lm(){if(eC)return Qg;eC=1;var e=KK();function t(r,s){var a=r.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return Qg=t,Qg}var Xg,tC;function QK(){if(tC)return Xg;tC=1;var e=lm();function t(r){var s=e(this,r).delete(r);return this.size-=s?1:0,s}return Xg=t,Xg}var Jg,rC;function XK(){if(rC)return Jg;rC=1;var e=lm();function t(r){return e(this,r).get(r)}return Jg=t,Jg}var Zg,nC;function JK(){if(nC)return Zg;nC=1;var e=lm();function t(r){return e(this,r).has(r)}return Zg=t,Zg}var e0,sC;function ZK(){if(sC)return e0;sC=1;var e=lm();function t(r,s){var a=e(this,r),i=a.size;return a.set(r,s),this.size+=a.size==i?0:1,this}return e0=t,e0}var t0,aC;function iw(){if(aC)return t0;aC=1;var e=YK(),t=QK(),r=XK(),s=JK(),a=ZK();function i(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var h=l[u];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,t0=i,t0}var r0,iC;function eQ(){if(iC)return r0;iC=1;var e=im(),t=aw(),r=iw(),s=200;function a(i,l){var u=this.__data__;if(u instanceof e){var d=u.__data__;if(!t||d.length<s-1)return d.push([i,l]),this.size=++u.size,this;u=this.__data__=new r(d)}return u.set(i,l),this.size=u.size,this}return r0=a,r0}var n0,oC;function ow(){if(oC)return n0;oC=1;var e=im(),t=IK(),r=MK(),s=OK(),a=$K(),i=eQ();function l(u){var d=this.__data__=new e(u);this.size=d.size}return l.prototype.clear=t,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=i,n0=l,n0}var s0,lC;function tQ(){if(lC)return s0;lC=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return s0=t,s0}var a0,cC;function rQ(){if(cC)return a0;cC=1;function e(t){return this.__data__.has(t)}return a0=e,a0}var i0,uC;function nQ(){if(uC)return i0;uC=1;var e=iw(),t=tQ(),r=rQ();function s(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new e;++i<l;)this.add(a[i])}return s.prototype.add=s.prototype.push=t,s.prototype.has=r,i0=s,i0}var o0,dC;function sQ(){if(dC)return o0;dC=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(r(t[s],s,t))return!0;return!1}return o0=e,o0}var l0,fC;function aQ(){if(fC)return l0;fC=1;function e(t,r){return t.has(r)}return l0=e,l0}var c0,mC;function oP(){if(mC)return c0;mC=1;var e=nQ(),t=sQ(),r=aQ(),s=1,a=2;function i(l,u,d,h,f,m){var g=d&s,x=l.length,v=u.length;if(x!=v&&!(g&&v>x))return!1;var b=m.get(l),w=m.get(u);if(b&&w)return b==u&&w==l;var C=-1,N=!0,E=d&a?new e:void 0;for(m.set(l,u),m.set(u,l);++C<x;){var S=l[C],_=u[C];if(h)var D=g?h(_,S,C,u,l,m):h(S,_,C,l,u,m);if(D!==void 0){if(D)continue;N=!1;break}if(E){if(!t(u,function(T,P){if(!r(E,P)&&(S===T||f(S,T,d,h,m)))return E.push(P)})){N=!1;break}}else if(!(S===_||f(S,_,d,h,m))){N=!1;break}}return m.delete(l),m.delete(u),N}return c0=i,c0}var u0,hC;function lP(){if(hC)return u0;hC=1;var e=qs(),t=e.Uint8Array;return u0=t,u0}var d0,pC;function iQ(){if(pC)return d0;pC=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a,i){s[++r]=[i,a]}),s}return d0=e,d0}var f0,gC;function oQ(){if(gC)return f0;gC=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a){s[++r]=a}),s}return f0=e,f0}var m0,xC;function lQ(){if(xC)return m0;xC=1;var e=Zo(),t=lP(),r=Qc(),s=oP(),a=iQ(),i=oQ(),l=1,u=2,d="[object Boolean]",h="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",x="[object RegExp]",v="[object Set]",b="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",N="[object DataView]",E=e?e.prototype:void 0,S=E?E.valueOf:void 0;function _(D,T,P,O,F,$,z){switch(P){case N:if(D.byteLength!=T.byteLength||D.byteOffset!=T.byteOffset)return!1;D=D.buffer,T=T.buffer;case C:return!(D.byteLength!=T.byteLength||!$(new t(D),new t(T)));case d:case h:case g:return r(+D,+T);case f:return D.name==T.name&&D.message==T.message;case x:case b:return D==T+"";case m:var q=a;case v:var H=O&l;if(q||(q=i),D.size!=T.size&&!H)return!1;var re=z.get(D);if(re)return re==T;O|=u,z.set(D,T);var ee=s(q(D),q(T),O,F,$,z);return z.delete(D),ee;case w:if(S)return S.call(D)==S.call(T)}return!1}return m0=_,m0}var h0,yC;function lw(){if(yC)return h0;yC=1;function e(t,r){for(var s=-1,a=r.length,i=t.length;++s<a;)t[i+s]=r[s];return t}return h0=e,h0}var p0,bC;function fs(){if(bC)return p0;bC=1;var e=Array.isArray;return p0=e,p0}var g0,vC;function cP(){if(vC)return g0;vC=1;var e=lw(),t=fs();function r(s,a,i){var l=a(s);return t(s)?l:e(l,i(s))}return g0=r,g0}var x0,wC;function cQ(){if(wC)return x0;wC=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=0,l=[];++s<a;){var u=t[s];r(u,s,t)&&(l[i++]=u)}return l}return x0=e,x0}var y0,jC;function uP(){if(jC)return y0;jC=1;function e(){return[]}return y0=e,y0}var b0,NC;function cw(){if(NC)return b0;NC=1;var e=cQ(),t=uP(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(l){return l==null?[]:(l=Object(l),e(a(l),function(u){return s.call(l,u)}))}:t;return b0=i,b0}var v0,SC;function uQ(){if(SC)return v0;SC=1;function e(t,r){for(var s=-1,a=Array(t);++s<t;)a[s]=r(s);return a}return v0=e,v0}var w0,kC;function dQ(){if(kC)return w0;kC=1;var e=el(),t=Ga(),r="[object Arguments]";function s(a){return t(a)&&e(a)==r}return w0=s,w0}var j0,CC;function uw(){if(CC)return j0;CC=1;var e=dQ(),t=Ga(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(l){return t(l)&&s.call(l,"callee")&&!a.call(l,"callee")};return j0=i,j0}var Kl={exports:{}},N0,_C;function fQ(){if(_C)return N0;_C=1;function e(){return!1}return N0=e,N0}Kl.exports;var EC;function cm(){return EC||(EC=1,function(e,t){var r=qs(),s=fQ(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,u=l?r.Buffer:void 0,d=u?u.isBuffer:void 0,h=d||s;e.exports=h}(Kl,Kl.exports)),Kl.exports}var S0,DC;function mQ(){if(DC)return S0;DC=1;var e=el(),t=Wv(),r=Ga(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",h="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",x="[object Set]",v="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",N="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",D="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",F="[object Uint32Array]",$={};$[N]=$[E]=$[S]=$[_]=$[D]=$[T]=$[P]=$[O]=$[F]=!0,$[s]=$[a]=$[w]=$[i]=$[C]=$[l]=$[u]=$[d]=$[h]=$[f]=$[m]=$[g]=$[x]=$[v]=$[b]=!1;function z(q){return r(q)&&t(q.length)&&!!$[e(q)]}return S0=z,S0}var k0,AC;function um(){if(AC)return k0;AC=1;function e(t){return function(r){return t(r)}}return k0=e,k0}var Ql={exports:{}};Ql.exports;var TC;function dw(){return TC||(TC=1,function(e,t){var r=UT(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&r.process,u=function(){try{var d=a&&a.require&&a.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();e.exports=u}(Ql,Ql.exports)),Ql.exports}var C0,PC;function fw(){if(PC)return C0;PC=1;var e=mQ(),t=um(),r=dw(),s=r&&r.isTypedArray,a=s?t(s):e;return C0=a,C0}var _0,RC;function dP(){if(RC)return _0;RC=1;var e=uQ(),t=uw(),r=fs(),s=cm(),a=Hv(),i=fw(),l=Object.prototype,u=l.hasOwnProperty;function d(h,f){var m=r(h),g=!m&&t(h),x=!m&&!g&&s(h),v=!m&&!g&&!x&&i(h),b=m||g||x||v,w=b?e(h.length,String):[],C=w.length;for(var N in h)(f||u.call(h,N))&&!(b&&(N=="length"||x&&(N=="offset"||N=="parent")||v&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||a(N,C)))&&w.push(N);return w}return _0=d,_0}var E0,IC;function mw(){if(IC)return E0;IC=1;var e=Object.prototype;function t(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||e;return r===a}return E0=t,E0}var D0,MC;function fP(){if(MC)return D0;MC=1;function e(t,r){return function(s){return t(r(s))}}return D0=e,D0}var A0,OC;function hQ(){if(OC)return A0;OC=1;var e=fP(),t=e(Object.keys,Object);return A0=t,A0}var T0,$C;function pQ(){if($C)return T0;$C=1;var e=mw(),t=hQ(),r=Object.prototype,s=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var l=[];for(var u in Object(i))s.call(i,u)&&u!="constructor"&&l.push(u);return l}return T0=a,T0}var P0,LC;function ru(){if(LC)return P0;LC=1;var e=dP(),t=pQ(),r=Xc();function s(a){return r(a)?e(a):t(a)}return P0=s,P0}var R0,FC;function mP(){if(FC)return R0;FC=1;var e=cP(),t=cw(),r=ru();function s(a){return e(a,r,t)}return R0=s,R0}var I0,BC;function gQ(){if(BC)return I0;BC=1;var e=mP(),t=1,r=Object.prototype,s=r.hasOwnProperty;function a(i,l,u,d,h,f){var m=u&t,g=e(i),x=g.length,v=e(l),b=v.length;if(x!=b&&!m)return!1;for(var w=x;w--;){var C=g[w];if(!(m?C in l:s.call(l,C)))return!1}var N=f.get(i),E=f.get(l);if(N&&E)return N==l&&E==i;var S=!0;f.set(i,l),f.set(l,i);for(var _=m;++w<x;){C=g[w];var D=i[C],T=l[C];if(d)var P=m?d(T,D,C,l,i,f):d(D,T,C,i,l,f);if(!(P===void 0?D===T||h(D,T,u,d,f):P)){S=!1;break}_||(_=C=="constructor")}if(S&&!_){var O=i.constructor,F=l.constructor;O!=F&&"constructor"in i&&"constructor"in l&&!(typeof O=="function"&&O instanceof O&&typeof F=="function"&&F instanceof F)&&(S=!1)}return f.delete(i),f.delete(l),S}return I0=a,I0}var M0,zC;function xQ(){if(zC)return M0;zC=1;var e=$i(),t=qs(),r=e(t,"DataView");return M0=r,M0}var O0,GC;function yQ(){if(GC)return O0;GC=1;var e=$i(),t=qs(),r=e(t,"Promise");return O0=r,O0}var $0,qC;function bQ(){if(qC)return $0;qC=1;var e=$i(),t=qs(),r=e(t,"Set");return $0=r,$0}var L0,UC;function vQ(){if(UC)return L0;UC=1;var e=$i(),t=qs(),r=e(t,"WeakMap");return L0=r,L0}var F0,WC;function dm(){if(WC)return F0;WC=1;var e=xQ(),t=aw(),r=yQ(),s=bQ(),a=vQ(),i=el(),l=iP(),u="[object Map]",d="[object Object]",h="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",x=l(e),v=l(t),b=l(r),w=l(s),C=l(a),N=i;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=u||r&&N(r.resolve())!=h||s&&N(new s)!=f||a&&N(new a)!=m)&&(N=function(E){var S=i(E),_=S==d?E.constructor:void 0,D=_?l(_):"";if(D)switch(D){case x:return g;case v:return u;case b:return h;case w:return f;case C:return m}return S}),F0=N,F0}var B0,HC;function wQ(){if(HC)return B0;HC=1;var e=ow(),t=oP(),r=lQ(),s=gQ(),a=dm(),i=fs(),l=cm(),u=fw(),d=1,h="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function v(b,w,C,N,E,S){var _=i(b),D=i(w),T=_?f:a(b),P=D?f:a(w);T=T==h?m:T,P=P==h?m:P;var O=T==m,F=P==m,$=T==P;if($&&l(b)){if(!l(w))return!1;_=!0,O=!1}if($&&!O)return S||(S=new e),_||u(b)?t(b,w,C,N,E,S):r(b,w,T,C,N,E,S);if(!(C&d)){var z=O&&x.call(b,"__wrapped__"),q=F&&x.call(w,"__wrapped__");if(z||q){var H=z?b.value():b,re=q?w.value():w;return S||(S=new e),E(H,re,C,N,S)}}return $?(S||(S=new e),s(b,w,C,N,E,S)):!1}return B0=v,B0}var z0,VC;function hw(){if(VC)return z0;VC=1;var e=wQ(),t=Ga();function r(s,a,i,l,u){return s===a?!0:s==null||a==null||!t(s)&&!t(a)?s!==s&&a!==a:e(s,a,i,l,r,u)}return z0=r,z0}var G0,YC;function jQ(){if(YC)return G0;YC=1;var e=hw();function t(r,s){return e(r,s)}return G0=t,G0}var NQ=jQ();const SQ=Vr(NQ);function q0(e,t){var r=Vv(e);return r?r.innerHeight:gi(e).height}function hP(e,t,r){e.closest&&!r&&e.closest(t);var s=e;do{if(JV(s,t))return s;s=s.parentElement}while(s&&s!==r&&s.nodeType===document.ELEMENT_NODE);return null}var U0,KC;function kQ(){if(KC)return U0;KC=1;function e(t,r,s,a){for(var i=t.length,l=s+(a?1:-1);a?l--:++l<i;)if(r(t[l],l,t))return l;return-1}return U0=e,U0}var W0,QC;function CQ(){if(QC)return W0;QC=1;var e=ow(),t=hw(),r=1,s=2;function a(i,l,u,d){var h=u.length,f=h,m=!d;if(i==null)return!f;for(i=Object(i);h--;){var g=u[h];if(m&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++h<f;){g=u[h];var x=g[0],v=i[x],b=g[1];if(m&&g[2]){if(v===void 0&&!(x in i))return!1}else{var w=new e;if(d)var C=d(v,b,x,i,l,w);if(!(C===void 0?t(b,v,r|s,d,w):C))return!1}}return!0}return W0=a,W0}var H0,XC;function pP(){if(XC)return H0;XC=1;var e=oa();function t(r){return r===r&&!e(r)}return H0=t,H0}var V0,JC;function _Q(){if(JC)return V0;JC=1;var e=pP(),t=ru();function r(s){for(var a=t(s),i=a.length;i--;){var l=a[i],u=s[l];a[i]=[l,u,e(u)]}return a}return V0=r,V0}var Y0,ZC;function gP(){if(ZC)return Y0;ZC=1;function e(t,r){return function(s){return s==null?!1:s[t]===r&&(r!==void 0||t in Object(s))}}return Y0=e,Y0}var K0,e_;function EQ(){if(e_)return K0;e_=1;var e=CQ(),t=_Q(),r=gP();function s(a){var i=t(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(l){return l===a||e(l,a,i)}}return K0=s,K0}var Q0,t_;function pw(){if(t_)return Q0;t_=1;var e=fs(),t=Jc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,l){if(e(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||t(i)?!0:s.test(i)||!r.test(i)||l!=null&&i in Object(l)}return Q0=a,Q0}var X0,r_;function DQ(){if(r_)return X0;r_=1;var e=iw(),t="Expected a function";function r(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var l=arguments,u=a?a.apply(this,l):l[0],d=i.cache;if(d.has(u))return d.get(u);var h=s.apply(this,l);return i.cache=d.set(u,h)||d,h};return i.cache=new(r.Cache||e),i}return r.Cache=e,X0=r,X0}var J0,n_;function AQ(){if(n_)return J0;n_=1;var e=DQ(),t=500;function r(s){var a=e(s,function(l){return i.size===t&&i.clear(),l}),i=a.cache;return a}return J0=r,J0}var Z0,s_;function TQ(){if(s_)return Z0;s_=1;var e=AQ(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(l,u,d,h){i.push(d?h.replace(r,"$1"):u||l)}),i});return Z0=s,Z0}var ex,a_;function gw(){if(a_)return ex;a_=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=Array(a);++s<a;)i[s]=r(t[s],s,t);return i}return ex=e,ex}var tx,i_;function PQ(){if(i_)return tx;i_=1;var e=Zo(),t=gw(),r=fs(),s=Jc(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function l(u){if(typeof u=="string")return u;if(r(u))return t(u,l)+"";if(s(u))return i?i.call(u):"";var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}return tx=l,tx}var rx,o_;function RQ(){if(o_)return rx;o_=1;var e=PQ();function t(r){return r==null?"":e(r)}return rx=t,rx}var nx,l_;function fm(){if(l_)return nx;l_=1;var e=fs(),t=pw(),r=TQ(),s=RQ();function a(i,l){return e(i)?i:t(i,l)?[i]:r(s(i))}return nx=a,nx}var sx,c_;function nu(){if(c_)return sx;c_=1;var e=Jc();function t(r){if(typeof r=="string"||e(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return sx=t,sx}var ax,u_;function mm(){if(u_)return ax;u_=1;var e=fm(),t=nu();function r(s,a){a=e(a,s);for(var i=0,l=a.length;s!=null&&i<l;)s=s[t(a[i++])];return i&&i==l?s:void 0}return ax=r,ax}var ix,d_;function IQ(){if(d_)return ix;d_=1;var e=mm();function t(r,s,a){var i=r==null?void 0:e(r,s);return i===void 0?a:i}return ix=t,ix}var ox,f_;function MQ(){if(f_)return ox;f_=1;function e(t,r){return t!=null&&r in Object(t)}return ox=e,ox}var lx,m_;function OQ(){if(m_)return lx;m_=1;var e=fm(),t=uw(),r=fs(),s=Hv(),a=Wv(),i=nu();function l(u,d,h){d=e(d,u);for(var f=-1,m=d.length,g=!1;++f<m;){var x=i(d[f]);if(!(g=u!=null&&h(u,x)))break;u=u[x]}return g||++f!=m?g:(m=u==null?0:u.length,!!m&&a(m)&&s(x,m)&&(r(u)||t(u)))}return lx=l,lx}var cx,h_;function $Q(){if(h_)return cx;h_=1;var e=MQ(),t=OQ();function r(s,a){return s!=null&&t(s,a,e)}return cx=r,cx}var ux,p_;function LQ(){if(p_)return ux;p_=1;var e=hw(),t=IQ(),r=$Q(),s=pw(),a=pP(),i=gP(),l=nu(),u=1,d=2;function h(f,m){return s(f)&&a(m)?i(l(f),m):function(g){var x=t(g,f);return x===void 0&&x===m?r(g,f):e(m,x,u|d)}}return ux=h,ux}var dx,g_;function hm(){if(g_)return dx;g_=1;function e(t){return t}return dx=e,dx}var fx,x_;function FQ(){if(x_)return fx;x_=1;function e(t){return function(r){return r==null?void 0:r[t]}}return fx=e,fx}var mx,y_;function BQ(){if(y_)return mx;y_=1;var e=mm();function t(r){return function(s){return e(s,r)}}return mx=t,mx}var hx,b_;function zQ(){if(b_)return hx;b_=1;var e=FQ(),t=BQ(),r=pw(),s=nu();function a(i){return r(i)?e(s(i)):t(i)}return hx=a,hx}var px,v_;function pm(){if(v_)return px;v_=1;var e=EQ(),t=LQ(),r=hm(),s=fs(),a=zQ();function i(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?s(l)?t(l[0],l[1]):e(l):a(l)}return px=i,px}var gx,w_;function GQ(){if(w_)return gx;w_=1;var e=kQ(),t=pm(),r=HT(),s=Math.max;function a(i,l,u){var d=i==null?0:i.length;if(!d)return-1;var h=u==null?0:r(u);return h<0&&(h=s(d+h,0)),e(i,t(l,3),h)}return gx=a,gx}var qQ=GQ();const UQ=Vr(qQ);var xx,j_;function WQ(){if(j_)return xx;j_=1;var e=Math.ceil,t=Math.max;function r(s,a,i,l){for(var u=-1,d=t(e((a-s)/(i||1)),0),h=Array(d);d--;)h[l?d:++u]=s,s+=i;return h}return xx=r,xx}var yx,N_;function HQ(){if(N_)return yx;N_=1;var e=WQ(),t=nm(),r=WT();function s(a){return function(i,l,u){return u&&typeof u!="number"&&t(i,l,u)&&(l=u=void 0),i=r(i),l===void 0?(l=i,i=0):l=r(l),u=u===void 0?i<l?1:-1:r(u),e(i,l,u,a)}}return yx=s,yx}var bx,S_;function VQ(){if(S_)return bx;S_=1;var e=HQ(),t=e();return bx=t,bx}var YQ=VQ();const KQ=Vr(YQ);var k_=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function QQ(e,t){return!!(e===t||k_(e)&&k_(t))}function XQ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!QQ(e[r],t[r]))return!1;return!0}function xP(e,t){t===void 0&&(t=XQ);var r=null;function s(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var l=e.apply(this,a);return r={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){r=null},s}function Ab(e,t){var r=Vv(e);return r?r.innerWidth:gi(e).width}var vx,C_;function JQ(){if(C_)return vx;C_=1;var e=Zo(),t=uw(),r=fs(),s=e?e.isConcatSpreadable:void 0;function a(i){return r(i)||t(i)||!!(s&&i&&i[s])}return vx=a,vx}var wx,__;function yP(){if(__)return wx;__=1;var e=lw(),t=JQ();function r(s,a,i,l,u){var d=-1,h=s.length;for(i||(i=t),u||(u=[]);++d<h;){var f=s[d];a>0&&i(f)?a>1?r(f,a-1,i,l,u):e(u,f):l||(u[u.length]=f)}return u}return wx=r,wx}var jx,E_;function ZQ(){if(E_)return jx;E_=1;function e(t){return function(r,s,a){for(var i=-1,l=Object(r),u=a(r),d=u.length;d--;){var h=u[t?d:++i];if(s(l[h],h,l)===!1)break}return r}}return jx=e,jx}var Nx,D_;function eX(){if(D_)return Nx;D_=1;var e=ZQ(),t=e();return Nx=t,Nx}var Sx,A_;function xw(){if(A_)return Sx;A_=1;var e=eX(),t=ru();function r(s,a){return s&&e(s,a,t)}return Sx=r,Sx}var kx,T_;function tX(){if(T_)return kx;T_=1;var e=Xc();function t(r,s){return function(a,i){if(a==null)return a;if(!e(a))return r(a,i);for(var l=a.length,u=s?l:-1,d=Object(a);(s?u--:++u<l)&&i(d[u],u,d)!==!1;);return a}}return kx=t,kx}var Cx,P_;function rX(){if(P_)return Cx;P_=1;var e=xw(),t=tX(),r=t(e);return Cx=r,Cx}var _x,R_;function nX(){if(R_)return _x;R_=1;var e=rX(),t=Xc();function r(s,a){var i=-1,l=t(s)?Array(s.length):[];return e(s,function(u,d,h){l[++i]=a(u,d,h)}),l}return _x=r,_x}var Ex,I_;function sX(){if(I_)return Ex;I_=1;function e(t,r){var s=t.length;for(t.sort(r);s--;)t[s]=t[s].value;return t}return Ex=e,Ex}var Dx,M_;function aX(){if(M_)return Dx;M_=1;var e=Jc();function t(r,s){if(r!==s){var a=r!==void 0,i=r===null,l=r===r,u=e(r),d=s!==void 0,h=s===null,f=s===s,m=e(s);if(!h&&!m&&!u&&r>s||u&&d&&f&&!h&&!m||i&&d&&f||!a&&f||!l)return 1;if(!i&&!u&&!m&&r<s||m&&a&&l&&!i&&!u||h&&a&&l||!d&&l||!f)return-1}return 0}return Dx=t,Dx}var Ax,O_;function iX(){if(O_)return Ax;O_=1;var e=aX();function t(r,s,a){for(var i=-1,l=r.criteria,u=s.criteria,d=l.length,h=a.length;++i<d;){var f=e(l[i],u[i]);if(f){if(i>=h)return f;var m=a[i];return f*(m=="desc"?-1:1)}}return r.index-s.index}return Ax=t,Ax}var Tx,$_;function oX(){if($_)return Tx;$_=1;var e=gw(),t=mm(),r=pm(),s=nX(),a=sX(),i=um(),l=iX(),u=hm(),d=fs();function h(f,m,g){m.length?m=e(m,function(b){return d(b)?function(w){return t(w,b.length===1?b[0]:b)}:b}):m=[u];var x=-1;m=e(m,i(r));var v=s(f,function(b,w,C){var N=e(m,function(E){return E(b)});return{criteria:N,index:++x,value:b}});return a(v,function(b,w){return l(b,w,g)})}return Tx=h,Tx}var Px,L_;function lX(){if(L_)return Px;L_=1;function e(t,r,s){switch(s.length){case 0:return t.call(r);case 1:return t.call(r,s[0]);case 2:return t.call(r,s[0],s[1]);case 3:return t.call(r,s[0],s[1],s[2])}return t.apply(r,s)}return Px=e,Px}var Rx,F_;function bP(){if(F_)return Rx;F_=1;var e=lX(),t=Math.max;function r(s,a,i){return a=t(a===void 0?s.length-1:a,0),function(){for(var l=arguments,u=-1,d=t(l.length-a,0),h=Array(d);++u<d;)h[u]=l[a+u];u=-1;for(var f=Array(a+1);++u<a;)f[u]=l[u];return f[a]=i(h),e(s,this,f)}}return Rx=r,Rx}var Ix,B_;function cX(){if(B_)return Ix;B_=1;function e(t){return function(){return t}}return Ix=e,Ix}var Mx,z_;function vP(){if(z_)return Mx;z_=1;var e=$i(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Mx=t,Mx}var Ox,G_;function uX(){if(G_)return Ox;G_=1;var e=cX(),t=vP(),r=hm(),s=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Ox=s,Ox}var $x,q_;function dX(){if(q_)return $x;q_=1;var e=800,t=16,r=Date.now;function s(a){var i=0,l=0;return function(){var u=r(),d=t-(u-l);if(l=u,d>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return $x=s,$x}var Lx,U_;function wP(){if(U_)return Lx;U_=1;var e=uX(),t=dX(),r=t(e);return Lx=r,Lx}var Fx,W_;function jP(){if(W_)return Fx;W_=1;var e=hm(),t=bP(),r=wP();function s(a,i){return r(t(a,i,e),a+"")}return Fx=s,Fx}var Bx,H_;function fX(){if(H_)return Bx;H_=1;var e=yP(),t=oX(),r=jP(),s=nm(),a=r(function(i,l){if(i==null)return[];var u=l.length;return u>1&&s(i,l[0],l[1])?l=[]:u>2&&s(l[0],l[1],l[2])&&(l=[l[0]]),t(i,e(l,1),[])});return Bx=a,Bx}var mX=fX();const hX=Vr(mX);function NP(e){return ET(e)||GT(e)||zv(e)||DT()}var zx,V_;function pX(){if(V_)return zx;V_=1;function e(t){var r=[];if(t!=null)for(var s in Object(t))r.push(s);return r}return zx=e,zx}var Gx,Y_;function gX(){if(Y_)return Gx;Y_=1;var e=oa(),t=mw(),r=pX(),s=Object.prototype,a=s.hasOwnProperty;function i(l){if(!e(l))return r(l);var u=t(l),d=[];for(var h in l)h=="constructor"&&(u||!a.call(l,h))||d.push(h);return d}return Gx=i,Gx}var qx,K_;function gm(){if(K_)return qx;K_=1;var e=dP(),t=gX(),r=Xc();function s(a){return r(a)?e(a,!0):t(a)}return qx=s,qx}var Ux,Q_;function xX(){if(Q_)return Ux;Q_=1;var e=jP(),t=Qc(),r=nm(),s=gm(),a=Object.prototype,i=a.hasOwnProperty,l=e(function(u,d){u=Object(u);var h=-1,f=d.length,m=f>2?d[2]:void 0;for(m&&r(d[0],d[1],m)&&(f=1);++h<f;)for(var g=d[h],x=s(g),v=-1,b=x.length;++v<b;){var w=x[v],C=u[w];(C===void 0||t(C,a[w])&&!i.call(u,w))&&(u[w]=g[w])}return u});return Ux=l,Ux}var yX=xX();const bX=Vr(yX);var Wx,X_;function yw(){if(X_)return Wx;X_=1;var e=vP();function t(r,s,a){s=="__proto__"&&e?e(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}return Wx=t,Wx}var Hx,J_;function vX(){if(J_)return Hx;J_=1;var e=yw(),t=xw(),r=pm();function s(a,i){var l={};return i=r(i,3),t(a,function(u,d,h){e(l,d,i(u,d,h))}),l}return Hx=s,Hx}var wX=vX();const jX=Vr(wX);var Vx,Z_;function SP(){if(Z_)return Vx;Z_=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a&&r(t[s],s,t)!==!1;);return t}return Vx=e,Vx}var Yx,eE;function kP(){if(eE)return Yx;eE=1;var e=yw(),t=Qc(),r=Object.prototype,s=r.hasOwnProperty;function a(i,l,u){var d=i[l];(!(s.call(i,l)&&t(d,u))||u===void 0&&!(l in i))&&e(i,l,u)}return Yx=a,Yx}var Kx,tE;function su(){if(tE)return Kx;tE=1;var e=kP(),t=yw();function r(s,a,i,l){var u=!i;i||(i={});for(var d=-1,h=a.length;++d<h;){var f=a[d],m=l?l(i[f],s[f],f,i,s):void 0;m===void 0&&(m=s[f]),u?t(i,f,m):e(i,f,m)}return i}return Kx=r,Kx}var Qx,rE;function NX(){if(rE)return Qx;rE=1;var e=su(),t=ru();function r(s,a){return s&&e(a,t(a),s)}return Qx=r,Qx}var Xx,nE;function SX(){if(nE)return Xx;nE=1;var e=su(),t=gm();function r(s,a){return s&&e(a,t(a),s)}return Xx=r,Xx}var Xl={exports:{}};Xl.exports;var sE;function kX(){return sE||(sE=1,function(e,t){var r=qs(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i?r.Buffer:void 0,u=l?l.allocUnsafe:void 0;function d(h,f){if(f)return h.slice();var m=h.length,g=u?u(m):new h.constructor(m);return h.copy(g),g}e.exports=d}(Xl,Xl.exports)),Xl.exports}var Jx,aE;function CX(){if(aE)return Jx;aE=1;function e(t,r){var s=-1,a=t.length;for(r||(r=Array(a));++s<a;)r[s]=t[s];return r}return Jx=e,Jx}var Zx,iE;function _X(){if(iE)return Zx;iE=1;var e=su(),t=cw();function r(s,a){return e(s,t(s),a)}return Zx=r,Zx}var ey,oE;function xm(){if(oE)return ey;oE=1;var e=fP(),t=e(Object.getPrototypeOf,Object);return ey=t,ey}var ty,lE;function CP(){if(lE)return ty;lE=1;var e=lw(),t=xm(),r=cw(),s=uP(),a=Object.getOwnPropertySymbols,i=a?function(l){for(var u=[];l;)e(u,r(l)),l=t(l);return u}:s;return ty=i,ty}var ry,cE;function EX(){if(cE)return ry;cE=1;var e=su(),t=CP();function r(s,a){return e(s,t(s),a)}return ry=r,ry}var ny,uE;function _P(){if(uE)return ny;uE=1;var e=cP(),t=CP(),r=gm();function s(a){return e(a,r,t)}return ny=s,ny}var sy,dE;function DX(){if(dE)return sy;dE=1;var e=Object.prototype,t=e.hasOwnProperty;function r(s){var a=s.length,i=new s.constructor(a);return a&&typeof s[0]=="string"&&t.call(s,"index")&&(i.index=s.index,i.input=s.input),i}return sy=r,sy}var ay,fE;function bw(){if(fE)return ay;fE=1;var e=lP();function t(r){var s=new r.constructor(r.byteLength);return new e(s).set(new e(r)),s}return ay=t,ay}var iy,mE;function AX(){if(mE)return iy;mE=1;var e=bw();function t(r,s){var a=s?e(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return iy=t,iy}var oy,hE;function TX(){if(hE)return oy;hE=1;var e=/\w*$/;function t(r){var s=new r.constructor(r.source,e.exec(r));return s.lastIndex=r.lastIndex,s}return oy=t,oy}var ly,pE;function PX(){if(pE)return ly;pE=1;var e=Zo(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function s(a){return r?Object(r.call(a)):{}}return ly=s,ly}var cy,gE;function RX(){if(gE)return cy;gE=1;var e=bw();function t(r,s){var a=s?e(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return cy=t,cy}var uy,xE;function IX(){if(xE)return uy;xE=1;var e=bw(),t=AX(),r=TX(),s=PX(),a=RX(),i="[object Boolean]",l="[object Date]",u="[object Map]",d="[object Number]",h="[object RegExp]",f="[object Set]",m="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",N="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",D="[object Uint16Array]",T="[object Uint32Array]";function P(O,F,$){var z=O.constructor;switch(F){case x:return e(O);case i:case l:return new z(+O);case v:return t(O,$);case b:case w:case C:case N:case E:case S:case _:case D:case T:return a(O,$);case u:return new z;case d:case m:return new z(O);case h:return r(O);case f:return new z;case g:return s(O)}}return uy=P,uy}var dy,yE;function EP(){if(yE)return dy;yE=1;var e=oa(),t=Object.create,r=function(){function s(){}return function(a){if(!e(a))return{};if(t)return t(a);s.prototype=a;var i=new s;return s.prototype=void 0,i}}();return dy=r,dy}var fy,bE;function MX(){if(bE)return fy;bE=1;var e=EP(),t=xm(),r=mw();function s(a){return typeof a.constructor=="function"&&!r(a)?e(t(a)):{}}return fy=s,fy}var my,vE;function OX(){if(vE)return my;vE=1;var e=dm(),t=Ga(),r="[object Map]";function s(a){return t(a)&&e(a)==r}return my=s,my}var hy,wE;function $X(){if(wE)return hy;wE=1;var e=OX(),t=um(),r=dw(),s=r&&r.isMap,a=s?t(s):e;return hy=a,hy}var py,jE;function LX(){if(jE)return py;jE=1;var e=dm(),t=Ga(),r="[object Set]";function s(a){return t(a)&&e(a)==r}return py=s,py}var gy,NE;function FX(){if(NE)return gy;NE=1;var e=LX(),t=um(),r=dw(),s=r&&r.isSet,a=s?t(s):e;return gy=a,gy}var xy,SE;function BX(){if(SE)return xy;SE=1;var e=ow(),t=SP(),r=kP(),s=NX(),a=SX(),i=kX(),l=CX(),u=_X(),d=EX(),h=mP(),f=_P(),m=dm(),g=DX(),x=IX(),v=MX(),b=fs(),w=cm(),C=$X(),N=oa(),E=FX(),S=ru(),_=gm(),D=1,T=2,P=4,O="[object Arguments]",F="[object Array]",$="[object Boolean]",z="[object Date]",q="[object Error]",H="[object Function]",re="[object GeneratorFunction]",ee="[object Map]",L="[object Number]",M="[object Object]",W="[object RegExp]",R="[object Set]",U="[object String]",Z="[object Symbol]",B="[object WeakMap]",Ce="[object ArrayBuffer]",Se="[object DataView]",G="[object Float32Array]",ae="[object Float64Array]",X="[object Int8Array]",V="[object Int16Array]",ie="[object Int32Array]",be="[object Uint8Array]",ve="[object Uint8ClampedArray]",Pe="[object Uint16Array]",He="[object Uint32Array]",Je={};Je[O]=Je[F]=Je[Ce]=Je[Se]=Je[$]=Je[z]=Je[G]=Je[ae]=Je[X]=Je[V]=Je[ie]=Je[ee]=Je[L]=Je[M]=Je[W]=Je[R]=Je[U]=Je[Z]=Je[be]=Je[ve]=Je[Pe]=Je[He]=!0,Je[q]=Je[H]=Je[B]=!1;function le(fe,Ae,Ge,Ye,ye,he){var ne,Te=Ae&D,Be=Ae&T,oe=Ae&P;if(Ge&&(ne=ye?Ge(fe,Ye,ye,he):Ge(fe)),ne!==void 0)return ne;if(!N(fe))return fe;var Ne=b(fe);if(Ne){if(ne=g(fe),!Te)return l(fe,ne)}else{var pe=m(fe),K=pe==H||pe==re;if(w(fe))return i(fe,Te);if(pe==M||pe==O||K&&!ye){if(ne=Be||K?{}:v(fe),!Te)return Be?d(fe,a(ne,fe)):u(fe,s(ne,fe))}else{if(!Je[pe])return ye?fe:{};ne=x(fe,pe,Te)}}he||(he=new e);var se=he.get(fe);if(se)return se;he.set(fe,ne),E(fe)?fe.forEach(function(Ve){ne.add(le(Ve,Ae,Ge,Ve,fe,he))}):C(fe)&&fe.forEach(function(Ve,tt){ne.set(tt,le(Ve,Ae,Ge,tt,fe,he))});var _e=oe?Be?f:h:Be?_:S,Ke=Ne?void 0:_e(fe);return t(Ke||fe,function(Ve,tt){Ke&&(tt=Ve,Ve=fe[tt]),r(ne,tt,le(Ve,Ae,Ge,tt,fe,he))}),ne}return xy=le,xy}var yy,kE;function zX(){if(kE)return yy;kE=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return yy=e,yy}var by,CE;function GX(){if(CE)return by;CE=1;var e=mm(),t=qT();function r(s,a){return a.length<2?s:e(s,t(a,0,-1))}return by=r,by}var vy,_E;function qX(){if(_E)return vy;_E=1;var e=fm(),t=zX(),r=GX(),s=nu();function a(i,l){return l=e(l,i),i=r(i,l),i==null||delete i[s(t(l))]}return vy=a,vy}var wy,EE;function UX(){if(EE)return wy;EE=1;var e=el(),t=xm(),r=Ga(),s="[object Object]",a=Function.prototype,i=Object.prototype,l=a.toString,u=i.hasOwnProperty,d=l.call(Object);function h(f){if(!r(f)||e(f)!=s)return!1;var m=t(f);if(m===null)return!0;var g=u.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==d}return wy=h,wy}var jy,DE;function WX(){if(DE)return jy;DE=1;var e=UX();function t(r){return e(r)?void 0:r}return jy=t,jy}var Ny,AE;function HX(){if(AE)return Ny;AE=1;var e=yP();function t(r){var s=r==null?0:r.length;return s?e(r,1):[]}return Ny=t,Ny}var Sy,TE;function VX(){if(TE)return Sy;TE=1;var e=HX(),t=bP(),r=wP();function s(a){return r(t(a,void 0,e),a+"")}return Sy=s,Sy}var ky,PE;function YX(){if(PE)return ky;PE=1;var e=gw(),t=BX(),r=qX(),s=fm(),a=su(),i=WX(),l=VX(),u=_P(),d=1,h=2,f=4,m=l(function(g,x){var v={};if(g==null)return v;var b=!1;x=e(x,function(C){return C=s(C,g),b||(b=C.length>1),C}),a(g,u(g),v),b&&(v=t(v,d|h|f,i));for(var w=x.length;w--;)r(v,x[w]);return v});return ky=m,ky}var KX=YX();const QX=Vr(KX);var Cy,RE;function XX(){if(RE)return Cy;RE=1;var e=SP(),t=EP(),r=xw(),s=pm(),a=xm(),i=fs(),l=cm(),u=Uv(),d=oa(),h=fw();function f(m,g,x){var v=i(m),b=v||l(m)||h(m);if(g=s(g,4),x==null){var w=m&&m.constructor;b?x=v?new w:[]:d(m)?x=u(w)?t(a(m)):{}:x={}}return(b?e:r)(m,function(C,N,E){return g(x,C,N,E)}),x}return Cy=f,Cy}var JX=XX();const ZX=Vr(JX);var Fd={exports:{}},eJ=Fd.exports,IE;function tJ(){return IE||(IE=1,function(e,t){(function(r,s){e.exports=s()})(eJ,function(){return function(r,s,a){s.prototype.isBetween=function(i,l,u,d){var h=a(i),f=a(l),m=(d=d||"()")[0]==="(",g=d[1]===")";return(m?this.isAfter(h,u):!this.isBefore(h,u))&&(g?this.isBefore(f,u):!this.isAfter(f,u))||(m?this.isBefore(h,u):!this.isAfter(h,u))&&(g?this.isAfter(f,u):!this.isBefore(f,u))}}})}(Fd)),Fd.exports}tJ();var Bd={exports:{}},rJ=Bd.exports,ME;function nJ(){return ME||(ME=1,function(e,t){(function(r,s){e.exports=s()})(rJ,function(){return function(r,s){s.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})}(Bd)),Bd.exports}nJ();var zd={exports:{}},sJ=zd.exports,OE;function aJ(){return OE||(OE=1,function(e,t){(function(r,s){e.exports=s()})(sJ,function(){return function(r,s){s.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})}(zd)),zd.exports}aJ();var Gd={exports:{}},iJ=Gd.exports,$E;function oJ(){return $E||($E=1,function(e,t){(function(r,s){e.exports=s()})(iJ,function(){return function(r,s,a){var i=s.prototype,l=function(m){return m&&(m.indexOf?m:m.s)},u=function(m,g,x,v,b){var w=m.name?m:m.$locale(),C=l(w[g]),N=l(w[x]),E=C||N.map(function(_){return _.slice(0,v)});if(!b)return E;var S=w.weekStart;return E.map(function(_,D){return E[(D+(S||0))%7]})},d=function(){return a.Ls[a.locale()]},h=function(m,g){return m.formats[g]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,b,w){return b||w.slice(1)})}(m.formats[g.toUpperCase()])},f=function(){var m=this;return{months:function(g){return g?g.format("MMMM"):u(m,"months")},monthsShort:function(g){return g?g.format("MMM"):u(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):u(m,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):u(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):u(m,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return h(m.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return f.bind(this)()},a.localeData=function(){var m=d();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(g){return h(m,g)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return u(d(),"months")},a.monthsShort=function(){return u(d(),"monthsShort","months",3)},a.weekdays=function(m){return u(d(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return u(d(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return u(d(),"weekdaysMin","weekdays",2,m)}}})}(Gd)),Gd.exports}oJ();var qd={exports:{}},lJ=qd.exports,LE;function cJ(){return LE||(LE=1,function(e,t){(function(r,s){e.exports=s()})(lJ,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,a,i){var l=a.prototype,u=l.format;i.en.formats=r,l.format=function(d){d===void 0&&(d="YYYY-MM-DDTHH:mm:ssZ");var h=this.$locale().formats,f=function(m,g){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,v,b){var w=b&&b.toUpperCase();return v||g[b]||r[b]||g[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,N,E){return N||E.slice(1)})})}(d,h===void 0?{}:h);return u.call(this,f)}}})}(qd)),qd.exports}cJ();var Ud={exports:{}},uJ=Ud.exports,FE;function dJ(){return FE||(FE=1,function(e,t){(function(r,s){e.exports=s()})(uJ,function(){return function(r,s,a){var i=function(l,u){if(!u||!u.length||u.length===1&&!u[0]||u.length===1&&Array.isArray(u[0])&&!u[0].length)return null;var d;u.length===1&&u[0].length>0&&(u=u[0]),d=(u=u.filter(function(f){return f}))[0];for(var h=1;h<u.length;h+=1)u[h].isValid()&&!u[h][l](d)||(d=u[h]);return d};a.max=function(){var l=[].slice.call(arguments,0);return i("isAfter",l)},a.min=function(){var l=[].slice.call(arguments,0);return i("isBefore",l)}}})}(Ud)),Ud.exports}dJ();var Wd={exports:{}},fJ=Wd.exports,BE;function mJ(){return BE||(BE=1,function(e,t){(function(r,s){e.exports=s()})(fJ,function(){var r="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,l,u){var d=l.prototype;u.utc=function(b){var w={date:b,utc:!0,args:arguments};return new l(w)},d.utc=function(b){var w=u(this.toDate(),{locale:this.$L,utc:!0});return b?w.add(this.utcOffset(),r):w},d.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var h=d.parse;d.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),h.call(this,b)};var f=d.init;d.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else f.call(this)};var m=d.utcOffset;d.utcOffset=function(b,w){var C=this.$utils().u;if(C(b))return this.$u?0:C(this.$offset)?m.call(this):this.$offset;if(typeof b=="string"&&(b=function(_){_===void 0&&(_="");var D=_.match(s);if(!D)return null;var T=(""+D[0]).match(a)||["-",0,0],P=T[0],O=60*+T[1]+ +T[2];return O===0?0:P==="+"?O:-O}(b),b===null))return this;var N=Math.abs(b)<=16?60*b:b,E=this;if(w)return E.$offset=N,E.$u=b===0,E;if(b!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(N+S,r)).$offset=N,E.$x.$localOffset=S}else E=this.utc();return E};var g=d.format;d.format=function(b){var w=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,w)},d.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var x=d.toDate;d.toDate=function(b){return b==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=d.diff;d.diff=function(b,w,C){if(b&&this.$u===b.$u)return v.call(this,b,w,C);var N=this.local(),E=u(b).local();return v.call(N,E,w,C)}}})}(Wd)),Wd.exports}mJ();var Hd={exports:{}},hJ=Hd.exports,zE;function pJ(){return zE||(zE=1,function(e,t){(function(r,s){e.exports=s()})(hJ,function(){return function(r,s){s.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})}(Hd)),Hd.exports}pJ();function Ps(e){return e.children}var An={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},hn={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},GE=Object.keys(hn).map(function(e){return hn[e]});ze.oneOfType([ze.string,ze.func]);ze.any;ze.func;ze.oneOfType([ze.arrayOf(ze.oneOf(GE)),ze.objectOf(function(e,t){var r=GE.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];return ze.elementType.apply(ze,[e,t].concat(a))})]);ze.oneOfType([ze.oneOf(["overlap","no-overlap"]),ze.func]);var qE={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function DP(e,t){var r=Hr(e,"month");return Hr(r,"week",t.startOfWeek())}function AP(e,t){var r=jf(e,"month");return jf(r,"week",t.startOfWeek())}function gJ(e,t){for(var r=DP(e,t),s=AP(e,t),a=[];Xo(r,s,"day");)a.push(r),r=js(r,1,"day");return a}function xJ(e,t){var r=Hr(e,t);return Qo(r,e)?r:js(r,1,t)}function yJ(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",s=e,a=[];Xo(s,t,r);)a.push(s),s=js(s,1,r);return a}function bJ(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Hr(e,"day"),e=Pc(e,Pc(t)),e=Ro(e,Ro(t)),e=Tc(e,Tc(t)),Ac(e,Ac(t)))}function UE(e){return Pc(e)===0&&Ro(e)===0&&Tc(e)===0&&Ac(e)===0}function vJ(e,t,r,s){return r==="day"&&(r="date"),Math.abs($S[r](e,void 0,s)-$S[r](t,void 0,s))}function vw(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Hr(e,r)/qE[r]-+Hr(t,r)/qE[r]))}var wJ=ze.oneOfType([ze.string,ze.func]);function jJ(e,t,r,s,a){var i=typeof s=="function"?s(r,a,e):t.call(e,r,s,a);return Sc(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function NJ(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function ww(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function SJ(e,t){return vw(e,t,"minutes")+ww(e,t)}function kJ(e){var t=Hr(e,"day");return vw(t,e,"minutes")+ww(t,e)}function CJ(e,t){return qv(e,t,"day")}function _J(e,t,r){var s=Qo(e,t,"minutes");return s?Kc(t,r,"minutes"):rm(t,r,"minutes")}function Tb(e,t){return vJ(e,t,"day")}function EJ(e){var t=e.evtA,r=t.start,s=t.end,a=t.allDay,i=e.evtB,l=i.start,u=i.end,d=i.allDay,h=+Hr(r,"day")-+Hr(l,"day"),f=Tb(r,s),m=Tb(l,u);return h||m-f||!!d-!!a||+r-+l||+s-+u}function DJ(e){var t=e.event,r=t.start,s=t.end,a=e.range,i=a.start,l=a.end,u=Hr(r,"day"),d=Xo(u,l,"day"),h=Gv(u,s,"minutes"),f=h?rm(s,i,"minutes"):Kc(s,i,"minutes");return d&&f}function AJ(e,t){return Qo(e,t,"day")}function TJ(e,t){return UE(e)&&UE(t)}var PJ=Rr(function e(t){var r=this;Pr(this,e),Sc(typeof t.format=="function","date localizer `format(..)` must be a function"),Sc(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||wJ,this.formats=t.formats,this.format=function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return jJ.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||bJ,this.inRange=t.inRange||LT,this.lt=t.lt||qv,this.lte=t.lte||Xo,this.gt=t.gt||rm,this.gte=t.gte||Kc,this.eq=t.eq||Qo,this.neq=t.neq||Gv,this.startOf=t.startOf||Hr,this.endOf=t.endOf||jf,this.add=t.add||js,this.range=t.range||yJ,this.diff=t.diff||vw,this.ceil=t.ceil||xJ,this.min=t.min||OT,this.max=t.max||$T,this.minutes=t.minutes||Ro,this.daySpan=t.daySpan||Tb,this.firstVisibleDay=t.firstVisibleDay||DP,this.lastVisibleDay=t.lastVisibleDay||AP,this.visibleDays=t.visibleDays||gJ,this.getSlotDate=t.getSlotDate||NJ,this.getTimezoneOffset=t.getTimezoneOffset||function(s){return s.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||ww,this.getTotalMin=t.getTotalMin||SJ,this.getMinutesFromMidnight=t.getMinutesFromMidnight||kJ,this.continuesPrior=t.continuesPrior||CJ,this.continuesAfter=t.continuesAfter||_J,this.sortEvents=t.sortEvents||EJ,this.inEventRange=t.inEventRange||DJ,this.isSameDate=t.isSameDate||AJ,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||TJ,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function RJ(e,t,r,s){var a=rr(rr({},e.formats),r);return rr(rr({},e),{},{messages:s,startOfWeek:function(){return e.startOfWeek(t)},format:function(l,u){return e.format(l,a[u]||u,t)}})}var IJ=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.navigate=function(l){r.props.onNavigate(l)},r.view=function(l){r.props.onView(l)},r}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.localizer.messages,i=s.label;return Q.createElement("div",{className:"rbc-toolbar"},Q.createElement("span",{className:"rbc-btn-group"},Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,An.TODAY)},a.today),Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,An.PREVIOUS)},a.previous),Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,An.NEXT)},a.next)),Q.createElement("span",{className:"rbc-toolbar-label"},i),Q.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(s){var a=this,i=this.props.views,l=this.props.view;if(i.length>1)return i.map(function(u){return Q.createElement("button",{type:"button",key:u,className:jr({"rbc-active":l===u}),onClick:a.view.bind(null,u)},s[u])})}}])}(Q.Component);function dr(e,t){e&&e.apply(null,[].concat(t))}var MJ={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function OJ(e){return rr(rr({},MJ),e)}function $J(e){var t=e.ref,r=e.callback;j.useEffect(function(){var s=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[t,r])}var LJ=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],TP=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.style,i=s.className,l=s.event,u=s.selected,d=s.isAllDay,h=s.onSelect,f=s.onDoubleClick,m=s.onKeyPress,g=s.localizer,x=s.continuesPrior,v=s.continuesAfter,b=s.accessors,w=s.getters,C=s.children,N=s.components,E=N.event,S=N.eventWrapper,_=s.slotStart,D=s.slotEnd,T=Bs(s,LJ);delete T.resizable;var P=b.title(l),O=b.tooltip(l),F=b.end(l),$=b.start(l),z=b.allDay(l),q=d||z||g.diff($,g.ceil(F,"day"),"day")>1,H=w.eventProp(l,$,F,u),re=Q.createElement("div",{className:"rbc-event-content",title:O||void 0},E?Q.createElement(E,{event:l,continuesPrior:x,continuesAfter:v,title:P,isAllDay:z,localizer:g,slotStart:_,slotEnd:D}):P);return Q.createElement(S,Object.assign({},this.props,{type:"date"}),Q.createElement("div",Object.assign({},T,{style:rr(rr({},H.style),a),className:jr("rbc-event",i,H.className,{"rbc-selected":u,"rbc-event-allday":q,"rbc-event-continues-prior":x,"rbc-event-continues-after":v}),onClick:function(L){return h&&h(l,L)},onDoubleClick:function(L){return f&&f(l,L)},onKeyDown:function(L){return m&&m(l,L)}}),typeof C=="function"?C(re):re))}}])}(Q.Component);function ym(e,t){return!e||t==null?!1:SQ(e,t)}function PP(e,t){var r=e.right-e.left,s=r/t;return s}function RP(e,t,r,s){var a=PP(e,s);return r?s-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function FJ(e,t){var r=t.x,s=t.y;return s>=e.top&&s<=e.bottom&&r>=e.left&&r<=e.right}function BJ(e,t,r,s,a){var i=-1,l=-1,u=s-1,d=PP(t,s),h=RP(t,r.x,a,s),f=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,g=e.y>t.bottom,x=t.top>e.y,v=r.top<t.top&&r.bottom>t.bottom;return v&&(i=0,l=u),f&&(x?(i=0,l=h):g&&(i=h,l=u)),m&&(i=l=a?u-Math.floor((e.x-t.left)/d):Math.floor((e.x-t.left)/d),f?h<i?i=h:l=h:e.y<r.y?l=u:i=0),{startIdx:i,endIdx:l}}function zJ(e){var t=e.target,r=e.offset,s=e.container,a=e.box,i=gi(t),l=i.top,u=i.left,d=i.width,h=i.height,f=gi(s),m=f.top,g=f.left,x=f.width,v=f.height,b=gi(a),w=b.width,C=b.height,N=m+v,E=g+x,S=l+C,_=u+w,D=r.x,T=r.y,P=S>N?l-C-T:l+T+h,O=_>E?u+D-w+d:u+D;return{topOffset:P,leftOffset:O}}function GJ(e){var t=e.containerRef,r=e.accessors,s=e.getters,a=e.selected,i=e.components,l=e.localizer,u=e.position,d=e.show,h=e.events,f=e.slotStart,m=e.slotEnd,g=e.onSelect,x=e.onDoubleClick,v=e.onKeyPress,b=e.handleDragStart,w=e.popperRef,C=e.target,N=e.offset;$J({ref:w,callback:d}),j.useLayoutEffect(function(){var _=zJ({target:C,offset:N,container:t.current,box:w.current}),D=_.topOffset,T=_.leftOffset;w.current.style.top="".concat(D,"px"),w.current.style.left="".concat(T,"px")},[N.x,N.y,C]);var E=u.width,S={minWidth:E+E/2};return Q.createElement("div",{style:S,className:"rbc-overlay",ref:w},Q.createElement("div",{className:"rbc-overlay-header"},l.format(f,"dayHeaderFormat")),h.map(function(_,D){return Q.createElement(TP,{key:D,type:"popup",localizer:l,event:_,getters:s,onSelect:g,accessors:r,components:i,onDoubleClick:x,onKeyPress:v,continuesPrior:l.lt(r.end(_),f,"day"),continuesAfter:l.gte(r.start(_),m,"day"),slotStart:f,slotEnd:m,selected:ym(_,a),draggable:!0,onDragStart:function(){return b(_)},onDragEnd:function(){return d()}})}))}var IP=Q.forwardRef(function(e,t){return Q.createElement(GJ,Object.assign({},e,{popperRef:t}))});IP.propTypes={accessors:ze.object.isRequired,getters:ze.object.isRequired,selected:ze.object,components:ze.object.isRequired,localizer:ze.object.isRequired,position:ze.object.isRequired,show:ze.func.isRequired,events:ze.array.isRequired,slotStart:ze.instanceOf(Date).isRequired,slotEnd:ze.instanceOf(Date),onSelect:ze.func,onDoubleClick:ze.func,onKeyPress:ze.func,handleDragStart:ze.func,style:ze.object,offset:ze.shape({x:ze.number,y:ze.number})};function qJ(e){var t=e.containerRef,r=e.popupOffset,s=r===void 0?5:r,a=e.overlay,i=e.accessors,l=e.localizer,u=e.components,d=e.getters,h=e.selected,f=e.handleSelectEvent,m=e.handleDoubleClickEvent,g=e.handleKeyPressEvent,x=e.handleDragStart,v=e.onHide,b=e.overlayDisplay,w=j.useRef(null);if(!a.position)return null;var C=s;isNaN(s)||(C={x:s,y:s});var N=a.position,E=a.events,S=a.date,_=a.end;return Q.createElement(sw,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:a.target},function(D){var T=D.props;return Q.createElement(IP,Object.assign({},T,{containerRef:t,ref:w,target:a.target,offset:C,accessors:i,getters:d,selected:h,components:u,localizer:l,position:N,show:b,events:E,slotStart:S,slotEnd:_,onSelect:f,onDoubleClick:m,onKeyPress:g,handleDragStart:x}))})}var jw=Q.forwardRef(function(e,t){return Q.createElement(qJ,Object.assign({},e,{containerRef:t}))});jw.propTypes={popupOffset:ze.oneOfType([ze.number,ze.shape({x:ze.number,y:ze.number})]),overlay:ze.shape({position:ze.object,events:ze.array,date:ze.instanceOf(Date),end:ze.instanceOf(Date)}),accessors:ze.object.isRequired,localizer:ze.object.isRequired,components:ze.object.isRequired,getters:ze.object.isRequired,selected:ze.object,handleSelectEvent:ze.func,handleDoubleClickEvent:ze.func,handleKeyPressEvent:ze.func,handleDragStart:ze.func,onHide:ze.func,overlayDisplay:ze.func};function tn(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Yl(r,e,t,{passive:!1})}function UJ(e,t,r){return!e||Rc(e,document.elementFromPoint(t,r))}function WJ(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return hP(a,".rbc-event",e)}function HJ(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return hP(a,".rbc-show-more",e)}function kf(e,t){return!!WJ(e,t)}function VJ(e,t){return!!HJ(e,t)}function Ul(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var WE=5,YJ=250,MP=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.global,a=s===void 0?!1:s,i=r.longPressThreshold,l=i===void 0?250:i,u=r.validContainers,d=u===void 0?[]:u;Pr(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=l,this.validContainers=d,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=tn("touchmove",function(){},window),this._removeKeyDownListener=tn("keydown",this._keyListener),this._removeKeyUpListener=tn("keyup",this._keyListener),this._removeDropFromOutsideListener=tn("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=tn("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Rr(e,[{key:"on",value:function(r,s){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(s),{remove:function(){var l=a.indexOf(s);l!==-1&&a.splice(l,1)}}}},{key:"emit",value:function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];var l,u=this._listeners[r]||[];return u.forEach(function(d){l===void 0&&(l=d.apply(void 0,a))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var s=this._selectRect;return!s||!this.selecting?!1:HE(s,Pi(r))}},{key:"filter",value:function(r){var s=this._selectRect;return!s||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,s){var a=this,i=null,l=null,u=null,d=function(g){i=setTimeout(function(){f(),r(g)},a.longPressThreshold),l=tn("touchmove",function(){return f()}),u=tn("touchend",function(){return f()})},h=tn("touchstart",d),f=function(){i&&clearTimeout(i),l&&l(),u&&u(),i=null,l=null,u=null};return s&&d(s),function(){f(),h()}}},{key:"_addInitialEventListener",value:function(){var r=this,s=tn("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=tn("mousedown",r._handleInitialEvent)}),a=tn("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){s(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var s=Ul(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:l,clientY:u}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var s=Ul(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:l,clientY:u}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var s=Ul(r),a=s.clientX,i=s.clientY,l=s.pageX,u=s.pageY,d=this.container(),h,f;if(!(r.which===3||r.button===2||!UJ(d,a,i))){if(!this.globalMouse&&d&&!Rc(d,r.target)){var m=KJ(0),g=m.top,x=m.left,v=m.bottom,b=m.right;if(f=Pi(d),h=HE({top:f.top-g,left:f.left-x,bottom:f.bottom+v,right:f.right+b},{top:u,left:l}),!h)return}var w=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:l,y:u,clientX:a,clientY:i});if(w!==!1)switch(r.type){case"mousedown":this._removeEndListener=tn("mouseup",this._handleTerminatingEvent),this._onEscListener=tn("keydown",this._handleTerminatingEvent),this._removeMoveListener=tn("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=tn("touchend",this._handleTerminatingEvent),this._removeMoveListener=tn("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var s=r.target,a=this.validContainers;return!a||!a.length||!s?!0:a.some(function(i){return!!s.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var s=this.selecting,a=this._selectRect;if(!s&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||Rc(this.container(),r.target),l=this._isWithinValidContainer(r);return r.key==="Escape"||!l?this.emit("reset"):!s&&i?this._handleClickEvent(r):s?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var s=Ul(r),a=s.pageX,i=s.pageY,l=s.clientX,u=s.clientY,d=new Date().getTime();return this._lastClickData&&d-this._lastClickData.timestamp<YJ?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:l,clientY:u})):(this._lastClickData={timestamp:d},this.emit("click",{x:a,y:i,clientX:l,clientY:u}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var s=this._initialEventData,a=s.x,i=s.y,l=Ul(r),u=l.pageX,d=l.pageY,h=Math.abs(a-u),f=Math.abs(i-d),m=Math.min(u,a),g=Math.min(d,i),x=this.selecting,v=this.isClick(u,d);v&&!x&&!(h||f)||(!x&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:g,left:m,x:u,y:d,right:m+h,bottom:g+f},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,s){var a=this._initialEventData,i=a.x,l=a.y,u=a.isTouch;return!u&&Math.abs(r-i)<=WE&&Math.abs(s-l)<=WE}}])}();function KJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ra(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function HE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=Pi(e),a=s.top,i=s.left,l=s.right,u=l===void 0?i:l,d=s.bottom,h=d===void 0?a:d,f=Pi(t),m=f.top,g=f.left,x=f.right,v=x===void 0?g:x,b=f.bottom,w=b===void 0?m:b;return!(h-r<m||a+r>w||u-r<g||i+r>v)}function Pi(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+VE("left"),s=t.top+VE("top");return{top:s,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+s}}function VE(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var QJ=function(e){function t(r,s){var a;return Pr(this,t),a=an(this,t,[r,s]),a.state={selecting:!1},a.containerRef=j.createRef(),a}return on(t,e),Rr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(s){!s.selectable&&this.props.selectable&&this._selectable(),s.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var s=this.props,a=s.range,i=s.getNow,l=s.getters,u=s.date,d=s.components.dateCellWrapper,h=s.localizer,f=this.state,m=f.selecting,g=f.startIdx,x=f.endIdx,v=i();return Q.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(b,w){var C=m&&w>=g&&w<=x,N=l.dayProp(b),E=N.className,S=N.style;return Q.createElement(d,{key:w,value:b,range:a},Q.createElement("div",{style:S,className:jr("rbc-day-bg",E,C&&"rbc-selected-cell",h.isSameDate(b,v)&&"rbc-today",u&&h.neq(u,b,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var s=this,a=this.containerRef.current,i=this._selector=new MP(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(d,h){if(!kf(a,d)&&!VJ(a,d)){var f=Pi(a),m=s.props,g=m.range,x=m.rtl;if(FJ(f,d)){var v=RP(f,d.x,x,g.length);s._selectSlot({startIdx:v,endIdx:v,action:h,box:d})}}s._initial={},s.setState({selecting:!1})};i.on("selecting",function(u){var d=s.props,h=d.range,f=d.rtl,m=-1,g=-1;if(s.state.selecting||(dr(s.props.onSelectStart,[u]),s._initial={x:u.x,y:u.y}),i.isSelected(a)){var x=Pi(a),v=BJ(s._initial,x,u,h.length,f);m=v.startIdx,g=v.endIdx}s.setState({selecting:!0,startIdx:m,endIdx:g})}),i.on("beforeSelect",function(u){if(s.props.selectable==="ignoreEvents")return!kf(s.containerRef.current,u)}),i.on("click",function(u){return l(u,"click")}),i.on("doubleClick",function(u){return l(u,"doubleClick")}),i.on("select",function(u){s._selectSlot(rr(rr({},s.state),{},{action:"select",bounds:u})),s._initial={},s.setState({selecting:!1}),dr(s.props.onSelectEnd,[s.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(s){var a=s.endIdx,i=s.startIdx,l=s.action,u=s.bounds,d=s.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:l,bounds:u,box:d,resourceId:this.props.resourceId})}}])}(Q.Component),as={propTypes:{slotMetrics:ze.object.isRequired,selected:ze.object,isAllDay:ze.bool,accessors:ze.object.isRequired,localizer:ze.object.isRequired,components:ze.object.isRequired,getters:ze.object.isRequired,onSelect:ze.func,onDoubleClick:ze.func,onKeyPress:ze.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var s=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,l=t.onSelect,u=t.onDoubleClick,d=t.onKeyPress,h=t.localizer,f=t.slotMetrics,m=t.components,g=t.resizable,x=f.continuesPrior(r),v=f.continuesAfter(r);return Q.createElement(TP,{event:r,getters:i,localizer:h,accessors:a,components:m,onSelect:l,onDoubleClick:u,onKeyPress:d,continuesPrior:x,continuesAfter:v,slotStart:f.first,slotEnd:f.last,selected:ym(r,s),resizable:g})},renderSpan:function(t,r,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return Q.createElement("div",{key:s,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},OP=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.segments,l=a.slotMetrics.slots,u=a.className,d=1;return Q.createElement("div",{className:jr(u,"rbc-row")},i.reduce(function(h,f,m){var g=f.event,x=f.left,v=f.right,b=f.span,w="_lvl_"+m,C=x-d,N=as.renderEvent(s.props,g);return C&&h.push(as.renderSpan(l,C,"".concat(w,"_gap"))),h.push(as.renderSpan(l,b,w,N)),d=v+1,h},[]))}}])}(Q.Component);OP.defaultProps=rr({},as.defaultProps);function $P(e){var t=e.dateRange,r=e.unit,s=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,s)}}function XJ(e,t,r,s){var a=$P({dateRange:t,localizer:s}),i=a.first,l=a.last,u=s.diff(i,l,"day"),d=s.max(s.startOf(r.start(e),"day"),i),h=s.min(s.ceil(r.end(e),"day"),l),f=UQ(t,function(g){return s.isSameDate(g,d)}),m=s.diff(d,h,"day");return m=Math.min(m,u),m=Math.max(m-s.segmentOffset,1),{event:e,span:m,left:f+1,right:Math.max(f+m,1)}}function Pb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,s,a,i=[],l=[];for(r=0;r<e.length;r++){for(a=e[r],s=0;s<i.length&&JJ(a,i[s]);s++);s>=t?l.push(a):(i[s]||(i[s]=[])).push(a)}for(r=0;r<i.length;r++)i[r].sort(function(u,d){return u.left-d.left});return{levels:i,extra:l}}function Oc(e,t,r,s,a){var i={start:s.start(e),end:s.end(e)},l={start:t,end:r};return a.inEventRange({event:i,range:l})}function JJ(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function ZJ(e,t,r){var s=$d(e),a=[],i=[];s.forEach(function(d){var h=t.start(d),f=t.end(d);r.daySpan(h,f)>1?a.push(d):i.push(d)});var l=a.sort(function(d,h){return Rb(d,h,t,r)}),u=i.sort(function(d,h){return Rb(d,h,t,r)});return[].concat($d(l),$d(u))}function Rb(e,t,r,s){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return s.sortEvents({evtA:a,evtB:i})}var Ib=function(t,r){return t.left<=r&&t.right>=r},_y=function(t,r){return t.filter(function(s){return Ib(s,r)}).map(function(s){return s.event})},LP=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){for(var s=this.props,a=s.segments,i=s.slotMetrics.slots,l=Pb(a).levels[0],u=1,d=1,h=[];u<=i;){var f="_lvl_"+u,m=l.filter(function(S){return Ib(S,u)})[0]||{},g=m.event,x=m.left,v=m.right,b=m.span;if(!g){var w=this.getHiddenEventsForSlot(a,u);if(w.length>0){var C=u-d;C&&h.push(as.renderSpan(i,C,f+"_gap")),h.push(as.renderSpan(i,1,f,this.renderShowMore(a,u))),d=u=u+1;continue}u++;continue}var N=Math.max(0,x-d);if(this.canRenderSlotEvent(x,b)){var E=as.renderEvent(this.props,g);N&&h.push(as.renderSpan(i,N,f+"_gap")),h.push(as.renderSpan(i,b,f,E)),d=u=v+1}else N&&h.push(as.renderSpan(i,N,f+"_gap")),h.push(as.renderSpan(i,1,f,this.renderShowMore(a,u))),d=u=u+1}return Q.createElement("div",{className:"rbc-row"},h)}},{key:"getHiddenEventsForSlot",value:function(s,a){var i=_y(s,a),l=Pb(s).levels[0],u=l.filter(function(d){return Ib(d,a)}).map(function(d){return d.event});return i.filter(function(d){return!u.some(function(h){return h===d})})}},{key:"canRenderSlotEvent",value:function(s,a){var i=this.props.segments;return KQ(s,s+a).every(function(l){var u=_y(i,l).length;return u===1})}},{key:"renderShowMore",value:function(s,a){var i=this,l=this.props,u=l.localizer,d=l.slotMetrics,h=l.components,f=d.getEventsForSlot(a),m=_y(s,a),g=m.length;if(h!=null&&h.showMore){var x=h.showMore,v=d.getDateForSlot(a-1);return g?Q.createElement(x,{localizer:u,slotDate:v,slot:a,count:g,events:f,remainingEvents:m}):!1}return g?Q.createElement("button",{type:"button",key:"sm_"+a,className:jr("rbc-button-link","rbc-show-more"),onClick:function(w){return i.showMore(a,w)}},u.messages.showMore(g,m,f)):!1}},{key:"showMore",value:function(s,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(s,a.target)}}])}(Q.Component);LP.defaultProps=rr({},as.defaultProps);var eZ=function(t){var r=t.children;return Q.createElement("div",{className:"rbc-row-content-scroll-container"},r)},tZ=function(t,r){return t.left<=r&&t.right>=r},rZ=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function FP(){return xP(function(e){for(var t=e.range,r=e.events,s=e.maxRows,a=e.minRows,i=e.accessors,l=e.localizer,u=$P({dateRange:t,localizer:l}),d=u.first,h=u.last,f=r.map(function(b){return XJ(b,t,i,l)}),m=Pb(f,Math.max(s-1,1)),g=m.levels,x=m.extra,v=x.length>0?a-1:a;g.length<v;)g.push([]);return{first:d,last:h,levels:g,extra:x,range:t,slots:t.length,clone:function(w){var C=FP();return C(rr(rr({},e),w))},getDateForSlot:function(w){return t[w]},getSlotForDate:function(w){return t.find(function(C){return l.isSameDate(C,w)})},getEventsForSlot:function(w){return f.filter(function(C){return tZ(C,w)}).map(function(C){return C.event})},continuesPrior:function(w){return l.continuesPrior(i.start(w),d)},continuesAfter:function(w){var C=i.start(w),N=i.end(w);return l.continuesAfter(C,N,h)}}},rZ)}var $c=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.handleSelectSlot=function(l){var u=r.props,d=u.range,h=u.onSelectSlot;h(d.slice(l.start,l.end+1),l)},r.handleShowMore=function(l,u){var d=r.props,h=d.range,f=d.onShowMore,m=r.slotMetrics(r.props),g=eY(r.containerRef.current,".rbc-row-bg")[0],x;g&&(x=g.children[l-1]);var v=m.getEventsForSlot(l);f(v,h[l-1],x,l,u)},r.getContainer=function(){var l=r.props.container;return l?l():r.containerRef.current},r.renderHeadingCell=function(l,u){var d=r.props,h=d.renderHeader,f=d.getNow,m=d.localizer;return h({date:l,key:"header_".concat(u),className:jr("rbc-date-cell",m.isSameDate(l,f())&&"rbc-now")})},r.renderDummy=function(){var l=r.props,u=l.className,d=l.range,h=l.renderHeader,f=l.showAllEvents;return Q.createElement("div",{className:u,ref:r.containerRef},Q.createElement("div",{className:jr("rbc-row-content",f&&"rbc-row-content-scrollable")},h&&Q.createElement("div",{className:"rbc-row",ref:r.headingRowRef},d.map(r.renderHeadingCell)),Q.createElement("div",{className:"rbc-row",ref:r.eventRowRef},Q.createElement("div",{className:"rbc-row-segment"},Q.createElement("div",{className:"rbc-event"},Q.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=j.createRef(),r.headingRowRef=j.createRef(),r.eventRowRef=j.createRef(),r.slotMetrics=FP(),r}return on(t,e),Rr(t,[{key:"getRowLimit",value:function(){var s,a=q0(this.eventRowRef.current),i=(s=this.headingRowRef)!==null&&s!==void 0&&s.current?q0(this.headingRowRef.current):0,l=q0(this.containerRef.current)-i;return Math.max(Math.floor(l/a),1)}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.rtl,l=s.range,u=s.className,d=s.selected,h=s.selectable,f=s.renderForMeasure,m=s.accessors,g=s.getters,x=s.components,v=s.getNow,b=s.renderHeader,w=s.onSelect,C=s.localizer,N=s.onSelectStart,E=s.onSelectEnd,S=s.onDoubleClick,_=s.onKeyPress,D=s.resourceId,T=s.longPressThreshold,P=s.isAllDay,O=s.resizable,F=s.showAllEvents;if(f)return this.renderDummy();var $=this.slotMetrics(this.props),z=$.levels,q=$.extra,H=F?eZ:Ps,re=x.weekWrapper,ee={selected:d,accessors:m,getters:g,localizer:C,components:x,onSelect:w,onDoubleClick:S,onKeyPress:_,resourceId:D,slotMetrics:$,resizable:O};return Q.createElement("div",{className:u,role:"rowgroup",ref:this.containerRef},Q.createElement(QJ,{localizer:C,date:a,getNow:v,rtl:i,range:l,selectable:h,container:this.getContainer,getters:g,onSelectStart:N,onSelectEnd:E,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:T,resourceId:D}),Q.createElement("div",{className:jr("rbc-row-content",F&&"rbc-row-content-scrollable"),role:"row"},b&&Q.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),Q.createElement(H,null,Q.createElement(re,Object.assign({isAllDay:P},ee,{rtl:this.props.rtl}),z.map(function(L,M){return Q.createElement(OP,Object.assign({key:M,segments:L},ee))}),!!q.length&&Q.createElement(LP,Object.assign({segments:q,onShowMore:this.handleShowMore},ee))))))}}])}(Q.Component);$c.defaultProps={minRows:0,maxRows:1/0};var Nw=function(t){var r=t.label;return Q.createElement("span",{role:"columnheader","aria-sort":"none"},r)},nZ=function(t){var r=t.label,s=t.drilldownView,a=t.onDrillDown;return s?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):Q.createElement("span",null,r)},sZ=["date","className"],aZ=function(t,r,s,a,i){return t.filter(function(l){return Oc(l,r,s,a,i)})},bm=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(l,u){var d=r.props,h=d.events,f=d.components,m=d.selectable,g=d.getNow,x=d.selected,v=d.date,b=d.localizer,w=d.longPressThreshold,C=d.accessors,N=d.getters,E=d.showAllEvents,S=r.state,_=S.needLimitMeasure,D=S.rowLimit,T=aZ($d(h),l[0],l[l.length-1],C,b),P=ZJ(T,C,b);return Q.createElement($c,{key:u,ref:u===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:g,date:v,range:l,events:P,maxRows:E?1/0:D,selected:x,selectable:m,components:f,accessors:C,getters:N,localizer:b,renderHeader:r.readerDateHeading,renderForMeasure:_,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:w,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:E})},r.readerDateHeading=function(l){var u=l.date,d=l.className,h=Bs(l,sZ),f=r.props,m=f.date,g=f.getDrilldownView,x=f.localizer,v=x.neq(m,u,"month"),b=x.isSameDate(u,m),w=g(u),C=x.format(u,"dateFormat"),N=r.props.components.dateHeader||nZ;return Q.createElement("div",Object.assign({},h,{className:jr(d,v&&"rbc-off-range",b&&"rbc-current"),role:"cell"}),Q.createElement(N,{label:C,date:u,drilldownView:w,isOffRange:v,onDrillDown:function(S){return r.handleHeadingClick(u,w,S)}}))},r.handleSelectSlot=function(l,u){r._pendingSelection=r._pendingSelection.concat(l),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(u)})},r.handleHeadingClick=function(l,u,d){d.preventDefault(),r.clearSelection(),dr(r.props.onDrillDown,[l,u])},r.handleSelectEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onSelectEvent,u)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onDoubleClickEvent,u)},r.handleKeyPressEvent=function(){r.clearSelection();for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onKeyPressEvent,u)},r.handleShowMore=function(l,u,d,h,f){var m=r.props,g=m.popup,x=m.onDrillDown,v=m.onShowMore,b=m.getDrilldownView,w=m.doShowMoreDrillDown;if(r.clearSelection(),g){var C=QT(d,r.containerRef.current);r.setState({overlay:{date:u,events:l,position:C,target:f}})}else w&&dr(x,[u,b(u)||hn.DAY]);dr(v,[l,u,h])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=j.createRef(),r.slotRowRef=j.createRef(),r._bgRows=[],r._pendingSelection=[],r}return on(t,e),Rr(t,[{key:"componentDidMount",value:function(){var s=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||XT(function(){a=!1,s.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.className,u=i.visibleDays(a,i),d=LV(u,7);return this._weekCount=d.length,Q.createElement("div",{className:jr("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},Q.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(d[0])),d.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(s){var a=this.props,i=a.localizer,l=a.components,u=s[0],d=s[s.length-1],h=l.header||Nw;return i.range(u,d,"day").map(function(f,m){return Q.createElement("div",{key:"header_"+m,className:"rbc-header"},Q.createElement(h,{date:f,localizer:i,label:i.format(f,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var s,a,i=this,l=(s=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&s!==void 0?s:{},u=this.props,d=u.accessors,h=u.localizer,f=u.components,m=u.getters,g=u.selected,x=u.popupOffset,v=u.handleDragStart,b=function(){return i.setState({overlay:null})};return Q.createElement(jw,{overlay:l,accessors:d,localizer:h,components:f,getters:m,selected:g,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:b})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(s){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(u,d){return+u-+d});var i=new Date(a[0]),l=new Date(a[a.length-1]);l.setDate(a[a.length-1].getDate()+1),dr(this.props.onSelectSlot,{slots:a,start:i,end:l,action:s.action,bounds:s.bounds,box:s.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(s,a){var i=s.date,l=s.localizer;return{date:i,needLimitMeasure:l.neq(i,a.date,"month")}}}])}(Q.Component);bm.range=function(e,t){var r=t.localizer,s=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:s,end:a}};bm.navigate=function(e,t,r){var s=r.localizer;switch(t){case An.PREVIOUS:return s.add(e,-1,"month");case An.NEXT:return s.add(e,1,"month");default:return e}};bm.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var YE=function(t){var r=t.min,s=t.max,a=t.step,i=t.slots,l=t.localizer;return"".concat(+l.startOf(r,"minutes"))+"".concat(+l.startOf(s,"minutes"))+"".concat(a,"-").concat(i)};function Sw(e){for(var t=e.min,r=e.max,s=e.step,a=e.timeslots,i=e.localizer,l=YE({step:s,localizer:i}),u=1+i.getTotalMin(t,r),d=i.getMinutesFromMidnight(t),h=Math.ceil((u-1)/(s*a)),f=h*a,m=new Array(h),g=new Array(f),x=0;x<h;x++){m[x]=new Array(a);for(var v=0;v<a;v++){var b=x*a+v,w=b*s;g[b]=m[x][v]=i.getSlotDate(t,d,w)}}var C=g.length*s;g.push(i.getSlotDate(t,d,C));function N(E){var S=i.diff(t,E,"minutes")+i.getDstOffset(t,E);return Math.min(S,u)}return{groups:m,update:function(S){return YE(S)!==l?Sw(S):this},dateIsInGroup:function(S,_){var D=m[_+1];return i.inRange(S,m[_][0],D?D[0]:r,"minutes")},nextSlot:function(S){var _=g[Math.min(g.findIndex(function(D){return D===S||i.eq(D,S)})+1,g.length-1)];return i.eq(_,S)&&(_=i.add(S,s,"minutes")),_},closestSlotToPosition:function(S){var _=Math.min(g.length-1,Math.max(0,Math.floor(S*f)));return g[_]},closestSlotFromPoint:function(S,_){var D=Math.abs(_.top-_.bottom);return this.closestSlotToPosition((S.y-_.top)/D)},closestSlotFromDate:function(S){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(S,t,"minutes"))return g[0];if(i.gt(S,r,"minutes"))return g[g.length-1];var D=i.diff(t,S,"minutes");return g[(D-D%s)/s+_]},startsBeforeDay:function(S){return i.lt(S,t,"day")},startsAfterDay:function(S){return i.gt(S,r,"day")},startsBefore:function(S){return i.lt(i.merge(t,S),t,"minutes")},startsAfter:function(S){return i.gt(i.merge(r,S),r,"minutes")},getRange:function(S,_,D,T){D||(S=i.min(r,i.max(t,S))),T||(_=i.min(r,i.max(t,_)));var P=N(S),O=N(_),F=O>s*f&&!i.eq(r,_)?(P-s)/(s*f)*100:P/(s*f)*100;return{top:F,height:O/(s*f)*100-F,start:N(S),startDate:S,end:N(_),endDate:_}},getCurrentTimePosition:function(S){var _=N(S),D=_/(s*f)*100;return D}}}var iZ=function(){function e(t,r){var s=r.accessors,a=r.slotMetrics;Pr(this,e);var i=a.getRange(s.start(t),s.end(t)),l=i.start,u=i.startDate,d=i.end,h=i.endDate,f=i.top,m=i.height;this.start=l,this.end=d,this.startMs=+u,this.endMs=+h,this.top=f,this.height=m,this.data=t}return Rr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var s=100-this.container._width;return s/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,s=Math.min(100,this._width*1.7);if(this.rows)return s;if(this.leaves)return this.leaves.length>0?s:r;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?r:s}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,s=r.leaves,a=r.xOffset,i=r._width,l=s.indexOf(this)+1;return a+l*i}}])}();function oZ(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function lZ(e){for(var t=hX(e,["startMs",function(u){return-u.endMs}]),r=[];t.length>0;){var s=t.shift();r.push(s);for(var a=0;a<t.length;a++){var i=t[a];if(!(s.endMs>i.startMs)){if(a>0){var l=t.splice(a,1)[0];r.push(l)}break}}}return r}function BP(e){for(var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,i=t.map(function(f){return new iZ(f,{slotMetrics:s,accessors:a})}),l=lZ(i),u=[],d=function(){var m=l[h],g=u.find(function(b){return b.end>m.start||Math.abs(m.start-b.start)<r});if(!g)return m.rows=[],u.push(m),1;m.container=g;for(var x=null,v=g.rows.length-1;!x&&v>=0;v--)oZ(g.rows[v],m,r)&&(x=g.rows[v]);x?(x.leaves.push(m),m.row=x):(m.leaves=[],g.rows.push(m))},h=0;h<l.length;h++)d();return l.map(function(f){return{event:f.data,style:{top:f.top,height:f.height,width:f.width,xOffset:Math.max(0,f.xOffset)}}})}function zP(e,t,r){for(var s=0;s<e.friends.length;++s)if(!(r.indexOf(e.friends[s])>-1)){t=t>e.friends[s].idx?t:e.friends[s].idx,r.push(e.friends[s]);var a=zP(e.friends[s],t,r);t=t>a?t:a}return t}function cZ(e){var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,i=BP({events:t,minimumStartDifference:r,slotMetrics:s,accessors:a});i.sort(function(re,ee){return re=re.style,ee=ee.style,re.top!==ee.top?re.top>ee.top?1:-1:re.height!==ee.height?re.top+re.height<ee.top+ee.height?1:-1:0});for(var l=0;l<i.length;++l)i[l].friends=[],delete i[l].style.left,delete i[l].style.left,delete i[l].idx,delete i[l].size;for(var u=0;u<i.length-1;++u)for(var d=i[u],h=d.style.top,f=d.style.top+d.style.height,m=u+1;m<i.length;++m){var g=i[m],x=g.style.top,v=g.style.top+g.style.height;(x>=h&&v<=f||v>h&&v<=f||x>=h&&x<f)&&(d.friends.push(g),g.friends.push(d))}for(var b=0;b<i.length;++b){for(var w=i[b],C=[],N=0;N<100;++N)C.push(1);for(var E=0;E<w.friends.length;++E)w.friends[E].idx!==void 0&&(C[w.friends[E].idx]=0);w.idx=C.indexOf(1)}for(var S=0;S<i.length;++S){var _=0;if(!i[S].size){var D=[],T=zP(i[S],0,D);_=100/(T+1),i[S].size=_;for(var P=0;P<D.length;++P)D[P].size=_}}for(var O=0;O<i.length;++O){var F=i[O];F.style.left=F.idx*F.size;for(var $=0,z=0;z<F.friends.length;++z){var q=F.friends[z].idx;$=$>q?$:q}$<=F.idx&&(F.size=100-F.idx*F.size);var H=F.idx===0?0:3;F.style.width="calc(".concat(F.size,"% - ").concat(H,"px)"),F.style.height="calc(".concat(F.style.height,"% - 2px)"),F.style.xOffset="calc(".concat(F.style.left,"% + ").concat(H,"px)")}return i}var KE={overlap:BP,"no-overlap":cZ};function uZ(e){return!!(e&&e.constructor&&e.call&&e.apply)}function dZ(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in KE&&(r=KE[t]),uZ(r)?r.apply(this,arguments):[]}var GP=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.renderSlot,i=s.resource,l=s.group,u=s.getters,d=s.components,h=d===void 0?{}:d,f=h.timeSlotWrapper,m=f===void 0?Ps:f,g=u?u.slotGroupProp(l):{};return Q.createElement("div",Object.assign({className:"rbc-timeslot-group"},g),l.map(function(x,v){var b=u?u.slotProp(x,i):{};return Q.createElement(m,{key:v,value:x,resource:i},Q.createElement("div",Object.assign({},b,{className:jr("rbc-time-slot",b.className)}),a&&a(x,v)))}))}}])}(j.Component);function _d(e){return typeof e=="string"?e:e+"%"}function fZ(e){var t=e.style,r=e.className,s=e.event,a=e.accessors,i=e.rtl,l=e.selected,u=e.label,d=e.continuesPrior,h=e.continuesAfter,f=e.getters,m=e.onClick,g=e.onDoubleClick,x=e.isBackgroundEvent,v=e.onKeyPress,b=e.components,w=b.event,C=b.eventWrapper,N=a.title(s),E=a.tooltip(s),S=a.end(s),_=a.start(s),D=f.eventProp(s,_,S,l),T=[Q.createElement("div",{key:"1",className:"rbc-event-label"},u),Q.createElement("div",{key:"2",className:"rbc-event-content"},w?Q.createElement(w,{event:s,title:N}):N)],P=t.height,O=t.top,F=t.width,$=t.xOffset,z=rr(rr({},D.style),{},di({top:_d(O),height:_d(P),width:_d(F)},i?"right":"left",_d($)));return Q.createElement(C,Object.assign({type:"time"},e),Q.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:g,style:z,onKeyDown:v,title:E?(typeof u=="string"?u+": ":"")+E:void 0,className:jr(x?"rbc-background-event":"rbc-event",r,D.className,{"rbc-selected":l,"rbc-event-continues-earlier":d,"rbc-event-continues-later":h})},T))}var mZ=function(t){var r=t.children,s=t.className,a=t.style,i=t.innerRef;return Q.createElement("div",{className:s,style:a,ref:i},r)},hZ=Q.forwardRef(function(e,t){return Q.createElement(mZ,Object.assign({},e,{innerRef:t}))}),pZ=["dayProp"],gZ=["eventContainerWrapper","timeIndicatorWrapper"],qP=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(l){var u=l.events,d=l.isBackgroundEvent,h=r.props,f=h.rtl,m=h.selected,g=h.accessors,x=h.localizer,v=h.getters,b=h.components,w=h.step,C=h.timeslots,N=h.dayLayoutAlgorithm,E=h.resizable,S=r,_=S.slotMetrics,D=x.messages,T=dZ({events:u,accessors:g,slotMetrics:_,minimumStartDifference:Math.ceil(w*C/2),dayLayoutAlgorithm:N});return T.map(function(P,O){var F,$=P.event,z=P.style,q=g.end($),H=g.start($),re=(F=g.eventId($))!==null&&F!==void 0?F:"evt_"+O,ee="eventTimeRangeFormat",L,M=_.startsBeforeDay(H),W=_.startsAfterDay(q);M?ee="eventTimeRangeEndFormat":W&&(ee="eventTimeRangeStartFormat"),M&&W?L=D.allDay:L=x.format({start:H,end:q},ee);var R=M||_.startsBefore(H),U=W||_.startsAfter(q);return Q.createElement(fZ,{style:z,event:$,label:L,key:re,getters:v,rtl:f,components:b,continuesPrior:R,continuesAfter:U,accessors:g,resource:r.props.resource,selected:ym($,m),onClick:function(B){return r._select(rr(rr(rr({},$),r.props.resource&&{sourceResource:r.props.resource}),d&&{isBackgroundEvent:!0}),B)},onDoubleClick:function(B){return r._doubleClick($,B)},isBackgroundEvent:d,onKeyPress:function(B){return r._keyPress($,B)},resizable:E})})},r._selectable=function(){var l=r.containerRef.current,u=r.props,d=u.longPressThreshold,h=u.localizer,f=r._selector=new MP(function(){return l},{longPressThreshold:d}),m=function(b){var w=r.props.onSelecting,C=r.state||{},N=g(b),E=N.startDate,S=N.endDate;w&&(h.eq(C.startDate,E,"minutes")&&h.eq(C.endDate,S,"minutes")||w({start:E,end:S,resourceId:r.props.resource})===!1)||(r.state.start!==N.start||r.state.end!==N.end||r.state.selecting!==N.selecting)&&r.setState(N)},g=function(b){var w=r.slotMetrics.closestSlotFromPoint(b,Pi(l));r.state.selecting||(r._initialSlot=w);var C=r._initialSlot;h.lte(C,w)?w=r.slotMetrics.nextSlot(w):h.gt(C,w)&&(C=r.slotMetrics.nextSlot(C));var N=r.slotMetrics.getRange(h.min(C,w),h.max(C,w));return rr(rr({},N),{},{selecting:!0,top:"".concat(N.top,"%"),height:"".concat(N.height,"%")})},x=function(b,w){if(!kf(r.containerRef.current,b)){var C=g(b),N=C.startDate,E=C.endDate;r._selectSlot({startDate:N,endDate:E,action:w,box:b})}r.setState({selecting:!1})};f.on("selecting",m),f.on("selectStart",m),f.on("beforeSelect",function(v){if(r.props.selectable==="ignoreEvents")return!kf(r.containerRef.current,v)}),f.on("click",function(v){return x(v,"click")}),f.on("doubleClick",function(v){return x(v,"doubleClick")}),f.on("select",function(v){r.state.selecting&&(r._selectSlot(rr(rr({},r.state),{},{action:"select",bounds:v})),r.setState({selecting:!1}))}),f.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(l){for(var u=l.startDate,d=l.endDate,h=l.action,f=l.bounds,m=l.box,g=u,x=[];r.props.localizer.lte(g,d);)x.push(g),g=new Date(+g+r.props.step*60*1e3);dr(r.props.onSelectSlot,{slots:x,start:u,end:d,resourceId:r.props.resource,action:h,bounds:f,box:m})},r._select=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onSelectEvent,u)},r._doubleClick=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onDoubleClickEvent,u)},r._keyPress=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onKeyPressEvent,u)},r.slotMetrics=Sw(r.props),r.containerRef=j.createRef(),r}return on(t,e),Rr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(s,a){this.props.selectable&&!s.selectable&&this._selectable(),!this.props.selectable&&s.selectable&&this._teardownSelectable();var i=this.props,l=i.getNow,u=i.isNow,d=i.localizer,h=i.date,f=i.min,m=i.max,g=d.neq(s.getNow(),l(),"minutes");if(s.isNow!==u||g){if(this.clearTimeIndicatorInterval(),u){var x=!g&&d.eq(s.date,h,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else u&&(d.neq(s.min,f,"minutes")||d.neq(s.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var s=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){s.intervalTriggered=!0,s.positionTimeIndicator(),s.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var s=this.props,a=s.min,i=s.max,l=s.getNow,u=l();if(u>=a&&u<=i){var d=this.slotMetrics.getCurrentTimePosition(u);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:d})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var s=this.props,a=s.date,i=s.max,l=s.rtl,u=s.isNow,d=s.resource,h=s.accessors,f=s.localizer,m=s.getters,g=m.dayProp,x=Bs(m,pZ),v=s.components,b=v.eventContainerWrapper,w=v.timeIndicatorWrapper,C=Bs(v,gZ);this.slotMetrics=this.slotMetrics.update(this.props);var N=this.slotMetrics,E=this.state,S=E.selecting,_=E.top,D=E.height,T=E.startDate,P=E.endDate,O={start:T,end:P},F=g(i,d),$=F.className,z=F.style,q={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},H=C.dayColumnWrapper||hZ;return Q.createElement(H,{ref:this.containerRef,date:a,style:z,className:jr($,"rbc-day-slot","rbc-time-column",u&&"rbc-now",u&&"rbc-today",S&&"rbc-slot-selecting"),slotMetrics:N,resource:d},N.groups.map(function(re,ee){return Q.createElement(GP,{key:ee,group:re,resource:d,getters:x,components:C})}),Q.createElement(b,{localizer:f,resource:d,accessors:h,getters:x,components:C,slotMetrics:N},Q.createElement("div",{className:jr("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),S&&Q.createElement("div",{className:"rbc-slot-selection",style:{top:_,height:D}},Q.createElement("span",null,f.format(O,"selectRangeFormat"))),u&&this.intervalTriggered&&Q.createElement(w,q,Q.createElement("div",q)))}}])}(Q.Component);qP.defaultProps={dragThroughEvents:!0,timeslots:2};var UP=function(t){var r=t.label;return Q.createElement(Q.Fragment,null,r)},xZ=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.handleHeaderClick=function(l,u,d){d.preventDefault(),dr(r.props.onDrillDown,[l,u])},r.renderRow=function(l){var u=r.props,d=u.events,h=u.rtl,f=u.selectable,m=u.getNow,g=u.range,x=u.getters,v=u.localizer,b=u.accessors,w=u.components,C=u.resizable,N=b.resourceId(l),E=l?d.filter(function(S){return b.resource(S)===N}):d;return Q.createElement($c,{isAllDay:!0,rtl:h,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:g,events:E,resourceId:N,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:w,accessors:b,getters:x,localizer:v,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:C})},r}return on(t,e),Rr(t,[{key:"renderHeaderCells",value:function(s){var a=this,i=this.props,l=i.localizer,u=i.getDrilldownView,d=i.getNow,h=i.getters.dayProp,f=i.components.header,m=f===void 0?Nw:f,g=d();return s.map(function(x,v){var b=u(x),w=l.format(x,"dayFormat"),C=h(x),N=C.className,E=C.style,S=Q.createElement(m,{date:x,label:w,localizer:l});return Q.createElement("div",{key:v,style:E,className:jr("rbc-header",N,l.isSameDate(x,g)&&"rbc-today")},b?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(D){return a.handleHeaderClick(x,b,D)}},S):Q.createElement("span",null,S))})}},{key:"render",value:function(){var s=this,a=this.props,i=a.width,l=a.rtl,u=a.resources,d=a.range,h=a.events,f=a.getNow,m=a.accessors,g=a.selectable,x=a.components,v=a.getters,b=a.scrollRef,w=a.localizer,C=a.isOverflowing,N=a.components,E=N.timeGutterHeader,S=N.resourceHeader,_=S===void 0?UP:S,D=a.resizable,T={};C&&(T[l?"marginLeft":"marginRight"]="".concat(nw()-1,"px"));var P=u.groupEvents(h);return Q.createElement("div",{style:T,ref:b,className:jr("rbc-time-header",C&&"rbc-overflowing")},Q.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},E&&Q.createElement(E,null)),u.map(function(O,F){var $=ki(O,2),z=$[0],q=$[1];return Q.createElement("div",{className:"rbc-time-header-content",key:z||F},q&&Q.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(F)},Q.createElement("div",{className:"rbc-header"},Q.createElement(_,{index:F,label:m.resourceTitle(q),resource:q}))),Q.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(d.length<=1?" rbc-time-header-cell-single-day":"")},s.renderHeaderCells(d)),Q.createElement($c,{isAllDay:!0,rtl:l,getNow:f,minRows:2,maxRows:s.props.allDayMaxRows+1,range:d,events:P.get(z)||[],resourceId:q&&z,className:"rbc-allday-cell",selectable:g,selected:s.props.selected,components:x,accessors:m,getters:v,localizer:w,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:D}))}))}}])}(Q.Component),yZ=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.handleHeaderClick=function(l,u,d){d.preventDefault(),dr(r.props.onDrillDown,[l,u])},r}return on(t,e),Rr(t,[{key:"renderHeaderCells",value:function(s){var a=this,i=this.props,l=i.localizer,u=i.getDrilldownView,d=i.getNow,h=i.getters.dayProp,f=i.components,m=f.header,g=m===void 0?Nw:m,x=f.resourceHeader,v=x===void 0?UP:x,b=i.resources,w=i.accessors,C=i.events,N=i.rtl,E=i.selectable,S=i.components,_=i.getters,D=i.resizable,T=d(),P=b.groupEvents(C);return s.map(function(O,F){var $=u(O),z=l.format(O,"dayFormat"),q=h(O),H=q.className,re=q.style,ee=Q.createElement(g,{date:O,label:z,localizer:l});return Q.createElement("div",{key:F,className:"rbc-time-header-content rbc-resource-grouping"},Q.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(s.length<=1?" rbc-time-header-cell-single-day":"")},Q.createElement("div",{style:re,className:jr("rbc-header",H,l.isSameDate(O,T)&&"rbc-today")},$?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(M){return a.handleHeaderClick(O,$,M)}},ee):Q.createElement("span",null,ee))),Q.createElement("div",{className:"rbc-row"},b.map(function(L,M){var W=ki(L,2),R=W[0],U=W[1];return Q.createElement("div",{key:"resource_".concat(R,"_").concat(M),className:jr("rbc-header",H,l.isSameDate(O,T)&&"rbc-today")},Q.createElement(v,{index:M,label:w.resourceTitle(U),resource:U}))})),Q.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},b.map(function(L,M){var W=ki(L,2),R=W[0],U=W[1],Z=(P.get(R)||[]).filter(function(B){return l.isSameDate(B.start,O)||l.isSameDate(B.end,O)});return Q.createElement($c,{key:"resource_".concat(R,"_").concat(M),isAllDay:!0,rtl:N,getNow:d,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[O],events:Z,resourceId:U&&R,className:"rbc-allday-cell",selectable:E,selected:a.props.selected,components:S,accessors:w,getters:_,localizer:l,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:D})})))})}},{key:"render",value:function(){var s=this.props,a=s.width,i=s.rtl,l=s.range,u=s.scrollRef,d=s.isOverflowing,h=s.components.timeGutterHeader,f={};return d&&(f[i?"marginLeft":"marginRight"]="".concat(nw()-1,"px")),Q.createElement("div",{style:f,ref:u,className:jr("rbc-time-header",d&&"rbc-overflowing")},Q.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},h&&Q.createElement(h,null)),this.renderHeaderCells(l))}}])}(Q.Component);function bZ(e){var t=e.min,r=e.max,s=e.localizer;return s.getTimezoneOffset(t)!==s.getTimezoneOffset(r)?{start:s.add(t,-1,"day"),end:s.add(r,-1,"day")}:{start:t,end:r}}var vZ=function(t){var r=t.min,s=t.max,a=t.timeslots,i=t.step,l=t.localizer,u=t.getNow,d=t.resource,h=t.components,f=t.getters,m=t.gutterRef,g=h.timeGutterWrapper,x=j.useMemo(function(){return bZ({min:r,max:s,localizer:l})},[r==null?void 0:r.toISOString(),s==null?void 0:s.toISOString(),l]),v=x.start,b=x.end,w=j.useState(Sw({min:v,max:b,timeslots:a,step:i,localizer:l})),C=ki(w,2),N=C[0],E=C[1];j.useEffect(function(){N&&E(N.update({min:v,max:b,timeslots:a,step:i,localizer:l}))},[v==null?void 0:v.toISOString(),b==null?void 0:b.toISOString(),a,i]);var S=j.useCallback(function(_,D){if(D)return null;var T=N.dateIsInGroup(u(),D);return Q.createElement("span",{className:jr("rbc-label",T&&"rbc-now")},l.format(_,"timeGutterFormat"))},[N,l,u]);return Q.createElement(g,{slotMetrics:N},Q.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},N.groups.map(function(_,D){return Q.createElement(GP,{key:D,group:_,resource:d,components:h,renderSlot:S,getters:f})})))},wZ=Q.forwardRef(function(e,t){return Q.createElement(vZ,Object.assign({gutterRef:t},e))}),Ey={};function jZ(e,t){return{map:function(s){return e?e.map(function(a,i){return s([t.resourceId(a),a],i)}):[s([Ey,null],0)]},groupEvents:function(s){var a=new Map;return e?(s.forEach(function(i){var l=t.resource(i)||Ey;if(Array.isArray(l))l.forEach(function(d){var h=a.get(d)||[];h.push(i),a.set(d,h)});else{var u=a.get(l)||[];u.push(i),a.set(l,u)}}),a):(a.set(Ey,s),a)}}}var tl=function(e){function t(r){var s;return Pr(this,t),s=an(this,t,[r]),s.handleScroll=function(a){s.scrollRef.current&&(s.scrollRef.current.scrollLeft=a.target.scrollLeft)},s.handleResize=function(){lk(s.rafHandle),s.rafHandle=XT(s.checkOverflow)},s.handleKeyPressEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];dr(s.props.onKeyPressEvent,i)},s.handleSelectEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];dr(s.props.onSelectEvent,i)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];dr(s.props.onDoubleClickEvent,i)},s.handleShowMore=function(a,i,l,u,d){var h=s.props,f=h.popup,m=h.onDrillDown,g=h.onShowMore,x=h.getDrilldownView,v=h.doShowMoreDrillDown;if(s.clearSelection(),f){var b=QT(l,s.containerRef.current);s.setState({overlay:{date:i,events:a,position:rr(rr({},b),{},{width:"200px"}),target:d}})}else v&&dr(m,[i,x(i)||hn.DAY]);dr(g,[a,i,u])},s.handleSelectAllDaySlot=function(a,i){var l=s.props.onSelectSlot,u=new Date(a[0]),d=new Date(a[a.length-1]);d.setDate(a[a.length-1].getDate()+1),dr(l,{slots:a,start:u,end:d,action:i.action,resourceId:i.resourceId})},s.overlayDisplay=function(){s.setState({overlay:null})},s.checkOverflow=function(){if(!s._updatingOverflow){var a=s.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;s.state.isOverflowing!==i&&(s._updatingOverflow=!0,s.setState({isOverflowing:i},function(){s._updatingOverflow=!1}))}}},s.memoizedResources=xP(function(a,i){return jZ(a,i)}),s.state={gutterWidth:void 0,isOverflowing:null},s.scrollRef=Q.createRef(),s.contentRef=Q.createRef(),s.containerRef=Q.createRef(),s._scrollRatio=null,s.gutterRef=j.createRef(),s}return on(t,e),Rr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),lk(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(s,a,i,l,u,d,h,f,m,g){var x=this.props,v=x.min,b=x.max,w=(l.get(a)||[]).filter(function(N){return d.inRange(s,h.start(N),h.end(N),"day")}),C=(u.get(a)||[]).filter(function(N){return d.inRange(s,h.start(N),h.end(N),"day")});return Q.createElement(qP,Object.assign({},this.props,{localizer:d,min:d.merge(s,v),max:d.merge(s,b),resource:i&&a,components:f,isNow:d.isSameDate(s,g),key:"".concat(a,"-").concat(s),date:s,events:w,backgroundEvents:C,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(s,a,i,l,u,d,h,f,m){var g=this;return a.map(function(x){var v=ki(x,2),b=v[0],w=v[1];return s.map(function(C){return g.renderDayColumn(C,b,w,i,l,u,d,f,m,h)})})}},{key:"renderRangeFirst",value:function(s,a,i,l,u,d,h,f,m){var g=this;return s.map(function(x){return Q.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},a.map(function(v){var b=ki(v,2),w=b[0],C=b[1];return Q.createElement("div",{style:{flex:1},key:d.resourceId(C)},g.renderDayColumn(x,w,C,i,l,u,d,f,m,h))}))})}},{key:"renderEvents",value:function(s,a,i,l){var u=this.props,d=u.accessors,h=u.localizer,f=u.resourceGroupingLayout,m=u.components,g=u.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,d),v=x.groupEvents(a),b=x.groupEvents(i);return f?this.renderRangeFirst(s,x,v,b,h,d,l,m,g):this.renderResourcesFirst(s,x,v,b,h,d,l,m,g)}},{key:"render",value:function(){var s,a=this.props,i=a.events,l=a.backgroundEvents,u=a.range,d=a.width,h=a.rtl,f=a.selected,m=a.getNow,g=a.resources,x=a.components,v=a.accessors,b=a.getters,w=a.localizer,C=a.min,N=a.max,E=a.showMultiDayTimes,S=a.longPressThreshold,_=a.resizable,D=a.resourceGroupingLayout;d=d||this.state.gutterWidth;var T=u[0],P=u[u.length-1];this.slots=u.length;var O=[],F=[],$=[];i.forEach(function(q){if(Oc(q,T,P,v,w)){var H=v.start(q),re=v.end(q);v.allDay(q)||w.startAndEndAreDateOnly(H,re)||!E&&!w.isSameDate(H,re)?O.push(q):F.push(q)}}),l.forEach(function(q){Oc(q,T,P,v,w)&&$.push(q)}),O.sort(function(q,H){return Rb(q,H,v,w)});var z={range:u,events:O,width:d,rtl:h,getNow:m,localizer:w,selected:f,allDayMaxRows:this.props.showAllEvents?1/0:(s=this.props.allDayMaxRows)!==null&&s!==void 0?s:1/0,resources:this.memoizedResources(g,v),selectable:this.props.selectable,accessors:v,getters:b,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:S,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:_};return Q.createElement("div",{className:jr("rbc-time-view",g&&"rbc-time-view-resources"),ref:this.containerRef},g&&g.length>1&&D?Q.createElement(yZ,z):Q.createElement(xZ,z),this.props.popup&&this.renderOverlay(),Q.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},Q.createElement(wZ,{date:T,ref:this.gutterRef,localizer:w,min:w.merge(T,C),max:w.merge(T,N),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:b}),this.renderEvents(u,F,$,m())))}},{key:"renderOverlay",value:function(){var s,a,i=this,l=(s=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&s!==void 0?s:{},u=this.props,d=u.accessors,h=u.localizer,f=u.components,m=u.getters,g=u.selected,x=u.popupOffset,v=u.handleDragStart,b=function(){return i.setState({overlay:null})};return Q.createElement(jw,{overlay:l,accessors:d,localizer:h,components:f,getters:m,selected:g,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:b})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var s=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=s.gutterRef)!==null&&a!==void 0&&a.current?Ab(s.gutterRef.current):void 0;i&&s.state.gutterWidth!==i&&s.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var s=this.contentRef.current;s.scrollTop=s.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=s.min,i=s.max,l=s.scrollToTime,u=s.localizer,d=u.diff(u.merge(l,a),l,"milliseconds"),h=u.diff(a,i,"milliseconds");this._scrollRatio=d/h}}])}(j.Component);tl.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var NZ=["date","localizer","min","max","scrollToTime","enableAutoScroll"],vm=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,h=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,v=Bs(s,NZ),b=t.range(a,{localizer:i});return Q.createElement(tl,Object.assign({},v,{range:b,eventOffset:10,localizer:i,min:u,max:h,scrollToTime:m,enableAutoScroll:x}))}}])}(Q.Component);vm.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};vm.navigate=function(e,t,r){var s=r.localizer;switch(t){case An.PREVIOUS:return s.add(e,-1,"day");case An.NEXT:return s.add(e,1,"day");default:return e}};vm.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var SZ=["date","localizer","min","max","scrollToTime","enableAutoScroll"],La=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,h=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,v=Bs(s,SZ),b=t.range(a,this.props);return Q.createElement(tl,Object.assign({},v,{range:b,eventOffset:15,localizer:i,min:u,max:h,scrollToTime:m,enableAutoScroll:x}))}}])}(Q.Component);La.defaultProps=tl.defaultProps;La.navigate=function(e,t,r){var s=r.localizer;switch(t){case An.PREVIOUS:return s.add(e,-1,"week");case An.NEXT:return s.add(e,1,"week");default:return e}};La.range=function(e,t){var r=t.localizer,s=r.startOfWeek(),a=r.startOf(e,"week",s),i=r.endOf(e,"week",s);return r.range(a,i)};La.title=function(e,t){var r=t.localizer,s=La.range(e,{localizer:r}),a=NP(s),i=a[0],l=a.slice(1);return r.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var kZ=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function kw(e,t){return La.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var au=function(e){function t(){return Pr(this,t),an(this,t,arguments)}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.date,i=s.localizer,l=s.min,u=l===void 0?i.startOf(new Date,"day"):l,d=s.max,h=d===void 0?i.endOf(new Date,"day"):d,f=s.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,g=s.enableAutoScroll,x=g===void 0?!0:g,v=Bs(s,kZ),b=kw(a,this.props);return Q.createElement(tl,Object.assign({},v,{range:b,eventOffset:15,localizer:i,min:u,max:h,scrollToTime:m,enableAutoScroll:x}))}}])}(Q.Component);au.defaultProps=tl.defaultProps;au.range=kw;au.navigate=La.navigate;au.title=function(e,t){var r=t.localizer,s=kw(e,{localizer:r}),a=NP(s),i=a[0],l=a.slice(1);return r.format({start:i,end:l.pop()},"dayRangeHeaderFormat")};var wm=30;function jm(e){var t=e.accessors,r=e.components,s=e.date,a=e.events,i=e.getters,l=e.length,u=l===void 0?wm:l,d=e.localizer,h=e.onDoubleClickEvent,f=e.onSelectEvent,m=e.selected,g=j.useRef(null),x=j.useRef(null),v=j.useRef(null),b=j.useRef(null),w=j.useRef(null);j.useEffect(function(){E()});var C=function(P,O,F){var $=r.event,z=r.date;return O=O.filter(function(q){return Oc(q,d.startOf(P,"day"),d.endOf(P,"day"),t,d)}),O.map(function(q,H){var re=t.title(q),ee=t.end(q),L=t.start(q),M=i.eventProp(q,L,ee,ym(q,m)),W=H===0&&d.format(P,"agendaDateFormat"),R=H===0?Q.createElement("td",{rowSpan:O.length,className:"rbc-agenda-date-cell"},z?Q.createElement(z,{day:P,label:W}):W):!1;return Q.createElement("tr",{key:F+"_"+H,className:M.className,style:M.style},R,Q.createElement("td",{className:"rbc-agenda-time-cell"},N(P,q)),Q.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(Z){return f&&f(q,Z)},onDoubleClick:function(Z){return h&&h(q,Z)}},$?Q.createElement($,{event:q,title:re}):re))},[])},N=function(P,O){var F="",$=r.time,z=d.messages.allDay,q=t.end(O),H=t.start(O);return t.allDay(O)||(d.eq(H,q)?z=d.format(H,"agendaTimeFormat"):d.isSameDate(H,q)?z=d.format({start:H,end:q},"agendaTimeRangeFormat"):d.isSameDate(P,H)?z=d.format(H,"agendaTimeFormat"):d.isSameDate(P,q)&&(z=d.format(q,"agendaTimeFormat"))),d.gt(P,H,"day")&&(F="rbc-continues-prior"),d.lt(P,q,"day")&&(F+=" rbc-continues-after"),Q.createElement("span",{className:F.trim()},$?Q.createElement($,{event:O,day:P,label:z}):z)},E=function(){if(w.current){var P=g.current,O=w.current.firstChild;if(O){var F=b.current.scrollHeight>b.current.clientHeight,$=[],z=$;$=[Ab(O.children[0]),Ab(O.children[1])],(z[0]!==$[0]||z[1]!==$[1])&&(x.current.style.width=$[0]+"px",v.current.style.width=$[1]+"px"),F?(kK(P,"rbc-header-overflowing"),P.style.marginRight=nw()+"px"):CK(P,"rbc-header-overflowing")}}},S=d.messages,_=d.add(s,u,"day"),D=d.range(s,_,"day");return a=a.filter(function(T){return Oc(T,d.startOf(s,"day"),d.endOf(_,"day"),t,d)}),a.sort(function(T,P){return+t.start(T)-+t.start(P)}),Q.createElement("div",{className:"rbc-agenda-view"},a.length!==0?Q.createElement(Q.Fragment,null,Q.createElement("table",{ref:g,className:"rbc-agenda-table"},Q.createElement("thead",null,Q.createElement("tr",null,Q.createElement("th",{className:"rbc-header",ref:x},S.date),Q.createElement("th",{className:"rbc-header",ref:v},S.time),Q.createElement("th",{className:"rbc-header"},S.event)))),Q.createElement("div",{className:"rbc-agenda-content",ref:b},Q.createElement("table",{className:"rbc-agenda-table"},Q.createElement("tbody",{ref:w},D.map(function(T,P){return C(T,a,P)}))))):Q.createElement("span",{className:"rbc-agenda-empty"},S.noEventsInRange))}jm.range=function(e,t){var r=t.length,s=r===void 0?wm:r,a=t.localizer,i=a.add(e,s,"day");return{start:e,end:i}};jm.navigate=function(e,t,r){var s=r.length,a=s===void 0?wm:s,i=r.localizer;switch(t){case An.PREVIOUS:return i.add(e,-a,"day");case An.NEXT:return i.add(e,a,"day");default:return e}};jm.title=function(e,t){var r=t.length,s=r===void 0?wm:r,a=t.localizer,i=a.add(e,s,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var Vd=di(di(di(di(di({},hn.MONTH,bm),hn.WEEK,La),hn.WORK_WEEK,au),hn.DAY,vm),hn.AGENDA,jm),CZ=["action","date","today"];function _Z(e,t){var r=t.action,s=t.date,a=t.today,i=Bs(t,CZ);switch(e=typeof e=="string"?Vd[e]:e,r){case An.TODAY:s=a||new Date;break;case An.DATE:break;default:Sc(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),s=e.navigate(s,r,i)}return s}function EZ(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&ra(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Js=function(t){return function(r){return EZ(r,t)}},DZ=["view","date","getNow","onNavigate"],AZ=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function WP(e){if(Array.isArray(e))return e;for(var t=[],r=0,s=Object.entries(e);r<s.length;r++){var a=ki(s[r],2),i=a[0],l=a[1];l&&t.push(i)}return t}function TZ(e,t){var r=t.views,s=WP(r);return s.indexOf(e)!==-1}var HP=function(e){function t(){var r;Pr(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=an(this,t,[].concat(a)),r.getViews=function(){var l=r.props.views;return Array.isArray(l)?ZX(l,function(u,d){return u[d]=Vd[d]},{}):ra(l)==="object"?jX(l,function(u,d){return u===!0?Vd[d]:u}):Vd},r.getView=function(){var l=r.getViews();return l[r.props.view]},r.getDrilldownView=function(l){var u=r.props,d=u.view,h=u.drilldownView,f=u.getDrilldownView;return f?f(l,d,Object.keys(r.getViews())):h},r.handleRangeChange=function(l,u,d){var h=r.props,f=h.onRangeChange,m=h.localizer;f&&u.range&&f(u.range(l,{localizer:m}),d)},r.handleNavigate=function(l,u){var d=r.props,h=d.view,f=d.date,m=d.getNow,g=d.onNavigate,x=Bs(d,DZ),v=r.getView(),b=m();f=_Z(v,rr(rr({},x),{},{action:l,date:u||f||b,today:b})),g(f,h,l),r.handleRangeChange(f,v)},r.handleViewChange=function(l){l!==r.props.view&&TZ(l,r.props)&&r.props.onView(l);var u=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),u[l],l)},r.handleSelectEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onSelectEvent,u)},r.handleDoubleClickEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onDoubleClickEvent,u)},r.handleKeyPressEvent=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];dr(r.props.onKeyPressEvent,u)},r.handleSelectSlot=function(l){dr(r.props.onSelectSlot,l)},r.handleDrillDown=function(l,u){var d=r.props.onDrillDown;if(d){d(l,u,r.drilldownView);return}u&&r.handleViewChange(u),r.handleNavigate(An.DATE,l)},r.state={context:t.getContext(r.props)},r}return on(t,e),Rr(t,[{key:"render",value:function(){var s=this.props,a=s.view,i=s.toolbar,l=s.events,u=s.backgroundEvents,d=s.resourceGroupingLayout,h=s.style,f=s.className,m=s.elementProps,g=s.date,x=s.getNow,v=s.length,b=s.showMultiDayTimes,w=s.onShowMore,C=s.doShowMoreDrillDown;s.components,s.formats,s.messages,s.culture;var N=Bs(s,AZ);g=g||x();var E=this.getView(),S=this.state.context,_=S.accessors,D=S.components,T=S.getters,P=S.localizer,O=S.viewNames,F=D.toolbar||IJ,$=E.title(g,{localizer:P,length:v});return Q.createElement("div",Object.assign({},m,{className:jr(f,"rbc-calendar",N.rtl&&"rbc-rtl"),style:h}),i&&Q.createElement(F,{date:g,view:a,views:O,label:$,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:P}),Q.createElement(E,Object.assign({},N,{events:l,backgroundEvents:u,date:g,getNow:x,length:v,localizer:P,getters:T,components:D,accessors:_,showMultiDayTimes:b,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:w,doShowMoreDrillDown:C,resourceGroupingLayout:d})))}}],[{key:"getDerivedStateFromProps",value:function(s){return{context:t.getContext(s)}}},{key:"getContext",value:function(s){var a=s.startAccessor,i=s.endAccessor,l=s.allDayAccessor,u=s.tooltipAccessor,d=s.titleAccessor,h=s.resourceAccessor,f=s.resourceIdAccessor,m=s.resourceTitleAccessor,g=s.eventIdAccessor,x=s.eventPropGetter,v=s.backgroundEventPropGetter,b=s.slotPropGetter,w=s.slotGroupPropGetter,C=s.dayPropGetter,N=s.view,E=s.views,S=s.localizer,_=s.culture,D=s.messages,T=D===void 0?{}:D,P=s.components,O=P===void 0?{}:P,F=s.formats,$=F===void 0?{}:F,z=WP(E),q=OJ(T);return{viewNames:z,localizer:RJ(S,_,$,q),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return b&&b.apply(void 0,arguments)||{}},slotGroupProp:function(){return w&&w.apply(void 0,arguments)||{}},dayProp:function(){return C&&C.apply(void 0,arguments)||{}}},components:bX(O[N]||{},QX(O,z),{eventWrapper:Ps,backgroundEventWrapper:Ps,eventContainerWrapper:Ps,dateCellWrapper:Ps,weekWrapper:Ps,timeSlotWrapper:Ps,timeGutterWrapper:Ps,timeIndicatorWrapper:Ps}),accessors:{start:Js(a),end:Js(i),allDay:Js(l),tooltip:Js(u),title:Js(d),resource:Js(h),resourceId:Js(f),resourceTitle:Js(m),eventId:Js(g)}}}}])}(Q.Component);HP.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:hn.MONTH,views:[hn.MONTH,hn.WEEK,hn.DAY,hn.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:hn.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var PZ=IT(HP,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),RZ=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"P",r)," – ").concat(s.format(i,"P",r))},Dy=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"p",r)," – ").concat(s.format(i,"p",r))},IZ=function(t,r,s){var a=t.start;return"".concat(s.format(a,"h:mma",r)," – ")},MZ=function(t,r,s){var a=t.end;return" – ".concat(s.format(a,"h:mma",r))},OZ=function(t,r,s){var a=t.start,i=t.end;return"".concat(s.format(a,"MMMM dd",r)," – ").concat(s.format(i,Qo(a,i,"month")?"dd":"MMMM dd",r))},$Z={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Dy,eventTimeRangeFormat:Dy,eventTimeRangeStartFormat:IZ,eventTimeRangeEndFormat:MZ,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:OZ,agendaHeaderFormat:RZ,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Dy},LZ=function(t){var r=t.startOfWeek,s=t.getDay,a=t.format,i=t.locales;return new PJ({formats:$Z,firstOfWeek:function(u){return s(r(new Date,{locale:i[u]}))},format:function(u,d,h){return a(new Date(u),d,{locale:i[h]})}})};const FZ={"en-US":Ub},BZ=LZ({format:Ut,startOfWeek:()=>bi(new Date,{weekStartsOn:0}),getDay:BM,locales:FZ}),QE={title:"",description:"",start:new Date,end:new Date,type:"Event",color:"",location:"",calendar:""},zZ=[{label:"Event",value:"Event"},{label:"My To Do",value:"My To Do"},{label:"Appointment Group",value:"Appointment Group"}];function XE(e){return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}function GZ(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}const Wl=({event:e})=>{var f;Lt();const{title:t}=e,r=e.color||e.resource&&e.resource.color||"#93c5fd";let s=null,a=null;e.start&&(s=e.start instanceof Date?e.start:new Date(e.start),isNaN(s.getTime())&&(s=null)),e.end&&(a=e.end instanceof Date?e.end:new Date(e.end),isNaN(a.getTime())&&(a=null));const l=(window.allCalendarEvents||[]).filter(m=>{let g=null,x=null;return m.start&&(g=m.start instanceof Date?m.start:new Date(m.start),isNaN(g.getTime())&&(g=null)),m.end&&(x=m.end instanceof Date?m.end:new Date(m.end),isNaN(x.getTime())&&(x=null)),!g||!x||!s||!a?!1:g.toDateString()===s.toDateString()&&(s.getTime()<x.getTime()&&a.getTime()>g.getTime()||g.getTime()<a.getTime()&&x.getTime()>s.getTime())});l.sort((m,g)=>{let x=new Date(0),v=new Date(0);return m.start&&(x=m.start instanceof Date?m.start:new Date(m.start),isNaN(x.getTime())&&(x=new Date(0))),g.start&&(v=g.start instanceof Date?g.start:new Date(g.start),isNaN(v.getTime())&&(v=new Date(0))),x.getTime()-v.getTime()});const u=l.length>1&&l[1]===e,d=((f=e.resource)==null?void 0:f.type)==="Assignment";let h=t;return s&&a&&(d&&s.getTime()===a.getTime()?h+=`
Due: ${Ut(s,"h:mm a")}`:s.getTime()===a.getTime()?h+=`
${Ut(s,"h:mm a")}`:e.allDay?h+=`
All Day`:h+=`
${Ut(s,"h:mm a")} – ${Ut(a,"h:mm a")}`),n.jsxs("div",{className:`relative px-1 py-0.5 rounded h-full flex flex-col justify-center shadow-sm transition-all duration-150 ${l.length>1?"border-l-4 border-pink-400 shadow":"border-l-4 border-transparent"} hover:ring-2 hover:ring-blue-400 ${d?"font-bold border-l-4 border-yellow-400":""}`,style:{background:r,color:"#222",minHeight:28,fontSize:13,cursor:"pointer"},title:String(h),children:[n.jsxs("div",{className:"flex items-center gap-1",children:[d&&n.jsx(Tn,{className:"w-3 h-3 mr-1"}),n.jsx("span",{className:"font-semibold truncate",style:{maxWidth:80},children:t})]}),s&&a&&(d&&s.getTime()===a.getTime()?n.jsxs("span",{className:"text-xs text-gray-700",children:["Due: ",Ut(s,"h:mm a")]}):s.getTime()===a.getTime()?n.jsx("span",{className:"text-xs text-gray-700",children:Ut(s,"h:mm a")}):e.allDay?n.jsx("span",{className:"text-xs text-gray-700",children:"All Day"}):n.jsxs("span",{className:"text-xs text-gray-700",children:[Ut(s,"h:mm a")," – ",Ut(a,"h:mm a")]})),u&&n.jsxs("span",{className:"absolute bottom-0 right-1 text-xs text-blue-700 bg-white bg-opacity-80 rounded px-1",children:["+",l.length-1," more"]})]})},go=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#b5ead7","#c7ceea","#f3b0c3","#f6dfeb","#d0f4de","#f7d6e0","#e2f0cb","#b2f7ef","#f6eac2","#f9f9c5","#e4c1f9","#a9def9","#e2f0cb","#fdffb6","#caffbf"],qZ=({colors:e,onSelect:t,onClose:r,anchorRef:s})=>{const a=j.useRef(null);j.useEffect(()=>{function f(m){a.current&&!a.current.contains(m.target)&&(!s.current||!s.current.contains(m.target))&&r()}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[r,s]);const[i,l]=j.useState({});j.useEffect(()=>{if(s.current&&a.current){const f=s.current.getBoundingClientRect();l({position:"absolute",top:f.bottom+window.scrollY+8,left:f.left+window.scrollX-40,zIndex:1e3})}},[s]);const u=48,d=56,h=2*Math.PI/e.length;return n.jsx("div",{ref:a,style:i,className:"bg-white rounded-full shadow-lg p-2 border border-gray-200",children:n.jsx("svg",{width:d*2,height:d*2,style:{display:"block"},children:e.map((f,m)=>{const g=m*h-Math.PI/2,x=d+u*Math.cos(g),v=d+u*Math.sin(g);return n.jsx("circle",{cx:x,cy:v,r:14,fill:f,stroke:"#fff",strokeWidth:2,style:{cursor:"pointer",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.08))"},onClick:()=>t(f)},f+"-"+m)})})})},UZ=()=>{const{user:e}=Et(),{courses:t}=Go(),[r,s]=j.useState([]),[a,i]=j.useState(!1),[l,u]=j.useState(null),[d,h]=j.useState(new Date),[f,m]=j.useState("Event"),[g,x]=j.useState([]),[v,b]=j.useState(!1);j.useRef();const[w,C]=j.useState(new Date),[N,E]=j.useState({}),[S,_]=j.useState(null),D=j.useRef({}),T=Lt(),P=e&&(e.role==="teacher"||e.role==="admin"),O=e?[{label:`${e.firstName} ${e.lastName}`,value:e._id},...t.map(X=>({label:X.title,value:X._id,course:X}))]:[],F=X=>{x(V=>V.includes(X)?V.filter(ie=>ie!==X):[...V,X])},$=(X,V)=>N[X]||go[V%go.length]||"#60a5fa",z=(X,V)=>{E(ie=>({...ie,[X]:V}))},q=async()=>{if(!g.length||!e){s([]);return}let X=[];const V=new Set;for(const[ie,be]of g.entries()){if(be===e._id){try{const ve=await Ie.get("/events?calendar="+e._id),Pe=ve.data.data||ve.data;X.push(...Pe.filter(He=>He.calendar===e._id).map(He=>({...He,start:new Date(He.start),end:new Date(He.end),title:He.title,allDay:!1,resource:He})))}catch(ve){console.error("Error fetching personal events:",ve)}continue}try{const ve=await Ie.get("/events?calendar="+be);let He=(ve.data.data||ve.data).filter(le=>le.calendar===be).map(le=>({...le,start:new Date(le.start),end:new Date(le.end),title:le.title,allDay:!1,resource:le})),Je=[];try{const le=t.find(fe=>fe._id===be);if(le&&Array.isArray(le.modules))for(const fe of le.modules)try{(await Ie.get(`/assignments/module/${fe._id}`)).data.forEach(Ye=>{V.has(Ye._id)||(V.add(Ye._id),Je.push({_id:Ye._id,title:Ye.title,start:new Date(Ye.dueDate),end:new Date(Ye.dueDate),type:"Assignment",color:$(be,ie),allDay:!1,resource:{...Ye,readOnly:!0,courseId:be}}))})}catch(Ae){console.error(`Error fetching assignments for module ${fe._id}:`,Ae)}else try{const fe=await Ie.get(`/courses/${be}/modules`),Ae=fe.data.data||fe.data;if(Array.isArray(Ae))for(const Ge of Ae)try{(await Ie.get(`/assignments/module/${Ge._id}`)).data.forEach(he=>{V.has(he._id)||(V.add(he._id),Je.push({_id:he._id,title:he.title,start:new Date(he.dueDate),end:new Date(he.dueDate),type:"Assignment",color:$(be,ie),allDay:!1,resource:{...he,readOnly:!0,courseId:be}}))})}catch(Ye){console.error(`Error fetching assignments for module ${Ge._id}:`,Ye)}}catch(fe){console.error(`Error fetching modules for course ${be}:`,fe)}}catch(le){console.error("Error processing assignments:",le)}X.push(...He,...Je)}catch(ve){console.error(`Error fetching course events for ${be}:`,ve)}}s(X)};j.useEffect(()=>{g.length&&q()},[g]),j.useEffect(()=>{e&&g.length===0&&O.length>0&&x(O.map(X=>X.value))},[e,g,O]);const H={Event:"#93c5fd","My To Do":"#fde68a","Appointment Group":"#fbcfe8",Default:"#e5e7eb"},re=X=>{const V=(X==null?void 0:X.start)||new Date;let ie=X==null?void 0:X.end;(!ie||ie.getTime()===V.getTime())&&(ie=new Date(V.getTime()+60*60*1e3));const be=f,ve=g[0]||(e?e._id:""),Pe=O.findIndex(He=>He.value===ve);u({...QE,start:V,end:ie,type:be,color:$(ve,Pe),calendar:ve}),i(!0)},ee=X=>{var Pe,He,Je,le,fe,Ae,Ge,Ye;const V=((Pe=X.resource)==null?void 0:Pe.type)||X.type,ie=typeof V=="string"&&V.toLowerCase()==="assignment",be=((He=X.resource)==null?void 0:He._id)||X._id;if(ie&&be){T(`/assignments/${be}/view`);return}const ve={_id:X._id,title:typeof X.title=="string"?X.title:"",description:((Je=X.resource)==null?void 0:Je.description)||"",start:X.start?new Date(X.start):new Date,end:X.end?new Date(X.end):new Date,type:((le=X.resource)==null?void 0:le.type)||"Event",color:((fe=X.resource)==null?void 0:fe.color)||"",location:((Ae=X.resource)==null?void 0:Ae.location)||"",calendar:((Ge=X.resource)==null?void 0:Ge.calendar)||(e?e._id:"")};u(ve),m(((Ye=X.resource)==null?void 0:Ye.type)||"Event"),i(!0)},L=async(X,V)=>{var be,ve;if(X.preventDefault(),!l)return;const ie={title:(V==null?void 0:V.title)??l.title,description:l.description,start:(be=(V==null?void 0:V.start)??l.start)==null?void 0:be.toISOString(),end:(ve=(V==null?void 0:V.end)??l.end)==null?void 0:ve.toISOString(),type:f,color:(V==null?void 0:V.color)??l.color,location:(V==null?void 0:V.location)??l.location,calendar:(V==null?void 0:V.calendar)??l.calendar};try{l._id?await Ie.put(`/events/${l._id}`,ie):await Ie.post("/events",ie),i(!1),u(null),q()}catch(Pe){console.error("Error saving event:",Pe)}},M=async()=>{var X,V,ie;if(l&&l._id)try{console.log("Attempting to delete event:",l._id);const be=l.type||l.type;typeof be=="string"&&be.toLowerCase()==="assignment"?await Ie.delete(`/assignments/${l._id}`):await Ie.delete(`/events/${l._id}`),console.log("Event deleted successfully"),i(!1),u(null),q()}catch(be){console.error("Error deleting event:",be),console.error("Error response:",(X=be.response)==null?void 0:X.data),alert(`Failed to delete event: ${((ie=(V=be.response)==null?void 0:V.data)==null?void 0:ie.message)||be.message||"Unknown error"}`)}},W=X=>({style:{backgroundColor:X.color||(X.type==="assignment"?"#2563eb":X.type==="quiz"?"#22c55e":"#a3a3a3"),borderRadius:"8px",color:"#fff",border:"none",paddingLeft:"8px",paddingRight:"8px"}}),R=X=>{h(X)};Ut(d,"MMMM yyyy");const U=xN(d);zy(d);const Z=jN(d),B=U.getDay();let Ce=new Array(7).fill(null),Se=1;for(let X=0;X<7;X++)X>=B&&(Ce[X]=new Date(d.getFullYear(),d.getMonth(),Se++));for(;Se<=Z;){Ce=new Array(7).fill(null);for(let X=0;X<7&&Se<=Z;X++)Ce[X]=new Date(d.getFullYear(),d.getMonth(),Se++)}const G=X=>n.jsxs("div",{className:"rbc-toolbar flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("TODAY"),children:"Today"}),n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("PREV"),children:"Back"}),n.jsx("button",{type:"button",className:"rbc-btn px-3 py-1 rounded-lg bg-gray-100 hover:bg-blue-100 active:bg-blue-200 transition",onClick:()=>X.onNavigate("NEXT"),children:"Next"})]}),n.jsx("span",{className:"rbc-toolbar-label text-lg font-semibold",children:X.label}),n.jsxs("div",{className:"flex gap-2 items-center",children:[["month","week","day","agenda"].map(V=>n.jsx("button",{type:"button",className:`px-3 py-1 rounded-lg transition font-medium capitalize ${X.view===V?"bg-blue-600 text-white shadow":"bg-gray-100 hover:bg-blue-100 active:bg-blue-200 text-gray-700"}`,onClick:()=>X.onView(V),children:V.charAt(0).toUpperCase()+V.slice(1)},V)),n.jsx("button",{type:"button",className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-xl ml-2 shadow hover:bg-blue-700 transition",onClick:()=>{const V=new Date,ie=f;u({...QE,start:V,end:new Date(V.getTime()+60*60*1e3),type:ie,color:H[ie]||H.Default,calendar:e?e._id:""}),m("Event"),i(!0)},children:"+"})]})]}),ae=({isEdit:X})=>{const[V,ie]=j.useState((l==null?void 0:l.title)??""),[be,ve]=j.useState((l==null?void 0:l.location)??""),[Pe,He]=j.useState((l==null?void 0:l.color)||H[(l==null?void 0:l.type)||"Default"]),[Je,le]=j.useState(!1),[fe,Ae]=j.useState((l==null?void 0:l.calendar)||(e?e._id:"")),[Ge,Ye]=j.useState(null),[ye,he]=j.useState(""),[ne,Te]=j.useState(""),[Be,oe]=j.useState("");j.useRef(null),j.useEffect(()=>{if(l){ie(l.title??""),ve(l.location??"");const K=O.findIndex(Ke=>Ke.value===(l.calendar||(e?e._id:"")));He(l.color||$(l.calendar||(e?e._id:""),K)),Ae(l.calendar||(e?e._id:"")),le(!1);const se=new Date(l.start),_e=new Date(l.end);he(GZ(se)),Te(XE(se)),oe(XE(_e))}},[l]);const Ne=[];for(let K=0;K<24;K++)for(let se=0;se<60;se+=5)Ne.push(`${K.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}`);const pe=async K=>{if(K.preventDefault(),Ye(null),f==="My To Do"){if(!V||!ye){Ye("Title and date are required.");return}try{await Ie.post("/todos",{title:V,dueDate:ye}),i(!1),u(null)}catch{Ye("Failed to create to-do")}return}const se=new Date(`${ye}T${ne}`),_e=new Date(`${ye}T${Be}`);if(!se||!_e||_e<=se){Ye("End time must be after start time.");return}if(!P&&!e){Ye("User not found.");return}L(K,{title:V,location:be,color:Pe,start:se,end:_e,calendar:P?fe:e?e._id:""})};return n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm z-50",children:n.jsxs("form",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-lg",onSubmit:pe,style:{minWidth:400},children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold",children:X?"Edit Event":"Create Event"}),n.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>{i(!1),u(null)},children:"×"})]}),n.jsx("div",{className:"flex border-b mb-4",children:zZ.map(K=>n.jsx("button",{type:"button",className:`px-4 py-2 font-semibold ${f===K.value?"border-b-4 border-purple-600 text-purple-700":"text-gray-500"}`,onClick:()=>{m(K.value),u(l?{...l,type:K.value}:null),Je||He(H[K.value]||H.Default)},children:K.label},K.value))}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-title",className:"block text-sm font-medium mb-1",children:"Title:"}),n.jsx("input",{id:"event-title",name:"title",className:"border p-2 w-full rounded",placeholder:"Enter event title",type:"text",value:V,onChange:K=>ie(K.target.value),required:!0})]}),f!=="My To Do"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-color",className:"block text-sm font-medium mb-1",children:"Color:"}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("input",{id:"event-color",name:"color",type:"color",className:"w-10 h-10 p-0 border-none bg-transparent cursor-pointer",value:Pe,onChange:K=>{He(K.target.value),le(!0)},style:{background:"none"}}),n.jsx("button",{type:"button",className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-sm",onClick:()=>{const K=go[Math.floor(Math.random()*go.length)];He(K),le(!0)},children:"Random"}),go.map((K,se)=>n.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border-2 border-white shadow mx-0.5 focus:outline-none focus:ring-2 focus:ring-blue-400",style:{background:K,outline:Pe===K?"2px solid #2563eb":"none"},onClick:()=>{He(K),le(!0)},"aria-label":`Pick color ${K}`},K+"-"+se))]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-date",className:"block text-sm font-medium mb-1",children:"Date:"}),n.jsx("input",{id:"event-date",name:"date",className:"border p-2 w-full rounded",type:"date",value:ye,onChange:K=>he(K.target.value),required:!0})]}),f!=="My To Do"&&n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"event-time-from",className:"block text-sm font-medium mb-1",children:"From:"}),n.jsx("select",{id:"event-time-from",name:"startTime",className:"border p-2 w-full rounded",value:ne,onChange:K=>Te(K.target.value),required:!0,children:Ne.map(K=>n.jsx("option",{value:K,children:K},K))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"event-time-to",className:"block text-sm font-medium mb-1",children:"To:"}),n.jsx("select",{id:"event-time-to",name:"endTime",className:"border p-2 w-full rounded",value:Be,onChange:K=>oe(K.target.value),required:!0,children:Ne.map(K=>n.jsx("option",{value:K,children:K},K))})]})]}),Ge&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:Ge}),f!=="My To Do"&&n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-location",className:"block text-sm font-medium mb-1",children:"Location:"}),n.jsx("input",{id:"event-location",name:"location",className:"border p-2 w-full rounded",placeholder:"Location",type:"text",value:be,onChange:K=>ve(K.target.value)})]}),f!=="My To Do"&&(P?n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{htmlFor:"event-calendar",className:"block text-sm font-medium mb-1",children:"Calendar:"}),n.jsx("select",{id:"event-calendar",name:"calendar",className:"border p-2 w-full rounded",value:fe,onChange:K=>{if(Ae(K.target.value),!Je){const se=O.findIndex(_e=>_e.value===K.target.value);He($(K.target.value,se))}},required:!0,children:O.map(K=>n.jsx("option",{value:K.value,children:K.label},K.value))})]}):null),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",children:"More Options"}),n.jsxs("div",{className:"flex gap-2",children:[(()=>{const K=X&&(P||e&&(l==null?void 0:l.calendar)===e._id);return console.log("Delete button visibility check:",{isEdit:X,isTeacherOrAdmin:P,userRole:e==null?void 0:e.role,userCalendar:e==null?void 0:e._id,eventCalendar:l==null?void 0:l.calendar,canDelete:K}),K?n.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",onClick:M,children:"Delete"}):null})(),n.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Submit"})]})]})]})})};return window.allCalendarEvents=r,n.jsxs("div",{className:"flex p-8 gap-8",children:[n.jsx("div",{className:"flex-1",children:n.jsx(PZ,{localizer:BZ,events:r,startAccessor:"start",endAccessor:"end",style:{height:600,borderRadius:"16px",boxShadow:"0 4px 24px rgba(0,0,0,0.08)"},popup:!0,selectable:!0,date:d,onNavigate:R,onSelectSlot:re,onSelectEvent:ee,eventPropGetter:W,showMultiDayTimes:!1,components:{toolbar:G,event:Wl,month:{event:Wl},week:{event:Wl},day:{event:Wl},agenda:{event:Wl}}})}),n.jsxs("div",{className:"w-80 flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border rounded-xl shadow-md p-4 mb-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("button",{onClick:()=>C(X=>oO(X)),className:"px-2 py-1 rounded-full bg-gray-100 hover:bg-blue-100 text-lg font-bold transition",children:"<"}),n.jsx("div",{className:"text-center font-semibold text-lg",children:Ut(w,"MMMM yyyy")}),n.jsx("button",{onClick:()=>C(X=>H4(X,1)),className:"px-2 py-1 rounded-full bg-gray-100 hover:bg-blue-100 text-lg font-bold transition",children:">"})]}),n.jsxs("table",{className:"w-full text-xs select-none",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"font-semibold text-gray-500",children:"Su"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Mo"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Tu"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"We"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Th"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Fr"}),n.jsx("th",{className:"font-semibold text-gray-500",children:"Sa"})]})}),n.jsx("tbody",{children:(()=>{const X=xN(w);zy(w);const V=jN(w),ie=X.getDay(),be=[];let ve=new Array(7).fill(null),Pe=1;for(let He=0;He<7;He++)He>=ie&&(ve[He]=new Date(w.getFullYear(),w.getMonth(),Pe++));for(be.push(ve);Pe<=V;){ve=new Array(7).fill(null);for(let He=0;He<7&&Pe<=V;He++)ve[He]=new Date(w.getFullYear(),w.getMonth(),Pe++);be.push(ve)}return be.map((He,Je)=>n.jsx("tr",{children:He.map((le,fe)=>n.jsx("td",{className:le&&zM(le,w)?`cursor-pointer rounded-full w-8 h-8 text-center align-middle transition ${qb(le,w)?"bg-blue-200 text-blue-900 font-bold shadow":"hover:bg-blue-100 hover:text-blue-700"}`:"text-gray-300",onClick:()=>le&&C(le),children:le?Ut(le,"d").padStart(2,"0"):""},fe))},Je))})()})]})]}),n.jsx("div",{className:"bg-white border rounded p-4 relative",children:n.jsxs("div",{className:"max-h-44 overflow-y-auto pr-1",children:[n.jsx("div",{className:"font-semibold mb-2",children:"CALENDARS"}),O.map((X,V)=>n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx("input",{type:"checkbox",id:`calendar-checkbox-${X.value}`,name:`calendar-checkbox-${X.value}`,checked:g.includes(X.value),onChange:()=>F(X.value),className:"mr-2"}),n.jsx("button",{type:"button",ref:ie=>D.current[X.value]=ie,className:"w-3 h-3 rounded-full mr-2 border-2 border-white shadow focus:outline-none focus:ring-2 focus:ring-blue-400",style:{background:$(X.value,V),outline:N[X.value]?"2px solid #2563eb":"none"},onClick:()=>_(X.value),"aria-label":`Pick color for ${X.label}`,title:"Change calendar color"}),n.jsx("span",{children:X.label})]},X.value)),S&&n.jsx("div",{className:"flex justify-center mt-4",children:n.jsx(qZ,{colors:go,onSelect:X=>{z(S,X),_(null)},onClose:()=>_(null),anchorRef:{current:null}})})]})}),n.jsx("div",{className:"max-h-64 overflow-y-auto pr-1",children:n.jsx(J4,{})})]}),a&&l&&e&&n.jsx(ae,{isEdit:!!l._id})]})},Ed=async()=>(await Ie.get("/inbox/conversations")).data,JE=async e=>(await Ie.get(`/inbox/conversations/${e}/messages`)).data,WZ=async(e,t)=>(await Ie.post(`/inbox/conversations/${e}/messages`,{body:t})).data,HZ=async e=>(await Ie.get(`/users/search?name=${encodeURIComponent(e)}`)).data.data,VZ=async e=>(await Ie.post(`/inbox/conversations/${e}/star`)).data,YZ=async(e,t)=>(await Ie.post(`/inbox/conversations/${e}/move`,{folder:t})).data,ZE=async(e,t)=>{const r=e.map(s=>YZ(s,t));return Promise.all(r)},KZ=async e=>(await Ie.delete(`/inbox/conversations/${e}/forever`)).data,QZ=async e=>{const t=e.map(r=>KZ(r));return Promise.all(t)};function XZ(e){return e.charAt(0).toUpperCase()+e.slice(1)}const e4=e=>e?e.firstName&&e.lastName?(e.firstName[0]+e.lastName[0]).toUpperCase():e.firstName?e.firstName[0].toUpperCase():e.lastName?e.lastName[0].toUpperCase():e.email?e.email[0].toUpperCase():"?":"?",t4=e=>{const t=["bg-blue-500","bg-green-500","bg-pink-500","bg-yellow-500","bg-purple-500","bg-indigo-500","bg-red-500","bg-teal-500","bg-orange-500","bg-gray-500"];let r=0;for(let s=0;s<(e||"").length;s++)r=(r<<5)-r+e.charCodeAt(s),r|=0;return t[Math.abs(r)%t.length]},JZ=()=>{var la;const[e,t]=j.useState([]),[r,s]=j.useState(!0),[a,i]=j.useState(null),[l,u]=j.useState(null),[d,h]=j.useState([]),[f,m]=j.useState(!1),[g,x]=j.useState(null),[v,b]=j.useState(""),[w,C]=j.useState(!1),[N,E]=j.useState(null),[S,_]=j.useState(!1),[D,T]=j.useState([]),[P,O]=j.useState(""),[F,$]=j.useState([]),[z,q]=j.useState(""),[H,re]=j.useState(""),[ee,L]=j.useState(!1),[M,W]=j.useState(null),[R,U]=j.useState(""),[Z,B]=j.useState([]),[Ce,Se]=j.useState(!1),[G,ae]=j.useState(""),[X,V]=j.useState([]),ie=j.useRef(null),[be,ve]=j.useState(""),[Pe,He]=j.useState(!1),Je=j.useRef(null),[le,fe]=j.useState(!1),[Ae,Ge]=j.useState([]),[Ye,ye]=j.useState(!1),[he,ne]=j.useState(!1),[Te,Be]=j.useState([{value:"all",label:"All Courses"}]),[oe,Ne]=j.useState("all"),pe=[{value:"inbox",label:"Inbox"},{value:"sent",label:"Sent"},{value:"archived",label:"Archived"},{value:"favorite",label:"Favorite"},{value:"deleted",label:"Deleted"}],[K,se]=j.useState("inbox"),[_e,Ke]=j.useState(""),{user:Ve}=Et(),tt=(Ve==null?void 0:Ve._id)||"",it=j.useRef(null);j.useRef(null);const qe=()=>{if(Ae.length===0){alert("Please select conversations to reply to");return}alert(`Reply to ${Ae.length} conversation(s)`)},dt=async()=>{if(Ae.length===0){alert("Please select conversations to archive");return}ye(!0);try{await ZE(Ae,"archived");const xe=await Ed();t(xe),Ge([])}catch{alert("Failed to archive conversations")}finally{ye(!1)}},yt=async()=>{if(Ae.length===0){alert("Please select conversations to delete");return}if(K==="deleted"){if(!confirm(`Are you sure you want to permanently delete ${Ae.length} conversation(s)? This cannot be undone.`))return}else if(!confirm(`Are you sure you want to delete ${Ae.length} conversation(s)?`))return;ye(!0);try{K==="deleted"?await QZ(Ae):await ZE(Ae,"deleted");const xe=await Ed();t(xe),Ge([])}catch{alert("Failed to delete conversations")}finally{ye(!1)}};j.useEffect(()=>{(async()=>{s(!0),i(null);try{const Qe=await Ed();t(Qe)}catch{i("Failed to load conversations")}finally{s(!1)}})()},[]);const It=async xe=>{u(xe),h([]),m(!0),x(null);try{xe.unreadCount>0&&(await Ie.post(`/inbox/conversations/${xe._id}/read`),t(er=>er.map(Bt=>Bt._id===xe._id?{...Bt,unreadCount:0}:Bt)));const Qe=await JE(xe._id);h(Qe)}catch{x("Failed to load messages")}finally{m(!1)}},Xt=async xe=>{if(xe.preventDefault(),!(!v.trim()||!l)){C(!0),E(null);try{await WZ(l._id,v),b(""),ne(!1);const Qe=await JE(l._id);h(Qe)}catch{E("Failed to send message")}finally{C(!1)}}};j.useEffect(()=>{if(P.length<2){$([]);return}let xe=!0;return W(null),HZ(P).then(Qe=>{xe&&$(Qe)}).catch(()=>{xe&&W("Failed to search users")}),()=>{xe=!1}},[P]);const Kt=xe=>{D.some(Qe=>Qe._id===xe._id)||T([...D,xe]),O(""),$([])},Jt=xe=>{T(D.filter(Qe=>Qe._id!==xe))},lr=async xe=>{var Qe,er;xe.preventDefault(),L(!0),W("");try{let Bt=D.map(Yr=>Yr._id);G==="sections"&&(Bt=(await Ie.get(`/api/courses/${R}/students`)).data.map(Nr=>Nr._id)),await Ie.post("/inbox/conversations",{course:R,participantIds:Bt,subject:z,body:H,sendIndividually:le}),_(!1),T([]),q(""),re(""),ae(""),V([]),fe(!1)}catch(Bt){W(((er=(Qe=Bt.response)==null?void 0:Qe.data)==null?void 0:er.message)||"Failed to send message")}finally{L(!1)}};j.useEffect(()=>{S&&Ie.get("/courses").then(xe=>{B(xe.data.data||[]),xe.data.data&&xe.data.data.length>0&&U(xe.data.data[0]._id)})},[S]),j.useEffect(()=>{!R||!G||(G==="teachers"?(Ve==null?void 0:Ve.role)==="teacher"||(Ve==null?void 0:Ve.role)==="admin"?Ie.get("/users/search?role=teacher,admin").then(xe=>{V(xe.data.data||[])}):Ie.get(`/api/courses/${R}`).then(xe=>{const Qe=xe.data.data.instructor?[xe.data.data.instructor]:[];V(Qe)}):G==="students"?Ie.get(`/api/courses/${R}/students`).then(xe=>{V(xe.data||[])}):G==="sections"&&V([]))},[R,G,Ve]),j.useEffect(()=>{if(!Ce)return;function xe(Qe){ie.current&&!ie.current.contains(Qe.target)&&Se(!1)}return document.addEventListener("mousedown",xe),()=>document.removeEventListener("mousedown",xe)},[Ce]),j.useEffect(()=>{if(be.length<2){$([]);return}return Je.current&&clearTimeout(Je.current),Je.current=setTimeout(()=>{let xe="";G==="teachers"?xe=(Ve==null?void 0:Ve.role)==="teacher"||(Ve==null?void 0:Ve.role)==="admin"?"teacher,admin":"teacher":G==="students"&&(xe="student"),Ie.get(`/users/search?name=${encodeURIComponent(be)}&role=${xe}`).then(Qe=>$(Qe.data.data||[])).catch(()=>$([]))},300),()=>{Je.current&&clearTimeout(Je.current)}},[be,G,Ve]),j.useEffect(()=>{Ie.get("/courses").then(xe=>{const Qe=(xe.data.data||[]).map(er=>({value:er._id,label:er.title}));Be([{value:"all",label:"All Courses"},...Qe])})},[]);const Zt=j.useMemo(()=>e.filter(xe=>{var Yr,Nr,ln;if(oe!=="all"&&xe.course!==oe)return!1;const Qe=xe.participants.find(Kr=>Kr._id===tt),er=(Qe==null?void 0:Qe.folder)||xe.folder||"inbox";if(K==="inbox"&&er!=="inbox"||K==="sent"&&xe.createdBy!==tt||K==="archived"&&er!=="archived"||K==="favorite"&&!(Qe!=null&&Qe.starred)||K==="deleted"&&er!=="deleted")return!1;const Bt=_e.toLowerCase();if(Bt){const Kr=((Yr=xe.subject)==null?void 0:Yr.toLowerCase())||"",qt=((ln=(Nr=xe.lastMessage)==null?void 0:Nr.body)==null?void 0:ln.toLowerCase())||"",zr=xe.participants.map(Yn=>Yn.name||`${Yn.firstName||""} ${Yn.lastName||""}`).join(", ").toLowerCase();if(!Kr.includes(Bt)&&!qt.includes(Bt)&&!zr.includes(Bt))return!1}return!0}),[e,oe,K,_e,tt]);j.useEffect(()=>{Ge(xe=>xe.filter(Qe=>Zt.some(er=>er._id===Qe)))},[Zt]);const ms=ZZ(Zt),Li=Object.keys(ms).sort((xe,Qe)=>Qe.localeCompare(xe)),Ua=async xe=>{try{await VZ(xe._id);const Qe=await Ed();t(Qe)}catch{}};return n.jsxs("div",{className:"flex flex-col h-full min-h-[80vh] bg-gray-100 dark:bg-gray-900",children:[n.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 border-b bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm sticky top-0 z-20",style:{minHeight:64},children:[n.jsxs("div",{className:"relative",children:[n.jsx("select",{id:"topbar-course-dropdown",name:"topbarCourseDropdown",className:"appearance-none border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-200",value:oe,onChange:xe=>Ne(xe.target.value),style:{minWidth:140},children:Te.map(xe=>n.jsx("option",{value:xe.value,children:xe.label},xe.value))}),n.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"▼"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{id:"topbar-folder-dropdown",name:"topbarFolderDropdown",className:"appearance-none border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-200",value:K,onChange:xe=>se(xe.target.value),style:{minWidth:110},children:pe.map(xe=>n.jsx("option",{value:xe.value,children:xe.label},xe.value))}),n.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"▼"})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx("button",{className:"p-2 rounded hover:bg-blue-100 text-blue-600",title:"Compose",onClick:()=>_(!0),children:n.jsx(Gc,{size:22})}),n.jsx("button",{className:`p-2 rounded ${Ae.length>0?"hover:bg-blue-200 text-blue-600":"hover:bg-gray-200 text-gray-400"}`,title:"Reply",onClick:qe,disabled:Ae.length===0||Ye,children:n.jsx(uc,{size:22})}),n.jsx("button",{className:`p-2 rounded ${Ae.length>0?"hover:bg-yellow-200 text-yellow-600":"hover:bg-gray-200 text-gray-400"}`,title:"Archive",onClick:dt,disabled:Ae.length===0||Ye,children:n.jsx(pO,{size:22})}),n.jsx("button",{className:`p-2 rounded ${Ae.length>0?"hover:bg-red-200 text-red-600":"hover:bg-gray-200 text-gray-400"}`,title:"Delete",onClick:yt,disabled:Ae.length===0||Ye,children:n.jsx(ls,{size:22})})]}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"relative flex items-center",style:{minWidth:260},children:[n.jsx("label",{htmlFor:"inbox-search",className:"sr-only",children:"Search conversations"}),n.jsx("input",{id:"inbox-search",name:"search",ref:it,className:"border border-gray-200 dark:border-gray-700 rounded-full pl-10 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200 w-full shadow-sm",type:"text",placeholder:"Search...",value:_e,onChange:xe=>Ke(xe.target.value)}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:n.jsx(Mi,{size:18})})]})]}),n.jsxs("div",{className:"flex flex-1 gap-6 px-6 py-6",children:[S&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-0 w-full max-w-xl relative border border-gray-200 dark:border-gray-700",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl",onClick:()=>_(!1),children:"×"}),n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 text-xl font-semibold",children:"Compose Message"}),n.jsxs("form",{onSubmit:lr,className:"px-6 py-4",children:[n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("label",{htmlFor:"compose-course",className:"w-20 text-gray-700 font-medium",children:"Course"}),n.jsx("select",{id:"compose-course",name:"course",className:"border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 flex-1",value:R,onChange:xe=>{U(xe.target.value),ae(""),V([])},children:Z.map(xe=>n.jsx("option",{value:xe._id,children:xe.title},xe._id))})]}),n.jsxs("div",{className:"mb-4 flex items-center relative",ref:ie,children:[n.jsx("span",{className:"w-20 text-gray-700 font-medium",children:"To"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsxs("div",{id:"compose-to",className:"flex items-center border border-gray-200 dark:border-gray-700 rounded px-3 py-2 bg-white dark:bg-gray-900 cursor-text",children:[n.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[G==="sections"?R?n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center",children:["All Students in ",((la=Z.find(xe=>xe._id===R))==null?void 0:la.title)||"Course",n.jsx("button",{type:"button",className:"ml-1 text-xs text-red-500",onClick:xe=>{xe.stopPropagation(),ae(""),U("")},children:"×"})]}):n.jsx("span",{className:"text-gray-400 text-xs",children:"Select a course..."}):D.map(xe=>n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center",children:[xe.firstName," ",xe.lastName,n.jsx("button",{type:"button",className:"ml-1 text-xs text-red-500",onClick:Qe=>{Qe.stopPropagation(),Jt(xe._id)},children:"×"})]},xe._id)),G!=="sections"&&n.jsx("input",{type:"text",id:"compose-to-input",name:"composeToInput",className:"flex-1 min-w-24 outline-none border-none bg-transparent text-sm",placeholder:D.length===0?"Type name or email...":"",value:be,onChange:xe=>{ve(xe.target.value),He(!1)},onFocus:()=>{He(!1)}})]}),n.jsx("button",{type:"button",className:"ml-2 text-gray-400 hover:text-gray-600",tabIndex:-1,"aria-label":"Choose group",onClick:xe=>{xe.stopPropagation(),He(Qe=>!Qe)},children:n.jsx($$,{size:20})})]}),Pe&&!G&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20",children:[n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{ae("teachers"),He(!1)},children:"Teachers"}),n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{ae("students"),He(!1)},children:"Students"}),n.jsx("div",{className:"px-4 py-2 text-red-600 hover:bg-gray-100 cursor-pointer",onClick:()=>{ae("sections"),He(!1),U("")},children:"Course Sections"})]}),be.length>=2&&F.length>0&&n.jsx("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:F.map(xe=>n.jsxs("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>{Kt(xe),ve(""),$([])},children:[xe.firstName," ",xe.lastName," (",xe.email,")"]},xe._id))}),G&&G!=="sections"&&X.length>0&&!be&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center px-2 py-2 border-b cursor-pointer hover:bg-gray-100",onClick:()=>ae(""),children:[n.jsx(Gy,{size:18}),n.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:"Back"})]}),X.map(xe=>n.jsxs("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>{Kt(xe),ae("")},children:[xe.firstName," ",xe.lastName," (",xe.email,")"]},xe._id))]}),G==="sections"&&!R&&n.jsxs("div",{className:"absolute left-0 top-12 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow z-20 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center px-2 py-2 border-b cursor-pointer hover:bg-gray-100",onClick:()=>ae(""),children:[n.jsx(Gy,{size:18}),n.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:"Back"})]}),Z.map(xe=>n.jsx("div",{className:"px-4 py-2 hover:bg-blue-100 cursor-pointer",onClick:()=>U(xe._id),children:xe.title},xe._id))]})]})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("label",{htmlFor:"compose-subject",className:"w-20 text-gray-700 font-medium",children:"Subject"}),n.jsx("input",{id:"compose-subject",name:"subject",type:"text",className:"border border-gray-200 dark:border-gray-700 rounded px-3 py-2 text-sm bg-white dark:bg-gray-900 flex-1",value:z,onChange:xe=>q(xe.target.value),disabled:ee})]}),n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx("input",{id:"send-individually",name:"sendIndividually",type:"checkbox",className:"mr-2",checked:le,onChange:xe=>fe(xe.target.checked),disabled:ee}),n.jsx("label",{htmlFor:"send-individually",className:"text-gray-700 text-sm select-none",children:"Send an individual message to each recipient"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"compose-message",className:"block text-gray-700 font-medium mb-1",children:"Message"}),n.jsx("textarea",{id:"compose-message",name:"message",className:"w-full border border-gray-200 dark:border-gray-700 rounded p-2 resize-none bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",rows:6,value:H,onChange:xe=>re(xe.target.value),disabled:ee})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600",title:"Attach file",disabled:!0,children:n.jsx(b$,{size:22})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:()=>_(!1),disabled:ee,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-red-600 text-white",disabled:ee||!D.length&&(G!=="sections"||!R)||!z.trim()||!H.trim(),children:ee?"Sending...":"Send"})]})]}),M&&n.jsx("div",{className:"text-red-500 mt-2",children:M})]})]})}),n.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 p-0 overflow-y-auto flex flex-col",children:[!r&&!a&&e.length>0&&n.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center",children:[n.jsx("input",{type:"checkbox",id:"select-all-conversations",name:"selectAllConversations",checked:Ae.length===Zt.length&&Zt.length>0,onChange:xe=>{xe.target.checked?Ge(Zt.map(Qe=>Qe._id)):Ge([])},className:"mr-3 accent-blue-600 w-4 h-4"}),n.jsx("span",{className:"text-sm text-gray-600",children:Ye?n.jsx("span",{className:"text-blue-600",children:"Processing..."}):Ae.length>0?`${Ae.length} selected`:`${Zt.length} conversations`})]}),r&&n.jsx("div",{className:"p-4",children:"Loading..."}),a&&n.jsx("div",{className:"p-4 text-red-500",children:a}),!r&&!a&&e.length===0&&n.jsx("div",{className:"p-4 text-gray-400",children:"No conversations yet."}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:Li.map(xe=>n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-300 font-semibold bg-gray-50 dark:bg-gray-900 sticky top-0 z-10 rounded-t-2xl",children:eee(xe)}),ms[xe].map(Qe=>{var Kr;const er=Qe.unreadCount>0,Bt=Qe.participants.find(qt=>{var zr;return((zr=qt._id)==null?void 0:zr.toString())===(tt==null?void 0:tt.toString())})||Qe.participants[0],Yr=Bt==null?void 0:Bt.starred,Nr=Qe.participants.filter(qt=>{var zr;return((zr=qt._id)==null?void 0:zr.toString())!==(tt==null?void 0:tt.toString())}),ln=Nr.map(qt=>qt.firstName&&qt.lastName?`${qt.firstName} ${qt.lastName}`.trim():qt.firstName||qt.lastName||qt.email||"Unknown").join(", ");return n.jsxs("div",{className:`flex flex-col px-4 py-3 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 cursor-pointer transition-all duration-150 hover:bg-blue-50 dark:hover:bg-blue-900 ${l&&l._id===Qe._id?"bg-blue-100 dark:bg-blue-900 border-l-4 border-l-blue-500":""}`,onClick:qt=>{qt.target.tagName!=="INPUT"&&It(Qe)},children:[n.jsxs("div",{className:"flex items-center min-h-[24px] gap-2",children:[n.jsx("input",{type:"checkbox",id:`select-conv-${Qe._id}`,name:"selectConversation",checked:Ae.includes(Qe._id),onChange:qt=>Ge(zr=>qt.target.checked?Array.from(new Set([...zr,Qe._id])):zr.filter(Yn=>Yn!==Qe._id)),className:"mr-2 accent-blue-600 w-4 h-4",onClick:qt=>qt.stopPropagation()}),n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm mr-2 overflow-hidden ${t4(Qe._id)}`,children:(Kr=Nr[0])!=null&&Kr.profilePicture?n.jsx("img",{src:Nr[0].profilePicture.startsWith("http")?Nr[0].profilePicture:`http://localhost:5000${Nr[0].profilePicture}`,alt:ln,className:"w-8 h-8 object-cover rounded-full"}):e4(Nr[0])}),n.jsx("span",{className:`truncate font-medium ${er?"font-bold text-blue-900":"text-gray-900"}`,children:ln||"Unknown"}),er&&n.jsx("span",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("div",{className:"flex flex-col items-end ml-auto min-w-[48px]",children:n.jsx("span",{className:"text-xs text-gray-400",children:Qe.lastMessage?Ut(new Date(Qe.lastMessage.createdAt),"p"):""})})]}),n.jsxs("div",{className:"flex items-center min-h-[22px] mt-1",children:[n.jsx("span",{className:"cursor-pointer flex items-center justify-center mr-2 transition-colors",title:Yr?"Unstar":"Star",onClick:qt=>{qt.stopPropagation(),Ua(Qe)},style:{width:18,height:18},children:n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Yr?"#2563eb":"none",stroke:"#2563eb",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:n.jsx("polygon",{points:"12 17.27 18.18 21 16.54 13.97 22 9.24 14.81 8.63 12 2 9.19 8.63 2 9.24 7.46 13.97 5.82 21 12 17.27",fill:Yr?"#2563eb":"none",stroke:"#2563eb"})})}),n.jsx("span",{className:`truncate flex-1 ${er?"font-bold text-blue-900":"text-gray-700"}`,children:Qe.subject}),er&&n.jsx("span",{className:"ml-2 bg-blue-500 text-white text-xs rounded-full px-2 py-0.5",children:Qe.unreadCount})]}),n.jsx("div",{className:"truncate text-xs text-gray-500 mt-1",children:Qe.lastMessage?Qe.lastMessage.body:n.jsx("span",{className:"italic text-gray-400",children:"No messages"})})]},Qe._id)})]},xe))})]}),n.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 p-0 flex flex-col min-h-[600px]",children:[!l&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[n.jsx("svg",{width:"96",height:"96",fill:"none",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Zm2 0 8 7 8-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),n.jsx("div",{className:"mt-4 text-lg",children:"No Conversations Selected"})]}),l&&n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center justify-between sticky top-0 z-10 bg-white dark:bg-gray-800 rounded-t-2xl shadow-sm px-6 pt-6",children:n.jsx("div",{className:"font-bold text-2xl",children:l.subject})}),n.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:[f&&n.jsx("div",{children:"Loading messages..."}),g&&n.jsx("div",{className:"text-red-500",children:g}),!f&&!g&&d.length===0&&n.jsx("div",{className:"text-gray-400",children:"No messages yet."}),n.jsx("div",{className:"space-y-6 mb-6",children:d.map((xe,Qe)=>{var Nr,ln,Kr,qt,zr,Yn,Fi,Kn,Wa,Ha;const Bt=((Nr=xe.senderId)==null?void 0:Nr.firstName)&&((ln=xe.senderId)==null?void 0:ln.firstName.trim())||((Kr=xe.senderId)==null?void 0:Kr.lastName)&&((qt=xe.senderId)==null?void 0:qt.lastName.trim())?`${((zr=xe.senderId)==null?void 0:zr.firstName)||""} ${((Yn=xe.senderId)==null?void 0:Yn.lastName)||""}`.trim():((Fi=xe.senderId)==null?void 0:Fi.email)||"Unknown User";d.length-1;const Yr=((Kn=xe.senderId)==null?void 0:Kn._id)===tt;return n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-b-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden ${t4((Wa=xe.senderId)==null?void 0:Wa._id)}`,children:(Ha=xe.senderId)!=null&&Ha.profilePicture?n.jsx("img",{src:xe.senderId.profilePicture.startsWith("http")?xe.senderId.profilePicture:`http://localhost:5000${xe.senderId.profilePicture}`,alt:Bt,className:"w-10 h-10 object-cover rounded-full"}):e4(xe.senderId)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Bt||"Unknown User"}),n.jsx("div",{className:"text-sm text-gray-500",children:XZ(Ut(new Date(xe.createdAt),"MMMM d, yyyy 'at' h:mmaaa"))})]})]}),Yr&&n.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Sent"})]}),n.jsx("div",{className:"pl-13",children:n.jsx("div",{className:"text-gray-900 dark:text-gray-100 whitespace-pre-line break-words leading-relaxed",children:xe.body})})]},xe._id)})})]}),he&&n.jsxs("form",{className:"flex flex-col gap-2 mt-2 px-6 pb-6",onSubmit:Xt,children:[n.jsx("label",{htmlFor:"reply-message",className:"sr-only",children:"Reply"}),n.jsx(vi,{content:v,onChange:b,placeholder:"Type your reply...",className:"flex-1 border border-gray-200 dark:border-gray-700 rounded p-2 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),n.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 shadow",disabled:w||!v.trim(),children:w?"Sending...":"Send"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:()=>ne(!1),disabled:w,children:"Cancel"})]})]}),!he&&n.jsx("div",{className:"px-6 pb-6 flex justify-end",children:n.jsxs("button",{onClick:()=>ne(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(uc,{className:"w-4 h-4 mr-2"}),"Reply"]})}),N&&n.jsx("div",{className:"text-red-500 mt-2 px-6",children:N})]})]})]})]})};function ZZ(e){const t={};return e.forEach(r=>{const s=r.lastMessage?Ut(new Date(r.lastMessage.createdAt),"yyyy-MM-dd"):"No Date";t[s]||(t[s]=[]),t[s].push(r)}),t}function eee(e){const t=Q4(e+"T00:00:00");return GM(t)?"Today":WM(t)?"Yesterday":Ut(t,"MMM d, yyyy")}const VP=j.createContext(void 0),tee=({children:e})=>{const[t,r]=j.useState(()=>localStorage.getItem("theme")||"light");j.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")},[t]);const s=a=>{r(a)};return n.jsx(VP.Provider,{value:{theme:t,setTheme:s},children:e})},ree=()=>{const e=j.useContext(VP);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},nee=[{key:"profile",label:"Profile"},{key:"settings",label:"Settings"},{key:"notifications",label:"Notifications"},{key:"activity",label:"Recent Login Activity"}];function see(){var E,S;const{user:e,setUser:t}=Et(),[r,s]=Q.useState(!1),[a,i]=Q.useState((e==null?void 0:e.firstName)||""),[l,u]=Q.useState((e==null?void 0:e.lastName)||""),[d,h]=Q.useState((e==null?void 0:e.email)||""),[f,m]=Q.useState((e==null?void 0:e.bio)||""),[g,x]=Q.useState(!1),[v,b]=Q.useState(!1);Q.useEffect(()=>{i((e==null?void 0:e.firstName)||""),u((e==null?void 0:e.lastName)||""),h((e==null?void 0:e.email)||""),m((e==null?void 0:e.bio)||"")},[e]);const w=async()=>{x(!0);try{const _=await gI({firstName:a,lastName:l,bio:f});_.data&&_.data.user&&t(_.data.user),s(!1)}catch(_){_.response&&_.response.data&&_.response.data.message?(console.error("Profile update error:",_.response.data),alert("Failed to update profile: "+_.response.data.message)):_.message?(console.error("Profile update error:",_),alert("Failed to update profile: "+_.message)):(console.error("Profile update error:",_),alert("Failed to update profile: Unknown error"))}finally{x(!1)}},C=()=>{i((e==null?void 0:e.firstName)||""),u((e==null?void 0:e.lastName)||""),h((e==null?void 0:e.email)||""),s(!1)},N=async _=>{if(!_.target.files||_.target.files.length===0)return;const D=_.target.files[0];b(!0);try{const T=await xI(D);T.data&&T.data.user&&t(T.data.user)}catch{alert("Failed to upload profile picture")}finally{b(!1)}};return n.jsxs("div",{className:"max-w-xl",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile"}),n.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[n.jsxs("div",{className:"relative w-20 h-20",children:[e&&e.profilePicture?n.jsx("img",{src:e.profilePicture.startsWith("http")?e.profilePicture:`http://localhost:5000${e.profilePicture}`,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border",onError:_=>{_.currentTarget.style.display="none";const D=_.currentTarget.nextElementSibling;D&&(D.style.display="flex")}}):null,n.jsx("div",{className:`w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-3xl text-gray-400 ${e&&e.profilePicture?"hidden":""}`,style:{display:e&&e.profilePicture?"none":"flex"},children:n.jsx("span",{children:e&&e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:""})}),n.jsxs("label",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1 shadow cursor-pointer border border-gray-300",title:"Change profile picture",children:[n.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:N,disabled:v}),n.jsx("span",{className:"text-xs",children:v?"...":"✏️"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-bold text-lg",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),n.jsx("div",{className:"text-gray-600",children:e==null?void 0:e.email}),n.jsx("div",{className:"text-gray-500 text-sm mt-1",children:((E=e==null?void 0:e.role)==null?void 0:E.charAt(0).toUpperCase())+((S=e==null?void 0:e.role)==null?void 0:S.slice(1))})]})]}),r?n.jsxs("form",{className:"flex flex-col gap-4",onSubmit:_=>{_.preventDefault(),w()},children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium",children:"First Name"}),n.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",className:"mt-1 w-full border rounded px-3 py-2",value:a,onChange:_=>i(_.target.value)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium",children:"Last Name"}),n.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",className:"mt-1 w-full border rounded px-3 py-2",value:l,onChange:_=>u(_.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:"mt-1 w-full border rounded px-3 py-2",value:d,onChange:_=>h(_.target.value),disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium",children:"Bio"}),n.jsx("textarea",{id:"bio",name:"bio",autoComplete:"off",className:"mt-1 w-full border rounded px-3 py-2",value:f,onChange:_=>m(_.target.value),placeholder:"Tell us about yourself..."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200",onClick:C,disabled:g,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white",disabled:g,children:g?"Saving...":"Save"})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Bio:"})," ",e!=null&&e.bio?e.bio:n.jsx("span",{className:"text-gray-500",children:"(not set)"})]}),n.jsx("button",{className:"mt-4 px-4 py-2 rounded bg-blue-600 text-white",onClick:()=>s(!0),children:"Edit Profile"})]})]})}function aee(){const[e,t]=Q.useState({language:"en",timeZone:"UTC",theme:"light"}),[r,s]=Q.useState(!0),[a,i]=Q.useState(!1),[l,u]=Q.useState(null),[d,h]=Q.useState(!1),{theme:f,setTheme:m}=ree(),g=Q.useRef(!0);Q.useEffect(()=>{s(!0),yI().then(b=>{b.data&&b.data.preferences&&t(b.data.preferences)}).catch(()=>u("Failed to load preferences")).finally(()=>s(!1))},[]),Q.useEffect(()=>{if(g.current){g.current=!1;return}e.theme&&e.theme!==f&&m(e.theme)},[e.theme,f,m]);const x=b=>{const{name:w,value:C}=b.target;t(N=>{const E={...N,[w]:C};return w==="theme"&&m(C),E})},v=async b=>{b.preventDefault(),i(!0),u(null),h(!1);try{await bI(e),h(!0)}catch{u("Failed to save preferences")}finally{i(!1)}};return n.jsxs("div",{className:"dark:text-white",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Settings"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Manage your password, language, time zone, and theme preferences."}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Change Password"}),n.jsxs("form",{className:"flex flex-col gap-2 max-w-md",children:[n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"Current Password",disabled:!0}),n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"New Password",disabled:!0}),n.jsx("input",{type:"password",className:"border rounded px-3 py-2",placeholder:"Confirm New Password",disabled:!0}),n.jsx("button",{type:"button",className:"bg-gray-300 text-gray-600 rounded px-4 py-2 mt-2 cursor-not-allowed",disabled:!0,children:"Change Password (Coming Soon)"})]})]}),n.jsxs("form",{className:"flex flex-col gap-4 max-w-md dark:bg-gray-800 dark:border-gray-700 dark:text-white p-4 rounded border",onSubmit:v,children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),n.jsxs("select",{name:"language",value:e.language,onChange:x,className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"en",children:"English"}),n.jsx("option",{value:"es",children:"Spanish"}),n.jsx("option",{value:"fr",children:"French"}),n.jsx("option",{value:"de",children:"German"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time Zone"}),n.jsxs("select",{name:"timeZone",value:e.timeZone,onChange:x,className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"UTC",children:"UTC"}),n.jsx("option",{value:"America/New_York",children:"America/New_York"}),n.jsx("option",{value:"Europe/London",children:"Europe/London"}),n.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"block text-sm font-medium",children:"Theme"}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"theme",value:"light",checked:e.theme==="light",onChange:x})," Light"]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"theme",value:"dark",checked:e.theme==="dark",onChange:x})," Dark"]})]}),l&&n.jsx("div",{className:"text-red-500 text-sm",children:l}),d&&n.jsx("div",{className:"text-green-600 text-sm",children:"Preferences saved!"}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2",disabled:a||r,children:a?"Saving...":"Save Preferences"})]})]})}function iee(){return n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notifications"}),n.jsx("p",{className:"text-gray-600",children:"Set your email notification preferences."})]})}function oee(){const[e,t]=Q.useState([]),[r,s]=Q.useState(!0),[a,i]=Q.useState(null),[l,u]=Q.useState({page:1,limit:20,total:0,pages:0}),[d,h]=Q.useState(150);Q.useEffect(()=>{(async()=>{var w,C;try{s(!0),i(null);const N=await vI(l.page,l.limit,d);N.data.success&&(t(N.data.data),u(N.data.pagination))}catch(N){i(((C=(w=N.response)==null?void 0:w.data)==null?void 0:C.message)||"Failed to load login activity")}finally{s(!1)}})()},[l.page,l.limit,d]);const f=b=>new Date(b).toLocaleString(),m=b=>b?b.includes("Mobile")?"Mobile":b.includes("Tablet")?"Tablet":b.includes("Windows")?"Windows":b.includes("Mac")?"Mac":b.includes("Linux")?"Linux":"Desktop":"Unknown",g=b=>b?b.includes("Chrome")?"Chrome":b.includes("Firefox")?"Firefox":b.includes("Safari")?"Safari":b.includes("Edge")?"Edge":"Unknown Browser":"Unknown",x=b=>{u(w=>({...w,page:b}))},v=b=>{h(b),u(w=>({...w,page:1}))};return n.jsxs("div",{className:"dark:text-white",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"Recent Login Activity"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"View your recent login sessions and security information."}),n.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{htmlFor:"activity-filter",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show activity from:"}),n.jsxs("select",{id:"activity-filter",name:"activity-filter",value:d,onChange:b=>v(Number(b.target.value)),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[n.jsx("option",{value:7,children:"Last 7 days"}),n.jsx("option",{value:30,children:"Last 30 days"}),n.jsx("option",{value:90,children:"Last 90 days"}),n.jsx("option",{value:150,children:"Last 5 months"})]})]}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",e.length," of ",l.total," records"]})]}),r?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsx("p",{className:"text-red-600 dark:text-red-400",children:a})}):e.length===0?n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No login activity found."})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date & Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Device"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Browser"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:e.map((b,w)=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:f(b.timestamp)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b.success?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:b.success?"Success":"Failed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:b.ipAddress}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:m(b.userAgent)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:g(b.userAgent)})]},b._id||w))})]})})}),l.pages>1&&n.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[n.jsx("button",{onClick:()=>x(l.page-1),disabled:l.page<=1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Previous"}),n.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300",children:["Page ",l.page," of ",l.pages]}),n.jsx("button",{onClick:()=>x(l.page+1),disabled:l.page>=l.pages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Next"})]})]})]})}const lee={profile:see,settings:aee,notifications:iee,activity:oee},cee=()=>{const[e,t]=j.useState("profile"),r=lee[e];return n.jsxs("div",{className:"flex min-h-[70vh]",children:[n.jsx("nav",{className:"w-56 bg-white border-r p-6 flex flex-col gap-4",children:nee.map(s=>n.jsx("button",{className:`text-left px-3 py-2 rounded transition font-medium ${e===s.key?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>t(s.key),children:s.label},s.key))}),n.jsx("main",{className:"flex-1 p-8",children:n.jsx(r,{})})]})},uee=()=>{const[e,t]=j.useState([]),[r,s]=j.useState([]),[a,i]=j.useState({}),[l,u]=j.useState(!0),[d,h]=j.useState(null),[f,m]=j.useState(""),[g,x]=j.useState("all"),[v,b]=j.useState("all"),[w,C]=j.useState("grid"),[N,E]=j.useState(null),S=Lt(),{user:_,loading:D}=Et();if(j.useEffect(()=>{if(D||!_)return;(async()=>{var M,W;u(!0),h(null);try{if(_.role==="teacher"||_.role==="admin"){const U=(await Ie.get("/groups/sets/my")).data.data||[],Z=await Promise.all(U.map(async B=>{try{const Se=(await Ie.get(`/groups/sets/${B._id}/groups`)).data||[];i(ae=>({...ae,[B._id]:Se}));const G=new Set;return Se.forEach((ae,X)=>{ae.members&&Array.isArray(ae.members)&&ae.members.forEach((V,ie)=>{const be=V._id||V.id||V.email;be&&G.add(be)})}),{...B,totalGroups:Se.length,totalMembers:G.size}}catch(Ce){return console.error(`Error fetching groups for set ${B._id}:`,Ce),{...B,totalGroups:0,totalMembers:0}}}));s(Z)}else{const R=await Ie.get("/groups/my");t(R.data.data||[])}}catch(R){console.error("Error fetching data:",R),((M=R.response)==null?void 0:M.status)===401?h("Please log in to view groups"):((W=R.response)==null?void 0:W.status)===500?h("Server error. Please try again later."):h("Failed to load groups")}finally{u(!1)}})()},[_,D]),D)return n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(!_)return n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 text-lg mb-4",children:"Please log in to view groups"}),n.jsx("button",{onClick:()=>S("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200",children:"Go to Login"})]})});const T=_.role==="teacher"||_.role==="admin",P=T?"All Group Sets":"All Groups",O=T?"View all group sets from all your courses in one place":"View all groups from all your courses in one place",F=L=>{const M=localStorage.getItem("courseColors");return(M?JSON.parse(M):{})[L]||"#556B2F"},$=()=>T?[...new Set(r.map(L=>{var M;return(M=L.course)==null?void 0:M.title}).filter(Boolean))]:[...new Set(e.map(L=>{var M;return(M=L.course)==null?void 0:M.title}).filter(Boolean))],q=(()=>{let L=T?r:e;if(f&&(L=L.filter(M=>{var W;return M.name.toLowerCase().includes(f.toLowerCase())||((W=M.course)==null?void 0:W.title.toLowerCase().includes(f.toLowerCase()))})),g!=="all"&&(L=L.filter(M=>{var W;return((W=M.course)==null?void 0:W.title)===g})),N)if(T)switch(N){case"groupSets":break;case"groups":L=L.filter(M=>(M.totalGroups||0)>0);break;case"members":L=L.filter(M=>(M.totalMembers||0)>0);break;case"active":L=L.filter(M=>M.allowSelfSignup);break}else switch(N){case"groups":break;case"members":L=L.filter(M=>{const W=M;return W.members&&W.members.length>0});break;case"leaders":L=L.filter(M=>M.leader);break;case"active":L=L.filter(M=>{const W=M;return W.members&&W.members.length>0});break}return L})(),H=$(),ee=(()=>{if(T){const L=new Set;q.forEach((W,R)=>{(a[W._id]||[]).forEach((Z,B)=>{Z.members&&Array.isArray(Z.members)&&Z.members.forEach((Ce,Se)=>{const G=Ce._id||Ce.id||Ce.email;G&&L.add(G)})})});const M=q.reduce((W,R)=>W+(R.totalGroups||0),0);return{totalGroupSets:q.length,totalGroups:M,totalMembers:L.size,activeGroupSets:q.filter(W=>W.allowSelfSignup).length}}else{const L=new Set;return q.forEach((M,W)=>{M.members&&Array.isArray(M.members)&&M.members.forEach((R,U)=>{const Z=R._id||R.id||R.email;Z&&L.add(Z)})}),{totalGroups:q.length,totalMembers:L.size,groupsWithLeader:q.filter(M=>M.leader).length,activeGroups:q.filter(M=>M.members&&M.members.length>0).length}}})();return n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:P}),n.jsx("p",{className:"text-gray-600",children:O})]}),T&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-blue-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${N==="groupSets"?"ring-2 ring-blue-300 shadow-lg":""}`,onClick:()=>E(N==="groupSets"?null:"groupSets"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Wt,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Group Sets"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee.totalGroupSets})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-green-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${N==="groups"?"ring-2 ring-green-300 shadow-lg":""}`,onClick:()=>E(N==="groups"?null:"groups"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(gn,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Groups"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee.totalGroups})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-purple-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${N==="members"?"ring-2 ring-purple-300 shadow-lg":""}`,onClick:()=>E(N==="members"?null:"members"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Fa,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee.totalMembers})]})]})}),n.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-l-4 border-orange-500 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${N==="active"?"ring-2 ring-orange-300 shadow-lg":""}`,onClick:()=>E(N==="active"?null:"active"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Bn,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sets"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee.activeGroupSets})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:n.jsx(sD,{className:"w-5 h-5 text-blue-600"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Filters & Search"})]}),T&&n.jsxs("button",{onClick:()=>S("/groups/create"),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[n.jsx(Ra,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Create Group Set"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Search Groups"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search by name or course...",value:f,onChange:L=>m(L.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Filter by Course"}),n.jsxs("select",{value:g,onChange:L=>x(L.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white appearance-none cursor-pointer",children:[n.jsxs("option",{value:"all",children:["All Courses (",T?r.length:e.length,")"]}),H.map(L=>{const M=T?r.filter(W=>{var R;return((R=W.course)==null?void 0:R.title)===L}).length:e.filter(W=>{var R;return((R=W.course)==null?void 0:R.title)===L}).length;return n.jsxs("option",{value:L,children:[L," (",M,")"]},L)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"View Mode"}),n.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[n.jsx("button",{onClick:()=>C("grid"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${w==="grid"?"bg-white text-blue-600 shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"}),n.jsx("div",{className:"w-1 h-1 bg-current rounded-sm"})]}),n.jsx("span",{children:"Grid"})]})}),n.jsx("button",{onClick:()=>C("list"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${w==="list"?"bg-white text-blue-600 shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsxs("div",{className:"flex flex-col space-y-0.5",children:[n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"}),n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"}),n.jsx("div",{className:"w-3 h-0.5 bg-current rounded-sm"})]}),n.jsx("span",{children:"List"})]})})]})]})]}),(f||g!=="all"||N)&&n.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Active filters:"}),f&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',f,'"',n.jsx("button",{onClick:()=>m(""),className:"ml-2 hover:text-blue-600",children:n.jsx(Ms,{className:"w-3 h-3"})})]}),g!=="all"&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Course: ",g,n.jsx("button",{onClick:()=>x("all"),className:"ml-2 hover:text-green-600",children:n.jsx(Ms,{className:"w-3 h-3"})})]}),N&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Metric: ",N,n.jsx("button",{onClick:()=>E(null),className:"ml-2 hover:text-purple-600",children:n.jsx(Ms,{className:"w-3 h-3"})})]})]}),n.jsx("button",{onClick:()=>{m(""),x("all"),E(null)},className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear all filters"})]})]}),l&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!l&&T&&q.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",q.length," of ",T?r.length:e.length," ",T?"group sets":"groups",(f||g!=="all")&&n.jsx("span",{className:"ml-2 text-gray-400",children:"(filtered)"})]})}),n.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:q.map(L=>{var W,R,U,Z,B;const M=L;return n.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 ${w==="list"?"flex items-center":""}`,onClick:()=>S(`/groupsets/${M._id}`),children:w==="grid"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 relative",style:{backgroundColor:F(((W=M.course)==null?void 0:W._id)||"default")},children:n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("div",{className:"w-5 h-5 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Wt,{className:"h-3 w-3 text-white"})})})}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"font-bold text-base mb-1",style:{color:F(((R=M.course)==null?void 0:R._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-xs",children:((U=M.course)==null?void 0:U.title)||"Unknown Course"})]})})]}):n.jsx("div",{className:"flex-1 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-base",style:{color:F(((Z=M.course)==null?void 0:Z._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-sm",children:((B=M.course)==null?void 0:B.title)||"Unknown Course"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.totalGroups||0}),n.jsx("p",{className:"text-xs text-gray-500",children:"Groups"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.totalMembers||0}),n.jsx("p",{className:"text-xs text-gray-500",children:"Members"})]})]})]})})},M._id)})})]}),!l&&!T&&q.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",q.length," of ",T?r.length:e.length," ",T?"group sets":"groups",(f||g!=="all")&&n.jsx("span",{className:"ml-2 text-gray-400",children:"(filtered)"})]})}),n.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:q.map(L=>{var W,R,U,Z,B;const M=L;return n.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 ${w==="list"?"flex items-center":""}`,onClick:()=>S(`/groups/${M._id}`),children:w==="grid"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-20 relative",style:{backgroundColor:F(((W=M.course)==null?void 0:W._id)||"default")},children:n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("div",{className:"w-5 h-5 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Wt,{className:"h-3 w-3 text-white"})})})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"font-bold text-base mb-1",style:{color:F(((R=M.course)==null?void 0:R._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-xs",children:((U=M.course)==null?void 0:U.title)||"Unknown Course"})]}),M.members&&M.members.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:["Members (",M.members.length,")"]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.members.slice(0,2).map((Ce,Se)=>n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-700",children:[Ce.firstName," ",Ce.lastName]},Se)),M.members.length>2&&n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-700",children:["+",M.members.length-2," more"]})]})]}),M.leader&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Leader"}),n.jsxs("p",{className:"text-xs text-gray-700 font-medium",children:[M.leader.firstName," ",M.leader.lastName]})]})]})]}):n.jsx("div",{className:"flex-1 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-base",style:{color:F(((Z=M.course)==null?void 0:Z._id)||"default")},children:M.name}),n.jsx("p",{className:"text-gray-500 text-sm",children:((B=M.course)==null?void 0:B.title)||"Unknown Course"}),M.members&&M.members.length>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.members.length," member",M.members.length!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[M.leader&&n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.leader.firstName," ",M.leader.lastName]}),n.jsx("p",{className:"text-xs text-gray-500",children:"Leader"})]}),M.members&&M.members.length>0&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.members.length}),n.jsx("p",{className:"text-xs text-gray-500",children:"Members"})]})]})]})})},M._id)})})]}),!l&&q.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx(Wt,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f||g!=="all"?"No groups found":"No groups yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:f||g!=="all"?"Try adjusting your search or filters to find what you're looking for.":T?"Create your first group set to get started with collaborative learning.":"You haven't been assigned to any groups yet."}),!f&&g==="all"&&T&&n.jsx("button",{onClick:()=>S("/groups/create"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Group Set"})]}),d&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Uo,{className:"w-8 h-8 text-red-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error loading groups"}),n.jsx("p",{className:"text-gray-500 mb-6",children:d}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})]})},dee=()=>{var f;const{groupSetId:e}=br(),[t,r]=j.useState([]),[s,a]=j.useState(null),[i,l]=j.useState(!0),[u,d]=j.useState(null),h=Lt();return j.useEffect(()=>{(async()=>{if(e){l(!0),d(null);try{const g=await Ie.get(`/groups/sets/${e}/groups`);r(g.data||[]);const x=await Ie.get(`/groups/sets/id/${e}`);a(x.data)}catch(g){console.error("Error fetching groupset data:",g),d("Failed to load groupset data")}finally{l(!1)}}})()},[e]),i?n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):u?n.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("div",{className:"text-red-800",children:u})})}):n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(s==null?void 0:s.name)||"Group Set"}),n.jsx("p",{className:"text-gray-600",children:((f=s==null?void 0:s.course)==null?void 0:f.title)||"Unknown Course"})]}),n.jsx("button",{onClick:()=>h(-1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"← Back"})]}),s&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${s.allowSelfSignup?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.allowSelfSignup?"Self Signup Allowed":"Self Signup Disabled"})}),s.groupStructure&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700",children:s.groupStructure==="manual"?"Manual":s.groupStructure==="byGroupCount"?"By Group Count":"By Students Per Group"})})]})})]}),t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No groups found"}),n.jsx("div",{className:"text-gray-400",children:"This group set doesn't have any groups yet."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>n.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-100",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:m.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Group ID: ",m.groupId]})]})}),m.members&&m.members.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:["Members (",m.members.length,")"]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.members.slice(0,3).map((g,x)=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:[g.firstName," ",g.lastName]},x)),m.members.length>3&&n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:["+",m.members.length-3," more"]})]})]}),m.leader&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Leader"}),n.jsxs("p",{className:"text-sm text-gray-700",children:[m.leader.firstName," ",m.leader.lastName]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 text-sm font-medium",onClick:()=>h(`/groups/${m._id}`),children:"View Group"}),n.jsx("button",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200 text-sm",onClick:()=>h(`/groups/${m._id}/discussion`),children:n.jsx(Er,{className:"w-4 h-4"})})]})]})},m._id))})]})},fee=()=>{const{user:e}=Et(),[t,r]=j.useState([]),[s,a]=j.useState(!0),[i,l]=j.useState(null),[u,d]=j.useState(""),[h,f]=j.useState(""),[m,g]=j.useState(!1);j.useEffect(()=>{x()},[]);const x=async()=>{var N,E;try{a(!0),l(null);const S=localStorage.getItem("token");if(!S){l("Please log in to view the course catalog"),a(!1);return}try{const _=await me.get(`${ke}/api/courses/available/browse`,{headers:{Authorization:`Bearer ${S}`}});if(_.data.success){r(_.data.data);return}}catch(_){console.log("New route failed, trying fallback catalog route:",_.message)}try{const _=await me.get(`${ke}/api/catalog`,{headers:{Authorization:`Bearer ${S}`}});r(_.data)}catch(_){console.error("Fallback route also failed:",_),l("Failed to fetch course catalog. Please try again later.")}}catch(S){console.error("Error fetching catalog:",S),l(((E=(N=S.response)==null?void 0:N.data)==null?void 0:E.message)||"Failed to fetch course catalog")}finally{a(!1)}},v=t.filter(N=>{var _;const E=N.title.toLowerCase().includes(u.toLowerCase())||N.description.toLowerCase().includes(u.toLowerCase())||N.instructor.firstName.toLowerCase().includes(u.toLowerCase())||N.instructor.lastName.toLowerCase().includes(u.toLowerCase()),S=!h||((_=N.catalog)==null?void 0:_.subject)===h;return E&&S}),b=[...new Set(t.map(N=>{var E;return(E=N.catalog)==null?void 0:E.subject}).filter(Boolean))],w=async N=>{var E,S;try{const _=localStorage.getItem("token");await me.post(`${ke}/api/courses/${N}/enroll`,{},{headers:{Authorization:`Bearer ${_}`}}),alert("Enrollment request submitted successfully! Waiting for teacher approval."),await x()}catch(_){alert(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Failed to submit enrollment request")}},C=async N=>{var E,S;if(confirm("Are you sure you want to unenroll from this course? This action cannot be undone."))try{const _=localStorage.getItem("token");await me.post(`${ke}/api/courses/${N}/unenroll-self`,{},{headers:{Authorization:`Bearer ${_}`}}),alert("Successfully unenrolled from the course!"),await x()}catch(_){alert(((S=(E=_.response)==null?void 0:E.data)==null?void 0:S.message)||"Failed to unenroll from the course")}};return s?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-red-600 mb-4",children:i}),n.jsx("div",{className:"space-y-2",children:n.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2",children:"Try Again"})})]}):n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Catalog"}),n.jsx("p",{className:"text-gray-600",children:"Browse and discover courses available at your institution"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Mi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search courses by title, description, or instructor...",value:u,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("button",{onClick:()=>g(!m),className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:[n.jsx(sD,{className:"w-5 h-5"}),"Filters"]})]}),m&&n.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),n.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Subjects"}),b.map(N=>n.jsx("option",{value:N,children:N},N))]})]})})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("p",{className:"text-gray-600",children:["Showing ",v.length," of ",t.length," courses"]})}),v.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(or,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses found"}),n.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters"})]}):n.jsx("div",{className:"space-y-4",children:v.map(N=>n.jsx(mee,{course:N,onEnroll:w,onUnenroll:C},N._id))})]})})},mee=({course:e,onEnroll:t,onUnenroll:r})=>{var N,E,S,_,D,T,P,O;const{user:s}=Et(),[a,i]=j.useState(!1),[l,u]=j.useState(!1),d=async()=>{i(!0);try{await t(e._id)}finally{i(!1)}},h=((N=e.students)==null?void 0:N.length)||0,f=((E=e.catalog)==null?void 0:E.maxStudents)||0,m=f>0?`${h}/${f}`:`${h} enrolled`,g=f>0&&h>f,x=()=>{var F;return s&&((F=e.students)==null?void 0:F.some($=>$._id===s._id))||!1},v=()=>{var F;return s&&((F=e.waitlist)==null?void 0:F.some($=>$.student._id===s._id))||!1},b=()=>{var $;if(!s)return null;const F=($=e.waitlist)==null?void 0:$.find(z=>z.student._id===s._id);return F?F.position:null},w=()=>{var $,z;const F=(($=e.catalog)==null?void 0:$.maxStudents)||0;return F>0&&(((z=e.students)==null?void 0:z.length)||0)>=F},C=()=>{var F;return(s==null?void 0:s.role)==="teacher"?((F=e.catalog)==null?void 0:F.allowTeacherEnrollment)||!0:!x()&&!v()};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200",children:[n.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>u(!l),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:n.jsx(or,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),((S=e.catalog)==null?void 0:S.subject)&&n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e.catalog.subject})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(ko,{className:"w-4 h-4 mr-1"}),n.jsxs("span",{children:[e.instructor.firstName," ",e.instructor.lastName]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Wt,{className:"w-4 h-4 mr-1"}),n.jsxs("span",{className:g?"text-orange-600 font-medium":"",children:[m,g&&" (Over Capacity)"]})]}),x()&&n.jsx("div",{className:"flex items-center",children:n.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium",children:"✓ Enrolled"})}),v()&&n.jsx("div",{className:"flex items-center",children:n.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full font-medium",children:["📋 Waitlist Position ",b()]})}),w()&&!v()&&n.jsx("div",{className:"flex items-center",children:n.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full font-medium",children:"🚫 Course Full"})})]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),l&&n.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Course Description"}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:((_=e.catalog)==null?void 0:_.description)||e.description})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Course Details"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Instructor:"}),n.jsxs("span",{className:"font-medium",children:[e.instructor.firstName," ",e.instructor.lastName]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Enrollment:"}),n.jsxs("span",{className:`font-medium ${g?"text-orange-600":""}`,children:[m,g&&" (Over Capacity)"]})]}),w()&&e.waitlist&&e.waitlist.length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Waitlist:"}),n.jsxs("span",{className:"font-medium text-orange-600",children:[e.waitlist.length," students waiting"]})]}),((D=e.catalog)==null?void 0:D.prerequisites)&&e.catalog.prerequisites.length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Prerequisites:"}),n.jsx("span",{className:"font-medium",children:e.catalog.prerequisites.join(", ")})]}),((T=e.catalog)==null?void 0:T.startDate)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Start Date:"}),n.jsx("span",{className:"font-medium",children:new Date(e.catalog.startDate).toLocaleDateString()})]}),((P=e.catalog)==null?void 0:P.endDate)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"End Date:"}),n.jsx("span",{className:"font-medium",children:new Date(e.catalog.endDate).toLocaleDateString()})]})]})]})]}),((O=e.catalog)==null?void 0:O.tags)&&e.catalog.tags.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.catalog.tags.map((F,$)=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:F},$))})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:x()?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-green-600 font-medium",children:"✓ Enrolled"}),n.jsx("button",{onClick:()=>r(e._id),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Unenroll"})]}):v()?n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-orange-600 font-medium",children:["📋 Waitlist Position ",b()]}),n.jsx("button",{disabled:!0,className:"px-6 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed transition-colors font-medium",children:"On Waitlist"})]}):C()?n.jsx("button",{onClick:d,disabled:a,className:`px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium ${w()?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700"}`,children:a?"Processing...":w()&&(s==null?void 0:s.role)==="teacher"?"Enroll (Override Capacity)":w()?"Join Waitlist":"Enroll"}):null})]})]})},hee=()=>{const{courseId:e}=br(),{user:t}=Et(),[r,s]=j.useState([]),[a,i]=j.useState([]),[l,u]=j.useState(!0),[d,h]=j.useState(null),f=(t==null?void 0:t.role)==="teacher"||(t==null?void 0:t.role)==="admin";j.useEffect(()=>{if(!e)return;(async()=>{var b;try{u(!0),h(null);const w=await Ie.get(`/courses/${e}/students`);if(s(w.data),f){console.log("Fetching enrollment requests for course:",e);try{const C=await Ie.get(`/courses/${e}/enrollment-requests`);console.log("Enrollment requests response:",C.data),i(C.data)}catch(C){console.error("Error fetching enrollment requests:",C),console.error("Error response:",(b=C.response)==null?void 0:b.data)}}}catch(w){h("Failed to load course people"),console.error("Error fetching course people:",w)}finally{u(!1)}})()},[e,f]);const m=async v=>{try{await Ie.post(`/courses/${e}/enrollment/${v}/approve`),i(w=>w.filter(C=>C.student._id!==v));const b=await Ie.get(`/courses/${e}/students`);s(b.data),alert("Enrollment approved successfully!")}catch(b){console.error("Error approving enrollment:",b),alert("Failed to approve enrollment")}},g=async v=>{try{await Ie.post(`/courses/${e}/enrollment/${v}/deny`),i(b=>b.filter(w=>w.student._id!==v)),alert("Enrollment denied successfully!")}catch(b){console.error("Error denying enrollment:",b),alert("Failed to deny enrollment")}},x=async v=>{if(confirm("Are you sure you want to remove this student from the course?"))try{await Ie.post(`/courses/${e}/unenroll`,{studentId:v}),s(b=>b.filter(w=>w._id!==v))}catch(b){console.error("Error removing student:",b),alert("Failed to remove student")}};return l?n.jsx("div",{className:"max-w-4xl mx-auto py-8",children:n.jsx("div",{className:"text-center",children:"Loading..."})}):d?n.jsx("div",{className:"max-w-4xl mx-auto py-8",children:n.jsx("div",{className:"text-red-500 text-center",children:d})}):n.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Course People"}),n.jsxs("div",{className:"mb-6 p-4 bg-red-500 text-white border-4 border-red-700 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-white mb-2 text-xl",children:"🚨 SUPER OBVIOUS DEBUG SECTION 🚨"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Course ID:"})," ",e||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"User Role:"})," ",(t==null?void 0:t.role)||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Is Teacher/Admin:"})," ",f?"YES":"NO"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Loading:"})," ",l?"YES":"NO"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Error:"})," ",d||"none"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Students Count:"})," ",r.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Requests Count:"})," ",a.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Timestamp:"})," ",new Date().toLocaleTimeString()]})]}),n.jsxs("div",{className:"mb-6 p-4 bg-yellow-100 border border-yellow-300 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-yellow-800 mb-2",children:"DEBUG INFO:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Course ID:"})," ",e||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"User Role:"})," ",(t==null?void 0:t.role)||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Is Teacher/Admin:"})," ",f?"YES":"NO"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Loading:"})," ",l?"YES":"NO"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Error:"})," ",d||"none"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Students Count:"})," ",r.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Requests Count:"})," ",a.length]})]}),f&&n.jsxs("div",{className:"mb-6 p-4 bg-blue-100 border border-blue-300 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"TEACHER DEBUG INFO:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Course ID:"})," ",e||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"User Role:"})," ",(t==null?void 0:t.role)||"undefined"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Is Teacher/Admin:"})," ",f?"YES":"NO"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Requests Count:"})," ",a.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Enrollment Requests Data:"})," ",JSON.stringify(a,null,2)]}),n.jsx("button",{onClick:async()=>{try{console.log("Testing API call for course:",e);const v=await Ie.get(`/courses/${e}/enrollment-requests`);console.log("Test API response:",v.data),alert(`API call successful! Found ${v.data.length} enrollment requests. Check console for details.`),i(v.data)}catch(v){console.error("Test API call failed:",v),alert("Test API call failed: "+v.message)}},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Test Enrollment Requests API"})]}),f&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-orange-600",children:["Pending Enrollment Requests (",a.length,")"]}),a.length===0?n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center text-orange-700",children:"No pending enrollment requests at this time."}):n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:v.student.profilePicture?n.jsx("img",{src:v.student.profilePicture,alt:`${v.student.firstName} ${v.student.lastName}`,className:"w-10 h-10 rounded-full object-cover"}):n.jsxs("span",{className:"text-gray-600 font-medium",children:[v.student.firstName.charAt(0),v.student.lastName.charAt(0)]})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-gray-800",children:[v.student.firstName," ",v.student.lastName," wants to join"]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(v.requestDate).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>m(v.student._id),className:"px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors font-medium",children:"Approve"}),n.jsx("button",{onClick:()=>g(v.student._id),className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition-colors font-medium",children:"Deny"})]})]},v._id))})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Enrolled Students (",r.length,")"]}),r.length===0?n.jsx("div",{className:"text-gray-500 text-center py-8",children:"No students enrolled yet."}):n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:r.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:v.profilePicture?n.jsx("img",{src:v.profilePicture,alt:`${v.firstName} ${v.lastName}`,className:"w-10 h-10 rounded-full object-cover"}):n.jsxs("span",{className:"text-gray-600 font-medium",children:[v.firstName.charAt(0),v.lastName.charAt(0)]})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-gray-800",children:[v.firstName," ",v.lastName]}),n.jsx("p",{className:"text-sm text-gray-500",children:v.email})]})]}),f&&n.jsx("button",{onClick:()=>x(v._id),className:"px-3 py-1 text-red-500 hover:text-red-700 text-sm font-medium hover:bg-red-50 rounded-lg transition-colors",children:"Remove"})]},v._id))})]})]})},pee=()=>{const e=[{icon:or,title:"Course Management",description:"Create, organize, and deliver engaging courses with our intuitive course builder."},{icon:Wt,title:"Student Engagement",description:"Foster collaboration through discussions, group projects, and interactive assignments."},{icon:zc,title:"Smart Scheduling",description:"Integrated calendar system for assignments, events, and deadlines."},{icon:gn,title:"Analytics & Insights",description:"Track student progress and course performance with detailed analytics."},{icon:hi,title:"Secure & Reliable",description:"Enterprise-grade security with role-based access control."},{icon:J$,title:"Fast & Responsive",description:"Built with modern technologies for optimal performance."}],t=[{name:"Dr. Sarah Johnson",role:"Computer Science Professor",content:"This LMS has transformed how I teach. The interface is intuitive and my students love the modern design.",rating:5},{name:"Michael Chen",role:"Student",content:"Everything I need is in one place. The mobile app makes studying on the go so much easier.",rating:5}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[n.jsx("nav",{className:"bg-white shadow-sm",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(or,{className:"h-8 w-8 text-blue-600 mr-3"}),n.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"EduLMS"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Mt,{to:"/login",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Sign In"}),n.jsx(Mt,{to:"/signup",className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:"Get Started"})]})]})})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[n.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Transform Your",n.jsx("span",{className:"text-blue-600 block",children:"Learning Experience"})]}),n.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"A modern, intuitive learning management system designed for educators and students. Streamline your teaching, enhance student engagement, and achieve better outcomes."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(Mt,{to:"/signup",className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors inline-flex items-center justify-center",children:["Start Free Trial",n.jsx(bO,{className:"ml-2 h-5 w-5"})]}),n.jsx(Mt,{to:"/demo",className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-lg text-lg font-semibold hover:border-gray-400 transition-colors",children:"Watch Demo"})]})]})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Succeed"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Our comprehensive platform provides all the tools educators and students need for an exceptional learning experience."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((r,s)=>n.jsxs("div",{className:"text-center p-6 rounded-lg hover:shadow-lg transition-shadow",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:n.jsx(r.icon,{className:"h-8 w-8 text-blue-600"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),n.jsx("p",{className:"text-gray-600",children:r.description})]},s))})]})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-blue-600",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"10,000+"}),n.jsx("div",{className:"text-blue-100",children:"Active Students"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"500+"}),n.jsx("div",{className:"text-blue-100",children:"Courses Created"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"99.9%"}),n.jsx("div",{className:"text-blue-100",children:"Uptime"})]})]})})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"text-center mb-16",children:n.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Loved by Educators & Students"})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((r,s)=>n.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[n.jsx("div",{className:"flex items-center mb-4",children:[...Array(r.rating)].map((a,i)=>n.jsx(B$,{className:"h-5 w-5 text-yellow-400 fill-current"},i))}),n.jsxs("p",{className:"text-gray-600 mb-4 italic",children:['"',r.content,'"']}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:r.name}),n.jsx("div",{className:"text-sm text-gray-500",children:r.role})]})]},s))})]})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gray-900",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Ready to Get Started?"}),n.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of educators and students who are already using our platform to transform their learning experience."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Mt,{to:"/signup",className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Your Free Trial"}),n.jsx(Mt,{to:"/contact",className:"border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-gray-900 transition-colors",children:"Contact Sales"})]})]})}),n.jsx("footer",{className:"bg-gray-800 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(or,{className:"h-6 w-6 text-blue-400 mr-2"}),n.jsx("span",{className:"text-xl font-bold text-white",children:"EduLMS"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:"Transforming education through technology and innovation."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Product"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[n.jsx("li",{children:n.jsx(Mt,{to:"/features",className:"hover:text-white",children:"Features"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/pricing",className:"hover:text-white",children:"Pricing"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/integrations",className:"hover:text-white",children:"Integrations"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Company"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[n.jsx("li",{children:n.jsx(Mt,{to:"/about",className:"hover:text-white",children:"About"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/blog",className:"hover:text-white",children:"Blog"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/careers",className:"hover:text-white",children:"Careers"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Support"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[n.jsx("li",{children:n.jsx(Mt,{to:"/help",className:"hover:text-white",children:"Help Center"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/contact",className:"hover:text-white",children:"Contact"})}),n.jsx("li",{children:n.jsx(Mt,{to:"/status",className:"hover:text-white",children:"Status"})})]})]})]}),n.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center",children:n.jsx("p",{className:"text-gray-300 text-sm",children:"© 2024 EduLMS. All rights reserved."})})]})})]})};class gee extends j.Component{constructor(t){super(t),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Error caught by boundary:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:n.jsx(dc,{className:"h-8 w-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or contact support if the problem persists."}),!1,n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs("button",{onClick:this.handleRetry,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(tf,{className:"h-4 w-4 mr-2"}),"Try Again"]}),n.jsxs(Mt,{to:"/",className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(aD,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}const xee=()=>{const{moduleId:e}=br();return e?n.jsx(iT,{moduleId:e}):null},yee=()=>{const{moduleId:e}=br();return e?n.jsx(lT,{moduleId:e}):null};function bee(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"401"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"You are not authorized to access this page."})]})})}function vee(){const{groupId:e}=br(),t=o6(),r=t==null?void 0:t.groupSetId;return!e||!r?n.jsx("div",{children:"No group selected."}):n.jsx(aV,{groupId:e,groupSetId:r})}function wee(){const{user:e}=Et();return(e==null?void 0:e.role)==="admin"?n.jsx(eL,{}):n.jsx(Z$,{})}function jee(){const{user:e,loading:t}=Et(),r=!!e;return t?n.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 dark:text-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 dark:text-white",children:[r&&n.jsx(oV,{}),n.jsx("main",{className:r?"pb-10 pl-20":"pb-10",children:n.jsxs(k6,{children:[n.jsx(Ct,{path:"/",element:r?n.jsx(Py,{to:"/dashboard"}):n.jsx(pee,{})}),n.jsx(Ct,{path:"/login",element:n.jsx(SI,{})}),n.jsx(Ct,{path:"/signup",element:n.jsx(kI,{})}),n.jsx(Ct,{path:"/unauthorized",element:n.jsx(bee,{})}),n.jsx(Ct,{path:"/dashboard",element:n.jsx(zt,{children:n.jsx(wee,{})})}),n.jsx(Ct,{path:"/courses",element:n.jsx(zt,{children:n.jsx(iL,{})})}),n.jsx(Ct,{path:"/courses/create",element:n.jsx(zt,{children:n.jsx(hS,{mode:"create"})})}),n.jsx(Ct,{path:"/courses/:id",element:n.jsx(zt,{children:n.jsx(mS,{})})}),n.jsx(Ct,{path:"/courses/:id/:section",element:n.jsx(zt,{children:n.jsx(mS,{})})}),n.jsx(Ct,{path:"/courses/:courseId/people",element:n.jsx(zt,{children:n.jsx(hee,{})})}),n.jsx(Ct,{path:"/courses/:id/edit",element:n.jsx(zt,{children:n.jsx(hS,{mode:"edit"})})}),n.jsx(Ct,{path:"/courses/:courseId/pages/:pageId",element:n.jsx(zt,{children:n.jsx(Aa,{children:n.jsx(_W,{})})})}),n.jsx(Ct,{path:"/pages/:pageId",element:n.jsx(zt,{children:n.jsx(Aa,{children:n.jsx(oT,{})})})}),n.jsx(Ct,{path:"/modules/:moduleId/assignments",element:n.jsx(zt,{children:n.jsx(xee,{})})}),n.jsx(Ct,{path:"/modules/:moduleId/assignments/create",element:n.jsx(zt,{children:n.jsx(yee,{})})}),n.jsx(Ct,{path:"/assignments/:id/view",element:n.jsx(zt,{children:n.jsx(RW,{})})}),n.jsx(Ct,{path:"/assignments/:id/grade",element:n.jsx(zt,{allowedRoles:["teacher","admin"],children:n.jsx($W,{})})}),n.jsx(Ct,{path:"/assignments/:id/edit",element:n.jsx(zt,{children:n.jsx(TW,{})})}),n.jsx(Ct,{path:"/assignments/:id",element:n.jsx(zt,{children:n.jsx(MW,{})})}),n.jsx(Ct,{path:"/modules/:moduleId/edit",element:n.jsx(zt,{children:n.jsx(Aa,{children:n.jsx(EW,{})})})}),n.jsx(Ct,{path:"/pages/:pageId/edit",element:n.jsx(zt,{children:n.jsx(Aa,{children:n.jsx(DW,{})})})}),n.jsx(Ct,{path:"/courses/:courseId/threads/:threadId",element:n.jsx(zt,{children:n.jsx(SS,{})})}),n.jsx(Ct,{path:"/groups",element:n.jsx(zt,{children:n.jsx(uee,{})})}),n.jsx(Ct,{path:"/groupsets/:groupSetId",element:n.jsx(zt,{children:n.jsx(dee,{})})}),n.jsxs(Ct,{path:"/groups/:groupId/*",element:n.jsx(nV,{}),children:[n.jsx(Ct,{path:"home",element:n.jsx("div",{children:"Group Home (placeholder)"})}),n.jsx(Ct,{path:"pages",element:n.jsx("div",{children:"Group Pages"})}),n.jsx(Ct,{path:"discussion",element:n.jsx(sV,{})}),n.jsx(Ct,{path:"assignments",element:n.jsx("div",{children:"Group Assignments (placeholder)"})}),n.jsx(Ct,{path:"announcements",element:n.jsx("div",{children:"Group Announcements (placeholder)"})}),n.jsx(Ct,{path:"people",element:n.jsx(vee,{})}),n.jsx(Ct,{index:!0,element:n.jsx("div",{children:"Group Home (placeholder)"})})]}),n.jsx(Ct,{path:"/calendar",element:n.jsx(zt,{children:n.jsx(UZ,{})})}),n.jsx(Ct,{path:"/inbox",element:n.jsx(zt,{children:n.jsx(JZ,{})})}),n.jsx(Ct,{path:"/catalog",element:n.jsx(zt,{children:n.jsx(fee,{})})}),n.jsx(Ct,{path:"/account",element:n.jsx(zt,{children:n.jsx(cee,{})})}),n.jsx(Ct,{path:"/threads/:threadId",element:n.jsx(zt,{children:n.jsx(Aa,{children:n.jsx(SS,{})})})}),n.jsx(Ct,{path:"/admin/users",element:n.jsx(zt,{children:n.jsx(tL,{})})}),n.jsx(Ct,{path:"/admin/courses",element:n.jsx(zt,{children:n.jsx(sL,{})})}),n.jsx(Ct,{path:"/admin/analytics",element:n.jsx(zt,{children:n.jsx(rL,{})})}),n.jsx(Ct,{path:"/admin/settings",element:n.jsx(zt,{children:n.jsx(nL,{})})}),n.jsx(Ct,{path:"/admin/security",element:n.jsx(zt,{children:n.jsx(aL,{})})}),n.jsx(Ct,{path:"/admin/backup",element:n.jsx(zt,{children:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Backup & Recovery"}),n.jsx("p",{className:"text-gray-600",children:"System backup and recovery management"})]})})})]})}),n.jsx(yH,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function Nee(){return n.jsx(eA,{store:ZH,children:n.jsx(tee,{children:n.jsx(jI,{children:n.jsx(NI,{children:n.jsx(gee,{children:n.jsx(jee,{})})})})})})}R5.createRoot(document.getElementById("root")).render(n.jsx(Q.StrictMode,{children:n.jsx(R6,{children:n.jsx(Nee,{})})}));
